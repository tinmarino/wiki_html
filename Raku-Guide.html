<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Raku-Guide.md – -</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="Css/include.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>= Raku Guide :description: A general introduction to Raku :Author: Naoum Hankache :keywords: perl6, perl 6, introduction, perl6intro, perl 6 introduction, perl 6 tutorial, perl 6 intro, raku, raku introduction, raku guide, raku tutorial :Email: naoum@hankache.com :Revision: 1.0 :icons: font :source-highlighter: pygments //:pygments-style: manni :source-language: perl6 :pygments-linenums-mode: table :toc: left :doctype: book :lang: en</p>
<p>This document is intended to give you a quick overview of the Raku programming language. + For those new to Raku, it should get you up and running.</p>
<p>Some sections of this document refer to other (more complete and accurate) parts of the https://docs.raku.org[Raku documentation]. You should read them if you need more information on a specific subject.</p>
<p>Throughout this document, you will find examples for most discussed topics. To better understand them, take the time to reproduce all examples.</p>
<p>.License This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit</p>
<ul>
<li>https://creativecommons.org/licenses/by-sa/4.0/.</li>
</ul>
<p>.Contribution If you would like to contribute to this document, head over to:</p>
<ul>
<li>https://github.com/hankache/rakuguide</li>
</ul>
<p>.Feedback All feedback is welcomed: naoum@hankache.com</p>
<p>If you liked this work, <em>Star</em> the repository on link:https://github.com/hankache/rakuguide[Github].</p>
<p>.Translations * Bulgarian: https://raku.guide/bg * Chinese: https://raku.guide/zh * Dutch: https://raku.guide/nl * French: https://raku.guide/fr * German: https://raku.guide/de * Indonesian: https://raku.guide/id * Italian https://raku.guide/it * Japanese: https://raku.guide/ja * Portuguese: https://raku.guide/pt * Spanish: https://raku.guide/es * Turkish: https://raku.guide/tr * Russian: https://raku.guide/ru</p>
<p>:sectnums: == Introduction === What is Raku Raku is a high-level, general-purpose, gradually typed language. Raku is multi-paradigmatic. It supports Procedural, Object Oriented, and Functional programming.</p>
<p>.Raku motto: * TMTOWTDI (Pronounced Tim Toady): There is more than one way to do it.</p>
<p>=== Jargon * <em>Raku</em>: Is a language specification with a test suite. Implementations that pass the specification test suite are considered Raku. * <em>Rakudo</em>: Is a compiler for Raku. * <em>Zef</em>: Is a Raku module installer. * <em>Rakudo Star</em>: Is a bundle that includes Rakudo, Zef, a collection of Raku modules, and documentation.</p>
<p>=== Installing Raku .Linux</p>
<section id="to-install-rakudo-star-run-the-following-commands-from-your-terminal" class="level2">
<h2>To install Rakudo Star, run the following commands from your terminal:</h2>
<p>wget https://rakudo.perl6.org/downloads/star/rakudo-star-2019.03.tar.gz tar xfz rakudo-star-2019.03.tar.gz cd rakudo-star-2019.03 perl Configure.pl –gen-moar –make-install –prefix ~/rakudo —- For other options, go to http://rakudo.org/how-to-get-rakudo/ #Installing-Rakudo-Star-Linux</p>
<p>.macOS Four options are available:</p>
<ul>
<li>Follow the same steps listed for installing on Linux</li>
<li>Install with homebrew: <code>brew install rakudo-star</code></li>
<li>Install with MacPorts: <code>sudo port install rakudo</code></li>
<li>Get the latest installer (file with .dmg extension) from https://rakudo.org/latest/star/macos</li>
</ul>
<p>.Windows . For 64-bit architectures: Get the latest installer (file with .msi extension) from https://rakudo.org/latest/star/win . After installation, make sure <code>C:\rakudo\bin</code> is in the PATH</p>
<p>.Docker . Get the official Docker image <code>docker pull rakudo-star</code> . Then run a container with the image <code>docker run -it rakudo-star</code></p>
<p>=== Running Raku code</p>
<p>Running Raku code can be done using the REPL (Read-Eval-Print Loop). To do this, open a terminal, type <code>raku</code> into the terminal window, and hit [Enter]. This will cause a prompt of <code>&gt;</code> to appear. Next, type a line of code and hit [Enter]. The REPL will print out the value of the line. You may then type another line, or type <code>exit</code> and hit [Enter] to leave the REPL.</p>
<p>Alternatively, write your code in a file, save it and run it. It is recommended that Raku scripts have a <code>.raku</code> file name extension. Run the file by typing <code>raku filename.raku</code> into the terminal window and hitting [Enter]. Unlike the REPL, this will not automatically print the result of each line: the code must contain a statement like <code>say</code> to print output.</p>
<p>The REPL is mostly used for trying a specific piece of code, typically a single line. For programs with more than a single line it is recommended to store them in a file and then run them.</p>
<p>Single lines may also be tried non-interactively on the command-line by typing <code>raku -e 'your code here'</code> and hitting [Enter].</p>
</section>
<section id="tip" class="level2">
<h2>[TIP]</h2>
<p>Rakudo Star bundles a line editor that helps you get the most out of the REPL.</p>
<p>If you installed plain Rakudo instead of Rakudo Star then you probably don’t have line editing features enabled (using the up and down arrows for history, left and right to edit input, TAB completion). Consider running the following command and you shall be all set:</p>
<ul>
<li><p><code>zef install Linenoise</code> would work on Windows, Linux and macOS</p></li>
<li><h2 id="zef-install-readline-if-you-are-on-linux-and-prefer-the-readline-library"><code>zef install Readline</code> if you are on Linux and prefer the <em>Readline</em> library</h2></li>
</ul>
<p>=== Editors Since most of the time we will be writing and storing our Raku programs in files, we should have a decent text editor that recognizes Raku syntax.</p>
<p>I personally use and recommend https://atom.io/[Atom]. It is a modern text editor and comes with Raku syntax highlighting out of the box. https://atom.io/packages/language-perl6[Perl 6 FE] is an alternative Raku syntax highlighter for Atom, derived from the original package but with many bug fixes and additions.</p>
<p>Other people in the community also use http://www.vim.org/[Vim], https://www.gnu.org/software/emacs/[Emacs] or http://padre.perlide.org/[Padre].</p>
<p>Recent versions of Vim ship with syntax highlighting out of the box. Emacs and Padre will require installation of additional packages.</p>
<p>=== Hello World! We shall begin with The <code>hello world</code> ritual.</p>
<p>[source,perl6] say ‘hello world’;</p>
<p>that can also be written as:</p>
<p>[source,perl6] ‘hello world’.say;</p>
<p>=== Syntax overview Raku is <em>free form</em>: Most of the time you are free to use any amount of whitespace, although in certain cases whitespace carries meaning.</p>
<p><em>Statements</em> are typically a logical line of code, they need to end with a semicolon: <code>say "Hello" if True;</code></p>
<p><em>Expressions</em> are a special type of statement that returns a value: <code>1+2</code> will return <code>3</code></p>
<p>Expressions are made of <em>Terms</em> and <em>Operators</em>.</p>
<p><em>Terms</em> are:</p>
<ul>
<li><p><em>Variables</em>: A value that can be manipulated and changed.</p></li>
<li><p><em>Literals</em>: A constant value like a number or a string.</p></li>
</ul>
<p><em>Operators</em> are classified into types:</p>
<p>|===</p>
<div class="line-block"><em>Type</em> | <em>Explanation</em> | <em>Example</em></div>
<div class="line-block">Prefix | Before the term. | <code>++1</code></div>
<div class="line-block">Infix | Between terms | <code>1+2</code></div>
<div class="line-block">Postfix | After the term | <code>1++</code></div>
<div class="line-block">Circumfix | Around the term | <code>(1)</code></div>
<div class="line-block">Postcircumfix | After one term, around another | <code>Array[1]</code></div>
<p>|===</p>
<p>==== Identifiers Identifiers are the names given to terms when you define them.</p>
<p>.Rules: * They must start with an alphabetic character or an underscore.</p>
<ul>
<li><p>They can contain digits (except the first character).</p></li>
<li><p>They can contain dashes or apostrophes (except the first and last character), provided there’s an alphabetic character to the right side of each dash or apostrophe.</p></li>
</ul>
<p>|===</p>
<div class="line-block"><em>Valid</em> | <em>Invalid</em></div>
<div class="line-block"><code>var1</code> | <code>1var</code></div>
<div class="line-block"><code>var-one</code> | <code>var-1</code></div>
<div class="line-block"><code>var'one</code> | <code>var'1</code></div>
<div class="line-block"><code>var1_</code> | <code>var1'</code></div>
<div class="line-block"><code>_var</code> | <code>-var</code></div>
<p>|===</p>
<p>.Naming conventions: * Camel case: <code>variableNo1</code></p>
<ul>
<li><p>Kebab case: <code>variable-no1</code></p></li>
<li><p>Snake case: <code>variable_no1</code></p></li>
</ul>
<p>You are free to name your identifiers as you like, but it is good practice to adopt one naming convention consistently.</p>
<p>Using meaningful names will ease your (and other’s) programming life.</p>
<ul>
<li><code>var1 = var2 * var3</code> is syntactically correct but its purpose is not evident.</li>
<li><code>monthly-salary = daily-rate * working-days</code> would be a better way to name your variables.</li>
</ul>
<p>==== Comments A comment is text ignored by the compiler and used as a note.</p>
<p>Comments are divided into 3 types:</p>
<ul>
<li>Single line:</li>
<li>[source,perl6]</li>
</ul>
</section>
<section id="this-is-a-single-line-comment" class="level1">
<h1>This is a single line comment</h1>
<ul>
<li><p>Embedded:</p></li>
<li><p>[source,perl6] say #`(This is an embedded comment) “Hello World.”</p></li>
<li><p>Multi line:</p></li>
<li><h2 id="sourceperl6">[source,perl6]</h2>
<p>=begin comment This is a multi line comment. Comment 1 Comment 2 =end comment —————————–</p></li>
</ul>
<p>==== Quotes Strings need to be delimited by either double quotes or single quotes.</p>
<p>Always use double quotes:</p>
<ul>
<li><p>if your string contains an apostrophe.</p></li>
<li><p>if your string contains a variable that needs to be interpolated.</p></li>
</ul>
<section id="sourceperl6-1" class="level2">
<h2>[source,perl6]</h2>
<p>say ‘Hello World’; # Hello World say “Hello World”; # Hello World say “Don’t”; # Don’t my $name = ‘John Doe’; say ‘Hello $name’; # Hello $name say “Hello $name”; # Hello John Doe ———————————–</p>
<p>== Operators</p>
<p>=== Common Operators The below table lists the most commonly used operators. [cols=“<sup>.</sup>5m,<sup>.</sup>5m,.<sup>20,.</sup>20m,.^20m”, options=“header”] |===</p>
<div class="line-block">Operator | Type | Description | Example | Result</div>
<div class="line-block">+ | Infix | Addition | 1 + 2 | 3</div>
<div class="line-block">- | Infix | Subtraction | 3 - 1 | 2</div>
<div class="line-block">* | Infix | Multiplication | 3 * 2 | 6</div>
<div class="line-block">** | Infix | Power | 3 ** 2 | 9</div>
<div class="line-block">/ | Infix | Division | 3 / 2 | 1.5</div>
<div class="line-block">div | Infix | Integer Division (rounds down) | 3 div 2 | 1</div>
<div class="line-block">% | Infix | Modulo | 7 % 4 | 3</div>
<p>.2+| %% .2+| Infix .2+| Divisibility | 6 %% 4 | False</p>
<p>&lt;| 6 %% 3 &lt;| True</p>
<div class="line-block">gcd | Infix | Greatest common divisor | 6 gcd 9 | 3</div>
<div class="line-block">lcm | Infix | Least common multiple | 6 lcm 9 | 18</div>
<div class="line-block">== | Infix | Numeric equal | 9 == 7 | False</div>
<div class="line-block">!= | Infix | Numeric not equal | 9 != 7 | True</div>
<div class="line-block">&lt; | Infix | Numeric less than | 9 &lt; 7 | False</div>
<div class="line-block">&gt; | Infix | Numeric greater than | 9 &gt; 7 | True</div>
<div class="line-block">&lt;= | Infix | Numeric less than or equal | 7 &lt;= 7 | True</div>
<div class="line-block">&gt;= | Infix | Numeric greater than or equal | 9 &gt;= 7 | True</div>
<p>.3+| +&lt;=&gt;+ .3+| Infix .3+| Numeric three-way comparator | 1 +&lt;=&gt;+ 1.0 | Same</p>
<p>&lt;| 1 +&lt;=&gt;+ 2 &lt;| Less</p>
<p>&lt;| 3 +&lt;=&gt; 2+ &lt;| More</p>
<div class="line-block">eq | Infix | String equal | “John” eq “John” | True</div>
<div class="line-block">ne | Infix | String not equal | “John” ne “Jane” | True</div>
<div class="line-block">lt | Infix | String less than | “a” lt “b” | True</div>
<div class="line-block">gt | Infix | String greater than | “a” gt “b” | False</div>
<div class="line-block">le | Infix | String less than or equal | “a” le “a” | True</div>
<div class="line-block">ge | Infix | String greater than or equal | “a” ge “b” | False</div>
<p>.3+| leg .3+| Infix .3+| String three-way comparator | “a” leg “a” | Same</p>
<p>&lt;| “a” leg “b” &lt;| Less</p>
<p>&lt;| “c” leg “b” &lt;| More</p>
<p>.2+| cmp .2+| Infix .2+| Smart three-way comparator | “a” cmp “b” | Less</p>
<p>&lt;| 3.5 cmp 2.6 &lt;| More</p>
<div class="line-block">= | Infix | Assignment | my <span class="math inline">$var = 7 | Assigns the value of `7` to the variable `$</span>var`</div>
<p>.2+| ~ .2+| Infix .2+| String concatenation | 9 ~ 7 | 97</p>
<p>&lt;m| “Hi” ~ “there” &lt;| Hi there</p>
<p>.2+| x .2+| Infix .2+| String replication | 13 x 3 | 131313</p>
<p>&lt;| “Hello” x 3 &lt;| Hello Hello Hello</p>
<p>.5+| ~~ .5+| Infix .5+| Smart match | 2 ~~ 2 | True</p>
<p>&lt;| 2 ~~ Int &lt;| True</p>
<p>&lt;| “Raku” ~~ “Raku” &lt;| True</p>
<p>&lt;| “Raku” ~~ Str &lt;| True</p>
<p>&lt;| “enlightenment” ~~ /light/ &lt;| ｢light｣</p>
<p>.2+| ++ | Prefix | Increment | my <span class="math inline"><em>v</em><em>a</em><em>r</em> = 2;  + +</span>var; | Increment the variable by 1 and return the result <code>3</code></p>
<div class="line-block">Postfix &lt;d| Increment &lt;m| my $var = 2; $var++; &lt;| Return the variable <code>2</code> and then increment it</div>
<p>.2+|--| Prefix | Decrement | my <span class="math inline"><em>v</em><em>a</em><em>r</em> = 2;  − −</span>var; | Decrement the variable by 1 and return the result <code>1</code></p>
<div class="line-block">Postfix &lt;d| Decrement &lt;m| my $var = 2; $var–; &lt;| Return the variable <code>2</code> and then decrement it</div>
<p>.3+| + .3+| Prefix .3+| Coerce the operand to a numeric value | +“3” | 3</p>
<p>&lt;| +True &lt;| 1</p>
<p>&lt;| +False &lt;| 0</p>
<p>.3+| - .3+| Prefix .3+| Coerce the operand to a numeric value and return the negation | -“3” | -3</p>
<p>&lt;| -True &lt;| -1</p>
<p>&lt;| -False &lt;| 0</p>
<p>.6+| ? .6+| Prefix .6+| Coerce the operand to a boolean value | ?0 | False</p>
<p>&lt;| ?9.8 &lt;| True</p>
<p>&lt;| ?“Hello” &lt;| True</p>
<p>&lt;| ?"" &lt;| False</p>
<p>&lt;| my <span class="math inline"><em>v</em><em>a</em><em>r</em>; ?</span>var; &lt;| False</p>
<p>&lt;| my <span class="math inline"><em>v</em><em>a</em><em>r</em> = 7; ?</span>var; &lt;| True</p>
<div class="line-block">! | Prefix | Coerce the operand to a boolean value and return the negation | !4 | False</div>
<div class="line-block">.. | Infix | Range Constructor | 0..5 | Creates a range of the interval [0, 5] footnote:intervals[Notations for intervals: https://en.wikipedia.org/wiki/Interval_(mathematics)</div>
<p>#Notations_for_intervals]</p>
<div class="line-block">..^ | Infix | Range Constructor | 0..^5 | Creates a range of the interval [0, 5) footnote:intervals[]</div>
<div class="line-block">^.. | Infix | Range Constructor | 0^..5 | Creates a range of the interval (0, 5] footnote:intervals[]</div>
<div class="line-block">^..^ | Infix | Range Constructor | 0^..^5 | Creates a range of the interval (0, 5) footnote:intervals[]</div>
<div class="line-block">^ | Prefix | Range Constructor | ^5 | Same as 0..^5 Creates a range of the interval [0, 5) footnote:intervals[]</div>
<div class="line-block">… | Infix | Lazy List Constructor | 0…9999 | return the elements only if requested</div>
<p>.2+| {vbar} .2+| Prefix .2+| Flattening | {vbar}(0..5) | (0 1 2 3 4 5)</p>
<p>&lt;| {vbar}(0^..^5) &lt;| (1 2 3 4)</p>
<p>|===</p>
<p>=== Reversed Operators</p>
<p>Adding <code>R</code> before any operator will have the effect of reversing its operands.</p>
<p>[cols=“.<sup>m,.</sup>m,.<sup>m,.</sup>m”, options=“header”] |=== | Normal Operation | Result | Reversed Operator | Result</p>
<div class="line-block">2 / 3 | 0.666667 | 2 R/ 3 | 1.5</div>
<div class="line-block">2 - 1 | 1 | 2 R- 1 | -1</div>
<p>|===</p>
<p>=== Reduction Operators</p>
<p>Reduction operators work on lists of values. They are formed by surrounding the operator with brackets <code>[]</code></p>
<p>[cols=“.<sup>m,.</sup>m,.<sup>m,.</sup>m”, options=“header”] |=== | Normal Operation | Result | Reduction Operator | Result</p>
<div class="line-block">1 + 2 + 3 + 4 + 5 | 15 | [+] 1,2,3,4,5 | 15</div>
<div class="line-block">1 * 2 * 3 * 4 * 5 | 120 | [*] 1,2,3,4,5 | 120</div>
<p>|===</p>
<p>NOTE: For the complete list of operators, including their precedence, go to https://docs.raku.org/language/operators</p>
<p>== Variables Raku variables are classified into 3 categories: Scalars, Arrays and Hashes.</p>
<p>A <em>sigil</em> (Sign in Latin) is a character that is used as a prefix to categorize variables.</p>
<ul>
<li><code>$</code> is used for scalars</li>
<li><code>@</code> is used for arrays</li>
<li><code>%</code> is used for hashes</li>
</ul>
<p>=== Scalars A scalar holds one value or reference.</p>
</section>
<section id="sourceperl6-2" class="level2">
<h2>[source,perl6]</h2>
</section>
</section>
<section id="string" class="level1">
<h1>String</h1>
<p>my $name = ‘John Doe’; say $name;</p>
</section>
<section id="integer" class="level1">
<h1>Integer</h1>
<p>my $age = 99; say $age; —-</p>
<p>A specific set of operations can be performed on a scalar, depending on the value it holds.</p>
<p>[source,perl6] .String —- my $name = ‘John Doe’; say $name.uc; say $name.chars; say $name.flip; —-</p>
<table>
<tbody>
<tr class="odd">
<td>JOHN DOE</td>
</tr>
<tr class="even">
<td>8</td>
</tr>
<tr class="odd">
<td>eoD nhoJ</td>
</tr>
</tbody>
</table>
<p>NOTE: For the complete list of methods applicable to Strings, see https://docs.raku.org/type/Str</p>
<p>[source,perl6] .Integer —- my $age = 17; say $age.is-prime; —-</p>
<table>
<tbody>
<tr class="odd">
<td>True</td>
</tr>
</tbody>
</table>
<p>NOTE: For the complete list of methods applicable to Integers, see https://docs.raku.org/type/Int</p>
<p>[source,perl6] .Rational Number —- my $age = 2.3; say $age.numerator; say $age.denominator; say $age.nude; —-</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">(23 10)</td>
</tr>
</tbody>
</table>
<p>NOTE: For the complete list of methods applicable to Rational Numbers, see https://docs.raku.org/type/Rat</p>
<p>=== Arrays Arrays are lists containing multiple values.</p>
<section id="sourceperl6-3" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="animals">@animals</span> = ‘camel’,‘llama’,‘owl’; say <span class="citation" data-cites="animals">@animals</span>; —-</p>
<p>Many operations can be performed on arrays as shown in the below example:</p>
<p>TIP: The tilde <code>~</code> is used for string concatenation.</p>
<p>[source,perl6] .<code>Script</code> —- my <span class="citation" data-cites="animals">@animals</span> = ‘camel’,‘vicuña’,‘llama’; say “The zoo contains” ~ <span class="citation" data-cites="animals.elems">@animals.elems</span> ~ " animals“; say”The animals are: " ~ <span class="citation" data-cites="animals">@animals</span>; say “I will adopt an owl for the zoo”; <span class="citation" data-cites="animals.push">@animals.push</span>(“owl”); say “Now my zoo has:” ~ <span class="citation" data-cites="animals">@animals</span>; say “The first animal we adopted was the” ~ <span class="citation" data-cites="animals">@animals [0]</span>; <span class="citation" data-cites="animals.pop">@animals.pop</span>; say “Unfortunately the owl got away and we’re left with:” ~ <span class="citation" data-cites="animals">@animals</span>; say “We’re closing the zoo and keeping one animal only”; say “We’re going to let go:” ~ <span class="citation" data-cites="animals.splice">@animals.splice</span>(1,2) ~ " and keep the " ~ <span class="citation" data-cites="animals">@animals</span>; —-</p>
</section>
<section id="output" class="level2">
<h2>.<code>Output</code></h2>
<p>The zoo contains 3 animals The animals are: camel vicuña llama I will adopt an owl for the zoo Now my zoo has: camel vicuña llama owl The first animal we adopted was the camel Unfortunately the owl got away and we’re left with: camel vicuña llama We’re closing the zoo and keeping one animal only We’re going to let go: vicuña llama and keep the camel —-</p>
<p>.Explanation <code>.elems</code> returns the number of elements in an array. + <code>.push()</code> adds one or more elements to the array. + We can access a specific element in the array by specifying its position <code>@animals[0]</code>. + <code>.pop</code> removes the last element from the array and returns it. + <code>.splice(a,b)</code> will remove <code>b</code> elements starting at position <code>a</code>.</p>
<p>==== Fixed-size arrays A basic array is declared as following: [source,perl6] my <span class="citation" data-cites="array">@array</span>;</p>
<p>The basic array can have indefinite length and thus is called auto-extending. + The array will accept any number of values with no restriction.</p>
<p>In contrast, we can also create fixed-size arrays. + These arrays cannot be accessed beyond their defined size.</p>
<p>To declare an array of fixed size, specify its maximum number of elements in square brackets immediately after its name: [source,perl6] my <span class="citation" data-cites="array">@array [3]</span>;</p>
<p>This array will be able to hold a maximum of 3 values, indexed from 0 to 2.</p>
</section>
<section id="sourceperl6-4" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="array">@array [3]</span>; <span class="citation" data-cites="array">@array [0]</span> = “first value”; <span class="citation" data-cites="array">@array [1]</span> = “second value”; <span class="citation" data-cites="array">@array [2]</span> = “third value”; —-</p>
<p>You will not be able to add a fourth value to this array: [source,perl6] —- my <span class="citation" data-cites="array">@array [3]</span>; <span class="citation" data-cites="array">@array [0]</span> = “first value”; <span class="citation" data-cites="array">@array [1]</span> = “second value”; <span class="citation" data-cites="array">@array [2]</span> = “third value”; <span class="citation" data-cites="array">@array [3]</span> = “fourth value”; —-</p>
<table>
<tbody>
<tr class="odd">
<td>Index 3 for dimension 1 out of range (must be 0..2)</td>
</tr>
</tbody>
</table>
<p>==== Multidimensional arrays The arrays we saw until now are one-dimensional. + Fortunately, we can define multi-dimensional arrays in Raku.</p>
<p>[source,perl6] my <span class="citation" data-cites="tbl">@tbl</span>[3;2];</p>
<p>This array is two-dimensional. The first dimension can have a maximum of 3 values and the second dimension a maximum of 2 values.</p>
<p>Think of it as a 3x2 grid.</p>
</section>
<section id="sourceperl6-5" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="tbl">@tbl</span>[3;2]; <span class="citation" data-cites="tbl">@tbl</span>[0;0] = 1; <span class="citation" data-cites="tbl">@tbl</span>[0;1] = “x”; <span class="citation" data-cites="tbl">@tbl</span>[1;0] = 2; <span class="citation" data-cites="tbl">@tbl</span>[1;1] = “y”; <span class="citation" data-cites="tbl">@tbl</span>[2;0] = 3; <span class="citation" data-cites="tbl">@tbl</span>[2;1] = “z”; say <span class="citation" data-cites="tbl">@tbl</span> —-</p>
<table>
<tbody>
<tr class="odd">
<td>[[1 x] [2 y] [3 z]]</td>
</tr>
</tbody>
</table>
</section>
<section id="visual-representation-of-the-array" class="level2">
<h2>.Visual representation of the array:</h2>
<p>[1 x] [2 y] [3 z] —-</p>
<p>NOTE: For the complete Array reference, see https://docs.raku.org/type/Array</p>
<p>=== Hashes [source,perl6] .A Hash is a set of Key/Value pairs. —- my %capitals = ‘UK’,‘London’,‘Germany’,‘Berlin’; say %capitals; —-</p>
<p>[source,perl6] .Another succinct way of filling the hash: —- my %capitals = UK =&gt; ‘London’, Germany =&gt; ‘Berlin’; say %capitals; —-</p>
<p>Some of the methods that can be called on hashes are: [source,perl6] .<code>Script</code> —- my %capitals = UK =&gt; ‘London’, Germany =&gt; ‘Berlin’; %capitals.push: (France =&gt; ‘Paris’); say %capitals.kv; say %capitals.keys; say %capitals.values; say “The capital of France is:” ~ %capitals<France>; —-</p>
</section>
<section id="output-1" class="level2">
<h2>.<code>Output</code></h2>
<p>(France Paris Germany Berlin UK London) (France Germany UK) (Paris Berlin London) The capital of France is: Paris —-</p>
<p>.Explanation <code>.push: (key \=&gt; 'Value')</code> adds a new key/value pair. + <code>.kv</code> returns a list containing all keys and values. + <code>.keys</code> returns a list that contains all keys. + <code>.values</code> returns a list that contains all values. + We can access a specific value in the hash by specifying its key <code>%hash&lt;key&gt;</code></p>
<p>NOTE: For the complete Hash reference, see https://docs.raku.org/type/Hash</p>
<p>=== Types In the previous examples, we did not specify what type of values the variables should hold.</p>
<p>TIP: <code>.WHAT</code> will return the type of value held in a variable.</p>
</section>
<section id="sourceperl6-6" class="level2">
<h2>[source,perl6]</h2>
<p>my $var = ‘Text’; say $var; say $var.WHAT;</p>
<p>$var = 123; say $var; say $var.WHAT; —-</p>
<p>As you can see in the above example, the type of value in <code>$var</code> was once (Str) and then (Int).</p>
<p>This style of programming is called dynamic typing. Dynamic in the sense that variables may contain values of Any type.</p>
<p>Now try running the below example: + Notice <code>Int</code> before the variable name.</p>
</section>
<section id="sourceperl6-7" class="level2">
<h2>[source,perl6]</h2>
<p>my Int $var = ‘Text’; say $var; say $var.WHAT; —-</p>
<p>It will fail and return this error message: <code>Type check failed in assignment to $var; expected Int but got Str</code></p>
<p>What happened is that we specified beforehand that the variable should be of type (Int). When we tried to assign an (Str) to it, it failed.</p>
<p>This style of programming is called static typing. Static in the sense that variable types are defined before assignment and cannot change.</p>
<p>Raku is classified as <em>gradually typed</em>; it allows both <em>static</em> and <em>dynamic</em> typing.</p>
<p>.Arrays and hashes can also be statically typed: [source,perl6] —- my Int <span class="citation" data-cites="array">@array</span> = 1,2,3; say <span class="citation" data-cites="array">@array</span>; say <span class="citation" data-cites="array.WHAT">@array.WHAT</span>;</p>
<p>my Str <span class="citation" data-cites="multilingual">@multilingual</span> = “Hello”,“Salut”,“Hallo”,“您好”,“안녕하세요”,“こんにちは”; say <span class="citation" data-cites="multilingual">@multilingual</span>; say <span class="citation" data-cites="multilingual.WHAT">@multilingual.WHAT</span>;</p>
<p>my Str %capitals = UK =&gt; ‘London’, Germany =&gt; ‘Berlin’; say %capitals; say %capitals.WHAT;</p>
<p>my Int %country-codes = UK =&gt; 44, Germany =&gt; 49; say %country-codes; say %country-codes.WHAT; —-</p>
<p>.Below is a list of the most commonly used types: You will most probably never use the first two but they are listed for informational purpose.</p>
<p>[cols=“<sup>.</sup>1m,.<sup>3m,.</sup>2m,.^1m, options=”header"] |===</p>
<div class="line-block"><em>Type</em> | <em>Description</em> | <em>Example</em> | <em>Result</em></div>
<div class="line-block">Mu | The root of the Raku type hierarchy | |</div>
<div class="line-block">Any | Default base class for new classes and for most built-in classes | |</div>
<div class="line-block">Cool | Value that can be treated as a string or number interchangeably | my Cool $var = 31; say $var.flip; say $var * 2; | 13 62</div>
<div class="line-block">Str | String of characters | my Str $var = “NEON”; say $var.flip; | NOEN</div>
<div class="line-block">Int | Integer (arbitrary-precision) | 7 + 7 | 14</div>
<div class="line-block">Rat | Rational number (limited-precision) | 0.1 + 0.2 | 0.3</div>
<div class="line-block">Bool | Boolean | !True | False</div>
<p>|===</p>
<p>=== Introspection</p>
<p>Introspection is the process of getting information about an object properties like its type. + In one of the previous example we used <code>.WHAT</code> to return the type of the variable.</p>
</section>
<section id="sourceperl6-8" class="level2">
<h2>[source,perl6]</h2>
<p>my Int $var; say $var.WHAT; # (Int) my $var2; say $var2.WHAT; # (Any) $var2 = 1; say $var2.WHAT; # (Int) $var2 = “Hello”; say $var2.WHAT; # (Str) $var2 = True; say $var2.WHAT; # (Bool) $var2 = Nil; say $var2.WHAT; # (Any) —-</p>
<p>The type of a variable holding a value is correlated to its value. + The type of a strongly declared empty variable is the type with which it was declared. + The type of an empty variable that wasn’t strongly declared is <code>(Any)</code> + To clear the value of a variable, assign <code>Nil</code> to it.</p>
<p>=== Scoping Before using a variable for the first time, it needs to be declared.</p>
<p>Several declarators are used in Raku. We’ve been using <code>my</code>, so far.</p>
<p>[source,perl6] my $var=1;</p>
<p>The <code>my</code> declarator give the variable <em>lexical</em> scope. In other words, the variable will only be accessible in the same block it was declared.</p>
<p>A block in Raku is delimited by <code>{ }</code>. If no block is found, the variable will be available in the whole Raku script.</p>
</section>
<section id="sourceperl6-9" class="level2">
<h2>[source,perl6]</h2>
<p>{ my Str $var = ‘Text’; say $var; # is accessible } say $var; # is not accessible, returns an error —-</p>
<p>Since a variable is only accessible in the block where it is defined, the same variable name can be used in another block.</p>
</section>
<section id="sourceperl6-10" class="level2">
<h2>[source,perl6]</h2>
<p>{ my Str $var = ‘Text’; say $var; } my Int $var = 123; say $var; —-</p>
<p>=== Assignment vs. Binding We’ve seen in the previous examples, how to <em>assign</em> values to variables. + <em>Assignment</em> is done using the <code>=</code> operator. [source,perl6] —- my Int $var = 123; say $var; —-</p>
<p>We can change the value assigned to a variable:</p>
<p>[source,perl6] .Assignment —- my Int $var = 123; say $var; $var = 999; say $var; —-</p>
</section>
<section id="output-2" class="level2">
<h2>.<code>Output</code></h2>
<p>123 999 —-</p>
<p>On the other hand, we cannot change the value <em>bound</em> to a variable. + <em>Binding</em> is done using the <code>:=</code> operator.</p>
<p>[source,perl6] .Binding —- my Int $var := 123; say $var; $var = 999; say $var; —-</p>
</section>
<section id="output-3" class="level2">
<h2>.<code>Output</code></h2>
<p>123 Cannot assign to an immutable value —-</p>
<p>[source,perl6] .Variables can also be bound to other variables: —- my $a; my $b; $b := $a; $a = 7; say $b; $b = 8; say $a; —-</p>
</section>
<section id="output-4" class="level2">
<h2>.<code>Output</code></h2>
<p>7 8 —-</p>
<p>Binding variables is bi-directional. + <code>$a := $b</code> and <code>$b := $a</code> have the same effect.</p>
<p>NOTE: For more info on variables, see https://docs.raku.org/language/variables</p>
<p>== Functions and mutators</p>
<p>It is important to differentiate between functions and mutators. + Functions do not change the state of the object they were called on. + Mutators modify the state of the object.</p>
<p>[source,perl6,linenums] .<code>Script</code> —- my <span class="citation" data-cites="numbers">@numbers</span> = [7,2,4,9,11,3];</p>
<p><span class="citation" data-cites="numbers.push">@numbers.push</span>(99); say <span class="citation" data-cites="numbers">@numbers</span>; #1</p>
<p>say <span class="citation" data-cites="numbers.sort">@numbers.sort</span>; #2 say <span class="citation" data-cites="numbers">@numbers</span>; #3</p>
<p><span class="citation" data-cites="numbers">@numbers</span>.=sort; say <span class="citation" data-cites="numbers">@numbers</span>; #4 —-</p>
</section>
<section id="output-5" class="level2">
<h2>.<code>Output</code></h2>
<p>[7 2 4 9 11 3 99] #1 (2 3 4 7 9 11 99) #2 [7 2 4 9 11 3 99] #3 [2 3 4 7 9 11 99] #4 —-</p>
<p>.Explanation <code>.push</code> is a mutator; it changes the state of the array ( #1)</p>
<p><code>.sort</code> is a function; it returns a sorted array but doesn’t modify the state of the initial array:</p>
<ul>
<li><p>( #2) shows that it returned a sorted array.</p></li>
<li><p>( #3) shows that the initial array is still unmodified.</p></li>
</ul>
<p>In order to enforce a function to act as a mutator, we use <code>.=</code> instead of <code>.</code> ( #4) (Line 9 of the script)</p>
<p>== Loops and conditions Raku has many conditional and looping constructs.</p>
<p>=== if The code runs only if a condition has been met; i.e., an expression evaluates to <code>True</code>.</p>
</section>
<section id="sourceperl6-11" class="level2">
<h2>[source,perl6]</h2>
<p>my $age = 19;</p>
<p>if $age &gt; 18 { say ‘Welcome’ } —-</p>
<p>In Raku, we can invert the code and the condition. + Even if the code and the condition have been inverted, the condition is always evaluated first.</p>
</section>
<section id="sourceperl6-12" class="level2">
<h2>[source,perl6]</h2>
<p>my $age = 19;</p>
</section>
<section id="say-welcome-if-age-18" class="level2">
<h2>say ‘Welcome’ if $age &gt; 18;</h2>
<p>If the condition is not met, we can specify alternate blocks for execution by using:</p>
<ul>
<li><code>else</code></li>
<li><code>elsif</code></li>
</ul>
</section>
<section id="sourceperl6-13" class="level2">
<h2>[source,perl6]</h2>
</section>
</section>
<section id="run-the-same-code-for-different-values-of-the-variable" class="level1">
<h1>run the same code for different values of the variable</h1>
<p>my $number-of-seats = 9;</p>
<p>if $number-of-seats &lt;= 5 { say ‘I am a sedan’ } elsif $number-of-seats &lt;= 7 { say ‘I am 7 seater’ } else { say ‘I am a van’ } —-</p>
<p>=== unless The negated version of an if statement can be written using <code>unless</code>.</p>
<p>The following code:</p>
<section id="sourceperl6-14" class="level2">
<h2>[source,perl6]</h2>
<p>my $clean-shoes = False;</p>
<p>if not $clean-shoes { say ‘Clean your shoes’ } —- can be written as:</p>
</section>
<section id="sourceperl6-15" class="level2">
<h2>[source,perl6]</h2>
<p>my $clean-shoes = False;</p>
<p>unless $clean-shoes { say ‘Clean your shoes’ } —-</p>
<p>Negation in Raku is done using either <code>!</code> or <code>not</code>.</p>
<p><code>unless (condition)</code> is used instead of <code>if not (condition)</code>.</p>
<p><code>unless</code> cannot have an <code>else</code> clause.</p>
<p>=== with</p>
<p><code>with</code> behaves like the <code>if</code> statement, but checks if the variable is defined.</p>
</section>
<section id="sourceperl6-16" class="level2">
<h2>[source,perl6]</h2>
<p>my Int $var=1;</p>
<p>with $var { say ‘Hello’ } —-</p>
<p>If you run the code without assigning a value to the variable, nothing should happen. [source,perl6] —- my Int $var;</p>
<p>with $var { say ‘Hello’ } —-</p>
<p><code>without</code> is the negated version of <code>with</code>. You should be able to relate it to <code>unless</code>.</p>
<p>If the first <code>with</code> condition is not met, an alternate path can be specified using <code>orwith</code>. + <code>with</code> and <code>orwith</code> can be compared to <code>if</code> and <code>elsif</code>.</p>
<p>=== for</p>
<p>The <code>for</code> loop iterates over multiple values.</p>
</section>
<section id="sourceperl6-17" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="array">@array</span> = 1,2,3;</p>
<p>for <span class="citation" data-cites="array">@array</span> -&gt; $array-item { say $array-item * 100 } —-</p>
<p>Notice that we created an iteration variable <code>$array-item</code> and then performed the operation <code>*100</code> on each array item.</p>
<p>=== given</p>
<p><code>given</code> is the Raku equivalent of the switch statement in other languages, but much more powerful.</p>
</section>
<section id="sourceperl6-18" class="level2">
<h2>[source,perl6]</h2>
<p>my $var = 42;</p>
<p>given $var { when 0..50 { say ‘Less than or equal to 50’} when Int { say “is an Int” } when 42 { say 42 } default { say “huh?” } } —-</p>
<p>After a successful match, the matching process will stop.</p>
<p>Alternatively <code>proceed</code> will instruct Raku to continue matching even after a successful match. [source,perl6] —- my $var = 42;</p>
<p>given $var { when 0..50 { say ‘Less than or equal to 50’;proceed} when Int { say “is an Int”;proceed} when 42 { say 42 } default { say “huh?” } } —-</p>
<p>=== loop</p>
<p><code>loop</code> is another way of writing a <code>for</code> loop.</p>
<p>Actually, <code>loop</code> is how <code>for</code> loops are written in C-family programming languages.</p>
<p>Raku belongs to the C-family languages.</p>
</section>
<section id="sourceperl6-19" class="level2">
<h2>[source,perl6]</h2>
<p>loop (my $i = 0; $i &lt; 5; $i++) { say “The current number is $i” } —-</p>
<p>NOTE: For more info on loops and conditions, see https://docs.raku.org/language/control</p>
<p>== I/O In Raku, two of the most common <em>Input/Output</em> interfaces are the <em>Terminal</em> and <em>Files</em>.</p>
<p>=== Basic I/O using the Terminal</p>
<p>==== say <code>say</code> writes to the standard output. It appends a newline at the end. In other words, the following code:</p>
</section>
<section id="sourceperl6-20" class="level2">
<h2>[source,perl6]</h2>
<p>say ‘Hello Mam.’; say ‘Hello Sir.’; —- will be written on 2 separate lines.</p>
<p>==== print <code>print</code> on the other hand behaves like <code>say</code> but doesn’t add a new line.</p>
<p>Try replacing <code>say</code> with <code>print</code> and compare the results.</p>
<p>==== get <code>get</code> is used to capture input from the terminal.</p>
</section>
<section id="sourceperl6-21" class="level2">
<h2>[source,perl6]</h2>
<p>my $name;</p>
<p>say “Hi, what’s your name?”; $name = get;</p>
</section>
<section id="say-dear-name-welcome-to-raku" class="level2">
<h2>say “Dear $name welcome to Raku”;</h2>
<p>When the above code runs, the terminal will be waiting for you to input your name. Enter it and then hit [Enter]. Subsequently, it will greet you.</p>
<p>==== prompt <code>prompt</code> is a combination of <code>print</code> and <code>get</code>.</p>
<p>The above example can be written like this:</p>
</section>
<section id="sourceperl6-22" class="level2">
<h2>[source,perl6]</h2>
<p>my $name = prompt “Hi, what’s your name?”;</p>
</section>
<section id="say-dear-name-welcome-to-raku-1" class="level2">
<h2>say “Dear $name welcome to Raku”;</h2>
<p>=== Running Shell Commands Two subroutines can be used to run shell commands:</p>
<ul>
<li><p><code>run</code> Runs an external command without involving a shell</p></li>
<li><p><code>shell</code> Runs a command through the system shell. It is platform and shell dependent. All shell meta characters are interpreted by the shell, including pipes, redirects, environment variable substitutions and so on.</p></li>
</ul>
<p>[source,perl6] .Run this if you’re on Linux/macOS —- my $name = ‘Neo’; run ‘echo’, “hello $name”; shell “ls”; —-</p>
<p>[source,perl6] .Run this if you’re on Windows —- shell “dir”; —- <code>echo</code> and <code>ls</code> are common shell keywords on Linux: + <code>echo</code> prints text to the terminal (the equivalent of <code>say</code> in Raku) + <code>ls</code> lists all files and folders in the current directory</p>
<p><code>dir</code> is the equivalent of <code>ls</code> on Windows.</p>
<p>=== File I/O ==== slurp <code>slurp</code> is used to read data from a file.</p>
<p>Create a text file with the following content:</p>
</section>
<section id="datafile.txt" class="level2">
<h2>.datafile.txt</h2>
<p>John 9 Johnnie 7 Jane 8 Joanna 7 —- [source,perl6] —- my $data = slurp “datafile.txt”; say $data; —-</p>
<p>==== spurt <code>spurt</code> is used to write data to a file.</p>
</section>
<section id="sourceperl6-23" class="level2">
<h2>[source,perl6]</h2>
<p>my $newdata = “New scores: Paul 10 Paulie 9 Paulo 11”;</p>
</section>
<section id="spurt-newdatafile.txt-newdata" class="level2">
<h2>spurt “newdatafile.txt”, $newdata;</h2>
<p>After running the above code, a new file named <em>newdatafile.txt</em> will be created. It will contain the new scores.</p>
<p>=== Working with files and directories Raku can list the contents of a directory without resorting to shell commands (by using <code>ls</code>, for example).</p>
</section>
<section id="sourceperl6-24" class="level2">
<h2>[source,perl6]</h2>
<p>say dir; # List files and folders in the current directory say dir “/Documents”; # List files and folders in the specified directory —-</p>
<p>In addition, you can create and delete directories.</p>
</section>
<section id="sourceperl6-25" class="level2">
<h2>[source,perl6]</h2>
<p>mkdir “newfolder”; rmdir “newfolder”; —-</p>
<p><code>mkdir</code> creates a new directory. + <code>rmdir</code> deletes an empty directory and returns an error if not empty.</p>
<p>You can also check if a path exists; if it is a file; or a directory:</p>
<p>In the directory where you will be running the below script, create an empty folder <code>folder123</code> and an empty raku file <code>script123.raku</code></p>
</section>
<section id="sourceperl6-26" class="level2">
<h2>[source,perl6]</h2>
<p>say “script123.raku”.IO.e; say “folder123”.IO.e;</p>
<p>say “script123.raku”.IO.d; say “folder123”.IO.d;</p>
<p>say “script123.raku”.IO.f; say “folder123”.IO.f; —-</p>
<p><code>IO.e</code> checks if the directory/file exists. + <code>IO.f</code> checks if the path is a file. + <code>IO.d</code> checks if the path is a directory.</p>
<p>WARNING: Windows users can use <code>/</code> or <code>\\</code> to define directories + <code>C:\\rakudo\\bin</code> + <code>C:/rakudo/bin</code> +</p>
<p>NOTE: For more info on I/O, see https://docs.raku.org/type/IO</p>
<p>== Subroutines === Definition <em>Subroutines</em> (also called <em>subs</em> or <em>functions</em>) are a means of packaging and reusing functionality. +</p>
<p>A subroutine definition begins with the keyword <code>sub</code>. After their definition, they can be called by their handle. + Check out the below example:</p>
</section>
<section id="sourceperl6-27" class="level2">
<h2>[source,perl6]</h2>
<p>sub alien-greeting { say “Hello earthlings”; }</p>
</section>
<section id="alien-greeting" class="level2">
<h2>alien-greeting;</h2>
<p>The previous example showcased a subroutine that doesn’t require any input.</p>
<p>=== Signature Subroutines can require input. That input is provided by <em>arguments</em>. A subroutine may define zero or more <em>parameters</em>. The number and type of parameters that a subroutine defines is called its <em>signature</em>.</p>
<p>The below subroutine accepts a string argument.</p>
</section>
<section id="sourceperl6-28" class="level2">
<h2>[source,perl6]</h2>
<p>sub say-hello (Str $name) { say “Hello” ~ $name ~ “!!!!” } say-hello “Paul”; say-hello “Paula”; —-</p>
<p>=== Multiple dispatch It is possible to define multiple subroutines that have the same name but different signatures. When the subroutine is called, the runtime environment will decide which version to use based on the number and type of supplied arguments. This type of subroutine is defined the same way as normal subs except that we use the <code>multi</code> keyword instead of <code>sub</code>.</p>
</section>
<section id="sourceperl6-29" class="level2">
<h2>[source,perl6]</h2>
<p>multi greet($name) { say “Good morning <span class="math inline">$name"; } multi greet($</span>name, $title) { say”Good morning $title $name"; }</p>
<p>greet “Johnnie”; greet “Laura”,“Mrs.”; —-</p>
<p>=== Default and Optional Parameters If a subroutine is defined to accept an argument, and we call it without providing it with the required argument, it will fail.</p>
<p>Raku provides us the ability to define subroutines with:</p>
<ul>
<li>Optional Parameters</li>
<li>Default Parameters</li>
</ul>
<p>Optional parameters are defined by appending <code>?</code> to the parameter name.</p>
</section>
<section id="sourceperl6-30" class="level2">
<h2>[source,perl6]</h2>
<p>sub say-hello($name?) { with $name { say “Hello” ~ $name } else { say “Hello Human” } } say-hello; say-hello(“Laura”); —-</p>
<p>If the user doesn’t need to supply an argument, a default value can be defined. + This is done by assigning a value to the parameter within the subroutine definition.</p>
</section>
<section id="sourceperl6-31" class="level2">
<h2>[source,perl6]</h2>
<p>sub say-hello($name=“Matt”) { say “Hello” ~ $name; } say-hello; say-hello(“Laura”); —-</p>
<p>=== Returning values All the subroutines we’ve seen so far <em>do something</em> – they display some text on the terminal.</p>
<p>Sometimes, though, we execute a subroutine for its <em>return</em> value so we can use it later in the flow of our program.</p>
<p>If a function is allowed to run through it’s block to the end, the last statement or expression will determine the return value.</p>
<p>[source,perl6] .Implicit return —- sub squared ($x) { $x ** 2; } say “7 squared is equal to” ~ squared(7); —-</p>
<p>For the sake of clarity, it might be a good idea to <em>explicitly</em> specify what we want returned. This can be done using the <code>return</code> keyword. [source,perl6] .Explicit return —- sub squared ($x) { return $x ** 2; } say “7 squared is equal to” ~ squared(7); —- ==== Restricting return values In one of the previous examples, we saw how we can restrict the accepted argument to be of a certain type. The same can be done with return values.</p>
<p>To restrict the return value to a certain type, we use the arrow notation <code>-\-&gt;</code> in the signature.</p>
<p>[source,perl6] .Indicating return type —- sub squared ($x –&gt; Int) { return $x ** 2; } say “1.2 squared is equal to” ~ squared(1.2); —- If we fail to provide a return value that matches the type constraint, an error will be thrown.</p>
<table>
<tbody>
<tr class="odd">
<td>Type check failed for return value; expected Int but got Rat (1.44)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tip-1" class="level1">
<h1>[TIP]</h1>
<p>Not only can type constraints control the type of the return value; they can also control its definedness.</p>
<p>In the previous examples, we specified that the return value should be an <code>Int</code>.</p>
<p>We could also have specified that the returned <code>Int</code> should be strictly defined or undefined using the following signatures: + <code>--&gt; Int:D</code> and <code>--&gt; Int:U</code></p>
<p>That being said, it is good practice to use those type constraints. + Below is the modified version of the previous example that uses <code>:D</code> to force the returned <code>Int</code> to be defined.</p>
<section id="sourceperl6-32" class="level2">
<h2>[source,perl6]</h2>
<p>sub squared ($x –&gt; Int:D) { return $x ** 2; } say “1.2 squared is equal to” ~ squared(1.2); —- ====</p>
<p>NOTE: For more info on subroutines and functions, see https://docs.raku.org/language/functions</p>
<p>== Functional Programming In this chapter we will take a look at some of the features that facilitate Functional Programming.</p>
<p>=== Functions are first-class citizens Functions/subroutines are first-class citizens:</p>
<ul>
<li><p>They can be passed as arguments</p></li>
<li><p>They can be returned from other functions</p></li>
<li><p>They can be assigned to variables</p></li>
</ul>
<p>A great example is the <code>map</code> function. + <code>map</code> is a <em>higher order function</em>, it can accept another function as an argument.</p>
<p>[source,perl6] .Script —- my <span class="citation" data-cites="array">@array</span> = &lt;1 2 3 4 5&gt;; sub squared($x) { $x ** 2 } say map(&amp;squared,<span class="citation" data-cites="array">@array</span>); —-</p>
</section>
<section id="output-6" class="level2">
<h2>.Output</h2>
</section>
<section id="section" class="level2">
<h2>(1 4 9 16 25)</h2>
<p>.Explanation We defined a subroutine called <code>squared</code> that takes an argument and multiplies that argument by itself. + Next, we used <code>map</code>, a higher order function, and gave it two arguments, the <code>squared</code> subroutine and an array. + The result is a list of the squared elements of the array.</p>
<p>Notice that when passing a subroutine as an argument, we need to prepend <code>&amp;</code> to its name.</p>
<p>=== Anonymous functions An <em>anonymous function</em> is also called a <em>lambda</em>. + An anonymous function is not bound to an identifier (it has no name).</p>
<p>Let’s rewrite the <code>map</code> example and have it use an anonymous function [source,perl6] —- my <span class="citation" data-cites="array">@array</span> = &lt;1 2 3 4 5&gt;; say map(-&gt; <span class="math inline">$x {$</span>x ** 2},<span class="citation" data-cites="array">@array</span>); —- Notice that instead of declaring the squared subroutine and passing it as an argument to <code>map</code>, we defined it within the anonymous subroutine as <code>\-&gt; $x {$x ** 2}</code>.</p>
<p>In Raku parlance, we call this notation a <em>pointy block</em></p>
<p>[source,perl6] .A pointy block may also be used to assign functions to variables: —- my $squared = -&gt; $x { $x ** 2 } say $squared(9); —-</p>
<p>=== Chaining In Raku, methods can be chained, so you’re not required to pass the result of one method to another as an argument.</p>
<p>To illustrate: Given an array, you may need to return the unique values of the array, sorted from biggest to smallest.</p>
<p>Here’s a non-chained solution:</p>
</section>
<section id="sourceperl6-33" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="array">@array</span> = &lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;; my <span class="citation" data-cites="final-array">@final-array</span> = reverse(sort(unique(<span class="citation" data-cites="array">@array</span>))); say <span class="citation" data-cites="final-array">@final-array</span>; —- Here, we call <code>unique</code> on <code>@array</code>, pass the result as an argument to <code>sort</code>, and then pass that result to <code>reverse</code>.</p>
<p>In contrast, with chained methods, the above example can be rewritten as:</p>
</section>
<section id="sourceperl6-34" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="array">@array</span> = &lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;; my <span class="citation" data-cites="final-array">@final-array</span> = <span class="citation" data-cites="array.unique.sort.reverse">@array.unique.sort.reverse</span>; say <span class="citation" data-cites="final-array">@final-array</span>; —-</p>
<p>You can already see that chaining methods is <em>easier on the eye</em>.</p>
<p>=== Feed Operator The <em>feed operator</em>, called <em>pipe</em> in some functional programming languages, further illustrates method chaining.</p>
<p>[source,perl6] .Forward Feed —- my <span class="citation" data-cites="array">@array</span> = &lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;; <span class="citation" data-cites="array">@array</span> ==&gt; unique() ==&gt; sort() ==&gt; reverse() ==&gt; my <span class="citation" data-cites="final-array">@final-array</span>; say <span class="citation" data-cites="final-array">@final-array</span>; —-</p>
</section>
<section id="explanation" class="level2">
<h2>.Explanation</h2>
<p>Start with <code>@array</code> then return a list of unique elements then sort it then reverse it then store the result in <span class="citation" data-cites="final-array">@final-array</span> —- Note that the flow of the method calls is top-down – from first to final step.</p>
<p>[source,perl6] .Backward Feed —- my <span class="citation" data-cites="array">@array</span> = &lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;; my <span class="citation" data-cites="final-array-v2">@final-array-v2</span> &lt;== reverse() &lt;== sort() &lt;== unique() &lt;== <span class="citation" data-cites="array">@array</span>; say <span class="citation" data-cites="final-array-v2">@final-array-v2</span>; —-</p>
<p>.Explanation The backward feed is like the forward feed, but in reverse. + The flow of the method calls is bottom-up – from final to first step.</p>
<p>=== Hyper operator The <em>hyper operator</em> <code>&gt;&gt;.</code> will call a method on all elements of a list and return a list of the results. [source,perl6] —- my <span class="citation" data-cites="array">@array</span> = &lt;0 1 2 3 4 5 6 7 8 9 10&gt;; sub is-even($var) { $var %% 2 };</p>
<p>say <span class="citation" data-cites="array">@array</span>&gt;&gt;.is-prime; say <span class="citation" data-cites="array">@array</span>&gt;&gt;.&amp;is-even; —-</p>
<p>Using the hyper operator we can call methods already defined in Raku, e.g. <code>is-prime</code> that tells us if a number is prime or not. + In addition we can define new subroutines and call them using the hyper operator. In this case we have to prepend <code>&amp;</code> to the name of the method; e.g., <code>&amp;is-even</code>.</p>
<p>This is very practical as it relieves us from writing a <code>for</code> loop to iterate over each value.</p>
<p>WARNING: Raku guarantees that the order of the results is the same as that of the original list. However, there is <em>no guarantee</em> that Raku will actually call the methods in list order or in the same thread. So, be careful with methods that have side-effects, such as <code>say</code> or <code>print</code>.</p>
<p>=== Junctions A <em>junction</em> is a logical superposition of values.</p>
<p>In the below example <code>1|2|3</code> is a junction. [source,perl6] —- my $var = 2; if $var == 1|2|3 { say “The variable is 1 or 2 or 3” } —- The use of junctions usually triggers <em>autothreading</em>; the operation is carried out for each junction element, and all the results are combined into a new junction and returned.</p>
<p>=== Lazy Lists A <em>lazy list</em> is a list that is lazily evaluated. + Lazy evaluation delays the evaluation of an expression until required, and avoids repeating evaluations by storing results in a lookup table.</p>
<p>The benefits include:</p>
<ul>
<li><p>Performance increase by avoiding needless calculations</p></li>
<li><p>The ability to construct potentially infinite data structures</p></li>
<li><p>The ability to define control flow</p></li>
</ul>
<p>To build a lazy list we use the infix operator <code>...</code> + A lazy list has <em>initial element(s)</em>, a <em>generator</em> and an <em>endpoint</em>.</p>
<p>[source,perl6] .Simple lazy list —- my $lazylist = (1 … 10); say $lazylist; —- The initial element is 1 and the endpoint is 10. No generator was defined so the default generator is the successor (+1) + In other words this lazy list may return (if requested) the following elements (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</p>
<p>[source,perl6] .Infinite lazy list —- my $lazylist = (1 … Inf); say $lazylist; —- This list may return (if requested) any integer between 1 and infinity, in other words any integer number.</p>
<p>[source,perl6] .Lazy list built using a deduced generator —- my $lazylist = (0,2 … 10); say $lazylist; —- The initial elements are 0 and 2 and the endpoint is 10. No generator was defined, but using the initial elements, Raku will deduce that the generator is (+2) + This lazy list may return (if requested) the following elements (0, 2, 4, 6, 8, 10)</p>
<p>[source,perl6] .Lazy list built using a defined generator —- my $lazylist = (0, { $_ + 3 } … 12); say $lazylist; —- In this example, we defined explicitly a generator enclosed in <code>{ }</code> + This lazy list may return (if requested) the following elements (0, 3, 6, 9, 12)</p>
</section>
</section>
<section id="warning" class="level1">
<h1>[WARNING]</h1>
<p>When using an explicit generator, the endpoint must be one of the values that the generator can return. + If we reproduce the above example with the endpoint being 10 instead of 12, it will not stop. The generator <em>jumps over</em> the endpoint.</p>
<p>Alternatively you can replace <code>0 ... 10</code> with <code>0 ...^ * &gt; 10</code> + You can read it as: From 0 until the first value greater than 10 (excluding it)</p>
<p>[source,perl6] .This will not stop the generator —- my $lazylist = (0, { $_ + 3 } … 10); say $lazylist; —-</p>
<p>[source,perl6] .This will stop the generator —- my $lazylist = (0, { $_ + 3 } …^ * &gt; 10); say $lazylist; —- ====</p>
<p>=== Closures All code objects in Raku are closures, which means they can reference lexical variables from an outer scope.</p>
<section id="sourceperl6-35" class="level2">
<h2>[source,perl6]</h2>
<p>sub generate-greeting { my $name = “John Doe”; sub greeting { say “Good Morning $name”; }; return &amp;greeting; } my $generated = generate-greeting; $generated(); —-</p>
<p>If you run the above code, it will display <code>Good Morning John Doe</code> on the terminal. + While the result is fairly simple, what is interesting about this example, is that the <code>greeting</code> inner subroutine was returned from the outer subroutine before being executed.</p>
<p><code>$generated</code> has become a <em>closure</em>.</p>
<p>A <em>closure</em> is a special kind of object that combines two things:</p>
<ul>
<li><p>A Subroutine</p></li>
<li><p>The Environment in which that subroutine was created.</p></li>
</ul>
<p>The environment consists of any local variable that was in-scope at the time that the closure was created. In this case, <code>$generated</code> is a closure that incorporates both the <code>greeting</code> subroutine and the <code>John Doe</code> string that existed when the closure was created.</p>
<p>Let’s take a look at a more interesting example. [source,perl6] —- sub greeting-generator(<span class="math inline">$period) {  return sub ($</span>name) { return “Good $period $name” } } my $morning = greeting-generator(“Morning”); my $evening = greeting-generator(“Evening”);</p>
<p>say $morning(“John”); say <span class="math inline">$evening("Jane"); ---- In this example, we have defined a subroutine `greeting-generator($</span>period)<code>that accepts a single argument</code><span class="math inline">$period` and returns a new subroutine. The subroutine it returns accepts a single argument `$</span>name` and returns the constructed greeting.</p>
<p>Basically, <code>greeting-generator</code> is a subroutine factory. In this example, we used <code>greeting-generator</code> to create two new subroutines, one that says <code>Good Morning</code> and one that says <code>Good Evening</code>.</p>
<p><code>$morning</code> and <code>$evening</code> are both closures. They share the same subroutine body definition, but store different environments. + In <code>$morning</code> ’s environment <code>$period</code> is <code>Morning</code>. In <code>$evening</code> ’s environment <code>$period</code> is <code>Evening</code>.</p>
<p>== Classes &amp; Objects In the previous chapter, we learned how Raku facilitates Functional Programming. + In this chapter we will take a look at Object Oriented programming in Raku.</p>
<p>=== Introduction</p>
<p><em>Object Oriented</em> programming is one of the widely used paradigms nowadays. + An <em>object</em> is a set of variables and subroutines bundled together. + The variables are called <em>attributes</em> and the subroutines are called <em>methods</em>. + Attributes define the <em>state</em> and methods define the <em>behavior</em> of an object.</p>
<p>A <em>class</em> is a template for creating <em>objects</em>. +</p>
<p>In order to understand the relationship consider the below example:</p>
<p>|===</p>
<div class="line-block">There are 4 people present in a room | <em>objects</em> =&gt; 4 people</div>
<div class="line-block">These 4 people are humans | <em>class</em> =&gt; Human</div>
<div class="line-block">They have different names, age, sex and nationality | <em>attributes</em> =&gt; name, age, sex, nationality</div>
<p>|===</p>
<p>In <em>object oriented</em> parlance, we say that objects are <em>instances</em> of a class.</p>
<p>Consider the below script: [source,perl6] —- class Human { has $.name; has $.age; has $.sex; has $.nationality; }</p>
<p>my $john = Human.new(name =&gt; ‘John’, age =&gt; 23, sex =&gt; ‘M’, nationality =&gt; ‘American’); say $john; —- The <code>class</code> keyword is used to define a class. + The <code>has</code> keyword is used to define attributes of a class. + The <code>.new()</code> method is called a <em>constructor</em>. It creates the object as an instance of the class it has been called on.</p>
<p>In the above script, a new variable <code>$john</code> holds a reference to a new instance of “Human” defined by <code>Human.new()</code>. + The arguments passed to the <code>.new()</code> method are used to set the attributes of the underlying object.</p>
<p>A class can be given <em>lexical scope</em> using <code>my</code>: [source,perl6] —- my class Human {</p>
</section>
<section id="section-1" class="level2">
<h2>}</h2>
<p>=== Encapsulation Encapsulation is an object oriented concept that bundles a set of data and methods together. + The data (attributes) within an object should be <em>private</em>, in other words, accessible only from within the object. + In order to access the attributes from outside the object, we use methods called <em>accessors</em>.</p>
<p>The below two scripts have the same result.</p>
<p>.Direct access to the variable: [source,perl6] —- my $var = 7; say $var; —-</p>
<p>.Encapsulation: [source,perl6] —- my $var = 7; sub sayvar { $var; } say sayvar; —- The method <code>sayvar</code> is an accessor. It lets us access the value of the variable without getting direct access to it.</p>
<p>Encapsulation is facilitated in Raku with the use of <em>twigils</em>. + Twigils are secondary <em>sigils</em>. They come between the sigil and the attribute name. + Two twigils are used in classes:</p>
<ul>
<li><code>!</code> is used to explicitly declare that the attribute is private.</li>
<li><code>.</code> is used to automatically generate an accessor for the attribute.</li>
</ul>
<p>By default, all attributes are private but it is a good habit to always use the <code>!</code> twigil.</p>
<p>Therefore, we should rewrite the above class as: [source,perl6] —- class Human { has $!name; has $!age; has $!sex; has $!nationality; }</p>
<p>my $john = Human.new(name =&gt; ‘John’, age =&gt; 23, sex =&gt; ‘M’, nationality =&gt; ‘American’); say $john; —- Append to the script the following statement: <code>say $john.age;</code> + It will return this error: <code>Method 'age' not found for invocant of class 'Human'</code> because <code>$!age</code> is private and can only be used within the object. Trying to access it outside the object will return an error.</p>
<p>Now replace <code>has $!age</code> with <code>has $.age</code> and observe the result of <code>say $john.age;</code></p>
<p>=== Named vs. Positional Parameters In Raku, all classes inherit a default <code>.new()</code> constructor. + It can be used to create objects by providing it with arguments. + The default constructor can only be provided with <em>named arguments</em>. + In our example above, notice that the arguments supplied to <code>.new()</code> are defined by name:</p>
<ul>
<li><p>name =&gt; ‘John’</p></li>
<li><p>age =&gt; 23</p></li>
</ul>
<p>What if I do not want to supply the name of each attribute each time I want to create an object? + Then I need to create another constructor that accepts <em>positional arguments</em>.</p>
</section>
<section id="sourceperl6-36" class="level2">
<h2>[source,perl6]</h2>
<p>class Human { has $.name; has $.age; has $.sex; has $.nationality;</p>
</section>
</section>
<section id="new-constructor-that-overrides-the-default-one." class="level1">
<h1>new constructor that overrides the default one.</h1>
<p>method new (<span class="math inline"><em>n</em><em>a</em><em>m</em><em>e</em>,</span>age,<span class="math inline"><em>s</em><em>e</em><em>x</em>,</span>nationality) { self.bless(:<span class="math inline"><em>n</em><em>a</em><em>m</em><em>e</em>, :</span>age,:<span class="math inline"><em>s</em><em>e</em><em>x</em>, :</span>nationality); } }</p>
<p>my $john = Human.new(‘John’,23,‘M’,‘American’); say $john; —-</p>
<p>=== Methods</p>
<p>==== Introduction Methods are the <em>subroutines</em> of an object. + Like subroutines, they are a means of packaging a set of functionality, they accept <em>arguments</em>, have a <em>signature</em> and can be defined as <em>multi</em>.</p>
<p>Methods are defined using the <code>method</code> keyword. + In normal circumstances, methods are required to perform some sort of action on the objects’ attributes. This enforces the concept of encapsulation. Object attributes can only be manipulated from within the object using methods. The outside world can only interact with the object methods, and has no direct access to its attributes.</p>
<section id="sourceperl6-37" class="level2">
<h2>[source,perl6]</h2>
<p>class Human { has $.name; has $.age; has $.sex; has $.nationality; has $.eligible; method assess-eligibility { if self.age &lt; 21 { $!eligible = ‘No’ } else { $!eligible = ‘Yes’ } }</p>
<p>}</p>
<p>my $john = Human.new(name =&gt; ‘John’, age =&gt; 23, sex =&gt; ‘M’, nationality =&gt; ‘American’); $john.assess-eligibility; say $john.eligible; —-</p>
<p>Once methods are defined within a class, they can be called on an object using the <em>dot notation</em>: + <em>object</em> <em>.</em> <em>method</em> or as in the above example: <code>$john.assess-eligibility</code></p>
<p>Within the definition of a method, if we need to reference the object itself to call another method we use the <code>self</code> keyword. +</p>
<p>Within the definition of a method, if we need to reference an attribute we use <code>!</code> even if it was defined with <code>.</code> + The rationale being that what the <code>.</code> twigil does is declare an attribute with <code>!</code> and automate the creation of an accessor.</p>
<p>In the above example, <code>if self.age &lt; 21</code> and <code>if $!age &lt; 21</code> would have the same effect, although they are technically different:</p>
<ul>
<li><code>self.age</code> calls the <code>.age</code> method (accessor) + Can be written alternatively as <code>$.age</code></li>
<li><code>$!age</code> is a direct call to the variable</li>
</ul>
<p>==== Private methods Normal methods can be called on objects from outside the class.</p>
<p><em>Private methods</em> are methods that can only be called from within the class. + A possible use case would be a method that calls another one for specific action. The method that interfaces with the outside world is public while the one referenced should stay private. We do not want users to call it directly, so we declare it as private.</p>
<p>The declaration of a private method requires the use of the <code>!</code> twigil before its name. + Private methods are called with <code>!</code> instead of <code>.</code></p>
</section>
<section id="sourceperl6-38" class="level2">
<h2>[source,perl6]</h2>
<p>method !iamprivate {</p>
</section>
</section>
<section id="code-goes-in-here" class="level1">
<h1>code goes in here</h1>
<p>}</p>
<p>method iampublic { self!iamprivate;</p>
</section>
<section id="do-additional-things" class="level1">
<h1>do additional things</h1>
<section id="section-2" class="level2">
<h2>}</h2>
<p>=== Class Attributes</p>
<p><em>Class attributes</em> are attributes that belong to the class itself and not to its objects. + They can be initialized during definition. + Class attributes are declared using <code>my</code> instead of <code>has</code>. + They are called on the class itself instead of its objects.</p>
</section>
<section id="sourceperl6-39" class="level2">
<h2>[source,perl6]</h2>
<p>class Human { has $.name; my <span class="math inline">.<em>c</em><em>o</em><em>u</em><em>n</em><em>t</em><em>e</em><em>r</em> = 0; <em>m</em><em>e</em><em>t</em><em>h</em><em>o</em><em>d</em><em>n</em><em>e</em><em>w</em>(</span>name) { Human.counter++; self.bless(:$name); } } my $a = Human.new(‘a’); my $b = Human.new(‘b’);</p>
</section>
<section id="say-human.counter" class="level2">
<h2>say Human.counter;</h2>
<p>=== Access Type Until now, all the examples that we’ve seen have used accessors to <em>get</em> information from the objects’ attributes.</p>
<p>What if we need to modify the value of an attribute? + We need to label it as <em>read/write</em> using the keywords <code>is rw</code> [source,perl6] —- class Human { has $.name; has $.age is rw; } my $john = Human.new(name =&gt; ‘John’, age =&gt; 21); say $john.age;</p>
<p>$john.age = 23; say $john.age; —- By default, all attributes are declared as <em>read only</em> but you can explicitly do it using <code>is readonly</code></p>
<p>=== Inheritance ==== Introduction <em>Inheritance</em> is another concept of object oriented programming.</p>
<p>When defining classes, soon enough we will realize that some attributes/methods are common to many classes. + Should we duplicate code? + NO! We should use <em>inheritance</em></p>
<p>Let’s consider we want to define two classes, a class for Human beings and a class for Employees. + Human beings have 2 attributes: name and age. + Employees have 4 attributes: name, age, company and salary</p>
<p>One would be tempted to define the classes as: [source,perl6] —- class Human { has $.name; has $.age; }</p>
<p>class Employee { has $.name; has $.age; has $.company; has $.salary; } —- While technically correct, the above piece of code is considered conceptually poor.</p>
<p>A better way to write this would be: [source,perl6] —- class Human { has $.name; has $.age; }</p>
<p>class Employee is Human { has $.company; has $.salary; } —- The <code>is</code> keyword defines inheritance. + In object oriented parlance, we say Employee is a <em>child</em> of Human and that Human is a <em>parent</em> of Employee.</p>
<p>All child classes inherit the attributes and methods of the parent class, so there is no need to redefine them.</p>
<p>==== Overriding Classes inherit all attributes and methods from their parent classes. + There are cases where we need the method in the child class to behave differently than the one inherited. + To achieve this, we redefine the method in the child class. + This concept is called <em>overriding</em>.</p>
<p>In the below example, the method <code>introduce-yourself</code> is inherited by the Employee class.</p>
</section>
<section id="sourceperl6-40" class="level2">
<h2>[source,perl6]</h2>
<p>class Human { has $.name; has $.age; method introduce-yourself { say ‘Hi I am a human being, my name is’ ~ self.name; } }</p>
<p>class Employee is Human { has $.company; has $.salary; }</p>
<p>my $john = Human.new(name =&gt;‘John’, age =&gt; 23,); my $jane = Employee.new(name =&gt;‘Jane’, age =&gt; 25, company =&gt; ‘Acme’, salary =&gt; 4000);</p>
<p>$john.introduce-yourself; $jane.introduce-yourself; —- Overriding works like this:</p>
</section>
<section id="sourceperl6-41" class="level2">
<h2>[source,perl6]</h2>
<p>class Human { has $.name; has $.age; method introduce-yourself { say ‘Hi I am a human being, my name is’ ~ self.name; } }</p>
<p>class Employee is Human { has $.company; has $.salary; method introduce-yourself { say ‘Hi I am a employee, my name is’ ~ self.name ~ ’ and I work at: ’ ~ self.company; }</p>
<p>}</p>
<p>my $john = Human.new(name =&gt;‘John’,age =&gt; 23,); my $jane = Employee.new(name =&gt;‘Jane’,age =&gt; 25,company =&gt; ‘Acme’,salary =&gt; 4000);</p>
<p>$john.introduce-yourself; $jane.introduce-yourself; —-</p>
<p>Depending of which class the object is, the right method will be called.</p>
<p>==== Submethods <em>Submethods</em> are a type of method that are not inherited by child classes. + They are only accessible from the class they were declared in. + They are defined using the <code>submethod</code> keyword.</p>
<p>=== Multiple Inheritance Multiple inheritance is allowed in Raku. A class can inherit from multiple other classes.</p>
</section>
<section id="sourceperl6-42" class="level2">
<h2>[source,perl6]</h2>
<p>class bar-chart { has Int @.bar-values; method plot { say @.bar-values; } }</p>
<p>class line-chart { has Int @.line-values; method plot { say @.line-values; } }</p>
<p>class combo-chart is bar-chart is line-chart { }</p>
<p>my $actual-sales = bar-chart.new(bar-values =&gt; [10,9,11,8,7,10]); my $forecast-sales = line-chart.new(line-values =&gt; [9,8,10,7,6,9]);</p>
<p>my $actual-vs-forecast = combo-chart.new(bar-values =&gt; [10,9,11,8,7,10], line-values =&gt; [9,8,10,7,6,9]); say “Actual sales:”; $actual-sales.plot; say “Forecast sales:”; $forecast-sales.plot; say “Actual vs Forecast:”; $actual-vs-forecast.plot; —-</p>
</section>
<section id="output-7" class="level2">
<h2>.<code>Output</code></h2>
<p>Actual sales: [10 9 11 8 7 10] Forecast sales: [9 8 10 7 6 9] Actual vs Forecast: [10 9 11 8 7 10] —-</p>
<p>.Explanation The <code>combo-chart</code> class should be able to hold two series, one for the actual values plotted on bars, and another for forecast values plotted on a line. + This is why we defined it as a child of <code>line-chart</code> and <code>bar-chart</code>. + You should have noticed that calling the method <code>plot</code> on the <code>combo-chart</code> didn’t yield the required result. Only one series was plotted. + Why did this happen? + <code>combo-chart</code> inherits from <code>line-chart</code> and <code>bar-chart</code>, and both of them have a method called <code>plot</code>. When we call that method on <code>combo-chart</code> Raku internals will try to resolve the conflict by calling one of the inherited methods.</p>
<p>.Correction In order to behave correctly, we should have overridden the method <code>plot</code> in the <code>combo-chart</code>.</p>
</section>
<section id="sourceperl6-43" class="level2">
<h2>[source,perl6]</h2>
<p>class bar-chart { has Int @.bar-values; method plot { say @.bar-values; } }</p>
<p>class line-chart { has Int @.line-values; method plot { say @.line-values; } }</p>
<p>class combo-chart is bar-chart is line-chart { method plot { say @.bar-values; say @.line-values; } }</p>
<p>my $actual-sales = bar-chart.new(bar-values =&gt; [10,9,11,8,7,10]); my $forecast-sales = line-chart.new(line-values =&gt; [9,8,10,7,6,9]);</p>
<p>my $actual-vs-forecast = combo-chart.new(bar-values =&gt; [10,9,11,8,7,10], line-values =&gt; [9,8,10,7,6,9]); say “Actual sales:”; $actual-sales.plot; say “Forecast sales:”; $forecast-sales.plot; say “Actual vs Forecast:”; $actual-vs-forecast.plot; —-</p>
</section>
<section id="output-8" class="level2">
<h2>.<code>Output</code></h2>
<p>Actual sales: [10 9 11 8 7 10] Forecast sales: [9 8 10 7 6 9] Actual vs Forecast: [10 9 11 8 7 10] [9 8 10 7 6 9] —-</p>
<p>=== Roles <em>Roles</em> are similar to classes in that they are a collection of attributes and methods.</p>
<p>Roles are declared with the keyword <code>role</code>. Classes that wish to implement a role, do so using the <code>does</code> keyword.</p>
<p>.Let’s rewrite the multiple inheritance example using roles: [source,perl6] —- role bar-chart { has Int @.bar-values; method plot { say @.bar-values; } }</p>
<p>role line-chart { has Int @.line-values; method plot { say @.line-values; } }</p>
<p>class combo-chart does bar-chart does line-chart { method plot { say @.bar-values; say @.line-values; } }</p>
<p>my $actual-sales = bar-chart.new(bar-values =&gt; [10,9,11,8,7,10]); my $forecast-sales = line-chart.new(line-values =&gt; [9,8,10,7,6,9]);</p>
<p>my $actual-vs-forecast = combo-chart.new(bar-values =&gt; [10,9,11,8,7,10], line-values =&gt; [9,8,10,7,6,9]); say “Actual sales:”; $actual-sales.plot; say “Forecast sales:”; $forecast-sales.plot; say “Actual vs Forecast:”; $actual-vs-forecast.plot; —-</p>
<p>Run the above script and you will see that results are the same.</p>
<p>By now you’re asking yourself: If roles behave like classes, what’s their use? + To answer your question, modify the first script used to showcase multiple inheritance, the one where we <em>forgot</em> to override the <code>plot</code> method.</p>
</section>
<section id="sourceperl6-44" class="level2">
<h2>[source,perl6]</h2>
<p>role bar-chart { has Int @.bar-values; method plot { say @.bar-values; } }</p>
<p>role line-chart { has Int @.line-values; method plot { say @.line-values; } }</p>
<p>class combo-chart does bar-chart does line-chart { }</p>
<p>my $actual-sales = bar-chart.new(bar-values =&gt; [10,9,11,8,7,10]); my $forecast-sales = line-chart.new(line-values =&gt; [9,8,10,7,6,9]);</p>
<p>my $actual-vs-forecast = combo-chart.new(bar-values =&gt; [10,9,11,8,7,10], line-values =&gt; [9,8,10,7,6,9]); say “Actual sales:”; $actual-sales.plot; say “Forecast sales:”; $forecast-sales.plot; say “Actual vs Forecast:”; $actual-vs-forecast.plot; —-</p>
</section>
<section id="output-9" class="level2">
<h2>.<code>Output</code></h2>
<p>===SORRY!=== Method ‘plot’ must be resolved by class combo-chart because it exists in multiple roles (line-chart, bar-chart) —-</p>
<p>.Explanation If multiple roles are applied to the same class and a conflict exists, a compile-time error will be thrown. + This is a much safer approach than multiple inheritance, where conflicts are not considered errors and are simply resolved at runtime.</p>
<p>Roles will warn you that there’s a conflict.</p>
<p>=== Introspection <em>Introspection</em> is the process of getting information about an object, like its type, attributes or methods.</p>
</section>
<section id="sourceperl6-45" class="level2">
<h2>[source,perl6]</h2>
<p>class Human { has Str $.name; has Int $.age; method introduce-yourself { say ‘Hi I am a human being, my name is’ ~ self.name; } }</p>
<p>class Employee is Human { has Str $.company; has Int $.salary; method introduce-yourself { say ‘Hi I am a employee, my name is’ ~ self.name ~ ’ and I work at: ’ ~ self.company; } }</p>
<p>my $john = Human.new(name =&gt;‘John’,age =&gt; 23,); my $jane = Employee.new(name =&gt;‘Jane’,age =&gt; 25,company =&gt; ‘Acme’,salary =&gt; 4000);</p>
<p>say $john.WHAT; say $jane.WHAT; say $john.^attributes; say $jane.^attributes; say $john.^methods; say $jane.^methods; say $jane.^parents; if $jane ~~ Human {say ‘Jane is a Human’}; —- Introspection is facilitated by:</p>
<ul>
<li><p><code>.WHAT</code> – returns the class from which the object was created</p></li>
<li><p><code>.^attributes</code> – returns all the attributes of the object</p></li>
<li><p><code>.^methods</code> – returns all the methods that can be called on the object</p></li>
<li><p><code>.^parents</code> – returns the parent classes of the object</p></li>
<li><p><code>~~</code> is called the smart-match operator. It evaluates to <em>True</em> if the object is created from the class it is being compared against or any of its inheritances.</p></li>
</ul>
</section>
<section id="note" class="level2">
<h2>[NOTE]</h2>
<p>For more info on Object Oriented Programming in Raku, see:</p>
<ul>
<li>https://docs.raku.org/language/classtut</li>
<li><h2 id="httpsdocs.raku.orglanguageobjects">https://docs.raku.org/language/objects</h2>
== Exception Handling</li>
</ul>
<p>=== Catching Exceptions <em>Exceptions</em> are a special behavior that happens at runtime when something goes wrong. + We say that exceptions are <em>thrown</em>.</p>
<p>Consider the below script that runs correctly:</p>
</section>
<section id="sourceperl6-46" class="level2">
<h2>[source,perl6]</h2>
<p>my Str $name; $name = “Joanna”; say “Hello” ~ $name; say “How are you doing today?” —-</p>
</section>
<section id="output-10" class="level2">
<h2>.<code>Output</code></h2>
<p>Hello Joanna How are you doing today? —-</p>
<p>Now consider this script that throws an exception:</p>
</section>
<section id="sourceperl6-47" class="level2">
<h2>[source,perl6]</h2>
<p>my Str $name; $name = 123; say “Hello” ~ $name; say “How are you doing today?” —-</p>
</section>
<section id="output-11" class="level2">
<h2>.<code>Output</code></h2>
<p>Type check failed in assignment to $name; expected Str but got Int in block <unit> at exceptions.raku:2 —-</p>
<p>Notice that whenever an error occurs (in this case, assigning a number to a string variable) the program will stop and other lines of code will not be evaluated.</p>
<p><em>Exception handling</em> is the process of <em>catching</em> an exception that has been <em>thrown</em> in order for the script to continue working.</p>
</section>
<section id="sourceperl6-48" class="level2">
<h2>[source,perl6]</h2>
<p>my Str $name; try { $name = 123; say “Hello” ~ $name; CATCH { default { say “Can you tell us your name again, we couldn’t find it in the register.”; } } } say “How are you doing today?”; —-</p>
</section>
<section id="output-12" class="level2">
<h2>.<code>Output</code></h2>
<p>Can you tell us your name again, we couldn’t find it in the register. How are you doing today? —-</p>
<p>Exception handling is done by using a <code>try-catch</code> block.</p>
</section>
<section id="sourceperl6-49" class="level2">
<h2>[source,perl6]</h2>
<p>try {</p>
</section>
</section>
<section id="code-goes-in-here-1" class="level1">
<h1>code goes in here</h1>
</section>
<section id="if-anything-goes-wrong-the-script-will-enter-the-below-catch-block" class="level1">
<h1>if anything goes wrong, the script will enter the below CATCH block</h1>
</section>
<section id="if-nothing-goes-wrong-the-catch-block-will-be-ignored" class="level1">
<h1>if nothing goes wrong, the CATCH block will be ignored</h1>
<p>CATCH { default {</p>
</section>
<section id="the-code-in-here-will-be-evaluated-only-if-an-exception-has-been-thrown" class="level1">
<h1>the code in here will be evaluated only if an exception has been thrown</h1>
<pre><code>}</code></pre>
<p>} } —-</p>
<p>The <code>CATCH</code> block can be defined the same way a <code>given</code> block is defined. This means we can <em>catch</em> and handle differently many types of exceptions.</p>
<section id="sourceperl6-50" class="level2">
<h2>[source,perl6]</h2>
<p>try {</p>
</section>
</section>
<section id="code-goes-in-here-2" class="level1">
<h1>code goes in here</h1>
</section>
<section id="if-anything-goes-wrong-the-script-will-enter-the-below-catch-block-1" class="level1">
<h1>if anything goes wrong, the script will enter the below CATCH block</h1>
</section>
<section id="if-nothing-goes-wrong-the-catch-block-will-be-ignored-1" class="level1">
<h1>if nothing goes wrong, the CATCH block will be ignored</h1>
<p>CATCH { when X::AdHoc { # do something if exception of type X::AdHoc is thrown } when X::IO { # do something if exception of type X::IO is thrown } when X::OS { # do something if exception of type X::OS is thrown } default { # do something if exception is thrown and doesn’t belong to the above types } } } —-</p>
<p>=== Throwing Exceptions Raku also allows you to explicitly throw exceptions. + Two types of exceptions can be thrown:</p>
<ul>
<li><p>ad-hoc exceptions</p></li>
<li><p>typed exceptions</p></li>
</ul>
<p>[source,perl6] .ad-hoc —- my Int $age = 21; die “Error !”; —-</p>
<p>[source,perl6] .typed —- my Int $age = 21; X::AdHoc.new(payload =&gt; ‘Error !’).throw; —-</p>
<p>Ad-hoc exceptions are thrown using the <code>die</code> subroutine, followed by the exception message.</p>
<p>Typed exceptions are objects, hence the use of the <code>.new()</code> constructor in the above example. + All typed exceptions descend from class <code>X</code> , below are a few examples: + <code>X::AdHoc</code> is the simplest exception type + <code>X::IO</code> is related to IO errors + <code>X::OS</code> is related to OS errors + <code>X::Str::Numeric</code> related to trying to coerce a string to a number</p>
<p>NOTE: For a complete list of exception types and their associated methods, go to https://docs.raku.org/type-exceptions.html</p>
<p>== Regular Expressions A regular expression, or <em>regex</em>, is a sequence of characters that is used for pattern matching. + Think of it as a pattern.</p>
<section id="sourceperl6-51" class="level2">
<h2>[source,perl6]</h2>
<p>if ‘enlightenment’ ~~ m/ light / { say “enlightenment contains the word light”; } —-</p>
<p>In this example, the smart match operator <code>~~</code> is used to check if a string (enlightenment) contains the word (light). + “Enlightenment” is matched against the regex <code>m/ light /</code></p>
<p>=== Regex definition</p>
<p>A regular expression can be defined like this:</p>
<ul>
<li><p><code>/light/</code></p></li>
<li><p><code>m/light/</code></p></li>
<li><p><code>rx/light/</code></p></li>
</ul>
<p>Unless specified explicitly, white space is ignored; <code>m/light/</code> and <code>m/ light /</code> are the same.</p>
<p>=== Matching characters Alphanumeric characters and the underscore <code>_</code> are written as is. + All other characters have to be escaped using a backslash or surrounded by quotes.</p>
<p>[source,perl6] .Backslash —- if ‘Temperature: 13’ ~~ m/ : / { say “The string provided contains a colon :”; } —-</p>
<p>[source,perl6] .Single quotes —- if ‘Age = 13’ ~~ m/ ‘=’ / { say “The string provided contains an equal character =”; } —-</p>
<p>[source,perl6] .Double quotes —- if ‘name@company.com’ ~~ m/ “@” / { say “This is a valid email address because it contains an @ character”; } —-</p>
<p>=== Matching categories of characters Characters can be classified into categories and we can match against them. + We can also match against the inverse of that category (everything except it):</p>
<p>|===</p>
<div class="line-block"><em>Category</em> | <em>Regex</em> | <em>Inverse</em> | <em>Regex</em></div>
<div class="line-block">Word character (letter, digit or underscore) | | Any character except a word character | </div>
<div class="line-block">Digit |  Any character except a digit | </div>
<div class="line-block">Whitespace | | Any character except a whitespace | </div>
<div class="line-block">Horizontal whitespace |  Any character except a horizontal whitespace | \H</div>
<div class="line-block">Vertical whitespace |  Any character except a vertical whitespace | </div>
<div class="line-block">Tab |  Any character except a Tab | </div>
<div class="line-block">New line | | Any character except a new line | </div>
<p>|===</p>
</section>
<section id="sourceperl6-52" class="level2">
<h2>[source,perl6]</h2>
<p>if “John123” ~~ /  { say “This is not a valid name, numbers are not allowed”; } else { say “This is a valid name” } if “John-Doe” ~~ / / { say “This string contains whitespace”; } else { say “This string doesn’t contain whitespace” } —-</p>
<p>=== Unicode properties Matching against categories of characters, as seen in the preceding section, is convenient. + That being said, a more systematic approach would be to use Unicode properties. + This allows you to match against categories of characters inside and outside of + the ASCII standard. + Unicode properties are enclosed in <code>&lt;: &gt;</code></p>
</section>
<section id="sourceperl6-53" class="level2">
<h2>[source,perl6]</h2>
<p>if “Devanagari Numbers १२३” ~~ / &lt;:N&gt; / { say “Contains a number”; } else { say “Doesn’t contain a number” } if “Привет, Иван.” ~~ / &lt;:Lu&gt; / { say “Contains an uppercase letter”; } else { say “Doesn’t contain an upper case letter” } if “John-Doe” ~~ / &lt;:Pd&gt; / { say “Contains a dash”; } else { say “Doesn’t contain a dash” } —-</p>
<p>=== Wildcards Wildcards can also be used in a regex.</p>
<p>The dot <code>.</code> means any single character.</p>
</section>
<section id="sourceperl6-54" class="level2">
<h2>[source,perl6]</h2>
<p>if ‘abc’ ~~ m/ a.c / { say “Match”; } if ‘a2c’ ~~ m/ a.c / { say “Match”; } if ‘ac’ ~~ m/ a.c / { say “Match”; } else { say “No Match”; } —-</p>
<p>=== Quantifiers Quantifiers come after a character and are used to specify how many times we are expecting it.</p>
<p>The question mark <code>?</code> means zero or one time.</p>
</section>
<section id="sourceperl6-55" class="level2">
<h2>[source,perl6]</h2>
<p>if ‘ac’ ~~ m/ a?c / { say “Match”; } else { say “No Match”; } if ‘c’ ~~ m/ a?c / { say “Match”; } else { say “No Match”; } —-</p>
<p>The star <code>*</code> means zero or multiple times.</p>
</section>
<section id="sourceperl6-56" class="level2">
<h2>[source,perl6]</h2>
<p>if ‘az’ ~~ m/ a<em>z / { say “Match”; } else { say “No Match”; } if ‘aaz’ ~~ m/ a</em>z / { say “Match”; } else { say “No Match”; } if ‘aaaaaaaaaaz’ ~~ m/ a<em>z / { say “Match”; } else { say “No Match”; } if ‘z’ ~~ m/ a</em>z / { say “Match”; } else { say “No Match”; } —-</p>
<p>The <code>+</code> means at least one time.</p>
</section>
<section id="sourceperl6-57" class="level2">
<h2>[source,perl6]</h2>
<p>if ‘az’ ~~ m/ a+z / { say “Match”; } else { say “No Match”; } if ‘aaz’ ~~ m/ a+z / { say “Match”; } else { say “No Match”; } if ‘aaaaaaaaaaz’ ~~ m/ a+z / { say “Match”; } else { say “No Match”; } if ‘z’ ~~ m/ a+z / { say “Match”; } else { say “No Match”; } —-</p>
<p>=== Match Results Whenever the process of matching a string against a regex is successful, the match result is stored in a special variable <code>$/</code></p>
<p>[source,perl6] .Script —- if ‘Rakudo is a Perl 6 compiler’ ~~ m/:s Perl 6/ { say “The match is:” ~ $/; say “The string before the match is:” ~ $/.prematch; say “The string after the match is:” ~ $/.postmatch; say “The matching string starts at position:” ~ $/.from; say “The matching string ends at position:” ~ $/.to; } —-</p>
</section>
<section id="output-13" class="level2">
<h2>.Output</h2>
<p>The match is: Perl 6 The string before the match is: Rakudo is a The string after the match is: compiler The matching string starts at position: 12 The matching string ends at position: 18 —-</p>
<p>.Explanation <code>$/</code> returns a <em>Match Object</em> (the string that matches the regex) + The following methods can be called on the <em>Match Object</em>: + <code>.prematch</code> returns the string preceding the match. + <code>.postmatch</code> returns the string following the match. + <code>.from</code> returns the starting position of the match. + <code>.to</code> returns the ending position of the match. +</p>
<p>TIP: By default, whitespace in a regex definition is ignored. + If we want to match against a regex containing whitespace, we have to do so explicitly. + The <code>:s</code> in the regex <code>m/:s Perl 6/</code> forces whitespace to be considered. + Alternatively, we could have written the regex as <code>m/ Perl\s6 /</code> and used <code>\s</code> which represents a whitespace. + If a regex contains more than a single whitespace, using <code>:s</code> is a better option than using <code>\s</code> for each and every whitespace.</p>
<p>=== Example Let’s check if an email is valid or not. + For the sake of this example we will assume that a valid email address has this format: + first name [dot] last name [at] company [dot] (com/org/net)</p>
<p>WARNING: The regex used in this example for email validation is not very accurate. + Its sole purpose is to demonstrate regex functionality in Raku. + Do not use it as-is in production.</p>
<p>[source,perl6] .Script —- my $email = ‘john.doe@perl6.org’; my $regex = / &lt;:L&gt;+.&lt;:L&gt;+@&lt;:L+:N&gt;+.&lt;:L&gt;+ /;</p>
<p>if $email ~~ $regex { say $/ ~ " is a valid email“; } else { say”This is not a valid email"; } —-</p>
<p>.Output <code>john.doe@perl6.org is a valid email</code></p>
<p>.Explanation <code>&lt;:L&gt;</code> matches a single letter + <code>&lt;:L&gt;+</code> matches one or more letters + <code>\.</code> matches a single [dot] character + <code>\@</code> matches a single [at] character + <code>&lt;:L+:N&gt;</code> matches a letter or a single number + <code>&lt;:L+:N&gt;+</code> matches one or more letters or numbers +</p>
<p>The regex can be decomposed as following:</p>
<ul>
<li><p><em>first name</em> <code>&lt;:L&gt;+</code></p></li>
<li><p><em>[dot]</em> <code>\.</code></p></li>
<li><p><em>last name</em> <code>&lt;:L&gt;+</code></p></li>
<li><p><em>[at]</em> <code>\@</code></p></li>
<li><p><em>company name</em> <code>&lt;:L+:N&gt;+</code></p></li>
<li><p><em>[dot]</em> <code>\.</code></p></li>
<li><p><em>com/org/net</em> <code>&lt;:L&gt;+</code></p></li>
</ul>
<p>[source,perl6] .Alternatively, a regex can be broken down into multiple named regexes —- my $email = ‘john.doe@perl6.org’; my regex many-letters { &lt;:L&gt;+ }; my regex dot { . }; my regex at { @ }; my regex many-letters-numbers { &lt;:L+:N&gt;+ };</p>
<p>if $email ~~ / <many-letters> <dot> <many-letters> <at> <many-letters-numbers> <dot> <many-letters> / { say $/ ~ " is a valid email“; } else { say”This is not a valid email"; } —-</p>
<p>A named regex is defined using the following syntax: <code>my regex regex-name { regex definition }</code> + A named regex can be called using the following syntax: <code>&lt;regex-name&gt;</code></p>
<p>NOTE: For more info on regexes, see https://docs.raku.org/language/regexes</p>
<p>== Raku Modules Raku is a general purpose programming language. It can be used to tackle a multitude of tasks including: text manipulation, graphics, web, databases, network protocols etc.</p>
<p>Reusability is a very important concept whereby programmers don’t have to reinvent the wheel each time they want to do a new task.</p>
<p>Raku allows the creation and redistribution of <em>modules</em>. Each module is a packaged set of functionality that can be reused once installed.</p>
<p><em>Zef</em> is a module management tool that comes with Rakudo Star.</p>
<p>To install a specific module, type the below command in your terminal:</p>
<p><code>zef install "module name"</code></p>
<p>NOTE: The Raku modules directory can be found on: https://modules.raku.org/</p>
<p>=== Using Modules MD5 is a cryptographic hash function that produces a 128-bit hash value. + MD5 has a variety of applications, including the encryption of stored passwords in a database. When a new user registers, their credentials are not stored as plain text but rather <em>hashed</em>. The rationale behind this is that if the DB gets compromised, the attacker will not be able to know what the passwords are.</p>
<p>Luckily, you don’t need to implement the MD5 algorithm yourself; there’s a Raku module already implemented.</p>
<p>Let’s install it: + <code>zef install Digest::MD5</code></p>
<p>Now, run the below script: [source,perl6] —- use Digest::MD5; my $password = “password123”; my <span class="math inline"><em>h</em><em>a</em><em>s</em><em>h</em><em>e</em><em>d</em> − <em>p</em><em>a</em><em>s</em><em>s</em><em>w</em><em>o</em><em>r</em><em>d</em> = <em>D</em><em>i</em><em>g</em><em>e</em><em>s</em><em>t</em> :  : <em>M</em><em>D</em>5.<em>n</em><em>e</em><em>w</em>.<em>m</em><em>d</em>5<sub><em>h</em></sub><em>e</em><em>x</em>(</span>password);</p>
</section>
<section id="say-hashed-password" class="level2">
<h2>say $hashed-password;</h2>
<p>In order to run the <code>md5_hex()</code> function that creates hashes, we need to load the required module. + The <code>use</code> keyword loads the module for use in the script.</p>
<p>WARNING: In practice MD5 hashing alone is not sufficient, because it is prone to dictionary attacks. + It should be combined with a salt link:https://en.wikipedia.org/wiki/Salt_(cryptography)[https://en.wikipedia.org/wiki/Salt_(cryptography)].</p>
<p>== Unicode</p>
<p>Unicode is a standard for encoding and representing text for most writing systems in the world. + UTF-8 is a character encoding capable of encoding all possible characters, or code points, in Unicode.</p>
<p>Characters are defined by a: + <em>Grapheme</em>: Visual representation. + <em>Code point</em>: A number assigned to the character. + <em>Code point name</em>: A name assigned to the character.</p>
<p>=== Using Unicode</p>
<p>.Let’s look at how we can output characters using Unicode [source,perl6] —- say “a”; say “”; say “LATIN SMALL LETTER A]”; —- The above 3 lines showcase different ways of building a character:</p>
<p>. Writing the character directly (grapheme)</p>
<p>. Using <code>\x</code> and the code point</p>
<p>. Using <code>\c</code> and the code point name</p>
<p>.Now lets output a smiley [source,perl6] —- say “☺”; say “263a”; say “WHITE SMILING FACE]”; —-</p>
<p>.Another example combining two code points [source,perl6] —- say “á”; say “00e1”; say “”; say “LATIN SMALL LETTER A WITH ACUTE]”; —-</p>
<p>The letter <code>á</code> can be written:</p>
<ul>
<li><p>using its unique code point <code>\x00e1</code></p></li>
<li><p>or as a combination of the code points of <code>a</code> and acute <code>\x0061\x0301</code></p></li>
</ul>
<p>.Some of the methods that can be used: [source,perl6] —- say “á”.NFC; say “á”.NFD; say “á”.uniname; —-</p>
</section>
<section id="output-14" class="level2">
<h2>.<code>Output</code></h2>
<p>NFC:0x&lt;00e1&gt; NFD:0x&lt;0061 0301&gt; LATIN SMALL LETTER A WITH ACUTE —-</p>
<p><code>NFC</code> returns the unique code point. + <code>NFD</code> decomposes the character and return the code point of each part. + <code>uniname</code> returns the code point name.</p>
<p>.Unicode letters can be used as identifiers: [source,perl6] —- my $Δ = 1; $Δ++; say $Δ; —-</p>
<p>.Unicode can be used to do math: [source,perl6] —- my $var = 2 + ⅒; say $var; —-</p>
<p>=== Unicode-aware Operations</p>
<p>==== Numbers</p>
<p>Arabic numerals are the ten digits: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9. This numeral set is the most used worldwide.</p>
<p>Nonetheless different sets of numerals are used to a lesser extent in different parts of the world.</p>
<p>No special care needs to be taken when using a numeral set different than the Arabic numerals. All methods/operators work as expected.</p>
</section>
<section id="sourceperl6-58" class="level2">
<h2>[source,perl6]</h2>
<p>say (٤,٥,٦,1,2,3).sort; # (1 2 3 4 5 6) say 1 + ٩; # 10 —-</p>
<p>==== Strings If we were to use generic string operations, we might not always get the result that we were looking for, especially when comparing or sorting.</p>
<p>===== Comparison</p>
</section>
<section id="sourceperl6-59" class="level2">
<h2>[source,perl6]</h2>
<p>say ‘a’ cmp ‘B’; # More —- The above example shows that <code>a</code> is bigger than <code>B</code>. The reason being that the code point of lowercase <code>a</code> is bigger than the code point of capital <code>B</code>.</p>
<p>While technically correct, this is probably not what we were looking for.</p>
<p>Luckily Raku has methods/operators that implement the link:http://unicode.org/reports/tr10/[Unicode Collation Algorithm]. + One of them is <code>unicmp</code> that behaves like the above showcased <code>cmp</code> but is unicode-aware. [source,perl6] —- say ‘a’ unicmp ‘B’; # Less —- As you can see, using the <code>unicmp</code> operator now yields the expected result that <code>a</code> is smaller than <code>B</code>.</p>
<p>===== Sorting As an alternative to the <code>sort</code> method that sorts using code points, Raku provides a <code>collate</code> method that implements the link:http://unicode.org/reports/tr10/[Unicode Collation Algorithm]. [source,perl6] —- say (‘a’,‘b’,‘c’,‘D’,‘E’,‘F’).sort; # (D E F a b c) say (‘a’,‘b’,‘c’,‘D’,‘E’,‘F’).collate; # (a b c D E F) —-</p>
<p>== Parallelism, Concurrency and Asynchrony</p>
<p>=== Parallelism Under normal circumstances, all tasks in a program run sequentially. + This might not be a problem, unless what you’re trying to do takes a lot of time.</p>
<p>Thankfully, Raku has features that will enable you to run things in parallel. + At this stage, it is important to note that parallelism can mean one of two things:</p>
<ul>
<li><p><em>Task Parallelism</em>: Two (or more) independent expressions running in parallel.</p></li>
<li><p><em>Data Parallelism</em>: A single expression iterating over a list of elements in parallel.</p></li>
</ul>
<p>Let’s begin with the latter.</p>
<p>==== Data Parallelism [source,perl6] —- my <span class="citation" data-cites="array">@array</span> = 0..50000; # Array population my <span class="citation" data-cites="result">@result</span> = <span class="citation" data-cites="array.map">@array.map</span>({ is-prime $_ }); # call is-prime for each array element say now - INIT now; # Output the time it took for the script to complete —-</p>
<p>.Considering the above example: We are only doing one operation <code>@array.map({ is-prime $_ })</code> + The <code>is-prime</code> subroutine is being called for each array element sequentially: + <code>is-prime @array[0]</code> then <code>is-prime @array[1]</code> then <code>is-prime @array[2]</code> etc.</p>
<p>.Fortunately we can call <code>is-prime</code> on multiple array elements at the same time: [source,perl6] —- my <span class="citation" data-cites="array">@array</span> = 0..50000; # Array population my <span class="citation" data-cites="result">@result</span> = <span class="citation" data-cites="array.race.map">@array.race.map</span>({ is-prime $_ }); # call is-prime for each array element say now - INIT now; # Output the time it took to complete —-</p>
<p>Notice the use of <code>race</code> in the expression. This method will enable parallel iteration of the array elements.</p>
<p>After running both examples (with and without <code>race</code>), compare the time it took for both scripts to complete.</p>
</section>
</section>
<section id="tip-2" class="level1">
<h1>[TIP]</h1>
<p><code>race</code> will not preserve the order of elements. If you wish to do, so use <code>hyper</code> instead.</p>
<p>[source,perl6] .race —- my <span class="citation" data-cites="array">@array</span> = 1..1000; my <span class="citation" data-cites="result">@result</span> = <span class="citation" data-cites="array.race.map">@array.race.map</span>( {$_ + 1} ); .say for <span class="citation" data-cites="result">@result</span>; —-</p>
<p>[source,perl6] .hyper —- my <span class="citation" data-cites="array">@array</span> = 1..1000; my <span class="citation" data-cites="result">@result</span> = <span class="citation" data-cites="array.hyper.map">@array.hyper.map</span>( {$_ + 1} ); .say for <span class="citation" data-cites="result">@result</span>; —-</p>
<p>If you run both examples, you should notice that one is sorted and the other is not.</p>
<p>====</p>
<p>==== Task Parallelism</p>
<section id="sourceperl6-60" class="level2">
<h2>[source,perl6]</h2>
<p>my <span class="citation" data-cites="array1">@array1</span> = 0..49999; my <span class="citation" data-cites="array2">@array2</span> = 2..50001;</p>
<p>my <span class="citation" data-cites="result1">@result1</span> = <span class="citation" data-cites="array1.map">@array1.map</span>( {is-prime(<span class="math inline">$_ + 1)} ); my @result2 = @array2.map( {is-prime($</span>_ - 1)} );</p>
<p>say <span class="citation" data-cites="result1">@result1</span> eqv <span class="citation" data-cites="result2">@result2</span>;</p>
</section>
<section id="say-now---init-now" class="level2">
<h2>say now - INIT now;</h2>
<p>.Considering the above example:</p>
<p>. We defined 2 arrays</p>
<p>. applied a different operation for each array and stored the results</p>
<p>. and checked if both results are the same</p>
<p>The script waits for <code>@array1.map( {is-prime($_ + 1)} )</code> to finish + and then evaluates <code>@array2.map( {is-prime($_ - 1)} )</code></p>
<p>Both operations applied to each array do not depend on each other.</p>
<p>.Why not do both in parallel? [source,perl6] —- my <span class="citation" data-cites="array1">@array1</span> = 0..49999; my <span class="citation" data-cites="array2">@array2</span> = 2..50001;</p>
<p>my <span class="math inline">$promise1 = start @array1.map( {is-prime($</span>_ + 1)} ).eager; my <span class="math inline">$promise2 = start @array2.map( {is-prime($</span>_ - 1)} ).eager;</p>
<p>my <span class="citation" data-cites="result1">@result1</span> = await $promise1; my <span class="citation" data-cites="result2">@result2</span> = await $promise2;</p>
<p>say <span class="citation" data-cites="result1">@result1</span> eqv <span class="citation" data-cites="result2">@result2</span>;</p>
</section>
<section id="say-now---init-now-1" class="level2">
<h2>say now - INIT now;</h2>
<p>.Explanation The <code>start</code> subroutine evaluates the code and returns <em>an object of type promise</em> or shortly <em>a promise</em>. + If the code is evaluated correctly, the <em>promise</em> will be <em>kept</em>. + If the code throws an exception, the <em>promise</em> will be <em>broken</em>.</p>
<p>The <code>await</code> subroutine waits for a <em>promise</em>. + If it’s <em>kept</em> it will get the returned values. + If it’s <em>broken</em> it will get the exception thrown.</p>
<p>Check the time it took each script to complete.</p>
<p>WARNING: Parallelism always adds a threading overhead. If that overhead is not offset by gains in computational speed, the script will seem slower. + This is why, using <code>race</code>, <code>hyper</code>, <code>start</code> and <code>await</code> for fairly simple scripts can actually slow them down.</p>
<p>=== Concurrency and Asynchrony NOTE: For more info on Concurrency and Asynchronous Programming, see https://docs.raku.org/language/concurrency</p>
<p>== Native Calling Interface</p>
<p>Raku gives us the ability to use C libraries, using the Native Calling Interface.</p>
<p><code>NativeCall</code> is a standard module that ships with Raku and offers a set of functionality to ease the job of interfacing Raku and C.</p>
<p>=== Calling a function</p>
<p>Consider the below C code that defines a function called <code>hellofromc</code>. This function prints on the terminal <code>Hello from C</code>. It doesn’t accept any argument nor return any value.</p>
<p>[source,c] .ncitest.c —-</p>
<p>#include &lt;stdio.h&gt;</p>
<p>void hellofromc () { printf(“Hello from C”); } —-</p>
<p>Depending on your OS run the following commands to compile the above C code into a library.</p>
</section>
<section id="on-linux" class="level2">
<h2>.On Linux:</h2>
<p>gcc -c -fpic ncitest.c gcc -shared -o libncitest.so ncitest.o —-</p>
</section>
<section id="on-windows" class="level2">
<h2>.On Windows:</h2>
<p>gcc -c ncitest.c gcc -shared -o ncitest.dll ncitest.o —-</p>
</section>
<section id="on-macos" class="level2">
<h2>.On macOS:</h2>
</section>
<section id="gcc--dynamiclib--o-libncitest.dylib-ncitest.c" class="level2">
<h2>gcc -dynamiclib -o libncitest.dylib ncitest.c</h2>
<p>Within the same directory where you compiled your C library, create a new Raku file that contains the below code and run it.</p>
<p>[source,perl6] .ncitest.raku —- use NativeCall;</p>
<p>constant LIBPATH = "$<em>CWD/ncitest"; sub hellofromc() is native(LIBPATH) { </em> }</p>
</section>
<section id="hellofromc" class="level2">
<h2>hellofromc();</h2>
<p>.Explanation: First of all we declared that we will be using the <code>NativeCall</code> module. + Then we created a constant <code>LIBPATH</code> that holds the path to the C library. + Notice that <code>$*CWD</code> returns the current working directory. + Then we created a new Raku subroutine called <code>hellofromc()</code> that should act as a wrapper to its counterpart C function having the same name and residing in the C library found in <code>LIBPATH</code>. + All of this was done by using the <code>is native</code> trait. + Finally we called our Raku subroutine.</p>
<p>In essence, it all boils down to declaring a subroutine with the trait <code>is native</code> and the name of the C library.</p>
<p>=== Renaming a function</p>
<p>In the above part, we saw how we can call a very simple C function by wrapping it with a Raku subroutine having the same name, using the <code>is native</code> trait.</p>
<p>In some cases, we would want to change the name of the Raku subroutine. + To do so, we use the <code>is symbol</code> trait.</p>
<p>Lets modify the above Raku script and rename the Raku subroutine <code>hello</code> instead of <code>hellofromc</code></p>
<p>[source,perl6] .ncitest.raku —- use NativeCall;</p>
<p>constant LIBPATH = "$<em>CWD/ncitest"; sub hello() is native(LIBPATH) is symbol(‘hellofromc’) { </em> }</p>
</section>
<section id="hello" class="level2">
<h2>hello();</h2>
<p>.Explanation: In case the Raku subroutine has a different name than its C counterpart, we should use the <code>is symbol</code> trait with the name of the original C function.</p>
<p>=== Passing Arguments</p>
<p>Compile the following modified C library and run the Raku script found below again. + Notice how we modified both C and Raku code to accept a string (<code>char*</code> in C and <code>Str</code> in Raku)</p>
<p>[source,c] .ncitest.c —-</p>
<p>#include &lt;stdio.h&gt;</p>
<p>void hellofromc (char* name) { printf(“Hello, %s! This is C!”, name); } —-</p>
<p>[source,perl6] .ncitest.raku —- use NativeCall;</p>
<p>constant LIBPATH = "$<em>CWD/ncitest"; sub hello(Str) is native(LIBPATH) is symbol(‘hellofromc’) { </em> }</p>
</section>
<section id="hellojane" class="level2">
<h2>hello(‘Jane’);</h2>
<p>=== Returning values</p>
<p>Lets repeat the process one more time and create a simple calculator that takes 2 integers and add them. + Compile the C library and run the Raku script.</p>
<p>[source,c] .ncitest.c —- int add (int a, int b) { return (a + b); } —-</p>
<p>[source,perl6] .ncitest.raku —- use NativeCall;</p>
<p>constant LIBPATH = "$<em>CWD/ncitest"; sub add(int32,int32 –&gt; int32) is native(LIBPATH) { </em> }</p>
</section>
<section id="say-add23" class="level2">
<h2>say add(2,3);</h2>
<p>Notice how both C and Raku functions accept two integers and return one (<code>int</code> in C and <code>int32</code> in Raku)</p>
<p>=== Types</p>
<p>You might have asked yourself why did we use <code>int32</code> instead of <code>Int</code> in the latest Raku script. + Some Raku types like <code>Int</code>, <code>Rat</code> etc. can’t be used as is to pass and receive values from a C function. + One must use in Raku the same types as the ones in C.</p>
<p>Luckily Raku provides many types that map to their respective C counterpart.</p>
<p>[cols=“<sup>.</sup>,<sup>.</sup>”,options=“header”] |===</p>
<div class="line-block">C Type | Raku Type</div>
<div class="line-block"><code>char</code> .2+| <code>int8</code></div>
<div class="line-block"><code>int8_t</code></div>
<div class="line-block"><code>short</code> .2+| <code>int16</code></div>
<div class="line-block"><code>int16_t</code></div>
<div class="line-block"><code>int</code> .2+| <code>int32</code></div>
<div class="line-block"><code>int32_t</code></div>
<div class="line-block"><code>int64_t</code> | <code>int64</code></div>
<div class="line-block"><code>unsigned char</code> .2+| <code>uint8</code></div>
<div class="line-block"><code>uint8_t</code></div>
<div class="line-block"><code>unsigned short</code> .2+| <code>uint16</code></div>
<div class="line-block"><code>uint16_t</code></div>
<div class="line-block"><code>unsigned int</code> .2+| <code>uint32</code></div>
<div class="line-block"><code>uint32_t</code></div>
<div class="line-block"><code>uint64_t</code> | <code>uint64</code></div>
<div class="line-block"><code>long</code> | <code>long</code></div>
<div class="line-block"><code>long long</code> | <code>longlong</code></div>
<div class="line-block"><code>float</code> | <code>num32</code></div>
<div class="line-block"><code>double</code> | <code>num64</code></div>
<div class="line-block"><code>size_t</code> | <code>size_t</code></div>
<div class="line-block"><code>bool</code> | <code>bool</code></div>
<div class="line-block"><code>char*</code> (String) | <code>Str</code></div>
<div class="line-block">Arrays: For example <code>int*</code> (Array of int) and <code>double*</code> (Array of double) | <code>CArray</code>: For example <code>CArray[int32]</code> and <code>CArray[num64]</code></div>
<p>|===</p>
<p>NOTE: For more info on the Native Calling Interface, see https://docs.raku.org/language/nativecall</p>
<p>== The Community</p>
<ul>
<li><p>link:irc://irc.freenode.net/ #raku[#raku] IRC channel. Much discussion happens on IRC. + This should be your go to place for any enquiry for which you want an immediate answer: https://raku.org/community/irc</p></li>
<li><p>link:https://stackoverflow.com/questions/tagged/raku[StackOverflow Raku questions] is a place where questions about Raku can be answered more in-depth.</p></li>
<li><p>link:https://rakudoweekly.blog[Rakudo Weekly] a weekly overview of changes in and around Rakudo.</p></li>
<li><p>link:http://pl6anet.org[pl6anet] blog aggregator. Stay tuned by reading blog posts that focus on Raku.</p></li>
<li><p>link:https://www.reddit.com/r/rakulang/[/r/rakulang] subscribe to the Raku subreddit.</p></li>
<li><p>link:https://twitter.com/raku_news<span class="citation" data-cites="raku_news">[@raku_news]</span> follow the community on twitter.</p></li>
</ul>
</section>
</section>
<section id="vim-ftraku" class="level1">
<h1>vim: ft=raku</h1>
</section>
</body>
</html>
