<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Unix_top_100_se.md – Unix &lt;- StackExchange top 100</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #232629;
    color: #7a7c7d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
div.sourceCode
  { color: #cfcfc2; background-color: #232629; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #cfcfc2; } /* Normal */
code span.al { color: #95da4c; } /* Alert */
code span.an { color: #3f8058; } /* Annotation */
code span.at { color: #2980b9; } /* Attribute */
code span.bn { color: #f67400; } /* BaseN */
code span.bu { color: #7f8c8d; } /* BuiltIn */
code span.cf { color: #fdbc4b; } /* ControlFlow */
code span.ch { color: #3daee9; } /* Char */
code span.cn { color: #27aeae; } /* Constant */
code span.co { color: #7a7c7d; } /* Comment */
code span.cv { color: #7f8c8d; } /* CommentVar */
code span.do { color: #a43340; } /* Documentation */
code span.dt { color: #2980b9; } /* DataType */
code span.dv { color: #f67400; } /* DecVal */
code span.er { color: #da4453; } /* Error */
code span.ex { color: #0099ff; } /* Extension */
code span.fl { color: #f67400; } /* Float */
code span.fu { color: #8e44ad; } /* Function */
code span.im { color: #27ae60; } /* Import */
code span.in { color: #c45b00; } /* Information */
code span.kw { color: #cfcfc2; } /* Keyword */
code span.op { color: #cfcfc2; } /* Operator */
code span.ot { color: #27ae60; } /* Other */
code span.pp { color: #27ae60; } /* Preprocessor */
code span.re { color: #2980b9; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #da4453; } /* SpecialString */
code span.st { color: #f44f4f; } /* String */
code span.va { color: #27aeae; } /* Variable */
code span.vs { color: #da4453; } /* VerbatimString */
code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../Css/color_dark_solarized.css" />
  <link rel="stylesheet" href="../Css/layout_toc.css" />
  <script type="text/javascript" src="../Css/js_masonry_desandro.js"></script>
</head>
<body>
<header>
<h1 class="title">Unix &lt;- StackExchange top 100</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#how-to-copy-files-from-one-machine-to-another-using-ssh-score-2648711-in-2018">1: How to copy files from one machine to another using ssh (score <span>2648711</span> in 2018)</a></li>
<li><a href="#how-do-i-get-the-size-of-a-directory-on-the-command-line-score-2399217-in-2017">2: How do I get the size of a directory on the command line? (score <span>2399217</span> in 2017)</a></li>
<li><a href="#how-to-correctly-add-a-path-to-path-score-2218650-in-2015">3: How to correctly add a path to PATH? (score <span>2218650</span> in 2015)</a></li>
<li><a href="#how-to-switch-between-users-on-one-terminal-score-2038581-in-2011">4: How to switch between users on one terminal? (score <span>2038581</span> in 2011)</a></li>
<li><a href="#how-do-i-zipunzip-on-the-unix-command-line-score-1996378-in-2011">5: How do I zip/unzip on the unix command line? (score <span>1996378</span> in 2011)</a></li>
<li><a href="#how-to-install-a-deb-file-by-dpkg--i-or-by-apt-score-1830525-in-2016">6: How to install a deb file, by dpkg -i or by apt? (score <span>1830525</span> in 2016)</a></li>
<li><a href="#how-to-check-os-and-version-using-a-linux-command-score-1592512-in-2015">7: How to check OS and version using a Linux command (score <span>1592512</span> in 2015)</a></li>
<li><a href="#using-sed-to-find-and-replace-score-1560762-in-2014">8: Using ‘sed’ to find and replace (score <span>1560762</span> in 2014)</a></li>
<li><a href="#how-can-i-replace-a-string-in-a-files-score-1507545-in-2017">9: How can I replace a string in a file(s)? (score <span>1507545</span> in 2017)</a></li>
<li><a href="#how-do-i-grep-for-multiple-patterns-with-pattern-having-a-pipe-character-score-1442607-in-2018">10: How do I grep for multiple patterns with pattern having a pipe character? (score <span>1442607</span> in 2018)</a></li>
<li><a href="#zip-all-files-in-directory-score-1425705-in-2012">11: Zip all files in directory? (score <span>1425705</span> in 2012)</a></li>
<li><a href="#how-to-copy-a-file-from-a-remote-server-to-a-local-machine-score-1107157-in-2017">12: How to copy a file from a remote server to a local machine? (score <span>1107157</span> in 2017)</a></li>
<li><a href="#can-i-zip-an-entire-folder-using-gzip-score-1042586-in-2015">13: Can I zip an entire folder using gzip? (score <span>1042586</span> in 2015)</a></li>
<li><a href="#how-do-i-make-ls-show-file-sizes-in-megabytes-score-1020921-in-2013">14: How do I make <code>ls</code> show file sizes in megabytes? (score <span>1020921</span> in 2013)</a></li>
<li><a href="#how-to-install-desktop-environments-on-centos-7-score-963793-in-2016">15: How to install Desktop Environments on CentOS 7? (score <span>963793</span> in 2016)</a></li>
<li><a href="#how-can-i-pass-a-command-line-argument-into-a-shell-script-score-913715-in">16: How can I pass a command line argument into a shell script? (score <span>913715</span> in )</a></li>
<li><a href="#how-to-permanently-set-environmental-variables-score-881957-in-2014">17: How to permanently set environmental variables (score <span>881957</span> in 2014)</a></li>
<li><a href="#how-do-i-find-out-what-hard-disks-are-in-the-system-score-878044-in-2013">18: How do I find out what hard disks are in the system? (score <span>878044</span> in 2013)</a></li>
<li><a href="#how-do-i-remove-a-directory-and-all-its-contents-score-868946-in-2015">19: How do I remove a directory and all its contents? (score <span>868946</span> in 2015)</a></li>
<li><a href="#how-to-forward-x-over-ssh-to-run-graphics-applications-remotely-score-855042-in-2017">20: How to forward X over SSH to run graphics applications remotely? (score <span>855042</span> in 2017)</a></li>
<li><a href="#how-do-i-set-my-dns-when-resolv.conf-is-being-overwritten-score-843688-in-2017">21: How do I set my DNS when resolv.conf is being overwritten? (score <span>843688</span> in 2017)</a></li>
<li><a href="#how-to-create-a-simple-.txt-text-file-using-terminal-score-798669-in-2014">22: How to create a simple .txt (text) file using terminal? (score <span>798669</span> in 2014)</a></li>
<li><a href="#finding-the-pid-of-the-process-using-a-specific-port-score-788176-in-2016">23: Finding the PID of the process using a specific port? (score <span>788176</span> in 2016)</a></li>
<li><a href="#username-is-not-in-the-sudoers-file.-this-incident-will-be-reported-score-766227-in-2018">24: Username is not in the sudoers file. This incident will be reported (score <span>766227</span> in 2018)</a></li>
<li><a href="#how-to-run-find--exec-score-757133-in-2011">25: How to run find -exec? (score <span>757133</span> in 2011)</a></li>
<li><a href="#how-to-append-multiple-lines-to-a-file-score-739887-in-2017">26: How to append multiple lines to a file (score <span>739887</span> in 2017)</a></li>
<li><a href="#where-are-apache-file-access-logs-stored-score-737619-in-2012">27: Where are Apache file access logs stored? (score <span>737619</span> in 2012)</a></li>
<li><a href="#why-am-i-still-getting-a-password-prompt-with-ssh-with-public-key-authentication-score-718769-in-2017">28: Why am I still getting a password prompt with ssh with public key authentication? (score <span>718769</span> in 2017)</a></li>
<li><a href="#how-do-you-empty-the-buffers-and-cache-on-a-linux-system-score-718172-in-2016">29: How do you empty the buffers and cache on a Linux system? (score <span>718172</span> in 2016)</a></li>
<li><a href="#how-can-i-display-the-contents-of-a-text-file-on-the-command-line-score-705890-in-2016">30: How can I display the contents of a text file on the command line? (score <span>705890</span> in 2016)</a></li>
<li><a href="#how-to-mount-a-device-in-linux-score-697966-in-2015">31: How to mount a device in Linux? (score <span>697966</span> in 2015)</a></li>
<li><a href="#what-dns-servers-am-i-using-score-689495-in-2014">32: What DNS servers am I using? (score <span>689495</span> in 2014)</a></li>
<li><a href="#colorizing-your-terminal-and-shell-environment-score-674432-in-2019">33: Colorizing your terminal and shell environment? (score <span>674432</span> in 2019)</a></li>
<li><a href="#how-to-get-over-device-or-resource-busy-score-672304-in-2016">34: How to get over “device or resource busy”? (score <span>672304</span> in 2016)</a></li>
<li><a href="#how-can-i-monitor-disk-io-score-655850-in-2012">35: How can I monitor disk io? (score <span>655850</span> in 2012)</a></li>
<li><a href="#how-to-get-the-complete-and-exact-list-of-mounted-filesystems-in-linux-score-649421-in-2017">36: How to get the complete and exact list of mounted filesystems in Linux? (score <span>649421</span> in 2017)</a></li>
<li><a href="#unzipping-a-.gz-file-without-removing-the-gzipped-file-score-648265-in-2015">37: Unzipping a .gz file without removing the gzipped file (score <span>648265</span> in 2015)</a></li>
<li><a href="#how-do-i-copy-a-folder-keeping-owners-and-permissions-intact-score-640673-in-2014">38: How do I copy a folder keeping owners and permissions intact? (score <span>640673</span> in 2014)</a></li>
<li><a href="#how-do-i-remove-a-user-from-a-group-score-638067-in-2012">39: How do I remove a user from a group? (score <span>638067</span> in 2012)</a></li>
<li><a href="#what-is-the-fastest-way-to-view-images-from-the-terminal-score-630771-in-2012">40: What is the fastest way to view images from the terminal? (score <span>630771</span> in 2012)</a></li>
<li><a href="#does-curl-have-a-no-check-certificate-option-like-wget-score-628499-in">41: Does curl have a –no-check-certificate option like wget? (score <span>628499</span> in )</a></li>
<li><a href="#compress-a-folder-with-tar-score-624560-in-2012">42: Compress a folder with tar? (score <span>624560</span> in 2012)</a></li>
<li><a href="#how-to-list-disks-partitions-and-filesystems-in-linux-score-624481-in-2019">43: How to list disks, partitions and filesystems in Linux? (score <span>624481</span> in 2019)</a></li>
<li><a href="#timezone-setting-in-linux-score-620340-in-2014">44: Timezone setting in Linux (score <span>620340</span> in 2014)</a></li>
<li><a href="#unixlinux-undeleterecover-deleted-files-score-613994-in-2014">45: Unix/Linux undelete/recover deleted files (score <span>613994</span> in 2014)</a></li>
<li><a href="#check-package-version-using-apt-getaptitude-score-601191-in-2016">46: Check package version using apt-get/aptitude? (score <span>601191</span> in 2016)</a></li>
<li><a href="#how-can-i-get-the-current-working-directory-score-597551-in-2017">47: How can I get the current working directory? (score <span>597551</span> in 2017)</a></li>
<li><a href="#count-total-number-of-occurrences-using-grep-score-595238-in-2015">48: Count total number of occurrences using grep (score <span>595238</span> in 2015)</a></li>
<li><a href="#how-can-i-resolve-a-hostname-to-an-ip-address-in-a-bash-script-score-571795-in-2015">49: How can I resolve a hostname to an IP address in a Bash script? (score <span>571795</span> in 2015)</a></li>
<li><a href="#how-to-display-top-results-sorted-by-memory-usage-in-real-time-score-565542-in-2015">50: How to display <code>top</code> results sorted by memory usage in real time? (score <span>565542</span> in 2015)</a></li>
<li><a href="#tracking-down-where-disk-space-has-gone-on-linux-score-563835-in-2019">51: Tracking down where disk space has gone on Linux? (score <span>563835</span> in 2019)</a></li>
<li><a href="#how-to-install-apt-get-or-yum-on-mac-os-x-score-559846-in-2018">52: How to install apt-get or YUM on Mac OS X (score <span>559846</span> in 2018)</a></li>
<li><a href="#execute-shell-commands-in-python-score-551297-in-2015">53: Execute shell commands in Python (score <span>551297</span> in 2015)</a></li>
<li><a href="#what-if-kill--9-does-not-work-score-546773-in-2012">54: What if ‘kill -9’ does not work? (score <span>546773</span> in 2012)</a></li>
<li><a href="#how-can-i-instruct-yum-to-install-a-specific-version-of-package-x-score-542038-in-2015">55: How can I instruct yum to install a specific version of package X? (score <span>542038</span> in 2015)</a></li>
<li><a href="#get-file-createdcreation-time-score-537418-in-2017">56: Get file created/creation time? (score <span>537418</span> in 2017)</a></li>
<li><a href="#ssh_exchange_identification-read-connection-reset-by-peer-score-534734-in-2014">57: ssh_exchange_identification: read: Connection reset by peer (score <span>534734</span> in 2014)</a></li>
<li><a href="#how-to-terminate-a-background-process-score-527774-in-2017">58: How to terminate a background process? (score <span>527774</span> in 2017)</a></li>
<li><a href="#how-can-i-get-a-count-of-files-in-a-directory-using-the-command-line-score-523917-in">59: How can I get a count of files in a directory using the command line? (score <span>523917</span> in )</a></li>
<li><a href="#run-a-command-without-making-me-wait-score-521355-in-2015">60: Run a command without making me wait (score <span>521355</span> in 2015)</a></li>
<li><a href="#how-to-find-path-where-jdk-installed-score-517666-in-2016">61: How to find path where jdk installed? (score <span>517666</span> in 2016)</a></li>
<li><a href="#list-all-connected-ssh-sessions-score-516524-in">62: List all connected SSH sessions? (score <span>516524</span> in )</a></li>
<li><a href="#how-to-list-all-files-ordered-by-size-score-504759-in-2016">63: How to list all files ordered by size (score <span>504759</span> in 2016)</a></li>
<li><a href="#how-to-split-the-terminal-into-more-than-one-view-score-497837-in-2012">64: How to split the terminal into more than one “view”? (score <span>497837</span> in 2012)</a></li>
<li><a href="#use-scp-to-transfer-a-file-from-local-directory-x-to-remote-directory-y-score-496212-in-2014">65: Use scp to transfer a file from local directory X to remote directory Y (score <span>496212</span> in 2014)</a></li>
<li><a href="#how-to-conditionally-do-something-if-a-command-succeeded-or-failed-score-493846-in-2011">66: How to conditionally do something if a command succeeded or failed (score <span>493846</span> in 2011)</a></li>
<li><a href="#umount-device-is-busy.-why-score-493778-in-2017">67: umount: device is busy. Why? (score <span>493778</span> in 2017)</a></li>
<li><a href="#repeat-a-unix-command-every-x-seconds-forever-score-492897-in-2017">68: Repeat a Unix command every x seconds forever (score <span>492897</span> in 2017)</a></li>
<li><a href="#how-can-get-a-list-of-all-scheduled-cron-jobs-on-my-machine-score-492891-in">69: How can get a list of all scheduled cron jobs on my machine? (score <span>492891</span> in )</a></li>
<li><a href="#how-can-i-fix-cannot-find-a-valid-baseurl-for-repo-errors-on-centos-score-492382-in-2011">70: How can I fix “cannot find a valid baseurl for repo” errors on CentOS? (score <span>492382</span> in 2011)</a></li>
<li><a href="#how-to-clean-log-file-score-490027-in-2015">71: How to clean log file? (score <span>490027</span> in 2015)</a></li>
<li><a href="#what-is-the-eval-command-in-bash-score-487764-in-2016">72: What is the “eval” command in bash? (score <span>487764</span> in 2016)</a></li>
<li><a href="#why-does-find--mtime-1-only-return-files-older-than-2-days-score-480450-in-2015">73: Why does find -mtime +1 only return files older than 2 days? (score <span>480450</span> in 2015)</a></li>
<li><a href="#how-can-i-test-if-a-variable-is-empty-or-contains-only-spaces-score-473621-in-2014">74: How can I test if a variable is empty or contains only spaces? (score <span>473621</span> in 2014)</a></li>
<li><a href="#how-to-know-number-of-cores-of-a-system-in-linux-score-470466-in-2018">75: How to know number of cores of a system in Linux? (score <span>470466</span> in 2018)</a></li>
<li><a href="#how-to-get-execution-time-of-a-script-effectively-score-463777-in">76: How to get execution time of a script effectively? (score <span>463777</span> in )</a></li>
<li><a href="#how-do-i-set-a-user-environment-variable-permanently-not-session-score-462273-in-2015">77: How do I set a user environment variable? (permanently, not session) (score <span>462273</span> in 2015)</a></li>
<li><a href="#how-to-move-all-files-and-folders-via-mv-command-score-460027-in">78: How to move all files and folders via mv command (score <span>460027</span> in )</a></li>
<li><a href="#create-a-symbolic-link-relative-to-the-current-directory-score-458234-in-2017">79: Create a symbolic link relative to the current directory (score <span>458234</span> in 2017)</a></li>
<li><a href="#connecting-to-wifi-network-through-command-line-score-458007-in-2013">80: Connecting to wifi network through command line (score <span>458007</span> in 2013)</a></li>
<li><a href="#how-can-i-delete-all-lines-in-a-file-using-vi-score-457247-in-2014">81: How can I delete all lines in a file using vi? (score <span>457247</span> in 2014)</a></li>
<li><a href="#create-file-in-folder-permission-denied-score-456046-in-2018">82: Create file in folder: permission denied (score <span>456046</span> in 2018)</a></li>
<li><a href="#how-to-remove-all-the-files-in-a-directory-score-453533-in-2012">83: How to remove all the files in a directory? (score <span>453533</span> in 2012)</a></li>
<li><a href="#ifconfig-command-not-found-score-450089-in-2017">84: ifconfig command not found (score <span>450089</span> in 2017)</a></li>
<li><a href="#how-to-see-full-log-from-systemctl-status-service-score-440141-in-2015">85: How to see full log from systemctl status service? (score <span>440141</span> in 2015)</a></li>
<li><a href="#how-can-i-get-the-size-of-a-file-in-a-bash-script-score-431964-in-2015">86: How can I get the size of a file in a bash script? (score <span>431964</span> in 2015)</a></li>
<li><a href="#pass-command-line-arguments-to-bash-script-score-431322-in-2012">87: Pass command line arguments to bash script (score <span>431322</span> in 2012)</a></li>
<li><a href="#delete-the-last-character-of-a-string-using-string-manipulation-in-shell-script-score-427336-in-2016">88: Delete the last character of a string using string manipulation in shell script (score <span>427336</span> in 2016)</a></li>
<li><a href="#trying-to-ssh-to-local-vm-ubuntu-with-putty-score-424931-in-2015">89: Trying to SSH to local VM Ubuntu with Putty (score <span>424931</span> in 2015)</a></li>
<li><a href="#how-to-set-default-file-permissions-for-all-foldersfiles-in-a-directory-score-418176-in-2013">90: How to set default file permissions for all folders/files in a directory? (score <span>418176</span> in 2013)</a></li>
<li><a href="#how-to-unfreeze-after-accidentally-pressing-ctrl-s-in-a-terminal-score-415151-in-2017">91: How to unfreeze after accidentally pressing Ctrl-S in a terminal? (score <span>415151</span> in 2017)</a></li>
<li><a href="#using-the-not-equal-operator-for-string-comparison-score-408060-in-2019">92: Using the not equal operator for string comparison (score <span>408060</span> in 2019)</a></li>
<li><a href="#ssh-login-with-clear-text-password-as-a-parameter-score-407789-in-2015">93: SSH login with clear text password as a parameter? (score <span>407789</span> in 2015)</a></li>
<li><a href="#how-to-write-startup-script-for-systemd-score-407696-in-2017">94: How to write startup script for systemd (score <span>407696</span> in 2017)</a></li>
<li><a href="#delete-files-older-than-x-days-score-405807-in-2015">95: Delete files older than X days + (score <span>405807</span> in 2015)</a></li>
<li><a href="#in-a-bash-script-using-the-conditional-or-in-an-if-statement-score-405275-in-2017">96: In a bash script, using the conditional “or” in an “if” statement (score <span>405275</span> in 2017)</a></li>
<li><a href="#gpu-usage-monitoring-cuda-score-404894-in">97: GPU usage monitoring (CUDA) (score <span>404894</span> in )</a></li>
<li><a href="#what-is-the-purpose-of-.bashrc-and-how-does-it-work-score-404368-in-2014">98: What is the purpose of .bashrc and how does it work? (score <span>404368</span> in 2014)</a></li>
<li><a href="#inputoutput-error-when-accessing-a-directory-score-403238-in-2015">99: “Input/output error” when accessing a directory (score <span>403238</span> in 2015)</a></li>
<li><a href="#how-to-connect-to-a-serial-port-as-simple-as-using-ssh-score-402296-in-2011">100: How to connect to a serial port as simple as using SSH? (score <span>402296</span> in 2011)</a></li>
</ul>
</nav>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="how-to-copy-files-from-one-machine-to-another-using-ssh-score-2648711-in-2018" class="level3">
<h3>1: How to copy files from one machine to another using ssh (score <a href="https://stackoverflow.com/q/106480.html">2648711</a> in 2018)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>I’m using Linux (centos) machine, I already connected to the other system using <code>ssh</code>. Now my question is how can I copy files from one system to another system?</p>
<p>Suppose, in my environment, I have two system like <code>System A</code> and <code>System B</code>. I’m using <code>System A</code> machine and some other using <code>System B</code> machine.</p>
<p>
How can I copy a file from <code>System B</code> to <code>System A</code>? And, copy a file from <code>System A</code> to <code>System B</code>?
</p>
</section>
<section id="answer-2-score-991" class="level4">
<h4>Answer 2 (score 991)</h4>
<p>Syntax:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">scp</span> <span class="op">&lt;</span>source<span class="op">&gt;</span> <span class="op">&lt;</span>destination<span class="op">&gt;</span></a></code></pre></div>
<p>To copy a file from <code>B</code> to <code>A</code> while logged into <code>B</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">scp</span> /path/to/file username@a:/path/to/destination</a></code></pre></div>
<p>To copy a file from <code>B</code> to <code>A</code> while logged into <code>A</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="fu">scp</span> username@b:/path/to/file /path/to/destination</a></code></pre></div>
</section>
<section id="answer-3-score-109" class="level4">
<h4>Answer 3 (score 109)</h4>
<p>In case if you need an alternate approach.</p>
<p>Install sshfs. if you use ubuntu/debian:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">sudo</span> apt-get install sshfs</a></code></pre></div>
<p>or, if you use centos/rhel:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="fu">sudo</span> yum install fuse-sshfs</a></code></pre></div>
<p>Create an empty dir</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">mkdir</span> /home/user/testdir</a></code></pre></div>
<p>“link” or “mount” the two directories</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="ex">sshfs</span> user@server.com:/remote/dir /home/user/testdir</a></code></pre></div>
<p>“unlink” the dirs</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="ex">fusermount</span> -u /home/user/testdir</a></code></pre></div>
<p>For more see here, <a href="http://www.linuxjournal.com/article/8904" rel="noreferrer">linuxjournal.com</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-the-size-of-a-directory-on-the-command-line-score-2399217-in-2017" class="level3">
<h3>2: How do I get the size of a directory on the command line? (score <a href="https://stackoverflow.com/q/185764.html">2399217</a> in 2017)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>I tried to obtain the size of a directory (containing directories and sub directories) by using the <code>ls</code> command with option <code>l</code>. It seems to work for files (<code>ls -l file name</code>), but if I try to get the size of a directory (for instance, <code>ls -l /home</code>), I get only 4096 bytes, although altogether it is much bigger.</p>
</section>
<section id="answer-accepted-score-1498" class="level4">
<h4>Answer accepted (score 1498)</h4>
<p><code>du -sh file_path</code></p>
<p><strong>Explanation</strong></p>
<ul>
<li>
<code>du</code> (<strong>d</strong>isc <strong>u</strong>sage) command estimates file_path space usage
</li>
<li>
<p>
The options <code>-sh</code> are (from <code>man du</code>):
</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1">  <span class="ex">-s</span>, --summarize</a>
<a class="sourceLine" id="cb9-2" title="2">         <span class="ex">display</span> only a total for each argument</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="ex">-h</span>, --human-readable</a>
<a class="sourceLine" id="cb9-5" title="5">         <span class="ex">print</span> sizes in human readable format (e.g., 1K 234M 2G)</a></code></pre></div>
<p>To check more than one directory and see the total, use <code>du -sch</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1">  <span class="ex">-c</span>, --total</a>
<a class="sourceLine" id="cb10-2" title="2">         <span class="ex">produce</span> a grand total</a></code></pre></div>
</li>
</ul>
</section>
<section id="answer-2-score-321" class="level4">
<h4>Answer 2 (score 321)</h4>
<p>Just use the <code>du</code> command:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">du</span> -sh -- *</a></code></pre></div>
<p>will give you the cumulative disk usage of all non-hidden directories, files etc in the current directory in human-readable format.</p>
<p>You can use the <code>df</code> command to know the free space in the filesystem containing the directory:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">df</span> -h .</a></code></pre></div>
</section>
<section id="answer-3-score-198" class="level4">
<h4>Answer 3 (score 198)</h4>
<p><code>du</code> is your friend. If you just want to know the total size of a directory then jump into it and run:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="fu">du</span> -hs</a></code></pre></div>
<p>If you also would like to know which sub-folders take up how much disk space?! You could extend this command to:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="fu">du</span> -h --max-depth=1 <span class="kw">|</span> <span class="fu">sort</span> -hr</a></code></pre></div>
<p>which will give you the size of all sub-folders (level 1). The output will be sorted (largest folder on top).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-correctly-add-a-path-to-path-score-2218650-in-2015" class="level3">
<h3>3: How to correctly add a path to PATH? (score <a href="https://stackoverflow.com/q/26047.html">2218650</a> in 2015)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>I’m wondering where a new path has to be added to the <code>PATH</code> environment variable. I know this can be accomplished by editing <code>.bashrc</code> (for example), but it’s not clear how to do this.</p>
<p>This way:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1"><span class="bu">export</span> <span class="va">PATH=</span>~/opt/bin:<span class="va">$PATH</span></a></code></pre></div>
<p>or this?</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1"><span class="bu">export</span> <span class="va">PATH=$PATH</span>:~/opt/bin</a></code></pre></div>
</section>
<section id="answer-accepted-score-1039" class="level4">
<h4>Answer accepted (score 1039)</h4>
<h5>
The simple stuff
</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb17-1" title="1"><span class="va">PATH=$PATH</span>:~/opt/bin</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="va">PATH=</span>~/opt/bin:<span class="va">$PATH</span></a></code></pre></div>
<p>depending on whether you want to add <code>~/opt/bin</code> at the end (to be searched after all other directories, in case there is a program by the same name in multiple directories) or at the beginning (to be searched before all other directories).</p>
<p>You can add multiple entries at the same time. <code>PATH=$PATH:~/opt/bin:~/opt/node/bin</code> or variations on the ordering work just fine. Don’t put <code>export</code> at the beginning of the line as it has additional complications (see below under “Notes on shells other than bash”).</p>
<p>If your <code>PATH</code> gets built by many different components, you might end up with duplicate entries. See <a href="https://unix.stackexchange.com/questions/25605/how-to-add-home-directory-path-to-be-discovered-by-unix-which-command">How to add home directory path to be discovered by Unix which command?</a> and <a href="https://unix.stackexchange.com/questions/40749/remove-duplicate-path-entries-with-awk-command">Remove duplicate $PATH entries with awk command</a> to avoid adding duplicates or remove them.</p>
<p>Some distributions automatically put <code>~/bin</code> in your PATH if it exists, by the way.</p>
<h5>
Where to put it
</h3>
<p>Put the line to modify <code>PATH</code> in <code>~/.profile</code>, or in <code>~/.bash_profile</code> if that’s what you have.</p>
<p>Note that <code>~/.bash_rc</code> is not read by any program, and <code>~/.bashrc</code> is the configuration file of interactive instances of bash. You should not define environment variables in <code>~/.bashrc</code>. The right place to define environment variables such as <code>PATH</code> is <code>~/.profile</code> (or <code>~/.bash_profile</code> if you don’t care about shells other than bash). See <a href="https://superuser.com/questions/183870/difference-between-bashrc-and-bash-profile/183980#183980">What’s the difference between them and which one should I use?</a></p>
<p>Don’t put it in <code>/etc/environment</code> or <code>~/.pam_environment</code>: these are not shell files, you can’t use substitutions like <code>$PATH</code> in there. In these files, you can only override a variable, not add to it.</p>
<h5>
Potential complications in some system scripts
</h3>
<p>You don’t need <code>export</code> if the variable is already in the environment: any change of the value of the variable is reflected in the environment.¹ <code>PATH</code> is pretty much always in the environment; all unix systems set it very early on (usually in the very first process, in fact).</p>
<p>At login time, you can rely on <code>PATH</code> being already in the environment, and already containing some system directories. If you’re writing a script that may be executed early while setting up some kind of virtual environment, you may need to ensure that <code>PATH</code> is non-empty and exported: if <code>PATH</code> is still unset, then something like <code>PATH=$PATH:/some/directory</code> would set <code>PATH</code> to <code>:/some/directory</code>, and the empty component at the beginning means the current directory (like <code>.:/some/directory</code>).</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">${PATH-}</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">export</span> <span class="va">PATH=</span>/usr/local/bin:/usr/bin:/bin; <span class="kw">fi</span></a></code></pre></div>
<h5>
Notes on shells other than bash
</h3>
<p>In bash, ksh and zsh, <code>export</code> is special syntax, and both <code>PATH=~/opt/bin:$PATH</code> and <code>export PATH=~/opt/bin:$PATH</code> do the right thing even. In other Bourne/POSIX-style shells such as dash (which is <code>/bin/sh</code> on many systems), <code>export</code> is parsed as an ordinary command, which implies two differences:</p>
<ul>
<li>
<code>~</code> is only parsed at the beginning of a word, except in assignments (see <a href="https://unix.stackexchange.com/questions/25605/how-to-add-home-directory-path-to-be-discovered-by-unix-which-command/25704#25704">How to add home directory path to be discovered by Unix which command?</a> for details);
</li>
<li>
<code>$PATH</code> outside double quotes <a href="https://unix.stackexchange.com/questions/131766/why-does-my-shell-script-choke-on-whitespace-or-other-special-characters">breaks if <code>PATH</code> contains whitespace or <code>\[*?</code></a>.
</li>
</ul>
<p>
So in shells like dash, <strike><code>export PATH=~/opt/bin:$PATH</code></strike> sets <code>PATH</code> to the literal string <code>~/opt/bin/:</code> followed by the value of <code>PATH</code> up to the first space. <code>PATH=~/opt/bin:$PATH</code> (a bare assignment) <a href="https://unix.stackexchange.com/questions/68694/when-is-double-quoting-necessary/68748#68748">doesn’t require quotes</a> and does the right thing. If you want to use <code>export</code> in a portable script, you need to write <code>export PATH=&quot;$HOME/opt/bin:$PATH&quot;</code>, or <code>PATH=~/opt/bin:$PATH; export PATH</code> (or <code>PATH=$HOME/opt/bin:$PATH; export PATH</code> for portability to even the Bourne shell that didn’t accept <code>export var=value</code> and didn’t do tilde expansion).
</p>
<p>¹ <sub> This wasn’t true in Bourne shells (as in the actual Bourne shell, not modern POSIX-style shells), but you’re highly unlikely to encounter such old shells these days. </sub></p>
</section>
<section id="answer-2-score-84" class="level4">
<h4>Answer 2 (score 84)</h4>
<p>Either way works, but they don’t do the same thing: the elements of <code>PATH</code>are checked left to right. In your first example, executables in <code>~/opt/bin</code> will have precedence over those installed, for example, in <code>/usr/bin</code>, which may or may not be what you want.</p>
<p>In particular, from a safety point of view, it is dangerous to add paths to the front, because if someone can gain write access to your <code>~/opt/bin</code>, they can put, for example, a different <code>ls</code> in there, which you’d then probably use instead of <code>/bin/ls</code> without noticing. Now imagine the same for <code>ssh</code> or your browser or choice… (The same goes triply for putting . in your path.)</p>
</section>
<section id="answer-3-score-37" class="level4">
<h4>Answer 3 (score 37)</h4>
<p>I’m confused by question 2 (since removed from the question since it was due to an unrelated issue):</p>
<blockquote>
<p>
What’s a workable way to append more paths on different lines? Initially I thought this could do the trick:
</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb20-1" title="1"><span class="bu">export</span> <span class="va">PATH=$PATH</span>:~/opt/bin</a>
<a class="sourceLine" id="cb20-2" title="2"><span class="bu">export</span> <span class="va">PATH=$PATH</span>:~/opt/node/bin</a></code></pre></div>
<p>
but it doesn’t because the second assignment doesn’t only append <code>~/opt/node/bin</code>, but also the whole <code>PATH</code> previously assigned.
</p>
<p>This is a possible workaround:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb21-1" title="1"><span class="bu">export</span> <span class="va">PATH=$PATH</span>:~/opt/bin:~/opt/node/bin</a></code></pre></div>
but for readability I’d prefer to have one assignment for one path.
</blockquote>
<p>If you say</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb22-1" title="1"><span class="va">PATH=</span>~/opt/bin</a></code></pre></div>
<p>that’s <strong>all</strong> that will be in your PATH. PATH is just an environment variable, and if you want to add to the PATH, you have to rebuild the variable with exactly the contents you want. That is, what you give as an example to question 2 is exactly what you want to do, unless I’m totally missing the point of the question.</p>
<p>I use both forms in my code. I have a generic profile that I install on every machine I work on that looks like this, to accommodate for potentially-missing directories:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb23-1" title="1"><span class="bu">export</span> <span class="va">PATH=</span>/opt/bin:/usr/local/bin:/usr/contrib/bin:/bin:/usr/bin:/usr/sbin:/usr/bin/X11</a>
<a class="sourceLine" id="cb23-2" title="2"><span class="co"># add optional items to the path</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="kw">for</span> <span class="ex">bindir</span> in <span class="va">$HOME</span>/local/bin <span class="va">$HOME</span>/bin<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb23-4" title="4">    <span class="kw">if</span><span class="bu"> [</span> <span class="ot">-d</span> <span class="va">$bindir</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb23-5" title="5">        <span class="va">PATH=$PATH</span>:<span class="va">${bindir}</span></a>
<a class="sourceLine" id="cb23-6" title="6">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="kw">done</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-switch-between-users-on-one-terminal-score-2038581-in-2011" class="level3">
<h3>4: How to switch between users on one terminal? (score <a href="https://stackoverflow.com/q/3568.html">2038581</a> in 2011)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>I’d like to log in as a different user without logging out of the current one (on the same terminal). How do I do that?</p>
</section>
<section id="answer-accepted-score-569" class="level4">
<h4>Answer accepted (score 569)</h4>
<p>How about using the <code>su</code> command?</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb24-1" title="1">$ <span class="fu">whoami</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="ex">user1</span></a>
<a class="sourceLine" id="cb24-3" title="3">$ <span class="fu">su</span> - user2</a>
<a class="sourceLine" id="cb24-4" title="4"><span class="ex">Password</span>:</a>
<a class="sourceLine" id="cb24-5" title="5">$ <span class="fu">whoami</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="ex">user2</span></a>
<a class="sourceLine" id="cb24-7" title="7">$ <span class="bu">exit</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="bu">logout</span></a></code></pre></div>
<p>If you want to log in as root, there’s no need to specify username:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb25-1" title="1">$ <span class="fu">whoami</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="ex">user1</span></a>
<a class="sourceLine" id="cb25-3" title="3">$ <span class="fu">su</span> -</a>
<a class="sourceLine" id="cb25-4" title="4"><span class="ex">Password</span>:</a>
<a class="sourceLine" id="cb25-5" title="5">$ <span class="fu">whoami</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="ex">root</span></a>
<a class="sourceLine" id="cb25-7" title="7">$ <span class="bu">exit</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="bu">logout</span></a></code></pre></div>
<p>Generally, you can use <code>sudo</code> to launch a new shell as the user you want; the <code>-u</code> flag lets you specify the username you want:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" title="1">$ <span class="fu">whoami</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="ex">user1</span></a>
<a class="sourceLine" id="cb26-3" title="3">$ <span class="fu">sudo</span> -u user2 zsh</a>
<a class="sourceLine" id="cb26-4" title="4">$ <span class="fu">whoami</span></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="ex">user2</span></a></code></pre></div>
<p>There are more circuitous ways if you don’t have sudo access, like ssh username@localhost, but <code>sudo</code> is probably simplest, provided that it’s installed and you have permission to use it.</p>
</section>
<section id="answer-2-score-47" class="level4">
<h4>Answer 2 (score 47)</h4>
<p>Generally you use <code>sudo</code> to launch a new shell as the user you want; the <code>-u</code> flag lets you specify the username you want:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb27-1" title="1">[<span class="ex">mrozekma@etudes-1</span> ~] % whoami</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="ex">mrozekma</span></a>
<a class="sourceLine" id="cb27-3" title="3">[<span class="ex">mrozekma@etudes-1</span> ~] % sudo -u nobody zsh</a>
<a class="sourceLine" id="cb27-4" title="4">[<span class="ex">nobody@etudes-1</span> ~] % whoami</a>
<a class="sourceLine" id="cb27-5" title="5"><span class="ex">nobody</span></a></code></pre></div>
<p>There are more circuitous ways if you don’t have sudo access, like <code>ssh username@localhost</code>, but I think <code>sudo</code> is probably simplest if it’s installed and you have permission to use it</p>
</section>
<section id="answer-3-score-22" class="level4">
<h4>Answer 3 (score 22)</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb28-1" title="1">$ <span class="fu">whoami</span> </a></code></pre></div>
<p>This command prints the current user. To change users, we will have to use this command (followed by the user’s password):</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb29-1" title="1">$ <span class="fu">su</span> secondUser</a>
<a class="sourceLine" id="cb29-2" title="2"><span class="ex">Password</span>:</a></code></pre></div>
<p>After entering the correct password, you will be logged in as the specified user (which you can check by rerunning <code>whoami</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-zipunzip-on-the-unix-command-line-score-1996378-in-2011" class="level3">
<h3>5: How do I zip/unzip on the unix command line? (score <a href="https://stackoverflow.com/q/6596.html">1996378</a> in 2011)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<p>How can I create and extract zip archives from the command line?</p>
</section>
<section id="answer-2-score-665" class="level4">
<h4>Answer 2 (score 665)</h4>
<p>Typically one uses <code>tar</code> to create an uncompressed archive and either <code>gzip</code> or <code>bzip2</code> to compress that archive. The corresponding <code>gunzip</code> and <code>bunzip2</code> commands can be used to uncompress said archive, or you can just use flags on the <code>tar</code> command to perform the uncompression.</p>
<p>If you are referring specifically to the <a href="https://en.wikipedia.org/wiki/Zip_%28file_format%29">Zip file format</a>, you can simply use the <code>zip</code> and <code>unzip</code> commands.</p>
<p>To compress:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb30-1" title="1"><span class="fu">zip</span> squash.zip file1 file2 file3</a></code></pre></div>
<p>or to zip a directory</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb31-1" title="1"><span class="fu">zip</span> -r squash.zip dir1</a></code></pre></div>
<p>To uncompress:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb32-1" title="1"><span class="fu">unzip</span> squash.zip</a></code></pre></div>
<p>this unzips it in your current working directory.</p>
</section>
<section id="answer-3-score-65" class="level4">
<h4>Answer 3 (score 65)</h4>
<p>There are a truly <em>vast</em> number of different ways to compress and uncompress under UNIX derivatives so I’m going to assume you meant “zip” in the generic sense rather than a <em>specific</em> file format.</p>
<p>You can zip files up (in compressed format) with the GNU <code>tar</code> program:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb33-1" title="1"><span class="fu">tar</span> -zcvf myfile.tgz .</a></code></pre></div>
<p>which will do the current directory. Replace <code>.</code> with other file names if you want something else.</p>
<p>To unzip that file, use:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb34-1" title="1"><span class="fu">tar</span> -zxvf myfile.tgz</a></code></pre></div>
<p>That’s assuming of course that you have a <code>tar</code> capable of doing the compression as well as combining of files into one.</p>
<p>If not, you can just use <code>tar cvf</code> followed by <code>gzip</code> (again, if available) for compression and <code>gunzip</code> followed by <code>tar xvf</code>.</p>
<hr>
<p>For specific handling of ZIP format files, I would recommend downloading <code>7zip</code> and using that - it recognises a <em>huge</em> variety of file formats, including the ZIP one.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-install-a-deb-file-by-dpkg--i-or-by-apt-score-1830525-in-2016" class="level3">
<h3>6: How to install a deb file, by dpkg -i or by apt? (score <a href="https://stackoverflow.com/q/159094.html">1830525</a> in 2016)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p>I have a deb package for installation.</p>
<p>Shall I install by <code>dpkg -i my.deb</code>, or by apt?</p>
<p>Will both handle the software dependency problem well?</p>
<p>If by apt, how can I install from the deb by apt?</p>
</section>
<section id="answer-accepted-score-781" class="level4">
<h4>Answer accepted (score 781)</h4>
<p>When you use <code>apt</code> to install a package, under the hood it uses <code>dpkg</code>. When you install a package using apt, it first creates a list of all the dependencies and downloads it from the repository.</p>
<p>Once the download is finished it calls <code>dpkg</code> to install all those files, satisfying all the dependencies.</p>
<p>So if you have a <code>.deb</code> file:</p>
<ul>
<li>
<p>
You can install it using:
</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb35-1" title="1"><span class="fu">sudo</span> dpkg -i /path/to/deb/file</a>
<a class="sourceLine" id="cb35-2" title="2"><span class="fu">sudo</span> apt-get install -f</a></code></pre></div>
</li>
<li>
<p>
You can install it using <code>sudo apt install ./name.deb</code> (or <code>sudo apt install /path/to/package/name.deb</code>).
</p>
With old <code>apt-get</code> versions you must first move your deb file to <code>/var/cache/apt/archives/</code> directory. For both, after executing this command, it will automatically download its dependencies.
</li>
<li>
<p>
Install <code>gdebi</code> and open your .deb file using it (<em>Right-click</em> -&gt; <em>Open with</em>). It will install your .deb package with all its dependencies.
</p>
(<strong>Note</strong>: APT maintains the package index which is a database of available packages available in repo defined in <code>/etc/apt/sources.list</code> file and in the <code>/etc/apt/sources.list.d</code> directory. All these methods will fail to satisfy the software dependency if the dependencies required by the deb is not present in the package index.)
</li>
</ul>
<hr>
<p><strong>Why use <code>sudo apt-get install -f</code> after <code>sudo dpkg -i /path/to/deb/file</code></strong> (mentioned in first method)?</p>
<p>From <code>man apt-get</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb36-1" title="1"> <span class="ex">-f</span>, --fix-broken</a>
<a class="sourceLine" id="cb36-2" title="2">           <span class="ex">Fix</span><span class="kw">;</span> <span class="ex">attempt</span> to correct a system with broken dependencies in place.</a></code></pre></div>
<p>When <code>dpkg</code> installs a package and a package dependency is not satisfied, it leaves the package in an “unconfigured” state and that package is considered broken.</p>
<p><code>sudo apt-get install -f</code> command tries to fix this broken package by installing the missing dependency.</p>
</section>
<section id="answer-2-score-92" class="level4">
<h4>Answer 2 (score 92)</h4>
<p>Install your <code>foo.deb</code> file with <code>dpkg -i foo.deb</code>. If there are some errors with unresolved dependencies, run <code>apt-get install -f</code> afterwards.</p>
</section>
<section id="answer-3-score-61" class="level4">
<h4>Answer 3 (score 61)</h4>
<p>Here’s the best way to install a <code>.deb</code> file on Ubuntu on the command-line:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb37-1" title="1"><span class="fu">sudo</span> gdebi skype.deb</a></code></pre></div>
<p>If you don’t have <code>gdebi</code> installed already, install it using <code>sudo apt install gdebi-core</code>.</p>
<h5>
Why gdebi?
</h1>
<p><code>gdebi</code> will look for all the dependencies of the <code>.deb</code> file, and will install them before attempting to install the <code>.deb</code> file. I find this much preferable than <code>sudo dpkg -i skype.deb &amp;amp;&amp;amp; sudo apt install -f</code>. The latter is much too eager to remove dependencies in certain situations. For instance, when I tried to install Skype, it attempted to remove 96 (!) packages, including packages like <code>compiz</code> and <code>unity</code>! <code>gdebi</code> gave a much clearer error message:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb38-1" title="1"> $ <span class="fu">sudo</span> gdebi skype.deb</a>
<a class="sourceLine" id="cb38-2" title="2"> <span class="ex">Cannot</span> install <span class="st">&#39;libqtgui:i386&#39;</span></a></code></pre></div>
<p>(Here is <a href="https://askubuntu.com/a/553283/2355">the solution to that particular issue</a>, by the way.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-os-and-version-using-a-linux-command-score-1592512-in-2015" class="level3">
<h3>7: How to check OS and version using a Linux command (score <a href="https://stackoverflow.com/q/88644.html">1592512</a> in 2015)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>What is the Linux command to check the server OS and its version?</p>
<p>I am connected to the server using shell.</p>
</section>
<section id="answer-accepted-score-376" class="level4">
<h4>Answer accepted (score 376)</h4>
<h5>
Kernel Version
</h2>
<p>If you want kernel version information, use uname(1). For example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb39-1" title="1">$ <span class="fu">uname</span> -a</a>
<a class="sourceLine" id="cb39-2" title="2"><span class="ex">Linux</span> localhost 3.11.0-3-generic <span class="co">#8-Ubuntu SMP Fri Aug 23 16:49:15 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span></a></code></pre></div>
<h5>
Distribution Information
</h2>
<p>If you want distribution information, it will vary depending on your distribution and whether your system supports the <a href="http://en.wikipedia.org/wiki/Linux_Standard_Base">Linux Standard Base</a>. Some ways to check, and some example output, are immediately below.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb40-1" title="1">$ <span class="ex">lsb_release</span> -a</a>
<a class="sourceLine" id="cb40-2" title="2"><span class="ex">No</span> LSB modules are available.</a>
<a class="sourceLine" id="cb40-3" title="3"><span class="ex">Distributor</span> ID: Ubuntu</a>
<a class="sourceLine" id="cb40-4" title="4"><span class="ex">Description</span>:    Ubuntu Saucy Salamander (development branch)</a>
<a class="sourceLine" id="cb40-5" title="5"><span class="ex">Release</span>:    13.10</a>
<a class="sourceLine" id="cb40-6" title="6"><span class="ex">Codename</span>:   saucy</a>
<a class="sourceLine" id="cb40-7" title="7"></a>
<a class="sourceLine" id="cb40-8" title="8">$ <span class="fu">cat</span> /etc/lsb-release </a>
<a class="sourceLine" id="cb40-9" title="9"><span class="va">DISTRIB_ID=</span>Ubuntu</a>
<a class="sourceLine" id="cb40-10" title="10"><span class="va">DISTRIB_RELEASE=</span>13.10</a>
<a class="sourceLine" id="cb40-11" title="11"><span class="va">DISTRIB_CODENAME=</span>saucy</a>
<a class="sourceLine" id="cb40-12" title="12"><span class="va">DISTRIB_DESCRIPTION=</span><span class="st">&quot;Ubuntu Saucy Salamander (development branch)&quot;</span></a>
<a class="sourceLine" id="cb40-13" title="13"></a>
<a class="sourceLine" id="cb40-14" title="14">$ <span class="fu">cat</span> /etc/issue.net</a>
<a class="sourceLine" id="cb40-15" title="15"><span class="ex">Ubuntu</span> Saucy Salamander (development branch)</a>
<a class="sourceLine" id="cb40-16" title="16"></a>
<a class="sourceLine" id="cb40-17" title="17">$ <span class="fu">cat</span> /etc/debian_version </a>
<a class="sourceLine" id="cb40-18" title="18"><span class="ex">wheezy/sid</span></a></code></pre></div>
</section>
<section id="answer-2-score-57" class="level4">
<h4>Answer 2 (score 57)</h4>
<p>You can execute <code>cat /etc/redhat-release</code> to check the <a href="http://en.wikipedia.org/wiki/Red_Hat_Linux" rel="noreferrer">Red Hat Linux</a> (RH) version if you use an RH-based OS.</p>
<p>Another solution that may work on any linux distributions is <code>lsb_release -a</code>.</p>
<p>And the <code>uname -a</code> command shows the kernel version and other things.</p>
<p>Also <code>cat /etc/issue.net</code> shows your OS version… This file shows in the telnet command when you want to connect to the server. For security reasons, it is better to delete the version and os name in this file.</p>
</section>
<section id="answer-3-score-46" class="level4">
<h4>Answer 3 (score 46)</h4>
<p>If it is a debian based system, you could do</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb41-1" title="1"><span class="fu">cat</span> /etc/*_version</a></code></pre></div>
<p>or for a Red Hat based system, you could try (this is working on Red Hat Enterprise Linux-7):</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb42-1" title="1"><span class="fu">cat</span> /etc/*-release</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="using-sed-to-find-and-replace-score-1560762-in-2014" class="level3">
<h3>8: Using ‘sed’ to find and replace (score <a href="https://stackoverflow.com/q/159367.html">1560762</a> in 2014)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>I know this question has probably been answered before. I have seen many threads about this in various places, but the answers are usually hard to extract for me. I am looking for help with an example usage of the ‘sed’ command.</p>
<p>Say I wanted to act upon the file “hello.txt” (in same directory as prompt). Anywhere it contained the phrase “few”, it should be changed to “asd”. What would the command look like?</p>
</section>
<section id="answer-accepted-score-583" class="level4">
<h4>Answer accepted (score 583)</h4>
<p>
<code>sed</code> is the <a href="https://www.gnu.org/software/sed/manual/sed.txt" rel="noreferrer" title="manpage"><strong>s</strong>tream <strong>ed</strong>itor</a>, in that you can use <code>|</code> (pipe) to send <em>standard streams</em> (STDIN and STDOUT specifically) through <code>sed</code> and alter them programmatically on the fly, making it a handy tool in the Unix philosophy tradition; but can edit files directly, too, using the <code>-i</code> parameter mentioned below.<br> <strong>Consider the following</strong>:
</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb43-1" title="1"><span class="fu">sed</span> -i -e <span class="st">&#39;s/few/asd/g&#39;</span> hello.txt</a></code></pre></div>
<p><code>s/</code> is used to <strong>s</strong>ubstitute the found expression <code>few</code> with <code>asd</code>:</p>
<blockquote>
<p>The few, the brave.</p>
<hr>
The asd, the brave.<br />

</blockquote>
<p><code>/g</code> stands for “global”, meaning to do this for the whole line. If you leave off the <code>/g</code> (with <code>s/few/asd/</code>, there always needs to be three slashes no matter what) and <code>few</code> appears twice on the same line, only the first <code>few</code> is changed to <code>asd</code>:</p>
<blockquote>
<p>The few men, the few women, the brave.</p>
<hr>
The asd men, the few women, the brave.<br />

</blockquote>
<p>This is useful in some circumstances, like altering special characters at the beginnings of lines (for instance, replacing the greater-than symbols some people use to quote previous material in email threads with a horizontal tab while leaving a quoted algebraic inequality later in the line untouched), but in your example where you specify that <em>anywhere</em> <code>few</code> occurs it should be replaced, make sure you have that <code>/g</code>.</p>
<p>The following two options (flags) are combined into one, <code>-ie</code>:</p>
<p><code>-i</code> option is used to edit <strong>i</strong>n place on the file <code>hello.txt</code>.</p>
<p><code>-e</code> option indicates the <strong>e</strong>xpression/command to run, in this case <code>s/</code>.</p>
<p>Note: It’s important that you use <code>-i -e</code> to search/replace. If you do <code>-ie</code>, you create a backup of every file with the letter ‘e’ appended.</p>
</section>
<section id="answer-2-score-64" class="level4">
<h4>Answer 2 (score 64)</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb44-1" title="1"><span class="fu">sed</span> -i <span class="st">&#39;s/fea/asd/g&#39;</span>  hello.txt</a></code></pre></div>
<p><em>g:</em> Global</p>
<p><em>s:</em> substitute</p>
<p><em>-i</em> : realtime works with file <em>inplace</em></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-replace-a-string-in-a-files-score-1507545-in-2017" class="level3">
<h3>9: How can I replace a string in a file(s)? (score <a href="https://stackoverflow.com/q/112023.html">1507545</a> in 2017)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>Replacing strings in files based on certain search criteria is a very common task. How can I</p>
<ul>
<li>
replace string <code>foo</code> with <code>bar</code> in all files in the current directory?
</li>
<li>
do the same recursively for sub directories?
</li>
<li>
replace only if the file name matches another string?
</li>
<li>
replace only if the string is found in a certain context?
</li>
<li>
replace if the string is on a certain line number?
</li>
<li>
replace multiple strings with the same replacement
</li>
<li>
replace multiple strings with different replacements
</li>
</ul>
</section>
<section id="answer-accepted-score-1014" class="level4">
<h4>Answer accepted (score 1014)</h4>
<h5>
<ol type="1">
<li>Replacing all occurrences of one string with another in all files in the current directory:
</h2></li>
</ol>
<p>These are for cases where you <em>know</em> that the directory contains only regular files and that you want to process all non-hidden files. If that is not the case, use the approaches in 2.</p>
<p>All <code>sed</code> solutions in this answer assume GNU <code>sed</code>. If using FreeBSD or OS/X, replace <code>-i</code> with <code>-i ''</code>. Also note that the use of the <code>-i</code> switch with any version of <code>sed</code> has certain filesystem <a href="http://lists.gnu.org/archive/html/bug-gnu-utils/2013-09/msg00000.html" rel="noreferrer">security implications</a> and is inadvisable in any script which you plan to distribute in any way.</p>
<ul>
<li>
<p>
Non recursive, files in this directory only:
</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb45-1" title="1"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> *</a>
<a class="sourceLine" id="cb45-2" title="2"><span class="fu">perl</span> -i -pe <span class="st">&#39;s/foo/bar/g&#39;</span> ./* </a></code></pre></div>
(the <a href="https://unix.stackexchange.com/q/170013/22565"><code>perl</code> one will fail for file names ending in <code>|</code> or space)</a>).
</li>
<li>
<p>
Recursive, regular files (<strong>including hidden ones</strong>) in this and all subdirectories
</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb46-1" title="1"><span class="fu">find</span> . -type f -exec sed -i <span class="st">&#39;s/foo/bar/g&#39;</span> {} <span class="ex">+</span></a></code></pre></div>
<p>If you are using zsh:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb47-1" title="1"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> **/*(D.)</a></code></pre></div>
<p>(may fail if the list is too big, see <code>zargs</code> to work around).</p>
<p>Bash can’t check directly for regular files, a loop is needed (braces avoid setting the options globally):</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">(</span> <span class="bu">shopt</span> -s globstar dotglob<span class="kw">;</span></a>
<a class="sourceLine" id="cb48-2" title="2">    <span class="kw">for</span> <span class="fu">file</span> in **<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb48-3" title="3">        <span class="kw">if [[</span> <span class="ot">-f</span> <span class="va">$file</span><span class="kw"> ]]</span> <span class="kw">&amp;&amp; [[</span> <span class="ot">-w</span> <span class="va">$file</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb48-4" title="4">            <span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> <span class="st">&quot;</span><span class="va">$file</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb48-5" title="5">        <span class="kw">fi</span></a>
<a class="sourceLine" id="cb48-6" title="6">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb48-7" title="7"><span class="kw">)</span></a></code></pre></div>
The files are selected when they are actual files (-f) and they are writable (-w).
</li>
</ul>
<h5>
<ol start="2" type="1">
<li>Replace only if the file name matches another string / has a specific extension / is of a certain type etc:
</h2></li>
</ol>
<ul>
<li>
<p>
Non-recursive, files in this directory only:
</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb49-1" title="1"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> *baz*    <span class="co">## all files whose name contains baz</span></a>
<a class="sourceLine" id="cb49-2" title="2"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> *.baz    <span class="co">## files ending in .baz</span></a></code></pre></div>
</li>
<li>
<p>
Recursive, regular files in this and all subdirectories
</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb50-1" title="1"><span class="fu">find</span> . -type f -name <span class="st">&quot;*baz*&quot;</span> -exec sed -i <span class="st">&#39;s/foo/bar/g&#39;</span> {} <span class="ex">+</span></a></code></pre></div>
<p>If you are using bash (braces avoid setting the options globally):</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">(</span> <span class="bu">shopt</span> -s globstar dotglob</a>
<a class="sourceLine" id="cb51-2" title="2">    <span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> **baz*</a>
<a class="sourceLine" id="cb51-3" title="3">    <span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> **.baz</a>
<a class="sourceLine" id="cb51-4" title="4"><span class="kw">)</span></a></code></pre></div>
<p>If you are using zsh:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" title="1"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> **/*baz*(D.)</a>
<a class="sourceLine" id="cb52-2" title="2"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> **/*.baz(D.)</a></code></pre></div>
The <code>--</code> serves to tell <code>sed</code> that no more flags will be given in the command line. This is useful to protect against file names starting with <code>-</code>.
</li>
<li>
<p>
If a file is of a certain type, for example, executable (see <code>man find</code> for more options):
</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb53-1" title="1"><span class="fu">find</span> . -type f -executable -exec sed -i <span class="st">&#39;s/foo/bar/g&#39;</span> {} <span class="ex">+</span></a></code></pre></div>
<p><code>zsh</code>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" title="1"><span class="fu">sed</span> -i -- <span class="st">&#39;s/foo/bar/g&#39;</span> **/*(D*)</a></code></pre></div>
</li>
</ul>
<h5>
<ol start="3" type="1">
<li>Replace only if the string is found in a certain context
</h2></li>
</ol>
<ul>
<li>
<p>
Replace <code>foo</code> with <code>bar</code> only if there is a <code>baz</code> later on the same line:
</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb55-1" title="1"><span class="fu">sed</span> -i <span class="st">&#39;s/foo\(.*baz\)/bar\1/&#39;</span> file</a></code></pre></div>
In <code>sed</code>, using <code>\( \)</code> saves whatever is in the parentheses and you can then access it with <code>\1</code>. There are many variations of this theme, to learn more about such regular expressions, see <a href="http://www.regular-expressions.info/" rel="noreferrer">here</a>.
</li>
<li>
<p>
Replace <code>foo</code> with <code>bar</code> only if <code>foo</code> is found on the 3d column (field) of the input file (assuming whitespace-separated fields):
</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb56-1" title="1"><span class="fu">gawk</span> -i inplace <span class="st">&#39;{gsub(/foo/,&quot;baz&quot;,$3); print}&#39;</span> file</a></code></pre></div>
(needs <code>gawk</code> 4.1.0 or newer).
</li>
<li>
<p>
For a different field just use <code>$N</code> where <code>N</code> is the number of the field of interest. For a different field separator (<code>:</code> in this example) use:
</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb57-1" title="1"><span class="fu">gawk</span> -i inplace -F<span class="st">&#39;:&#39;</span> <span class="st">&#39;{gsub(/foo/,&quot;baz&quot;,$3);print}&#39;</span> file</a></code></pre></div>
<p>Another solution using <code>perl</code>:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb58-1" title="1"><span class="fu">perl</span> -i -ane <span class="st">&#39;$F[2]=~s/foo/baz/g; $&quot; = &quot; &quot;; print &quot;@F\n&quot;&#39;</span> foo </a></code></pre></div>
<p>NOTE: both the <code>awk</code> and <code>perl</code> solutions will affect spacing in the file (remove the leading and trailing blanks, and convert sequences of blanks to one space character in those lines that match). For a different field, use <code>$F[N-1]</code> where <code>N</code> is the field number you want and for a different field separator use (the <code>$&quot;=&quot;:&quot;</code> sets the output field separator to <code>:</code>):</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb59-1" title="1"><span class="fu">perl</span> -i -F<span class="st">&#39;:&#39;</span> -ane <span class="st">&#39;$F[2]=~s/foo/baz/g; $&quot;=&quot;:&quot;;print &quot;@F&quot;&#39;</span> foo </a></code></pre></div>
</li>
<li>
<p>
Replace <code>foo</code> with <code>bar</code> only on the 4th line:
</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb60-1" title="1"><span class="fu">sed</span> -i <span class="st">&#39;4s/foo/bar/g&#39;</span> file</a>
<a class="sourceLine" id="cb60-2" title="2"><span class="fu">gawk</span> -i inplace <span class="st">&#39;NR==4{gsub(/foo/,&quot;baz&quot;)};1&#39;</span> file</a>
<a class="sourceLine" id="cb60-3" title="3"><span class="fu">perl</span> -i -pe <span class="st">&#39;s/foo/bar/g if $.==4&#39;</span> file</a></code></pre></div>
</li>
</ul>
<h5>
<ol start="4" type="1">
<li>Multiple replace operations: replace with different strings
</h2></li>
</ol>
<ul>
<li>
<p>
You can combine <code>sed</code> commands:
</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb61-1" title="1"><span class="fu">sed</span> -i <span class="st">&#39;s/foo/bar/g; s/baz/zab/g; s/Alice/Joan/g&#39;</span> file</a></code></pre></div>
Be aware that order matters (<code>sed 's/foo/bar/g; s/bar/baz/g'</code> will substitute <code>foo</code> with <code>baz</code>).
</li>
<li>
<p>
or Perl commands
</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb62-1" title="1"><span class="fu">perl</span> -i -pe <span class="st">&#39;s/foo/bar/g; s/baz/zab/g; s/Alice/Joan/g&#39;</span> file</a></code></pre></div>
</li>
<li>
<p>
If you have a large number of patterns, it is easier to save your patterns and their replacements in a <code>sed</code> script file:
</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb63-1" title="1"><span class="co">#! /usr/bin/sed -f</span></a>
<a class="sourceLine" id="cb63-2" title="2"><span class="ex">s/foo/bar/g</span></a>
<a class="sourceLine" id="cb63-3" title="3"><span class="ex">s/baz/zab/g</span></a></code></pre></div>
</li>
<li>
<p>
Or, if you have too many pattern pairs for the above to be feasible, you can read pattern pairs from a file (two space separated patterns, $pattern and $replacement, per line):
</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb64-1" title="1"><span class="kw">while</span> <span class="bu">read</span> -r <span class="va">pattern</span> <span class="va">replacement</span>; <span class="kw">do</span>   </a>
<a class="sourceLine" id="cb64-2" title="2">    <span class="fu">sed</span> -i <span class="st">&quot;s/</span><span class="va">$pattern</span><span class="st">/</span><span class="va">$replacement</span><span class="st">/&quot;</span> file</a>
<a class="sourceLine" id="cb64-3" title="3"><span class="kw">done</span> <span class="op">&lt;</span> <span class="ex">patterns.txt</span></a></code></pre></div>
</li>
<li>
<p>
That will be quite slow for long lists of patterns and large data files so you might want to read the patterns and create a <code>sed</code> script from them instead. The following assumes a <em>&lt;space&gt;</em> delimiter separates a list of <em>MATCH&lt;space&gt;REPLACE</em> pairs occurring one-per-line in the file <em><code>patterns.txt</code></em> :
</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb65-1" title="1"><span class="fu">sed</span> <span class="st">&#39;s| *\([^ ]*\) *\([^ ]*\).*|s/\1/\2/g|&#39;</span> <span class="op">&lt;</span>patterns.txt <span class="kw">|</span></a>
<a class="sourceLine" id="cb65-2" title="2"><span class="fu">sed</span> -f- ./editfile <span class="op">&gt;</span>outfile</a></code></pre></div>
The above format is largely arbitrary and, for example, doesn’t allow for a <em>&lt;space&gt;</em> in either of <em>MATCH</em> or <em>REPLACE</em>. The method is very general though: basically, if you can create an output stream which looks like a <code>sed</code> script, then you can source that stream as a <code>sed</code> script by specifying <code>sed</code>’s script file as <code>-</code>stdin.
</li>
<li>
<p>
You can combine and concatenate multiple scripts in similar fashion:
</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb66-1" title="1"><span class="ex">SOME_PIPELINE</span> <span class="kw">|</span></a>
<a class="sourceLine" id="cb66-2" title="2"><span class="fu">sed</span> -e<span class="st">&#39;#some expression script&#39;</span>  \</a>
<a class="sourceLine" id="cb66-3" title="3">    -f./script_file -f-          \</a>
<a class="sourceLine" id="cb66-4" title="4">    -e<span class="st">&#39;#more inline expressions&#39;</span> \</a>
<a class="sourceLine" id="cb66-5" title="5">./actual_edit_file <span class="op">&gt;</span>./outfile</a></code></pre></div>
A POSIX <code>sed</code> will concatenate all scripts into one in the order they appear on the command-line. None of these need end in a <code>\n</code>ewline.
</li>
<li>
<p>
<code>grep</code> can work the same way:
</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb67-1" title="1"><span class="fu">sed</span> -e<span class="st">&#39;#generate a pattern list&#39;</span> <span class="op">&lt;</span>in <span class="kw">|</span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="fu">grep</span> -f- ./grepped_file</a></code></pre></div>
</li>
<li>
<p>
When working with fixed-strings as patterns, it is good practice to escape regular expression <em>metacharacters</em>. You can do this rather easily:
</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb68-1" title="1"><span class="fu">sed</span> <span class="st">&#39;s/[]$&amp;^*\./[]/\\&amp;/g</span></a>
<a class="sourceLine" id="cb68-2" title="2"><span class="st">     s| *\([^ ]*\) *\([^ ]*\).*|s/\1/\2/g|</span></a>
<a class="sourceLine" id="cb68-3" title="3"><span class="st">&#39;</span> <span class="op">&lt;</span>patterns.txt <span class="kw">|</span></a>
<a class="sourceLine" id="cb68-4" title="4"><span class="fu">sed</span> -f- ./editfile <span class="op">&gt;</span>outfile</a></code></pre></div>
</li>
</ul>
<h5>
<ol start="5" type="1">
<li>Multiple replace operations: replace multiple patterns with the same string
</h2></li>
</ol>
<ul>
<li>
<p>
Replace any of <code>foo</code>, <code>bar</code> or <code>baz</code> with <code>foobar</code>
</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb69-1" title="1"><span class="fu">sed</span> -Ei <span class="st">&#39;s/foo|bar|baz/foobar/g&#39;</span> file</a></code></pre></div>
</li>
<li>
<p>
or
</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb70-1" title="1"><span class="fu">perl</span> -i -pe <span class="st">&#39;s/foo|bar|baz/foobar/g&#39;</span> file</a></code></pre></div>
</li>
</ul>
</section>
<section id="answer-2-score-75" class="level4">
<h4>Answer 2 (score 75)</h4>
<p>A good <a href="http://rpl.sourceforge.net/">r</a>e<a href="http://rpl.sourceforge.net/">pl</a>acement Linux tool is <strong><a href="http://rpl.sourceforge.net/">rpl</a></strong>, that was originally written for the Debian project, so it is available with <code>apt-get install rpl</code> in any Debian derived distro, and may be for others, but otherwise you can download the <code>tar.gz</code> file in <a href="http://rpl.sourceforge.net/">SourgeForge</a>.</p>
<p>Simplest example of use:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb71-1" title="1"> $ <span class="ex">rpl</span> old_string new_string test.txt</a></code></pre></div>
<p>Note that if the string contain spaces it should be enclosed in quotation marks. By default <code>rpl</code> take care of <strong>capital letters</strong> but not of <strong>complete words</strong>, but you can change these defaults with options <code>-i</code> (ignore case) and <code>-w</code> (whole words). You can also specify <strong>multiple files</strong>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb72-1" title="1"> $ <span class="ex">rpl</span> -i -w <span class="st">&quot;old string&quot;</span> <span class="st">&quot;new string&quot;</span> test.txt test2.txt</a></code></pre></div>
<p>Or even specify the <strong>extensions</strong> (<code>-x</code>) to search or even search <strong>recursively</strong> (<code>-R</code>) in the directory:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb73-1" title="1"> $ <span class="ex">rpl</span> -x .html -x .txt -R old_string new_string test*</a></code></pre></div>
<p>You can also search/replace in <strong>interactive mode</strong> with <code>-p</code> (prompt) option:</p>
<p>The output show the numbers of files/string replaced and the type of search (case in/sensitive, whole/partial words), but it can be silent with the <code>-q</code> (<strong>quiet mode</strong>) option, or even more verbose, listing line numbers that contain matches of each file and directory with <code>-v</code> (<strong>verbose mode</strong>) option.</p>
<p>Other options that are worth remembering are <code>-e</code> (honor <strong>e</strong>scapes) that allow <code>regular expressions</code>, so you can search also tabs (<code>\t</code>), new lines (<code>\n</code>),etc. Even you can use <code>-f</code> to <strong>force permissions</strong> (of course, only when the user have write permissions) and <code>-d</code> to preserve the modification times`).</p>
<p>Finally, if you are unsure of which will make exactly, use the <code>-s</code> (<strong>simulate mode</strong>).</p>
</section>
<section id="answer-3-score-25" class="level4">
<h4>Answer 3 (score 25)</h4>
<p><a href="http://www.liamdelahunty.com/tips/linux_search_and_replace_multiple_files.php">How to do a search and replace over multiple files</a> suggests:</p>
<blockquote>
<p>
You could also use find and sed, but I find that this little line of perl works nicely.
</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb74-1" title="1"><span class="fu">perl</span> -pi -w -e <span class="st">&#39;s/search/replace/g;&#39;</span> *.php</a></code></pre></div>
<ul>
<li>
-e means execute the following line of code.
</li>
<li>
-i means edit in-place
</li>
<li>
-w write warnings
</li>
<li>
-p loop over the input file, printing each line after the script is applied to it.
</li>
</ul>
</blockquote>
<p>My best results come from using perl and grep (to ensure that file have the search expression )</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb75-1" title="1"><span class="fu">perl</span> -pi -w -e <span class="st">&#39;s/search/replace/g;&#39;</span> <span class="va">$(</span> <span class="fu">grep</span> -rl <span class="st">&#39;search&#39;</span> <span class="va">)</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-grep-for-multiple-patterns-with-pattern-having-a-pipe-character-score-1442607-in-2018" class="level3">
<h3>10: How do I grep for multiple patterns with pattern having a pipe character? (score <a href="https://stackoverflow.com/q/37313.html">1442607</a> in 2018)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>I want to find all lines in several files that match one of two patterns. I tried to find the patterns I’m looking for by typing</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb76-1" title="1"><span class="fu">grep</span> (foo<span class="kw">|</span><span class="ex">bar</span>) <span class="ex">*.txt</span></a></code></pre></div>
<p>but the shell interprets the <code>|</code> as a pipe and complains when <code>bar</code> isn’t an executable.</p>
<p>How can I grep for multiple patterns in the same set of files?</p>
</section>
<section id="answer-accepted-score-869" class="level4">
<h4>Answer accepted (score 869)</h4>
<p>First, you need to protect the pattern from expansion by the shell. The easiest way to do that is to put single quotes around it. Single quotes prevent expansion of anything between them (including backslashes); the only thing you can’t do then is have single quotes in the pattern.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb77-1" title="1"><span class="fu">grep</span> <span class="st">&#39;foo*&#39;</span> *.txt</a></code></pre></div>
<p>If you do need a single quote, you can write it as <code>'\''</code> (end string literal, literal quote, open string literal).</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb78-1" title="1"><span class="fu">grep</span> <span class="st">&#39;foo*&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;bar&#39;</span> *.txt</a></code></pre></div>
<p>Second, grep supports two syntaxes for patterns. The old, default syntax (<a href="https://en.wikipedia.org/wiki/Regular_expression#POSIX_basic_and_extended">basic regular expressions</a>) doesn’t support the alternation (<code>|</code>) operator, though some versions have it as an extension, but written with a backslash.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb79-1" title="1"><span class="fu">grep</span> <span class="st">&#39;foo\|bar&#39;</span> *.txt</a></code></pre></div>
<p>The portable way is to use the newer syntax, <a href="https://en.wikipedia.org/wiki/Regular_expression#POSIX_extended">extended regular expressions</a>. You need to pass the <code>-E</code> option to <code>grep</code> to select it. On Linux, you can also type <code>egrep</code> instead of <code>grep -E</code> (on other unices, you can make that an alias).</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb80-1" title="1"><span class="fu">grep</span> -E <span class="st">&#39;foo|bar&#39;</span> *.txt</a></code></pre></div>
<p>Another possibility when you’re just looking for any of several patterns (as opposed to building a complex pattern using disjunction) is to pass multiple patterns to <code>grep</code>. You can do this by preceding each pattern with the <code>-e</code> option.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb81-1" title="1"><span class="fu">grep</span> -e foo -e bar *.txt</a></code></pre></div>
</section>
<section id="answer-2-score-90" class="level4">
<h4>Answer 2 (score 90)</h4>
<div class="sourceCode" id="cb82"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb82-1" title="1"><span class="fu">egrep</span> <span class="st">&quot;foo|bar&quot;</span> *.txt</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb83-1" title="1"><span class="fu">grep</span> <span class="st">&quot;foo\|bar&quot;</span> *.txt</a>
<a class="sourceLine" id="cb83-2" title="2"><span class="fu">grep</span> -E <span class="st">&quot;foo|bar&quot;</span> *.txt</a></code></pre></div>
<p>selectively citing the man page of gnu-grep:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb84-1" title="1">   <span class="ex">-E</span>, --extended-regexp</a>
<a class="sourceLine" id="cb84-2" title="2">          <span class="ex">Interpret</span> PATTERN as an extended regular expression (ERE, see below)<span class="bu">.</span>  <span class="kw">(</span><span class="ex">-E</span> is specified by POSIX.<span class="kw">)</span></a>
<a class="sourceLine" id="cb84-3" title="3"></a>
<a class="sourceLine" id="cb84-4" title="4"><span class="ex">Matching</span> Control</a>
<a class="sourceLine" id="cb84-5" title="5">   <span class="ex">-e</span> PATTERN, --regexp=PATTERN</a>
<a class="sourceLine" id="cb84-6" title="6">          <span class="ex">Use</span> PATTERN as the pattern.  This can be used to specify multiple search patterns, or to protect  a  pattern</a>
<a class="sourceLine" id="cb84-7" title="7">          <span class="ex">beginning</span> with a hyphen (-)<span class="bu">.</span>  <span class="kw">(</span><span class="ex">-e</span> is specified by POSIX.<span class="kw">)</span></a></code></pre></div>
<p>(…)</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb85-1" title="1">   <span class="fu">grep</span> understands two different versions of regular expression syntax: “basic” and “extended.”  In  GNU grep,  there</a>
<a class="sourceLine" id="cb85-2" title="2">   <span class="ex">is</span>  no  difference  in  available  functionality  using  either  syntax.   In  other implementations, basic regular</a>
<a class="sourceLine" id="cb85-3" title="3">   <span class="ex">expressions</span> are less powerful.  The following description applies to extended regular expressions<span class="kw">;</span> <span class="ex">differences</span>  for</a>
<a class="sourceLine" id="cb85-4" title="4">   <span class="ex">basic</span> regular expressions are summarized afterwards.</a></code></pre></div>
<p>In the beginning I didn’t read further, so I didn’t recognize the subtle differences:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb86-1" title="1"><span class="ex">Basic</span> vs Extended Regular Expressions</a>
<a class="sourceLine" id="cb86-2" title="2">   <span class="ex">In</span> basic regular expressions the meta-characters ?, +, {, <span class="kw">|</span>, <span class="kw">(</span>, <span class="ex">and</span> <span class="kw">)</span> <span class="ex">lose</span> their special meaning<span class="kw">;</span> <span class="ex">instead</span>  use  the</a>
<a class="sourceLine" id="cb86-3" title="3">   <span class="ex">backslashed</span> versions \?, \+, <span class="dt">\{</span>, <span class="dt">\|</span>, <span class="dt">\(</span>, and <span class="dt">\)</span>.</a></code></pre></div>
<p>I always used egrep and needlessly parens, because I learned from examples. Now I learned something new. :)</p>
</section>
<section id="answer-3-score-22-1" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>Like TC1 said, <code>-F</code> seems to be usable option:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb87-1" title="1">$<span class="op">&gt;</span> <span class="fu">cat</span> text</a>
<a class="sourceLine" id="cb87-2" title="2"><span class="ex">some</span> text</a>
<a class="sourceLine" id="cb87-3" title="3"><span class="ex">foo</span></a>
<a class="sourceLine" id="cb87-4" title="4"><span class="ex">another</span> text</a>
<a class="sourceLine" id="cb87-5" title="5"><span class="ex">bar</span></a>
<a class="sourceLine" id="cb87-6" title="6"><span class="ex">end</span> of file</a>
<a class="sourceLine" id="cb87-7" title="7"></a>
<a class="sourceLine" id="cb87-8" title="8">$<span class="op">&gt;</span> <span class="va">patterns=</span><span class="st">&quot;foo</span></a>
<a class="sourceLine" id="cb87-9" title="9"><span class="st">bar&quot;</span> </a>
<a class="sourceLine" id="cb87-10" title="10"></a>
<a class="sourceLine" id="cb87-11" title="11">$<span class="op">&gt;</span> <span class="fu">grep</span> -F <span class="st">&quot;</span><span class="va">${patterns}</span><span class="st">&quot;</span> text</a>
<a class="sourceLine" id="cb87-12" title="12"><span class="ex">foo</span></a>
<a class="sourceLine" id="cb87-13" title="13"><span class="ex">bar</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="zip-all-files-in-directory-score-1425705-in-2012" class="level3">
<h3>11: Zip all files in directory? (score <a href="https://stackoverflow.com/q/57013.html">1425705</a> in 2012)</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>Is there a way to zip all files in a given directory with the <code>zip</code> command? I’ve heard of using <code>*.*</code>, but I want it to work for extensionless files, too.</p>
</section>
<section id="answer-accepted-score-709" class="level4">
<h4>Answer accepted (score 709)</h4>
<p>You can just use <code>*</code>; there is no need for <code>*.*</code>. File extensions are not special on Unix. <code>*</code> matches zero or more characters—including a dot. So it matches <code>foo.png</code>, because that’s zero or more characters (seven, to be exact).</p>
<p>Note that <code>*</code> by default doesn’t match files beginning with a dot (neither does <code>*.*</code>). This is often what you want. If not, in bash, if you <code>shopt -s dotglob</code> it will (but will still exclude <code>.</code> and <code>..</code>). Other shells have different ways (or none at all) of including dotfiles.</p>
<p>Alternatively, <code>zip</code> also has a <code>-r</code> (recursive) option to do entire directory trees at once (and not have to worry about the dotfile problem):</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb88-1" title="1"><span class="fu">zip</span> -r myfiles.zip mydir</a></code></pre></div>
<p>where <code>mydir</code> is the directory containing your files. Note that the produced zip will contain the directory structure as well as the files. As peterph points out in his comment, this is usually seen as a good thing: extracting the zip will neatly store all the extracted files in one subdirectory.</p>
<p>You can also tell zip to not store the paths with the <code>-j</code>/<code>--junk-paths</code> option.</p>
<p>The <code>zip</code> command comes with documentation telling you about all of its (many) options; type <code>man zip</code> to see that documentation. This isn’t unique to zip; you can get documentation for most commands this way.</p>
</section>
<section id="answer-2-score-11" class="level4">
<h4>Answer 2 (score 11)</h4>
<p>In my case I wanted to zip each file into its own archive, so I did the following (in <code>zsh</code>):</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb89-1" title="1">$ <span class="kw">for</span> <span class="fu">file</span> in *<span class="kw">;</span> <span class="kw">do</span> <span class="fu">zip</span> <span class="va">${file%</span>.*<span class="va">}</span>.zip <span class="va">$file</span><span class="kw">;</span> <span class="kw">done</span></a></code></pre></div>
</section>
<section id="answer-3-score-5" class="level4">
<h4>Answer 3 (score 5)</h4>
<p>
Another way would be to use find and xargs: (this might include a “.” directory in the zip, but it should still extract correctly. With my test, zip stripped the dot before compression) <code>find . -type f -exec zip zipfile.zip {} +</code>
</p>
<p>(The <code>+</code> can be replaced with <code>\;</code> if your version of <code>find</code> does not support the <code>+</code> end for exec. It will be slower though…)</p>
<p>This will by default include all sub-directories. On GNU find <code>-maxdepth</code> can prevent that.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-copy-a-file-from-a-remote-server-to-a-local-machine-score-1107157-in-2017" class="level3">
<h3>12: How to copy a file from a remote server to a local machine? (score <a href="https://stackoverflow.com/q/188285.html">1107157</a> in 2017)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>In my terminal shell, I ssh’ed into a remote server, and I <code>cd</code> to the directory I want.</p>
<p>Now in this directory, there is a file called <code>table</code> that I want to copy to my local machine <code>/home/me/Desktop</code>.</p>
<p>How can I do this?</p>
<p>I tried <code>scp table /home/me/Desktop</code> but it gave an error about no such file or directory.</p>
<p>Does anyone know how to do this?</p>
</section>
<section id="answer-accepted-score-389" class="level4">
<h4>Answer accepted (score 389)</h4>
<p>The syntax for <code>scp</code> is:</p>
<p>If you are on the computer from which you want to send file to a remote computer:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb90-1" title="1"><span class="fu">scp</span> /file/to/send username@remote:/where/to/put</a></code></pre></div>
<p>Here the <code>remote</code> can be a FQDN or an IP address.</p>
<p>On the other hand if you are on the computer wanting to receive file from a remote computer:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb91-1" title="1"><span class="fu">scp</span> username@remote:/file/to/send /where/to/put</a></code></pre></div>
<p><code>scp</code> can also send files between two remote hosts:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb92-1" title="1"><span class="fu">scp</span> username@remote_1:/file/to/send username@remote_2:/where/to/put</a></code></pre></div>
<p>So the basic syntax is:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb93-1" title="1"><span class="fu">scp</span> username@source:/location/to/file username@destination:/where/to/put</a></code></pre></div>
<p>You can read <a href="http://linux.die.net/man/1/scp"><code>man scp</code></a> to get more ideas on this.</p>
</section>
<section id="answer-2-score-14" class="level4">
<h4>Answer 2 (score 14)</h4>
<p>You can use <code>rsync</code> as an alternative. It is mainly for syncing files.. but you can use it for this purpose as well.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb94-1" title="1"><span class="fu">rsync</span> -avzh --stats --progress remoteuser@remoteip  localpath </a></code></pre></div>
<p>to add ssh options:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb95-1" title="1"><span class="fu">rsync</span> -e <span class="st">&quot;ssh -P </span><span class="va">$port_value</span><span class="st">&quot;</span> remoteuser@remoteip  localpath</a></code></pre></div>
<p><code>--progress</code> and <code>--stats</code> are useful for real-time display of transfer.</p>
</section>
<section id="answer-3-score-12" class="level4">
<h4>Answer 3 (score 12)</h4>
<div class="sourceCode" id="cb96"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb96-1" title="1"><span class="fu">scp</span> root@10.240.179.4:/root/Jmeter/reports.jtl Downloads/</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="can-i-zip-an-entire-folder-using-gzip-score-1042586-in-2015" class="level3">
<h3>13: Can I zip an entire folder using gzip? (score <a href="https://stackoverflow.com/q/93139.html">1042586</a> in 2015)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>
I’m trying to zip a folder in unix. Can that be done using the gzip command?
</p>
</section>
<section id="answer-2-score-664" class="level4">
<h4>Answer 2 (score 664)</h4>
<p>No.</p>
<p>Unlike <code>zip</code>, <code>gzip</code> functions as a compression algorithm <em>only</em>.</p>
<p>Because of various reasons some of which hearken back to the era of tape drives, Unix uses a program named <code>tar</code> to archive data, which can then be compressed with a compression program like <code>gzip</code>, <code>bzip2</code>, <code>7zip</code>, etc.</p>
<p>In order to “zip” a directory, the correct command would be</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb97-1" title="1"><span class="fu">tar</span> -zcvf archive.tar.gz directory/ </a></code></pre></div>
<p>This will tell <code>tar</code> to</p>
<ul>
<li>
<p>
compress it using the <strong>z</strong> (gzip) algorithm
</p>
</li>
<li>
<p>
<strong>c</strong> (create) an archive from the files in <em><code>directory</code></em> (<code>tar</code> is recursive by default)
</p>
</li>
<li>
<p>
<strong>v</strong> (verbosely) list (on /dev/stderr so it doesn’t affect piped commands) all the files it adds to the archive.
</p>
</li>
<li>
<p>
and store the output as a <strong>f</strong> (file) named <em><code>archive.tar.gz</code></em>
</p>
</li>
</ul>
<p>The <code>tar</code> command offers <code>gzip</code> support (via the <code>-z</code> flag) purely for your convenience. The <code>gzip</code> command/lib is completely separate. The command above is effectively the same as</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb98-1" title="1"><span class="fu">tar</span> -cv directory <span class="kw">|</span> <span class="fu">gzip</span> <span class="op">&gt;</span> archive.tar.gz</a></code></pre></div>
<p>To decompress and unpack the archive into the current directory you would use</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb99-1" title="1"><span class="fu">tar</span> -zxvf archive.tar.gz</a></code></pre></div>
<p>That command is effectively the same as</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb100-1" title="1"><span class="fu">gunzip</span> <span class="op">&lt;</span> archive.tar.gz <span class="kw">|</span> <span class="fu">tar</span> -xv</a></code></pre></div>
<p><code>tar</code> has many, many, MANY other options and uses as well; I heartily recommend reading through its manpage sometime.</p>
</section>
<section id="answer-3-score-47" class="level4">
<h4>Answer 3 (score 47)</h4>
<p>The <code>gzip</code> command will not recursively compress a directory into a single zip file, when using the <code>-r</code> switch. Rather it will walk that directory structure and zip each file that it finds into a separate file.</p>
<h5>
Example
</h3>
<p><em>before</em></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb101-1" title="1">$ <span class="ex">tree</span> dir1/</a>
<a class="sourceLine" id="cb101-2" title="2"><span class="ex">dir1/</span></a>
<a class="sourceLine" id="cb101-3" title="3"><span class="kw">|</span><span class="ex">--</span> dir11</a>
<a class="sourceLine" id="cb101-4" title="4"><span class="kw">|</span>   <span class="kw">|</span><span class="ex">--</span> file11</a>
<a class="sourceLine" id="cb101-5" title="5"><span class="kw">|</span>   <span class="kw">|</span><span class="ex">--</span> file12</a>
<a class="sourceLine" id="cb101-6" title="6"><span class="kw">|</span>   <span class="kw">`</span><span class="ex">--</span> file13</a>
<a class="sourceLine" id="cb101-7" title="7"><span class="kw">|</span><span class="ex">--</span> file1</a>
<a class="sourceLine" id="cb101-8" title="8"><span class="kw">|</span><span class="ex">--</span> file2</a>
<a class="sourceLine" id="cb101-9" title="9"><span class="kw">`</span><span class="ex">--</span> file3</a></code></pre></div>
<p><em>now run the <code>gzip</code> command</em></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb102-1" title="1">$ <span class="fu">gzip</span> -r dir1</a></code></pre></div>
<p><em>after</em></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb103-1" title="1">$ <span class="ex">tree</span> dir1/</a>
<a class="sourceLine" id="cb103-2" title="2"><span class="ex">dir1/</span></a>
<a class="sourceLine" id="cb103-3" title="3"><span class="kw">|</span><span class="ex">--</span> dir11</a>
<a class="sourceLine" id="cb103-4" title="4"><span class="kw">|</span>   <span class="kw">|</span><span class="ex">--</span> file11.gz</a>
<a class="sourceLine" id="cb103-5" title="5"><span class="kw">|</span>   <span class="kw">|</span><span class="ex">--</span> file12.gz</a>
<a class="sourceLine" id="cb103-6" title="6"><span class="kw">|</span>   <span class="kw">`</span><span class="ex">--</span> file13.gz</a>
<a class="sourceLine" id="cb103-7" title="7"><span class="kw">|</span><span class="ex">--</span> file1.gz</a>
<a class="sourceLine" id="cb103-8" title="8"><span class="kw">|</span><span class="ex">--</span> file2.gz</a>
<a class="sourceLine" id="cb103-9" title="9"><span class="kw">`</span><span class="ex">--</span> file3.gz</a></code></pre></div>
<p>If you’d prefer to zip up the directory structure then you’ll likely want to use the <code>tar</code> command, and then compress the resulting <code>.tar</code> file.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb104-1" title="1">$ <span class="fu">tar</span> zcvf dir1.tar.gz dir1/</a></code></pre></div>
<h5>
Example
</h3>
<div class="sourceCode" id="cb105"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb105-1" title="1">$ <span class="fu">tar</span> zcvf dir1.tar.gz dir1/</a>
<a class="sourceLine" id="cb105-2" title="2"><span class="ex">dir1/</span></a>
<a class="sourceLine" id="cb105-3" title="3"><span class="ex">dir1/file1</span></a>
<a class="sourceLine" id="cb105-4" title="4"><span class="ex">dir1/file2</span></a>
<a class="sourceLine" id="cb105-5" title="5"><span class="ex">dir1/dir11/</span></a>
<a class="sourceLine" id="cb105-6" title="6"><span class="ex">dir1/dir11/file11.gz</span></a>
<a class="sourceLine" id="cb105-7" title="7"><span class="ex">dir1/dir11/file12.gz</span></a>
<a class="sourceLine" id="cb105-8" title="8"><span class="ex">dir1/dir11/file13.gz</span></a>
<a class="sourceLine" id="cb105-9" title="9"><span class="ex">dir1/file3</span></a></code></pre></div>
<p>Which results in the following single file:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb106-1" title="1">$ <span class="fu">ls</span> -l <span class="kw">|</span> <span class="fu">grep</span> tar</a>
<a class="sourceLine" id="cb106-2" title="2"><span class="ex">-rw-rw-r--</span> 1 saml saml  271 Oct  1 08:07 dir1.tar.gz</a></code></pre></div>
<p>You can confirm its contents:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb107-1" title="1">$ <span class="fu">tar</span> ztvf dir1.tar.gz </a>
<a class="sourceLine" id="cb107-2" title="2"><span class="ex">drwxrwxr-x</span> saml/saml         0 2013-10-01 08:05 dir1/</a>
<a class="sourceLine" id="cb107-3" title="3"><span class="ex">-rw-rw-r--</span> saml/saml         0 2013-10-01 07:45 dir1/file1</a>
<a class="sourceLine" id="cb107-4" title="4"><span class="ex">-rw-rw-r--</span> saml/saml         0 2013-10-01 07:45 dir1/file2</a>
<a class="sourceLine" id="cb107-5" title="5"><span class="ex">drwxrwxr-x</span> saml/saml         0 2013-10-01 08:04 dir1/dir11/</a>
<a class="sourceLine" id="cb107-6" title="6"><span class="ex">-rw-rw-r--</span> saml/saml        27 2013-10-01 07:45 dir1/dir11/file11.gz</a>
<a class="sourceLine" id="cb107-7" title="7"><span class="ex">-rw-rw-r--</span> saml/saml        27 2013-10-01 07:45 dir1/dir11/file12.gz</a>
<a class="sourceLine" id="cb107-8" title="8"><span class="ex">-rw-rw-r--</span> saml/saml        27 2013-10-01 07:45 dir1/dir11/file13.gz</a>
<a class="sourceLine" id="cb107-9" title="9"><span class="ex">-rw-rw-r--</span> saml/saml         0 2013-10-01 07:45 dir1/file3</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-make-ls-show-file-sizes-in-megabytes-score-1020921-in-2013" class="level3">
<h3>14: How do I make <code>ls</code> show file sizes in megabytes? (score <a href="https://stackoverflow.com/q/64148.html">1020921</a> in 2013)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>What commands do I need for Linux’s <code>ls</code> to show the file size in MB?</p>
</section>
<section id="answer-accepted-score-518" class="level4">
<h4>Answer accepted (score 518)</h4>
<p><code>ls -l --block-size=M</code> will give you a long format listing (needed to actually see the file size) and <em>round file sizes up</em> to the nearest MiB.</p>
<p>If you want MB (10^6 bytes) rather than MiB (2^20 bytes) units, use <code>--block-size=MB</code> instead.</p>
<p>If you don’t want the <code>M</code> suffix attached to the file size, you can use something like <code>--block-size=1M</code>. Thanks <a href="https://unix.stackexchange.com/users/22565/st%c3%a9phane-chazelas">Stéphane Chazelas</a> for suggesting this.</p>
<p>If you simply want file sizes in “reasonable” units, rather than <em>specifically megabytes</em>, then you can use <code>-lh</code> to get a long format listing and <strong>human readable</strong> file size presentation. This will use units of file size to keep file sizes presented with about 1-3 digits (so you’ll see file sizes like <code>6.1K</code>, <code>151K</code>, <code>7.1M</code>, <code>15M</code>, <code>1.5G</code> and so on.</p>
<p>The <code>--block-size</code> parameter is described in the man page for ls; <code>man ls</code> and search for <code>SIZE</code>. It allows for units other than MB/MiB as well, and from the looks of it (I didn’t try that) arbitrary block sizes as well (so you could see the file size as a number of 429-byte blocks if you want to).</p>
<p>Note that both <code>--block-size</code> and <code>-h</code> are GNU extensions on top of <a href="http://pubs.opengroup.org/onlinepubs/009695399/utilities/ls.html" rel="noreferrer">the Open Group’s <code>ls</code></a>, so this may not work if you don’t have a GNU userland (which most Linux installations do). The <code>ls</code> from GNU Coreutils 8.5 does support –block-size and -h as described above. Thanks to <a href="https://unix.stackexchange.com/users/5377/kojiro">kojiro</a> for pointing this out.</p>
</section>
<section id="answer-2-score-391" class="level4">
<h4>Answer 2 (score 391)</h4>
<p><code>ls -lh</code> gives human readable file sizes, long format.</p>
<p>It uses k, M, G, and T suffixes (or no suffix for bytes) as needed so the number stays small, e.g. <code>1.4K</code> or <code>178M</code>.</p>
<p><code>-h</code> is a GNU coreutils extension, not baseline POSIX.</p>
<p>Note that this doesn’t answer the question exactly as asked. If you want sizes strictly in MiB even for small or gigantic files, <a href="https://unix.stackexchange.com/questions/64148/how-do-i-make-ls-show-file-sizes-in-megabytes/64150#64150">Michael Kjörling’s answer does that for GNU coreutils <code>ls</code></a>.</p>
</section>
<section id="answer-3-score-46-1" class="level4">
<h4>Answer 3 (score 46)</h4>
<p><code>ls -lhS</code> sort by size, in human readable format</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-install-desktop-environments-on-centos-7-score-963793-in-2016" class="level3">
<h3>15: How to install Desktop Environments on CentOS 7? (score <a href="https://stackoverflow.com/q/181503.html">963793</a> in 2016)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p>I have recently installed CentOS 7 (Minimal Install without GUI) and now I want to install a GUI environment in it.</p>
<p>How can I install Desktop Environments on previously installed CentOS7 without reinstalling it?</p>
</section>
<section id="answer-accepted-score-319" class="level4">
<h4>Answer accepted (score 319)</h4>
<h5>
<ol type="1">
<li>Installing GNOME-Desktop:
</h3></li>
</ol>
<ol>
<li>
<p>
Install GNOME Desktop Environment on here.
</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb108-1" title="1"><span class="co"># yum -y groups install &quot;GNOME Desktop&quot; </span></a></code></pre></div>
</li>
<li>
<p>
Input a command like below after finishing installation:
</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb109-1" title="1"><span class="co"># startx </span></a></code></pre></div>
</li>
<li>
<p>
GNOME Desktop Environment will start. For first booting, initial setup runs and you have to configure it for first time.
</p>
<ul>
<li>
Select System language first.
</li>
<li>
Select your keyboard type.
</li>
<li>
Add online accounts if you’d like to.
</li>
<li>
Finally click “Start using CentOS Linux”.
</li>
</ul>
</li>
<li>
<p>
GNOME Desktop Environments starts like follows.
</p>
</li>
</ol>
<p><img src="https://i.stack.imgur.com/HVDB0.png" alt="GNOME Desktop Environment: start screen"></p>
<h5>
How to use GNOME Shell?
</h3>
<p>The default GNOME Desktop of CentOS 7 starts with <em>classic mode</em> but if you’d like to use GNOME Shell, set like follows:</p>
<p><strong>Option A:</strong> If you start GNOME with <code>startx</code>, set like follows.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb110-1" title="1"><span class="co"># echo &quot;exec gnome-session&quot; &gt;&gt; ~/.xinitrc</span></a>
<a class="sourceLine" id="cb110-2" title="2"><span class="co"># startx </span></a></code></pre></div>
<p><strong>Option B:</strong> set the system graphical login <a href="http://www.server-world.info/en/note?os=CentOS_7&amp;p=runlevel" rel="noreferrer"><code>systemctl set-default graphical.target</code></a> and reboot the system. After system starts</p>
<ol>
<li>
Click the button which is located next to the “Sign In” button.
</li>
<li>
Select “GNOME” on the list. (The default is GNOME Classic)
</li>
<li>
Click “Sign In” and log in with GNOME Shell.
</li>
</ol>
<p><img src="https://i.stack.imgur.com/X7bhJ.png" alt="Sign-in screen with GNOME selected"></p>
<ol start="4">
<li>
GNOME shell starts like follows:
</li>
</ol>
<p><img src="https://i.stack.imgur.com/3mRsl.png" alt="GNOME Desktop Environment - sample screen"></p>
<h5>
<ol start="2" type="1">
<li>Installing KDE-Desktop:
</h3></li>
</ol>
<ol>
<li>
<p>
Install KDE Desktop Environment on here.
</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb111-1" title="1"><span class="co"># yum -y groups install &quot;KDE Plasma Workspaces&quot; </span></a></code></pre></div>
</li>
<li>
<p>
Input a command like below after finishing installation:
</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb112-1" title="1"><span class="co"># echo &quot;exec startkde&quot; &gt;&gt; ~/.xinitrc</span></a>
<a class="sourceLine" id="cb112-2" title="2"><span class="co"># startx</span></a></code></pre></div>
</li>
<li>
KDE Desktop Environment starts like follows:
</li>
</ol>
<p><img src="https://i.stack.imgur.com/iTACp.png" alt="KDE Desktop Environment: sample start-screen"></p>
<h5>
<ol start="3" type="1">
<li>Installing Cinnamon Desktop Environment:
</h3></li>
</ol>
<ol>
<li>
<p>
Install Cinnamon Desktop Environment on here.
</p>
<p>
First Add the EPEL Repository (EPEL Repository which is provided from Fedora project.)<br> <a href="https://fedoraproject.org/wiki/EPEL#Extra_Packages_for_Enterprise_Linux_.28EPEL.29" rel="noreferrer">Extra Packages for Enterprise Linux (EPEL)</a>
</p>
<ul>
<li>
<p>
How to add EPEL Repository?
</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb113-1" title="1"><span class="co"># yum -y install epel-release</span></a>
<a class="sourceLine" id="cb113-2" title="2"></a>
<a class="sourceLine" id="cb113-3" title="3"><span class="co"># sed -i -e &quot;s/\]$/\]\npriority=5/g&quot; /etc/yum.repos.d/epel.repo # set [priority=5]</span></a>
<a class="sourceLine" id="cb113-4" title="4"><span class="co"># sed -i -e &quot;s/enabled=1/enabled=0/g&quot; /etc/yum.repos.d/epel.repo # for another way, change to [enabled=0] and use it only when needed</span></a>
<a class="sourceLine" id="cb113-5" title="5"><span class="co"># yum --enablerepo=epel install [Package] # if [enabled=0], input a command to use the repository</span></a></code></pre></div>
</li>
<li>
<p>
And now install the Cinnamon Desktop Environment from EPEL Repository:
</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb114-1" title="1"><span class="co"># yum --enablerepo=epel -y install cinnamon*</span></a></code></pre></div>
</li>
</ul>
</li>
<li>
<p>
Input a command like below after finishing installation:
</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb115-1" title="1"><span class="co"># echo &quot;exec /usr/bin/cinnamon-session&quot; &gt;&gt; ~/.xinitrc</span></a>
<a class="sourceLine" id="cb115-2" title="2"><span class="co"># startx </span></a></code></pre></div>
</li>
<li>
<p>
Cinnamon Desktop Environment will start. For first booting, initial setup runs and you have to configure it for first time.
</p>
<ul>
<li>
Select System language first.
</li>
<li>
Select your keyboard type.
</li>
<li>
Add online accounts if you’d like to.
</li>
<li>
Finally click “Start using CentOS Linux”.
</li>
</ul>
</li>
<li>
<p>
Cinnamon Desktop Environment starts like follows.
</p>
</li>
</ol>
<p><img src="https://i.stack.imgur.com/b94jQ.png" alt="Cinnamon Desktop Environment: sample starting screen"></p>
<h5>
<ol start="4" type="1">
<li>Installing MATE Desktop Environment:
</h3></li>
</ol>
<ol>
<li>
<p>
Install MATE Desktop Environment on here (You will need to add the EPEL Repository as explained above in advance).
</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb116-1" title="1"><span class="co"># yum --enablerepo=epel -y groups install &quot;MATE Desktop&quot;</span></a></code></pre></div>
</li>
<li>
<p>
Input a command like below after finishing installation:
</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb117-1" title="1"><span class="co"># echo &quot;exec /usr/bin/mate-session&quot; &gt;&gt; ~/.xinitrc </span></a>
<a class="sourceLine" id="cb117-2" title="2"><span class="co"># startx</span></a></code></pre></div>
</li>
<li>
MATE Desktop Environment starts.
</li>
</ol>
<p><img src="https://i.stack.imgur.com/PEYSR.png" alt="MATE Desktop Environment: sample starting screen"></p>
<h5>
<ol start="5" type="1">
<li>Installing Xfce Desktop Environment:
</h3></li>
</ol>
<ol>
<li>
<p>
Install Xfce Desktop Environment on here (You will need to add the EPEL Repository as like above in “Cinnamon” installation before).
</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb118-1" title="1"><span class="co"># yum -y groupinstall X11</span></a>
<a class="sourceLine" id="cb118-2" title="2"><span class="co"># yum --enablerepo=epel -y groups install &quot;Xfce&quot; </span></a></code></pre></div>
</li>
<li>
<p>
Input a command like below after finishing installation:
</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb119-1" title="1"><span class="co"># echo &quot;exec /usr/bin/xfce4-session&quot; &gt;&gt; ~/.xinitrc </span></a>
<a class="sourceLine" id="cb119-2" title="2"><span class="co"># startx</span></a></code></pre></div>
</li>
<li>
Xfce Desktop Environment starts.
</li>
</ol>
<p><img src="https://i.stack.imgur.com/hPjxx.png" alt="Xfce Desktop Environment: sample starting screen"></p>
</section>
<section id="answer-2-score-46" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>Rather than make use of the hacking of a <code>startx</code> command into a <code>.xinitrc</code> file, it’s probably better to tell Systemd that you want to boot into a graphical GUI vs. the terminal.</p>
<p>To accomplish this simply do the following:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb120-1" title="1">$ <span class="fu">sudo</span> yum groupinstall <span class="st">&quot;GNOME Desktop&quot;</span></a>
<a class="sourceLine" id="cb120-2" title="2">$ <span class="fu">ln</span> -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target</a></code></pre></div>
<p>Then simply reboot.</p>
<p>The last bit will associate the runlevel 5 target as your default with respect to Systemd.</p>
<h5>
Doing it with Systemd
</h3>
<p>You can also use Systemd to accomplish this. This is arguably the better method since you’re managing the state of the system directly through Systemd and its CLIs.</p>
<p>You can see what your current default target is:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb121-1" title="1">$ <span class="fu">sudo</span> systemctl get-default</a>
<a class="sourceLine" id="cb121-2" title="2"><span class="ex">multi-user.target</span></a></code></pre></div>
<p>And then change it to graphical:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb122-1" title="1">$ <span class="fu">sudo</span> systemctl set-default graphical.target</a></code></pre></div>
<h5>
Targets
</h3>
<p>In Systemd the targets runlevel5.target and graphical.target are identical. So too are runlevel2.target and multi-user.target.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb123-1" title="1"><span class="ex">Runlevel</span>    Target Units                          Description</a>
<a class="sourceLine" id="cb123-2" title="2"><span class="ex">0</span>           runlevel0.target, poweroff.target     Shut down and power off the system.</a>
<a class="sourceLine" id="cb123-3" title="3"><span class="ex">1</span>           runlevel1.target, rescue.target       Set up a rescue shell.</a>
<a class="sourceLine" id="cb123-4" title="4"><span class="ex">2</span>           runlevel2.target, multi-user.target   Set up a non-graphical multi-user system.</a>
<a class="sourceLine" id="cb123-5" title="5"><span class="ex">3</span>           runlevel3.target, multi-user.target   Set up a non-graphical multi-user system.</a>
<a class="sourceLine" id="cb123-6" title="6"><span class="ex">4</span>           runlevel4.target, multi-user.target   Set up a non-graphical multi-user system.</a>
<a class="sourceLine" id="cb123-7" title="7"><span class="ex">5</span>           runlevel5.target, graphical.target    Set up a graphical multi-user system.</a>
<a class="sourceLine" id="cb123-8" title="8"><span class="ex">6</span>           runlevel6.target, reboot.target       Shut down and reboot the system.</a></code></pre></div>
<h5>
References
</h3>
<ul>
<li>
<a href="http://www.itzgeek.com/how-tos/linux/centos-how-tos/install-gnome-gui-on-centos-7-rhel-7.html" rel="noreferrer">Install Gnome GUI on CentOS 7 / RHEL 7</a>
</li>
<li>
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sect-Managing_Services_with_systemd-Targets.html#sect-Managing_Services_with_systemd-Targets-Change_Default" rel="noreferrer">8.3. WORKING WITH SYSTEMD TARGETS</a>
</li>
</ul>
</section>
<section id="answer-3-score-0" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>On <strong>CentOS 6</strong></p>
<p>This did work for me:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb124-1" title="1"><span class="ex">yum</span> -y groupinstall <span class="st">&quot;X Window System&quot;</span> <span class="st">&quot;Desktop&quot;</span> <span class="st">&quot;Fonts&quot;</span> <span class="st">&quot;General Purpose Desktop&quot;</span></a>
<a class="sourceLine" id="cb124-2" title="2"><span class="ex">yum</span> -y groupinstall <span class="st">&quot;KDE Desktop&quot;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-pass-a-command-line-argument-into-a-shell-script-score-913715-in" class="level3">
<h3>16: How can I pass a command line argument into a shell script? (score <a href="https://stackoverflow.com/q/31414.html">913715</a> in )</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>I know that shell scripts just run commands as if they were executed in at the command prompt. I’d like to be able to run shell scripts as if they were functions… That is, taking an input value or string into the script. How do I approach doing this?</p>
</section>
<section id="answer-accepted-score-201" class="level4">
<h4>Answer accepted (score 201)</h4>
<p>The shell command and any arguments to that command appear as <em>numbered</em> shell variables: <code>$0</code> has the string value of the command itself, something like <code>script</code>, <code>./script</code>, <code>/home/user/bin/script</code> or whatever. Any arguments appear as <code>&quot;$1&quot;</code>, <code>&quot;$2&quot;</code>, <code>&quot;$3&quot;</code> and so on. The count of arguments is in the shell variable <code>&quot;$#&quot;</code>.</p>
<p>Common ways of dealing with this involve shell commands <code>getopts</code> and <code>shift</code>. <code>getopts</code> is a lot like the C <code>getopt()</code> library function. <code>shift</code> moves the value of <code>$2</code> to <code>$1</code>, <code>$3</code> to <code>$2</code>, and so on; <code>$#</code> gets decremented. Code ends up looking at the value of <code>&quot;$1&quot;</code>, doing things using a <code>case</code>…<code>esac</code> to decide on an action, and then doing a <code>shift</code> to move <code>$1</code> to the next argument. It only ever has to examine <code>$1</code>, and maybe <code>$#</code>.</p>
</section>
<section id="answer-2-score-172" class="level4">
<h4>Answer 2 (score 172)</h4>
<p>You can access passed arguments with <code>$n</code> where <code>n</code> is the argument number - <code>1, 2, 3, ...</code>. You pass the arguments just like you would with any other command.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb125-1" title="1">$ <span class="fu">cat</span> myscript</a>
<a class="sourceLine" id="cb125-2" title="2"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb125-3" title="3"><span class="bu">echo</span> <span class="st">&quot;First arg: </span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb125-4" title="4"><span class="bu">echo</span> <span class="st">&quot;Second arg: </span><span class="va">$2</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb125-5" title="5">$ <span class="ex">./myscript</span> hello world</a>
<a class="sourceLine" id="cb125-6" title="6"><span class="ex">First</span> arg: hello</a>
<a class="sourceLine" id="cb125-7" title="7"><span class="ex">Second</span> arg: world</a></code></pre></div>
</section>
<section id="answer-3-score-27" class="level4">
<h4>Answer 3 (score 27)</h4>
<div class="sourceCode" id="cb126"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb126-1" title="1">$<span class="ex">/shellscriptname.sh</span> argument1 argument2 argument3 </a></code></pre></div>
<p>You can also pass output of one shell script as an argument to another shell script.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb127-1" title="1">$<span class="ex">/shellscriptname.sh</span> <span class="st">&quot;</span><span class="va">$(</span><span class="ex">secondshellscriptname.sh</span><span class="va">)</span><span class="st">&quot;</span></a></code></pre></div>
<p>Within shell script you can access arguments with numbers like <code>$1</code> for first argument and <code>$2</code> for second argument and so on so forth.</p>
<p><a href="http://osr507doc.sco.com/en/OSUserG/_Passing_to_shell_script.html">More on shell arguments</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-permanently-set-environmental-variables-score-881957-in-2014" class="level3">
<h3>17: How to permanently set environmental variables (score <a href="https://stackoverflow.com/q/117467.html">881957</a> in 2014)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>My variables are</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb128-1" title="1"><span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib</a>
<a class="sourceLine" id="cb128-2" title="2"><span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a></code></pre></div>
<p>How to save these variables permanently ?</p>
</section>
<section id="answer-accepted-score-252" class="level4">
<h4>Answer accepted (score 252)</h4>
<p>You can add it to the file <code>.profile</code> or your login shell profile file (located in your home directory).</p>
<p>To change the environmental variable “permanently” you’ll need to consider at least these situations:</p>
<ol>
<li>
Login/Non-login shell
</li>
<li>
Interactive/Non-interactive shell
</li>
</ol>
<h5>
bash
</h3>
<ol>
<li>
Bash as login shell will load <code>/etc/profile</code>, <code>~/.bash_profile</code>, <code>~/.bash_login</code>, <code>~/.profile</code> in the order
</li>
<li>
Bash as non-login interactive shell will load <code>~/.bashrc</code>
</li>
<li>
Bash as non-login non-interactive shell will load the configuration specified in environment variable <code>$BASH_ENV</code>
</li>
</ol>
<div class="sourceCode" id="cb129"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb129-1" title="1"><span class="va">$EDITOR</span> <span class="ex">~/.profile</span></a>
<a class="sourceLine" id="cb129-2" title="2"><span class="co">#add lines at the bottom of the file:  </span></a>
<a class="sourceLine" id="cb129-3" title="3">     <span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib</a>
<a class="sourceLine" id="cb129-4" title="4">     <span class="bu">export</span> <span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a></code></pre></div>
<h5>
zsh
</h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb130-1" title="1"><span class="va">$EDITOR</span> <span class="ex">~/.zprofile</span></a>
<a class="sourceLine" id="cb130-2" title="2"><span class="co">#add lines at the bottom of the file:  </span></a>
<a class="sourceLine" id="cb130-3" title="3">     <span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib</a>
<a class="sourceLine" id="cb130-4" title="4">     <span class="bu">export</span> <span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a></code></pre></div>
<h5>
ksh
</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb131-1" title="1"><span class="va">$EDITOR</span> <span class="ex">~/.profile</span></a>
<a class="sourceLine" id="cb131-2" title="2"><span class="co">#add lines at the bottom of the file:  </span></a>
<a class="sourceLine" id="cb131-3" title="3">     <span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib</a>
<a class="sourceLine" id="cb131-4" title="4">     <span class="bu">export</span> <span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a></code></pre></div>
<h5>
bourne
</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb132-1" title="1"><span class="va">$EDITOR</span> <span class="ex">~/.profile</span></a>
<a class="sourceLine" id="cb132-2" title="2"><span class="co">#add lines at the bottom of the file:  </span></a>
<a class="sourceLine" id="cb132-3" title="3">     <span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib     </a>
<a class="sourceLine" id="cb132-4" title="4">     <span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a>
<a class="sourceLine" id="cb132-5" title="5">     <span class="bu">export</span> <span class="va">LD_LIBRARY_PATH</span> <span class="va">ORACLE_HOME</span></a></code></pre></div>
<h5>
csh or tcsh
</h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb133-1" title="1"><span class="va">$EDITOR</span> <span class="ex">~/.login</span></a>
<a class="sourceLine" id="cb133-2" title="2"><span class="co">#add lines at the bottom of the file:  </span></a>
<a class="sourceLine" id="cb133-3" title="3">     <span class="ex">setenv</span> LD_LIBRARY_PATH /usr/lib/oracle/11.2/client64/lib</a>
<a class="sourceLine" id="cb133-4" title="4">     <span class="ex">setenv</span> ORACLE_HOME /usr/lib/oracle/11.2/client64</a></code></pre></div>
<p>If you want to make it permanent for all users, you can edit the corresponding files under <code>/etc/</code>, i.e. <code>/etc/profile</code> for Bourne-like shells, <code>/etc/csh.login</code> for (t)csh, and <code>/etc/zsh/zprofile</code> and <code>/etc/zsh/zshrc</code> for zsh.</p>
<p>Another option is to use <code>/etc/environment</code>, which on Linux systems is read by the PAM module <code>pam_env</code> and supports only simple assignments, not shell-style expansions. (See <a href="https://wiki.debian.org/EnvironmentVariables" rel="noreferrer">Debian’s guide</a> on this.)</p>
<p>These files are likely to already contain some assignments, so follow the syntax you see already present in your file.</p>
<p>Make sure to restart the shell and relogin the user, to apply the changes.</p>
<p>
If you need to add system wide environment variable, there’s now <code>/etc/profile.d</code> folder that contains sh script to initialize variable.<br> You could place your sh script with all you exported variables here.<br> Be carefull though this should not be use as a standard way of adding variable to env on Debian.
</p>
</section>
<section id="answer-2-score-71" class="level4">
<h4>Answer 2 (score 71)</h4>
<p>To do if for all users/shells, depending on distro you could use <code>/etc/environment</code> or <code>/etc/profile</code>. Creating a new file in <code>/etc/profile.d</code> may be preferable if it exists, as it will be less likely to conflict with updates made by the packaging system.</p>
<p>In <code>/etc/environment</code>, variables are usually set with <code>name=value</code>, eg:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb134-1" title="1"><span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a></code></pre></div>
<p>In <code>/etc/profile</code>, you must use <code>export</code> since this is a script, eg:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb135-1" title="1"><span class="bu">export</span> <span class="va">ORACLE_HOME=</span>/usr/lib/oracle/11.2/client64</a></code></pre></div>
<p>Same goes for a file under <code>/etc/profile.d</code>, there also may be naming restrictions which must be met for the file to work. On Debian, the file must have the extension <code>.sh</code> (although does not need a bang line or executable permissions since it is sourced). check your distro documentation or look at the <code>/etc/profile</code> script to see how these files are loaded.</p>
<p>Note also though that setting <code>LD_LIBRARY_PATH</code> permanently is potentially <a href="http://www.cc.dtu.dk/?page_id=304">problematic</a>, including being a security risk. As an alternative, I would suggest finding some way to prepend the <code>LD_LIBRARY_PATH</code> to the start of the command line for each program that needs it before running. Eg:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb136-1" title="1"><span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib <span class="ex">myprog</span></a></code></pre></div>
<p>One way to do this is to use a wrapper script to run the program. You could give this the same name as your program and put it in <code>/usr/local/bin</code> or anywhere that appears <em>before</em> the location of your program in <code>PATH</code>. Here is an example script (don’t forget to <code>chmod +x</code> the script):</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb137-1" title="1"><span class="co">#!/bin/sh</span></a>
<a class="sourceLine" id="cb137-2" title="2"><span class="va">LD_LIBRARY_PATH=</span>/usr/lib/oracle/11.2/client64/lib <span class="ex">/real/location/of/myprog</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></a></code></pre></div>
</section>
<section id="answer-3-score-2" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>when you install oracle, oracle asked that you run some scripts before clicking ok. That script put a dummy setting in the <code>.bash_profile</code> in oracle user home directory. To see the file, <code>ls -al</code> will show all hidden files.</p>
<p>
type <code>nano bash_profile</code> to open the file. Make changes to the file to reflect your hostname, and appropriate sid name. check any other settings that need modification. press control x to save and type y when asked if you want to save. Press the return key to save. Restart the computer. Logging as oracle user. start the database by typing
</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb138-1" title="1"><span class="ex">sqlplus</span> / as sysdba</a>
<a class="sourceLine" id="cb138-2" title="2"></a>
<a class="sourceLine" id="cb138-3" title="3"><span class="ex">startup</span>  </a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-find-out-what-hard-disks-are-in-the-system-score-878044-in-2013" class="level3">
<h3>18: How do I find out what hard disks are in the system? (score <a href="https://stackoverflow.com/q/4561.html">878044</a> in 2013)</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>I need to know what hard disks are available, including ones that aren’t mounted and possibly aren’t formatted. I can’t find them in <code>dmesg</code> or <code>/var/log/messages</code> (too much to scroll through). I’m hoping there’s a way to use <code>/dev</code> or <code>/proc</code> to find out this information, but I don’t know how. I am using Linux.</p>
</section>
<section id="answer-accepted-score-183" class="level4">
<h4>Answer accepted (score 183)</h4>
<p>This is highly platform-dependent. Also different methods may treat edge cases differently (“fake” disks of various kinds, RAID volumes, …).</p>
<p>On modern udev installations, there are symbolic links to storage media in subdirectories of <code>/dev/disk</code>, that let you look up a disk or a partition by serial number (<code>/dev/disk/by-id/</code>), by UUID (<code>/dev/disk/by-uuid</code>), by filesystem label (<code>/dev/disk/by-label/</code>) or by hardware connectivity (<code>/dev/disk/by-path/</code>).</p>
<p>Under Linux 2.6, each disk and disk-like device has an entry in <code>/sys/block</code>. Under Linux since the dawn of time, disks and partitions are listed in <code>/proc/partitions</code>. Alternatively, you can use <a href="http://ezix.org/project/wiki/HardwareLiSter">lshw</a>: <code>lshw -class disk</code>.</p>
<p>Linux also provides the <a href="http://linux.die.net/man/8/lsblk"><code>lsblk</code></a> utility which displays a nice tree view of the storage volumes (since util-linux 2.19, not present on embedded devices with BusyBox).</p>
<p>If you have an <code>fdisk</code> or <code>disklabel</code> utility, it might be able to tell you what devices it’s able to work on.</p>
<p>You will find utility names for many unix variants on the <a href="http://bhami.com/rosetta.html">Rosetta Stone for Unix</a>, in particular the “list hardware configuration” and “read a disk label” lines.</p>
</section>
<section id="answer-2-score-146" class="level4">
<h4>Answer 2 (score 146)</h4>
<p><code>lsblk</code> will list all block devices. It lends itself well to scripting:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb139-1" title="1">$ <span class="ex">lsblk</span> -io KNAME,TYPE,SIZE,MODEL</a>
<a class="sourceLine" id="cb139-2" title="2"><span class="ex">KNAME</span> TYPE   SIZE MODEL</a>
<a class="sourceLine" id="cb139-3" title="3"><span class="ex">sda</span>   disk 149.1G TOSHIBA MK1637GS</a>
<a class="sourceLine" id="cb139-4" title="4"><span class="ex">sda1</span>  part  23.3G </a>
<a class="sourceLine" id="cb139-5" title="5"><span class="ex">sda2</span>  part    28G </a>
<a class="sourceLine" id="cb139-6" title="6"><span class="ex">sda3</span>  part  93.6G </a>
<a class="sourceLine" id="cb139-7" title="7"><span class="ex">sda4</span>  part   4.3G </a>
<a class="sourceLine" id="cb139-8" title="8"><span class="ex">sr0</span>   rom   1024M CD/DVDW TS-L632M</a></code></pre></div>
<p><code>lsblk</code> is present in util-linux package and is thus far more universal than proposed alternatives.</p>
</section>
<section id="answer-3-score-69" class="level4">
<h4>Answer 3 (score 69)</h4>
<p>How about</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb140-1" title="1"><span class="ex">lshw</span> -class disk</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-remove-a-directory-and-all-its-contents-score-868946-in-2015" class="level3">
<h3>19: How do I remove a directory and all its contents? (score <a href="https://stackoverflow.com/q/45676.html">868946</a> in 2015)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>In bash all I know is that</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb141-1" title="1"><span class="fu">rmdir</span> directoryname</a></code></pre></div>
<p>will remove the directory but only if it’s empty. Is there a way to force remove subdirectories?</p>
</section>
<section id="answer-accepted-score-218" class="level4">
<h4>Answer accepted (score 218)</h4>
<p>The following command will do it for you. Use caution though.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb142-1" title="1"><span class="fu">rm</span> -rf directoryname</a></code></pre></div>
</section>
<section id="answer-2-score-7" class="level4">
<h4>Answer 2 (score 7)</h4>
<p>if <code>rm -rf directoryname</code> fails you, try using <code>rm -R -f directoryname</code>, or <code>rm --recursive -f directoryname</code>.</p>
<p>If you are not having any luck with these, you should consider reinstalling rm or switching shells.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-forward-x-over-ssh-to-run-graphics-applications-remotely-score-855042-in-2017" class="level3">
<h3>20: How to forward X over SSH to run graphics applications remotely? (score <a href="https://stackoverflow.com/q/12755.html">855042</a> in 2017)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>I have a machine running Ubuntu which I SSH to from my Fedora 14 machine. I want to forward X from the Ubuntu machine back to Fedora so I can run graphical programs remotely. Both machines are on a LAN.</p>
<p>I know that the <code>-X</code> option enables X11 forwarding in SSH, but I feel like I am missing some of the steps.</p>
<p>What are the required steps to forward X from a Ubuntu machine to Fedora over SSH?</p>
</section>
<section id="answer-accepted-score-416" class="level4">
<h4>Answer accepted (score 416)</h4>
<p>X11 forwarding needs to be enabled on both the client side and the server side.</p>
<p>On the <strong>client side</strong>, the <code>-X</code> (capital X) option to <code>ssh</code> enables X11 forwarding, and you can make this the default (for all connections or for a specific conection) with <code>ForwardX11 yes</code> in <a href="http://man.openbsd.org/OpenBSD-current/man5/ssh_config.5#ForwardX11" rel="noreferrer"><code>~/.ssh/config</code></a>.</p>
<p>On the <strong>server side</strong>, <code>X11Forwarding yes</code> must specified in <a href="http://man.openbsd.org/OpenBSD-current/man5/sshd_config.5#X11Forwarding" rel="noreferrer"><code>/etc/ssh/sshd_config</code></a>. Note that the default is no forwarding (some distributions turn it on in their default <code>/etc/ssh/sshd_config</code>), and that the user cannot override this setting.</p>
<p>The <code>xauth</code> program must be installed on the server side. If there are any X11 programs there, it’s very likely that <code>xauth</code> will be there. In the unlikely case <code>xauth</code> was installed in a nonstandard location, it can be called through <a href="http://man.openbsd.org/OpenBSD-current/man8/sshd.8#SSHRC" rel="noreferrer"><code>~/.ssh/rc</code></a> (on the server!).</p>
<p>Note that you do not need to set any environment variables on the server. <code>DISPLAY</code> and <code>XAUTHORITY</code> will automatically be set to their proper values. If you run ssh and <code>DISPLAY</code> is not set, it means ssh is not forwarding the X11 connection.</p>
<p>To confirm that ssh is forwarding X11, check for a line containing <code>Requesting X11 forwarding</code> in the <code>ssh -v -X</code> output. Note that <strong>the server won’t reply</strong> either way, a security precaution of hiding details from potential attackers.</p>
</section>
<section id="answer-2-score-89" class="level4">
<h4>Answer 2 (score 89)</h4>
<p>To get X11 forwarding working over ssh, you’ll need 3 things in place.</p>
<ol>
<li>
Your client must be set up to forward X11.
</li>
<li>
Your server must be set up to allow X11 forwarding.
</li>
<li>
Your server must be able to set up X11 authentication.
</li>
</ol>
<p>If you have both #1 and #2 in place but are missing #3, then you’ll end up with an empty DISPLAY environment variable.</p>
<p>Soup-to-nuts, here’s how to get X11 forwarding working.</p>
<ol>
<li>
<p>
On your server, make sure /etc/ssh/sshd_config contains:
</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb143-1" title="1"><span class="ex">X11Forwarding</span> yes</a>
<a class="sourceLine" id="cb143-2" title="2"><span class="ex">X11DisplayOffset</span> 10</a></code></pre></div>
<p>You may need to SIGHUP sshd so it picks up these changes.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb144-1" title="1"><span class="fu">cat</span> /var/run/sshd.pid <span class="kw">|</span> <span class="fu">xargs</span> kill -1</a></code></pre></div>
</li>
<li>
<p>
On your server, make sure you have xauth installed.
</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb145-1" title="1"><span class="ex">belden@skretting</span>:~$ which xauth</a>
<a class="sourceLine" id="cb145-2" title="2"><span class="ex">/usr/bin/xauth</span></a></code></pre></div>
If you don’t have xauth installed, you’ll run into the “empty DISPLAY environment variable” problem.
</li>
<li>
<p>
On your client, connect to your server. Be certain to tell ssh to allow X11 forwarding. I prefer
</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb146-1" title="1"><span class="ex">belden@skretting</span>:~$ ssh -X blyman@the-server</a></code></pre></div>
</li>
</ol>
<p>but you may like</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb147-1" title="1">    <span class="ex">belden@skretting</span>:~$ ssh -o ForwardX11=yes blyman@the-server</a></code></pre></div>
<p>or you can set this up in your ~/.ssh/config.</p>
<hr>
<p>I was running into this empty DISPLAY environment variable earlier today when ssh’ing into a new server that I don’t administer. Tracking down the missing xauth part was a bit fun. Here’s what I did, and what you can do too.</p>
<p>On my local workstation, where I am an administrator, I verified that /etc/ssh/sshd_config was set up to forward X11. When I ssh -X back in to localhost, I do get my DISPLAY set correctly.</p>
<p>Forcing DISPLAY to get unset wasn’t too hard. I just needed to watch what sshd and ssh were doing to get it set correctly. Here’s the full output of everything I did along the way.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb148-1" title="1">    <span class="ex">blyman@skretting</span>:~$ mkdir ~/dummy-sshd</a>
<a class="sourceLine" id="cb148-2" title="2">    <span class="ex">blyman@skretting</span>:~$ cp -r /etc/ssh/* ~/dummy-sshd/</a>
<a class="sourceLine" id="cb148-3" title="3">    <span class="ex">cp</span>: cannot open <span class="kw">`</span><span class="ex">/etc/ssh/ssh_host_dsa_key</span><span class="st">&#39; for reading: Permission denied</span></a>
<a class="sourceLine" id="cb148-4" title="4"><span class="st">    cp: cannot open `/etc/ssh/ssh_host_rsa_key&#39;</span> <span class="kw">for</span> <span class="ex">reading</span>: Permission denied</a></code></pre></div>
<p>Instead of using sudo to force copying my ssh_host_{dsa,rsa}_key files into place, I used ssh-keygen to create dummy ones for myself.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb149-1" title="1">    <span class="ex">blyman@skretting</span>:~$ ssh-keygen -t rsa -f ~/dummy-sshd/ssh_host_rsa_key</a>
<a class="sourceLine" id="cb149-2" title="2">    <span class="ex">Generating</span> public/private rsa key pair.</a>
<a class="sourceLine" id="cb149-3" title="3">    <span class="ex">Enter</span> passphrase (empty for no passphrase)<span class="bu">:</span> </a>
<a class="sourceLine" id="cb149-4" title="4">    <span class="ex">Enter</span> same passphrase again: </a>
<a class="sourceLine" id="cb149-5" title="5">    <span class="ex">Your</span> identification has been saved in /home/blyman/dummy-sshd/ssh_host_rsa_key.</a>
<a class="sourceLine" id="cb149-6" title="6">    <span class="ex">Your</span> public key has been saved in /home/blyman/dummy-sshd/ssh_host_rsa_key.pub.</a></code></pre></div>
<p>Rinse-and-repeate with -t dsa:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb150-1" title="1">    <span class="ex">blyman@skretting</span>:~$ ssh-keygen -t dsa -f ~/dummy-sshd/ssh_host_dsa_key</a>
<a class="sourceLine" id="cb150-2" title="2">    <span class="co"># I bet you can visually copy-paste the above output down here</span></a></code></pre></div>
<p>Edit ~/dummy-sshd/sshd_config to point to the correct new ssh_host key files.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb151-1" title="1">    <span class="co"># before</span></a>
<a class="sourceLine" id="cb151-2" title="2">    <span class="ex">blyman@skretting</span>:~$ grep ssh_host /home/blyman/dummy-sshd/sshd_config </a>
<a class="sourceLine" id="cb151-3" title="3">    <span class="ex">HostKey</span> /etc/ssh/ssh_host_rsa_key</a>
<a class="sourceLine" id="cb151-4" title="4">    <span class="ex">HostKey</span> /etc/ssh/ssh_host_dsa_key</a>
<a class="sourceLine" id="cb151-5" title="5"></a>
<a class="sourceLine" id="cb151-6" title="6">    <span class="co"># after</span></a>
<a class="sourceLine" id="cb151-7" title="7">    <span class="ex">blyman@skretting</span>:~$ grep ssh_host /home/blyman/dummy-sshd/sshd_config </a>
<a class="sourceLine" id="cb151-8" title="8">    <span class="ex">HostKey</span> /home/blyman/dummy-sshd/ssh_host_rsa_key</a>
<a class="sourceLine" id="cb151-9" title="9">    <span class="ex">HostKey</span> /home/blyman/dummy-sshd/ssh_host_dsa_key</a></code></pre></div>
<p>Fire up sshd on a new port in non-detach mode:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb152-1" title="1">    <span class="ex">blyman@skretting</span>:~$ sshd -p 50505 -f ~/dummy-sshd/sshd_config -d</a>
<a class="sourceLine" id="cb152-2" title="2">    <span class="ex">sshd</span> re-exec requires execution with an absolute path</a></code></pre></div>
<p>Whoops, better correct that path:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb153-1" title="1">    <span class="ex">blyman@skretting</span>:~$ /usr/sbin/sshd -p 50505 -f ~/dummy-sshd/sshd_config -d</a>
<a class="sourceLine" id="cb153-2" title="2">    <span class="ex">debug1</span>: sshd version OpenSSH_5.5p1 Debian-4ubuntu6</a>
<a class="sourceLine" id="cb153-3" title="3">    <span class="ex">debug1</span>: read PEM private key done: type RSA</a>
<a class="sourceLine" id="cb153-4" title="4">    <span class="ex">debug1</span>: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048</a>
<a class="sourceLine" id="cb153-5" title="5">    <span class="ex">debug1</span>: Checking blacklist file /etc/ssh/blacklist.RSA-2048</a>
<a class="sourceLine" id="cb153-6" title="6">    <span class="ex">debug1</span>: private host key: <span class="co">#0 type 1 RSA</span></a>
<a class="sourceLine" id="cb153-7" title="7">    <span class="ex">debug1</span>: read PEM private key done: type DSA</a>
<a class="sourceLine" id="cb153-8" title="8">    <span class="ex">debug1</span>: Checking blacklist file /usr/share/ssh/blacklist.DSA-1024</a>
<a class="sourceLine" id="cb153-9" title="9">    <span class="ex">debug1</span>: Checking blacklist file /etc/ssh/blacklist.DSA-1024</a>
<a class="sourceLine" id="cb153-10" title="10">    <span class="ex">debug1</span>: private host key: <span class="co">#1 type 2 DSA</span></a>
<a class="sourceLine" id="cb153-11" title="11">    <span class="ex">debug1</span>: setgroups() <span class="ex">failed</span>: Operation not permitted</a>
<a class="sourceLine" id="cb153-12" title="12">    <span class="ex">debug1</span>: rexec_argv[0]=<span class="st">&#39;/usr/sbin/sshd&#39;</span></a>
<a class="sourceLine" id="cb153-13" title="13">    <span class="ex">debug1</span>: rexec_argv[1]=<span class="st">&#39;-p&#39;</span></a>
<a class="sourceLine" id="cb153-14" title="14">    <span class="ex">debug1</span>: rexec_argv[2]=<span class="st">&#39;50505&#39;</span></a>
<a class="sourceLine" id="cb153-15" title="15">    <span class="ex">debug1</span>: rexec_argv[3]=<span class="st">&#39;-f&#39;</span></a>
<a class="sourceLine" id="cb153-16" title="16">    <span class="ex">debug1</span>: rexec_argv[4]=<span class="st">&#39;/home/blyman/dummy-sshd/sshd_config&#39;</span></a>
<a class="sourceLine" id="cb153-17" title="17">    <span class="ex">debug1</span>: rexec_argv[5]=<span class="st">&#39;-d&#39;</span></a>
<a class="sourceLine" id="cb153-18" title="18">    <span class="ex">Set</span> /proc/self/oom_adj from 0 to -17</a>
<a class="sourceLine" id="cb153-19" title="19">    <span class="ex">debug1</span>: Bind to port 50505 on 0.0.0.0.</a>
<a class="sourceLine" id="cb153-20" title="20">    <span class="ex">Server</span> listening on 0.0.0.0 port 50505.</a>
<a class="sourceLine" id="cb153-21" title="21">    <span class="ex">debug1</span>: Bind to port 50505 on ::.</a>
<a class="sourceLine" id="cb153-22" title="22">    <span class="ex">Server</span> listening on :: port 50505.</a></code></pre></div>
<p>Pop a new terminal and ssh in to localhost on port 50505:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb154-1" title="1">    <span class="ex">blyman@skretting</span>:~$ ssh -p 50505 localhost</a>
<a class="sourceLine" id="cb154-2" title="2">    <span class="ex">The</span> authenticity of host <span class="st">&#39;[localhost]:50505 ([::1]:50505)&#39;</span> can<span class="st">&#39;t be established.</span></a>
<a class="sourceLine" id="cb154-3" title="3"><span class="st">    RSA key fingerprint is 81:36:a5:ff:a3:5a:45:a6:90:d3:cc:54:6b:52:d0:61.</span></a>
<a class="sourceLine" id="cb154-4" title="4"><span class="st">    Are you sure you want to continue connecting (yes/no)? yes</span></a>
<a class="sourceLine" id="cb154-5" title="5"><span class="st">    Warning: Permanently added &#39;</span>[localhost]:50505<span class="st">&#39; (RSA) to the list of known hosts.</span></a>
<a class="sourceLine" id="cb154-6" title="6"><span class="st">    Linux skretting 2.6.35-32-generic #67-Ubuntu SMP Mon Mar 5 19:39:49 UTC 2012 x86_64 GNU/Linux</span></a>
<a class="sourceLine" id="cb154-7" title="7"><span class="st">    Ubuntu 10.10</span></a>
<a class="sourceLine" id="cb154-8" title="8"></a>
<a class="sourceLine" id="cb154-9" title="9"><span class="st">    Welcome to Ubuntu!</span></a>
<a class="sourceLine" id="cb154-10" title="10"><span class="st">     * Documentation:  https://help.ubuntu.com/</span></a>
<a class="sourceLine" id="cb154-11" title="11"></a>
<a class="sourceLine" id="cb154-12" title="12"><span class="st">    1 package can be updated.</span></a>
<a class="sourceLine" id="cb154-13" title="13"><span class="st">    0 updates are security updates.</span></a>
<a class="sourceLine" id="cb154-14" title="14"></a>
<a class="sourceLine" id="cb154-15" title="15"><span class="st">    Last login: Thu Aug 16 15:41:58 2012 from 10.0.65.153</span></a>
<a class="sourceLine" id="cb154-16" title="16"><span class="st">    Environment:</span></a>
<a class="sourceLine" id="cb154-17" title="17"><span class="st">      LANG=en_US.UTF-8</span></a>
<a class="sourceLine" id="cb154-18" title="18"><span class="st">      USER=blyman</span></a>
<a class="sourceLine" id="cb154-19" title="19"><span class="st">      LOGNAME=blyman</span></a>
<a class="sourceLine" id="cb154-20" title="20"><span class="st">      HOME=/home/blyman</span></a>
<a class="sourceLine" id="cb154-21" title="21"><span class="st">      PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games</span></a>
<a class="sourceLine" id="cb154-22" title="22"><span class="st">      MAIL=/var/mail/blyman</span></a>
<a class="sourceLine" id="cb154-23" title="23"><span class="st">      SHELL=/bin/bash</span></a>
<a class="sourceLine" id="cb154-24" title="24"><span class="st">      SSH_CLIENT=::1 43599 50505</span></a>
<a class="sourceLine" id="cb154-25" title="25"><span class="st">      SSH_CONNECTION=::1 43599 ::1 50505</span></a>
<a class="sourceLine" id="cb154-26" title="26"><span class="st">      SSH_TTY=/dev/pts/16</span></a>
<a class="sourceLine" id="cb154-27" title="27"><span class="st">      TERM=xterm</span></a>
<a class="sourceLine" id="cb154-28" title="28"><span class="st">      DISPLAY=localhost:10.0</span></a>
<a class="sourceLine" id="cb154-29" title="29"><span class="st">    Running /usr/bin/xauth remove unix:10.0</span></a>
<a class="sourceLine" id="cb154-30" title="30"><span class="st">    /usr/bin/xauth add unix:10.0 MIT-MAGIC-COOKIE-1 79aa9275ced418dd445d9798b115d393</span></a></code></pre></div>
<p>Look at the last three lines there. I fortuitously had DISPLAY set, and had those two nice-looking lines from /usr/bin/xauth.</p>
<p>From there it was child’s play to move aside my /usr/bin/xauth to /usr/bin/xauth.old, disconnect from ssh and stop the sshd, then launch sshd and ssh back in to localhost.</p>
<p>When /usr/bin/xauth was gone, I didn’t see DISPLAY reflected in my environment.</p>
<hr>
<p>There’s nothing brilliant going on here. Mostly I got lucky in choosing a sane approach to try reproducing this on my local machine.</p>
</section>
<section id="answer-3-score-35" class="level4">
<h4>Answer 3 (score 35)</h4>
<p>Make sure that:</p>
<ul>
<li>
You’ve <code>xauth</code> installed on the server (see: <code>xauth info</code>/<code>xauth list</code>).
</li>
<li>
<p>
On the server your <code>/etc/ssh/sshd_config</code> file have these lines:
</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb155-1" title="1"><span class="ex">X11Forwarding</span> yes</a>
<a class="sourceLine" id="cb155-2" title="2"><span class="ex">X11DisplayOffset</span> 10</a>
<a class="sourceLine" id="cb155-3" title="3"><span class="ex">X11UseLocalhost</span> no</a></code></pre></div>
</li>
<li>
<p>
On the client side your <code>~/.ssh/config</code> file have these lines:
</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb156-1" title="1"><span class="ex">Host</span> *</a>
<a class="sourceLine" id="cb156-2" title="2">  <span class="ex">ForwardAgent</span> yes</a>
<a class="sourceLine" id="cb156-3" title="3">  <span class="ex">ForwardX11</span> yes</a></code></pre></div>
</li>
<li>
<p>
On the client side, you’ve X server installed (e.g. macOS: XQuartz; Windows: Xming).
</p>
</li>
</ul>
<hr>
<p>Then to do X11 forwarding using SSH, you need to <strong>add <code>-X</code> to your <code>ssh</code></strong> command, e.g.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb157-1" title="1"><span class="fu">ssh</span> -v -X user@host</a></code></pre></div>
<p>then verify that your <code>DISPLAY</code> is <strong>not</strong> empty by:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb158-1" title="1"><span class="bu">echo</span> <span class="va">$DISPLAY</span></a></code></pre></div>
<p>If it is, then having verbose parameter for ssh (<code>-v</code>), check for any warnings, e.g.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb159-1" title="1"><span class="ex">debug1</span>: No xauth program.</a>
<a class="sourceLine" id="cb159-2" title="2"><span class="ex">Warning</span>: untrusted X11 forwarding setup failed: xauth key data not generated</a></code></pre></div>
<hr>
<p>In case you’ve got <em>untrusted X11</em> as shown above, then <strong>try <code>-Y</code> flag</strong> instead (if you trust the host):</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb160-1" title="1"><span class="fu">ssh</span> -v -Y user@host</a></code></pre></div>
<p><sup>See: <a href="https://serverfault.com/q/273847/130437">What does “Warning: untrusted X11 forwarding setup failed: xauth key data not generated” mean when ssh’ing with -X?</a></sup></p>
<hr>
<p>In case you’ve <em>warning: No xauth data</em>, you may try to generate a new <code>.Xauthority</code> file, e.g.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb161-1" title="1"><span class="ex">xauth</span> generate :0 . trusted</a>
<a class="sourceLine" id="cb161-2" title="2"><span class="ex">xauth</span> list</a></code></pre></div>
<p>See: <a href="http://justaix.blogspot.co.uk/2011/01/createrebuild-new-xauthority-file.html" rel="noreferrer">Create/rebuild a new .Xauthority file</a></p>
<hr>
<p>If you’ve got a different warnings than above, follow the further clues.</p>
<hr>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-set-my-dns-when-resolv.conf-is-being-overwritten-score-843688-in-2017" class="level3">
<h3>21: How do I set my DNS when resolv.conf is being overwritten? (score <a href="https://stackoverflow.com/q/128220.html">843688</a> in 2017)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>Most of the info I see online says to edit <code>/etc/resolv.conf</code>, but any changes I make there just get overridden.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb162-1" title="1">$ <span class="fu">cat</span> /etc/resolv.conf </a>
<a class="sourceLine" id="cb162-2" title="2"><span class="co"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span></a>
<a class="sourceLine" id="cb162-3" title="3"><span class="co">#     DO NOT EDIT THIS FILE BY HAND -- </span></a>
<a class="sourceLine" id="cb162-4" title="4"><span class="co">#     YOUR CHANGES WILL BE OVERWRITTEN</span></a>
<a class="sourceLine" id="cb162-5" title="5"><span class="ex">nameserver</span> 127.0.1.1</a></code></pre></div>
<p>It seems that 127.0.1.1 is a local instance of <code>dnsmasq</code>. The <code>dnsmasq</code> docs say to edit <code>/etc/resolv.conf</code>. I tried putting custom nameservers in <code>/etc/resolv.conf.d/base</code>, but the changes didn’t show up in <code>/etc/resolv.conf</code> after running <code>sudo resolvconf -u</code>.</p>
<p>FYI, I don’t want to change DNS on a per-connection basis, I want to set default DNS settings to use for all connections when not otherwise specified.</p>
<p><strong><em>UPDATE:</em></strong></p>
<p>
I answered this question myself: <a href="https://unix.stackexchange.com/a/163506/67024">https://unix.stackexchange.com/a/163506/67024</a>
</p>
<p>I think it’s the best solution since:</p>
<ol>
<li>
It works.
</li>
<li>
It requires the least amount of changes and
</li>
<li>
It still works in conjunction with dnsmasq’s DNS cache, rather than bypassing it.
</li>
</ol>
</section>
<section id="answer-accepted-score-59" class="level4">
<h4>Answer accepted (score 59)</h4>
<p>I found out that you can change the nameservers that <code>dnsmasq</code> uses by adding the following lines to <code>/etc/dnsmasq.conf</code>:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb163-1" title="1"><span class="va">server=</span>8.8.8.8</a>
<a class="sourceLine" id="cb163-2" title="2"><span class="va">server=</span>8.8.4.4</a></code></pre></div>
<p>I didn’t have a <code>/etc/dnsmasq.conf</code> file though, since it’s installed by the dnsmasq package, but Ubuntu only comes with dnsmasq-base. I ran <code>sudo apt-get install dnsmasq</code>, then edited <code>/etc/dnsmasq.conf</code>, then <code>sudo service dnsmasq restart</code> and <code>sudo service network-manager restart</code>.</p>
<p>I ran <code>sudo tail -n 200 /var/log/syslog</code> to check my syslog and verify that <code>dnsmasq</code> was using the nameservers I specified:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb164-1" title="1"><span class="ex">Oct</span> 21 23:00:54 mylaptop dnsmasq[8611]: using nameserver 8.8.8.8#53</a>
<a class="sourceLine" id="cb164-2" title="2"><span class="ex">Oct</span> 21 23:00:54 mylaptop dnsmasq[8611]: using nameserver 8.8.4.4#53</a></code></pre></div>
</section>
<section id="answer-2-score-251" class="level4">
<h4>Answer 2 (score 251)</h4>
<p>I believe if you want to override the DNS nameserver you merely add a line similar to this in your <code>base</code> file under <code>resolv.conf.d</code>.</p>
<h5>
Example
</h3>
<div class="sourceCode" id="cb165"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb165-1" title="1">$ <span class="fu">sudo</span> vim /etc/resolvconf/resolv.conf.d/base</a></code></pre></div>
<p>Then put your nameserver list in like so:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb166-1" title="1"><span class="ex">nameserver</span> 8.8.8.8</a>
<a class="sourceLine" id="cb166-2" title="2"><span class="ex">nameserver</span> 8.8.4.4</a></code></pre></div>
<p>Finally update <code>resolvconf</code>:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb167-1" title="1">$ <span class="fu">sudo</span> resolvconf -u</a></code></pre></div>
<p>If you take a look at the man page for <code>resolvconf</code> it describes the various files under <code>/etc/resolvconf/resolv.conf.d/</code>.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb168-1" title="1">   <span class="ex">/etc/resolvconf/resolv.conf.d/base</span></a>
<a class="sourceLine" id="cb168-2" title="2">          <span class="ex">File</span>  containing  basic  resolver  information.  The lines in this </a>
<a class="sourceLine" id="cb168-3" title="3">          <span class="fu">file</span> are included in the resolver configuration file even when no</a>
<a class="sourceLine" id="cb168-4" title="4">          <span class="ex">interfaces</span> are configured.</a>
<a class="sourceLine" id="cb168-5" title="5"></a>
<a class="sourceLine" id="cb168-6" title="6">   <span class="ex">/etc/resolvconf/resolv.conf.d/head</span></a>
<a class="sourceLine" id="cb168-7" title="7">          <span class="ex">File</span> to be prepended to the dynamically generated resolver </a>
<a class="sourceLine" id="cb168-8" title="8">          <span class="ex">configuration</span> file.  Normally this is just a comment line.</a>
<a class="sourceLine" id="cb168-9" title="9"></a>
<a class="sourceLine" id="cb168-10" title="10">   <span class="ex">/etc/resolvconf/resolv.conf.d/tail</span></a>
<a class="sourceLine" id="cb168-11" title="11">          <span class="ex">File</span> to be appended to the dynamically generated resolver </a>
<a class="sourceLine" id="cb168-12" title="12">          <span class="ex">configuration</span> file.  To append nothing, make this  an  empty  </a>
<a class="sourceLine" id="cb168-13" title="13">          <span class="ex">file.</span>   This file is a good place to put a resolver options line </a>
<a class="sourceLine" id="cb168-14" title="14">          <span class="kw">if</span> <span class="ex">one</span> is needed, e.g.,</a>
<a class="sourceLine" id="cb168-15" title="15"></a>
<a class="sourceLine" id="cb168-16" title="16">              <span class="ex">options</span> inet6</a></code></pre></div>
<p>Even though there’s a warning at the top of the <code>head</code> file:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb169-1" title="1">$ <span class="fu">cat</span> /etc/resolvconf/resolv.conf.d/head</a>
<a class="sourceLine" id="cb169-2" title="2"><span class="co"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span></a>
<a class="sourceLine" id="cb169-3" title="3"><span class="co">#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span></a></code></pre></div>
<p>this warning is is there so that when these files are constructed, the warning will ultimately work its way into the resulting <code>resolv.conf</code> file that these files will be used to make. So you could just as easily have added the <code>nameserver</code> lines that are described above for the <code>base</code> file, to the <code>head</code> file too.</p>
<h5>
References
</h3>
<ul>
<li>
<a href="http://www.netroby.com/view.php?id=3630#.U2mTfHVdUc0" rel="noreferrer">Persist dns nameserver for ubuntu 14.04</a>
</li>
<li>
<a href="https://askubuntu.com/questions/130452/how-do-i-add-a-dns-server-via-resolv-conf">How do I add a DNS server via resolv.conf?</a>
</li>
</ul>
</section>
<section id="answer-3-score-79" class="level4">
<h4>Answer 3 (score 79)</h4>
<p>I am also interested in this question and I tried the solution proposed <span class="citation" data-cites="sim">@sim</span>.</p>
<p>To test it, I put</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb170-1" title="1"><span class="ex">nameserver</span> 8.8.8.8</a></code></pre></div>
<p>in <code>/etc/resolvconf/resolv.conf.d/base</code> and</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb171-1" title="1"><span class="ex">nameserver</span> 8.8.4.4</a></code></pre></div>
<p>in <code>/etc/resolvconf/resolv.conf.d/head</code></p>
<p>Then I restarted the network with</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb172-1" title="1"><span class="fu">sudo</span> service network-manager restart</a></code></pre></div>
<p>The result is that <code>/etc/resolv.conf</code> looks like</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb173-1" title="1"><span class="co"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span></a>
<a class="sourceLine" id="cb173-2" title="2"><span class="co">#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span></a>
<a class="sourceLine" id="cb173-3" title="3"><span class="ex">nameserver</span> 8.8.4.4</a>
<a class="sourceLine" id="cb173-4" title="4"><span class="ex">nameserver</span> 127.0.1.1</a></code></pre></div>
<p>and <code>nm-tool</code> states that the dnsserver are</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb174-1" title="1"><span class="ex">DNS</span>:             208.67.222.222</a>
<a class="sourceLine" id="cb174-2" title="2"><span class="ex">DNS</span>:             208.67.220.220</a></code></pre></div>
<p>
which are the ones provided by my router. On the other hand digging an address tells that
</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb175-1" title="1">;; <span class="ex">Query</span> time: 28 msec</a>
<a class="sourceLine" id="cb175-2" title="2">;; <span class="ex">SERVER</span>: 8.8.4.4#53(8.8.4.4)</a></code></pre></div>
<p>If I am right, I conclude from all this that</p>
<ol>
<li>
only the “head” part is read by resolvonf: the “base” part is somehow controlled by dnsmasq
</li>
<li>
the dnsserver is actually forced to 8.8.4.4 regardless of the server provided by dhcp, BUT you loose the caching provided by dnsmasq, since the request is always sent to 8.8.4.4
</li>
<li>
dnsmasq is still using ONLY the dnsserver provided by dhcp.
</li>
</ol>
<p>
All in all, it works but I don’t think it is the intended result asked for. A more close solution I think is the following. Edit
</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb176-1" title="1"><span class="fu">sudo</span> vim /etc/dhcp/dhclient.conf</a></code></pre></div>
<p>then add</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb177-1" title="1"><span class="ex">supersede</span> domain-name-servers 8.8.8.8<span class="kw">;</span></a></code></pre></div>
<p>The result is the following: resolv.conf contains only 127.0.0.1, which means that dnsmasq cache is invoked and nm-tool says</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb178-1" title="1"><span class="ex">DNS</span>:             8.8.8.8</a></code></pre></div>
<p>which means that if the name searched for is not in the cache, then it is asked for at 8.8.8.8 and not at the server provided by dhcp.</p>
<p>Another (perhaps better) option is to use “prepend” instead of “supersede”: in this way, if the name is not resolved by 8.8.8.8, then the request falls back on the other server. In fact, nm-tool says</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb179-1" title="1"><span class="ex">DNS</span>:             8.8.8.8    </a>
<a class="sourceLine" id="cb179-2" title="2"><span class="ex">DNS</span>:             208.67.222.222</a>
<a class="sourceLine" id="cb179-3" title="3"><span class="ex">DNS</span>:             208.67.220.220</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-create-a-simple-.txt-text-file-using-terminal-score-798669-in-2014" class="level3">
<h3>22: How to create a simple .txt (text) file using terminal? (score <a href="https://stackoverflow.com/q/159672.html">798669</a> in 2014)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>I’m just trying to review basic terminal commands. Having said that, how do I create a text file using the terminal only?</p>
</section>
<section id="answer-2-score-106" class="level4">
<h4>Answer 2 (score 106)</h4>
<p>You can’t use a terminal to create a file. You can use an application running in a terminal. Just invoke any non-GUI editor (<code>emacs -nw</code>, <code>joe</code>, <code>nano</code>, <code>vi</code>, <code>vim</code>, …).</p>
<p>If you meant using the command line, then you are asking how to create a file using the shell. See <a href="https://unix.stackexchange.com/questions/4126/what-is-the-exact-difference-between-a-terminal-a-shell-a-tty-and-a-con/4132#4132">What is the exact difference between a ‘terminal’, a ‘shell’, a ‘tty’ and a ‘console’?</a></p>
<p>The basic way to create a file with the shell is with <a href="http://en.wikipedia.org/wiki/Redirection_(computing)" rel="noreferrer">output redirection</a>. For example, the following command creates a file called <code>foo.txt</code> containing the line <code>Hello, world.</code></p>
<div class="sourceCode" id="cb180"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb180-1" title="1"><span class="bu">echo</span> <span class="st">&#39;Hello, world.&#39;</span> <span class="op">&gt;</span>foo.txt</a></code></pre></div>
<p>If you want to write multiple lines, here are a few possibilities. You can use <code>printf</code>.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb181-1" title="1"><span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&#39;First line.&#39;</span> <span class="st">&#39;Second line.&#39;</span> <span class="st">&#39;Third line.&#39;</span> <span class="op">&gt;</span>foo.txt</a></code></pre></div>
<p>You can use a string literal containing newlines.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb182-1" title="1"><span class="bu">echo</span> <span class="st">&#39;First line.</span></a>
<a class="sourceLine" id="cb182-2" title="2"><span class="st">Second line.</span></a>
<a class="sourceLine" id="cb182-3" title="3"><span class="st">Third line.&#39;</span> <span class="op">&gt;</span>foo.txt</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb183-1" title="1"><span class="bu">echo</span> <span class="st">$&#39;First line.</span><span class="dt">\n</span><span class="st">Second line.</span><span class="dt">\n</span><span class="st">Third line.&#39;</span> <span class="op">&gt;</span>foo.txt</a></code></pre></div>
<p>Another possibility is to group commands.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb184-1" title="1"><span class="kw">{</span></a>
<a class="sourceLine" id="cb184-2" title="2">  <span class="bu">echo</span> <span class="st">&#39;First line.&#39;</span></a>
<a class="sourceLine" id="cb184-3" title="3">  <span class="bu">echo</span> <span class="st">&#39;Second line.&#39;</span></a>
<a class="sourceLine" id="cb184-4" title="4">  <span class="bu">echo</span> <span class="st">&#39;Third line.&#39;</span></a>
<a class="sourceLine" id="cb184-5" title="5"><span class="kw">}</span> <span class="op">&gt;</span><span class="ex">foo.txt</span></a></code></pre></div>
<p>On the command line, you can do this more directly with <code>cat</code>. Redirect its output to the file and type the input line by line on <code>cat</code>’s standard input. Press <kbd>Ctrl</kbd>+<kbd>D</kbd> at the beginning of the line to indicate the end of the input.</p>
<pre>
$ <strong>cat &gt;foo.txt</strong>
<strong>First line.</strong>
<strong>Second line.</strong>
<strong>Third line.</strong>
<kbd>Ctrl+D</kbd>
</pre>
<p>In a script you would use a <a href="http://en.wikipedia.org/wiki/Here_document" rel="noreferrer">here document</a> to achieve the same effect:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb185-1" title="1"><span class="fu">cat</span> <span class="op">&lt;&lt;EOF</span> <span class="op">&gt;</span><span class="ex">foo.txt</span></a>
<a class="sourceLine" id="cb185-2" title="2">First line.</a>
<a class="sourceLine" id="cb185-3" title="3">Second line.</a>
<a class="sourceLine" id="cb185-4" title="4">Third line.</a>
<a class="sourceLine" id="cb185-5" title="5">EOF</a></code></pre></div>
<p>If you just want to create an empty file, you can use the <code>touch</code> command: it creates the file if it doesn’t exist, and just updates its last-modified date if it exists.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb186-1" title="1"><span class="fu">touch</span> foo.txt</a></code></pre></div>
<p>Equivalently:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb187-1" title="1"><span class="op">&gt;&gt;</span><span class="ex">foo.txt</span></a></code></pre></div>
<p>i.e. open <code>foo.txt</code> for appending, but write 0 bytes to it — this creates the file but doesn’t modify it. Unlike <code>touch</code>, this doesn’t update the file’s last-modified date if it already existed.</p>
<p>To create an empty file, and remove the file’s content if the file already existed, you can use</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb188-1" title="1"><span class="op">&gt;</span><span class="ex">foo.txt</span></a></code></pre></div>
</section>
<section id="answer-3-score-13" class="level4">
<h4>Answer 3 (score 13)</h4>
<div class="sourceCode" id="cb189"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb189-1" title="1"><span class="fu">touch</span> ~/Desktop/something.txt</a></code></pre></div>
<p>This will create an empty <code>txt</code> file.</p>
<p>Or</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb190-1" title="1"><span class="bu">echo</span> <span class="st">&quot;Hello&quot;</span> <span class="op">&gt;</span> ~/Desktop/somethingelse.txt</a></code></pre></div>
<p>This will create a <code>txt</code> file saying “Hello”.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb191-1" title="1"><span class="fu">nano</span> ~/Desktop/anotherfile.txt</a></code></pre></div>
<p>This will open <code>~/Desktop/anotherfile.txt</code> in <code>nano</code>, or if it doesn’t exist, it will create it and open it in <code>nano</code>.</p>
<p>The same can be done by simply replacing <code>nano</code> with <code>emacs</code> or <code>vim</code> and it will use <code>emacs</code> or <code>vim</code> instead of <code>nano</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="finding-the-pid-of-the-process-using-a-specific-port-score-788176-in-2016" class="level3">
<h3>23: Finding the PID of the process using a specific port? (score <a href="https://stackoverflow.com/q/106561.html">788176</a> in 2016)</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>I am installing hadoop on my Ubuntu system. When I start it, it reports that port 9000 is busy.</p>
<p>I used:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb192-1" title="1"><span class="fu">netstat</span> -nlp<span class="kw">|</span><span class="fu">grep</span> 9000</a></code></pre></div>
<p>to see if such a port exists and I got this:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb193-1" title="1">   <span class="ex">tcp</span>        0      0 127.0.0.1:9000          0.0.0.0:*               LISTEN</a></code></pre></div>
<p>But how can I get the PID of the process which is holding it?</p>
</section>
<section id="answer-accepted-score-479" class="level4">
<h4>Answer accepted (score 479)</h4>
<p>On Linux, you must be root or the owner of the process to get the information you desire. As such, for processes running as another user, prepending <code>sudo</code> is most of what you need. In addition to that, on modern Linux systems, <code>ss</code> is tool to use to do this:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb194-1" title="1">$ <span class="fu">sudo</span> ss -lptn <span class="st">&#39;sport = :80&#39;</span></a>
<a class="sourceLine" id="cb194-2" title="2"><span class="ex">State</span>   Local Address:Port  Peer Address:Port              </a>
<a class="sourceLine" id="cb194-3" title="3"><span class="ex">LISTEN</span>  127.0.0.1:80        *:*                users:((<span class="st">&quot;nginx&quot;</span>,pid=125004,fd=12))</a>
<a class="sourceLine" id="cb194-4" title="4"><span class="ex">LISTEN</span>  ::1:80              :::*               users:((<span class="st">&quot;nginx&quot;</span>,pid=125004,fd=11))</a></code></pre></div>
<p>You can also use the same invocation you’re currently using, but remember to <code>sudo</code>:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb195-1" title="1">$ <span class="fu">sudo</span> netstat -nlp <span class="kw">|</span> <span class="fu">grep</span> :80</a>
<a class="sourceLine" id="cb195-2" title="2"><span class="ex">tcp</span>  0  0  0.0.0.0:80  0.0.0.0:*  LISTEN  125004/nginx</a></code></pre></div>
<p>You can also use lsof:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb196-1" title="1">$ <span class="fu">sudo</span> lsof -n -i :80 <span class="kw">|</span> <span class="fu">grep</span> LISTEN</a>
<a class="sourceLine" id="cb196-2" title="2"><span class="ex">nginx</span>   125004 nginx    3u  IPv4   6645      0t0  TCP 0.0.0.0:80 (LISTEN)</a></code></pre></div>
</section>
<section id="answer-2-score-138" class="level4">
<h4>Answer 2 (score 138)</h4>
<p>Also you can use <code>lsof</code> utility. Need to be root.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb197-1" title="1"><span class="co"># lsof -i :25</span></a>
<a class="sourceLine" id="cb197-2" title="2"><span class="ex">COMMAND</span>  PID        USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</a>
<a class="sourceLine" id="cb197-3" title="3"><span class="ex">exim4</span>   2799 Debian-exim    3u  IPv4   6645      0t0  TCP localhost:smtp (LISTEN)</a>
<a class="sourceLine" id="cb197-4" title="4"><span class="ex">exim4</span>   2799 Debian-exim    4u  IPv6   6646      0t0  TCP localhost:smtp (LISTEN)</a></code></pre></div>
</section>
<section id="answer-3-score-13-1" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>I am using “CentOS 7 minimal” which has nor <code>netstat</code> neither <code>lsof</code>. But a lot of linux distributions have the socket statistics command (i.e. <code>ss</code>).</p>
<p>Here is an example of execution:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb198-1" title="1"><span class="co"># ss -tanp | grep 6379</span></a>
<a class="sourceLine" id="cb198-2" title="2"><span class="ex">LISTEN</span>   0    128  127.0.0.1:6379   *:*   users:((<span class="st">&quot;redis-server&quot;</span>,pid=2531,fd=4))</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="username-is-not-in-the-sudoers-file.-this-incident-will-be-reported-score-766227-in-2018" class="level3">
<h3>24: Username is not in the sudoers file. This incident will be reported (score <a href="https://stackoverflow.com/q/179954.html">766227</a> in 2018)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>I am running Ubuntu 12.04 on my laptop using VMware Player. I am not sure why but I have an account called “User Account” in addition to my account that I usually login to use Ubuntu. Well that was just a side comment but basically all I am trying to do is install the ncurses library on Ubuntu. I have tried installing ncurses using the following command lines:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb199-1" title="1"><span class="fu">sudo</span> apt-get install libncurses5-dev</a>
<a class="sourceLine" id="cb199-2" title="2"><span class="fu">sudo</span> apt-get install ncurses-dev</a></code></pre></div>
<p>When I tried installing ncurses twice using the above commands I received the following prompt in the terminal:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb200-1" title="1">[<span class="ex">sudo</span>] password for username</a></code></pre></div>
<p>When I type in my password I receive the following message:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb201-1" title="1"><span class="ex">username</span> is not in the sudoers file. This incident will be reported.</a></code></pre></div>
<p>So far I have tried enabling the root user (“Super User”) account by following the instructions at this link: <a href="https://help.ubuntu.com/community/RootSudo" rel="noreferrer">https://help.ubuntu.com/community/RootSudo</a></p>
<p>Here are some of the things the link suggested to do:</p>
<blockquote>
<p>Allow an other user to run sudo. Type the following in the command line:</p>
<p>sudo adduser username sudo</p>
<p>Or</p>
<p>sudo adduser username sudo</p>
<p>logging in as another user. Type the following in the command line:</p>
<p>sudo -i -u username</p>
<p>Enabling the root account. Type the following in the command line:</p>
<p>sudo -i</p>
<p>Or</p>
sudo passwd root
</blockquote>
<p>I have tried all of the above command lines and after typing in each command I was prompted for my password. After I entered my password I received the same message as when I tried to install ncurses:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb202-1" title="1"><span class="ex">fsolano</span> is not in the sudoers file. This incident will be reported.</a></code></pre></div>
</section>
<section id="answer-2-score-57-1" class="level4">
<h4>Answer 2 (score 57)</h4>
<p>When this happened to me all I had to do to fix it was:</p>
<p>
Step 1. Open a terminal window, <kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>T</kbd> on my system (Debian KDE after setting up as hotkey)
</p>
<p>Step 2. Entered root using command <code>su root</code></p>
<p>Step 3. Input root password</p>
<p>Step 4. Input command <code>apt-get install sudo -y</code> to install <code>sudo</code></p>
<p>Step 5. Add user to sudoers file by inputting <code>adduser username</code>, put your username in place of <code>username</code></p>
<p>Step 6. Set the correct permissions for sudoers file by inputting <code>chmod  0440  /etc/sudoers</code></p>
<p>Step 7. Type <code>exit</code> and hit <kbd>Enter</kbd> until you close your terminal window. Shutdown your system completely and reboot.</p>
<p>Step 8. Open another terminal window.</p>
<p>Step 9. Try any sudo command to check if your username is correctly added to sudoers file. I used <code>sudo echo &quot;Hello World!&quot;</code>. If your username has been correctly added to the sudoers list then you will get <code>Hello World!</code> as the terminal response!</p>
</section>
<section id="answer-3-score-42" class="level4">
<h4>Answer 3 (score 42)</h4>
<p>Follow the link to reset your admin password [sounds like you named your admin user account as ‘user’ :)]</p>
<p><a href="https://askubuntu.com/questions/24006/how-do-i-reset-a-lost-administrative-password">https://askubuntu.com/questions/24006/how-do-i-reset-a-lost-administrative-password</a></p>
<p>After that, login as the admin user and execute the following.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb203-1" title="1"><span class="fu">sudo</span> usermod -aG sudo,adm fsolano</a></code></pre></div>
<p>Now you can login as ‘fsolano’ and you should be able to run sudo command.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-run-find--exec-score-757133-in-2011" class="level3">
<h3>25: How to run find -exec? (score <a href="https://stackoverflow.com/q/12902.html">757133</a> in 2011)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>I’d like to find the files in the current directory that contain the text “chrome”.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb204-1" title="1">$ <span class="fu">find</span> . -exec grep chrome</a>
<a class="sourceLine" id="cb204-2" title="2"><span class="ex">find</span>: missing argument to <span class="kw">`</span><span class="ex">-exec</span><span class="st">&#39;</span></a></code></pre></div>
<p>What am I doing wrong?</p>
</section>
<section id="answer-accepted-score-720" class="level4">
<h4>Answer accepted (score 720)</h4>
<p>You missed a <code>;</code> (escaped here as <code>\;</code> to prevent the shell from interpreting it) or a <code>+</code> and a <code>{}</code>:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb205-1" title="1"><span class="fu">find</span> . -exec grep chrome {} <span class="dt">\;</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb206-1" title="1"><span class="fu">find</span> . -exec grep chrome {} <span class="ex">+</span></a></code></pre></div>
<p><code>find</code> will execute <code>grep</code> and will substitute <code>{}</code> with the filename(s) found. The difference between <code>;</code> and <code>+</code> is that with <code>;</code> a single <code>grep</code> command for each file is executed whereas with <code>+</code> as many files as possible are given as parameters to <code>grep</code> at once.</p>
</section>
<section id="answer-2-score-46-1" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>You don’t need to use <code>find</code> for this at all; grep is able to handle opening the files either from a glob list of everything in the current directory:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb207-1" title="1"><span class="fu">grep</span> chrome *</a></code></pre></div>
<p>…or even recursively for folder and everything under it:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb208-1" title="1"><span class="fu">grep</span> chrome . -R</a></code></pre></div>
</section>
<section id="answer-3-score-18" class="level4">
<h4>Answer 3 (score 18)</h4>
<div class="sourceCode" id="cb209"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb209-1" title="1"><span class="fu">find</span> . <span class="kw">|</span> <span class="fu">xargs</span> grep <span class="st">&#39;chrome&#39;</span></a></code></pre></div>
<p>you can also do:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb210-1" title="1"><span class="fu">find</span> . <span class="kw">|</span> <span class="fu">xargs</span> grep <span class="st">&#39;chrome&#39;</span> -ls</a></code></pre></div>
<p>The first shows you the lines in the files, the second just lists the files.</p>
<p>Caleb’s option is neater, fewer keystrokes.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-append-multiple-lines-to-a-file-score-739887-in-2017" class="level3">
<h3>26: How to append multiple lines to a file (score <a href="https://stackoverflow.com/q/77277.html">739887</a> in 2017)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<p>I am writing a bash script to look for a file if it doesn’t exist then create it and append this to it:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb211-1" title="1"><span class="ex">Host</span> localhost</a>
<a class="sourceLine" id="cb211-2" title="2">    <span class="ex">ForwardAgent</span> yes</a></code></pre></div>
<p>
So <code>&quot;line then new line 'tab' then text&quot;</code> I think its a sensitive format. I know you can do this:
</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb212-1" title="1"><span class="fu">cat</span> temp.txt <span class="op">&gt;&gt;</span> data.txt</a></code></pre></div>
<p>But it seems weird since its two lines. Is there a way to append that in this format:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb213-1" title="1"><span class="bu">echo</span> <span class="st">&quot;hello&quot;</span> <span class="op">&gt;&gt;</span> greetings.txt</a></code></pre></div>
</section>
<section id="answer-accepted-score-533" class="level4">
<h4>Answer accepted (score 533)</h4>
<div class="sourceCode" id="cb214"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb214-1" title="1"><span class="co"># possibility 1:</span></a>
<a class="sourceLine" id="cb214-2" title="2"><span class="bu">echo</span> <span class="st">&quot;line 1&quot;</span> <span class="op">&gt;&gt;</span> greetings.txt</a>
<a class="sourceLine" id="cb214-3" title="3"><span class="bu">echo</span> <span class="st">&quot;line 2&quot;</span> <span class="op">&gt;&gt;</span> greetings.txt</a>
<a class="sourceLine" id="cb214-4" title="4"></a>
<a class="sourceLine" id="cb214-5" title="5"><span class="co"># possibility 2:</span></a>
<a class="sourceLine" id="cb214-6" title="6"><span class="bu">echo</span> <span class="st">&quot;line 1</span></a>
<a class="sourceLine" id="cb214-7" title="7"><span class="st">line 2&quot;</span> <span class="op">&gt;&gt;</span> greetings.txt</a>
<a class="sourceLine" id="cb214-8" title="8"></a>
<a class="sourceLine" id="cb214-9" title="9"><span class="co"># possibility 3:</span></a>
<a class="sourceLine" id="cb214-10" title="10"><span class="fu">cat</span> <span class="op">&lt;&lt;EOT</span> <span class="op">&gt;&gt;</span> <span class="ex">greetings.txt</span></a>
<a class="sourceLine" id="cb214-11" title="11">line 1</a>
<a class="sourceLine" id="cb214-12" title="12">line 2</a>
<a class="sourceLine" id="cb214-13" title="13">EOT</a></code></pre></div>
<p>If sudo (other user privileges) is needed to write to the file, use this:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb215-1" title="1"><span class="co"># possibility 1:</span></a>
<a class="sourceLine" id="cb215-2" title="2"><span class="bu">echo</span> <span class="st">&quot;line 1&quot;</span> <span class="kw">|</span> <span class="fu">sudo</span> tee -a greetings.txt <span class="op">&gt;</span> /dev/null</a>
<a class="sourceLine" id="cb215-3" title="3"></a>
<a class="sourceLine" id="cb215-4" title="4"><span class="co"># possibility 3:</span></a>
<a class="sourceLine" id="cb215-5" title="5"><span class="fu">sudo</span> tee -a greetings.txt <span class="op">&gt;</span> /dev/null <span class="op">&lt;&lt;EOT</span></a>
<a class="sourceLine" id="cb215-6" title="6">line 1</a>
<a class="sourceLine" id="cb215-7" title="7">line 2</a>
<a class="sourceLine" id="cb215-8" title="8"><span class="op">EOT</span></a></code></pre></div>
</section>
<section id="answer-2-score-60" class="level4">
<h4>Answer 2 (score 60)</h4>
<div class="sourceCode" id="cb216"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb216-1" title="1"><span class="bu">printf</span> <span class="st">&#39;%s\n    %s\n&#39;</span> <span class="st">&#39;Host localhost&#39;</span> <span class="st">&#39;ForwardAgent yes&#39;</span> <span class="op">&gt;&gt;</span> file.txt</a></code></pre></div>
<p>Or, if it’s a literal tab that you want (rather than the four spaces in your question):</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb217-1" title="1"><span class="bu">printf</span> <span class="st">&#39;%s\n\t%s\n&#39;</span> <span class="st">&#39;Host localhost&#39;</span> <span class="st">&#39;ForwardAgent yes&#39;</span> <span class="op">&gt;&gt;</span> file.txt</a></code></pre></div>
<p>You can achieve the same effect with <code>echo</code>, but exactly how varies from implementation to implementation, whereas <code>printf</code> is constant.</p>
</section>
<section id="answer-3-score-33" class="level4">
<h4>Answer 3 (score 33)</h4>
<div class="sourceCode" id="cb218"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb218-1" title="1"><span class="bu">echo</span> -e <span class="st">&quot;Hello \nWorld \n&quot;</span> <span class="op">&gt;&gt;</span> greetings.txt</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="where-are-apache-file-access-logs-stored-score-737619-in-2012" class="level3">
<h3>27: Where are Apache file access logs stored? (score <a href="https://stackoverflow.com/q/38978.html">737619</a> in 2012)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>Does anyone know where file access logs are stored, so I can run a <code>tail -f</code> command in order to see who is accessing a particular file.</p>
<p>I have XAMPP, which is an Apache server installed on my machine, which automatically logs the accesses. It is stored in my installation folder.</p>
</section>
<section id="answer-accepted-score-206" class="level4">
<h4>Answer accepted (score 206)</h4>
<p>Ultimately, this depends on your Apache configuration. Look for <code>CustomLog</code> directives in your Apache configuration, see the <a href="http://httpd.apache.org/docs/2.4/logs.html" rel="noreferrer">manual</a> for examples.</p>
<p>A typical location for all log files is <code>/var/log</code> and subdirectories. Try <code>/var/log/apache/access.log</code> or <code>/var/log/apache2/access.log</code> or <code>/var/log/httpd/access.log</code>. If the logs aren’t there, try running <code>locate access.log access_log</code>.</p>
</section>
<section id="answer-2-score-40" class="level4">
<h4>Answer 2 (score 40)</h4>
<p>If you can’t find the log with <a href="https://unix.stackexchange.com/a/39008/40421">Gilles’s answer</a>, there are a couple more things you can try.</p>
<ul>
<li>
Look in <code>/var/log/httpd</code>.
</li>
<li>
Run <code>sudo locate access.log</code> as well as <code>sudo locate access_log</code>. The logs on my system were not visible except to root, and the file was called <code>access_log</code> instead of <code>access.log</code>.
</li>
</ul>
</section>
<section id="answer-3-score-25-1" class="level4">
<h4>Answer 3 (score 25)</h4>
<p>Apache server records all incoming requests and all requests processed to a log file. The format of the access log is highly configurable. The location and content of the access log are controlled by the CustomLog directive. Default apache access log file location:</p>
<p>RHEL / Red Hat / CentOS / Fedora Linux Apache access file location –</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb219-1" title="1"><span class="ex">/var/log/httpd/access_log</span></a></code></pre></div>
<p>Debian / Ubuntu Linux Apache access log file location –</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb220-1" title="1"><span class="ex">/var/log/apache2/access.log</span></a></code></pre></div>
<p>FreeBSD Apache access log file location –</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb221-1" title="1"> <span class="ex">/var/log/httpd-access.log</span></a></code></pre></div>
<p>To find exact apache log file location, you can use grep command:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb222-1" title="1"><span class="co"># grep CustomLog /usr/local/etc/apache22/httpd.conf</span></a>
<a class="sourceLine" id="cb222-2" title="2"><span class="co"># grep CustomLog /etc/apache2/apache2.conf</span></a>
<a class="sourceLine" id="cb222-3" title="3"><span class="co"># grep CustomLog /etc/httpd/conf/httpd.conf</span></a></code></pre></div>
<p>Sample output:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb223-1" title="1"><span class="co"># a CustomLog directive (see below).</span></a>
<a class="sourceLine" id="cb223-2" title="2"><span class="co">#CustomLog &quot;/var/log/httpd-access.log&quot; common</span></a>
<a class="sourceLine" id="cb223-3" title="3"><span class="ex">CustomLog</span> <span class="st">&quot;/var/log/httpd-access.log&quot;</span> combined </a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-am-i-still-getting-a-password-prompt-with-ssh-with-public-key-authentication-score-718769-in-2017" class="level3">
<h3>28: Why am I still getting a password prompt with ssh with public key authentication? (score <a href="https://stackoverflow.com/q/36540.html">718769</a> in 2017)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>I’m working from the URL I found here:</p>
<p><a href="http://web.archive.org/web/20160404025901/http://jaybyjayfresh.com/2009/02/04/logging-in-without-a-password-certificates-ssh/">http://web.archive.org/web/20160404025901/http://jaybyjayfresh.com/2009/02/04/logging-in-without-a-password-certificates-ssh/</a></p>
<p>My ssh client is Ubuntu 64 bit 11.10 desktop and my server is Centos 6.2 64 bit. I have followed the directions. I still get a password prompt on ssh.</p>
<p>I’m not sure what to do next.</p>
</section>
<section id="answer-accepted-score-560" class="level4">
<h4>Answer accepted (score 560)</h4>
<p>Make sure the permissions on the <code>~/.ssh</code> directory and its contents are proper. When I first set up my ssh key auth, I didn’t have the <code>~/.ssh</code> folder properly set up, and it yelled at me.</p>
<ul>
<li>
Your home directory <code>~</code>, your <code>~/.ssh</code> directory and the <code>~/.ssh/authorized_keys</code> file on the remote machine must be writable only by you: <code>rwx------</code> and <code>rwxr-xr-x</code> are fine, but <code>rwxrwx---</code> is no good¹, even if you are the only user in your group (if you prefer numeric modes: <code>700</code> or <code>755</code>, not <code>775</code>).<br> If <code>~/.ssh</code> or <code>authorized_keys</code> is a symbolic link, <a href="https://unix.stackexchange.com/questions/152417/why-cant-i-use-public-private-key-authentication-with-ssh-on-arch-linux">the canonical path (with symbolic links expanded) is checked</a>.
</li>
<li>
Your <code>~/.ssh/authorized_keys</code> file (on the remote machine) must be readable (at least 400), but you’ll need it to be also writable (600) if you will add any more keys to it.
</li>
<li>
Your private key file (on the local machine) must be readable and writable only by you: <code>rw-------</code>, i.e. <code>600</code>.
</li>
<li>
Also, if SELinux is set to enforcing, you may need to run <code>restorecon -R -v ~/.ssh</code> (see e.g. <a href="https://bugs.launchpad.net/ubuntu/+source/openssh/+bug/965663" rel="noreferrer">Ubuntu bug 965663</a> and <a href="http://bugs.debian.org/658675" rel="noreferrer">Debian bug report #658675</a>; this is <a href="http://wiki.centos.org/Manuals/ReleaseNotes/CentOS6.2#head-652041430eedc0752937ec8252c52132e574fd2a" rel="noreferrer">patched in CentOS 6</a>).
</li>
</ul>
<p>¹ <sub> Except on some distributions (Debian and derivatives) which have patched the code to allow group writability if you are the only user in your group. </sub></p>
</section>
<section id="answer-2-score-147" class="level4">
<h4>Answer 2 (score 147)</h4>
<p>If you have root access to the server, the easy way to solve such problems is to run sshd in debug mode, by issuing something like <code>/usr/sbin/sshd -d -p 2222</code> on the server (full path to sshd executable required, <code>which sshd</code> can help) and then connecting from the client with <code>ssh -p 2222 user@host</code>. This will force the SSH daemon to stay in the foreground and display debug information about every connection. Look for something like</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb224-1" title="1"><span class="ex">debug1</span>: trying public key file /path/to/home/.ssh/authorized_keys</a>
<a class="sourceLine" id="cb224-2" title="2"><span class="ex">...</span></a>
<a class="sourceLine" id="cb224-3" title="3"><span class="ex">Authentication</span> refused: bad ownership or modes for directory /path/to/home/</a></code></pre></div>
<p>If it isn’t possible to use an alternative port, you can temporarily stop the SSH daemon and replace it with one in debug mode. Stopping the SSH daemon does not kill existing connections so it is possible to do this through a remote terminal, but somewhat risky - if the connection does get broken somehow at a time when the debug replacement is not running, you are locked out of the machine until you can restart it. The commands required:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb225-1" title="1"><span class="ex">service</span> ssh stop</a>
<a class="sourceLine" id="cb225-2" title="2"><span class="ex">/usr/sbin/sshd</span> -d</a>
<a class="sourceLine" id="cb225-3" title="3"><span class="co">#...debug output...</span></a>
<a class="sourceLine" id="cb225-4" title="4"><span class="ex">service</span> ssh start</a></code></pre></div>
<p>(Depending on your Linux distribution, first / last line might be <code>systemctl stop sshd.service</code> / <code>systemctl start sshd.service</code> instead.)</p>
</section>
<section id="answer-3-score-53" class="level4">
<h4>Answer 3 (score 53)</h4>
<p>Is your home dir encrypted? If so, for your first ssh session you will have to provide a password. The second ssh session to the same server is working with auth key. If this is the case, you could move your <code>authorized_keys</code> to an unencrypted dir and change the path in <code>~/.ssh/config</code>.</p>
<p>What I ended up doing was create a <code>/etc/ssh/username</code> folder, owned by username, with the correct permissions, and placed the <code>authorized_keys</code> file in there. Then changed the AuthorizedKeysFile directive in <code>/etc/ssh/config</code> to :</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb226-1" title="1"><span class="ex">AuthorizedKeysFile</span>    /etc/ssh/%u/authorized_keys</a></code></pre></div>
<p>This allows multiple users to have this ssh access without compromising permissions.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-empty-the-buffers-and-cache-on-a-linux-system-score-718172-in-2016" class="level3">
<h3>29: How do you empty the buffers and cache on a Linux system? (score <a href="https://stackoverflow.com/q/87908.html">718172</a> in 2016)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>Prior to doing some benchmarking work how would one free up the memory (RAM) that the Linux Kernel is consuming for its buffers and cache?</p>
<hr>
<p>Note that this is mostly useful for benchmarking. Emptying the buffers and cache <em>reduces</em> performance! If you’re here because you thought that freeing buffers and cache was a positive thing, go and read <a href="http://www.linuxatemyram.com/">Linux ate my RAM!</a>. The short story: free memory is unused memory is <em>wasted</em> memory.</p>
</section>
<section id="answer-accepted-score-494" class="level4">
<h4>Answer accepted (score 494)</h4>
<h5>
Emptying the buffers cache
</h3>
<p>If you ever want to empty it you can use this chain of commands.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb227-1" title="1"><span class="co"># free &amp;&amp; sync &amp;&amp; echo 3 &gt; /proc/sys/vm/drop_caches &amp;&amp; free</span></a>
<a class="sourceLine" id="cb227-2" title="2"></a>
<a class="sourceLine" id="cb227-3" title="3">             <span class="ex">total</span>       used       free     shared    buffers     cached</a>
<a class="sourceLine" id="cb227-4" title="4"><span class="ex">Mem</span>:       1018916     980832      38084          0      46924     355764</a>
<a class="sourceLine" id="cb227-5" title="5"><span class="ex">-/+</span> buffers/cache:     578144     440772</a>
<a class="sourceLine" id="cb227-6" title="6"><span class="ex">Swap</span>:      2064376        128    2064248</a>
<a class="sourceLine" id="cb227-7" title="7">             <span class="ex">total</span>       used       free     shared    buffers     cached</a>
<a class="sourceLine" id="cb227-8" title="8"><span class="ex">Mem</span>:       1018916     685008     333908          0        224     108252</a>
<a class="sourceLine" id="cb227-9" title="9"><span class="ex">-/+</span> buffers/cache:     576532     442384</a>
<a class="sourceLine" id="cb227-10" title="10"><span class="ex">Swap</span>:      2064376        128    2064248</a></code></pre></div>
<p>You can signal the Linux Kernel to drop various aspects of cached items by changing the numeric argument to the above command.</p>
<ul>
<li>
<p>
To free pagecache:
</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb228-1" title="1"><span class="co"># echo 1 &gt; /proc/sys/vm/drop_caches</span></a></code></pre></div>
</li>
<li>
<p>
To free dentries and inodes:
</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb229-1" title="1"><span class="co"># echo 2 &gt; /proc/sys/vm/drop_caches</span></a></code></pre></div>
</li>
<li>
<p>
To free pagecache, dentries and inodes:
</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb230-1" title="1"><span class="co"># echo 3 &gt; /proc/sys/vm/drop_caches</span></a></code></pre></div>
</li>
</ul>
<p>The above are meant to be run as root. If you’re trying to do them using <code>sudo</code> then you’ll need to change the syntax slightly to something like these:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb231-1" title="1">$ <span class="fu">sudo</span> sh -c <span class="st">&#39;echo 1 &gt;/proc/sys/vm/drop_caches&#39;</span></a>
<a class="sourceLine" id="cb231-2" title="2">$ <span class="fu">sudo</span> sh -c <span class="st">&#39;echo 2 &gt;/proc/sys/vm/drop_caches&#39;</span></a>
<a class="sourceLine" id="cb231-3" title="3">$ <span class="fu">sudo</span> sh -c <span class="st">&#39;echo 3 &gt;/proc/sys/vm/drop_caches&#39;</span></a></code></pre></div>
<p><strong>NOTE:</strong> There’s a more esoteric version of the above command if you’re into that:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb232-1" title="1">$ <span class="bu">echo</span> <span class="st">&quot;echo 1 &gt; /proc/sys/vm/drop_caches&quot;</span> <span class="kw">|</span> <span class="fu">sudo</span> sh</a></code></pre></div>
<p>Why the change in syntax? The <code>/bin/echo</code> program is running as root, because of <code>sudo</code>, but the shell that’s redirecting echo’s output to the root-only file is still running as you. Your current shell does the redirection <em>before</em> <code>sudo</code> starts.</p>
<h5>
Seeing what’s in the buffers and cache
</h3>
<p>Take a look at <a href="http://code.google.com/p/linux-ftools/"><code>linux-ftools</code></a> if you’d like to analyze the contents of the buffers &amp; cache. Specifically if you’d like to see what files are currently being cached.</p>
<h5>
fincore
</h3>
<p>With this tool you can see what files are being cached within a give directory.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb233-1" title="1"><span class="ex">fincore</span> [options] files...</a>
<a class="sourceLine" id="cb233-2" title="2"></a>
<a class="sourceLine" id="cb233-3" title="3">  <span class="ex">--pages</span>=false      Do not print pages</a>
<a class="sourceLine" id="cb233-4" title="4">  <span class="ex">--summarize</span>        When comparing multiple files, print a summary report</a>
<a class="sourceLine" id="cb233-5" title="5">  <span class="ex">--only-cached</span>      Only print stats for files that are actually in cache.</a></code></pre></div>
<p>For example, <code>/var/lib/mysql/blogindex</code>:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb234-1" title="1"><span class="ex">root@xxxxxx</span>:/var/lib/mysql/blogindex# fincore --pages=false --summarize --only-cached * </a>
<a class="sourceLine" id="cb234-2" title="2"><span class="ex">stats</span> for CLUSTER_LOG_2010_05_21.MYI: file size=93840384 , total pages=22910 , cached pages=1 , cached size=4096, cached perc=0.004365 </a>
<a class="sourceLine" id="cb234-3" title="3"><span class="ex">stats</span> for CLUSTER_LOG_2010_05_22.MYI: file size=417792 , total pages=102 , cached pages=1 , cached size=4096, cached perc=0.980392 </a>
<a class="sourceLine" id="cb234-4" title="4"><span class="ex">stats</span> for CLUSTER_LOG_2010_05_23.MYI: file size=826368 , total pages=201 , cached pages=1 , cached size=4096, cached perc=0.497512 </a>
<a class="sourceLine" id="cb234-5" title="5"><span class="ex">stats</span> for CLUSTER_LOG_2010_05_24.MYI: file size=192512 , total pages=47 , cached pages=1 , cached size=4096, cached perc=2.127660 </a>
<a class="sourceLine" id="cb234-6" title="6"><span class="ex">stats</span> for CLUSTER_LOG_2010_06_03.MYI: file size=345088 , total pages=84 , cached pages=43 , cached size=176128, cached perc=51.190476 </a>
<a class="sourceLine" id="cb234-7" title="7"><span class="ex">stats</span> for CLUSTER_LOG_2010_06_04.MYD: file size=1478552 , total pages=360 , cached pages=97 , cached size=397312, cached perc=26.944444 </a>
<a class="sourceLine" id="cb234-8" title="8"><span class="ex">stats</span> for CLUSTER_LOG_2010_06_04.MYI: file size=205824 , total pages=50 , cached pages=29 , cached size=118784, cached perc=58.000000 </a>
<a class="sourceLine" id="cb234-9" title="9"><span class="ex">stats</span> for COMMENT_CONTENT_2010_06_03.MYI: file size=100051968 , total pages=24426 , cached pages=10253 , cached size=41996288, cached perc=41.975764 </a>
<a class="sourceLine" id="cb234-10" title="10"><span class="ex">stats</span> for COMMENT_CONTENT_2010_06_04.MYD: file size=716369644 , total pages=174894 , cached pages=79821 , cached size=326946816, cached perc=45.639645 </a>
<a class="sourceLine" id="cb234-11" title="11"><span class="ex">stats</span> for COMMENT_CONTENT_2010_06_04.MYI: file size=56832000 , total pages=13875 , cached pages=5365 , cached size=21975040, cached perc=38.666667 </a>
<a class="sourceLine" id="cb234-12" title="12"><span class="ex">stats</span> for FEED_CONTENT_2010_06_03.MYI: file size=1001518080 , total pages=244511 , cached pages=98975 , cached size=405401600, cached perc=40.478751 </a>
<a class="sourceLine" id="cb234-13" title="13"><span class="ex">stats</span> for FEED_CONTENT_2010_06_04.MYD: file size=9206385684 , total pages=2247652 , cached pages=1018661 , cached size=4172435456, cached perc=45.321117 </a>
<a class="sourceLine" id="cb234-14" title="14"><span class="ex">stats</span> for FEED_CONTENT_2010_06_04.MYI: file size=638005248 , total pages=155763 , cached pages=52912 , cached size=216727552, cached perc=33.969556 </a>
<a class="sourceLine" id="cb234-15" title="15"><span class="ex">stats</span> for FEED_CONTENT_2010_06_04.frm: file size=9840 , total pages=2 , cached pages=3 , cached size=12288, cached perc=150.000000 </a>
<a class="sourceLine" id="cb234-16" title="16"><span class="ex">stats</span> for PERMALINK_CONTENT_2010_06_03.MYI: file size=1035290624 , total pages=252756 , cached pages=108563 , cached size=444674048, cached perc=42.951700 </a>
<a class="sourceLine" id="cb234-17" title="17"><span class="ex">stats</span> for PERMALINK_CONTENT_2010_06_04.MYD: file size=55619712720 , total pages=13579031 , cached pages=6590322 , cached size=26993958912, cached perc=48.533080 </a>
<a class="sourceLine" id="cb234-18" title="18"><span class="ex">stats</span> for PERMALINK_CONTENT_2010_06_04.MYI: file size=659397632 , total pages=160985 , cached pages=54304 , cached size=222429184, cached perc=33.732335 </a>
<a class="sourceLine" id="cb234-19" title="19"><span class="ex">stats</span> for PERMALINK_CONTENT_2010_06_04.frm: file size=10156 , total pages=2 , cached pages=3 , cached size=12288, cached perc=150.000000 </a>
<a class="sourceLine" id="cb234-20" title="20"><span class="ex">---</span></a>
<a class="sourceLine" id="cb234-21" title="21"><span class="ex">total</span> cached size: 32847278080</a></code></pre></div>
<p>With the above output you can see that there are several <em>.MYD, </em>.MYI, and *.frm files that are currently being cached.</p>
<h5>
Swap
</h3>
<p>If you want to clear out your swap you can use the following commands.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb235-1" title="1">$ <span class="fu">free</span></a>
<a class="sourceLine" id="cb235-2" title="2">             <span class="ex">total</span>       used       free     shared    buffers     cached</a>
<a class="sourceLine" id="cb235-3" title="3"><span class="ex">Mem</span>:       7987492    7298164     689328          0      30416     457936</a>
<a class="sourceLine" id="cb235-4" title="4"><span class="ex">-/+</span> buffers/cache:    6809812    1177680</a>
<a class="sourceLine" id="cb235-5" title="5"><span class="ex">Swap</span>:      5963772     609452    5354320</a></code></pre></div>
<p>Then use this command to disable swap:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb236-1" title="1">$ <span class="ex">swapoff</span> -a</a></code></pre></div>
<p>You can confirm that it’s now empty:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb237-1" title="1">$ <span class="fu">free</span></a>
<a class="sourceLine" id="cb237-2" title="2">             <span class="ex">total</span>       used       free     shared    buffers     cached</a>
<a class="sourceLine" id="cb237-3" title="3"><span class="ex">Mem</span>:       7987492    7777912     209580          0      39332     489864</a>
<a class="sourceLine" id="cb237-4" title="4"><span class="ex">-/+</span> buffers/cache:    7248716     738776</a>
<a class="sourceLine" id="cb237-5" title="5"><span class="ex">Swap</span>:            0          0          0</a></code></pre></div>
<p>And to re-enable it:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb238-1" title="1">$ <span class="ex">swapon</span> -a</a></code></pre></div>
<p>And now reconfirm with <code>free</code>:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb239-1" title="1">$ <span class="fu">free</span></a>
<a class="sourceLine" id="cb239-2" title="2">             <span class="ex">total</span>       used       free     shared    buffers     cached</a>
<a class="sourceLine" id="cb239-3" title="3"><span class="ex">Mem</span>:       7987492    7785572     201920          0      41556     491508</a>
<a class="sourceLine" id="cb239-4" title="4"><span class="ex">-/+</span> buffers/cache:    7252508     734984</a>
<a class="sourceLine" id="cb239-5" title="5"><span class="ex">Swap</span>:      5963772          0    5963772</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-display-the-contents-of-a-text-file-on-the-command-line-score-705890-in-2016" class="level3">
<h3>30: How can I display the contents of a text file on the command line? (score <a href="https://stackoverflow.com/q/86321.html">705890</a> in 2016)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>I would like to display the contents of a text file on the command line. The file only contains 5-6 characters. Is there an easy way to do this?</p>
</section>
<section id="answer-accepted-score-196" class="level4">
<h4>Answer accepted (score 196)</h4>
<h5>
Using <code>cat</code>
</h3>
<p>
Since your file is short, you can use <a href="http://en.wikipedia.org/wiki/Cat_%28Unix%29"><code>cat</code></a>.
</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb240-1" title="1"><span class="fu">cat</span> filename</a></code></pre></div>
<h5>
Using <code>less</code>
</h3>
<p>
If you have to view the contents of a longer file, you can use a pager such as <a href="http://en.wikipedia.org/wiki/Less_%28Unix%29"><code>less</code></a>.
</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb241-1" title="1"><span class="fu">less</span> filename</a></code></pre></div>
<p>
You can make <code>less</code> behave like <code>cat</code> when invoked on small files and behave normally otherwise by passing it the <code>-F</code> and <code>-X</code> flags.
</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb242-1" title="1"><span class="fu">less</span> -FX filename</a></code></pre></div>
<p>I have an alias for <code>less -FX</code>. You can make one yourself like so:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb243-1" title="1"><span class="bu">alias</span> aliasname=<span class="st">&#39;less -FX&#39;</span></a></code></pre></div>
<p>
If you add the alias to your <a href="http://hacktux.com/bash/bashrc/bash_profile">shell configuration</a>, you can use it forever.
</p>
<h5>
Using <code>od</code>
</h3>
<p>
If your file contains strange or unprintable characters, you can use <a href="http://linux.die.net/man/1/od"><code>od</code></a> to examine the characters. For example,
</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb244-1" title="1">$ <span class="fu">cat</span> file</a>
<a class="sourceLine" id="cb244-2" title="2"><span class="kw">(</span>Ð<span class="ex">Z4</span> ?o=÷jï</a>
<a class="sourceLine" id="cb244-3" title="3">$ <span class="fu">od</span> -c test</a>
<a class="sourceLine" id="cb244-4" title="4"><span class="ex">0000000</span> 202 233   ( 320   K   j 357 024   J 017   h   Z   4 240   ?   o</a>
<a class="sourceLine" id="cb244-5" title="5"><span class="ex">0000020</span>   = 367  \n</a>
<a class="sourceLine" id="cb244-6" title="6"><span class="ex">0000023</span></a></code></pre></div>
</section>
<section id="answer-2-score-29" class="level4">
<h4>Answer 2 (score 29)</h4>
<p>
Even though everybody uses <code>cat filename</code> to print a files text to the standard output first purpose is con<strong>cat</strong>enating. From cat’s man page:
</p>
<blockquote>
cat - concatenate files and print on the standard output
</blockquote>
<p>Now cat is fine for printing files but there are alternatives:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb245-1" title="1">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="op">$(&lt;</span>filename<span class="op">)</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb245-2" title="2"><span class="ex">or</span></a>
<a class="sourceLine" id="cb245-3" title="3">  <span class="bu">printf</span> <span class="st">&quot;%s&quot;</span> <span class="st">&quot;</span><span class="op">$(&lt;</span>filename<span class="op">)</span><span class="st">&quot;</span></a></code></pre></div>
<p>The <code>( )</code> return the value of an expression, in this case the content of <em>filename</em> which then is expanded by <code>$</code> for <code>echo</code> or <code>printf</code>.</p>
<p>Update:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb246-1" title="1"><span class="op">&lt;</span> <span class="ex">filename</span></a></code></pre></div>
<p>This does exactly what you want and is easy to remember.</p>
<p>Here is an example that lets you select a file in a menu and then prints it.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb247-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb247-2" title="2"></a>
<a class="sourceLine" id="cb247-3" title="3"><span class="kw">select</span> <span class="ex">fname</span> in *<span class="kw">;</span></a>
<a class="sourceLine" id="cb247-4" title="4"><span class="kw">do</span></a>
<a class="sourceLine" id="cb247-5" title="5"><span class="co"># Don&#39;t forget the &quot;&quot; around the second part, else newlines won&#39;t be printed</span></a>
<a class="sourceLine" id="cb247-6" title="6">  <span class="bu">printf</span> <span class="st">&quot;%s&quot;</span> <span class="st">&quot;</span><span class="op">$(&lt;</span><span class="va">$fname</span><span class="op">)</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb247-7" title="7">  <span class="bu">break</span></a>
<a class="sourceLine" id="cb247-8" title="8"><span class="kw">done</span></a></code></pre></div>
<p>
For further reading:<br> <a href="http://mywiki.wooledge.org/BashPitfalls#cat_file_.7C_sed_s.2Ffoo.2Fbar.2F_.3E_file" rel="noreferrer">BashPitfalls - cat file | sed s/foo/bar/ &gt; file</a><br> <a href="https://www.gnu.org/software/bash/manual/bashref.html#Redirections" rel="noreferrer">Bash Reference - Redirecting</a>
</p>
</section>
<section id="answer-3-score-9" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>Tools for handling text files on unix are basic, everyday-commands:</p>
<p>In unix and linux to print out whole content in file</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb248-1" title="1"><span class="fu">cat</span> filename.txt</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb249-1" title="1"><span class="fu">more</span> filename.txt</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb250-1" title="1"><span class="fu">less</span> filename.txt</a></code></pre></div>
<p>For last few lines</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb251-1" title="1"><span class="fu">tail</span> filename.txt</a></code></pre></div>
<p>For first few lines</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb252-1" title="1"><span class="fu">head</span> filename.txt</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-mount-a-device-in-linux-score-697966-in-2015" class="level3">
<h3>31: How to mount a device in Linux? (score <a href="https://stackoverflow.com/q/18925.html">697966</a> in 2015)</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>I read some resources about the mount command for mounting devices on Linux, but none of them is clear enough (at least for me).</p>
<p>On the whole this what most guides state:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb253-1" title="1">$ <span class="ex">mount</span></a>
<a class="sourceLine" id="cb253-2" title="2"><span class="kw">(</span><span class="ex">lists</span> all currently mounted devices<span class="kw">)</span></a>
<a class="sourceLine" id="cb253-3" title="3"></a>
<a class="sourceLine" id="cb253-4" title="4">$ <span class="ex">mount</span> -t type device directory</a>
<a class="sourceLine" id="cb253-5" title="5"><span class="kw">(</span><span class="ex">mounts</span> that device<span class="kw">)</span></a>
<a class="sourceLine" id="cb253-6" title="6"></a>
<a class="sourceLine" id="cb253-7" title="7"><span class="kw">for</span> <span class="ex">example</span> (to mount a USB drive)<span class="bu">:</span></a>
<a class="sourceLine" id="cb253-8" title="8">$ <span class="ex">mount</span> -t vfat /dev/sdb1 /media/disk</a></code></pre></div>
<p>What’s not clear to me:</p>
<ul>
<li>
<p>
How do I know what to use for “device” as in <code>$ mount -t type device directory</code>? That is, how do I know that I should use “/dev/sdb1” in this command <code>$ mount -t vfat /dev/sdb1 /media/disk</code> to mount my USB drive?
</p>
</li>
<li>
<p>
what does the “-t” parameter define here? type?
</p>
</li>
</ul>
<p>I read the man page (<code>$ man mount</code>) a couple of times, but I am still probably missing something. Please clarify.</p>
</section>
<section id="answer-accepted-score-81" class="level4">
<h4>Answer accepted (score 81)</h4>
<p>You can use fdisk to have an idea of what kind of partitions you have, for example:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb254-1" title="1"><span class="ex">fdisk</span> -l</a></code></pre></div>
<p>Shows:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb255-1" title="1">   <span class="ex">Device</span> Boot      Start         End      Blocks   Id  System</a>
<a class="sourceLine" id="cb255-2" title="2"><span class="ex">/dev/sda1</span>   *          63   204796619   102398278+   7  HPFS/NTFS</a>
<a class="sourceLine" id="cb255-3" title="3"><span class="ex">/dev/sda2</span>       204797952   205821951      512000   83  Linux</a>
<a class="sourceLine" id="cb255-4" title="4"><span class="ex">/dev/sda3</span>       205821952   976773119   385475584   8e  Linux LVM</a></code></pre></div>
<p>That way you know that you have sda1,2 and 3 partitions. The -t option is the filesystem type; it can be NTFS, FAT, EXT. In my example, sda1 is ntfs, so it should be something like:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb256-1" title="1"><span class="fu">mount</span> -t ntfs /dev/sda1  /mnt/</a></code></pre></div>
<p>USB devices are usually vfat and Linux are usually ext.</p>
</section>
<section id="answer-2-score-17" class="level4">
<h4>Answer 2 (score 17)</h4>
<p>I was really rusty on this, and then it started coming back.. if this doesn’t answer your question, maybe I misread it…</p>
<p>Alibi: this is on an Ubuntu 14 release. Your mileage may vary.</p>
<p>
I use <code>lsblk</code> to get my mount points, which is different from <code>mount</code> For me <code>lsblk</code> is easier to read than <code>mount</code>
</p>
<p>Make sure that you have a directory created before you go to mount your device.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb257-1" title="1"><span class="fu">sudo</span> mkdir /{your directory name here}</a>
<a class="sourceLine" id="cb257-2" title="2"><span class="fu">sudo</span> mount /dev/{specific device id} /{<span class="ex">your</span> directory name here that is already created}</a></code></pre></div>
<p>You should be good to go, however check security permissions on that new directory to make sure it’s what you want.</p>
</section>
<section id="answer-3-score-7" class="level4">
<h4>Answer 3 (score 7)</h4>
<p>These days, you can use the verbose paths to mount a specific device.</p>
<p>For example:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb258-1" title="1"><span class="fu">mount</span> /dev/disk/by-id/ata-ST31500341AS_9VS2AM04-part1 /some/dir</a>
<a class="sourceLine" id="cb258-2" title="2"><span class="fu">mount</span> /dev/disk/by-id/usb-HTC_Android_Phone_SH0BTRX01208-0\:0 /some/dir</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-dns-servers-am-i-using-score-689495-in-2014" class="level3">
<h3>32: What DNS servers am I using? (score <a href="https://stackoverflow.com/q/28941.html">689495</a> in 2014)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>How can I check which DNS server am I using (in Linux)? I am using network manager and a wired connection to my university’s LAN. (I am trying to find out why my domain doesn’t get resolved)</p>
</section>
<section id="answer-accepted-score-210" class="level4">
<h4>Answer accepted (score 210)</h4>
<p>You should be able to get some reasonable information in:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb259-1" title="1">$ <span class="fu">cat</span> /etc/resolv.conf </a></code></pre></div>
</section>
<section id="answer-2-score-196" class="level4">
<h4>Answer 2 (score 196)</h4>
<p>Here’s how I do it:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb260-1" title="1"><span class="ex">nmcli</span> dev show <span class="kw">|</span> <span class="fu">grep</span> DNS</a></code></pre></div>
<p>This <a href="https://askubuntu.com/questions/617067/why-nm-tool-is-no-longer-available-in-ubuntu-15-04">worked previous</a> to the way above:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb261-1" title="1"><span class="ex">nm-tool</span> <span class="kw">|</span> <span class="fu">grep</span> DNS</a></code></pre></div>
</section>
<section id="answer-3-score-73" class="level4">
<h4>Answer 3 (score 73)</h4>
<p>I think you can also query DNS and it will show you what server returned the result. Try this:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb262-1" title="1"><span class="ex">dig</span> yourserver.somedomain.xyz</a></code></pre></div>
<p>And the response should tell you what server(s) returned the result. The output you’re interested in will look something like this:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb263-1" title="1">;; <span class="ex">Query</span> time: 91 msec</a>
<a class="sourceLine" id="cb263-2" title="2">;; <span class="ex">SERVER</span>: 172.xxx.xxx.xxx#53(172.xxx.xxx.xxx)</a>
<a class="sourceLine" id="cb263-3" title="3">;; <span class="ex">WHEN</span>: Tue Apr 02 09:03:41 EDT 2019</a>
<a class="sourceLine" id="cb263-4" title="4">;; <span class="ex">MSG</span> SIZE  rcvd: 207</a></code></pre></div>
<p>You can also tell <code>dig</code> to query a specific DNS server by using <code>dig @server_ip</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="colorizing-your-terminal-and-shell-environment-score-674432-in-2019" class="level3">
<h3>33: Colorizing your terminal and shell environment? (score <a href="https://stackoverflow.com/q/148.html">674432</a> in 2019)</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>I spend most of my time working in Unix environments and using terminal emulators. I try to use color on the command line, because color makes the output more useful and intuitive.</p>
<p>What options exist to add color to my terminal environment? What tricks do you use? What pitfalls have you encountered?</p>
<p>Unfortunately, support for color varies depending on terminal type, OS, TERM setting, utility, buggy implementations, etc.</p>
<p>Here are some tips from my setup, after a lot of experimentation:</p>
<ol>
<li>
I tend to set <code>TERM=xterm-color</code>, which is supported on most hosts (but not all).
</li>
<li>
I work on a number of different hosts, different OS versions, etc. I use everything from macOS X, Ubuntu Linux, RHEL/CentOS/Scientific Linux and FreeBSD. I’m trying to keep things simple and generic, if possible.
</li>
<li>
I do a bunch of work using GNU <code>screen</code>, which adds another layer of fun.
</li>
<li>
Many OSs set things like <code>dircolors</code> and by default, and I don’t want to modify this on a hundred different hosts. So I try to stick with the defaults. Instead, I tweak my terminal’s color configuration.
</li>
<li>
<p>
Use color for some <a href="http://www.debian.org/doc/manuals/reference/ch09.en.html#_colorized_commands" rel="noreferrer">Unix commands</a> (<code>ls</code>, <code>grep</code>, <code>less</code>, <code>vim</code>) and the <a href="http://www.cyberciti.biz/faq/bash-shell-change-the-color-of-my-shell-prompt-under-linux-or-unix/" rel="noreferrer">Bash prompt</a>. These commands seem to use the standard “<a href="http://en.wikipedia.org/wiki/ANSI_escape_code" rel="noreferrer">ANSI escape sequences</a>”. For example:
</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb264-1" title="1"><span class="bu">alias</span> less=<span class="st">&#39;less --RAW-CONTROL-CHARS&#39;</span></a>
<a class="sourceLine" id="cb264-2" title="2"><span class="bu">export</span> <span class="va">LS_OPTS=</span><span class="st">&#39;--color=auto&#39;</span></a>
<a class="sourceLine" id="cb264-3" title="3"><span class="bu">alias</span> ls=<span class="st">&#39;ls ${LS_OPTS}&#39;</span></a></code></pre></div>
</li>
</ol>
<p>I’ll post my <code>.bashrc</code> and answer my own question Jeopardy Style.</p>
</section>
<section id="answer-accepted-score-121" class="level4">
<h4>Answer accepted (score 121)</h4>
<p>Here are a couple of things you can do:</p>
<p>
<strong>Editors + Code</strong><br> A lot of editors have syntax highlighting support. <code>vim</code> and <code>emacs</code> have it on by default. You can also <a href="https://askubuntu.com/questions/90013/how-do-i-enable-syntax-highlighting-in-nano">enable it under <code>nano</code></a>.
</p>
<p>You can also syntax highlight code on the terminal by using <a href="http://pygments.org/faq/#how-can-i-use-pygments" rel="noreferrer">Pygments</a> as a command-line tool.</p>
<p>
<strong>grep</strong><br> <code>grep --color=auto</code> highlights all matches. You can also use <code>export GREP_OPTIONS='--color=auto'</code> to make it persistent without an alias. If you use <code>--color=always</code>, it’ll <a href="http://linuxcommando.blogspot.com/2007/10/grep-with-color-output.html" rel="noreferrer">use colour even when piping</a>, which confuses things.
</p>
<p><strong>ls</strong></p>
<p><code>ls --color=always</code></p>
<p>Colors specified by:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb265-1" title="1"><span class="bu">export</span> <span class="va">LS_COLORS=</span><span class="st">&#39;rs=0:di=01;34:ln=01;36:mh=00:pi=40;33&#39;</span></a></code></pre></div>
<p>(hint: <code>dircolors</code> can be helpful)</p>
<p>
<strong>PS1</strong><br> You can set your PS1 (shell prompt) to use colours. For example:
</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb266-1" title="1"><span class="va">PS1=</span><span class="st">&#39;\e[33;1m\\u@\h: \e[31m\W\e[0m\$ &#39;</span></a></code></pre></div>
<p>Will produce a PS1 like:</p>
<p>[yellow]lucas@ubuntu: [red]~[normal]$</p>
<p>You can get really creative with this. As an idea:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb267-1" title="1"><span class="va">PS1=</span><span class="st">&#39;\e[s\e[0;0H\e[1;33m\h    \t\n\e[1;32mThis is my computer\e[u[\\u@\h:  \w]\$ &#39;</span></a></code></pre></div>
<p>Puts a bar at the top of your terminal with some random info. (For best results, also use <code>alias clear=&quot;echo -e '\e[2J\n\n'&quot;</code>.)</p>
<p><strong>Getting Rid of Escape Sequences</strong></p>
<p>If something is stuck outputting colour when you don’t want it to, I use this <code>sed</code> line to strip the escape sequences:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb268-1" title="1"><span class="fu">sed</span> <span class="st">&quot;s/\[^[[0-9;]*[a-zA-Z]//gi&quot;</span></a></code></pre></div>
<p>If you want a more authentic experience, you can also get rid of lines starting with <code>\e[8m</code>, which instructs the terminal to hide the text. (Not widely supported.)</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb269-1" title="1"><span class="fu">sed</span> <span class="st">&quot;s/^\[^[8m.*$//gi&quot;</span></a></code></pre></div>
<p>Also note that those <code>^[s</code> should be actual, literal <code>^[s</code>. You can type them by pressing <code>^V^[</code> in bash, that is <kbd>Ctrl</kbd> + <kbd>V</kbd>, <kbd>Ctrl</kbd> + <kbd>[</kbd>.</p>
</section>
<section id="answer-2-score-83" class="level4">
<h4>Answer 2 (score 83)</h4>
<p>I also use:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb270-1" title="1"><span class="bu">export</span> <span class="va">TERM=</span>xterm-color</a>
<a class="sourceLine" id="cb270-2" title="2"><span class="bu">export</span> <span class="va">GREP_OPTIONS=</span><span class="st">&#39;--color=auto&#39;</span> <span class="va">GREP_COLOR=</span><span class="st">&#39;1;32&#39;</span></a>
<a class="sourceLine" id="cb270-3" title="3"><span class="bu">export</span> <span class="va">CLICOLOR=</span>1</a>
<a class="sourceLine" id="cb270-4" title="4"><span class="bu">export</span> <span class="va">LSCOLORS=</span>ExFxCxDxBxegedabagacad</a></code></pre></div>
<p>And if you like colorizing your prompt, defined color vars can be useful:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb271-1" title="1"><span class="bu">export</span> <span class="va">COLOR_NC=</span><span class="st">&#39;\e[0m&#39;</span> <span class="co"># No Color</span></a>
<a class="sourceLine" id="cb271-2" title="2"><span class="bu">export</span> <span class="va">COLOR_WHITE=</span><span class="st">&#39;\e[1;37m&#39;</span></a>
<a class="sourceLine" id="cb271-3" title="3"><span class="bu">export</span> <span class="va">COLOR_BLACK=</span><span class="st">&#39;\e[0;30m&#39;</span></a>
<a class="sourceLine" id="cb271-4" title="4"><span class="bu">export</span> <span class="va">COLOR_BLUE=</span><span class="st">&#39;\e[0;34m&#39;</span></a>
<a class="sourceLine" id="cb271-5" title="5"><span class="bu">export</span> <span class="va">COLOR_LIGHT_BLUE=</span><span class="st">&#39;\e[1;34m&#39;</span></a>
<a class="sourceLine" id="cb271-6" title="6"><span class="bu">export</span> <span class="va">COLOR_GREEN=</span><span class="st">&#39;\e[0;32m&#39;</span></a>
<a class="sourceLine" id="cb271-7" title="7"><span class="bu">export</span> <span class="va">COLOR_LIGHT_GREEN=</span><span class="st">&#39;\e[1;32m&#39;</span></a>
<a class="sourceLine" id="cb271-8" title="8"><span class="bu">export</span> <span class="va">COLOR_CYAN=</span><span class="st">&#39;\e[0;36m&#39;</span></a>
<a class="sourceLine" id="cb271-9" title="9"><span class="bu">export</span> <span class="va">COLOR_LIGHT_CYAN=</span><span class="st">&#39;\e[1;36m&#39;</span></a>
<a class="sourceLine" id="cb271-10" title="10"><span class="bu">export</span> <span class="va">COLOR_RED=</span><span class="st">&#39;\e[0;31m&#39;</span></a>
<a class="sourceLine" id="cb271-11" title="11"><span class="bu">export</span> <span class="va">COLOR_LIGHT_RED=</span><span class="st">&#39;\e[1;31m&#39;</span></a>
<a class="sourceLine" id="cb271-12" title="12"><span class="bu">export</span> <span class="va">COLOR_PURPLE=</span><span class="st">&#39;\e[0;35m&#39;</span></a>
<a class="sourceLine" id="cb271-13" title="13"><span class="bu">export</span> <span class="va">COLOR_LIGHT_PURPLE=</span><span class="st">&#39;\e[1;35m&#39;</span></a>
<a class="sourceLine" id="cb271-14" title="14"><span class="bu">export</span> <span class="va">COLOR_BROWN=</span><span class="st">&#39;\e[0;33m&#39;</span></a>
<a class="sourceLine" id="cb271-15" title="15"><span class="bu">export</span> <span class="va">COLOR_YELLOW=</span><span class="st">&#39;\e[1;33m&#39;</span></a>
<a class="sourceLine" id="cb271-16" title="16"><span class="bu">export</span> <span class="va">COLOR_GRAY=</span><span class="st">&#39;\e[0;30m&#39;</span></a>
<a class="sourceLine" id="cb271-17" title="17"><span class="bu">export</span> <span class="va">COLOR_LIGHT_GRAY=</span><span class="st">&#39;\e[0;37m&#39;</span></a></code></pre></div>
<p>And then my prompt is something like this:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb272-1" title="1"><span class="kw">case</span> <span class="va">$TERM</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb272-2" title="2">     xterm*<span class="kw">|</span>rxvt*<span class="kw">)</span></a>
<a class="sourceLine" id="cb272-3" title="3">         <span class="bu">local</span> <span class="va">TITLEBAR=</span><span class="st">&#39;\[\033]0;\\u ${NEW_PWD}\007\]&#39;</span></a>
<a class="sourceLine" id="cb272-4" title="4">          <span class="kw">;;</span></a>
<a class="sourceLine" id="cb272-5" title="5">     *<span class="kw">)</span></a>
<a class="sourceLine" id="cb272-6" title="6">         <span class="bu">local</span> <span class="va">TITLEBAR=</span><span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb272-7" title="7">          <span class="kw">;;</span></a>
<a class="sourceLine" id="cb272-8" title="8">    <span class="kw">esac</span></a>
<a class="sourceLine" id="cb272-9" title="9"></a>
<a class="sourceLine" id="cb272-10" title="10"><span class="bu">local</span> <span class="va">UC=$COLOR_WHITE</span>               <span class="co"># user&#39;s color</span></a>
<a class="sourceLine" id="cb272-11" title="11"><span class="bu">[</span> <span class="va">$UID</span> <span class="ot">-eq</span> <span class="st">&quot;0&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="va">UC=$COLOR_RED</span>   <span class="co"># root&#39;s color</span></a>
<a class="sourceLine" id="cb272-12" title="12"></a>
<a class="sourceLine" id="cb272-13" title="13"><span class="va">PS1=</span><span class="st">&quot;</span><span class="va">$TITLEBAR</span><span class="st">\n\[</span><span class="va">${UC}</span><span class="st">\]</span><span class="dt">\\</span><span class="st">u \[</span><span class="va">${COLOR_LIGHT_BLUE}</span><span class="st">\]</span><span class="dt">\$</span><span class="st">{PWD} \[</span><span class="va">${COLOR_BLACK}</span><span class="st">\]</span><span class="dt">\$</span><span class="st">(vcprompt) \n\[</span><span class="va">${COLOR_LIGHT_GREEN}</span><span class="st">\]→\[</span><span class="va">${COLOR_NC}</span><span class="st">\] &quot;</span>  </a></code></pre></div>
<p>$(vcprompt) is calling a python script in my ~/sbin which prints version control information about the current path. It includes support for Mercurial, Git, Svn, Cvs, etc. The author of the script has the <a href="https://gist.github.com/kriswill/83c1aad72b961632866fc012f2578dea" rel="noreferrer">source here</a>.</p>
<p><a href="https://i.stack.imgur.com/VKTpL.png" rel="noreferrer"><img src="https://i.stack.imgur.com/VKTpL.png" alt="Bash prompt screenshot"></a></p>
<p>This is the <a href="https://github.com/kriswill/dotfiles/blob/master/bash/prompt" rel="noreferrer">full source</a> of my prompt configuration:</p>
</section>
<section id="answer-3-score-18-1" class="level4">
<h4>Answer 3 (score 18)</h4>
<p><code>grep</code> and <code>ls</code> have already been mentioned, if you want a lot more colors check out <a href="http://korpus.juls.savba.sk/~garabik/software/grc.html">Generic Coloriser</a>, its initial purpose was to colorize logfiles, but right out of the box it also colorizes <code>ping</code>, <code>traceroute</code>, <code>gcc</code>, <code>make</code>, <code>netstat</code>, <code>diff</code>, <code>last</code>, <code>ldap</code>, and <code>cvs</code>.</p>
<p>It’s easily extended if you know regexes. I’ve added <code>ps</code> and <code>nmap</code> to the list (if you get into <code>grc</code> I’ll be more than glad to share the .conf files for those two tools)</p>
<p>(Btw, to install it via <code>synaptic</code>, <code>pacman</code>, and alike you might have better luck searching for “grc”)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-over-device-or-resource-busy-score-672304-in-2016" class="level3">
<h3>34: How to get over “device or resource busy”? (score <a href="https://stackoverflow.com/q/11238.html">672304</a> in 2016)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>I tried to <code>rm -rf</code> a folder, and got “device or resource busy”.</p>
<p>In Windows, I would have used LockHunter to resolve this. What’s the linux equivalent? (Please give as answer a simple “unlock this” method, and not complete articles like <a href="http://www.innovationsts.com/blog/?p=658">this one</a>. Although they’re useful, I’m currently interested in just ASimpleMethodThatWorks™)</p>
</section>
<section id="answer-accepted-score-232" class="level4">
<h4>Answer accepted (score 232)</h4>
<p>The tool you want is <code>lsof</code>, which stands for <em>list open files</em>.</p>
<p>It has a lot of options, so check the man page, but if you want to see all open files under a directory:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb273-1" title="1"><span class="ex">lsof</span> +D /path</a></code></pre></div>
<p>That will recurse through the filesystem under <code>/path</code>, so beware doing it on large directory trees.</p>
<p>Once you know which processes have files open, you can exit those apps, or kill them with the <code>kill(1)</code> command.</p>
</section>
<section id="answer-2-score-108" class="level4">
<h4>Answer 2 (score 108)</h4>
<p>sometimes it’s the result of mounting issues, so I’d unmount the filesystem or directory you’re trying to remove:</p>
<blockquote>
umount /path
</blockquote>
</section>
<section id="answer-3-score-14" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>I use <code>fuser</code> for this kind of thing. It will list which process is using a file or files within a mount.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-monitor-disk-io-score-655850-in-2012" class="level3">
<h3>35: How can I monitor disk io? (score <a href="https://stackoverflow.com/q/55212.html">655850</a> in 2012)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>I’d like to do some general disk io monitoring on a debian linux server. What are the tools I should know about that monitor disk io so I can see if a disk’s performance is maxed out or spikes at certain time throughout the day?</p>
</section>
<section id="answer-accepted-score-228" class="level4">
<h4>Answer accepted (score 228)</h4>
<p>For disk I/O trending there are a few options. My personal favorite is the <code>sar</code> command from <code>sysstat</code>. By default, it gives output like this:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb274-1" title="1"><span class="ex">09</span>:25:01 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle</a>
<a class="sourceLine" id="cb274-2" title="2"><span class="ex">09</span>:35:01 AM     all      0.11      0.00      0.01      0.00      0.00     99.88</a>
<a class="sourceLine" id="cb274-3" title="3"><span class="ex">09</span>:45:01 AM     all      0.12      0.00      0.01      0.00      0.00     99.86</a>
<a class="sourceLine" id="cb274-4" title="4"><span class="ex">09</span>:55:01 AM     all      0.09      0.00      0.01      0.00      0.00     99.90</a>
<a class="sourceLine" id="cb274-5" title="5"><span class="ex">10</span>:05:01 AM     all      0.10      0.00      0.01      0.02      0.01     99.86</a>
<a class="sourceLine" id="cb274-6" title="6"><span class="ex">Average</span>:        all      0.19      0.00      0.02      0.00      0.01     99.78</a></code></pre></div>
<p>The <code>%iowait</code> is the time spent waiting on I/O. Using the Debian package, you must enable the stat collector via the <code>/etc/default/sysstat</code> config file after package installation.</p>
<p>To see current utilization broken out by device, you can use the <code>iostat</code> command, also from the sysstat package:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb275-1" title="1">$ <span class="ex">iostat</span> -x 1</a>
<a class="sourceLine" id="cb275-2" title="2"><span class="ex">Linux</span> 3.5.2-x86_64-linode26 (linode)    <span class="ex">11/08/2012</span>      _x86_64_        (4 CPU)</a>
<a class="sourceLine" id="cb275-3" title="3"></a>
<a class="sourceLine" id="cb275-4" title="4"><span class="ex">avg-cpu</span>:  %user   %nice %system %iowait  %steal   %idle</a>
<a class="sourceLine" id="cb275-5" title="5">           <span class="ex">0.84</span>    0.00    0.08    1.22    0.07   97.80</a>
<a class="sourceLine" id="cb275-6" title="6"></a>
<a class="sourceLine" id="cb275-7" title="7"><span class="ex">Device</span>:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm  %util</a>
<a class="sourceLine" id="cb275-8" title="8"><span class="ex">xvda</span>              0.09     1.02    2.58    0.49   112.79    12.11    40.74     0.15   48.56   3.88   1.19</a>
<a class="sourceLine" id="cb275-9" title="9"><span class="ex">xvdb</span>              1.39     0.43    4.03    1.82    43.33    18.43    10.56     0.66  112.73   1.93   1.13</a></code></pre></div>
<p>Some other options that can show disk usage in trending graphs is <a href="http://munin-monitoring.org/">munin</a> and <a href="http://www.cacti.net/">cacti</a>.</p>
</section>
<section id="answer-2-score-105" class="level4">
<h4>Answer 2 (score 105)</h4>
<p>Have a look at iotop.</p>
<p>Or iodump, if that’s more down your way of thinking.</p>
<p>Note: This requires at least <a href="http://guichaz.free.fr/iotop/">kernel 2.6.20</a> to work.</p>
</section>
<section id="answer-3-score-92" class="level4">
<h4>Answer 3 (score 92)</h4>
<p>I like <code>dstat</code>. It can show totals and statistics per disk and even md-devices (RAID), also can use colors for better overview:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb276-1" title="1">$ <span class="ex">dstat</span> -tdD total,sda,sdb,sdc,md1 60 </a>
<a class="sourceLine" id="cb276-2" title="2"><span class="ex">----system----</span> -dsk/total----dsk/sda-----dsk/sdb-----dsk/sdc-----dsk/md1--</a>
<a class="sourceLine" id="cb276-3" title="3">     <span class="bu">time</span>     <span class="kw">|</span> <span class="bu">read</span>  <span class="va">writ</span>: <span class="va">read</span>  <span class="va">writ</span>: <span class="va">read</span>  <span class="va">writ</span>: <span class="va">read</span>  <span class="va">writ</span>: <span class="va">read</span>  <span class="va">writ</span></a>
<a class="sourceLine" id="cb276-4" title="4"><span class="ex">08-11</span> 22:08:17<span class="kw">|</span><span class="ex">3549k</span>  277k: 144k   28k: 851k   62k: 852k   60k:  25k   82k</a>
<a class="sourceLine" id="cb276-5" title="5"><span class="ex">08-11</span> 22:09:17<span class="kw">|</span>  <span class="ex">60k</span>  258k:1775B   15k:  13k   63k:  15k   60k:  68B   74k</a>
<a class="sourceLine" id="cb276-6" title="6"><span class="ex">08-11</span> 22:10:17<span class="kw">|</span> <span class="ex">176k</span>  499k:   0    14k:  41k  122k:  41k  125k: 273B  157k</a>
<a class="sourceLine" id="cb276-7" title="7"><span class="ex">08-11</span> 22:11:17<span class="kw">|</span>  <span class="ex">42k</span>  230k:   0    14k:9830B   54k:  14k   51k:   0    70k</a>
<a class="sourceLine" id="cb276-8" title="8"><span class="ex">08-11</span> 22:11:52<span class="kw">|</span>  <span class="ex">28k</span>  132k:   0  5032B:5266B   33k:9479B   28k:   0    37k</a></code></pre></div>
<ul>
<li>
<code>-t</code> for timestamps
</li>
<li>
<code>-d</code> for disk statistics
</li>
<li>
<code>-D</code> to specify the exact devices to report
</li>
<li>
<p>
<code>60</code> to average over 60 seconds. The display is updated every second, but only once per 60 seconds a new line will be started.
</p>
</li>
<li>
<p>
not used in this example, but <code>-c</code> can report wait IO percentage, which in most cases is related to the CPU waiting for data from the disks.
</p>
</li>
</ul>
<p>It is available for most Linux distributions, but sometimes needs to be installed from repositories.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-the-complete-and-exact-list-of-mounted-filesystems-in-linux-score-649421-in-2017" class="level3">
<h3>36: How to get the complete and exact list of mounted filesystems in Linux? (score <a href="https://stackoverflow.com/q/24182.html">649421</a> in 2017)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I usually use <code>mount</code> to check which filesystems are mounted. I also know there is some connection between <code>mount</code> and <code>/etc/mtab</code> but I’m not sure about the details. After reading <a href="https://unix.stackexchange.com/questions/16154/how-to-check-if-proc-is-mounted">How to check if /proc/ is mounted</a> I get more confused.</p>
<p>My question is: How to get the most precise list of mounted filesystems? Should I just use <code>mount</code>, or read the contents of <code>/etc/mtab</code>, or contents of <code>/proc/mounts</code>? What would give the most trustworthy result?</p>
</section>
<section id="answer-accepted-score-142" class="level4">
<h4>Answer accepted (score 142)</h4>
<p>The definitive list of mounted filesystems is in <code>/proc/mounts</code>.</p>
<p>If you have any form of containers on your system, <code>/proc/mounts</code> only lists the filesystems that are in your present container. For example, in a <a href="http://en.wikipedia.org/wiki/Chroot" rel="noreferrer">chroot</a>, <code>/proc/mounts</code> lists only the filesystems whose mount point is within the chroot. (<a href="https://unix.stackexchange.com/questions/14345/how-do-i-tell-im-running-in-a-chroot/14346#14346">There are ways to escape the chroot, mind.</a>)</p>
<p>There’s also a list of mounted filesystems in <code>/etc/mtab</code>. This list is maintained by the <code>mount</code> and <code>umount</code> commands. That means that if you don’t use these commands (which is pretty rare), your action (mount or unmount) won’t be recorded. In practice, it’s mostly in a chroot that you’ll find <code>/etc/mtab</code> files that differ wildly from the state of the system. Also, mounts performed in the chroot will be reflected in the chroot’s <code>/etc/mtab</code> but not in the main <code>/etc/mtab</code>. Actions performed while <code>/etc/mtab</code> is on a read-only filesystem are also not recorded there.</p>
<p>The reason why you’d sometimes want to consult <code>/etc/mtab</code> in preference to or in addition to <code>/proc/mounts</code> is that because it has access to the mount command line, it’s sometimes able to present information in a way that’s easier to understand; for example you see mount options as requested (whereas <code>/proc/mounts</code> lists the <code>mount</code> and kernel defaults as well), and bind mounts appear as such in <code>/etc/mtab</code>.</p>
</section>
<section id="answer-2-score-69" class="level4">
<h4>Answer 2 (score 69)</h4>
<p><a href="http://karelzak.blogspot.com/2010/07/findmnt8.html">As of v. 2.18 (July 2010)</a> <code>util-linux</code> includes a tool that allows you to display a list of currently mounted file systems:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb277-1" title="1"><span class="ex">findmnt</span></a></code></pre></div>
<p>You can switch from the default tree view to list view with <code>-l</code>, define output columns with <code>-o</code> (similar to <code>lsblk</code>), filter results based on filesystem type with <code>-t</code> etc…</p>
<pre>findmnt -lo source,target,fstype,label,options,used -t ext4</pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb278-1" title="1"><span class="ex">SOURCE</span>    TARGET      FSTYPE LABEL OPTIONS                           USED</a>
<a class="sourceLine" id="cb278-2" title="2"><span class="ex">/dev/sda1</span> /           ext4   ARCH  rw,noatime,discard,data=ordered  17.6G</a>
<a class="sourceLine" id="cb278-3" title="3"><span class="ex">/dev/sdb2</span> /media/DATA ext4   DATA  rw,noatime,discard,data=ordered    44M</a></code></pre></div>
<p>For more details read the <code>man</code> page (and <code>findmnt --help</code> to get the list of available columns)</p>
</section>
<section id="answer-3-score-33-1" class="level4">
<h4>Answer 3 (score 33)</h4>
<p>Maybe because it has been 5 years since this question was answered things have changed. The <code>cat /proc/mounts</code> creates a lot of info you do not care about. Today, IMHO, I find this to be the ultimate solution.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb279-1" title="1"><span class="fu">df</span> -h --output=source,target</a></code></pre></div>
<p>when you read the man pages there are all kinds of options you can do but this is what you what. For example to clean up the results even more you can exclude file types of “tmpfs” with this command:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb280-1" title="1"><span class="fu">df</span> -hx tmpfs --output=source,target</a></code></pre></div>
<p><code>df</code> works on the filesystem level and not the file level.</p>
<p>The commands above will include network mounts as well.</p>
<p>To see a little more information use this:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb281-1" title="1"><span class="fu">df</span> -hT</a></code></pre></div>
<p><strong>NOTE</strong> With slow mounted network connections this can take several minutes!</p>
<p>If you don’t have or care about mounted network connections (and you have root permissions) than this is even better:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb282-1" title="1"><span class="fu">sudo</span> lsblk -f</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="unzipping-a-.gz-file-without-removing-the-gzipped-file-score-648265-in-2015" class="level3">
<h3>37: Unzipping a .gz file without removing the gzipped file (score <a href="https://stackoverflow.com/q/156261.html">648265</a> in 2015)</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>I have a file <code>file.gz</code>, when I try to unzip this file by using <code>gunzip file.gz</code>, it unzipped the file but only contains extracted and removes the <code>file.gz</code> file.</p>
<p>How can I unzip by keeping both unzipped file and zipped file?</p>
</section>
<section id="answer-accepted-score-231" class="level4">
<h4>Answer accepted (score 231)</h4>
<p>Here are several alternatives:</p>
<ul>
<li>
<p>
Give <code>gunzip</code> the <code>--keep</code> option (version 1.6 or later)
</p>
<blockquote>
<p>
<code>-k</code>   <code>--keep</code><br>         Keep (don’t delete) input files during compression or decompression.
</p>
</blockquote>
<div class="sourceCode" id="cb283"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb283-1" title="1"><span class="fu">gunzip</span> -k file.gz</a></code></pre></div>
</li>
<li>
<p>
Pass the file to <code>gunzip</code> as stdin
</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb284-1" title="1"><span class="fu">gunzip</span> <span class="op">&lt;</span> file.gz <span class="op">&gt;</span> file</a></code></pre></div>
</li>
<li>
<p>
Use <code>zcat</code> (or, on older systems, <code>gzcat</code>)
</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb285-1" title="1"><span class="fu">zcat</span> file.gz <span class="op">&gt;</span> file</a></code></pre></div>
</li>
</ul>
</section>
<section id="answer-2-score-23" class="level4">
<h4>Answer 2 (score 23)</h4>
<p>Without requiring a temporary file:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb286-1" title="1"> <span class="fu">zcat</span> somefile.gz <span class="op">&gt;</span> somefile</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-copy-a-folder-keeping-owners-and-permissions-intact-score-640673-in-2014" class="level3">
<h3>38: How do I copy a folder keeping owners and permissions intact? (score <a href="https://stackoverflow.com/q/43605.html">640673</a> in 2014)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>So I was going to back up my home folder by copying it to an external drive as follows:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb287-1" title="1"><span class="fu">sudo</span> cp -r /home/my_home /media/backup/my_home</a></code></pre></div>
<p>With the result that all folders on the external drives are now owned by <code>root:root</code>. How can I have <code>cp</code> keep the ownership and permissions from the original?</p>
</section>
<section id="answer-accepted-score-458" class="level4">
<h4>Answer accepted (score 458)</h4>
<div class="sourceCode" id="cb288"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb288-1" title="1"><span class="fu">sudo</span> cp -rp /home/my_home /media/backup/my_home</a></code></pre></div>
<p>From cp manpage:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb289-1" title="1"> <span class="ex">-p</span>     same as --preserve=mode,ownership,timestamps</a>
<a class="sourceLine" id="cb289-2" title="2"></a>
<a class="sourceLine" id="cb289-3" title="3"> <span class="ex">--preserve</span>[=ATTR_LIST]</a>
<a class="sourceLine" id="cb289-4" title="4">          <span class="ex">preserve</span> the specified attributes (default: mode,ownership,timestamps),</a>
<a class="sourceLine" id="cb289-5" title="5">          <span class="kw">if</span> <span class="ex">possible</span> additional attributes: context, links, xattr, all</a></code></pre></div>
</section>
<section id="answer-2-score-94" class="level4">
<h4>Answer 2 (score 94)</h4>
<p>You can also use <code>rsync</code>.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb290-1" title="1"><span class="fu">sudo</span> rsync -a /home/my_home/ /media/backup/my_home/</a></code></pre></div>
<p>From the <code>rsync</code> manpage:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb291-1" title="1"> <span class="ex">-a</span>, --archive</a>
<a class="sourceLine" id="cb291-2" title="2">              <span class="ex">This</span>  is  equivalent  to  -rlptgoD.  It  is a quick way of saying you want</a>
<a class="sourceLine" id="cb291-3" title="3">              <span class="ex">recursion</span> and want to preserve almost everything (with -H being a  notable</a>
<a class="sourceLine" id="cb291-4" title="4">              <span class="ex">omission</span>)<span class="bu">.</span>    <span class="ex">The</span>   only  exception  to  the  above  equivalence  is  when</a>
<a class="sourceLine" id="cb291-5" title="5">              <span class="ex">--files-from</span> is specified, in which case -r is not implied.</a>
<a class="sourceLine" id="cb291-6" title="6"></a>
<a class="sourceLine" id="cb291-7" title="7">              <span class="ex">Note</span> that -a does not preserve hardlinks, because finding  multiply-linked</a>
<a class="sourceLine" id="cb291-8" title="8">              <span class="ex">files</span> is expensive.  You must separately specify -H.</a></code></pre></div>
<p>See this question for a comparison between <code>cp</code> and <code>rsync</code>: <a href="https://stackoverflow.com/q/6339287/406686">https://stackoverflow.com/q/6339287/406686</a></p>
<p>Note the trailing slashes (see manpage for details).</p>
</section>
<section id="answer-3-score-60" class="level4">
<h4>Answer 3 (score 60)</h4>
<div class="sourceCode" id="cb292"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb292-1" title="1"><span class="fu">cp</span> -a</a></code></pre></div>
<p>Where <code>-a</code> is short for <code>--archive</code> — basically it copies a directory exactly as it is; the files retain all their attributes, and symlinks are not dereferenced (<code>-d</code>).</p>
<p>From <code>man cp</code>:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb293-1" title="1">   <span class="ex">-a</span>, --archive</a>
<a class="sourceLine" id="cb293-2" title="2">          <span class="ex">same</span> as -dR --preserve=all</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-remove-a-user-from-a-group-score-638067-in-2012" class="level3">
<h3>39: How do I remove a user from a group? (score <a href="https://stackoverflow.com/q/29570.html">638067</a> in 2012)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>Which command should I use to remove a user from a group in Debian?</p>
<p>When adding a user to a group, it can be done with:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb294-1" title="1"><span class="ex">usermod</span> -a -G group user</a></code></pre></div>
<p>However, I could not find a similar command (accepting a group and user as arguments) for removing the user from the group. The closest I could get is:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb295-1" title="1"><span class="ex">usermod</span> -G all,existing,groups,except,for,group user</a></code></pre></div>
<p>Is there a command like <code>usermod OPTION group user</code> with OPTION an option to make <code>usermod</code> (or a similar program) remove the user from group?</p>
</section>
<section id="answer-accepted-score-406" class="level4">
<h4>Answer accepted (score 406)</h4>
<p>You can use <code>gpasswd</code>:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb296-1" title="1"><span class="co"># gpasswd -d user group</span></a></code></pre></div>
<p>then the new group config will be assigned at the next login, at least on Debian. If the user is logged in, the effects of the command aren’t seen immediately.</p>
</section>
<section id="answer-2-score-177" class="level4">
<h4>Answer 2 (score 177)</h4>
<p>On Debian, the <code>adduser</code> package contains a <code>deluser</code> program which removes a user from a group if you pass both as arguments:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb297-1" title="1"><span class="ex">deluser</span> user group</a></code></pre></div>
<p>If your distribution doesn’t have <code>adduser</code>, you can edit <code>/etc/group</code> and <code>/etc/gshadow</code> manually.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb298-1" title="1"><span class="ex">vigr</span></a>
<a class="sourceLine" id="cb298-2" title="2"><span class="ex">vigr</span> -s</a></code></pre></div>
</section>
<section id="answer-3-score-66" class="level4">
<h4>Answer 3 (score 66)</h4>
<div class="sourceCode" id="cb299"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb299-1" title="1"><span class="ex">usermod</span> -G <span class="st">&quot;&quot;</span> username</a></code></pre></div>
<p>
removes all secondary/supplementary groups from <i>username</i>, leaving them as a member of only their primary group. this worked in Solaris 5.9
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-fastest-way-to-view-images-from-the-terminal-score-630771-in-2012" class="level3">
<h3>40: What is the fastest way to view images from the terminal? (score <a href="https://stackoverflow.com/q/35333.html">630771</a> in 2012)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>The terminal is very fast and convenient way to quickly access directories and files (faster than find and click on the directory).</p>
<p>One thing that it cannot show in text-mode is “pictures”.</p>
<p>What is a best way to view pictures (like you see images thumbnail in Nautilus) when you are working in the terminal (e.g. command <code>nautilus</code> or any program - but should be fast and convenient)?</p>
</section>
<section id="answer-2-score-227" class="level4">
<h4>Answer 2 (score 227)</h4>
<p>The way to “double-click” on a file from the command line is <code>xdg-open</code>.</p>
<p>If you’re on Gnome (probably, if you’re using Nautilus), you can use <code>eog</code> directly, or any other image program (<code>feh</code> is quite good).</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb300-1" title="1"><span class="ex">feh</span> <span class="op">&lt;</span>image-name<span class="op">&gt;</span>      </a></code></pre></div>
<p>If you want to consult <code>image-name</code> file easilly.</p>
</section>
<section id="answer-3-score-104" class="level4">
<h4>Answer 3 (score 104)</h4>
<p>If you happen to have installed <a href="http://www.imagemagick.org/">imagemagick</a>, you can use its very handy <a href="http://www.imagemagick.org/script/display.php">display</a> command-line tool.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb301-1" title="1"><span class="ex">display</span> path/to/picture.png</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="does-curl-have-a-no-check-certificate-option-like-wget-score-628499-in" class="level3">
<h3>41: Does curl have a –no-check-certificate option like wget? (score <a href="https://stackoverflow.com/q/60750.html">628499</a> in )</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>I am trying to make a curl request to one of our local development servers running a dev site with a self-signed SSL cert. I am using curl from the command line.</p>
<p>I saw some blog posts mentioning that you can add to the list of certificates or specify a specific (self signed) certificate as valid, but is there a catch-all way of saying “don’t verify” the ssl cert - like the <code>--no-check-certificate</code> that wget has?</p>
</section>
<section id="answer-accepted-score-606" class="level4">
<h4>Answer accepted (score 606)</h4>
<p>Yes. From the <a href="https://curl.haxx.se/docs/manpage.html#-k" rel="noreferrer">manpage</a>:</p>
<blockquote>
<p>-k, –insecure</p>
<p>
(TLS) By default, every SSL connection curl makes is verified to be secure. This option allows curl to proceed and operate even for server connections otherwise considered insecure.
</p>
<p>
The server connection is verified by making sure the server’s certificate contains the right name and verifies successfully using the cert store.
</p>
<p>
See this online resource for further details: <a href="https://curl.haxx.se/docs/sslcerts.html" rel="noreferrer">https://curl.haxx.se/docs/sslcerts.html</a>
</p>
See also –proxy-insecure and –cacert.
</blockquote>
<p>The <a href="https://curl.haxx.se/docs/sslcerts.html" rel="noreferrer">reference</a> mentioned in that manpage entry describes some of the specific behaviors of <code>-k</code> .</p>
<p>These behaviors can be observed with <code>curl</code> requests to test pages from <a href="https://badssl.com" rel="noreferrer">BadSSL.com </a></p>
<div class="sourceCode" id="cb302"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb302-1" title="1"><span class="ex">curl</span> -X GET https://wrong.host.badssl.com/</a>
<a class="sourceLine" id="cb302-2" title="2"><span class="ex">curl</span>: (51) <span class="ex">SSL</span>: no alternative certificate subject name matches target host name <span class="st">&#39;wrong.host.badssl.com&#39;</span></a>
<a class="sourceLine" id="cb302-3" title="3"></a>
<a class="sourceLine" id="cb302-4" title="4"><span class="ex">curl</span> -k -X GET https://wrong.host.badssl.com/</a>
<a class="sourceLine" id="cb302-5" title="5"><span class="ex">..returns</span> HTML content...</a></code></pre></div>
</section>
<section id="answer-2-score-36" class="level4">
<h4>Answer 2 (score 36)</h4>
<p>You may use the following command to apply the changes for all connections:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb303-1" title="1">$ <span class="bu">echo</span> insecure <span class="op">&gt;&gt;</span> ~/.curlrc</a></code></pre></div>
<p>On Windows just create <code>_curlrc</code> text file with ‘insecure’ text in it in your <code>%HOME%</code>, <code>%CURL_HOME%</code>, <code>%APPDATA%</code>, <code>%USERPROFILE%</code> or <code>%USERPROFILE%\Application Data</code> directory.</p>
<p>Advantage of using above solution is that it works for all <code>curl</code> commands, but it is not recommended since it may introduce <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" rel="noreferrer">MITM attacks</a> by connecting to insecure and untrusted hosts.</p>
</section>
<section id="answer-3-score-5-1" class="level4">
<h4>Answer 3 (score 5)</h4>
<p>You are using a self-signed cert. Why don’t you appended the CA to your trusted CA bundle (Linux) or add to the trusted Certificate store (windows)? Or simply use <code>--cacert /Path/to/file</code> with the contents of your trusted self-signed cert file.</p>
<p>The other answers are answering the question based on the <code>wget</code> comparable. However the true ask is how do I maintain a trusted connection with a self-signed cert using <code>curl</code>. Based on many comments security is the top concern in any one of these answers, and the best answer would be to trust the self-signed cert and leave <code>curl</code>s security checks intact.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="compress-a-folder-with-tar-score-624560-in-2012" class="level3">
<h3>42: Compress a folder with tar? (score <a href="https://stackoverflow.com/q/46969.html">624560</a> in 2012)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>I’m trying to compress a folder (<code>/var/www/</code>) to <code>~/www_backups/$time.tar</code> where <code>$time</code> is the current date.</p>
<p>This is what I have:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb304-1" title="1"><span class="bu">cd</span> /var/www <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> tar -czf ~/www_backups <span class="va">$time</span><span class="st">&quot;</span></a></code></pre></div>
<p>I am completely lost and I’ve been at this for hours now. Not sure if <code>-czf</code> is correct. I simply want to copy all of the content in <code>/var/www</code> into a <code>$time.tar</code> file, and I want to maintain the file permissions for all of the files. Can anyone help me out?</p>
</section>
<section id="answer-accepted-score-376-1" class="level4">
<h4>Answer accepted (score 376)</h4>
<p>To <code>tar</code> and <code>gzip</code> a folder, the syntax is:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb305-1" title="1"><span class="fu">tar</span> czf name_of_archive_file.tar.gz name_of_directory_to_tar</a></code></pre></div>
<p>The <code>-</code> is optional. If you want to <code>tar</code> the current directory, use <code>.</code> to designate that.</p>
<p>To construct your filename, use the <code>date</code> utility (look at its man page for the available format options). For example:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb306-1" title="1"><span class="bu">cd</span> /var/www <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> tar czf ~/www_backups/<span class="va">$(</span><span class="fu">date</span> +%Y%m%d-%H%M%S<span class="va">)</span>.tar.gz .</a></code></pre></div>
<p>This would have created a file named something like <code>20120902-185558.tar.gz</code>.</p>
<p>On Linux, chances are your <code>tar</code> also supports BZip2 compression with the <code>j</code> rather than <code>z</code> option. And possibly others. Check the man page on your local system.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-list-disks-partitions-and-filesystems-in-linux-score-624481-in-2019" class="level3">
<h3>43: How to list disks, partitions and filesystems in Linux? (score <a href="https://stackoverflow.com/q/157154.html">624481</a> in 2019)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>In Windows, if you type <code>LIST DISK</code> using DiskPart in a command prompt it lists all physical storage devices, plus their size, format, etc. What is the equivalent of this in Linux?</p>
</section>
<section id="answer-accepted-score-212" class="level4">
<h4>Answer accepted (score 212)</h4>
<p>There are many tools for that, for example <code>fdisk -l</code> or <code>parted -l</code>, but probably the most handy is <code>lsblk</code> (aka <em>list block devices</em>):</p>
<h5>
Example
</h3>
<div class="sourceCode" id="cb307"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb307-1" title="1">$ <span class="ex">lsblk</span></a>
<a class="sourceLine" id="cb307-2" title="2"><span class="ex">NAME</span>           MAJ:MIN  RM  SIZE    RO  TYPE  MOUNTPOINT</a>
<a class="sourceLine" id="cb307-3" title="3"><span class="ex">sda</span>            8:0      0   238.5G  0   disk</a>
<a class="sourceLine" id="cb307-4" title="4">├─<span class="ex">sda1</span>         8:1      0   200M    0   part  /boot/efi</a>
<a class="sourceLine" id="cb307-5" title="5">├─<span class="ex">sda2</span>         8:2      0   500M    0   part  /boot</a>
<a class="sourceLine" id="cb307-6" title="6">└─<span class="ex">sda3</span>         8:3      0   237.8G  0   part</a>
<a class="sourceLine" id="cb307-7" title="7">├─<span class="ex">fedora-root</span>  253:0    0   50G     0   lvm   /</a>
<a class="sourceLine" id="cb307-8" title="8">├─<span class="ex">fedora-swap</span>  253:1    0   2G      0   lvm   [SWAP]</a>
<a class="sourceLine" id="cb307-9" title="9">└─<span class="ex">fedora-home</span>  253:2    0   185.9G  0   lvm</a></code></pre></div>
<p>It has many additional options, for example to show filesystems, labels, etc. As always <code>man lsblk</code> is your friend.</p>
</section>
<section id="answer-2-score-26" class="level4">
<h4>Answer 2 (score 26)</h4>
<p>
Another way to quickly see the filesystems is the command df. On my machine (Finnish localization) it shows like this:
</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb308-1" title="1"><span class="ex">ptakala@athlon</span>:/mnt$ df</a>
<a class="sourceLine" id="cb308-2" title="2"><span class="ex">Tiedostoj</span>ärjestelmä 1K-lohkot      Käyt   Vapaana Käy% Liitospiste</a>
<a class="sourceLine" id="cb308-3" title="3"><span class="ex">/dev/root</span>            38317204  19601752  16762352  54% /</a>
<a class="sourceLine" id="cb308-4" title="4"><span class="ex">devtmpfs</span>              4063816         0   4063816   0% /dev</a>
<a class="sourceLine" id="cb308-5" title="5"><span class="ex">tmpfs</span>                 4097592     81988   4015604   3% /dev/shm</a>
<a class="sourceLine" id="cb308-6" title="6"><span class="ex">tmpfs</span>                 4097592     10120   4087472   1% /run</a>
<a class="sourceLine" id="cb308-7" title="7"><span class="ex">tmpfs</span>                    5120         8      5112   1% /run/lock</a>
<a class="sourceLine" id="cb308-8" title="8"><span class="ex">tmpfs</span>                 4097592         0   4097592   0% /sys/fs/cgroup</a>
<a class="sourceLine" id="cb308-9" title="9"><span class="ex">/dev/sda9</span>           535267140 287403688 220666804  57% /work</a>
<a class="sourceLine" id="cb308-10" title="10"><span class="ex">/dev/sda7</span>           288239836 201635356  71956016  74% /home</a>
<a class="sourceLine" id="cb308-11" title="11"><span class="ex">tmpfs</span>                  819520         4    819516   1% /run/user/113</a>
<a class="sourceLine" id="cb308-12" title="12"><span class="ex">tmpfs</span>                  819520         8    819512   1% /run/user/1000</a>
<a class="sourceLine" id="cb308-13" title="13"><span class="ex">/dev/sda1</span>            39070048  37083304   1986744  95% /mnt/sda1</a>
<a class="sourceLine" id="cb308-14" title="14"><span class="ex">/dev/sda10</span>           22662140  14032580   8629560  62% /mnt/sda10</a>
<a class="sourceLine" id="cb308-15" title="15"><span class="ex">/dev/sda5</span>            29280176  20578032   8702144  71% /mnt/sda5</a></code></pre></div>
<p>It won’t show the file system type, but usually that is non-essential, and you see by one eyedrop everything needed.</p>
<p>human readable sizes:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb309-1" title="1"><span class="ex">ptakala@athlon</span>:/mnt$ df -h</a>
<a class="sourceLine" id="cb309-2" title="2"><span class="ex">Tiedostoj</span>ärjestelmä  Koko  Käyt Vapaa Käy% Liitospiste</a>
<a class="sourceLine" id="cb309-3" title="3"><span class="ex">/dev/root</span>             37G   19G   16G  54% /</a>
<a class="sourceLine" id="cb309-4" title="4"><span class="ex">devtmpfs</span>             3,9G     0  3,9G   0% /dev</a>
<a class="sourceLine" id="cb309-5" title="5"><span class="ex">tmpfs</span>                4,0G   89M  3,9G   3% /dev/shm</a>
<a class="sourceLine" id="cb309-6" title="6"><span class="ex">tmpfs</span>                4,0G  9,9M  3,9G   1% /run</a>
<a class="sourceLine" id="cb309-7" title="7"><span class="ex">tmpfs</span>                5,0M  8,0K  5,0M   1% /run/lock</a>
<a class="sourceLine" id="cb309-8" title="8"><span class="ex">tmpfs</span>                4,0G     0  4,0G   0% /sys/fs/cgroup</a>
<a class="sourceLine" id="cb309-9" title="9"><span class="ex">/dev/sda9</span>            511G  275G  211G  57% /work</a>
<a class="sourceLine" id="cb309-10" title="10"><span class="ex">/dev/sda7</span>            275G  193G   69G  74% /home</a>
<a class="sourceLine" id="cb309-11" title="11"><span class="ex">tmpfs</span>                801M  4,0K  801M   1% /run/user/113</a>
<a class="sourceLine" id="cb309-12" title="12"><span class="ex">tmpfs</span>                801M  8,0K  801M   1% /run/user/1000</a>
<a class="sourceLine" id="cb309-13" title="13"><span class="ex">/dev/sda1</span>             38G   36G  1,9G  95% /mnt/sda1</a>
<a class="sourceLine" id="cb309-14" title="14"><span class="ex">/dev/sda10</span>            22G   14G  8,3G  62% /mnt/sda10</a>
<a class="sourceLine" id="cb309-15" title="15"><span class="ex">/dev/sda5</span>             28G   20G  8,3G  71% /mnt/sda5</a></code></pre></div>
</section>
<section id="answer-3-score-23" class="level4">
<h4>Answer 3 (score 23)</h4>
<p>The other answers don’t show the UUID which is useful to use as reference in boot scripts and configs like <code>/etc/hdparm</code>. so here:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb310-1" title="1">$ <span class="fu">sudo</span> lsblk --output NAME,FSTYPE,LABEL,UUID,MODE</a>
<a class="sourceLine" id="cb310-2" title="2"><span class="ex">NAME</span>        FSTYPE LABEL     UUID                                 MODE</a>
<a class="sourceLine" id="cb310-3" title="3"><span class="ex">sda</span>                                                               brw-rw----</a>
<a class="sourceLine" id="cb310-4" title="4">├─<span class="ex">sda1</span>      ntfs   WinHyperX 2D6BFC4E0CDCFAD8                     brw-rw----</a>
<a class="sourceLine" id="cb310-5" title="5">├─<span class="ex">sda2</span>      ext4   HyperX    ef761208-bab3-4a26-87d2-ed21a7f5a1bb brw-rw----</a>
<a class="sourceLine" id="cb310-6" title="6">└─<span class="ex">sda3</span>      swap             74259007-a80b-4866-b059-0bdbe6331040 brw-rw----</a>
<a class="sourceLine" id="cb310-7" title="7"><span class="ex">sdb</span>                                                               brw-rw----</a>
<a class="sourceLine" id="cb310-8" title="8">└─<span class="ex">sdb1</span>      ext4   4TB       91e32977-0656-45b8-bcf5-14acce39d9c2 brw-rw----</a>
<a class="sourceLine" id="cb310-9" title="9"><span class="ex">sr0</span>                                                               brw-rw----</a>
<a class="sourceLine" id="cb310-10" title="10"><span class="ex">mmcblk0</span>                                                           brw-rw----</a>
<a class="sourceLine" id="cb310-11" title="11">└─<span class="ex">mmcblk0p1</span> exfat            9C33-6BBC                            brw-rw----</a></code></pre></div>
<p>Other available columns: (see <code>lsblk --help</code>)</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb311-1" title="1">        <span class="ex">NAME</span>  device name</a>
<a class="sourceLine" id="cb311-2" title="2">       <span class="ex">KNAME</span>  internal kernel device name</a>
<a class="sourceLine" id="cb311-3" title="3">     <span class="ex">MAJ</span>:MIN  major:minor device number</a>
<a class="sourceLine" id="cb311-4" title="4">      <span class="ex">FSTYPE</span>  filesystem type</a>
<a class="sourceLine" id="cb311-5" title="5">  <span class="ex">MOUNTPOINT</span>  where the device is mounted</a>
<a class="sourceLine" id="cb311-6" title="6">       <span class="ex">LABEL</span>  filesystem LABEL</a>
<a class="sourceLine" id="cb311-7" title="7">        <span class="ex">UUID</span>  filesystem UUID</a>
<a class="sourceLine" id="cb311-8" title="8">          <span class="ex">RO</span>  read-only device</a>
<a class="sourceLine" id="cb311-9" title="9">          <span class="ex">RM</span>  removable device</a>
<a class="sourceLine" id="cb311-10" title="10">       <span class="ex">MODEL</span>  device identifier</a>
<a class="sourceLine" id="cb311-11" title="11">        <span class="ex">SIZE</span>  size of the device</a>
<a class="sourceLine" id="cb311-12" title="12">       <span class="ex">STATE</span>  state of the device</a>
<a class="sourceLine" id="cb311-13" title="13">       <span class="ex">OWNER</span>  user name</a>
<a class="sourceLine" id="cb311-14" title="14">       <span class="ex">GROUP</span>  group name</a>
<a class="sourceLine" id="cb311-15" title="15">        <span class="ex">MODE</span>  device node permissions</a>
<a class="sourceLine" id="cb311-16" title="16">   <span class="ex">ALIGNMENT</span>  alignment offset</a>
<a class="sourceLine" id="cb311-17" title="17">      <span class="ex">MIN-IO</span>  minimum I/O size</a>
<a class="sourceLine" id="cb311-18" title="18">      <span class="ex">OPT-IO</span>  optimal I/O size</a>
<a class="sourceLine" id="cb311-19" title="19">     <span class="ex">PHY-SEC</span>  physical sector size</a>
<a class="sourceLine" id="cb311-20" title="20">     <span class="ex">LOG-SEC</span>  logical sector size</a>
<a class="sourceLine" id="cb311-21" title="21">        <span class="ex">ROTA</span>  rotational device</a>
<a class="sourceLine" id="cb311-22" title="22">       <span class="ex">SCHED</span>  I/O scheduler name</a>
<a class="sourceLine" id="cb311-23" title="23">     <span class="ex">RQ-SIZE</span>  request queue size</a>
<a class="sourceLine" id="cb311-24" title="24">        <span class="ex">TYPE</span>  device type</a>
<a class="sourceLine" id="cb311-25" title="25">    <span class="ex">DISC-ALN</span>  discard alignment offset</a>
<a class="sourceLine" id="cb311-26" title="26">   <span class="ex">DISC-GRAN</span>  discard granularity</a>
<a class="sourceLine" id="cb311-27" title="27">    <span class="ex">DISC-MAX</span>  discard max bytes</a>
<a class="sourceLine" id="cb311-28" title="28">   <span class="ex">DISC-ZERO</span>  discard zeroes data</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="timezone-setting-in-linux-score-620340-in-2014" class="level3">
<h3>44: Timezone setting in Linux (score <a href="https://stackoverflow.com/q/110522.html">620340</a> in 2014)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>I’m setting the timezone to GMT+6 on my Linux machine by copying the zoneinfo file to <code>/etc/localtime</code>, but the <code>date</code> command is still showing the time as <code>UTCtime-6</code>. Can any one explain to me this behavior?</p>
<p>I’m assuming the <code>date</code> command should display <code>UTCtime+6</code> time. Here are steps I’m following:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb312-1" title="1"><span class="fu">date</span></a>
<a class="sourceLine" id="cb312-2" title="2"><span class="ex">Wed</span> Jan 22 17:29:01 IST 2014</a>
<a class="sourceLine" id="cb312-3" title="3"></a>
<a class="sourceLine" id="cb312-4" title="4"><span class="fu">date</span> -u</a>
<a class="sourceLine" id="cb312-5" title="5"><span class="ex">Wed</span> Jan 22 11:59:01 UTC 2014</a>
<a class="sourceLine" id="cb312-6" title="6"></a>
<a class="sourceLine" id="cb312-7" title="7"><span class="fu">cp</span> /usr/share/zoneinfo/Etc/GMT+6 /etc/localtime</a>
<a class="sourceLine" id="cb312-8" title="8"></a>
<a class="sourceLine" id="cb312-9" title="9"><span class="fu">date</span></a>
<a class="sourceLine" id="cb312-10" title="10"><span class="ex">Wed</span> Jan 22 05:59:21 GMT+6 2014</a>
<a class="sourceLine" id="cb312-11" title="11"></a>
<a class="sourceLine" id="cb312-12" title="12"><span class="fu">date</span> -u</a>
<a class="sourceLine" id="cb312-13" title="13"><span class="ex">Wed</span> Jan 22 11:59:01 UTC 2014</a></code></pre></div>
</section>
<section id="answer-accepted-score-275" class="level4">
<h4>Answer accepted (score 275)</h4>
<p>Take a look at this blog post titled: <a href="http://www.thegeekstuff.com/2010/09/change-timezone-in-linux/" rel="noreferrer">How To: 2 Methods To Change TimeZone in Linux</a>.</p>
<h5>
Red Hat distros
</h3>
<p>If you’re using a distribution such as Red Hat then your approach of copying the file would be mostly acceptable.</p>
<p><strong>NOTE:</strong> If you’re looking for a distro-agnostic solution, this also works on Debian, though there are simpler approaches below if you only need to be concerned with Debian machines.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb313-1" title="1">$ <span class="fu">ls</span> /usr/share/zoneinfo/</a>
<a class="sourceLine" id="cb313-2" title="2"><span class="ex">Africa/</span>      CET          Etc/         Hongkong     Kwajalein    Pacific/     ROK          zone.tab</a>
<a class="sourceLine" id="cb313-3" title="3"><span class="ex">America/</span>     Chile/       Europe/      HST          Libya        Poland       Singapore    Zulu</a>
<a class="sourceLine" id="cb313-4" title="4"><span class="ex">Antarctica/</span>  CST6CDT      GB           Iceland      MET          Portugal     Turkey       </a>
<a class="sourceLine" id="cb313-5" title="5"><span class="ex">Arctic/</span>      Cuba         GB-Eire      Indian/      Mexico/      posix/       UCT          </a>
<a class="sourceLine" id="cb313-6" title="6"><span class="ex">Asia/</span>        EET          GMT          Iran         MST          posixrules   Universal    </a>
<a class="sourceLine" id="cb313-7" title="7"><span class="ex">Atlantic/</span>    Egypt        GMT0         iso3166.tab  MST7MDT      PRC          US/          </a>
<a class="sourceLine" id="cb313-8" title="8"><span class="ex">Australia/</span>   Eire         GMT-0        Israel       Navajo       PST8PDT      UTC          </a>
<a class="sourceLine" id="cb313-9" title="9"><span class="ex">Brazil/</span>      EST          GMT+0        Jamaica      NZ           right/       WET          </a>
<a class="sourceLine" id="cb313-10" title="10"><span class="ex">Canada/</span>      EST5EDT      Greenwich    Japan        NZ-CHAT      ROC          W-SU         </a></code></pre></div>
<p>I would recommend linking to it rather than copying however.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb314-1" title="1">$ <span class="fu">sudo</span> unlink /etc/localtime </a>
<a class="sourceLine" id="cb314-2" title="2">$ <span class="fu">sudo</span> ln -s /usr/share/zoneinfo/Etc/GMT+6 /etc/localtime</a></code></pre></div>
<p>Now date shows the different timezone:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb315-1" title="1">$ <span class="fu">date</span> -u</a>
<a class="sourceLine" id="cb315-2" title="2"><span class="ex">Thu</span> Jan 23 05:40:31 UTC 2014</a>
<a class="sourceLine" id="cb315-3" title="3"></a>
<a class="sourceLine" id="cb315-4" title="4">$ <span class="fu">date</span> </a>
<a class="sourceLine" id="cb315-5" title="5"><span class="ex">Wed</span> Jan 22 23:40:38 GMT+6 2014</a></code></pre></div>
<h5>
Ubuntu/Debian Distros
</h3>
<p>To change the timezone on either of these distros you can use this command:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb316-1" title="1">$ <span class="fu">sudo</span> dpkg-reconfigure tzdata</a></code></pre></div>
<p>    <img src="https://i.stack.imgur.com/hdYIX.png" alt="ss #1"></p>
<div class="sourceCode" id="cb317"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb317-1" title="1">$ <span class="fu">sudo</span> dpkg-reconfigure tzdata</a>
<a class="sourceLine" id="cb317-2" title="2"></a>
<a class="sourceLine" id="cb317-3" title="3"><span class="ex">Current</span> default time zone: <span class="st">&#39;Etc/GMT-6&#39;</span></a>
<a class="sourceLine" id="cb317-4" title="4"><span class="ex">Local</span> time is now:      Thu Jan 23 11:52:16 GMT-6 2014.</a>
<a class="sourceLine" id="cb317-5" title="5"><span class="ex">Universal</span> Time is now:  Thu Jan 23 05:52:16 UTC 2014.</a></code></pre></div>
<p>Now when we check it out:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb318-1" title="1">$ <span class="fu">date</span> -u</a>
<a class="sourceLine" id="cb318-2" title="2"><span class="ex">Thu</span> Jan 23 05:53:32 UTC 2014</a>
<a class="sourceLine" id="cb318-3" title="3"></a>
<a class="sourceLine" id="cb318-4" title="4">$ <span class="fu">date</span> </a>
<a class="sourceLine" id="cb318-5" title="5"><span class="ex">Thu</span> Jan 23 11:53:33 GMT-6 2014</a></code></pre></div>
<p><strong>NOTE:</strong> There’s also this option in Ubuntu 14.04 and higher with a single command (source: Ask Ubuntu - <a href="https://askubuntu.com/questions/323131/setting-timezone-from-terminal/524362#524362">setting timezone from terminal</a>):</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb319-1" title="1">$ <span class="fu">sudo</span> timedatectl set-timezone Etc/GMT-6</a></code></pre></div>
<h5>
On the use of “Etc/GMT+6”
</h3>
<p><em>excerpt from <a href="https://stackoverflow.com/a/21300212/33204"><span class="citation" data-cites="MattJohnson">@MattJohnson</span>’s answer on SO</a></em></p>
<blockquote>
<p>Zones like <code>Etc/GMT+6</code> are intentionally reversed for backwards compatibility with POSIX standards. See the comments in <a href="https://github.com/eggert/tz/blob/master/etcetera" rel="noreferrer">this file</a>.</p>
You should almost never need to use these zones. Instead you should be using a fully named time zone like <code>America/New_York</code> or <code>Europe/London</code> or whatever is appropriate for your location. Refer to the list <a href="http://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="noreferrer">here</a>.
</blockquote>
</section>
<section id="answer-2-score-24" class="level4">
<h4>Answer 2 (score 24)</h4>
<p>This is how I do it in Ubuntu. Just replace <code>Asia/Tokyo</code> with your own timezone.</p>
<p><code>echo 'Asia/Tokyo' | sudo tee /etc/timezone</code></p>
<p><code>sudo dpkg-reconfigure -f noninteractive tzdata</code></p>
<p>There is a <a href="https://bugs.launchpad.net/ubuntu/+source/tzdata/+bug/772024">bug</a> in <code>tzdata</code>: certain values get normalized by <code>dpkg-reconfigure</code>:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb320-1" title="1"><span class="bu">echo</span> <span class="st">&#39;US/Central&#39;</span> <span class="op">&gt;</span>/etc/timezone</a>
<a class="sourceLine" id="cb320-2" title="2"><span class="ex">dpkg-reconfigure</span> -f noninteractive tzdata</a>
<a class="sourceLine" id="cb320-3" title="3"><span class="co"># Current default time zone: &#39;America/Chicago&#39;</span></a>
<a class="sourceLine" id="cb320-4" title="4"></a>
<a class="sourceLine" id="cb320-5" title="5"><span class="bu">echo</span> <span class="st">&#39;US/Eastern&#39;</span> <span class="op">&gt;</span>/etc/timezone</a>
<a class="sourceLine" id="cb320-6" title="6"><span class="ex">apt-get</span> install --reinstall tzdata</a>
<a class="sourceLine" id="cb320-7" title="7"><span class="co"># Current default time zone: &#39;America/New_York&#39;</span></a></code></pre></div>
</section>
<section id="answer-3-score-17" class="level4">
<h4>Answer 3 (score 17)</h4>
<p><a href="http://linux.die.net/man/8/tzselect" rel="noreferrer">tzselect</a> command is made to do what you want.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="unixlinux-undeleterecover-deleted-files-score-613994-in-2014" class="level3">
<h3>45: Unix/Linux undelete/recover deleted files (score <a href="https://stackoverflow.com/q/80270.html">613994</a> in 2014)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>Is there a command to recover/undelete deleted files by <code>rm</code>?</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb321-1" title="1">$ <span class="fu">rm</span> -rf /path/to/myfile</a></code></pre></div>
<p>How can I recover <code>myfile</code>? If there is such a tool how can I use it?</p>
</section>
<section id="answer-accepted-score-66" class="level4">
<h4>Answer accepted (score 66)</h4>
<p>The link someone provided in the comments is likely your best chance.</p>
<p><a href="http://www.cyberciti.biz/tips/linux-ext3-ext4-deleted-files-recovery-howto.html">Linux debugfs Hack: Undelete Files</a></p>
<p>That write-up though looking a little intimidating is actually fairly straight forward to follow. In general the steps are as follows:</p>
<ol>
<li>
<p>
Use debugfs to view a filesystems log
</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb322-1" title="1">$ <span class="ex">debugfs</span> -w /dev/mapper/wks01-root</a></code></pre></div>
</li>
<li>
<p>
At the debugfs prompt
</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb323-1" title="1"><span class="ex">debugfs</span>: lsdel</a></code></pre></div>
</li>
<li>
<p>
Sample output
</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb324-1" title="1"><span class="ex">Inode</span>  Owner  Mode    Size    Blocks   Time deleted</a>
<a class="sourceLine" id="cb324-2" title="2"><span class="ex">23601299</span>      0 120777      3    1/   1 Tue Mar 13 16:17:30 2012</a>
<a class="sourceLine" id="cb324-3" title="3"><span class="ex">7536655</span>      0 120777      3    1/   1 Tue May  1 06:21:22 2012</a>
<a class="sourceLine" id="cb324-4" title="4"><span class="ex">2</span> deleted inodes found.</a></code></pre></div>
</li>
<li>
<p>
Run the command in debugfs
</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb325-1" title="1"><span class="ex">debugfs</span>: logdump -i <span class="op">&lt;7536655&gt;</span></a></code></pre></div>
</li>
<li>
<p>
Determine files inode
</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb326-1" title="1"><span class="ex">...</span></a>
<a class="sourceLine" id="cb326-2" title="2"><span class="ex">...</span></a>
<a class="sourceLine" id="cb326-3" title="3"><span class="ex">....</span></a>
<a class="sourceLine" id="cb326-4" title="4"><span class="ex">output</span> truncated</a>
<a class="sourceLine" id="cb326-5" title="5">    <span class="ex">Fast_link_dest</span>: bin</a>
<a class="sourceLine" id="cb326-6" title="6">    <span class="ex">Blocks</span>:  (0+1)<span class="bu">:</span> 7235938</a>
<a class="sourceLine" id="cb326-7" title="7">  <span class="ex">FS</span> block 7536642 logged at sequence 38402086, journal block 26711</a>
<a class="sourceLine" id="cb326-8" title="8">    <span class="kw">(</span><span class="ex">inode</span> block for inode 7536655<span class="kw">)</span><span class="bu">:</span></a>
<a class="sourceLine" id="cb326-9" title="9">    <span class="ex">Inode</span>: 7536655   Type: symlink        Mode:  0777   Flags: 0x0   Generation: 3532221116</a>
<a class="sourceLine" id="cb326-10" title="10">    <span class="ex">User</span>:     0   Group:     0   Size: 3</a>
<a class="sourceLine" id="cb326-11" title="11">    <span class="ex">File</span> ACL: 0    Directory ACL: 0</a>
<a class="sourceLine" id="cb326-12" title="12">    <span class="ex">Links</span>: 0   Blockcount: 0</a>
<a class="sourceLine" id="cb326-13" title="13">    <span class="ex">Fragment</span>:  Address: 0    Number: 0    Size: 0</a>
<a class="sourceLine" id="cb326-14" title="14">    <span class="ex">ctime</span>: 0x4f9fc732 -- Tue May  1 06:21:22 2012</a>
<a class="sourceLine" id="cb326-15" title="15">    <span class="ex">atime</span>: 0x4f9fc730 -- Tue May  1 06:21:20 2012</a>
<a class="sourceLine" id="cb326-16" title="16">    <span class="ex">mtime</span>: 0x4f9fc72f -- Tue May  1 06:21:19 2012</a>
<a class="sourceLine" id="cb326-17" title="17">    <span class="ex">dtime</span>: 0x4f9fc732 -- Tue May  1 06:21:22 2012</a>
<a class="sourceLine" id="cb326-18" title="18">    <span class="ex">Fast_link_dest</span>: bin</a>
<a class="sourceLine" id="cb326-19" title="19">    <span class="ex">Blocks</span>:  (0+1)<span class="bu">:</span> 7235938</a>
<a class="sourceLine" id="cb326-20" title="20"><span class="ex">No</span> magic number at block 28053: end of journal.</a></code></pre></div>
</li>
<li>
<p>
With the above inode info run the following commands
</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb327-1" title="1"><span class="co"># dd if=/dev/mapper/wks01-root of=recovered.file.001 bs=4096 count=1 skip=7235938</span></a>
<a class="sourceLine" id="cb327-2" title="2"><span class="co"># file recovered.file.001</span></a>
<a class="sourceLine" id="cb327-3" title="3"><span class="ex">file</span>: ASCII text, with very long lines</a></code></pre></div>
</li>
</ol>
<p>Files been recovered to <code>recovered.file.001</code>.</p>
<h5>
Other options
</h3>
<p>If the above isn’t for you I’ve used tools such as <code>photorec</code> to recover files in the past, but it’s geared for image files only. I’ve written about this method extensively on my blog in this article titled:</p>
<p><a href="http://www.lamolabs.org/blog/5073/how-to-recover-corrupt-jpeg-and-mov-files-from-a-digital-cameras-sdd-card-on-fedoracentosrhel/">How to Recover Corrupt jpeg and mov Files from a Digital Camera’s SDD Card on Fedora/CentOS/RHEL</a>.</p>
</section>
<section id="answer-2-score-29-1" class="level4">
<h4>Answer 2 (score 29)</h4>
<p>With a bit of chances, sometimes I can recover deleted files with this script or next solution in the answer :</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb328-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb328-2" title="2"></a>
<a class="sourceLine" id="cb328-3" title="3"><span class="kw">if [[</span> <span class="ot">!</span> <span class="va">$1</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb328-4" title="4">    <span class="bu">echo</span> -e <span class="st">&quot;Usage:\n\n\t</span><span class="va">$0</span><span class="st"> &#39;file name&#39;&quot;</span></a>
<a class="sourceLine" id="cb328-5" title="5">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb328-6" title="6"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb328-7" title="7"></a>
<a class="sourceLine" id="cb328-8" title="8"><span class="va">f=$(</span><span class="fu">ls</span> <span class="op">2&gt;</span>/dev/null -l /proc/*/fd/* <span class="kw">|</span> <span class="fu">fgrep</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st"> (deleted&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $9}&#39;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb328-9" title="9"></a>
<a class="sourceLine" id="cb328-10" title="10"><span class="kw">if [[</span> <span class="va">$f</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb328-11" title="11">    <span class="bu">echo</span> <span class="st">&quot;fd </span><span class="va">$f</span><span class="st"> found...&quot;</span></a>
<a class="sourceLine" id="cb328-12" title="12">    <span class="fu">cp</span> -v <span class="st">&quot;</span><span class="va">$f</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb328-13" title="13"><span class="kw">else</span></a>
<a class="sourceLine" id="cb328-14" title="14">    <span class="bu">echo</span> <span class="op">&gt;&amp;2</span> <span class="st">&quot;No fd found...&quot;</span></a>
<a class="sourceLine" id="cb328-15" title="15">    <span class="bu">exit</span> 2</a>
<a class="sourceLine" id="cb328-16" title="16"><span class="kw">fi</span></a></code></pre></div>
<hr>
<p>There’s another useful trick: if you know a pattern in your deleted files, type <kbd>alt</kbd>+<kbd>sys</kbd>+<kbd>resuo</kbd> to reboot+remount in read-only, then with a live-cd, use <code>grep</code> to search in the hard-drive :</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb329-1" title="1"><span class="fu">grep</span> -a -C 500 <span class="st">&#39;known pattern&#39;</span> /dev/sda <span class="kw">|</span> <span class="fu">tee</span> /tmp/recover</a></code></pre></div>
<p>then edit <code>/tmp/recover</code> to keep only what were your file(s) before.</p>
<p>Hey, if with unix philosophy all is files, it’s time to take advantage of this, no ?</p>
</section>
<section id="answer-3-score-21" class="level4">
<h4>Answer 3 (score 21)</h4>
<p>What worked for me was given by <a href="https://wiki.archlinux.org/index.php/file_recovery" rel="nofollow noreferrer">arch</a> (only applies to text files):</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb330-1" title="1"><span class="fu">grep</span> -a -C 200 -F <span class="st">&#39;Unique string in text file&#39;</span> /dev/sdXN</a></code></pre></div>
<p>where <code>/dev/sdXN</code> is the partition containing the lost file (check with <code>mount</code> if unsure).</p>
<p>Takes a little while, but worked when I accidentally deleted some source code I hadn’t commited yet!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-package-version-using-apt-getaptitude-score-601191-in-2016" class="level3">
<h3>46: Check package version using apt-get/aptitude? (score <a href="https://stackoverflow.com/q/6284.html">601191</a> in 2016)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>Before I install a package I’d like to know what version I would get. How do I check the version before installing using <code>apt-get</code> or <code>aptitude</code> on debian or ubuntu?</p>
</section>
<section id="answer-accepted-score-543" class="level4">
<h4>Answer accepted (score 543)</h4>
<p><strong>apt-get</strong></p>
<p>You can run a simulation to see what would happen if you upgrade/install a package:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb331-1" title="1"><span class="ex">apt-get</span> -s install <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<p>To see all possible upgrades, run a <code>upgrade</code> in verbose mode and (to be safe) with simulation, press <kbd>n</kbd> to cancel:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb332-1" title="1"><span class="ex">apt-get</span> -V -s upgrade</a></code></pre></div>
<p><strong>apt-cache</strong></p>
<p>The option <code>policy</code> can show the installed and the remote version (install candidate) of a package.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb333-1" title="1"><span class="ex">apt-cache</span> policy <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<p><strong>apt-show-versions</strong></p>
<p>If installed, shows version information about one or more packages:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb334-1" title="1"><span class="ex">apt-show-versions</span> <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<p>Passing the <code>-u</code> switch with or without a package name will only show upgradeable packages.</p>
<p><strong>aptitude</strong></p>
<p>The console GUI of <code>aptitude</code> can display upgradeable packages with new versions. Open the menu ‘Upgradable Packages’. Pressing <kbd>v</kbd> on a package will show more detailed version information.</p>
<p>Or on the command-line:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb335-1" title="1"><span class="ex">aptitude</span> versions <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<p>Passing <code>-V</code> will show detailed information about versions, again to be safe with the simulation switch:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb336-1" title="1"><span class="ex">aptitude</span> -V -s install <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<p>Substituting <code>install &amp;lt;package&amp;gt;</code> with <code>upgrade</code> will show the versions from all upgradeable packages.</p>
</section>
<section id="answer-2-score-59" class="level4">
<h4>Answer 2 (score 59)</h4>
<p>Another way using <strong>dpkg</strong> and <strong>grep</strong>:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb337-1" title="1"><span class="ex">dpkg</span> -s <span class="op">&lt;</span>package<span class="op">&gt;</span> <span class="kw">|</span> <span class="fu">grep</span> Version</a></code></pre></div>
</section>
<section id="answer-3-score-21-1" class="level4">
<h4>Answer 3 (score 21)</h4>
<p>Another option, if you don’t know the full name of the package, is formatting aptitude’s search output:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb338-1" title="1"><span class="ex">aptitude</span> search <span class="op">&lt;</span>package<span class="op">&gt;</span> -F <span class="st">&quot;%c %p %d %V&quot;</span></a></code></pre></div>
<p>
<code>%c</code> = status (package installed or not)<br> <code>%p</code> = package’s name<br> <code>%d</code> = package’s description<br> <code>%V</code> = available package’s version
</p>
<p>Reference: <a href="http://linux.die.net/man/8/aptitude">http://linux.die.net/man/8/aptitude</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-get-the-current-working-directory-score-597551-in-2017" class="level3">
<h3>47: How can I get the current working directory? (score <a href="https://stackoverflow.com/q/188182.html">597551</a> in 2017)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>I want to have a script that takes the current working directory to a variable. The section that needs the directory is like this <code>dir = pwd</code>. It just prints <code>pwd</code> how do I get the current working directory into a variable?</p>
</section>
<section id="answer-accepted-score-267" class="level4">
<h4>Answer accepted (score 267)</h4>
<p>There’s no need to do that, it’s already <em>in</em> a variable:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb339-1" title="1">$ <span class="bu">echo</span> <span class="va">$PWD</span></a>
<a class="sourceLine" id="cb339-2" title="2"><span class="ex">/home/terdon</span></a></code></pre></div>
<p>The <code>PWD</code> variable is <a href="http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html" rel="noreferrer">defined by POSIX</a> and will work on all POSIX-compliant shells:</p>
<blockquote>
<p>PWD</p>
<p>
Set by the shell and by the cd utility. In the shell the value shall be initialized from the environment as follows. If a value for PWD is passed to the shell in the environment when it is executed, the value is an absolute pathname of the current working directory that is no longer than {PATH_MAX} bytes including the terminating null byte, and the value does not contain any components that are dot or dot-dot, then the shell shall set PWD to the value from the environment. Otherwise, if a value for PWD is passed to the shell in the environment when it is executed, the value is an absolute pathname of the current working directory, and the value does not contain any components that are dot or dot-dot, then it is unspecified whether the shell sets PWD to the value from the environment or sets PWD to the pathname that would be output by pwd -P. Otherwise, the sh utility sets PWD to the pathname that would be output by pwd -P. In cases where PWD is set to the value from the environment, the value can contain components that refer to files of type symbolic link. In cases where PWD is set to the pathname that would be output by pwd -P, if there is insufficient permission on the current working directory, or on any parent of that directory, to determine what that pathname would be, the value of PWD is unspecified. Assignments to this variable may be ignored. If an application sets or unsets the value of PWD, the behaviors of the cd and pwd utilities are unspecified.
</p>
</blockquote>
<hr>
<p>For the more general answer, the way to save the output of a command in a variable is to enclose the command in <code>$()</code> or `` `` (backticks):</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb340-1" title="1"><span class="va">var=$(</span><span class="bu">command</span><span class="va">)</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb341-1" title="1"><span class="va">var=</span><span class="kw">`</span><span class="bu">command</span><span class="kw">`</span></a></code></pre></div>
<p>Of the two, the <code>$()</code> is preferred since it is easier to build complex commands like <code>command0 $(command1 $(command2 $(command3)))</code>.</p>
</section>
<section id="answer-2-score-25" class="level4">
<h4>Answer 2 (score 25)</h4>
<p><code>dir=$(pwd)</code></p>
<p>This is more portable and preferred over the backticks method.</p>
<p>Using <code>$()</code> allow you to nest the commands</p>
<p>eg : <code>mech_pwd=$(pwd; echo in  $(hostname))</code></p>
</section>
<section id="answer-3-score-9-1" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>You can either use the environment variable <code>$PWD</code>, or write something like:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb342-1" title="1"><span class="va">dir=</span><span class="kw">`</span><span class="bu">pwd</span><span class="kw">`</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="count-total-number-of-occurrences-using-grep-score-595238-in-2015" class="level3">
<h3>48: Count total number of occurrences using grep (score <a href="https://stackoverflow.com/q/6979.html">595238</a> in 2015)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<p><code>grep -c</code> is useful for finding how many times a string occurs in a file, but it only counts each occurence once per line. How to count multiple occurences per line?</p>
<p>I’m looking for something more elegant than:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb343-1" title="1"><span class="fu">perl</span> -e <span class="st">&#39;$_ = &lt;&gt;; print scalar ( () = m/needle/g ), &quot;\n&quot;&#39;</span></a></code></pre></div>
</section>
<section id="answer-accepted-score-306" class="level4">
<h4>Answer accepted (score 306)</h4>
<p>grep’s <code>-o</code> will only output the matches, ignoring lines; <code>wc</code> can count them:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb344-1" title="1"><span class="fu">grep</span> -o <span class="st">&#39;needle&#39;</span> file <span class="kw">|</span> <span class="fu">wc</span> -l</a></code></pre></div>
<p>
This will also match ‘needles’ or ‘multineedle’.<br> Only single words:
</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb345-1" title="1"><span class="fu">grep</span> -o <span class="st">&#39;\bneedle\B&#39;</span> file <span class="kw">|</span> <span class="fu">wc</span> -l</a>
<a class="sourceLine" id="cb345-2" title="2"><span class="co"># or:</span></a>
<a class="sourceLine" id="cb345-3" title="3"><span class="fu">grep</span> -o <span class="st">&#39;\&lt;needle\&gt;&#39;</span> file <span class="kw">|</span> <span class="fu">wc</span> -l</a></code></pre></div>
</section>
<section id="answer-2-score-17-1" class="level4">
<h4>Answer 2 (score 17)</h4>
<p>If you have GNU grep (always on Linux and Cygwin, occasionally elsewhere), you can <a href="https://unix.stackexchange.com/questions/6979/grep-multiple-times-per-line/6985#6985">count the output lines from <code>grep -o</code></a>: <code>grep -o needle | wc -l</code>.</p>
<p>With Perl, here are a few ways I find more elegant than yours (even after it’s <a href="https://unix.stackexchange.com/questions/6979/grep-multiple-times-per-line/6982#6982">fixed</a>).</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb346-1" title="1"><span class="fu">perl</span> -lne <span class="st">&#39;END {print $c} map ++$c, /needle/g&#39;</span></a>
<a class="sourceLine" id="cb346-2" title="2"><span class="fu">perl</span> -lne <span class="st">&#39;END {print $c} $c += s/needle//g&#39;</span></a>
<a class="sourceLine" id="cb346-3" title="3"><span class="fu">perl</span> -lne <span class="st">&#39;END {print $c} ++$c while /needle/g&#39;</span></a></code></pre></div>
<p>With only POSIX tools, one approach, if possible, is to split the input into lines with a single match before passing it to grep. For example, if you’re looking for whole words, then first turn every non-word character into a newline.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb347-1" title="1"><span class="co"># equivalent to grep -ow &#39;needle&#39; | wc -l</span></a>
<a class="sourceLine" id="cb347-2" title="2"><span class="fu">tr</span> -c <span class="st">&#39;[:alnum:]&#39;</span> <span class="st">&#39;[\n*]&#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -c <span class="st">&#39;^needle$&#39;</span></a></code></pre></div>
<p>Otherwise, there’s no standard command to do this particular bit of text processing, so you need to turn to sed (if you’re a masochist) or awk.</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb348-1" title="1"><span class="fu">awk</span> <span class="st">&#39;{while (match($0, /set/)) {++c; $0=substr($0, RSTART+RLENGTH)}}</span></a>
<a class="sourceLine" id="cb348-2" title="2"><span class="st">     END {print c}&#39;</span></a>
<a class="sourceLine" id="cb348-3" title="3"><span class="fu">sed</span> -n -e <span class="st">&#39;s/set/\n&amp;\n/g&#39;</span> -e <span class="st">&#39;s/^/\n/&#39;</span> -e <span class="st">&#39;s/$/\n/&#39;</span> \</a>
<a class="sourceLine" id="cb348-4" title="4">       -e <span class="st">&#39;s/\n[^\n]*\n/\n/g&#39;</span> -e <span class="st">&#39;s/^\n//&#39;</span> -e <span class="st">&#39;s/\n$//&#39;</span> \</a>
<a class="sourceLine" id="cb348-5" title="5">       -e <span class="st">&#39;/./p&#39;</span> <span class="kw">|</span> <span class="fu">wc</span> -l</a></code></pre></div>
<p>Here’s a simpler solution using <code>sed</code> and <code>grep</code>, which works for strings or even by-the-book regular expressions but fails in a few corner cases with anchored patterns (e.g. it finds two occurrences of <code>^needle</code> or <code>\bneedle</code> in <code>needleneedle</code>).</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb349-1" title="1"><span class="fu">sed</span> <span class="st">&#39;s/needle/\n&amp;\n/g&#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -cx <span class="st">&#39;needle&#39;</span></a></code></pre></div>
<p>Note that in the sed substitutions above, I used <code>\n</code> to mean a newline. This is standard in the pattern part, but in the replacement text, for portability, substitute backslash-newline for <code>\n</code>.</p>
</section>
<section id="answer-3-score-4" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>If, like me, you actually wanted <s>“both; each exactly once”,</s> (this is actually “either; twice”) then it’s simple:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb350-1" title="1"><span class="fu">grep</span> -E <span class="st">&quot;thing1|thing2&quot;</span> -c</a></code></pre></div>
<p>and check for the output <code>2</code>.</p>
<p>The benefit of this approach (if exactly once <em>is</em> what you want) is that it scales easily.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-resolve-a-hostname-to-an-ip-address-in-a-bash-script-score-571795-in-2015" class="level3">
<h3>49: How can I resolve a hostname to an IP address in a Bash script? (score <a href="https://stackoverflow.com/q/20784.html">571795</a> in 2015)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>What’s the most concise way to resolve a hostname to an IP address in a Bash script? I’m using <a href="http://en.wikipedia.org/wiki/Arch_Linux">Arch Linux</a>.</p>
</section>
<section id="answer-accepted-score-537" class="level4">
<h4>Answer accepted (score 537)</h4>
<p>You can use <code>getent</code>, which comes with <code>glibc</code> (so you almost certainly have it on Linux). This resolves using gethostbyaddr/gethostbyname2, and so also will check <code>/etc/hosts</code>/NIS/etc:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb351-1" title="1"><span class="fu">getent</span> hosts unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{ print $1 }&#39;</span></a></code></pre></div>
<p>Or, as Heinzi said below, you can use <code>dig</code> with the <code>+short</code> argument (queries DNS servers directly, does not look at <code>/etc/hosts</code>/NSS/etc) :</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb352-1" title="1"><span class="ex">dig</span> +short unix.stackexchange.com</a></code></pre></div>
<p>If <code>dig +short</code> is unavailable, any one of the following should work. All of these query DNS directly and ignore other means of resolution:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb353-1" title="1"><span class="ex">host</span> unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/has address/ { print $4 }&#39;</span></a>
<a class="sourceLine" id="cb353-2" title="2"><span class="ex">nslookup</span> unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^Address: / { print $2 }&#39;</span></a>
<a class="sourceLine" id="cb353-3" title="3"><span class="ex">dig</span> unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^;; ANSWER SECTION:$/ { getline ; print $5 }&#39;</span></a></code></pre></div>
<p>If you want to only print one IP, then add the <code>exit</code> command to <code>awk</code>’s workflow.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb354-1" title="1"><span class="ex">dig</span> +short unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{ print ; exit }&#39;</span></a>
<a class="sourceLine" id="cb354-2" title="2"><span class="fu">getent</span> hosts unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{ print $1 ; exit }&#39;</span></a>
<a class="sourceLine" id="cb354-3" title="3"><span class="ex">host</span> unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/has address/ { print $4 ; exit }&#39;</span></a>
<a class="sourceLine" id="cb354-4" title="4"><span class="ex">nslookup</span> unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^Address: / { print $2 ; exit }&#39;</span></a>
<a class="sourceLine" id="cb354-5" title="5"><span class="ex">dig</span> unix.stackexchange.com <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^;; ANSWER SECTION:$/ { getline ; print $5 ; exit }&#39;</span></a></code></pre></div>
</section>
<section id="answer-2-score-141" class="level4">
<h4>Answer 2 (score 141)</h4>
<p>With <code>host</code> from the <a href="http://www.archlinux.org/packages/core/i686/dnsutils/" rel="nofollow noreferrer">dnsutils</a> package:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb355-1" title="1">$ <span class="ex">host</span> unix.stackexchange.com</a>
<a class="sourceLine" id="cb355-2" title="2"><span class="ex">unix.stackexchange.com</span> has address 64.34.119.12</a></code></pre></div>
<p>(<strong>Corrected</strong> package name according to the comments. As a note other distributions have <code>host</code> in different packages: Debian/Ubuntu <em>bind9-host</em>, openSUSE <em>bind-utils</em>, Frugalware <em>bind</em>.)</p>
</section>
<section id="answer-3-score-54" class="level4">
<h4>Answer 3 (score 54)</h4>
<p>I have a tool on my machine that seems to do the job. The man page shows it seems to come with mysql… Here is how you could use it:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb356-1" title="1"><span class="ex">resolveip</span> -s unix.stackexchange.com</a>
<a class="sourceLine" id="cb356-2" title="2"><span class="ex">64.34.119.12</span></a></code></pre></div>
<p>The return value of this tool is different from 0 if the hostname cannot be resolved :</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb357-1" title="1"><span class="ex">resolveip</span> -s unix.stackexchange.coma</a>
<a class="sourceLine" id="cb357-2" title="2"><span class="ex">resolveip</span>: Unable to find hostid for <span class="st">&#39;unix.stackexchange.coma&#39;</span>: host not found</a>
<a class="sourceLine" id="cb357-3" title="3"><span class="bu">exit</span> 2</a></code></pre></div>
<p>
<strong>UPDATE</strong> On fedora, it comes with mysql-server :
</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb358-1" title="1"><span class="ex">yum</span> provides <span class="st">&quot;*/resolveip&quot;</span></a>
<a class="sourceLine" id="cb358-2" title="2"><span class="ex">mysql-server-5.5.10-2.fc15.x86_64</span> : The MySQL server and related files</a>
<a class="sourceLine" id="cb358-3" title="3"><span class="ex">D</span>épôt         : fedora</a>
<a class="sourceLine" id="cb358-4" title="4"><span class="ex">Correspondance</span> depuis :</a>
<a class="sourceLine" id="cb358-5" title="5"><span class="ex">Nom</span> de fichier      : /usr/bin/resolveip</a></code></pre></div>
<p>I guess it would create a strange dependency for your script…</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-display-top-results-sorted-by-memory-usage-in-real-time-score-565542-in-2015" class="level3">
<h3>50: How to display <code>top</code> results sorted by memory usage in real time? (score <a href="https://stackoverflow.com/q/128953.html">565542</a> in 2015)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>How can I display the <code>top</code> results in my terminal in real time so that the list is sorted by memory usage?</p>
</section>
<section id="answer-2-score-430" class="level4">
<h4>Answer 2 (score 430)</h4>
<h5>
Use the <code>top</code> command in Linux/Unix:
</h3>
<div class="sourceCode" id="cb359"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb359-1" title="1"><span class="ex">top</span></a></code></pre></div>
<ul>
<li>
press <kbd>shift</kbd>+<kbd>m</kbd> after running the <code>top</code> command
</li>
<li>
<p>or you can interactively choose which column to sort on</p>
<ul>
<li>
press <kbd>Shift</kbd>+<kbd>f</kbd> to enter the interactive menu
</li>
<li>
press the <kbd>up</kbd> or <kbd>down</kbd> arrow until the <code>%MEM</code> choice is highlighted
</li>
<li>
press <kbd>s</kbd> to select <code>%MEM</code> choice
</li>
<li>
press <kbd>enter</kbd> to save your selection
</li>
<li>
press <kbd>q</kbd> to exit the interactive menu
</li>
</ul>
</li>
</ul>
<p>Or specify the sort order on the command line</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb360-1" title="1"><span class="co"># on OS-X</span></a>
<a class="sourceLine" id="cb360-2" title="2"><span class="ex">top</span> -o MEM</a>
<a class="sourceLine" id="cb360-3" title="3"><span class="co"># other distros</span></a>
<a class="sourceLine" id="cb360-4" title="4"><span class="ex">top</span> -o %MEM</a></code></pre></div>
<h5>
References
</h3>
<p><a href="https://stackoverflow.com/questions/4802481/how-to-see-top-processes-by-actual-memory-usage">https://stackoverflow.com/questions/4802481/how-to-see-top-processes-by-actual-memory-usage</a></p>
</section>
<section id="answer-3-score-99" class="level4">
<h4>Answer 3 (score 99)</h4>
<p>The command line option <code>-o</code> (o standing for “Override-sort-field”) also works on my Xubuntu machine and according to <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/top.1.html">the Mac man page of top</a> it should work on a Macintosh too. If I want to short by memory usage I usually use</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb361-1" title="1"><span class="ex">top</span> -o %MEM</a></code></pre></div>
<p>which sorts by the column <code>%MEM</code>. But I can use <code>VIRT</code>, <code>RES</code> or <code>SHR</code> too. On a Macintosh I would probably use <code>mem</code> or <code>vsize</code>.</p>
<p>I don’t know why or how but this is pretty much different between Unix systems and even between Linux distributions. For example <code>-o</code> isn’t even available on my Raspberry running Wheezy. It may be worth give it a try though.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="tracking-down-where-disk-space-has-gone-on-linux-score-563835-in-2019" class="level3">
<h3>51: Tracking down where disk space has gone on Linux? (score <a href="https://stackoverflow.com/q/125429.html">563835</a> in 2019)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>When administering Linux systems I often find myself struggling to track down the culprit after a partition goes full. I normally use <code>du / | sort -nr</code> but on a large filesystem this takes a long time before any results are returned.</p>
<p>
Also, this is usually successful in highlighting the worst offender but I’ve often found myself resorting to <code>du</code> without the <code>sort</code> in more subtle cases and then had to trawl through the output.
</p>
<p>I’d prefer a command line solution which relies on standard Linux commands since I have to administer quite a few systems and installing new software is a hassle (especially when out of disk space!)</p>
</section>
<section id="answer-2-score-621" class="level4">
<h4>Answer 2 (score 621)</h4>
<p>Try <a href="http://dev.yorhel.nl/ncdu" rel="noreferrer"><code>ncdu</code></a>, an excellent command-line disk usage analyser:</p>
<p><a href="https://i.stack.imgur.com/fC87n.png" rel="noreferrer"><img src="https://i.stack.imgur.com/fC87n.png" alt="enter image description here"></a></p>
</section>
<section id="answer-3-score-339" class="level4">
<h4>Answer 3 (score 339)</h4>
<p>Don’t go straight to <code>du /</code>. Use <code>df</code> to find the partition that’s hurting you, and then try <code>du</code> commands.</p>
<p>One I like to try is</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb362-1" title="1"><span class="co"># U.S.</span></a>
<a class="sourceLine" id="cb362-2" title="2"><span class="fu">du</span> -h <span class="op">&lt;</span>dir<span class="op">&gt;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;[0-9\.]\+G&#39;</span></a>
<a class="sourceLine" id="cb362-3" title="3"><span class="co"># Others</span></a>
<a class="sourceLine" id="cb362-4" title="4"><span class="fu">du</span> -h <span class="op">&lt;</span>dir<span class="op">&gt;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;[0-9\,]\+G&#39;</span></a></code></pre></div>
<p>because it prints sizes in “human readable form”. Unless you’ve got really small partitions, grepping for directories in the gigabytes is a pretty good filter for what you want. This will take you some time, but unless you have quotas set up, I think that’s just the way it’s going to be.</p>
<p>As <span class="citation" data-cites="jchavannes">@jchavannes</span> points out in the comments, the expression can get more precise if you’re finding too many false positives. I incorporated the suggestion, which does make it better, but there are still false positives, so there are just tradeoffs (simpler expr, worse results; more complex and longer expr, better results). If you have too many little directories showing up in your output, adjust your regex accordingly. For example,</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb363-1" title="1"><span class="fu">grep</span> <span class="st">&#39;^\s*[0-9\.]\+G&#39;</span></a></code></pre></div>
<p>is even more accurate (no &lt; 1GB directories will be listed).</p>
<p>If you <em>do</em> have quotas, you can use</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb364-1" title="1"><span class="ex">quota</span> -v</a></code></pre></div>
<p>to find users that are hogging the disk.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-install-apt-get-or-yum-on-mac-os-x-score-559846-in-2018" class="level3">
<h3>52: How to install apt-get or YUM on Mac OS X (score <a href="https://stackoverflow.com/q/80711.html">559846</a> in 2018)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>I want to use either of <code>apt-get</code> or <code>yum</code>.</p>
<p>How to install them and make them successful running?</p>
</section>
<section id="answer-accepted-score-69" class="level4">
<h4>Answer accepted (score 69)</h4>
<p>If you want the equivalent to apt-get or yum on Mac OS X, you have two choices.</p>
<ol>
<li>
Homebrew: <a href="http://brew.sh">http://brew.sh</a>
</li>
<li>
Macports: <a href="http://www.macports.org">http://www.macports.org</a>
</li>
</ol>
<p>You can use <code>brew install PACKAGE_NAME</code> or <code>port install PACKAGE_NAME</code> to install the package available.</p>
</section>
<section id="answer-2-score-9" class="level4">
<h4>Answer 2 (score 9)</h4>
<p>You need to install either Homebrew or YUM. I recommend using HomeBrew. To install it enter the following command in terminal.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb365-1" title="1"><span class="ex">ruby</span> -e <span class="st">&quot;</span><span class="va">$(</span><span class="ex">curl</span> -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="va">)</span><span class="st">&quot;</span> </a></code></pre></div>
<p>then use brew install <em>Package_name</em></p>
</section>
<section id="answer-3-score-6" class="level4">
<h4>Answer 3 (score 6)</h4>
<p>
It is possible to use apt-get on OS X 10.9 like Deb based Linux using a third party software named Fink - <a href="http://thecustomizewindows.com/2013/11/how-to-install-apt-get-on-mac-os-x/">How to Install apt-get on Mac OS X</a>. However, unlike Homebrew and OS X Package Managers, Fink does not use /usr/local/ path to install software. It simply means, Fink is for a bit advanced users who can handle the software conflicts (for difference in version). Homebrew, to me is the best package manager…
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="execute-shell-commands-in-python-score-551297-in-2015" class="level3">
<h3>53: Execute shell commands in Python (score <a href="https://stackoverflow.com/q/238180.html">551297</a> in 2015)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>I’m currently studying <a href="https://en.wikipedia.org/wiki/Penetration_test">penetration testing</a> and Python programming. I just want to know how I would go about executing a Linux command in Python. The commands I want to execute are:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb366-1" title="1"><span class="bu">echo</span> 1 <span class="op">&gt;</span> /proc/sys/net/ipv4/ip_forward</a>
<a class="sourceLine" id="cb366-2" title="2"><span class="ex">iptables</span> -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 8080</a></code></pre></div>
<p>If I just use <code>print</code> in Python and run it in the terminal will it do the same as executing it as if you was typing it yourself and pressing <kbd>Enter</kbd>?</p>
</section>
<section id="answer-accepted-score-106" class="level4">
<h4>Answer accepted (score 106)</h4>
<p>You can use <code>os.system()</code>, like this:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb367-1" title="1"><span class="ex">import</span> os</a>
<a class="sourceLine" id="cb367-2" title="2"><span class="ex">os.system</span>(<span class="st">&#39;ls&#39;</span>)</a></code></pre></div>
<p>Or in your case:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb368-1" title="1"><span class="ex">os.system</span>(<span class="st">&#39;echo 1 &gt; /proc/sys/net/ipv4/ip_forward&#39;</span>)</a>
<a class="sourceLine" id="cb368-2" title="2"><span class="ex">os.system</span>(<span class="st">&#39;iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 8080&#39;</span>)</a></code></pre></div>
<p>Better yet, you can use subprocess’s call, it is safer, more powerful and likely faster:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb369-1" title="1"><span class="ex">from</span> subprocess import call</a>
<a class="sourceLine" id="cb369-2" title="2"><span class="ex">call</span>(<span class="st">&#39;echo &quot;I like potatos&quot;&#39;</span>, shell=True)</a></code></pre></div>
<p>Or, without invoking shell:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb370-1" title="1"><span class="ex">call</span>([<span class="st">&#39;echo&#39;</span>, <span class="st">&#39;I like potatos&#39;</span>])</a></code></pre></div>
<p>If you want to capture the output, one way of doing it is like this:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb371-1" title="1"><span class="ex">import</span> subprocess</a>
<a class="sourceLine" id="cb371-2" title="2"><span class="ex">cmd</span> = [<span class="st">&#39;echo&#39;</span>, <span class="st">&#39;I like potatos&#39;</span>]</a>
<a class="sourceLine" id="cb371-3" title="3"><span class="ex">proc</span> = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)</a>
<a class="sourceLine" id="cb371-4" title="4"></a>
<a class="sourceLine" id="cb371-5" title="5"><span class="ex">o</span>, e = proc.communicate()</a>
<a class="sourceLine" id="cb371-6" title="6"></a>
<a class="sourceLine" id="cb371-7" title="7"><span class="ex">print</span>(<span class="st">&#39;Output: &#39;</span> + o.decode(<span class="st">&#39;ascii&#39;</span>))</a>
<a class="sourceLine" id="cb371-8" title="8"><span class="ex">print</span>(<span class="st">&#39;Error: &#39;</span>  + e.decode(<span class="st">&#39;ascii&#39;</span>))</a>
<a class="sourceLine" id="cb371-9" title="9"><span class="ex">print</span>(<span class="st">&#39;code: &#39;</span> + str(proc.returncode))</a></code></pre></div>
<p>I <em>highly</em> recommend setting a <code>timeout</code> in <code>communicate</code>, and also to capture the exceptions you can get when calling it. This is a very error-prone code, so you should expect errors to happen and handle them accordingly.</p>
<p><a href="https://docs.python.org/3/library/subprocess.html" rel="noreferrer">https://docs.python.org/3/library/subprocess.html</a></p>
</section>
<section id="answer-2-score-29-2" class="level4">
<h4>Answer 2 (score 29)</h4>
<p>The first command simply writes to a file. You wouldn’t execute that as a shell command because <code>python</code> can read and write to files without the help of a shell:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb372-1" title="1"><span class="ex">with</span> open(<span class="st">&#39;/proc/sys/net/ipv4/ip_forward&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="fu">as</span> f:</a>
<a class="sourceLine" id="cb372-2" title="2">    <span class="ex">f.write</span>(<span class="st">&quot;1&quot;</span>)</a></code></pre></div>
<p>The <code>iptables</code> command is something you may want to execute externally. The best way to do this is to use the <a href="https://docs.python.org/2/library/subprocess.html">subprocess module</a>.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb373-1" title="1"><span class="ex">import</span> subprocess</a>
<a class="sourceLine" id="cb373-2" title="2"><span class="ex">subprocess.check_call</span>([<span class="st">&#39;iptables&#39;</span>, <span class="st">&#39;-t&#39;</span>, <span class="st">&#39;nat&#39;</span>, <span class="st">&#39;-A&#39;</span>,</a>
<a class="sourceLine" id="cb373-3" title="3">                       <span class="st">&#39;PREROUTING&#39;</span>, <span class="st">&#39;-p&#39;</span>, <span class="st">&#39;tcp&#39;</span>, </a>
<a class="sourceLine" id="cb373-4" title="4">                       <span class="st">&#39;--destination-port&#39;</span>, <span class="st">&#39;80&#39;</span>,</a>
<a class="sourceLine" id="cb373-5" title="5">                       <span class="st">&#39;-j&#39;</span>, <span class="st">&#39;REDIRECT&#39;</span>, <span class="st">&#39;--to-port&#39;</span>, <span class="st">&#39;8080&#39;</span>])</a></code></pre></div>
<p>Note that this method also does not use a shell, which is unnecessary overhead.</p>
</section>
<section id="answer-3-score-13-2" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>The quickest way:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb374-1" title="1"><span class="ex">import</span> os</a>
<a class="sourceLine" id="cb374-2" title="2"><span class="ex">os.system</span>(<span class="st">&quot;your command here&quot;</span>)</a></code></pre></div>
<p>This isn’t the most flexible approach; if you need any more control over your process than “run it once, to completion, and block until it exits”, then you should use the <code>subprocess</code> module instead.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-if-kill--9-does-not-work-score-546773-in-2012" class="level3">
<h3>54: What if ‘kill -9’ does not work? (score <a href="https://stackoverflow.com/q/5642.html">546773</a> in 2012)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>I have a process I can’t kill with <code>kill -9 &amp;lt;pid&amp;gt;</code>. What’s the problem in such a case, especially since I am the owner of that process. I thought nothing could evade that <code>kill</code> option.</p>
</section>
<section id="answer-accepted-score-563" class="level4">
<h4>Answer accepted (score 563)</h4>
<p><code>kill -9</code> (<a href="http://en.wikipedia.org/wiki/SIGKILL">SIGKILL</a>) always works, provided you have the permission to kill the process. Basically either the process must be started by you and not be setuid or setgid, or you must be root. There is one exception: even root cannot send a fatal signal to PID 1 (the <code>init</code> process).</p>
<p>However <code>kill -9</code> is not guaranteed to work <em>immediately</em>. All signals, including SIGKILL, are delivered asynchronously: the kernel may take its time to deliver them. Usually, delivering a signal takes at most a few microseconds, just the time it takes for the target to get a time slice. However, if the target has <a href="http://www.cis.temple.edu/~ingargio/cis307/readings/signals.html">blocked the signal</a>, the signal will be queued until the target unblocks it.</p>
<p>Normally, processes cannot block SIGKILL. But kernel code can, and processes execute kernel code when they call <a href="http://en.wikipedia.org/wiki/System_call">system calls</a>. Kernel code blocks all signals when interrupting the system call would result in a badly formed data structure somewhere in the kernel, or more generally in some kernel invariant being violated. So if (due to a bug or misdesign) a system call blocks indefinitely, there may effectively be no way to kill the process. (But the process <em>will</em> be killed if it ever completes the system call.)</p>
<p>A process blocked in a system call is in <a href="http://en.wikipedia.org/wiki/Sleep_%28operating_system%29#Uninterruptible_sleep">uninterruptible sleep</a>. The <code>ps</code> or <code>top</code> command will (on most unices) show it in state <code>D</code> (originally for “<strong>d</strong>isk”, I think).</p>
<p>A classical case of long uninterruptible sleep is processes accessing files over <a href="http://en.wikipedia.org/wiki/Network_File_System_%28protocol%29">NFS</a> when the server is not responding; modern implementations tend not to impose uninterruptible sleep (e.g. under Linux, the <code>intr</code> mount option allows a signal to interrupt NFS file accesses).</p>
<p>You may sometimes see entries marked <code>Z</code> (or <code>H</code> under Linux, I don’t know what the distinction is) in the <code>ps</code> or <code>top</code> output. These are technically not processes, they are zombie processes, which are nothing more than an entry in the process table, kept around so that the parent process can be notified of the death of its child. They will go away when the parent process <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/wait.html">pays attention</a> (or dies).</p>
</section>
<section id="answer-2-score-100" class="level4">
<h4>Answer 2 (score 100)</h4>
<p>Sometime process exists and cannot be killed due to:</p>
<ul>
<li>
being zombie. I.e. process which parent did not read the exit status. Such process does not consume any resources except PID entry. In <code>top</code> it is signaled Z
</li>
<li>
erroneous uninterruptible sleep. It should not happen but with a combination of buggy kernel code and/or buggy hardware it sometime does. The only method is to reboot or wait. In <code>top</code> it is signaled by D.
</li>
</ul>
</section>
<section id="answer-3-score-32" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>It sounds like you might have a <a href="http://en.wikipedia.org/wiki/Zombie_process">zombie process</a>. This is harmless: the only resource a zombie process consumes is an entry in the process table. It will go away when the parent process dies or reacts to the death of its child.</p>
<p>You can see if the process is a zombie by using <code>top</code> or the following command:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb375-1" title="1"><span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;$8==&quot;Z&quot; {print $2}&#39;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-instruct-yum-to-install-a-specific-version-of-package-x-score-542038-in-2015" class="level3">
<h3>55: How can I instruct yum to install a specific version of package X? (score <a href="https://stackoverflow.com/q/151689.html">542038</a> in 2015)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>If there are two (or more) versions of a given RPM available in a YUM repository, how can I instruct <code>yum</code> to install the version I want?</p>
<p>Looking through the Koji build service I notice that there are several versions.</p>
<p>    <a href="https://i.stack.imgur.com/ohSCD.png"><img src="https://i.stack.imgur.com/ohSCD.png" alt="ss #1"></a></p>
</section>
<section id="answer-accepted-score-312" class="level4">
<h4>Answer accepted (score 312)</h4>
<p>To see what particular versions are available to you via <code>yum</code> you can use the <code>--showduplicates</code> switch . It gives you a list like “package name.architecture     version”:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb376-1" title="1">$ <span class="ex">yum</span> --showduplicates list httpd <span class="kw">|</span> <span class="ex">expand</span></a>
<a class="sourceLine" id="cb376-2" title="2"><span class="ex">Loaded</span> plugins: fastestmirror, langpacks, refresh-packagekit</a>
<a class="sourceLine" id="cb376-3" title="3"><span class="ex">Loading</span> mirror speeds from cached hostfile</a>
<a class="sourceLine" id="cb376-4" title="4"> <span class="ex">*</span> fedora: mirror.steadfast.net</a>
<a class="sourceLine" id="cb376-5" title="5"></a>
<a class="sourceLine" id="cb376-6" title="6"><span class="ex">Available</span> Packages</a>
<a class="sourceLine" id="cb376-7" title="7"><span class="ex">httpd.x86_64</span>                        2.4.6-6.fc20                         fedora </a>
<a class="sourceLine" id="cb376-8" title="8"><span class="ex">httpd.x86_64</span>                        2.4.10-1.fc20                        updates</a></code></pre></div>
<p>As far as installing a particular version? You can append the version info to the name of the package, removing the architecture name, like so:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb377-1" title="1">$ <span class="fu">sudo</span> yum install <span class="op">&lt;</span>package name<span class="op">&gt;</span>-<span class="op">&lt;</span>version info<span class="op">&gt;</span></a></code></pre></div>
<p>For example in this case if I wanted to install the older version, 2.4.6-6 I’d do the following:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb378-1" title="1">$ <span class="fu">sudo</span> yum install httpd-2.4.6-6</a></code></pre></div>
<p>You can also include the release info when specifying a package. In this case since I’m dealing with Fedora 20 (F20) the release info would be “fc20”, and the architecture info too.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb379-1" title="1">$ <span class="fu">sudo</span> yum install httpd-2.4.6-6.fc20</a>
<a class="sourceLine" id="cb379-2" title="2">$ <span class="fu">sudo</span> yum install httpd-2.4.6-6.fc20.x86_64</a></code></pre></div>
<h5>
repoquery
</h3>
<p>If you’re ever unsure that you’re constructing the arguments right you can consult with <code>repoquery</code> too.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb380-1" title="1">$ <span class="fu">sudo</span> yum install yum-utils  <span class="co"># (to get `repoquery`)</span></a>
<a class="sourceLine" id="cb380-2" title="2">$ <span class="ex">repoquery</span> --show-duplicates httpd-2.4*</a>
<a class="sourceLine" id="cb380-3" title="3"><span class="ex">httpd-0</span>:2.4.6-6.fc20.x86_64</a>
<a class="sourceLine" id="cb380-4" title="4"><span class="ex">httpd-0</span>:2.4.10-1.fc20.x86_64</a></code></pre></div>
<h5>
downloading &amp; installing
</h3>
<p>You can also use one of the following options to download a particular RPM from the web, and then use <code>yum</code> to install it.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb381-1" title="1">$ <span class="ex">yum</span> --downloadonly <span class="op">&lt;</span>package<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-2" title="2"><span class="ex">-or-</span></a>
<a class="sourceLine" id="cb381-3" title="3">$ <span class="ex">yumdownloader</span> <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<p>And then install it like so:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb382-1" title="1">$ <span class="fu">sudo</span> yum localinstall <span class="op">&lt;</span>path to rpm<span class="op">&gt;</span></a></code></pre></div>
<p>What if I want to download everything that package X requires?</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb383-1" title="1">$ <span class="ex">yumdownloader</span> --resolve <span class="op">&lt;</span>package<span class="op">&gt;</span></a></code></pre></div>
<h5>
Example
</h3>
<div class="sourceCode" id="cb384"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb384-1" title="1">$ <span class="ex">yumdownloader</span> --resolve vim-X11</a>
<a class="sourceLine" id="cb384-2" title="2"><span class="ex">Loaded</span> plugins: langpacks, presto, refresh-packagekit</a>
<a class="sourceLine" id="cb384-3" title="3"><span class="ex">Adding</span> en_US to language list</a>
<a class="sourceLine" id="cb384-4" title="4"><span class="ex">--</span><span class="op">&gt;</span> Running transaction check</a>
<a class="sourceLine" id="cb384-5" title="5"><span class="ex">---</span><span class="op">&gt;</span> Package vim-X11.x86_64 2:7.3.315-1.fc14 set to be reinstalled</a>
<a class="sourceLine" id="cb384-6" title="6"><span class="ex">--</span><span class="op">&gt;</span> Finished Dependency Resolution</a>
<a class="sourceLine" id="cb384-7" title="7"><span class="ex">vim-X11-7.3.315-1.fc14.x86_64.rpm</span>                              <span class="kw">|</span> <span class="ex">1.1</span> MB     00:01</a></code></pre></div>
<p>Notice it’s doing a dependency check, and then downloading the missing pieces. See my answer that covers it in more details here: <a href="https://unix.stackexchange.com/questions/89222/how-to-download-a-file-from-repo-and-install-it-later-w-o-internet-connection/89250#89250">How to download a file from repo, and install it later w/o internet connection?</a>.</p>
<h5>
References
</h3>
<ul>
<li>
<a href="https://www.zulius.com/how-to/yum-install-specific-package-version/" rel="noreferrer">Get yum to install a specific package version</a>
</li>
</ul>
</section>
<section id="answer-2-score-6" class="level4">
<h4>Answer 2 (score 6)</h4>
<p>Another option, you can download <code>rpm</code> file then instruct <code>yum</code> to do a <code>localinstall</code>:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb385-1" title="1"><span class="ex">yum</span> localinstall /path/to/package.rpm</a></code></pre></div>
<p>A good place to get the packages you need is rpmfind.com and search the package name.</p>
</section>
<section id="answer-3-score-0-1" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>You can also use the option command:</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb386-1" title="1"><span class="ex">yum</span> install --nogpgcheck pckg-name-version   </a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-file-createdcreation-time-score-537418-in-2017" class="level3">
<h3>56: Get file created/creation time? (score <a href="https://stackoverflow.com/q/24441.html">537418</a> in 2017)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<blockquote>
<p>
<strong>Possible Duplicate:</strong><br> <a href="https://unix.stackexchange.com/questions/20460/how-do-i-do-a-ls-and-then-sort-the-results-by-date-created">How do I do a ls and then sort the results by date created?</a>
</p>
</blockquote>
<p>Is there a command in Linux which displays when the file was created ? I see that <code>ls -l</code> gives the last modified time, but can I get the created time/date?</p>
</section>
<section id="answer-2-score-144" class="level4">
<h4>Answer 2 (score 144)</h4>
<p>The <code>stat</code> command may output this <code>-</code> (dash). I guess it depends on the filesystem you are using. <code>stat</code> calls it the <em>“Birth time</em>”. On my <code>ext4</code> fs it is empty, though.</p>
<p><code>%w</code> Time of file birth, human-readable; - if unknown</p>
<p><code>%W</code> Time of file birth, seconds since Epoch; 0 if unknown</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb387-1" title="1"><span class="fu">stat</span> foo.txt</a>
<a class="sourceLine" id="cb387-2" title="2">  <span class="ex">File</span>: <span class="kw">`</span><span class="ex">foo.txt</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb387-3" title="3"><span class="st">  Size: 239             Blocks: 8          IO Block: 4096   regular file</span></a>
<a class="sourceLine" id="cb387-4" title="4"><span class="st">Device: 900h/2304d      Inode: 121037111   Links: 1</span></a>
<a class="sourceLine" id="cb387-5" title="5"><span class="st">Access: (0644/-rw-r--r--)  Uid: ( 1000/  adrian)   Gid: (  100/   users)</span></a>
<a class="sourceLine" id="cb387-6" title="6"><span class="st">Access: 2011-10-26 13:57:15.000000000 -0600</span></a>
<a class="sourceLine" id="cb387-7" title="7"><span class="st">Modify: 2011-10-26 13:57:15.000000000 -0600</span></a>
<a class="sourceLine" id="cb387-8" title="8"><span class="st">Change: 2011-10-26 13:57:15.000000000 -0600</span></a>
<a class="sourceLine" id="cb387-9" title="9"><span class="st"> Birth: -</span></a></code></pre></div>
</section>
<section id="answer-3-score-60-1" class="level4">
<h4>Answer 3 (score 60)</h4>
<p>Linux offers three timestamps for files: time of last access of contents (atime), time of last modification of contents (mtime), and time of last modification of the inode (metadata, ctime). So, no, you cannot. The directory’s mtime corresponds to the last file creation or deletion that happened, though.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ssh_exchange_identification-read-connection-reset-by-peer-score-534734-in-2014" class="level3">
<h3>57: ssh_exchange_identification: read: Connection reset by peer (score <a href="https://stackoverflow.com/q/151860.html">534734</a> in 2014)</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>I am on OS X trying to ssh into a ubuntu 12.04 server. I was able to SSH in – until abruptly stuff stopped working. I’ve read online to use the <code>-v</code> to debug this. Output is shown below. If I ssh into a different box and then ssh from that box to the server I am able to login. I have no idea how to debug this problem but would like to learn.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb388-1" title="1">$ <span class="fu">ssh</span> -v me@server</a>
<a class="sourceLine" id="cb388-2" title="2"><span class="ex">OpenSSH_6.2p2</span>, OSSLShim 0.9.8r 8 Dec 2011</a>
<a class="sourceLine" id="cb388-3" title="3"><span class="ex">debug1</span>: Reading configuration data /etc/ssh_config</a>
<a class="sourceLine" id="cb388-4" title="4"><span class="ex">debug1</span>: /etc/ssh_config line 20: Applying options for *</a>
<a class="sourceLine" id="cb388-5" title="5"><span class="ex">debug1</span>: /etc/ssh_config line 53: Applying options for *</a>
<a class="sourceLine" id="cb388-6" title="6"><span class="ex">debug1</span>: Connecting to server [IP] port 22.</a>
<a class="sourceLine" id="cb388-7" title="7"><span class="ex">debug1</span>: Connection established.</a>
<a class="sourceLine" id="cb388-8" title="8"><span class="ex">debug1</span>: identity file /Users/me/.ssh/id_rsa type 1</a>
<a class="sourceLine" id="cb388-9" title="9"><span class="ex">debug1</span>: identity file /Users/me/.ssh/id_rsa-cert type -1</a>
<a class="sourceLine" id="cb388-10" title="10"><span class="ex">debug1</span>: identity file /Users/me/.ssh/id_dsa type -1</a>
<a class="sourceLine" id="cb388-11" title="11"><span class="ex">debug1</span>: identity file /Users/me/.ssh/id_dsa-cert type -1</a>
<a class="sourceLine" id="cb388-12" title="12"><span class="ex">debug1</span>: Enabling compatibility mode for protocol 2.0</a>
<a class="sourceLine" id="cb388-13" title="13"><span class="ex">debug1</span>: Local version string SSH-2.0-OpenSSH_6.2</a>
<a class="sourceLine" id="cb388-14" title="14"><span class="ex">ssh_exchange_identification</span>: read: Connection reset by peer</a></code></pre></div>
<p>So far (on advice of message boards) I have looked for a <a href="http://linux.about.com/od/commands/l/blcmdl5_hostsde.htm">hosts deny</a> file – but there is no such file on my machine.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb389-1" title="1">$ <span class="fu">cat</span> /etc/hosts.deny </a>
<a class="sourceLine" id="cb389-2" title="2"><span class="ex">cat</span>: /etc/hosts.deny: No such file or directory</a></code></pre></div>
<p>I have admin access on client machine but not on server.</p>
</section>
<section id="answer-2-score-25-1" class="level4">
<h4>Answer 2 (score 25)</h4>
<p>The abrupt change could be the result of a change in the configuration file on the servers <code>sshd</code> configuration, but you indicate cannot check or alter that without admin right. You can still try the following if the server’s admins cannot be reached (in time).</p>
<p>Your log only indicates the local version string, you should check the versions of <code>sshd</code> running on the server and the intermediate machine.</p>
<p>If these versions differ (especially between the local machine and the server and less between the intermediate machine and the server) there might be some negotiation incompatibility, this <a href="http://www.held.org.il/blog/2011/05/the-myterious-case-of-broken-ssh-client-connection-reset-by-peer/">has happened before</a> in <code>ssh</code>. The solution used to be to shorten the Ciphers, HostKeyAlgorithms and/or MACs entries, either on the commandline (<code>ssh -c aes256-ctr</code>, etc.) or on in your <code>/etc/ssh/ssh_config</code>.</p>
<p>You should look in the debug information (from connecting via the intermediate to the server) for appropriate values as argument for the <code>-c</code>/<code>Ciphers</code>, <code>-o HostKeyAlgorithms</code>/<code>HostKeyAlgorithms</code> and <code>-m</code>/<code>MACs</code> commandline resp. ssh_config changes.</p>
<p>I haven’t had this problem myself for a while, but IIRC when I did it was enough to manually force the Ciphers and HostKeyAlgorithms setting, after which I could update the server’s <code>sshd</code> version and the problem went away.</p>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>You may have been banned by <code>fail2ban</code> or <code>denyhosts</code>. In such a case (and also to check it), if you don’t want to bother with your server provider assistance, you need to log into your server from another IP address : e.g. another server, or a friend’s home connection, or a wifi hot spot, or using SSH with TOR.</p>
<p>Once logged in, check that your IP address indeed appears in <code>/etc/hosts.deny</code> (on the server side). If so, then <code>fail2ban</code> or <code>denyhosts</code> must be the culprit indeed.</p>
<p><strong>See answers to <a href="https://stackoverflow.com/q/9225300/812102">this question</a></strong> for the procedure to prevent <code>denyhosts</code> to block your address continuously. For <code>fail2ban</code> find your ip with <code>iptables -L --line-number</code> and unban you ip with <code>iptables -D &amp;lt;chain&amp;gt; &amp;lt;chain number&amp;gt;</code>, you check details on <a href="https://www.howtoforge.com/community/threads/how-to-manually-unban-ip-blocked-by-fail2ban.51366/" rel="noreferrer">howtoforge</a>.</p>
<p>You may want to add your IP address to <code>fail2ban</code> and <code>denyhosts</code> whitelists (respectively <code>/etc/fail2ban/jail.conf</code>, line <code>ignoreip</code>, and <code>/var/lib/denyhosts/allowed-hosts</code>, create it if needed (but beware that the path may be different on your distribution)) to prevent the issue to happen again.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-terminate-a-background-process-score-527774-in-2017" class="level3">
<h3>58: How to terminate a background process? (score <a href="https://stackoverflow.com/q/104821.html">527774</a> in 2017)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>I have started a wget on remote machine in background using <code>&amp;amp;</code>. Suddenly it stops downloading. I want to terminate its process, then re-run the command. How can I terminate it?</p>
<p>I haven’t closed its shell window. But as you know it doesn’t stop using <kbd>Ctrl</kbd>+<kbd>C</kbd> and <kbd>Ctrl</kbd>+<kbd>Z</kbd>.</p>
</section>
<section id="answer-accepted-score-258" class="level4">
<h4>Answer accepted (score 258)</h4>
<p>There are many ways to go about this.</p>
<h5>
Method #1 - ps
</h3>
<p>You can use the <code>ps</code> command to find the process ID for this process and then use the PID to kill the process.</p>
<h5>
Example
</h3>
<div class="sourceCode" id="cb390"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb390-1" title="1">$ <span class="fu">ps</span> -eaf <span class="kw">|</span> <span class="fu">grep</span> [w]get </a>
<a class="sourceLine" id="cb390-2" title="2"><span class="ex">saml</span>      1713  1709  0 Dec10 pts/0    00:00:00 wget ...</a>
<a class="sourceLine" id="cb390-3" title="3"></a>
<a class="sourceLine" id="cb390-4" title="4">$ <span class="bu">kill</span> 1713</a></code></pre></div>
<h5>
Method #2 - pgrep
</h3>
<p>You can also find the process ID using <code>pgrep</code>.</p>
<h5>
Example
</h3>
<div class="sourceCode" id="cb391"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb391-1" title="1">$ <span class="ex">pgrep</span> wget</a>
<a class="sourceLine" id="cb391-2" title="2"><span class="ex">1234</span></a>
<a class="sourceLine" id="cb391-3" title="3"></a>
<a class="sourceLine" id="cb391-4" title="4">$ <span class="bu">kill</span> 1234</a></code></pre></div>
<h5>
Method #3 - pkill
</h3>
<p>If you’re sure it’s the only <code>wget</code> you’ve run you can use the command <code>pkill</code> to kill the job by name.</p>
<h5>
Example
</h3>
<div class="sourceCode" id="cb392"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb392-1" title="1">$ <span class="ex">pkill</span> wget</a></code></pre></div>
<h5>
Method #4 - jobs
</h3>
<p>If you’re in the same shell from where you ran the job that’s now backgrounded. You can check if it’s running still using the <code>jobs</code> command, and also kill it by its job number.</p>
<h5>
Example
</h3>
<p>My fake job, <code>sleep</code>.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb393-1" title="1">$ <span class="fu">sleep</span> 100 <span class="kw">&amp;</span></a>
<a class="sourceLine" id="cb393-2" title="2">[<span class="ex">1</span>] 4542</a></code></pre></div>
<p>Find it’s job number. <strong>NOTE:</strong> the number 4542 is the process ID.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb394-1" title="1">$ <span class="bu">jobs</span></a>
<a class="sourceLine" id="cb394-2" title="2">[<span class="ex">1</span>]+  Running                 sleep 100 <span class="kw">&amp;</span></a>
<a class="sourceLine" id="cb394-3" title="3"></a>
<a class="sourceLine" id="cb394-4" title="4">$ <span class="bu">kill</span> %1</a>
<a class="sourceLine" id="cb394-5" title="5">[<span class="ex">1</span>]+  Terminated              sleep 100</a></code></pre></div>
<h5>
Method #5 - fg
</h3>
<p>You can bring a backgrounded job back to the foreground using the <code>fg</code> command.</p>
<h5>
Example
</h3>
<p>Fake job, <code>sleep</code>.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb395-1" title="1">$ <span class="fu">sleep</span> 100 <span class="kw">&amp;</span></a>
<a class="sourceLine" id="cb395-2" title="2">[<span class="ex">1</span>] 4650</a></code></pre></div>
<p>Get the job’s number.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb396-1" title="1">$ <span class="bu">jobs</span></a>
<a class="sourceLine" id="cb396-2" title="2">[<span class="ex">1</span>]+  Running                 sleep 100 <span class="kw">&amp;</span></a></code></pre></div>
<p>Bring job #1 back to the foreground, and then use <kbd>Ctrl</kbd>+<kbd>C</kbd>.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb397-1" title="1">$ <span class="bu">fg</span> 1</a>
<a class="sourceLine" id="cb397-2" title="2"><span class="fu">sleep</span> 100</a>
<a class="sourceLine" id="cb397-3" title="3">^<span class="ex">C</span></a>
<a class="sourceLine" id="cb397-4" title="4">$</a></code></pre></div>
</section>
<section id="answer-2-score-72" class="level4">
<h4>Answer 2 (score 72)</h4>
<p>In bash you can use <code>fg</code> to get the job to the foreground and then use <kbd>Ctrl</kbd>+<kbd>C</kbd></p>
<p>Or list the process in the background with <code>jobs</code> and then do</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb398-1" title="1"><span class="bu">kill</span> %1</a></code></pre></div>
<p>(with 1 replaced by the number <code>jobs</code> gave you)</p>
</section>
<section id="answer-3-score-13-3" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>You can equally use <code>kill $!</code> to kill the most recently backgrounded job.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-get-a-count-of-files-in-a-directory-using-the-command-line-score-523917-in" class="level3">
<h3>59: How can I get a count of files in a directory using the command line? (score <a href="https://stackoverflow.com/q/1125.html">523917</a> in )</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>I have a directory with a large number of files. I don’t see a <code>ls</code> switch to provide the count. Is there some command line magic to get a count of files?</p>
</section>
<section id="answer-accepted-score-242" class="level4">
<h4>Answer accepted (score 242)</h4>
<p>Using a broad definition of “file”</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb399-1" title="1"><span class="fu">ls</span> <span class="kw">|</span> <span class="fu">wc</span> -l</a></code></pre></div>
<p>(note that it doesn’t count hidden files and assumes that file names don’t contain newline characters).</p>
<p>To include hidden files (except <code>.</code> and <code>..</code>) and avoid problems with newline characters, the canonical way is:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb400-1" title="1"><span class="fu">find</span> . ! -name . -prune -print <span class="kw">|</span> <span class="fu">grep</span> -c /</a></code></pre></div>
<p>Or recursively:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb401-1" title="1"><span class="fu">find</span> .//. ! -name . -print <span class="kw">|</span> <span class="fu">grep</span> -c //</a></code></pre></div>
</section>
<section id="answer-2-score-30" class="level4">
<h4>Answer 2 (score 30)</h4>
<p>For narrow definition of file:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb402-1" title="1"> <span class="fu">find</span> . -maxdepth 1 -type f <span class="kw">|</span> <span class="fu">wc</span> -l</a></code></pre></div>
</section>
<section id="answer-3-score-15" class="level4">
<h4>Answer 3 (score 15)</h4>
<div class="sourceCode" id="cb403"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb403-1" title="1"><span class="fu">ls</span> -1 <span class="kw">|</span> <span class="fu">wc</span> -l</a></code></pre></div>
<p>…</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb404-1" title="1">$ <span class="fu">ls</span> --help <span class="kw">|</span> <span class="fu">grep</span> -- <span class="st">&#39;  -1&#39;</span></a>
<a class="sourceLine" id="cb404-2" title="2">    <span class="ex">-1</span>                         list one file per line</a></code></pre></div>
<p>…</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb405-1" title="1">$ <span class="fu">wc</span> --help <span class="kw">|</span> <span class="fu">grep</span> -- <span class="st">&#39;  -l&#39;</span></a>
<a class="sourceLine" id="cb405-2" title="2">    <span class="ex">-l</span>, --lines            print the newline counts</a></code></pre></div>
<p>PS: Note ls -&lt;number-one&gt; | wc -&lt;letter-l&gt;</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="run-a-command-without-making-me-wait-score-521355-in-2015" class="level3">
<h3>60: Run a command without making me wait (score <a href="https://stackoverflow.com/q/103731.html">521355</a> in 2015)</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<p>On the CLI, sometimes a command I type takes a while to complete, and sometimes I know when that’s about to happen. I’m a bit confused on “backgrounding” and such in Linux.</p>
<p>What is the most common (or user-friendly way) of telling the CLI that I don’t want to wait, please give me back my prompt immediately. And if it could give me a progress bar or just busy-spinner, that would be great!</p>
</section>
<section id="answer-2-score-153" class="level4">
<h4>Answer 2 (score 153)</h4>
<p>Before running the command, you can append <code>&amp;amp;</code> to the command line to run in the background:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb406-1" title="1"><span class="ex">long-running-command</span> <span class="kw">&amp;</span></a></code></pre></div>
<p>After starting a command, you can press <kbd>Ctrl</kbd><kbd>Z</kbd> to suspend it, and then <code>bg</code> to put it in the background:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb407-1" title="1"><span class="ex">long-running-command</span></a>
<a class="sourceLine" id="cb407-2" title="2">[<span class="ex">Ctrl+Z</span>]</a>
<a class="sourceLine" id="cb407-3" title="3"><span class="bu">bg</span></a></code></pre></div>
</section>
<section id="answer-3-score-113" class="level4">
<h4>Answer 3 (score 113)</h4>
<p>This is the favorite of all since apart of sending the process into the background you don’t have to worry about the text output dirtying your terminal:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb408-1" title="1"><span class="fu">nohup</span> command <span class="kw">&amp;</span></a></code></pre></div>
<p>This not only runs the process in background, also generates a log (called <code>nohup.out</code> in the current directory, if that’s not possible, your home directory) and if you close/logout the current shell the process is not killed by preventing the child proccess from recieving the parent signals when killed (ie. logging out, by SIGHUP to the parent, or closing the current shell).</p>
<p>There’s other called <code>disown</code> but that’s rather a extension of other answers rather that a method in itself:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb409-1" title="1"><span class="bu">command</span> <span class="kw">&amp;</span> <span class="co"># our program is in background</span></a>
<a class="sourceLine" id="cb409-2" title="2"><span class="bu">disown</span> <span class="co"># now it detached itself of the shell, you can do whatever you want</span></a></code></pre></div>
<p>These commands do not allows you to recover easily the process outputs unless <a href="https://serverfault.com/a/205458/180142">you use a hackish way to get it done.</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-path-where-jdk-installed-score-517666-in-2016" class="level3">
<h3>61: How to find path where jdk installed? (score <a href="https://stackoverflow.com/q/21689.html">517666</a> in 2016)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<p>
I’ve installed <code>jdk1.7.0.rpm</code> package in RHEL6.<br> Where I do find the path to execute my first java program?
</p>
</section>
<section id="answer-2-score-46-2" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>Try either of the two:</p>
<blockquote>
<p>$ which java</p>
$ whereis java
</blockquote>
<p>For your first java program read this tutorial:</p>
<p><a href="http://download.oracle.com/javase/tutorial/getStarted/cupojava/unix.html">“Hello World!” for Solaris OS and Linux</a></p>
</section>
<section id="answer-3-score-12-1" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>You can list the installed files with</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb410-1" title="1"><span class="ex">rpm</span> -ql packagename</a></code></pre></div>
<p>You will see somewhere a <code>bin</code> directory with <code>java executable</code></p>
<p>But if the JDK RPM was correctly installed you should already find <code>java</code> in you path.</p>
<p>Try</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb411-1" title="1"><span class="ex">javac</span> MyFirstJavaClass.java</a></code></pre></div>
<p>and if everything compiles</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb412-1" title="1"><span class="ex">java</span> MyFirstClass</a></code></pre></div>
<p>(If you didn’t change anything the current directory <code>.</code> should already be in your class path)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="list-all-connected-ssh-sessions-score-516524-in" class="level3">
<h3>62: List all connected SSH sessions? (score <a href="https://stackoverflow.com/q/92560.html">516524</a> in )</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>I just SSH’d into root, and then SSH’d again into root on the same machine. So I have two windows open both SSH’d into root on my remote machine.</p>
<p>From the shell, how can I see a list of these two sessions?</p>
</section>
<section id="answer-2-score-188" class="level4">
<h4>Answer 2 (score 188)</h4>
<p><code>who</code> or <code>w</code>; <code>who -a</code> for additional information.</p>
<p>These commands just show all login sessions on a terminal device. An SSH session will be on a pseudo-terminal slave (<code>pts</code>) as shown in the <code>TTY</code> column, but not all pts connections are SSH sessions. For instance, programs that create a pseudo-terminal device such as <code>xterm</code> or <code>screen</code> will show as <code>pts</code>. See <a href="https://unix.stackexchange.com/questions/21280/difference-between-pts-and-tty">Difference between pts and tty</a> for a better description of the different values found in the <code>TTY</code> column. Furthermore, this approach won’t show anybody who’s logged in to an SFTP session, since SFTP sessions aren’t shell login sessions.</p>
<p>I don’t know of any way to explicitly show all SSH sessions. You can infer this information by reading login information from <code>utmp</code>/<code>wtmp</code> via a tool like <code>last</code>, <code>w</code>, or <code>who</code> like I’ve just described, or by using networking tools like <span class="citation" data-cites="sebelk">@sebelk</span> described in their answer to find open tcp connections on port 22 (or wherever your SSH daemon(s) is/are listening).</p>
<p>A third approach you could take is to parse the log output from the SSH daemon. Depending on your OS distribution, SSH distribution, configuration, and so on, your log output may be in a number of different places. On an RHEL 6 box, I found the logs in <code>/var/log/sshd.log</code>. On an RHEL 7 box, and also on an Arch Linux box, I needed to use <code>journalctl -u sshd</code> to view the logs. Some systems might output SSH logs to syslog. Your logs may be in these places or elsewhere. Here’s a sample of what you might see:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb413-1" title="1">[<span class="ex">myhost</span> ~]% cat /var/log/sshd.log <span class="kw">|</span> <span class="fu">grep</span> hendrenj <span class="kw">|</span> <span class="fu">grep</span> session</a>
<a class="sourceLine" id="cb413-2" title="2"><span class="ex">May</span>  1 15:57:11 myhost sshd[34427]: pam_unix(sshd:session)<span class="bu">:</span> session opened for user hendrenj by (uid=0)</a>
<a class="sourceLine" id="cb413-3" title="3"><span class="ex">May</span>  1 16:16:13 myhost sshd[34427]: pam_unix(sshd:session)<span class="bu">:</span> session closed for user hendrenj</a>
<a class="sourceLine" id="cb413-4" title="4"><span class="ex">May</span>  5 14:27:09 myhost sshd[43553]: pam_unix(sshd:session)<span class="bu">:</span> session opened for user hendrenj by (uid=0)</a>
<a class="sourceLine" id="cb413-5" title="5"><span class="ex">May</span>  5 18:23:41 myhost sshd[43553]: pam_unix(sshd:session)<span class="bu">:</span> session closed for user hendrenj</a></code></pre></div>
<p>The logs show when sessions open and close, who the session belongs to, where the user is connecting from, and more. However, you’re going to have to do a <em>lot</em> of parsing if you want to get this from a simple, human-readable log of events to a list of currently active sessions, and it still probably won’t be an accurate list when you’re done parsing, since the logs don’t actually contain enough information to determine which sessions are still active - you’re essentially just guessing. The only advantage you gain by using these logs is that the information comes directly from SSHD instead of via a secondhand source like the other methods.</p>
<p>I recommend just using <code>w</code>. Most of the time, this will get you the information you want.</p>
</section>
<section id="answer-3-score-108" class="level4">
<h4>Answer 3 (score 108)</h4>
<p>You can see every session ssh with the following command:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb414-1" title="1">[<span class="ex">root@router</span> ~]# netstat -tnpa <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;ESTABLISHED.*sshd&#39;</span></a>
<a class="sourceLine" id="cb414-2" title="2"><span class="ex">tcp</span>        0      0 192.168.1.136:22            192.168.1.147:45852         ESTABLISHED 1341/sshd           </a>
<a class="sourceLine" id="cb414-3" title="3"><span class="ex">tcp</span>        0      0 192.168.1.136:22            192.168.1.147:45858         ESTABLISHED 1360/sshd</a></code></pre></div>
<p>O perhaps this may be useful:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb415-1" title="1">[<span class="ex">root@router</span> ~]# ps auxwww <span class="kw">|</span> <span class="fu">grep</span> sshd:</a>
<a class="sourceLine" id="cb415-2" title="2"><span class="ex">root</span>      1341  0.0  0.4  97940  3952 ?        Ss   20:31   0:00 sshd: root@pts/0 </a>
<a class="sourceLine" id="cb415-3" title="3"><span class="ex">root</span>      1360  0.0  0.5  97940  4056 ?        Ss   20:32   0:00 sshd: root@pts/1 </a>
<a class="sourceLine" id="cb415-4" title="4"><span class="ex">root</span>      1397  0.0  0.1 105300   888 pts/0    S+   20:37   0:00 grep sshd:</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-list-all-files-ordered-by-size-score-504759-in-2016" class="level3">
<h3>63: How to list all files ordered by size (score <a href="https://stackoverflow.com/q/53737.html">504759</a> in 2016)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>I would like to list all files in the order of big to small in size and the files could be present anywhere in a certain folder.</p>
</section>
<section id="answer-2-score-291" class="level4">
<h4>Answer 2 (score 291)</h4>
<p>Simply use something like:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb416-1" title="1"><span class="fu">ls</span> -lS /path/to/folder/</a></code></pre></div>
<p>Capital <strong>S</strong>.</p>
<p>This will sort files by size.</p>
<p>Also see:</p>
<p><a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?ls" rel="noreferrer"><code>man ls</code></a></p>
<div class="sourceCode" id="cb417"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb417-1" title="1"><span class="ex">-S</span>     sort by file size</a></code></pre></div>
<p>If you want to sort in <strong>reverse</strong> order, just add <code>-r</code> switch.</p>
<p><strong>Update:</strong></p>
<p>To exclude directories (and provided none of the file names or symlink targets contain newline characters):</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb418-1" title="1"><span class="fu">ls</span> -lS <span class="kw">|</span> <span class="fu">grep</span> -v <span class="st">&#39;^d&#39;</span> </a></code></pre></div>
<p><strong>Update 2:</strong></p>
<p>I see now how it still shows symbolic links, which could be folders. Symbolic links always start with a letter l, as in link.</p>
<p>Change the command to filter for a <code>-</code>. This should only leave regular files:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb419-1" title="1"><span class="fu">ls</span> -lS <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^-&#39;</span></a></code></pre></div>
<p>On my system this only shows regular files.</p>
<p><strong>update 3:</strong></p>
<p>To add recursion, I would leave the sorting of the lines to the <code>sort</code> command and tell it to use the 5th column to sort on.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb420-1" title="1"><span class="fu">ls</span> -lR <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^-&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> -k 5 -rn</a></code></pre></div>
<p><code>-rn</code> means Reverse and numeric to get the biggest files at the top. Down side of this command is that it does not show the full path of the files.</p>
<p>If you do need the full path of the files, use something like this:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb421-1" title="1"><span class="fu">find</span> . -type f  -exec du -h {} <span class="ex">+</span> <span class="kw">|</span> <span class="fu">sort</span> -r -h</a></code></pre></div>
<p>The <code>find</code> command will recursively find all files in all sub directories of <code>.</code> and call <code>du -h</code> (meaning <em>disk usage -humanreadable</em>) and then sort the output again. If your <code>find</code>/<code>sort</code> doesn’t support <code>-h</code>, replace with <code>du -k</code> and <code>sort -rn</code>. Note that <em>size</em> and <em>disk usage</em> are not the same thing.</p>
</section>
<section id="answer-3-score-25-2" class="level4">
<h4>Answer 3 (score 25)</h4>
<p>You could use something like find and sort.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb422-1" title="1"><span class="fu">find</span> . -type f -ls <span class="kw">|</span> <span class="fu">sort</span> -r -n -k7</a></code></pre></div>
<p>(the <code>-ls</code> option is not standard but is found in many find implementations, not only the GNU one. In GNU find and others, it displays something similar to <code>ls -li</code> with a few exceptions, for instance, files with ACLs are not marked with a +)</p>
<p>If the file names may contain newline characters, with GNU find and GNU sort:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb423-1" title="1"><span class="fu">find</span> . -type f -ls -printf <span class="st">&#39;\0&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> -zk7rn <span class="kw">|</span> <span class="fu">tr</span> -d <span class="st">&#39;\0&#39;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-split-the-terminal-into-more-than-one-view-score-497837-in-2012" class="level3">
<h3>64: How to split the terminal into more than one “view”? (score <a href="https://stackoverflow.com/q/7453.html">497837</a> in 2012)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>From <code>vi</code>, if you issue the command <code>:sp</code>, the screen splits into two “views”, allowing you to edit more than one file from the same terminal.</p>
<p>Along those same lines, is there a way to have multiple shells open in the same terminal?</p>
</section>
<section id="answer-accepted-score-352" class="level4">
<h4>Answer accepted (score 352)</h4>
<p>You can do it in <code>screen</code> the terminal multiplexer.</p>
<ul>
<li>
To split vertically: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>|</kbd>.
</li>
<li>
To split horizontally: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>S</kbd> (uppercase ‘s’).
</li>
<li>
To unsplit: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>Q</kbd> (uppercase ‘q’).
</li>
<li>
To switch from one to the other: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>tab</kbd>
</li>
</ul>
<p>Note: After splitting, you need to go into the new region and start a new session via <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>c</kbd> before you can use that area.</p>
<p>EDIT, basic screen usage:</p>
<ul>
<li>
New terminal: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>c</kbd>.
</li>
<li>
Next terminal: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>space</kbd>.
</li>
<li>
Previous terminal: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>backspace</kbd>.
</li>
<li>
N’th terminal <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>[n]</kbd>. <em>(works for n∈{0,1…9})</em>
</li>
<li>
Switch between terminals using list: <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>&quot;</kbd> <em>(useful when more than 10 terminals)</em>
</li>
<li>
Send <kbd>ctrl</kbd><kbd>a</kbd> to the underlying terminal <kbd>ctrl</kbd><kbd>a</kbd> then <kbd>a</kbd>.
</li>
</ul>
</section>
<section id="answer-2-score-108-1" class="level4">
<h4>Answer 2 (score 108)</h4>
<p>Try tmux (Terminal MUltipleXer):</p>
<ul>
<li>
<a href="http://tmux.github.io" rel="noreferrer">Home Page</a>
</li>
<li>
<a href="http://en.wikipedia.org/wiki/Tmux" rel="noreferrer">Wikipedia</a>
</li>
</ul>
<p><img src="https://i.stack.imgur.com/z1Jt7.png" alt="tmux screenshot"></p>
<p>
And to <a href="https://danielmiessler.com/study/tmux/" rel="noreferrer">understand</a> the difference between <code>session</code>, <code>window</code> and <code>pane</code>: <a href="https://i.stack.imgur.com/vktrK.png" rel="noreferrer"><img src="https://i.stack.imgur.com/vktrK.png" alt="tmuxnestings"></a>
</p>
</section>
<section id="answer-3-score-64" class="level4">
<h4>Answer 3 (score 64)</h4>
<p>As mentioned in the comments, besides screen, another good terminal multiplexer is <a href="http://tmux.sourceforge.net/">tmux</a>. You can refer to the manual for a complete description and command reference. Some basic operations to get started are:</p>
<ul>
<li>
Split screen vertically: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>Shift</kbd><kbd>5</kbd>
</li>
<li>
Split screen horizontally: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>Shift</kbd><kbd>&quot;</kbd>
</li>
<li>
Toggle between panes: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>o</kbd>
</li>
<li>
Close current pane: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>x</kbd>
</li>
</ul>
<p>You can achieve more complex layouts by splitting panes. You can also have multiple windows with panes and switch between them.</p>
<ul>
<li>
Create windows: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>c</kbd>
</li>
<li>
Switch to next window: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>n</kbd>
</li>
<li>
Switch to previous window: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>p</kbd>
</li>
<li>
Destroy current window: <kbd>Ctrl</kbd><kbd>b</kbd> and <kbd>Shift</kbd><kbd>7</kbd>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="use-scp-to-transfer-a-file-from-local-directory-x-to-remote-directory-y-score-496212-in-2014" class="level3">
<h3>65: Use scp to transfer a file from local directory X to remote directory Y (score <a href="https://stackoverflow.com/q/115560.html">496212</a> in 2014)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>I took a look around at other questions here and at various “scp usage” tutorials on Internet, but I can’t sort out what’s wrong.</p>
<p>I’m using Linux Mint and I’m trying to figure out how <strong>scp</strong> works.</p>
<p>I’ve a file <strong>file.ext</strong> (on my computer) in directory <strong>/home/name/dir/</strong></p>
<p>I connect to a remote machine using <strong>ssh</strong>, like:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb424-1" title="1"><span class="fu">ssh</span> -p 2222 username@domain</a></code></pre></div>
<p>it asks me the password and the shell displays:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb425-1" title="1"><span class="ex">username@domain</span> ~ $</a></code></pre></div>
<p>now, If I issue the command (before I ran ssh I was in the local directory <strong>/home/name/dir</strong> ):</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb426-1" title="1"><span class="fu">scp</span> -r -P 2222 file.ext username@domain </a></code></pre></div>
<p>output is:</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb427-1" title="1"><span class="ex">cp</span>: cannot stat ‘file.ext’: No such file or directory</a></code></pre></div>
<p>Same result if instead of file.ext I write the complete path</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb428-1" title="1"><span class="fu">scp</span> -r -P 2222 /home/name/dir/file.ext username@domain </a></code></pre></div>
<p>Also, the server admin told me that I shall upload the file to my remote home directory (instead of root), like:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb429-1" title="1"><span class="fu">scp</span> -r -P 2222 file.ext username@domain:~/</a></code></pre></div>
<p>but when I do it and press “Enter” nothing happens, as If the shell was waiting for further input.</p>
<p>Summary of my problems:</p>
<ul>
<li>
cp: no such file or directory
</li>
<li>
shell “stuck” on ~/
</li>
</ul>
<p>Any suggestions?</p>
</section>
<section id="answer-accepted-score-119" class="level4">
<h4>Answer accepted (score 119)</h4>
<p>You need to run the <code>scp</code> command from the local machine, not on the remote. You don’t need the <code>ssh</code> at all:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb430-1" title="1"><span class="ex">dragonmnl@local</span> $ scp -P 2222 file.ext username@domain:~/ </a></code></pre></div>
<p>You also don’t need the <code>-r</code>:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb431-1" title="1"> <span class="ex">-r</span>      Recursively copy entire directories.  </a></code></pre></div>
<p>If you are already logged into the remote machine and want to copy from your local, you need to make sure that your local machine is accessible via the internet and has <code>ssh</code> set up. I don’t think this is what you are after but if it is, just run this from the remote:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb432-1" title="1"><span class="ex">username@domain</span> $ scp dragonmnl@local:/path/to/file.ext ~/</a></code></pre></div>
</section>
<section id="answer-2-score-28" class="level4">
<h4>Answer 2 (score 28)</h4>
<p>I provide two methods of up/down load file between remote and local machine(I use Mac air):</p>
<p>In this case, I want to up/down “11.jpeg” between local and remote:</p>
<ol type="1">
<li></li>
</ol>
<blockquote>
<strong>Copy files on service to local dir: You must be in local bash terminal to conduct this command, not when you are in ssh!</strong>
</blockquote>
<div class="sourceCode" id="cb433"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb433-1" title="1"><span class="fu">scp</span> username@domain:/home/xxx/xxx/11.jpeg /Users/username/Desktop/  </a></code></pre></div>
<blockquote>
<strong>copy files in local dir to remote service : also you must be in local bash terminal</strong>
</blockquote>
<div class="sourceCode" id="cb434"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb434-1" title="1"><span class="fu">scp</span> /Users/username/Desktop/11.jpeg username@domain:/home/xxx/xxx</a></code></pre></div>
<ol start="2">
<li>
<p>
To achieve the same intention <strong>when you are logging in the SSH</strong>, you must first set “System Preferences&gt;sharing&gt;remote log in&gt;all users(I am not sure if you must set for”all users“, but it works in this situation)” the Mac will tell you&quot;To log in to this computer remotely, type : ssh username@xxxxxx, then type in the command below:
</p>
<strong>scp username@domain:/home/xxx/xxx/11.jpeg username@xxxxxx:/Users/username/Desktop/</strong>
</li>
</ol>
<p>This command above is for downloading file from remote to local when you are logging into ssh, Just change the two path when you want to upload file .</p>
</section>
<section id="answer-3-score-5-2" class="level4">
<h4>Answer 3 (score 5)</h4>
<p>If you’re running this scp command on the remote machine, it is looking for <code>file.ext</code> as a “local” file, i.e. <strong>on the remote machine.</strong></p>
<p>To copy a file from the remote machine to the local one, use <code>scp -P 2222 username@domain:dir/file.ext localdir</code> (assuming that <code>file.ext</code> is in <code>~/dir</code> on the remote computer, as in your example). If you run <code>scp</code> on the remote machine, reverse “local” and “remote”.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-conditionally-do-something-if-a-command-succeeded-or-failed-score-493846-in-2011" class="level3">
<h3>66: How to conditionally do something if a command succeeded or failed (score <a href="https://stackoverflow.com/q/22726.html">493846</a> in 2011)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>How can I do something like this in bash?</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb435-1" title="1"><span class="kw">if</span> <span class="st">&quot;</span><span class="kw">`</span><span class="bu">command</span><span class="kw">`</span><span class="st"> returns any error&quot;</span>;</a>
<a class="sourceLine" id="cb435-2" title="2"><span class="kw">then</span></a>
<a class="sourceLine" id="cb435-3" title="3">    <span class="bu">echo</span> <span class="st">&quot;Returned an error&quot;</span></a>
<a class="sourceLine" id="cb435-4" title="4"><span class="kw">else</span></a>
<a class="sourceLine" id="cb435-5" title="5">    <span class="bu">echo</span> <span class="st">&quot;Proceed...&quot;</span></a>
<a class="sourceLine" id="cb435-6" title="6"><span class="kw">fi</span></a></code></pre></div>
</section>
<section id="answer-2-score-364" class="level4">
<h4>Answer 2 (score 364)</h4>
<blockquote>
<strong>How to conditionally do something if a command succeeded or failed</strong>
</blockquote>
<p>That’s exactly what bash’s <code>if</code> statement does:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb436-1" title="1"><span class="kw">if</span> <span class="bu">command</span> <span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb436-2" title="2">    <span class="bu">echo</span> <span class="st">&quot;Command succeeded&quot;</span></a>
<a class="sourceLine" id="cb436-3" title="3"><span class="kw">else</span></a>
<a class="sourceLine" id="cb436-4" title="4">    <span class="bu">echo</span> <span class="st">&quot;Command failed&quot;</span></a>
<a class="sourceLine" id="cb436-5" title="5"><span class="kw">fi</span></a></code></pre></div>
<p>Adding information from comments: you <em>don’t</em> need to use the <code>[</code> … <code>]</code> syntax in this case. <code>[</code> is itself a command, very nearly equivalent to <code>test</code>. It’s probably the most common command to use in an <code>if</code>, which can lead to the assumption that it’s part of the shell’s syntax. But if you want to test whether a command succeeded or not, use the command itself directly with <code>if</code>, as shown above.</p>
<p><em>Edit: Quoted the question at the top for clarity (this answer doesn’t appear near the top of the page).</em></p>
</section>
<section id="answer-3-score-133" class="level4">
<h4>Answer 3 (score 133)</h4>
<p>For small things that you want to happen if a shell command works, you can use the <code>&amp;amp;&amp;amp;</code> construct:</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb437-1" title="1"><span class="fu">rm</span> -rf somedir <span class="kw">&amp;&amp;</span> <span class="ex">trace_output</span> <span class="st">&quot;Removed the directory&quot;</span></a></code></pre></div>
<p>Similarly for small things that you want to happen when a shell command fails, you can use <code>||</code>:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb438-1" title="1"><span class="fu">rm</span> -rf somedir <span class="kw">||</span> <span class="ex">exit_on_error</span> <span class="st">&quot;Failed to remove the directory&quot;</span></a></code></pre></div>
<p>Or both</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb439-1" title="1"><span class="fu">rm</span> -rf somedir <span class="kw">&amp;&amp;</span> <span class="ex">trace_output</span> <span class="st">&quot;Removed the directory&quot;</span> <span class="kw">||</span> <span class="ex">exit_on_error</span> <span class="st">&quot;Failed to remove the directory&quot;</span></a></code></pre></div>
<p>It’s probably unwise to do very much with these constructs, but they can on occasion make the flow of control a lot clearer.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="umount-device-is-busy.-why-score-493778-in-2017" class="level3">
<h3>67: umount: device is busy. Why? (score <a href="https://stackoverflow.com/q/15024.html">493778</a> in 2017)</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<p>When running <code>umount /path</code> I get:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb440-1" title="1"><span class="ex">umount</span>: /path: device is busy.</a></code></pre></div>
<p>The filesystem is huge, so <code>lsof +D /path</code> is not a realistic option.</p>
<p><code>lsof /path</code>, <code>lsof +f -- /path</code>, and <code>fuser /path</code> all return nothing. <code>fuser -v /path</code> gives:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb441-1" title="1">                  <span class="ex">USER</span>        PID ACCESS COMMAND</a>
<a class="sourceLine" id="cb441-2" title="2">/path:            <span class="ex">root</span>     kernel mount /path</a></code></pre></div>
<p>which is normal for all unused mounted file systems.</p>
<p><code>umount -l</code> and <code>umount -f</code> is not good enough for my situation.</p>
<p>How do I figure out why the kernel thinks this filesystem is busy?</p>
</section>
<section id="answer-accepted-score-139" class="level4">
<h4>Answer accepted (score 139)</h4>
<p>It seems the cause for my issue was the <code>nfs-kernel-server</code> was exporting the directory. The <code>nfs-kernel-server</code> probably goes behind the normal open files and thus is not listed by <code>lsof</code> and <code>fuser</code>.</p>
<p>When I stopped the <code>nfs-kernel-server</code> I could <code>umount</code> the directory.</p>
<p>I have made a page with examples of all solutions so far here: <a href="http://oletange.blogspot.com/2012/04/umount-device-is-busy-why.html">http://oletange.blogspot.com/2012/04/umount-device-is-busy-why.html</a></p>
</section>
<section id="answer-2-score-41" class="level4">
<h4>Answer 2 (score 41)</h4>
<p>To add to <a href="https://unix.stackexchange.com/users/15815/brucecran">BruceCran</a>‘s <a href="https://unix.stackexchange.com/questions/15024/umount-device-is-busy-why#comment43883_15027">comment</a> above, the cause for my manifestation of this problem just now was a <em>stale</em> loopback mount. I’d already checked the output of <code>fuser -vm &amp;lt;mountpoint&amp;gt;</code>/<code>lsof +D &amp;lt;mountpoint&amp;gt;</code>, <code>mount</code> and <code>cat /proc/mounts</code>, checked whether some old nfs-kernel-server was running, turned off quotas, attempted (but failed) a <code>umount -f &amp;lt;mountpoint&amp;gt;</code> and all but resigned myself to abandoning 924 days’ uptime before finally checking the output of <code>losetup</code> and finding two stale configured-but-not-mounted loopbacks:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb442-1" title="1"><span class="ex">parsley</span>:/mnt# cat /proc/mounts </a>
<a class="sourceLine" id="cb442-2" title="2"><span class="ex">rootfs</span> / rootfs rw 0 0</a>
<a class="sourceLine" id="cb442-3" title="3"><span class="ex">none</span> /sys sysfs rw,nosuid,nodev,noexec 0 0</a>
<a class="sourceLine" id="cb442-4" title="4"><span class="ex">none</span> /proc proc rw,nosuid,nodev,noexec 0 0</a>
<a class="sourceLine" id="cb442-5" title="5"><span class="ex">udev</span> /dev tmpfs rw,size=10240k,mode=755 0 0</a>
<a class="sourceLine" id="cb442-6" title="6"><span class="ex">/dev/mapper/stuff-root</span> / ext3 rw,errors=remount-ro,data=ordered 0 0</a>
<a class="sourceLine" id="cb442-7" title="7"><span class="ex">tmpfs</span> /lib/init/rw tmpfs rw,nosuid,mode=755 0 0</a>
<a class="sourceLine" id="cb442-8" title="8"><span class="ex">usbfs</span> /proc/bus/usb usbfs rw,nosuid,nodev,noexec 0 0</a>
<a class="sourceLine" id="cb442-9" title="9"><span class="ex">tmpfs</span> /dev/shm tmpfs rw,nosuid,nodev 0 0</a>
<a class="sourceLine" id="cb442-10" title="10"><span class="ex">devpts</span> /dev/pts devpts rw,nosuid,noexec,gid=5,mode=620 0 0</a>
<a class="sourceLine" id="cb442-11" title="11"><span class="ex">fusectl</span> /sys/fs/fuse/connections fusectl rw 0 0</a>
<a class="sourceLine" id="cb442-12" title="12"><span class="ex">/dev/dm-2</span> /mnt/big ext3 rw,errors=remount-ro,data=ordered,jqfmt=vfsv0,usrjquota=aquota.user 0 0</a></code></pre></div>
<p>then</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb443-1" title="1"><span class="ex">parsley</span>:/mnt# fuser -vm /mnt/big/</a>
<a class="sourceLine" id="cb443-2" title="2"><span class="ex">parsley</span>:/mnt# lsof +D big</a>
<a class="sourceLine" id="cb443-3" title="3"><span class="ex">parsley</span>:/mnt# umount -f /mnt/big/</a>
<a class="sourceLine" id="cb443-4" title="4"><span class="ex">umount2</span>: Device or resource busy</a>
<a class="sourceLine" id="cb443-5" title="5"><span class="ex">umount</span>: /mnt/big: device is busy</a>
<a class="sourceLine" id="cb443-6" title="6"><span class="ex">umount2</span>: Device or resource busy</a>
<a class="sourceLine" id="cb443-7" title="7"><span class="ex">umount</span>: /mnt/big: device is busy</a>
<a class="sourceLine" id="cb443-8" title="8"></a>
<a class="sourceLine" id="cb443-9" title="9"><span class="ex">parsley</span>:/mnt# losetup -a    </a>
<a class="sourceLine" id="cb443-10" title="10"><span class="ex">/dev</span>/loop0: [<span class="ex">fd02</span>]:59 (/mnt/big/dot-dropbox.ext2)</a>
<a class="sourceLine" id="cb443-11" title="11"><span class="ex">/dev</span>/loop1: [<span class="ex">fd02</span>]:59 (/mnt/big/dot-dropbox.ext2)</a>
<a class="sourceLine" id="cb443-12" title="12"></a>
<a class="sourceLine" id="cb443-13" title="13"><span class="ex">parsley</span>:/mnt# losetup -d /dev/loop0</a>
<a class="sourceLine" id="cb443-14" title="14"><span class="ex">parsley</span>:/mnt# losetup -d /dev/loop1</a>
<a class="sourceLine" id="cb443-15" title="15"><span class="ex">parsley</span>:/mnt# losetup -a</a>
<a class="sourceLine" id="cb443-16" title="16"><span class="ex">parsley</span>:/mnt# umount big/</a>
<a class="sourceLine" id="cb443-17" title="17"><span class="ex">parsley</span>:/mnt#</a></code></pre></div>
<p>A <a href="http://forums.gentoo.org/viewtopic-p-3928386.html#3928386" rel="noreferrer">Gentoo forum post</a> also lists swapfiles as a potential culprit; although swapping to files is probably pretty rare these days, it can’t hurt to check the output of <code>cat /proc/swaps</code>. I’m not sure whether quotas could ever prevent an unmount — I was clutching at straws.</p>
</section>
<section id="answer-3-score-22-2" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>Instead of using lsof to crawl through the file system, just use the total list of open files and grep it. I find this returns must faster, although it’s less accurate. It should get the job done.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb444-1" title="1"><span class="ex">lsof</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;/path&#39;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="repeat-a-unix-command-every-x-seconds-forever-score-492897-in-2017" class="level3">
<h3>68: Repeat a Unix command every x seconds forever (score <a href="https://stackoverflow.com/q/10646.html">492897</a> in 2017)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>There’s a built-in Unix command <code>repeat</code> whose first argument is the number of times to repeat a command, where the command (with any arguments) is specified by the remaining arguments to <code>repeat</code>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb445-1" title="1"><span class="ex">%</span> repeat 100 echo <span class="st">&quot;I will not automate this punishment.&quot;</span></a></code></pre></div>
<p>will echo the given string 100 times and then stop.</p>
<p>I’d like a similar command – let’s call it <code>forever</code> – that works similarly except the first argument is the number of seconds to pause between repeats, and it repeats forever. For example,</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb446-1" title="1"><span class="ex">%</span> forever 5 echo <span class="st">&quot;This will get echoed every 5 seconds forever and ever.&quot;</span></a></code></pre></div>
<p>I thought I’d ask if such a thing exists before I write it. I know it’s like a 2-line Perl or Python script, but maybe there’s a more standard way to do this. If not, feel free to post a solution in your favorite scripting language, <a href="https://stackoverflow.com/questions/61863/rosetta-stone-sorting">Rosetta Stone</a> style.</p>
<p>
PS: Maybe a better way to do this would be to generalize <code>repeat</code> to take both the number of times to repeat (with -1 meaning infinity) and the number of seconds to sleep between repeats. The above examples would then become:
</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb447-1" title="1"><span class="ex">%</span> repeat 100 0 echo <span class="st">&quot;I will not automate this punishment.&quot;</span></a>
<a class="sourceLine" id="cb447-2" title="2"><span class="ex">%</span> repeat -1 5 echo <span class="st">&quot;This will get echoed every 5 seconds forever.&quot;</span></a></code></pre></div>
</section>
<section id="answer-2-score-619" class="level4">
<h4>Answer 2 (score 619)</h4>
<p>Try the <code>watch</code> command.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb448-1" title="1"><span class="ex">Usage</span>: watch [-dhntv] [--differences[=cumulative]] [--help] [--interval=<span class="op">&lt;</span>n<span class="op">&gt;</span>] </a>
<a class="sourceLine" id="cb448-2" title="2">             [<span class="ex">--no-title</span>] [--version] <span class="op">&lt;</span>command<span class="op">&gt;</span><span class="kw">`</span></a></code></pre></div>
<p>So that:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb449-1" title="1"><span class="ex">watch</span> -n1  command</a></code></pre></div>
<p>will run the command every second (well, technically, every one second plus the time it takes for <code>command</code> to run as <code>watch</code> (at least the <code>procps</code> and <code>busybox</code> implementations) just sleeps one second in between two runs of <code>command</code>), forever.</p>
<p>Would you want to pass the command to <code>exec</code> instead of <code>sh -c</code>, use <code>-x</code> option:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb450-1" title="1"><span class="ex">watch</span> -n1 -x command</a></code></pre></div>
<hr>
<p>On macOS, you can get <code>watch</code> from <a href="http://www.macports.org/" rel="noreferrer">Mac Ports</a>:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb451-1" title="1"><span class="ex">port</span> install watch</a></code></pre></div>
<p>Or you can get it from <a href="http://brewformulas.org/Watch" rel="noreferrer">Homebrew</a>:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb452-1" title="1"><span class="ex">brew</span> install watch</a></code></pre></div>
</section>
<section id="answer-3-score-245" class="level4">
<h4>Answer 3 (score 245)</h4>
<p><strong>Bash</strong></p>
<p><code>while</code> + <code>sleep</code>:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb453-1" title="1"><span class="kw">while</span> <span class="fu">true</span></a>
<a class="sourceLine" id="cb453-2" title="2"><span class="kw">do</span> </a>
<a class="sourceLine" id="cb453-3" title="3">    <span class="bu">echo</span> <span class="st">&quot;Hi&quot;</span></a>
<a class="sourceLine" id="cb453-4" title="4">    <span class="fu">sleep</span> 1</a>
<a class="sourceLine" id="cb453-5" title="5"><span class="kw">done</span></a></code></pre></div>
<p>Here’s the same thing as a shorthand one-liner (From the comments below):</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb454-1" title="1"><span class="kw">while</span> <span class="fu">sleep</span> 1<span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;Hi&quot;</span><span class="kw">;</span> <span class="kw">done</span></a></code></pre></div>
<p>Uses <code>;</code> to separate commands and uses <code>sleep 1</code> for the <code>while</code> test since it always returns true. You can put more commands in the loop - just separate them with <code>;</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-get-a-list-of-all-scheduled-cron-jobs-on-my-machine-score-492891-in" class="level3">
<h3>69: How can get a list of all scheduled cron jobs on my machine? (score <a href="https://stackoverflow.com/q/7053.html">492891</a> in )</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>My sysadmin has set up a bunch of cron jobs on my machine. I’d like to know exactly what is scheduled for what time. How can I get that list?</p>
</section>
<section id="answer-accepted-score-143" class="level4">
<h4>Answer accepted (score 143)</h4>
<p>Depending on how your linux system is set up, you can look in:</p>
<ul>
<li>
<code>/var/spool/cron/*</code> (user crontabs)
</li>
<li>
<code>/etc/crontab</code> (system-wide crontab)
</li>
</ul>
<p>also, many distros have:</p>
<ul>
<li>
<p>
<code>/etc/cron.d/*</code> These configurations have the same syntax as <code>/etc/crontab</code>
</p>
</li>
<li>
<p>
<code>/etc/cron.hourly</code>, <code>/etc/cron.daily</code>, <code>/etc/cron.weekly</code>, <code>/etc/cron.monthly</code>
</p>
</li>
</ul>
<p>These are simply directories that contain executables that are executed hourly, daily, weekly or monthly, per their directory name.</p>
<p>On top of that, you can have at jobs (check <code>/var/spool/at/*</code>), anacron (<code>/etc/anacrontab</code> and <code>/var/spool/anacron/*</code>) and probably others I’m forgetting.</p>
</section>
<section id="answer-2-score-137" class="level4">
<h4>Answer 2 (score 137)</h4>
<p>With most Crons (e.g. <a href="https://en.wikipedia.org/wiki/Cron#Modern_versions">Vixie-Cron</a> - Debian/Ubuntu default, Cronie - Fedora default, Solaris Cron …) you get the list of scheduled cron jobs for the current user via:</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb455-1" title="1">$ <span class="ex">crontab</span> -l</a></code></pre></div>
<p>or for another user via</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb456-1" title="1"><span class="co"># crontab -l -u juser</span></a></code></pre></div>
<p>To get the crontabs for all users you can loop over all users and call this command.</p>
<p>Alternatively, you can look up the spool files. Usually, they are are saved under <code>/var/spool/cron</code>, e.g. for vcron following directory</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb457-1" title="1"><span class="ex">/var/spool/cron/crontabs</span></a></code></pre></div>
<p>contains all the configured crontabs of all users - except the root user who is also able to configure jobs via the system-wide crontab, which is located at</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb458-1" title="1"><span class="ex">/etc/crontab</span></a></code></pre></div>
<p>With <a href="https://fedorahosted.org/cronie">cronie</a> (default on Fedora/CentOS), there is a <code>.d</code> style config directory for system cron jobs, as well:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb459-1" title="1"><span class="ex">/etc/cron.d</span></a></code></pre></div>
<p>(As always, the <code>.d</code> directory simplifies maintaining configuration entries that are part of different packages.)</p>
<p>For convenience, most distributions also provide a directories where linked/stored scripts are periodically executed, e.g.:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb460-1" title="1"><span class="ex">/etc/cron.daily</span></a>
<a class="sourceLine" id="cb460-2" title="2"><span class="ex">/etc/cron.hourly</span></a>
<a class="sourceLine" id="cb460-3" title="3"><span class="ex">/etc/cron.monthly</span></a>
<a class="sourceLine" id="cb460-4" title="4"><span class="ex">/etc/cron.weekly</span></a></code></pre></div>
<p>The timely execution of those scripts is usually managed via <code>run-parts</code> entries in the system crontab or via <a href="https://en.wikipedia.org/wiki/Anacron">anacron</a>.</p>
<p>With <a href="https://en.wikipedia.org/wiki/Systemd">Systemd</a> (e.g. on Fedora, CentOS 7, …) periodic job execution can additionally be configured via <a href="https://www.freedesktop.org/software/systemd/man/systemd.timer.html">timer units</a>. The enabled system timers can be displayed via:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb461-1" title="1">$ <span class="ex">systemctl</span> list-timers</a></code></pre></div>
<p>Note that users beside root may have user systemd instances running where timers are configured, as well. For example, on Fedora, by default, a user systemd instance is started for each user that is currently logged in. They can be recognized via:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb462-1" title="1">$ <span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;systemd[ ]--user&#39;</span></a></code></pre></div>
<p>Those user timers can be listed via:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb463-1" title="1">$ <span class="ex">systemctl</span> --user list-timers</a></code></pre></div>
<p>An alternative to issuing the <code>list-timers</code> command is to search for timer unit files (pattern: <code>*.timer</code>) and symbolic links to them in the usual system and user systemd config directories:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb464-1" title="1">$ <span class="fu">find</span> /usr/lib/systemd/ /etc/systemd -name <span class="st">&#39;*.timer&#39;</span></a>
<a class="sourceLine" id="cb464-2" title="2">$ <span class="fu">find</span> /home <span class="st">&#39;(&#39;</span> -path <span class="st">&#39;/home/*/.local/share/systemd/user/*&#39;</span> \</a>
<a class="sourceLine" id="cb464-3" title="3">              -o -path <span class="st">&#39;/home/*/.config/systemd/*&#39;</span> <span class="st">&#39;)&#39;</span> \</a>
<a class="sourceLine" id="cb464-4" title="4">      -name <span class="st">&#39;*.timer&#39;</span>  <span class="op">2&gt;</span> /dev/null</a></code></pre></div>
<p>(As with normal service units, a timer unit is enabled via creating a symbolic link in the right systemd config directory.)</p>
<p>See also:</p>
<ul>
<li>
<a href="https://wiki.archlinux.org/index.php/cron">ArchWiki article on Cron</a>
</li>
<li>
<a href="https://wiki.archlinux.org/index.php/Systemd/Timers">ArchWiki article on Systemd Timers</a>
</li>
</ul>
</section>
<section id="answer-3-score-5-3" class="level4">
<h4>Answer 3 (score 5)</h4>
<p>To list all crons for the given user.</p>
<blockquote>
crontab -u username -l;
</blockquote>
<p>To list all crons for all users</p>
<p>Run it as a super user</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb465-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb465-2" title="2"><span class="co">#List all cron jobs for all users</span></a>
<a class="sourceLine" id="cb465-3" title="3"><span class="kw">for</span> <span class="ex">user</span> in <span class="kw">`</span><span class="fu">cat</span> /etc/passwd <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&quot;:&quot;</span> -f1<span class="kw">`;</span></a>
<a class="sourceLine" id="cb465-4" title="4"><span class="kw">do</span> </a>
<a class="sourceLine" id="cb465-5" title="5"><span class="ex">crontab</span> -l -u <span class="va">$user</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb465-6" title="6"><span class="kw">done</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-fix-cannot-find-a-valid-baseurl-for-repo-errors-on-centos-score-492382-in-2011" class="level3">
<h3>70: How can I fix “cannot find a valid baseurl for repo” errors on CentOS? (score <a href="https://stackoverflow.com/q/22924.html">492382</a> in 2011)</h3>
<section id="question-69" class="level4">
<h4>Question</h4>
<p>I finished installing CentOS 6, but when I tried running <code>yum update</code> I got:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb466-1" title="1">[<span class="ex">root@centos6test</span> ~]# yum update</a>
<a class="sourceLine" id="cb466-2" title="2"><span class="ex">Loaded</span> plugins: fastestmirror, refresh-packagekit</a>
<a class="sourceLine" id="cb466-3" title="3"><span class="ex">Determining</span> fastest mirrors</a>
<a class="sourceLine" id="cb466-4" title="4"><span class="ex">Could</span> not retrieve mirrorlist http://mirrorlist.centos.org/?release=6<span class="kw">&amp;</span><span class="va">arch=</span>i386<span class="kw">&amp;</span><span class="va">repo=</span>os</a>
<a class="sourceLine" id="cb466-5" title="5"><span class="ex">error</span> was 14: PYCURL ERROR 6 - <span class="st">&quot;&quot;</span> Error: Cannot find a valid baseurl for repo: base</a></code></pre></div>
<p>Why is that happening? How can I fix it?</p>
</section>
<section id="answer-accepted-score-165" class="level4">
<h4>Answer accepted (score 165)</h4>
<p>First you need to get connected, AFAIK CentOS 6 minimal set your network device to <code>ONBOOT=No</code>, just do a <code>dhclient</code> with admin privileges to your network interface and you should be up and running:</p>
<p><code>$ sudo dhclient</code></p>
</section>
<section id="answer-2-score-24-1" class="level4">
<h4>Answer 2 (score 24)</h4>
<p>
<dl>
<dt>I had been struggling with the same problem on <strong>Centos6.4</strong> x86_64. I got the following error</dt>
<dd></p>
</dd>
</dl>
<div class="sourceCode" id="cb467"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb467-1" title="1"><span class="ex">Could</span> not retrieve mirrorlist http://mirrorlist.centos.org/?release=6<span class="kw">&amp;</span><span class="va">arch=</span>x86_64<span class="kw">&amp;</span><span class="va">repo=</span>os <span class="ex">error</span> was 14: PYCURL ERROR 6 - <span class="st">&quot;Couldn&#39;t resolve host &#39;mirrorlist.centos.org&#39;&quot;</span> Error: Cannot find a valid baseurl for repo: base</a></code></pre></div>
<p>So, I fixed it by these steps:</p>
<p>
edit network interface. For my case, I used <code>eth0</code> in CentOS 6.X In CentOS 7 you can use the “ensxxx” interface.
</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb468-1" title="1"><span class="ex">vim</span> /etc/sysconfig/network-scripts/ifcfg-eth0</a></code></pre></div>
<p>update <strong>NM_CONTROLLED</strong> to <strong>no</strong></p>
<div class="sourceCode" id="cb469"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb469-1" title="1"><span class="va">ONBOOT=</span>no</a>
<a class="sourceLine" id="cb469-2" title="2"><span class="va">NM_CONTROLLED=</span>no</a>
<a class="sourceLine" id="cb469-3" title="3"><span class="va">BOOTPROTO=</span>dhcp</a>
<a class="sourceLine" id="cb469-4" title="4"><span class="va">DNS1=</span>8.8.8.8</a>
<a class="sourceLine" id="cb469-5" title="5"><span class="va">DNS2=</span>4.2.2.2</a></code></pre></div>
<p>restart the network interface</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb470-1" title="1"><span class="ex">ifdown</span> eth0</a>
<a class="sourceLine" id="cb470-2" title="2"><span class="ex">ifup</span> eth0</a></code></pre></div>
</section>
<section id="answer-3-score-14-1" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>I had the same issue and it got resolved after I edited <code>/etc/yum.conf</code> file. If you are running on proxy server and the IP which is given to the server is bypassed but still when you open in browser (IE - we need to give check mark on proxy but no need to give username and password.)</p>
<p>Add this following line in the main section of the file /etc/yum.conf file.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb471-1" title="1"><span class="va">proxy=</span>http://xxx.xxx.xx.xx:8080</a></code></pre></div>
<p>ie, substituting the proxy address with actual proxy. Also change the port number if it is not 8080.</p>
<p>If proxy requires authentication, add this also to the file</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb472-1" title="1"><span class="va">proxy_username=</span>username</a>
<a class="sourceLine" id="cb472-2" title="2"><span class="va">proxy_password=</span>password</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-clean-log-file-score-490027-in-2015" class="level3">
<h3>71: How to clean log file? (score <a href="https://stackoverflow.com/q/92384.html">490027</a> in 2015)</h3>
<section id="question-70" class="level4">
<h4>Question</h4>
<p>Is there a better way to clean the log file? I usually delete the old logfile and create a new logfile and I am looking for a shorter type/bash/command program. How can I use an alias?</p>
</section>
<section id="answer-accepted-score-335" class="level4">
<h4>Answer accepted (score 335)</h4>
<div class="sourceCode" id="cb473"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb473-1" title="1"><span class="op">&gt;</span> <span class="ex">logfile</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb474-1" title="1"><span class="fu">cat</span> /dev/null <span class="op">&gt;</span> logfile</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb475-1" title="1"><span class="fu">true</span> <span class="kw">|</span> <span class="fu">tee</span> logfile</a></code></pre></div>
<p>(fell free to substitute <code>false</code> or any other command that produces no output, like e.g. <code>:</code> does in <code>bash</code>) if you want to be more eloquent, will all empty <code>logfile</code> (actually they will truncate it to zero size).</p>
<p>If you want to know how long it “takes”, you may use</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb476-1" title="1"><span class="fu">dd</span> if=/dev/null of=logfile</a></code></pre></div>
<p>(which is the same as <code>dd if=/dev/null &amp;gt; logfile</code>, by the way)</p>
<p>You can also use</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb477-1" title="1"><span class="ex">truncate</span> --size 0 logfile</a></code></pre></div>
<p>(or <code>truncate -s 0 logfile</code>) to be perfectly explicit or, if you don’t want to,</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb478-1" title="1"><span class="fu">rm</span> logfile</a></code></pre></div>
<p>(in which case you are relying on the common behaviour that applications usually do recreate a logfile if it doesn’t exist already).</p>
<p>However, since logfiles are usually useful, you might want to compress and save a copy. While you could do that with your own script, it is a good idea to at least try using an existing working solution, in this case <code>logrotate</code>, which can do exactly that and is reasonably configurable.</p>
<p>Should you need to do it for several files, the safe way is</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb479-1" title="1"><span class="ex">truncate</span> -s 0 file1 file2 ...</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb480-1" title="1"><span class="op">&gt;</span> <span class="ex">file1</span> <span class="op">&gt;</span> file2 ...</a></code></pre></div>
<p>Some shells (<code>zsh</code>) also allow one to specify several redirection targets.</p>
<p>This works (at least in <code>bash</code>) since it creates all the redirections required although only the last one will catch any input (or none in this case). The <code>tee</code> example with several files should work in any case (given your <code>tee</code> does know how to handle several output files)</p>
<p>Of course, the good old shell loop would work as well:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb481-1" title="1"><span class="kw">for</span> <span class="ex">f</span> in file1 file2 ... <span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb481-2" title="2">    <span class="co"># pick your favourite emptying method</span></a>
<a class="sourceLine" id="cb481-3" title="3"><span class="kw">done</span></a></code></pre></div>
<p>although it will be much slower due to the command being run separately for each file. That may be helped by using <code>find</code>:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb482-1" title="1"><span class="fu">find</span> <span class="op">&lt;</span>criteria matching required files<span class="op">&gt;</span> \</a>
<a class="sourceLine" id="cb482-2" title="2">    -exec <span class="op">&lt;</span>command capable of zeroing several files<span class="op">&gt;</span> {} \<span class="ex">+</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb483-1" title="1"><span class="fu">find</span> <span class="op">&lt;</span>criteria matching required files<span class="op">&gt;</span> -delete</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-eval-command-in-bash-score-487764-in-2016" class="level3">
<h3>72: What is the “eval” command in bash? (score <a href="https://stackoverflow.com/q/23111.html">487764</a> in 2016)</h3>
<section id="question-71" class="level4">
<h4>Question</h4>
<p>What can you do with the <code>eval</code> command? Why is it useful? Is it some kind of a built-in function in bash? There is no <code>man</code> page for it..</p>
</section>
<section id="answer-accepted-score-134" class="level4">
<h4>Answer accepted (score 134)</h4>
<p><code>eval</code> is part of POSIX. Its an interface which can be a shell built-in.</p>
<p>Its described in the “POSIX Programmer’s Manual”: <a href="http://www.unix.com/man-page/posix/1posix/eval/">http://www.unix.com/man-page/posix/1posix/eval/</a></p>
<div class="sourceCode" id="cb484"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb484-1" title="1"><span class="bu">eval</span> - construct command by concatenating arguments</a></code></pre></div>
<p>It will take an argument and construct a command of it, which will be executed by the shell. This is the example of the manpage:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb485-1" title="1"><span class="ex">1</span>) <span class="va">foo=</span>10 <span class="va">x=</span>foo</a>
<a class="sourceLine" id="cb485-2" title="2"><span class="ex">2</span>) <span class="va">y=</span><span class="st">&#39;$&#39;</span><span class="va">$x</span></a>
<a class="sourceLine" id="cb485-3" title="3"><span class="ex">3</span>) <span class="bu">echo</span> <span class="va">$y</span></a>
<a class="sourceLine" id="cb485-4" title="4"><span class="ex">4</span>) <span class="va">$foo</span></a>
<a class="sourceLine" id="cb485-5" title="5"><span class="ex">5</span>) <span class="bu">eval</span> y=<span class="st">&#39;$&#39;</span><span class="va">$x</span></a>
<a class="sourceLine" id="cb485-6" title="6"><span class="ex">6</span>) <span class="bu">echo</span> <span class="va">$y</span></a>
<a class="sourceLine" id="cb485-7" title="7"><span class="ex">7</span>) <span class="ex">10</span></a></code></pre></div>
<ol>
<li>
In the first line you define <code>$foo</code> with the value <code>'10'</code> and <code>$x</code> with the value <code>'foo'</code>.
</li>
<li>
Now define <code>$y</code>, which consists of the string <code>'$foo'</code>. The dollar sign must be escaped with <code>'$'</code>.
</li>
<li>
To check the result, <code>echo $y</code>.
</li>
<li>
The result will be the string <code>'$foo'</code>
</li>
<li>
Now we repeat the assignment with <code>eval</code>. It will first evaluate <code>$x</code> to the string <code>'foo'</code>. Now we have the statement <code>y=$foo</code> which will get evaluated to <code>y=10</code>.
</li>
<li>
The result of <code>echo $y</code> is now the value <code>'10'</code>.
</li>
</ol>
<p>
This is a common function in many languages, e.g. Perl and JavaScript. Have a look at perldoc eval for more examples: <a href="http://perldoc.perl.org/functions/eval.html">http://perldoc.perl.org/functions/eval.html</a>
</p>
</section>
<section id="answer-2-score-60-1" class="level4">
<h4>Answer 2 (score 60)</h4>
<p>Yes, <code>eval</code> is a bash internal command so it is described in <code>bash</code> man page.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb486-1" title="1"><span class="bu">eval</span> [arg ...]</a>
<a class="sourceLine" id="cb486-2" title="2">    <span class="ex">The</span>  args  are read and concatenated together into a single com-</a>
<a class="sourceLine" id="cb486-3" title="3">    <span class="ex">mand.</span>  This command is then read and executed by the shell,  and</a>
<a class="sourceLine" id="cb486-4" title="4">    <span class="ex">its</span>  exit status is returned as the value of eval.  If there are</a>
<a class="sourceLine" id="cb486-5" title="5">    <span class="ex">no</span> args, or only null arguments, eval returns 0.</a></code></pre></div>
<p>Usually it is used in combination with a <a href="https://en.wikipedia.org/wiki/Command_substitution" rel="noreferrer"><em>Command Substitution</em></a>. Without an explicit <code>eval</code>, the shell tries to <em>execute</em> the result of a command substitution, not to <em>evaluate</em> it.</p>
<p>Say that you want to code an equivalent of <code>VAR=value; echo $VAR</code>. Note the difference in how the shell handles the writings of <code>echo VAR=value</code>:</p>
<ol>
<li>
<div class="sourceCode" id="cb487"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb487-1" title="1"><span class="ex">andcoz@...</span>:~<span class="op">&gt;</span> <span class="va">$(</span> <span class="bu">echo</span> VAR=value <span class="va">)</span></a>
<a class="sourceLine" id="cb487-2" title="2"><span class="ex">bash</span>: VAR=value: command not found</a>
<a class="sourceLine" id="cb487-3" title="3"><span class="ex">andcoz@...</span>:~<span class="op">&gt;</span> echo <span class="va">$VAR</span></a>
<a class="sourceLine" id="cb487-4" title="4"><span class="op">&lt;</span><span class="ex">empty</span> line<span class="op">&gt;</span></a></code></pre></div>
The shell tries to execute <code>echo</code> and <code>VAR=value</code> as two separate commands. It throws an error about the second string. The assignment remains ineffective.
</li>
<li>
<div class="sourceCode" id="cb488"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb488-1" title="1"><span class="ex">andcoz@...</span>:~<span class="op">&gt;</span> eval <span class="va">$(</span> <span class="bu">echo</span> VAR=value <span class="va">)</span></a>
<a class="sourceLine" id="cb488-2" title="2"><span class="ex">andcoz@...</span>:~<span class="op">&gt;</span> echo <span class="va">$VAR</span></a>
<a class="sourceLine" id="cb488-3" title="3"><span class="ex">value</span></a></code></pre></div>
The shell merges (concatenates) the two strings <code>echo</code> and <code>VAR=value</code>, parses this single unit according to appropriate rules and executes it.
</li>
</ol>
<p>Last but not least, <code>eval</code> can be a very dangerous command. Any input to an <code>eval</code> command must be carefully checked to avoid security problems.</p>
</section>
<section id="answer-3-score-18-2" class="level4">
<h4>Answer 3 (score 18)</h4>
<p><code>eval</code> has no man page because it is not a separate external command, but rather a shell built-in, meaning a command internal to and known only by the shell (<code>bash</code>). The relevant part of the <code>bash</code> man page says:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb489-1" title="1"><span class="bu">eval</span> [arg ...]</a>
<a class="sourceLine" id="cb489-2" title="2">    <span class="ex">The</span> args are read and concatenated together into a single command.  </a>
<a class="sourceLine" id="cb489-3" title="3">    <span class="ex">This</span> command is then  read  and executed by the shell, and its exit </a>
<a class="sourceLine" id="cb489-4" title="4">    <span class="ex">status</span> is returned as the value of eval.  If there are no args, or only </a>
<a class="sourceLine" id="cb489-5" title="5">    <span class="ex">null</span> arguments, eval returns 0</a></code></pre></div>
<p>In addition, the output if <code>help eval</code> is:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb490-1" title="1"><span class="ex">eval</span>: eval [arg ...]</a>
<a class="sourceLine" id="cb490-2" title="2">    <span class="ex">Execute</span> arguments as a shell command.</a>
<a class="sourceLine" id="cb490-3" title="3"></a>
<a class="sourceLine" id="cb490-4" title="4">    <span class="ex">Combine</span> ARGs into a single string, use the result as input to the shell,</a>
<a class="sourceLine" id="cb490-5" title="5">    <span class="ex">and</span> execute the resulting commands.</a>
<a class="sourceLine" id="cb490-6" title="6"></a>
<a class="sourceLine" id="cb490-7" title="7">    <span class="ex">Exit</span> Status:</a>
<a class="sourceLine" id="cb490-8" title="8">    <span class="ex">Returns</span> exit status of command or success if command is null.</a></code></pre></div>
<p><code>eval</code> is a powerful command and if you intend to use it you should be very careful to head off the possible <a href="http://mywiki.wooledge.org/BashFAQ/048">security risks</a> that come with it.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-does-find--mtime-1-only-return-files-older-than-2-days-score-480450-in-2015" class="level3">
<h3>73: Why does find -mtime +1 only return files older than 2 days? (score <a href="https://stackoverflow.com/q/92346.html">480450</a> in 2015)</h3>
<section id="question-72" class="level4">
<h4>Question</h4>
<p>I’m struggling to wrap my mind around <em>why</em> the <code>find</code> interprets file modification times the way it does. Specifically, I don’t understand why the <code>-mtime +1</code> doesn’t show files less than 48 hours old.</p>
<p>As an example test I created three test files with different modified dates:</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb491-1" title="1">[<span class="ex">root@foobox</span> findtest]# ls -l</a>
<a class="sourceLine" id="cb491-2" title="2"><span class="ex">total</span> 0</a>
<a class="sourceLine" id="cb491-3" title="3"><span class="ex">-rw-r--r--</span> 1 root root 0 Sep 25 08:44 foo1</a>
<a class="sourceLine" id="cb491-4" title="4"><span class="ex">-rw-r--r--</span> 1 root root 0 Sep 24 08:14 foo2</a>
<a class="sourceLine" id="cb491-5" title="5"><span class="ex">-rw-r--r--</span> 1 root root 0 Sep 23 08:14 foo3</a></code></pre></div>
<p>I then ran find with the <code>-mtime +1</code> switch and got the following output:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb492-1" title="1">[<span class="ex">root@foobox</span> findtest]# find -mtime +1</a>
<a class="sourceLine" id="cb492-2" title="2"><span class="ex">./foo3</span></a></code></pre></div>
<p>I then ran find with the <code>-mmin +1440</code> and got the following output:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb493-1" title="1">[<span class="ex">root@foobox</span> findtest]# find -mmin +1440</a>
<a class="sourceLine" id="cb493-2" title="2"><span class="ex">./foo3</span></a>
<a class="sourceLine" id="cb493-3" title="3"><span class="ex">./foo2</span></a></code></pre></div>
<p>As per the man page for find, I understand that this is expected behavior:</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb494-1" title="1"> <span class="ex">-mtime</span> n</a>
<a class="sourceLine" id="cb494-2" title="2">        <span class="ex">File</span>’s  data was last modified n*24 hours ago.  See the comments</a>
<a class="sourceLine" id="cb494-3" title="3">        <span class="kw">for</span> <span class="ex">-atime</span> to understand how rounding affects the interpretation</a>
<a class="sourceLine" id="cb494-4" title="4">        <span class="ex">of</span> file modification times.</a>
<a class="sourceLine" id="cb494-5" title="5"></a>
<a class="sourceLine" id="cb494-6" title="6"></a>
<a class="sourceLine" id="cb494-7" title="7"><span class="ex">-atime</span> n</a>
<a class="sourceLine" id="cb494-8" title="8">       <span class="ex">File</span>  was  last  accessed n*24 hours ago.  When find figures out</a>
<a class="sourceLine" id="cb494-9" title="9">       <span class="ex">how</span> many 24-hour periods ago the file  was  last  accessed,  any</a>
<a class="sourceLine" id="cb494-10" title="10">       <span class="ex">fractional</span> part is ignored, so to match -atime +1, a file has to</a>
<a class="sourceLine" id="cb494-11" title="11">       <span class="ex">have</span> been accessed at least two days ago.</a></code></pre></div>
<p>This still doesn’t make sense to me though. So if a file is 1 day, 23 hours, 59 minutes, and 59 seconds old, <code>find -mtime +1</code> ignores all that and just treats it like it’s 1 day, 0 hours, 0 minutes, and 0 seconds old? In which case, it’s not technically older that 1 day and ignored?</p>
<p>Does… not… compute.</p>
</section>
<section id="answer-accepted-score-87" class="level4">
<h4>Answer accepted (score 87)</h4>
<p>Well, the simple answer is, I guess, that your find implementation is following the POSIX/SuS standard, which says it must behave this way. Quoting from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html">SUSv4/IEEE Std 1003.1, 2013 Edition, “find”</a>:</p>
<blockquote>
<p>
-mtime n<br>      The primary shall evaluate as true if the file modification time subtracted<br>      from the initialization time, divided by 86400 (with any remainder discarded), is n.
</p>
</blockquote>
<p>(Elsewhere in that document it explains that <code>n</code> can actually be <code>+n</code>, and the meaning of that as “greater than”).</p>
<p>As to why the standard says it shall behave that way—well, I’d guess long in the past a programmer was lazy or not thinking about it, and just wrote the C code <code>(current_time - file_time) / 86400</code>. C integer arithmetic discards the remainder. Scripts started depending on that behavior, and thus it was standardized.</p>
<p>The spec’d behavior would also be portable to a hypothetical system that only stored a modification date (not time). I don’t know if such a system has existed.</p>
</section>
<section id="answer-2-score-84-1" class="level4">
<h4>Answer 2 (score 84)</h4>
<p>The argument to <code>-mtime</code> is interpreted as the number of <strong>whole days</strong> in the age of the file. <code>-mtime +n</code> means <strong>strictly greater than</strong>, <code>-mtime -n</code> means <strong>strictly</strong> less than.</p>
<p>Note that with Bash, you can do the more intuitive:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb495-1" title="1">$ <span class="fu">find</span> . -mmin +<span class="va">$((</span>60*24<span class="va">))</span></a>
<a class="sourceLine" id="cb495-2" title="2">$ <span class="fu">find</span> . -mmin -<span class="va">$((</span>60*24<span class="va">))</span></a></code></pre></div>
<p>to find files older and newer than 24 hours, respectively.</p>
<p>(It’s also easier than typing in a fractional argument to <code>-mtime</code> for when you want resolution in hours or minutes.)</p>
</section>
<section id="answer-3-score-45" class="level4">
<h4>Answer 3 (score 45)</h4>
<p>Fractional 24-hour periods are truncated! That means that “find -mtime +1” says to match files modified two or more days ago.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb496-1" title="1"><span class="fu">find</span> . -mtime +0 <span class="co"># find files modified greater than 24 hours ago</span></a>
<a class="sourceLine" id="cb496-2" title="2"><span class="fu">find</span> . -mtime 0 <span class="co"># find files modified between now and 1 day ago</span></a>
<a class="sourceLine" id="cb496-3" title="3"><span class="co"># (i.e., in the past 24 hours only)</span></a>
<a class="sourceLine" id="cb496-4" title="4"><span class="fu">find</span> . -mtime -1 <span class="co"># find files modified less than 1 day ago (SAME AS -mtime 0)</span></a>
<a class="sourceLine" id="cb496-5" title="5"><span class="fu">find</span> . -mtime 1 <span class="co"># find files modified between 24 and 48 hours ago</span></a>
<a class="sourceLine" id="cb496-6" title="6"><span class="fu">find</span> . -mtime +1 <span class="co"># find files modified more than 48 hours ago</span></a></code></pre></div>
<p>The following may only work on GNU?</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb497-1" title="1"><span class="fu">find</span> . -mmin +5 -mmin -10 <span class="co"># find files modified between</span></a>
<a class="sourceLine" id="cb497-2" title="2"><span class="co"># 6 and 9 minutes ago</span></a>
<a class="sourceLine" id="cb497-3" title="3"><span class="fu">find</span> / -mmin -10 <span class="co"># modified less than 10 minutes ago</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-test-if-a-variable-is-empty-or-contains-only-spaces-score-473621-in-2014" class="level3">
<h3>74: How can I test if a variable is empty or contains only spaces? (score <a href="https://stackoverflow.com/q/146942.html">473621</a> in 2014)</h3>
<section id="question-73" class="level4">
<h4>Question</h4>
<p>The following bash syntax verifies if <code>param</code> isn’t empty:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb498-1" title="1"><span class="kw"> [[</span> <span class="ot">!</span>  <span class="ot">-z</span>  <span class="va">$param</span>  ]]</a></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb499-1" title="1"><span class="va">param=</span><span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb499-2" title="2"><span class="kw">[[</span> <span class="ot">!</span>  <span class="ot">-z</span>  <span class="va">$param</span>  ]] &amp;&amp; echo <span class="st">&quot;I am not zero&quot;</span></a></code></pre></div>
<p>No output and its fine.</p>
<p>But when <code>param</code> is empty except for one (or more) space characters, then the case is different:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb500-1" title="1"><span class="va">param=</span><span class="st">&quot; &quot;</span> <span class="co"># one space</span></a>
<a class="sourceLine" id="cb500-2" title="2"><span class="kw">[[</span> <span class="ot">!</span>  <span class="ot">-z</span>  <span class="va">$param</span>  ]] &amp;&amp; echo <span class="st">&quot;I am not zero&quot;</span></a></code></pre></div>
<p>“I am not zero” is output.</p>
<p>How can I change the test to consider variables that contain only space characters as empty?</p>
</section>
<section id="answer-accepted-score-293" class="level4">
<h4>Answer accepted (score 293)</h4>
<p>First, note that the <a href="https://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions"><code>-z</code> test</a> is explicitly for:</p>
<blockquote>
the length of string is zero
</blockquote>
<p>That is, a string containing only spaces should <strong>not</strong> be true under <code>-z</code>, because it has a non-zero length.</p>
<p>What you want is to remove the spaces from the variable using the <a href="https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion">pattern replacement parameter expansion</a>:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb501-1" title="1"><span class="kw">[[</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">${param//</span> <span class="va">}</span><span class="st">&quot;</span><span class="kw"> ]]</span></a></code></pre></div>
<p>This expands the <code>param</code> variable and replaces all matches of the pattern `` (a single space) with nothing, so a string that has only spaces in it will be expanded to an empty string.</p>
<hr>
<p>The <a href="https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion">nitty-gritty of how that works</a> is that <code>${var/pattern/string}</code> replaces the first longest match of <code>pattern</code> with <code>string</code>. When <code>pattern</code> starts with <code>/</code> (as above) then it replaces <em>all</em> the matches. Because the replacement is empty, we can omit the final <code>/</code> and the <code>string</code> value:</p>
<blockquote>
<p>${parameter/pattern/string}</p>
The <em>pattern</em> is expanded to produce a pattern just as in filename expansion. <em>Parameter</em> is expanded and the longest match of <em>pattern</em> against its value is replaced with <em>string</em>. If <em>pattern</em> begins with ‘/’, all matches of <em>pattern</em> are replaced with <em>string</em>. Normally only the first match is replaced. … If <em>string</em> is null, matches of <em>pattern</em> are deleted and the / following <em>pattern</em> may be omitted.
</blockquote>
<p>After all that, we end up with <code>${param// }</code> to delete all spaces.</p>
<p><sub>Note that though present in <code>ksh</code> (where it originated), <code>zsh</code> and <code>bash</code>, that syntax is not POSIX and should not be used in <code>sh</code> scripts.</sub></p>
</section>
<section id="answer-2-score-31" class="level4">
<h4>Answer 2 (score 31)</h4>
<p>The easy way to check that a string only contains characters in an authorized set is to test for the presence of unauthorized characters. Thus, instead of testing whether the string only contains spaces, test whether the string contains some character other than space. In bash, ksh or zsh:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb502-1" title="1"><span class="kw">if [[</span> <span class="va">$param</span> <span class="ot">=</span> *[!<span class="dt">\ </span>]*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb502-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">param contains characters other than space&quot;</span></a>
<a class="sourceLine" id="cb502-3" title="3"><span class="kw">else</span></a>
<a class="sourceLine" id="cb502-4" title="4">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">param consists of spaces only&quot;</span></a>
<a class="sourceLine" id="cb502-5" title="5"><span class="kw">fi</span></a></code></pre></div>
<p>“Consists of spaces only” includes the case of an empty (or unset) variable.</p>
<p>You may want to test for any whitespace character. Use <code>[[ $param = *[^[:space:]]* ]]</code> to use locale settings, or whatever explicit list of whitespace characters you want to test for, e.g. <code>[[ $param = *[$' \t\n']* ]]</code> to test for space, tab or newline.</p>
<p>Matching a string against a pattern with <code>=</code> inside <code>[[ … ]]</code> is a ksh extension (also present in bash and zsh). In any Bourne/POSIX-style, you can use the <code>case</code> construct to match a string against a pattern. Note that standard shell patterns use <code>!</code> to negate a character set, rather than <code>^</code> like in most regular expression syntaxes.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb503-1" title="1"><span class="kw">case</span> <span class="st">&quot;</span><span class="va">$param</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb503-2" title="2">  *[!<span class="dt">\ </span>]*<span class="kw">)</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">param contains characters other than space&quot;</span><span class="kw">;;</span></a>
<a class="sourceLine" id="cb503-3" title="3">  <span class="ex">*</span>) <span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">param consists of spaces only&quot;</span><span class="kw">;;</span></a>
<a class="sourceLine" id="cb503-4" title="4"><span class="kw">esac</span></a></code></pre></div>
<p>To test for whitespace characters, the <code>$'…'</code> syntax is specific to ksh/bash/zsh; you can insert these characters in your script literally (note that a newline will have to be within quotes, as backslash+newline expands to nothing), or generate them, e.g.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb504-1" title="1"><span class="va">whitespace=$(</span><span class="bu">printf</span> <span class="st">&#39;\n\t &#39;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb504-2" title="2"><span class="kw">case</span> <span class="st">&quot;</span><span class="va">$param</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb504-3" title="3">  *[!<span class="va">$whitespace</span>]*<span class="kw">)</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">param contains non-whitespace characters&quot;</span><span class="kw">;;</span></a>
<a class="sourceLine" id="cb504-4" title="4">  <span class="ex">*</span>) <span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">param consists of whitespace only&quot;</span><span class="kw">;;</span></a>
<a class="sourceLine" id="cb504-5" title="5"><span class="kw">esac</span></a></code></pre></div>
</section>
<section id="answer-3-score-20" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>POSIXly:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb505-1" title="1"><span class="kw">case</span> <span class="va">$var</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb505-2" title="2">  <span class="kw">(</span>*[![:blank:]]*<span class="kw">)</span> <span class="bu">echo</span> <span class="st">&#39;$var contains non blank&#39;</span><span class="kw">;;</span></a>
<a class="sourceLine" id="cb505-3" title="3">  <span class="kw">(</span><span class="ex">*</span><span class="kw">)</span> <span class="bu">echo</span> <span class="st">&#39;$var contains only blanks or is empty or unset&#39;</span></a>
<a class="sourceLine" id="cb505-4" title="4"><span class="kw">esac</span></a></code></pre></div>
<p>To differentiate between <em>blank</em>, <em>non-blank</em>, <em>empty</em>, <em>unset</em>:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb506-1" title="1"><span class="kw">case</span> <span class="va">${var+</span>x<span class="va">$var}</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb506-2" title="2">  <span class="kw">(</span>x<span class="kw">)</span> <span class="bu">echo</span> empty<span class="kw">;;</span></a>
<a class="sourceLine" id="cb506-3" title="3">  <span class="kw">(</span><span class="st">&quot;&quot;</span><span class="kw">)</span> <span class="bu">echo</span> unset<span class="kw">;;</span></a>
<a class="sourceLine" id="cb506-4" title="4">  <span class="kw">(</span><span class="ex">x*</span>[![:blank:]]*<span class="kw">)</span> <span class="bu">echo</span> non-blank<span class="kw">;;</span></a>
<a class="sourceLine" id="cb506-5" title="5">  <span class="kw">(</span><span class="ex">*</span><span class="kw">)</span> <span class="bu">echo</span> blank</a>
<a class="sourceLine" id="cb506-6" title="6"><span class="kw">esac</span></a></code></pre></div>
<p><code>[:blank:]</code> is for horizontal spacing characters (space and tab in ASCII, but there are probably a few more in your locale; some systems will include the non-breaking space (where available), some won’t). If you want vertical spacing characters as well (like newline or form-feed), replace <code>[:blank:]</code> with <code>[:space:]</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-know-number-of-cores-of-a-system-in-linux-score-470466-in-2018" class="level3">
<h3>75: How to know number of cores of a system in Linux? (score <a href="https://stackoverflow.com/q/218074.html">470466</a> in 2018)</h3>
<section id="question-74" class="level4">
<h4>Question</h4>
<p>
I wanted to find out how many cores my system has, so I searched the same question in Google. I got some commands such as the <code>lscpu</code> command. When I tried this command, it gave me the following result:
</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb507-1" title="1">$ <span class="ex">lscpu</span></a>
<a class="sourceLine" id="cb507-2" title="2"><span class="ex">Architecture</span>:          x86_64</a>
<a class="sourceLine" id="cb507-3" title="3"><span class="ex">CPU</span> op-mode(s)<span class="bu">:</span>        32-bit, 64-bit</a>
<a class="sourceLine" id="cb507-4" title="4"><span class="ex">Byte</span> Order:            Little Endian</a>
<a class="sourceLine" id="cb507-5" title="5"><span class="ex">CPU</span>(s)<span class="bu">:</span>                4</a>
<a class="sourceLine" id="cb507-6" title="6"><span class="ex">On-line</span> CPU(s) <span class="ex">list</span>:   0-3</a>
<a class="sourceLine" id="cb507-7" title="7"><span class="ex">Thread</span>(s) <span class="ex">per</span> core:    1</a>
<a class="sourceLine" id="cb507-8" title="8"><span class="ex">Core</span>(s) <span class="ex">per</span> socket:    4</a>
<a class="sourceLine" id="cb507-9" title="9"><span class="ex">Socket</span>(s)<span class="bu">:</span>             1</a>
<a class="sourceLine" id="cb507-10" title="10"><span class="ex">NUMA</span> node(s)<span class="bu">:</span>          1</a>
<a class="sourceLine" id="cb507-11" title="11"><span class="ex">Vendor</span> ID:             GenuineIntel</a>
<a class="sourceLine" id="cb507-12" title="12"><span class="ex">CPU</span> family:            6</a>
<a class="sourceLine" id="cb507-13" title="13"><span class="ex">Model</span>:                 23</a>
<a class="sourceLine" id="cb507-14" title="14"><span class="ex">Stepping</span>:              10</a>
<a class="sourceLine" id="cb507-15" title="15"><span class="ex">CPU</span> MHz:               1998.000</a>
<a class="sourceLine" id="cb507-16" title="16"><span class="ex">BogoMIPS</span>:              5302.48</a>
<a class="sourceLine" id="cb507-17" title="17"><span class="ex">Virtualization</span>:        VT-x</a>
<a class="sourceLine" id="cb507-18" title="18"><span class="ex">L1d</span> cache:             32K</a>
<a class="sourceLine" id="cb507-19" title="19"><span class="ex">L1i</span> cache:             32K</a>
<a class="sourceLine" id="cb507-20" title="20"><span class="ex">L2</span> cache:              2048K</a>
<a class="sourceLine" id="cb507-21" title="21"><span class="ex">NUMA</span> node0 CPU(s)<span class="bu">:</span>     0-3</a></code></pre></div>
<p>In particular, this output shows:</p>
<ul>
<li>
CPU(s): 4
</li>
<li>
Core(s) per socket: 4
</li>
<li>
CPU family: 6
</li>
</ul>
<p>Which of those indicates cores of a Linux system?</p>
<p>Is there any other command to tell the number of cores, or am I assuming it is completely wrong?</p>
</section>
<section id="answer-accepted-score-117" class="level4">
<h4>Answer accepted (score 117)</h4>
<p>You have to look at sockets and cores per socket. In this case you have 1 physical CPU (socket) which has 4 cores (cores per socket).</p>
</section>
<section id="answer-2-score-238" class="level4">
<h4>Answer 2 (score 238)</h4>
<p>To get a complete picture you need to look at the number of <a href="https://en.wikipedia.org/wiki/Simultaneous_multithreading" rel="noreferrer">threads</a> per core, <a href="https://en.wikipedia.org/wiki/Multi-core_processor" rel="noreferrer">cores</a> per socket and <a href="https://en.wikipedia.org/wiki/CPU_socket" rel="noreferrer">sockets</a>. If you multiply these numbers you will get the number of <a href="https://en.wikipedia.org/wiki/Central_processing_unit" rel="noreferrer">CPUs</a> on your system.</p>
<blockquote>
CPUs = Threads per core X cores per socket X sockets
</blockquote>
<p>CPUs are what you see when you run <code>htop</code> (these do not equate to physical CPUs).</p>
<p>Here is an example from a desktop machine:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb508-1" title="1">$ <span class="ex">lscpu</span> <span class="kw">|</span> <span class="fu">grep</span> -E <span class="st">&#39;^Thread|^Core|^Socket|^CPU\(&#39;</span></a>
<a class="sourceLine" id="cb508-2" title="2"><span class="ex">CPU</span>(s)<span class="bu">:</span>                8</a>
<a class="sourceLine" id="cb508-3" title="3"><span class="ex">Thread</span>(s) <span class="ex">per</span> core:    2</a>
<a class="sourceLine" id="cb508-4" title="4"><span class="ex">Core</span>(s) <span class="ex">per</span> socket:    4</a>
<a class="sourceLine" id="cb508-5" title="5"><span class="ex">Socket</span>(s)<span class="bu">:</span>             1</a></code></pre></div>
<p>And a server:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb509-1" title="1">$ <span class="ex">lscpu</span> <span class="kw">|</span> <span class="fu">grep</span> -E <span class="st">&#39;^Thread|^Core|^Socket|^CPU\(&#39;</span></a>
<a class="sourceLine" id="cb509-2" title="2"><span class="ex">CPU</span>(s)<span class="bu">:</span>                32</a>
<a class="sourceLine" id="cb509-3" title="3"><span class="ex">Thread</span>(s) <span class="ex">per</span> core:    2</a>
<a class="sourceLine" id="cb509-4" title="4"><span class="ex">Core</span>(s) <span class="ex">per</span> socket:    8</a>
<a class="sourceLine" id="cb509-5" title="5"><span class="ex">Socket</span>(s)<span class="bu">:</span>             2</a></code></pre></div>
<p>The output of <code>nproc</code> corresponds to the CPU count from <code>lscpu</code>. For the desktop machine above this should match the 8 CPU(s) reported by <code>lscpu</code>:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb510-1" title="1">$ <span class="ex">nproc</span> --all</a>
<a class="sourceLine" id="cb510-2" title="2"><span class="ex">8</span></a></code></pre></div>
<p>The output of <code>/proc/cpuinfo</code> should match this information, for example on the desktop system above we can see there are 8 processors (CPUs) and 4 cores (core id 0-3):</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb511-1" title="1">$ <span class="fu">grep</span> -E <span class="st">&#39;processor|core id&#39;</span> /proc/cpuinfo</a>
<a class="sourceLine" id="cb511-2" title="2"><span class="ex">processor</span>   : 0</a>
<a class="sourceLine" id="cb511-3" title="3"><span class="ex">core</span> id     : 0</a>
<a class="sourceLine" id="cb511-4" title="4"><span class="ex">processor</span>   : 1</a>
<a class="sourceLine" id="cb511-5" title="5"><span class="ex">core</span> id     : 0</a>
<a class="sourceLine" id="cb511-6" title="6"><span class="ex">processor</span>   : 2</a>
<a class="sourceLine" id="cb511-7" title="7"><span class="ex">core</span> id     : 1</a>
<a class="sourceLine" id="cb511-8" title="8"><span class="ex">processor</span>   : 3</a>
<a class="sourceLine" id="cb511-9" title="9"><span class="ex">core</span> id     : 1</a>
<a class="sourceLine" id="cb511-10" title="10"><span class="ex">processor</span>   : 4</a>
<a class="sourceLine" id="cb511-11" title="11"><span class="ex">core</span> id     : 2</a>
<a class="sourceLine" id="cb511-12" title="12"><span class="ex">processor</span>   : 5</a>
<a class="sourceLine" id="cb511-13" title="13"><span class="ex">core</span> id     : 2</a>
<a class="sourceLine" id="cb511-14" title="14"><span class="ex">processor</span>   : 6</a>
<a class="sourceLine" id="cb511-15" title="15"><span class="ex">core</span> id     : 3</a>
<a class="sourceLine" id="cb511-16" title="16"><span class="ex">processor</span>   : 7</a>
<a class="sourceLine" id="cb511-17" title="17"><span class="ex">core</span> id     : 3</a></code></pre></div>
<p>The <code>cpu cores</code> reported by <code>/proc/cpuinfo</code> corresponds to the <code>Core(s) per socket</code> reported by <code>lscpu</code>. For the desktop machine above this should match the 4 Core(s) per socket reported by lscpu:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb512-1" title="1">$ <span class="fu">grep</span> -m 1 <span class="st">&#39;cpu cores&#39;</span> /proc/cpuinfo</a>
<a class="sourceLine" id="cb512-2" title="2"><span class="ex">cpu</span> cores   : 4</a></code></pre></div>
<p>To specifically answer your question you tell how many cores you have by multiplying the number of cores you have per socket by the number of sockets you have.</p>
<blockquote>
Cores = Cores per socket X Sockets
</blockquote>
<p>For the example systems above the desktop has 4 cores:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb513-1" title="1">$ <span class="bu">echo</span> <span class="st">&quot;Cores = </span><span class="va">$((</span> <span class="va">$(</span><span class="ex">lscpu</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^Socket\(s\)/{ print $2 }&#39;</span><span class="va">)</span> * <span class="va">$(</span><span class="ex">lscpu</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^Core\(s\) per socket/{ print $4 }&#39;</span><span class="va">)</span> <span class="va">))</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb513-2" title="2"><span class="ex">Cores</span> = 4</a></code></pre></div>
<p>While the server has 16:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb514-1" title="1">$ <span class="bu">echo</span> <span class="st">&quot;Cores = </span><span class="va">$((</span> <span class="va">$(</span><span class="ex">lscpu</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^Socket\(s\)/{ print $2 }&#39;</span><span class="va">)</span> * <span class="va">$(</span><span class="ex">lscpu</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^Core\(s\) per socket/{ print $4 }&#39;</span><span class="va">)</span> <span class="va">))</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb514-2" title="2"><span class="ex">Cores</span> = 16</a></code></pre></div>
<p>Another useful utility is <code>dmidecode</code> which outputs per socket information. In the case of the server system listed above we expect to see 8 cores per socket and 16 threads per socket:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb515-1" title="1">$ <span class="fu">sudo</span> dmidecode -t 4 <span class="kw">|</span> <span class="fu">grep</span> -E <span class="st">&#39;Socket Designation|Count&#39;</span></a>
<a class="sourceLine" id="cb515-2" title="2">    <span class="ex">Socket</span> Designation: CPU1</a>
<a class="sourceLine" id="cb515-3" title="3">    <span class="ex">Core</span> Count: 8</a>
<a class="sourceLine" id="cb515-4" title="4">    <span class="ex">Thread</span> Count: 16</a>
<a class="sourceLine" id="cb515-5" title="5">    <span class="ex">Socket</span> Designation: CPU2</a>
<a class="sourceLine" id="cb515-6" title="6">    <span class="ex">Core</span> Count: 8</a>
<a class="sourceLine" id="cb515-7" title="7">    <span class="ex">Thread</span> Count: 16</a></code></pre></div>
<p>The <code>lscpu</code> command has a number of useful options that you may like to check out, for example:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb516-1" title="1">$ <span class="ex">lscpu</span> --all --extended</a>
<a class="sourceLine" id="cb516-2" title="2">$ <span class="ex">lscpu</span> --all --parse=CPU,SOCKET,CORE <span class="kw">|</span> <span class="fu">grep</span> -v <span class="st">&#39;^#&#39;</span></a></code></pre></div>
<p>See <code>man lscpu</code> for details.</p>
<p>In summary:</p>
<ul>
<li>
You need to be aware of sockets, cores and threads
</li>
<li>
You need to be careful of the term CPU as it means different things in different contexts
</li>
</ul>
</section>
<section id="answer-3-score-62" class="level4">
<h4>Answer 3 (score 62)</h4>
<p>You can get this information by <a href="http://linux.die.net/man/1/nproc"><code>nproc(1)</code></a> command</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb517-1" title="1">$ <span class="ex">nproc</span> --all</a>
<a class="sourceLine" id="cb517-2" title="2"><span class="ex">12</span></a></code></pre></div>
<p>It does not require root privileges.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-execution-time-of-a-script-effectively-score-463777-in" class="level3">
<h3>76: How to get execution time of a script effectively? (score <a href="https://stackoverflow.com/q/52313.html">463777</a> in )</h3>
<section id="question-75" class="level4">
<h4>Question</h4>
<p>I would like to display the completion time of a script.</p>
<p>What I currently do is -</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb518-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb518-2" title="2"><span class="fu">date</span>  <span class="co">## echo the date at start</span></a>
<a class="sourceLine" id="cb518-3" title="3"><span class="co"># the script contents</span></a>
<a class="sourceLine" id="cb518-4" title="4"><span class="fu">date</span>  <span class="co">## echo the date at end</span></a></code></pre></div>
<p>This just show’s the time of start and end of the script. Would it be possible to display a fine grained output like processor time/ io time , etc?</p>
</section>
<section id="answer-accepted-score-453" class="level4">
<h4>Answer accepted (score 453)</h4>
<p>Just use <code>time</code> when you call the script:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb519-1" title="1"><span class="bu">time</span> yourscript.sh</a></code></pre></div>
</section>
<section id="answer-2-score-171" class="level4">
<h4>Answer 2 (score 171)</h4>
<p>If <code>time</code> isn’t an option,</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb520-1" title="1"><span class="va">start=</span><span class="kw">`</span><span class="fu">date</span> +%s<span class="kw">`</span></a>
<a class="sourceLine" id="cb520-2" title="2"><span class="ex">stuff</span></a>
<a class="sourceLine" id="cb520-3" title="3"><span class="va">end=</span><span class="kw">`</span><span class="fu">date</span> +%s<span class="kw">`</span></a>
<a class="sourceLine" id="cb520-4" title="4"></a>
<a class="sourceLine" id="cb520-5" title="5"><span class="va">runtime=$((</span>end-start<span class="va">))</span></a></code></pre></div>
</section>
<section id="answer-3-score-75" class="level4">
<h4>Answer 3 (score 75)</h4>
<p>Just call <a href="https://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins" rel="nofollow noreferrer"><code>times</code></a> without arguments upon exiting your script.</p>
<p>With <code>ksh</code> or <code>zsh</code>, you can also use <code>time</code> instead. With <code>zsh</code>, <code>time</code> will also give you the wall clock time in addition to the <em>user</em> and <em>system</em> CPU time.</p>
<p>To preserve the exit status of your script, you can make it:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb521-1" title="1"><span class="va">ret=$?</span>; <span class="bu">times</span><span class="kw">;</span> <span class="bu">exit</span> <span class="st">&quot;</span><span class="va">$ret</span><span class="st">&quot;</span></a></code></pre></div>
<p>Or you can also add a trap on <code>EXIT</code>:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb522-1" title="1"><span class="bu">trap</span> times EXIT</a></code></pre></div>
<p>That way, times will be called whenever the shell exits and the exit status will be preserved.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb523-1" title="1">$ <span class="fu">bash</span> -c <span class="st">&#39;trap times EXIT; : {1..1000000}&#39;</span></a>
<a class="sourceLine" id="cb523-2" title="2"><span class="ex">0m0.932s</span> 0m0.028s</a>
<a class="sourceLine" id="cb523-3" title="3"><span class="ex">0m0.000s</span> 0m0.000s</a>
<a class="sourceLine" id="cb523-4" title="4">$ <span class="fu">zsh</span> -c <span class="st">&#39;trap time EXIT; : {1..1000000}&#39;</span></a>
<a class="sourceLine" id="cb523-5" title="5"><span class="ex">shell</span>  0.67s user 0.01s system 100% cpu 0.677 total</a>
<a class="sourceLine" id="cb523-6" title="6"><span class="ex">children</span>  0.00s user 0.00s system 0% cpu 0.677 total</a></code></pre></div>
<p>Also note that all of <code>bash</code>, <code>ksh</code> and <code>zsh</code> have a <code>$SECONDS</code> special variable that automatically gets incremented every second. In both <code>zsh</code> and <code>ksh93</code>, that variable can also be made floating point (with <code>typeset -F SECONDS</code>) to get more precision. This is only wall clock time, not CPU time.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-set-a-user-environment-variable-permanently-not-session-score-462273-in-2015" class="level3">
<h3>77: How do I set a user environment variable? (permanently, not session) (score <a href="https://stackoverflow.com/q/21598.html">462273</a> in 2015)</h3>
<section id="question-76" class="level4">
<h4>Question</h4>
<p>This is irritating me. I seen several suggestions (all using different files and syntax) and none of them worked.</p>
<p>
How do I set an environment variable for a specific user? I am on debian squeeze. What is the exact syntax I should put in the file to make ABC = “123”?
</p>
</section>
<section id="answer-accepted-score-113" class="level4">
<h4>Answer accepted (score 113)</h4>
<p>You have to put the declaration in the initialization files of your shell:</p>
<ul>
<li>
<p>
If you are using bash, ash, ksh or some other Bourne-style shell, you can add
</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb524-1" title="1"><span class="va">ABC=</span><span class="st">&quot;123&quot;</span>; <span class="bu">export</span> <span class="va">ABC</span></a></code></pre></div>
<p>in your <code>.profile</code> file (<code>${HOME}/.profile</code>). This is the default situation on most Unix installations, and in particular on Debian.</p>
<p>If your login shell is bash, you can use <code>.bash_profile</code> (<code>${HOME}/.bash_profile</code>) or <code>.bash_login</code> instead.</p>
<strong>Note:</strong> If either of these files exists and your login shell is bash, <code>.profile</code> is not read when you log in over ssh or on a text console, but it might still be read instead of <code>.bash_profile</code> if you log in from the GUI. Also, if there is no <code>.bash_profile</code>, then use <code>.bashrc</code>.
</li>
<li>
<p>
If you’ve set zsh as your login shell, use <code>~/.zprofile</code> instead of <code>~/.profile</code>.
</p>
</li>
<li>
<p>
If you are using tcsh, add
</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb525-1" title="1"><span class="ex">setenv</span> ABC <span class="st">&quot;123&quot;</span></a></code></pre></div>
in <code>.login</code> file (<code>${HOME}/.login</code>)
</li>
<li>
<p>
if you are using another shell look at the shell manual how to define environment variables and which files are executed at the shell startup.
</p>
</li>
</ul>
</section>
<section id="answer-2-score-48" class="level4">
<h4>Answer 2 (score 48)</h4>
<p>Use <code>/etc/environment</code> file for setting the environment variables. Then add the following line inside the <code>/etc/environment</code> file.</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb526-1" title="1"><span class="va">ABC=</span><span class="st">&quot;123&quot;</span></a></code></pre></div>
<p>Now the <em>ABC</em> variable will be accessible from all the user sessions. To test the variable output first refresh the environment variable using command</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb527-1" title="1"><span class="bu">source</span> /etc/environment</a></code></pre></div>
<p>and run <code>echo $ABC</code>.</p>
</section>
<section id="answer-3-score-9-2" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>This is a general procedure you can use for pretty much any shell. In any case, you have to know which shell the user would normally log in with:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb528-1" title="1"><span class="va">path=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">grep</span> <span class="va">$USER</span> /etc/passwd <span class="kw">|</span> <span class="fu">cut</span> -d <span class="st">&#39;:&#39;</span> -f 7<span class="va">)</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb528-2" title="2"><span class="va">shell=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">basename</span> -- <span class="st">&quot;</span><span class="va">$path</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&quot;</span></a></code></pre></div>
<p>Then you have to figure out which dot-files this shell would normally read:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb529-1" title="1"><span class="fu">man</span> <span class="va">$shell</span></a></code></pre></div>
<p>A shortcut which might work is to list those dot-files which contain the shell name:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb530-1" title="1"><span class="fu">ls</span> ~/.*<span class="va">${shell}</span>*</a></code></pre></div>
<p>If you want to check if one of the files is actually read during login, you can simply print the file name in each of them, for example:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb531-1" title="1"><span class="bu">echo</span> .bashrc</a></code></pre></div>
<p>When logging in, you should then see which files are being read, and you can decide which one to modify. Beware that you should not to try to use <code>echo &quot;$0&quot;</code> or similar, because the value of <code>$0</code> depends on how the shell processes dot-files, and could be misleading.</p>
<p>When it comes to declaring the variable “permanently”, note that this only extends to the session. There is no way to access the value of a variable without a session, so it has no meaning outside of one. If you mean “read-only”, that is shell dependent, and in <strong>Bash</strong> you can use:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb532-1" title="1"><span class="bu">declare</span> -r <span class="va">VAR</span></a></code></pre></div>
<p>if it already has a value, or</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb533-1" title="1"><span class="bu">declare</span> -r <span class="va">VAR=</span>value</a></code></pre></div>
<p>to assign it at the same time. Not all shells have this feature.</p>
<p>To declare a variable in most shells, you should use a variable name (<code>[A-Za-z_][A-Za-z0-9_]*</code>), followed by an equal sign (and <em>no spaces</em> around the equal sign), then a value (preferably quoted unless the value is a simple <code>[A-Za-z0-9_]+</code>). For example:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb534-1" title="1"><span class="va">name=</span><span class="st">&quot;John Doe&quot;</span></a>
<a class="sourceLine" id="cb534-2" title="2"><span class="va">ip=</span>127.0.0.1</a>
<a class="sourceLine" id="cb534-3" title="3"><span class="va">HORRIBLE=</span>1</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-move-all-files-and-folders-via-mv-command-score-460027-in" class="level3">
<h3>78: How to move all files and folders via mv command (score <a href="https://stackoverflow.com/q/50487.html">460027</a> in )</h3>
<section id="question-77" class="level4">
<h4>Question</h4>
<p>How can I move all files and folders from one directory to another via mv command?</p>
</section>
<section id="answer-accepted-score-112" class="level4">
<h4>Answer accepted (score 112)</h4>
<p>Try with this:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb535-1" title="1"><span class="fu">mv</span> /path/sourcefolder/* /path/destinationfolder/</a></code></pre></div>
</section>
<section id="answer-2-score-20" class="level4">
<h4>Answer 2 (score 20)</h4>
<p>zsh:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb536-1" title="1"><span class="fu">mv</span> /src/*(D) <span class="ex">/dst/</span></a></code></pre></div>
<p><code>(D)</code> to include dot-files.</p>
</section>
<section id="answer-3-score-14-2" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>This works for me in Bash (I think this depends on your shell quite a bit…)</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb537-1" title="1">$  <span class="fu">mv</span> source/<span class="dt">{,.}</span>* /destination/folder/here</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="create-a-symbolic-link-relative-to-the-current-directory-score-458234-in-2017" class="level3">
<h3>79: Create a symbolic link relative to the current directory (score <a href="https://stackoverflow.com/q/84175.html">458234</a> in 2017)</h3>
<section id="question-78" class="level4">
<h4>Question</h4>
<p>I’m trying to create a symbolic link in my home directory that points to a directory on my external HDD.</p>
<p>It works fine when I specify it like this:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb538-1" title="1"><span class="bu">cd</span> ~</a>
<a class="sourceLine" id="cb538-2" title="2"><span class="fu">ln</span> -s /run/media/name/exhdd/Data/ Data</a></code></pre></div>
<p>However it creates a faulty link when I try this:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb539-1" title="1"><span class="bu">cd</span> /run/media/name/exhdd</a>
<a class="sourceLine" id="cb539-2" title="2"><span class="fu">ln</span> -s Data/ ~/Data</a></code></pre></div>
<p>This creates a link that I cannot <code>cd</code> into.</p>
<p>When I try, bash complains:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb540-1" title="1"><span class="ex">bash</span>: cd: Data: Too many levels of symbolic links</a></code></pre></div>
<p>The Data symbolic link in my home is also colored in red when <code>ls</code> is set to display colored output.</p>
<p>Why is this happening? How can I create a link in that manner? (I want to create a symlink to a directory in my working directory in another directory.)</p>
<p>
<hr />
<strong>Edit:</strong> according to <a href="https://stackoverflow.com/a/9104384">this</a> StackOverflow answer, if the second argument (in my case that’d be ~/Data) already exists and is a directory, <code>ln</code> will create a symlink to the target <em>inside</em> that directory.
</p>
<p>However, I’m experiencing the same issue with:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb541-1" title="1"><span class="fu">ln</span> -s Data/ ~/</a></code></pre></div>
</section>
<section id="answer-accepted-score-115" class="level4">
<h4>Answer accepted (score 115)</h4>
<p>Here’s what’s happening. If you make a symlink with a relative path, the symlink will be relative. Symlinks just store the paths that you give them. They never resolve paths to full paths. Running</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb542-1" title="1">$ <span class="bu">pwd</span></a>
<a class="sourceLine" id="cb542-2" title="2"><span class="ex">/usr/bin</span></a>
<a class="sourceLine" id="cb542-3" title="3">$ <span class="fu">ln</span> -s ls /usr/bin/ls2</a></code></pre></div>
<p>creates a symlink named <code>ls2</code> in <code>/usr/bin</code> to <code>ls</code>(viz. <code>/usr/bin/ls</code>) relative to the directory that the symlink is in (<code>/usr/bin</code>). The above command would create a functional symlink from any directory.</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb543-1" title="1">$ <span class="bu">pwd</span></a>
<a class="sourceLine" id="cb543-2" title="2"><span class="ex">/home/me</span></a>
<a class="sourceLine" id="cb543-3" title="3">$ <span class="fu">ln</span> -s ls /usr/bin/ls2</a></code></pre></div>
<p>If you moved the symlink to a different directory, it would cease to point to the file at <code>/usr/bin/ls</code>.</p>
<p>You are making a symlink that points to <code>Data</code>, and naming it <code>Data</code>. It is pointing to itself. You have to make a symlink with the absolute path of the directory.</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb544-1" title="1"><span class="fu">ln</span> -s <span class="st">&quot;</span><span class="va">$(</span><span class="ex">realpath</span> Data<span class="va">)</span><span class="st">&quot;</span> ~/Data</a></code></pre></div>
</section>
<section id="answer-2-score-14-1" class="level4">
<h4>Answer 2 (score 14)</h4>
<p>I was having the same problem. Google led to this answer but the simplest solution is not documented here:</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb545-1" title="1"><span class="fu">ln</span> -sT </a></code></pre></div>
<p>-T does the trick</p>
<p>man ln:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb546-1" title="1"><span class="ex">-T</span>, --no-target-directory</a>
<a class="sourceLine" id="cb546-2" title="2">    <span class="ex">treat</span> LINK_NAME as a normal file always</a></code></pre></div>
<p>Just adding this here so anyone with the same question may find this :)</p>
</section>
<section id="answer-3-score-9-3" class="level4">
<h4>Answer 3 (score 9)</h4>
<p><code>ln</code>’s behavior with relative paths is unintuitive. To restore sanity, use the <code>-r</code> flag.</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb547-1" title="1"><span class="bu">cd</span> /run/media/name/exhdd</a>
<a class="sourceLine" id="cb547-2" title="2"><span class="fu">ln</span> -sr Data/ ~/Data</a></code></pre></div>
<p>Explanation:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb548-1" title="1">   <span class="ex">-r</span>, --relative</a>
<a class="sourceLine" id="cb548-2" title="2">          <span class="ex">create</span> symbolic links relative to link location</a></code></pre></div>
<p>What it means is that <code>ln</code> will do what you expect. It will take into account what directory you are in, what directory the target is in, and construct a path relative to the directory the link will be in. The default behavior (without <code>-r</code>) is to interpret the first parameter (target) <em>literally</em>, in which case you have to construct the path yourself so that it is valid at the link’s directory.</p>
<p>Alternatively, use an absolute path, as mentioned by <span class="citation" data-cites="SmithJohn">@SmithJohn</span></p>
<div class="sourceCode" id="cb549"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb549-1" title="1"><span class="fu">ln</span> -s <span class="st">&quot;</span><span class="va">$(</span><span class="ex">realpath</span> Data<span class="va">)</span><span class="st">&quot;</span> ~/Data <span class="co">#bash shell</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb550-1" title="1"><span class="fu">ln</span> -s <span class="st">&quot;(realpath Data)&quot;</span> ~/Data <span class="co">#fish shell</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="connecting-to-wifi-network-through-command-line-score-458007-in-2013" class="level3">
<h3>80: Connecting to wifi network through command line (score <a href="https://stackoverflow.com/q/92799.html">458007</a> in 2013)</h3>
<section id="question-79" class="level4">
<h4>Question</h4>
<p>I am trying to connect to my WEP network just using the command-line (Linux).</p>
<p>I run:</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb551-1" title="1"><span class="fu">sudo</span> iwconfig wlan0 mode Managed essid <span class="st">&#39;my_network&#39;</span> key <span class="st">&#39;xx:xx:... hex key, 26 digits&#39;</span></a></code></pre></div>
<p>Then I try to obtain an IP with</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb552-1" title="1"><span class="fu">sudo</span> dhclient -v wlan0</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb553-1" title="1"><span class="fu">sudo</span> dhclient wlan0</a></code></pre></div>
<p>without success (tried to ping google.com).</p>
<p>I know that the keyword is right, and I also tried with the ASCII key using ‘s:key’, and again, the same result.</p>
<p>I get the message below when running dhclient:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb554-1" title="1"><span class="ex">Listening</span> on LPF/wlan0/44:...</a>
<a class="sourceLine" id="cb554-2" title="2"><span class="ex">Sending</span> on   LPF/wlan0/44:...</a>
<a class="sourceLine" id="cb554-3" title="3"><span class="ex">Sending</span> on   Socket/fallback</a>
<a class="sourceLine" id="cb554-4" title="4"><span class="ex">DHCPDISCOVER</span> on wlan0 to 255.255.255.255 port 67 interval 3 </a></code></pre></div>
<p>I have no problem connecting with WICD or the standard Ubuntu tool.</p>
</section>
<section id="answer-2-score-86" class="level4">
<h4>Answer 2 (score 86)</h4>
<h5>
Option 1
</h2>
<p>Just edit <code>/etc/network/interfaces</code> and write:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb555-1" title="1"><span class="ex">auto</span> wlan0</a>
<a class="sourceLine" id="cb555-2" title="2"><span class="ex">iface</span> wlan0 inet dhcp </a>
<a class="sourceLine" id="cb555-3" title="3">                <span class="ex">wpa-ssid</span> <span class="dt">{ssid}</span></a>
<a class="sourceLine" id="cb555-4" title="4">                <span class="ex">wpa-psk</span>  <span class="dt">{password}</span></a></code></pre></div>
<p>After that write and close file and use command:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb556-1" title="1"><span class="fu">sudo</span> dhclient wlan0</a></code></pre></div>
<p>Replace <strong>{ssid}</strong> and <strong>{password}</strong> with your respective WiFi SSID and password.</p>
<hr>
<h5>
Option 2
</h2>
<p>Provided you replace your Wireless network card, Wi-Fi Network name, and Wi-FI Password this should also work.</p>
<p>
I am using: - Wireless network card is <code>wlan0</code> - Wireless network is <code>&quot;Wifi2Home&quot;</code> - Wireless network key is ASCII code <code>ABCDE12345</code>
</p>
<p>First, get your WiFi card up and running:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb557-1" title="1"><span class="fu">sudo</span> ifconfig wlan0 up</a></code></pre></div>
<p>Now scan for a list of WiFi networks in range:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb558-1" title="1"><span class="fu">sudo</span> iwlist wlan0 scan</a></code></pre></div>
<p>This will show you a list of wireless networks, pick yours from the list:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb559-1" title="1"><span class="fu">sudo</span> iwconfig wlan0 essid Wifi2Home key s:ABCDE12345</a></code></pre></div>
<p>To obtain the IP address, now request it with the Dynamic Host Client:</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb560-1" title="1"><span class="fu">sudo</span> dhclient wlan0</a></code></pre></div>
<p>You should then be connected to the WiFi network. The first option is better, because it will be able to run as a <code>cron</code> job to start up the wifi whenever you need it going. If you need to turn off your WiFi for whatever reason, just type:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb561-1" title="1"><span class="fu">sudo</span> ifconfig wlan0 down</a></code></pre></div>
<hr>
<h5>
FYI
</h2>
<p>I have also seen people using alternative commands. I use Debian, Solaris and OSX, so I’m not 100% sure if they are the same on Ubuntu. But here they are:</p>
<p>
<code>sudo ifup wlan0</code> is the same as <code>sudo ifconfig wlan0 up</code><br> <code>sudo ifdown wlan0</code> is the same as <code>sudo ifconfig wlan down</code>
</p>
</section>
<section id="answer-3-score-37-1" class="level4">
<h4>Answer 3 (score 37)</h4>
<p>There is Danijel J’s two options are good, but there is also a 3rd option if you have this working via the ‘standard Ubuntu tool’ using <code>nmcli</code>, which should already be installed at <code>/usr/bin/nmcli</code>.</p>
<p>First, run</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb562-1" title="1"><span class="ex">nmcli</span> c</a></code></pre></div>
<p>This will list your connections, with the first column being the SSID, and the second column being the UUID of the connection.</p>
<p>Copy the UUID of the SSID you want to connect to so you can paste it into the next command.</p>
<p>Next, run</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb563-1" title="1"><span class="ex">nmcli</span> c up uuid <span class="op">&lt;</span>paste uuid here<span class="op">&gt;</span></a></code></pre></div>
<p>and this will, using the same stuff as the ‘standard Ubuntu tool’ connect to your wifi!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-delete-all-lines-in-a-file-using-vi-score-457247-in-2014" class="level3">
<h3>81: How can I delete all lines in a file using vi? (score <a href="https://stackoverflow.com/q/161821.html">457247</a> in 2014)</h3>
<section id="question-80" class="level4">
<h4>Question</h4>
<p>How can I delete all lines in a file using vi?</p>
<p>At moment I do that using something like this to remove all lines in a file:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb564-1" title="1"><span class="bu">echo</span> <span class="op">&gt;</span> test.txt</a></code></pre></div>
<p>How can I delete all lines using <code>vi</code>?</p>
<p>
<strong>Note:</strong> Using <code>dd</code> is not a good option. There can be many lines.
</p>
</section>
<section id="answer-accepted-score-476" class="level4">
<h4>Answer accepted (score 476)</h4>
<p>In <code>vi</code> do</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb565-1" title="1">:<span class="ex">1</span>,<span class="va">$d</span></a></code></pre></div>
<p>to delete all lines.</p>
<p>
The <code>:</code> introduces a command (and moves the cursor to the bottom).<br> The <code>1,$</code> is an indication of which lines the following command (<code>d</code>) should work on. In this case the range from line one to the last line (indicated by <code>$</code>, so you don’t need to know the number of lines in the document).<br> The final <code>d</code> stands for delete the indicated lines.
</p>
<p>There is a shorter form (<code>:%d</code>) but I find myself never using it. The <code>:1,$d</code> can be more easily “adapted” to e.g. <code>:4,$-2d</code> leaving only the first 3 and last 2 lines, deleting the rest.</p>
</section>
<section id="answer-2-score-170" class="level4">
<h4>Answer 2 (score 170)</h4>
<p>In vi I use</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb566-1" title="1">:<span class="ex">%d</span></a></code></pre></div>
<p>where</p>
<ul>
<li>
<code>:</code> tells vi to go in command mode
</li>
<li>
<code>%</code> means all the lines
</li>
<li>
<code>d</code> : delete
</li>
</ul>
<p>On the command line,</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb567-1" title="1"><span class="op">&gt;</span> <span class="ex">test.txt</span></a></code></pre></div>
<p>will do also.</p>
<p>What is the problem with dd?</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb568-1" title="1"><span class="fu">dd</span> if=/dev/null of=test.txt</a></code></pre></div>
<p>where</p>
<ul>
<li>
<code>/dev/null</code> is a special 0 byte file
</li>
<li>
<code>if</code> is the input file
</li>
<li>
<code>of</code> is the ouput file
</li>
</ul>
</section>
<section id="answer-3-score-53-1" class="level4">
<h4>Answer 3 (score 53)</h4>
<p>I’d recommend that you just do this (should work in any POSIX-compliant shell):</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb569-1" title="1"><span class="op">&gt;</span> <span class="ex">test.txt</span></a></code></pre></div>
<p>If you really want to do it with vi, you can do:</p>
<ul>
<li>
1G (go to first line)
</li>
<li>
dG (delete to last line)
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="create-file-in-folder-permission-denied-score-456046-in-2018" class="level3">
<h3>82: Create file in folder: permission denied (score <a href="https://stackoverflow.com/q/119358.html">456046</a> in 2018)</h3>
<section id="question-81" class="level4">
<h4>Question</h4>
<p>I have a problem copying files to a directory on Ubuntu 12.04. I create a directory in the home directory so that the path where I want to copy to is:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb570-1" title="1"><span class="ex">/home/sixven/camp_sms/inputs</span></a></code></pre></div>
<p>But when ini run the following command in the terminal to create a sample file as follows:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb571-1" title="1"><span class="ex">francisco-vergara@Francisco-Vergara</span>:/home/sixven/camp_sms/inputs$ touch test_file.txt</a>
<a class="sourceLine" id="cb571-2" title="2"><span class="ex">touch</span>: can not make <span class="kw">`</span><span class="ex">touch</span><span class="st">&#39; on «test_file.txt»: permission denied</span></a></code></pre></div>
<p>I can not copy files directly in that directory. How can I assign permissions with the <code>chown</code> &amp; <code>chmod</code> commands to copy the files?</p>
<p>I do not know which user and group to use.</p>
</section>
<section id="answer-accepted-score-53" class="level4">
<h4>Answer accepted (score 53)</h4>
<p>First of all you have to know that the default permission of directories in Ubuntu is 644 which means you can’t create a file in a directory you are not the owner.</p>
<p>you are trying as <code>user:francisco-vergara</code> to create a file in a directory <code>/home/sixven/camp_sms/inputs</code> which is owned by <code>user:sixven</code>.</p>
<p><strong>So how to solve this:</strong></p>
<ol>
<li>
<p>
You can either change the permission of the directory and enable others to create files inside.
</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb572-1" title="1"><span class="fu">sudo</span> chmod -R 777 /home/sixven/camp_sms/inputs</a></code></pre></div>
This command will change the permission of the directory recursively and enable all other users to create/modify and delete files and directories inside.
</li>
<li>
<p>
You can change the owner ship of this directory and make <code>user:francisco-vergara</code> as the owner
</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb573-1" title="1"><span class="fu">sudo</span> chown -R francisco-vergara:francisco-vergara /home/sixven/camp_sms/inputs</a></code></pre></div>
But like this the <code>user:sixven</code> can’t write in this folder again and thus you may moving in a circular infinite loop.
</li>
</ol>
<p>So i advise you to use Option 1.</p>
<p>Or if this directory will be accessed by both users you can do the following trick:</p>
<p>change ownership of the directory to <code>user:francisco-vergara</code> and keep the group owner <code>group:sixven</code>.</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb574-1" title="1"><span class="fu">sudo</span> chown -R francisco-vergara /home/sixven/camp_sms/inputs</a></code></pre></div>
<p>Like that both users can still use the directory.</p>
<p>But as I said you before It’s easiest and more efficient to <strong>use option 1.</strong></p>
</section>
<section id="answer-2-score-12" class="level4">
<h4>Answer 2 (score 12)</h4>
<p>To change the file ownership, do this as root:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb575-1" title="1"><span class="fu">chown</span> -R user:user /home/sixven</a></code></pre></div>
<p>If you decide to go the chmod way:</p>
<p>If you know that the user is part of the group of the file</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb576-1" title="1"><span class="fu">chmod</span> -R g+rw /home/sixven</a></code></pre></div>
<p>Otherwise:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb577-1" title="1"><span class="fu">chmod</span> -R o+rw /home/sixven</a></code></pre></div>
<p>But this way is not too secure.</p>
</section>
<section id="answer-3-score-1" class="level4">
<h4>Answer 3 (score 1)</h4>
<p>The default UMASK 022 (in Ubuntu ), so the permissions for /home/username becomes 755. and you logged in as user <code>francisco-vergara</code> and trying to creating files in user sixyen Home: i.e. <code>/home/sixven</code>. it does not have write permission to Other users Only User/Group of <code>sixven</code> has write access.</p>
<p>if you want write access in that directory, then you need to be part of Group <code>sixven</code> using <code>usermod -G sixyen francisco-vergara</code> OR <code>chmod -R 777 /home/sixven</code> (don’t use it’s bad practice ).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-remove-all-the-files-in-a-directory-score-453533-in-2012" class="level3">
<h3>83: How to remove all the files in a directory? (score <a href="https://stackoverflow.com/q/12593.html">453533</a> in 2012)</h3>
<section id="question-82" class="level4">
<h4>Question</h4>
<p>I am trying to remove all files and subdirectories in a directory. I used <code>rm -r</code> to remove all files, but I want to remove all files <em>and</em> subdirectories, excluding the top directory itself.</p>
<p>For example, I have a top directory like <code>images</code>. It contains the files <code>header.png</code>, <code>footer.png</code> and a subdirectory.</p>
<p>Now I want to delete <code>header.png</code>, <code>footer.png</code> and the subdirectory, but not <code>images</code>.</p>
<p>How can I do this in linux?</p>
</section>
<section id="answer-2-score-59-1" class="level4">
<h4>Answer 2 (score 59)</h4>
<p>If your top-level directory is called <code>images</code>, then run <code>rm -r images/*</code>. This uses the shell glob operator <code>*</code> to run <code>rm -r</code> on every file or directory within <code>images</code>.</p>
</section>
<section id="answer-3-score-51" class="level4">
<h4>Answer 3 (score 51)</h4>
<p>To delete hidden files, you have to specify:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb578-1" title="1"><span class="fu">rm</span> -r images/* images/.*</a></code></pre></div>
<p>With shells whose globs include <code>.</code> and <code>..</code>, this will lead to an error like</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb579-1" title="1"><span class="ex">rm</span>: cannot remove <span class="kw">`</span><span class="ex">.</span><span class="st">&#39; directory `images/.&#39;</span></a>
<a class="sourceLine" id="cb579-2" title="2"><span class="ex">rm</span>: cannot remove <span class="kw">`</span>..<span class="st">&#39; directory `images/..&#39;</span></a></code></pre></div>
<p>but it will delete hidden files.</p>
<p>An approach without errormessage is to use find/delete with mindepth. This is gnu-find.</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb580-1" title="1"><span class="fu">find</span> images -mindepth 1 -delete</a></code></pre></div>
<p>Your find may lack the <code>-mindepth</code> or <code>-delete</code> predicate, in which case, you could do:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb581-1" title="1"><span class="fu">find</span> images/. ! -name . -prune -exec rm -rf {} <span class="ex">+</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ifconfig-command-not-found-score-450089-in-2017" class="level3">
<h3>84: ifconfig command not found (score <a href="https://stackoverflow.com/q/145447.html">450089</a> in 2017)</h3>
<section id="question-83" class="level4">
<h4>Question</h4>
<p>
I’ve just installed CentOS7 as a virtual machine on my mac (osx10.9.3 + virtualbox) .Running <code>ifconfig</code> returns command not found. Also running <code>sudo /sbin/ifconfig</code> returns commmand not found. I am root. The output of <code>echo $PATH</code> is as below.
</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb582-1" title="1"><span class="ex">/usr/local</span>/bin:/bin:<span class="ex">/usr</span>/bin:<span class="ex">/usr/local</span>/sbin:<span class="ex">/usr</span>/sbin:<span class="ex">/home/robbert/.local</span>/bin:<span class="ex">/home/robbert/bin</span></a></code></pre></div>
<p>Is my path normal? If not, how can I change it?</p>
<p>Also, I don’t have an internet connection on virtual machine yet, maybe that’s a factor.</p>
</section>
<section id="answer-accepted-score-240" class="level4">
<h4>Answer accepted (score 240)</h4>
<p><strong>TL/DR:</strong> <code>ifconfig</code> is now <code>ip a</code>.</p>
<p>Your path looks OK, but does not include <code>/sbin</code>, which may be intended.</p>
<p>You were probably looking for the command <code>/sbin/ifconfig</code>.</p>
<p>If this file does not exist (try <code>ls /sbin/ifconfig</code>), the command may just be not installed.</p>
<p>
It is part of the package <code>net-tools</code>, which is not installed by default, because it’s <strong>deprecated</strong> and <strong>superseded</strong> by the command <strong><code>ip</code></strong> from the package <strong><code>iproute2</code></strong>.
</p>
<p>The function of <code>ifconfig</code> without options is replaced by <code>ip</code> specifying the <em>object</em> <code>address</code>.</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb583-1" title="1"><span class="ex">ifconfig</span></a></code></pre></div>
<p>is equivalent to</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb584-1" title="1"><span class="ex">ip</span> addr show</a></code></pre></div>
<p>and, because the <em>object</em> argument can be abbreviated and <em>command</em> defaults to <code>show</code>, also to</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb585-1" title="1"><span class="ex">ip</span> a</a></code></pre></div>
<p>The output format is somewhat different:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb586-1" title="1">$ <span class="ex">ifconfig</span></a>
<a class="sourceLine" id="cb586-2" title="2"><span class="ex">lo</span>        Link encap:Local Loopback</a>
<a class="sourceLine" id="cb586-3" title="3">          <span class="ex">inet</span> addr:127.0.0.1  Mask:255.0.0.0</a>
<a class="sourceLine" id="cb586-4" title="4">          <span class="ex">inet6</span> addr: ::1/128 Scope:Host</a>
<a class="sourceLine" id="cb586-5" title="5">          <span class="ex">UP</span> LOOPBACK RUNNING  MTU:65536  Metric:1</a>
<a class="sourceLine" id="cb586-6" title="6">          <span class="ex">RX</span> packets:10553 errors:0 dropped:0 overruns:0 frame:0</a>
<a class="sourceLine" id="cb586-7" title="7">          <span class="ex">TX</span> packets:10553 errors:0 dropped:0 overruns:0 carrier:0</a>
<a class="sourceLine" id="cb586-8" title="8">          <span class="ex">collisions</span>:0 txqueuelen:0</a>
<a class="sourceLine" id="cb586-9" title="9">          <span class="ex">RX</span> bytes:9258474 (9.2 MB)  <span class="ex">TX</span> bytes:9258474 (9.2 MB)</a>
<a class="sourceLine" id="cb586-10" title="10"><span class="bu">[</span> ...<span class="bu"> ]</span></a></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb587-1" title="1">$ <span class="ex">ip</span> address</a>
<a class="sourceLine" id="cb587-2" title="2"><span class="ex">1</span>: lo: <span class="op">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="op">&gt;</span> mtu 65536 qdisc noqueue state UNKNOWN group default</a>
<a class="sourceLine" id="cb587-3" title="3">    <span class="ex">link/loopback</span> 00:00:00:00:00:00 brd 00:00:00:00:00:00</a>
<a class="sourceLine" id="cb587-4" title="4">    <span class="ex">inet</span> 127.0.0.1/8 scope host lo</a>
<a class="sourceLine" id="cb587-5" title="5">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb587-6" title="6">    <span class="ex">inet6</span> ::1/128 scope host</a>
<a class="sourceLine" id="cb587-7" title="7">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb587-8" title="8"><span class="bu">[</span> ...<span class="bu"> ]</span></a></code></pre></div>
<p>
Note the output is more terse: It does not show counts of packets handled in normal or other ways.
</p>
<p>For that, add the option <code>-s</code> (<code>-stats</code>, <code>-statistics</code>):</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb588-1" title="1">$ <span class="ex">ip</span> -s addr</a>
<a class="sourceLine" id="cb588-2" title="2"><span class="ex">1</span>: lo: <span class="op">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="op">&gt;</span> mtu 65536 qdisc noqueue state UNKNOWN group default</a>
<a class="sourceLine" id="cb588-3" title="3">    <span class="ex">link/loopback</span> 00:00:00:00:00:00 brd 00:00:00:00:00:00</a>
<a class="sourceLine" id="cb588-4" title="4">    <span class="ex">inet</span> 127.0.0.1/8 scope host lo</a>
<a class="sourceLine" id="cb588-5" title="5">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb588-6" title="6">    <span class="ex">inet6</span> ::1/128 scope host</a>
<a class="sourceLine" id="cb588-7" title="7">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb588-8" title="8">    <span class="ex">RX</span>: bytes  packets  errors  dropped overrun mcast</a>
<a class="sourceLine" id="cb588-9" title="9">    <span class="ex">74423</span>      703      0       0       0       0</a>
<a class="sourceLine" id="cb588-10" title="10">    <span class="ex">TX</span>: bytes  packets  errors  dropped carrier collsns</a>
<a class="sourceLine" id="cb588-11" title="11">    <span class="ex">74423</span>      703      0       0       0       0</a></code></pre></div>
<p>But what you actually want to see may be this:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb589-1" title="1">$ <span class="ex">ip</span> -stats -color -human addr</a>
<a class="sourceLine" id="cb589-2" title="2"><span class="ex">1</span>: lo: <span class="op">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="op">&gt;</span> mtu 65536 qdisc noqueue state UNKNOWN group default</a>
<a class="sourceLine" id="cb589-3" title="3">    <span class="ex">link/loopback</span> 00:00:00:00:00:00 brd 00:00:00:00:00:00</a>
<a class="sourceLine" id="cb589-4" title="4">    <span class="ex">inet</span> 127.0.0.1/8 scope host lo</a>
<a class="sourceLine" id="cb589-5" title="5">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb589-6" title="6">    <span class="ex">inet6</span> ::1/128 scope host</a>
<a class="sourceLine" id="cb589-7" title="7">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb589-8" title="8">    <span class="ex">RX</span>: bytes  packets  errors  dropped overrun mcast</a>
<a class="sourceLine" id="cb589-9" title="9">    <span class="ex">74.3k</span>      700      0       0       0       0</a>
<a class="sourceLine" id="cb589-10" title="10">    <span class="ex">TX</span>: bytes  packets  errors  dropped carrier collsns</a>
<a class="sourceLine" id="cb589-11" title="11">    <span class="ex">74.3k</span>      700      0       0       0       0</a></code></pre></div>
<p>It shows counts with suffixes like <code>26.1M</code> or <code>79.3k</code> and colors some relevant terms and addresses.</p>
<p>
<strong>Oh, you feel the command is too long? Easy!</strong> This is the same:
</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb590-1" title="1"><span class="ex">ip</span> -s -c -h a</a></code></pre></div>
</section>
<section id="answer-2-score-30-1" class="level4">
<h4>Answer 2 (score 30)</h4>
<p>(verified) The default minimal install of CENTOS 7 does not install net-tools.</p>
<p>(verified) ‘ifconfig’ command will become available on installing package net-tools</p>
<p>-How to install net-tools through yum for the not so linux experts.</p>
<ol type="1">
<li>have a root privilege shell or be on the sudo list.</li>
</ol>
<p>2a) At a root shell prompt (#)</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb591-1" title="1"><span class="ex">yum</span> install net-tools</a></code></pre></div>
<p>2b) User account on the sudo list</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb592-1" title="1"><span class="fu">sudo</span> yum install net-tools</a></code></pre></div>
<p>
If the package is installed it will state so and exit yum. (Then it sounds like a path issue). If not installed yum will prompt the user to continue after a few local / network package checks. The install will (should) take but a moment.. presto ifconfig is now installed.
</p>
<p>
If you feel adventurous.. The equivalent of using <code>ifconfig</code> in displaying the interface / address information using ip
</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb593-1" title="1"><span class="ex">ip</span> addr </a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-see-full-log-from-systemctl-status-service-score-440141-in-2015" class="level3">
<h3>85: How to see full log from systemctl status service? (score <a href="https://stackoverflow.com/q/225401.html">440141</a> in 2015)</h3>
<section id="question-84" class="level4">
<h4>Question</h4>
<p>I check service status with <code>systemctl status service-name</code>.</p>
<p>By default, I see few rows only, so I add <code>-n50</code> to see more.</p>
<p>
Sometimes, I want to see full log, from start. It could have 1000s of rows.<br> Now, I check it with <code>-n10000</code> but that doesn’t look like neat solution.
</p>
<p>Is there an option to check full systemd service log similar to <code>less</code> command?</p>
</section>
<section id="answer-accepted-score-500" class="level4">
<h4>Answer accepted (score 500)</h4>
<p>Just use the <code>journalctl</code> command, as in:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb594-1" title="1"><span class="ex">journalctl</span> -u service-name.service</a></code></pre></div>
<p>Or, to see only log messages for the current boot:</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb595-1" title="1"><span class="ex">journalctl</span> -u service-name.service -b</a></code></pre></div>
<p>For things named <code>&amp;lt;something&amp;gt;.service</code>, you can actually just use <code>&amp;lt;something&amp;gt;</code>, as in:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb596-1" title="1"><span class="ex">journalctl</span> -u service-name</a></code></pre></div>
<p>But for other sorts of units (sockets, targets, timers, etc), you need to be explicit.</p>
<p>In the above commands, the <code>-u</code> flag is short for <code>--unit</code>, and specifies the name of the unit in which you’re interested. <code>-b</code> is short for <code>--boot</code>, and restricts the output to only the current boot so that you don’t see lots of older messages. See the <a href="https://www.freedesktop.org/software/systemd/man/journalctl.html" rel="noreferrer">journalctl man page</a> for more information.</p>
</section>
<section id="answer-2-score-25-2" class="level4">
<h4>Answer 2 (score 25)</h4>
<p><code>systemctl</code> can include the complete output of its status listing, without truncation., by adding the <code>-l</code> flag:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb597-1" title="1"><span class="ex">systemctl</span> -l status service-name</a></code></pre></div>
<p><code>-l</code>: don’t truncate entries with ellipses (…)</p>
<p><code>--no-pager</code> can be added to avoid invoking a pager when the output is an interactive terminal.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-get-the-size-of-a-file-in-a-bash-script-score-431964-in-2015" class="level3">
<h3>86: How can I get the size of a file in a bash script? (score <a href="https://stackoverflow.com/q/16640.html">431964</a> in 2015)</h3>
<section id="question-85" class="level4">
<h4>Question</h4>
<p>How can I get the size of a file in a bash script?</p>
<p>How do I assign this to a bash variable so I can use it later?</p>
</section>
<section id="answer-accepted-score-243" class="level4">
<h4>Answer accepted (score 243)</h4>
<p>Your best bet if on a GNU system:</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb598-1" title="1"><span class="fu">stat</span> --printf=<span class="st">&quot;%s&quot;</span> file.any</a></code></pre></div>
<p>From <a href="https://linux.die.net/man/1/stat" rel="nofollow noreferrer">man stat</a>:</p>
<blockquote>
%s total size, in bytes
</blockquote>
<p>In a bash script :</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb599-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb599-2" title="2"><span class="va">FILENAME=</span>/home/heiko/dummy/packages.txt</a>
<a class="sourceLine" id="cb599-3" title="3"><span class="va">FILESIZE=$(</span><span class="fu">stat</span> -c%s <span class="st">&quot;</span><span class="va">$FILENAME</span><span class="st">&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb599-4" title="4"><span class="bu">echo</span> <span class="st">&quot;Size of </span><span class="va">$FILENAME</span><span class="st"> = </span><span class="va">$FILESIZE</span><span class="st"> bytes.&quot;</span></a></code></pre></div>
<p>NOTE: see <a href="https://unix.stackexchange.com/a/185039/9071"><span class="citation" data-cites="chbrown">@chbrown</span>’s answer</a> for how to use stat in terminal on Mac OS X.</p>
</section>
<section id="answer-2-score-92-1" class="level4">
<h4>Answer 2 (score 92)</h4>
<div class="sourceCode" id="cb600"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb600-1" title="1"><span class="va">file_size_kb=</span><span class="kw">`</span><span class="fu">du</span> -k <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -f1<span class="kw">`</span></a></code></pre></div>
<p>The problem with using <code>stat</code> is that it is a GNU (Linux) extension. <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/du.html"><code>du -k</code></a> and <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/cut.html"><code>cut -f1</code></a> are specified by POSIX and are therefore portable to any Unix system.</p>
<p>Solaris, for example, ships with bash but not with <code>stat</code>. So this is not entirely hypothetical.</p>
<p><code>ls</code> has a similar problem in that the exact format of the output is not specified, so parsing its output cannot be done portably. <code>du -h</code> is also a GNU extension.</p>
<p>Stick to portable constructs where possible, and you will make somebody’s life easier in the future. Maybe your own.</p>
</section>
<section id="answer-3-score-74" class="level4">
<h4>Answer 3 (score 74)</h4>
<p>You could also use the “word count” command (<code>wc</code>):</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb601-1" title="1"><span class="fu">wc</span> -c <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span></a></code></pre></div>
<p>The problem with <code>wc</code> is that it’ll add the filename and indent the output. For example:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb602-1" title="1">$ <span class="fu">wc</span> -c somefile.txt</a>
<a class="sourceLine" id="cb602-2" title="2">    <span class="ex">1160</span> somefile.txt</a></code></pre></div>
<p>If you would like to avoid chaining a full interpreted language or stream editor just to get a file size count, just redirect the input from the file so that <code>wc</code> never sees the filename:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb603-1" title="1"><span class="fu">wc</span> -c <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span></a></code></pre></div>
<p>This last form can be used with command substitution to easily grab the value you were seeking as a shell variable, as mentioned by <a href="https://unix.stackexchange.com/users/885/gilles">Gilles</a> below.</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb604-1" title="1"><span class="va">size=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">wc</span> -c <span class="op">&lt;</span><span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&quot;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="pass-command-line-arguments-to-bash-script-score-431322-in-2012" class="level3">
<h3>87: Pass command line arguments to bash script (score <a href="https://stackoverflow.com/q/32290.html">431322</a> in 2012)</h3>
<section id="question-86" class="level4">
<h4>Question</h4>
<p>I am new to bash script programming.</p>
<p>I want to implement a bash script ‘deploymLog’, which accepts as input one string argument(name).</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb605-1" title="1">[<span class="ex">root@localhost</span> Desktop]# ./deploymLog.sh name</a></code></pre></div>
<p>here I want to pass the string argument(name) through command line</p>
<p>As an initial step, I need to append the current timestamp along with this input string to a log file say <code>Logone.txt</code> in current directory in the below format:</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb606-1" title="1">[<span class="ex">name</span>]=[System time timestamp1]</a></code></pre></div>
<p>How it is possible?</p>
</section>
<section id="answer-2-score-112" class="level4">
<h4>Answer 2 (score 112)</h4>
<div class="sourceCode" id="cb607"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb607-1" title="1">$<span class="op">&gt;</span> <span class="fu">cat</span> ./deploymLog.sh </a>
<a class="sourceLine" id="cb607-2" title="2"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb607-3" title="3"></a>
<a class="sourceLine" id="cb607-4" title="4"><span class="va">name=$1</span></a>
<a class="sourceLine" id="cb607-5" title="5"><span class="va">log_file=</span><span class="st">&quot;Logone.txt&quot;</span></a>
<a class="sourceLine" id="cb607-6" title="6"></a>
<a class="sourceLine" id="cb607-7" title="7"><span class="kw">if [[</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$name</span><span class="st">&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb607-8" title="8">    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">=</span><span class="va">$(</span> <span class="fu">date</span> +%s <span class="va">)</span><span class="st">&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">${log_file}</span></a>
<a class="sourceLine" id="cb607-9" title="9"><span class="kw">else</span></a>
<a class="sourceLine" id="cb607-10" title="10">    <span class="bu">echo</span> <span class="st">&quot;argument error&quot;</span></a>
<a class="sourceLine" id="cb607-11" title="11"><span class="kw">fi</span></a></code></pre></div>
<p>
The first argument from a command line can be found with the positional parameter <code>$1</code>. <code>[[ -n &quot;$name&quot; ]]</code> tests to see if <code>$name</code> is not empty. <code>date +%s</code> returns the current timestamp in Unix time. The <code>&amp;gt;&amp;gt;</code> operator is used to write to a file by appending to the existing data in the file.
</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb608-1" title="1">$<span class="op">&gt;</span> <span class="ex">./deploymLog.sh</span> tt</a>
<a class="sourceLine" id="cb608-2" title="2"></a>
<a class="sourceLine" id="cb608-3" title="3">$<span class="op">&gt;</span> <span class="fu">cat</span> Logone.txt </a>
<a class="sourceLine" id="cb608-4" title="4"><span class="va">tt=</span>1329810941</a>
<a class="sourceLine" id="cb608-5" title="5"></a>
<a class="sourceLine" id="cb608-6" title="6">$<span class="op">&gt;</span> <span class="ex">./deploymLog.sh</span> rr</a>
<a class="sourceLine" id="cb608-7" title="7"></a>
<a class="sourceLine" id="cb608-8" title="8">$<span class="op">&gt;</span> <span class="fu">cat</span> Logone.txt </a>
<a class="sourceLine" id="cb608-9" title="9"><span class="va">tt=</span>1329810941</a>
<a class="sourceLine" id="cb608-10" title="10"><span class="va">rr=</span>1329810953</a></code></pre></div>
<p>For more readable timestamp you could play with <code>date</code> arguments.</p>
</section>
<section id="answer-3-score-64-1" class="level4">
<h4>Answer 3 (score 64)</h4>
<p>Shell command line arguments are accessible via <code>$1</code> (the first), <code>$n</code> (the nth), or <code>$*</code> (all arguments), so your script should start:</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb609-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb609-2" title="2"></a>
<a class="sourceLine" id="cb609-3" title="3"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">-ne</span> 1<span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb609-4" title="4">    <span class="bu">echo</span> <span class="va">$0</span>: usage: myscript name</a>
<a class="sourceLine" id="cb609-5" title="5">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb609-6" title="6"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb609-7" title="7"></a>
<a class="sourceLine" id="cb609-8" title="8"><span class="va">name=$1</span></a></code></pre></div>
<p>Now the name argument is accessible from the script as <code>$name</code>.</p>
<p>To get the timestamp use the <code>date(1)</code> command and give it a format specifier so it produces the format you want:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb610-1" title="1"><span class="va">now=$(</span><span class="fu">date</span> +%Y%m%d%H%M%S<span class="va">)</span></a></code></pre></div>
<p>Now <code>$now</code> contains the current date and time.</p>
<p>So you can create your log file thus:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb611-1" title="1"><span class="va">logfile=</span>/path/to/log/file/mylogfile.<span class="va">$now</span></a>
<a class="sourceLine" id="cb611-2" title="2"><span class="bu">echo</span> <span class="st">&quot;[</span><span class="va">$name</span><span class="st">]=[</span><span class="va">$now</span><span class="st">]&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$logfile</span></a></code></pre></div>
<p>You are better off using a shell function to log your messages as it will be easier to use:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb612-1" title="1"><span class="kw">function</span><span class="fu"> logit</span></a>
<a class="sourceLine" id="cb612-2" title="2"><span class="kw">{</span></a>
<a class="sourceLine" id="cb612-3" title="3">    <span class="va">now=$(</span><span class="fu">date</span> +%Y%m%d%H%M%S<span class="va">)</span></a>
<a class="sourceLine" id="cb612-4" title="4">    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$now</span><span class="st">: </span><span class="va">$*</span><span class="st">&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$logfile</span></a>
<a class="sourceLine" id="cb612-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p>Note that shell functions access their own arguments in the same way as the script (via <code>$1</code> etc.)</p>
<p>So the initial script looks like this:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb613-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb613-2" title="2"></a>
<a class="sourceLine" id="cb613-3" title="3"><span class="kw">function</span><span class="fu"> logit</span></a>
<a class="sourceLine" id="cb613-4" title="4"><span class="kw">{</span></a>
<a class="sourceLine" id="cb613-5" title="5">    <span class="va">now=$(</span><span class="fu">date</span> +%Y%m%d%H%M%S<span class="va">)</span></a>
<a class="sourceLine" id="cb613-6" title="6">    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$now</span><span class="st">: </span><span class="va">$*</span><span class="st">&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$logfile</span></a>
<a class="sourceLine" id="cb613-7" title="7"><span class="kw">}</span></a>
<a class="sourceLine" id="cb613-8" title="8"></a>
<a class="sourceLine" id="cb613-9" title="9"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">-ne</span> 1<span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb613-10" title="10">    <span class="bu">echo</span> <span class="va">$0</span>: usage: myscript name</a>
<a class="sourceLine" id="cb613-11" title="11">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb613-12" title="12"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb613-13" title="13"></a>
<a class="sourceLine" id="cb613-14" title="14"><span class="va">name=$1</span></a>
<a class="sourceLine" id="cb613-15" title="15"><span class="va">now=$(</span><span class="fu">date</span> +%Y%m%d%H%M%S<span class="va">)</span></a>
<a class="sourceLine" id="cb613-16" title="16"><span class="va">logfile=</span>/path/to/log/file/mylogfile.<span class="va">$now</span></a>
<a class="sourceLine" id="cb613-17" title="17"></a>
<a class="sourceLine" id="cb613-18" title="18"><span class="ex">logit</span> name = <span class="va">$name</span></a></code></pre></div>
<p>(note the log file isn’t in the exact format you specified; it’s in a better one with the timestamp at the start of each line).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="delete-the-last-character-of-a-string-using-string-manipulation-in-shell-script-score-427336-in-2016" class="level3">
<h3>88: Delete the last character of a string using string manipulation in shell script (score <a href="https://stackoverflow.com/q/144298.html">427336</a> in 2016)</h3>
<section id="question-87" class="level4">
<h4>Question</h4>
<p>I would like to delete the last character of a string, I tried this little script :</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb614-1" title="1"><span class="co">#! /bin/sh </span></a>
<a class="sourceLine" id="cb614-2" title="2"></a>
<a class="sourceLine" id="cb614-3" title="3"><span class="va">t=</span><span class="st">&quot;lkj&quot;</span></a>
<a class="sourceLine" id="cb614-4" title="4"><span class="va">t=${t:-</span>2<span class="va">}</span></a>
<a class="sourceLine" id="cb614-5" title="5"><span class="bu">echo</span> <span class="va">$t</span></a></code></pre></div>
<p>but it prints “lkj”, what I am doing wrong?</p>
</section>
<section id="answer-accepted-score-115-1" class="level4">
<h4>Answer accepted (score 115)</h4>
<p>In a POSIX shell, the syntax <code>${t:-2}</code> means something different - it expands to the value of <code>t</code> if <code>t</code> is set and non null, and otherwise to the value <code>2</code>. To trim a single character by parameter expansion, the syntax you probably want is <code>${t%?}</code></p>
<p>Note that in <code>ksh93</code>, <code>bash</code> or <code>zsh</code>, <code>${t:(-2)}</code> or <code>${t: -2}</code> (note the space) <em>are</em> legal as a substring expansion but are probably not what you want, since they return the substring starting at a position 2 characters in from the end (i.e. it removes the <em>first</em> character <code>i</code> of the string <code>ijk</code>).</p>
<p>See the Shell Parameter Expansion section of the Bash Reference Manual for more info:</p>
<ul>
<li>
<a href="http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion">Bash Reference Manual – Shell Parameter Expansion</a>
</li>
</ul>
</section>
<section id="answer-2-score-186" class="level4">
<h4>Answer 2 (score 186)</h4>
<p>With <code>bash</code> 4.2 and above, you can do:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb615-1" title="1"><span class="va">${var::-1}</span></a></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb616-1" title="1">$ <span class="va">a=</span>123</a>
<a class="sourceLine" id="cb616-2" title="2">$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${a::-1}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb616-3" title="3"><span class="ex">12</span></a></code></pre></div>
<p>Notice that for older <code>bash</code> ( for example, <code>bash 3.2.5</code> on OS X), you should leave spaces between and after colons:</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb617-1" title="1"><span class="va">${var: : -1}</span></a></code></pre></div>
</section>
<section id="answer-3-score-67" class="level4">
<h4>Answer 3 (score 67)</h4>
<p>for removing the last <code>n</code> characters from a line that makes no use of <code>sed</code> OR <code>awk</code>:</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb618-1" title="1"><span class="op">&gt;</span> <span class="bu">echo</span> lkj <span class="kw">|</span> <span class="fu">rev</span> <span class="kw">|</span> <span class="fu">cut</span> -c (n+1)<span class="ex">-</span> <span class="kw">|</span> <span class="fu">rev</span></a></code></pre></div>
<p>so for example you can delete the last character <code>one character</code> using this:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb619-1" title="1"><span class="op">&gt;</span> <span class="bu">echo</span> lkj <span class="kw">|</span> <span class="fu">rev</span> <span class="kw">|</span> <span class="fu">cut</span> -c 2- <span class="kw">|</span> <span class="fu">rev</span></a>
<a class="sourceLine" id="cb619-2" title="2"></a>
<a class="sourceLine" id="cb619-3" title="3"><span class="op">&gt;</span> <span class="ex">lk</span></a></code></pre></div>
<p>from <code>rev</code> manpage:</p>
<blockquote>
<p>
DESCRIPTION<br> The rev utility copies the specified files to the standard output, reversing the order of characters in every line. If no files are speci- fied, the standard input is read.
</p>
</blockquote>
<p>UPDATE:</p>
<p>if you don’t know the length of the string, try:</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb620-1" title="1">$ <span class="va">x=</span><span class="st">&quot;lkj&quot;</span></a>
<a class="sourceLine" id="cb620-2" title="2">$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${x%</span>?<span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb620-3" title="3"><span class="ex">lk</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="trying-to-ssh-to-local-vm-ubuntu-with-putty-score-424931-in-2015" class="level3">
<h3>89: Trying to SSH to local VM Ubuntu with Putty (score <a href="https://stackoverflow.com/q/145997.html">424931</a> in 2015)</h3>
<section id="question-88" class="level4">
<h4>Question</h4>
<p>I have set up a VM of Ubuntu server, have installed OpenSSH, and am now trying to connect to it using Putty. Within Putty, under “Host name”, I put “Ubuntu”, given this is what I thought it was called when I set up the VM. However, I just get the error: “Connection Timed Out”.</p>
<p>I also tried putting “127.0.0.1” into the host name within Putty and just get “Connection Refused”. Note that I have done the port forwarding for SSH and HTTP within Oracle VM, so I am at a loss as to how to get it running.</p>
</section>
<section id="answer-accepted-score-183-1" class="level4">
<h4>Answer accepted (score 183)</h4>
<p>VirtualBox will create a private network (10.0.2.x) which will be connected to your host network using <a href="http://en.wikipedia.org/wiki/Network_address_translation" rel="noreferrer">NAT</a>. (Unless configured otherwise.)</p>
<p>This means that you cannot directly access any host of the private network from the host network. To do so, you need some port forwarding. In the network preferences of your VM you can, for example, configure VirtualBox to open port 22 on 127.0.1.1 (a <a href="http://en.wikipedia.org/wiki/Loopback#Virtual_loopback_interface" rel="noreferrer">loopback</a> address of your host) and forward any traffic to port 22 of 10.0.2.1 (the internal address of your VM)</p>
<p>This way, you can point putty to Port 22 of 127.0.1.1 and VirtualBox will redirect this connection to your VM where its ssh daemon will answer it, allowing you to log in.</p>
</section>
<section id="answer-2-score-44" class="level4">
<h4>Answer 2 (score 44)</h4>
<p>
I wanted to use putty to connect to my ubuntu on virtual box (comfort reasons, the VB is just weird. I can’t work unless it is on a proper terminal). Anyway,
</p>
<ol>
<li>
Make sure ssh client is installed on your Linux. If not, install it <code>sudo apt install ssh</code>.
</li>
<li>
Power off the OS.
</li>
<li>
Now on your VB go to <code>Settings</code> <code>-&amp;gt;</code> <code>Network</code> <code>-&amp;gt;</code> on <code>Adapter 1</code> choose <code>Host-only adapter</code>-&gt;click <code>OK</code>.
</li>
<li>
Now start your OS. Run <code>ifconfig</code>; now the inet address is your IP.
</li>
<li>
Use this and run it on your putty. Login with your credentials.
</li>
</ol>
<p>The only disadvantage of using host-only adapter is that your guest OS won’t have access to the wider network (eg the Internet).</p>
<p>If you also need your VM to have internet access, leave Adapter 1 as NAT and enable Adapter 2, configured as a Host-Only adapter. This will allow your VM to connect to the internet using NAT as well as make a local connection to your Host using Host-Only.</p>
</section>
<section id="answer-3-score-19" class="level4">
<h4>Answer 3 (score 19)</h4>
<p>
First you need to decide if your VM connected to your host machine via a bridge connection or via a NAT, but ether way you’ll need to put the VM IP address in putty to be able to connect to ip, in the VM terminal run this command to show you the machine IP address (and no 127.0.0.1 is not the machine IP address)
</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb621-1" title="1"><span class="ex">VM</span> <span class="co"># ip addr show</span></a>
<a class="sourceLine" id="cb621-2" title="2"></a>
<a class="sourceLine" id="cb621-3" title="3"><span class="ex">1</span>: lo: <span class="op">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="op">&gt;</span> mtu 16436 qdisc noqueue state UNKNOWN </a>
<a class="sourceLine" id="cb621-4" title="4">    <span class="ex">link/loopback</span> 00:00:00:00:00:00 brd 00:00:00:00:00:00</a>
<a class="sourceLine" id="cb621-5" title="5">    <span class="ex">inet</span> 127.0.0.1/8 scope host lo</a>
<a class="sourceLine" id="cb621-6" title="6">    <span class="ex">inet6</span> ::1/128 scope host </a>
<a class="sourceLine" id="cb621-7" title="7">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb621-8" title="8"><span class="ex">2</span>: eth0: <span class="op">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="op">&gt;</span> mtu 1500 qdisc pfifo_fast state UP qlen 1000</a>
<a class="sourceLine" id="cb621-9" title="9">    <span class="ex">link/ether</span> 52:54:00:d9:16:b3 brd ff:ff:ff:ff:ff:ff</a>
<a class="sourceLine" id="cb621-10" title="10">    <span class="ex">inet</span> 10.0.2.15/24 brd 10.0.2.1 scope global eth0</a>
<a class="sourceLine" id="cb621-11" title="11">       <span class="ex">valid_lft</span> forever preferred_lft forever</a></code></pre></div>
<p>in this case my IP address will by 10.0.2.15,</p>
<p>First try to make sure you can communicate on a basic level with VM, open a terminal window on your host, and try to ping the VM</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb622-1" title="1"><span class="ex">HOST</span> <span class="co"># ping 10.0.2.15</span></a>
<a class="sourceLine" id="cb622-2" title="2"></a>
<a class="sourceLine" id="cb622-3" title="3"><span class="ex">PING</span> 10.0.2.15 (10.0.2.15) <span class="ex">56</span>(84) <span class="ex">bytes</span> of data.</a>
<a class="sourceLine" id="cb622-4" title="4"><span class="ex">64</span> bytes from 10.0.2.15: icmp_seq=1 ttl=64 time=0.045 ms</a>
<a class="sourceLine" id="cb622-5" title="5"><span class="ex">64</span> bytes from 10.0.2.15: icmp_seq=2 ttl=64 time=0.110 ms</a>
<a class="sourceLine" id="cb622-6" title="6"><span class="ex">64</span> bytes from 10.0.2.15: icmp_seq=3 ttl=64 time=0.099 ms</a></code></pre></div>
<p>If you get ant result, then make sure you have a ssh service running on the VM, in the terminal on your VM type as root,</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb623-1" title="1"><span class="ex">VM</span> <span class="co"># netstat -lnpt | grep 22</span></a>
<a class="sourceLine" id="cb623-2" title="2"><span class="ex">tcp</span>   0  0  0.0.0.0:22  0.0.0.0:*  LISTEN  2361/sshd</a></code></pre></div>
<p>This tell as we have a service/process with PID(2361) called sshd (OpenSSH daemon) listening to port 22.</p>
<p>You can test if the service work correctly by trying to ssh to it from the VM it self,</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb624-1" title="1"><span class="ex">VM</span> <span class="co"># ssh 127.0.0.1</span></a></code></pre></div>
<p>Next you neet to make sure that you are not blocking port 22 in your firewall/iptables, I can not believe so, but check it out anyway. In the VM type this command to show you the iptables,</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb625-1" title="1"><span class="ex">VM</span> <span class="co"># iptables -nvL INPUT</span></a></code></pre></div>
<p>in the output you should have line like this one:</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb626-1" title="1"><span class="ex">0</span>  0  ACCEPT  tcp  --  *  *  0.0.0.0/0  0.0.0.0/0  tcp  dpt:22  ctstate  NEW</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-set-default-file-permissions-for-all-foldersfiles-in-a-directory-score-418176-in-2013" class="level3">
<h3>90: How to set default file permissions for all folders/files in a directory? (score <a href="https://stackoverflow.com/q/1314.html">418176</a> in 2013)</h3>
<section id="question-89" class="level4">
<h4>Question</h4>
<p>I want to set a folder such that anything created within it (directories, files) inherit default permissions and group.</p>
<p>Lets call the group “media”. And also, the folders/files created within the directory should have g+rw automatically.</p>
</section>
<section id="answer-accepted-score-272" class="level4">
<h4>Answer accepted (score 272)</h4>
<p>I found it: <a href="http://www.linuxquestions.org/questions/linux-desktop-74/applying-default-permissions-for-newly-created-files-within-a-specific-folder-605129/">Applying default permissions</a></p>
<p>From the article:</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb627-1" title="1"><span class="fu">chmod</span> g+s <span class="op">&lt;</span>directory<span class="op">&gt;</span>  //set gid </a>
<a class="sourceLine" id="cb627-2" title="2"><span class="ex">setfacl</span> -d -m g::rwx /<span class="op">&lt;</span>directory<span class="op">&gt;</span>  //set group to rwx default </a>
<a class="sourceLine" id="cb627-3" title="3"><span class="ex">setfacl</span> -d -m o::rx /<span class="op">&lt;</span>directory<span class="op">&gt;</span>   //set other</a></code></pre></div>
<p>Next we can verify:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb628-1" title="1"><span class="ex">getfacl</span> /<span class="op">&lt;</span>directory<span class="op">&gt;</span></a></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb629-1" title="1"><span class="co"># file: ../&lt;directory&gt;/</span></a>
<a class="sourceLine" id="cb629-2" title="2"><span class="co"># owner: &lt;user&gt;</span></a>
<a class="sourceLine" id="cb629-3" title="3"><span class="co"># group: media</span></a>
<a class="sourceLine" id="cb629-4" title="4"><span class="co"># flags: -s-</span></a>
<a class="sourceLine" id="cb629-5" title="5"><span class="ex">user</span>::rwx</a>
<a class="sourceLine" id="cb629-6" title="6"><span class="ex">group</span>::rwx</a>
<a class="sourceLine" id="cb629-7" title="7"><span class="ex">other</span>::r-x</a>
<a class="sourceLine" id="cb629-8" title="8"><span class="ex">default</span>:user::rwx</a>
<a class="sourceLine" id="cb629-9" title="9"><span class="ex">default</span>:group::rwx</a>
<a class="sourceLine" id="cb629-10" title="10"><span class="ex">default</span>:other::r-x</a></code></pre></div>
</section>
<section id="answer-2-score-27" class="level4">
<h4>Answer 2 (score 27)</h4>
<p>This is an addition to Chris’ answer, it’s based on my experience on my Arch Linux rig.</p>
<p>Using the default switch (-d) and the modify switch (-m) will only modify the the default permissions but leave the existing ones intact:</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb630-1" title="1"><span class="ex">setfacl</span> -d -m g::rwx /<span class="op">&lt;</span>directory<span class="op">&gt;</span></a></code></pre></div>
<p>If you want to change folder’s entire permission structure including the existing ones (you’ll have to do an extra line and make it recursive -R:</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb631-1" title="1"><span class="ex">setfacl</span> -R -m g::rwx /<span class="op">&lt;</span>directory<span class="op">&gt;</span></a></code></pre></div>
<p>eg.</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb632-1" title="1"><span class="ex">setfacl</span> -R -m g::rwx /home/limited.users/<span class="op">&lt;</span>directory<span class="op">&gt;</span> // gives group read,write,exec permissions for currently existing files and folders, recursively</a>
<a class="sourceLine" id="cb632-2" title="2"><span class="ex">setfacl</span> -R -m o::x /home/limited.users/<span class="op">&lt;</span>directory<span class="op">&gt;</span> //revokes read and write permission for everyone else in existing folder and subfolders </a>
<a class="sourceLine" id="cb632-3" title="3"><span class="ex">setfacl</span> -R -d -m g::rwx /home/limited.users/<span class="op">&lt;</span>directory<span class="op">&gt;</span> // gives group rwx permissions by default, recursively</a>
<a class="sourceLine" id="cb632-4" title="4"><span class="ex">setfacl</span> -R -d -m o::--- /home/limited.users/<span class="op">&lt;</span>directory<span class="op">&gt;</span> //revokes read, write and execute permissions for everyone else. </a></code></pre></div>
<p>(<strong>CREDIT</strong> to markdwite in comments for the synthax of the revoke all privileges line)</p>
</section>
<section id="answer-3-score-0-2" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>Add yourself/logged user to www-data group, so we can work with files created by www-data server</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb633-1" title="1"><span class="fu">sudo</span> usermod -a -G www-data <span class="va">$USER</span></a></code></pre></div>
<p>Needs to restart/relogin so the newly added group takes effect</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb634-1" title="1"><span class="bu">cd</span> /var/www</a></code></pre></div>
<p>Add www-data as group member of html folder, and your user as owner, so we own it as well as a group member</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb635-1" title="1"><span class="fu">sudo</span> chown -R <span class="va">$USER</span>:www-data html</a></code></pre></div>
<p>Put your username in place of USER</p>
<p>Set read,write,execute permission as required, (ugo) u=user, g=group, o=others</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb636-1" title="1"><span class="fu">sudo</span> chmod 750 html</a></code></pre></div>
<p>Set the GID of html, now, newly created files in html will inherit ownership permissions:</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb637-1" title="1"><span class="fu">sudo</span> chmod g+s html</a></code></pre></div>
<p>This creates the default rules for newly created files/dirs within the html directory and sub directories.</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb638-1" title="1"><span class="fu">sudo</span> setfacl -R -d -m u::rwX -m g::rX -m o::000 html</a></code></pre></div>
<p>Make SELinux if installed, ignore www-data context requirement so it lets allows write permissions</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb639-1" title="1"><span class="fu">sudo</span> setsebool -P httpd_unified 1</a></code></pre></div>
<p>list directory to see new permissions applied</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb640-1" title="1"><span class="fu">ls</span> -ld html</a></code></pre></div>
<p>Returns this</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb641-1" title="1"><span class="ex">drwxrwsr-x+</span>   3 html www-data</a></code></pre></div>
<p>The trailing + signify that ACL, Access Control List, is set on the directory.</p>
<p><strong><em>Reference</em></strong>: <a href="https://www.linuxquestions.org/questions/linux-desktop-74/applying-default-permissions-for-newly-created-files-within-a-specific-folder-605129/#post2982934" rel="nofollow noreferrer">Link to forum</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-unfreeze-after-accidentally-pressing-ctrl-s-in-a-terminal-score-415151-in-2017" class="level3">
<h3>91: How to unfreeze after accidentally pressing Ctrl-S in a terminal? (score <a href="https://stackoverflow.com/q/12107.html">415151</a> in 2017)</h3>
<section id="question-90" class="level4">
<h4>Question</h4>
<p>It’s a situation that has happened quite often to me: after I press (with a different intention) <kbd>Ctrl-S</kbd> in a terminal, the interaction (input or output) with it is frozen. It’s probably a kind of “scroll lock” or whatever.</p>
<p>How do I unfreeze the terminal after this?</p>
<p>(This time, I have been working with <code>apt-shell</code> inside a <code>bash</code> inside <code>urxvt</code>–not sure which of them is responsible for the special handling of <kbd>Ctrl-S</kbd>: I was searching the history of commands backwards with <kbd>C-r</kbd>, as usual for readline, but then I wanted to go “back” forwards through the history with the usual–at least in Emacs–<kbd>C-s</kbd> (<a href="https://unix.stackexchange.com/questions/541/best-way-to-search-my-shells-history/2120#2120">1</a>, <a href="https://unix.stackexchange.com/questions/4079/put-history-command-onto-command-line-without-executing-it/4086#4086">2</a>, <a href="https://unix.stackexchange.com/questions/7061/how-to-search-the-whole-of-bash-history-without-needing-to-go-forwards-and-backwa/7064#7064">3</a>), but that caused the terminal to freeze. Well, scrolling/paging to view past things still works in the terminal, but no interaction with the processes run there.)</p>
</section>
<section id="answer-accepted-score-867" class="level4">
<h4>Answer accepted (score 867)</h4>
<p><kbd>Ctrl</kbd>-<kbd>Q</kbd></p>
<p>To disable this altogether, stick <code>stty -ixon</code> in a startup script. To allow any key to get things flowing again, use <code>stty ixany</code>.</p>
<p>ps: It’s neither the terminal nor the shell that does this, but the OS’s terminal driver.</p>
</section>
<section id="answer-2-score-383" class="level4">
<h4>Answer 2 (score 383)</h4>
<p><kbd>Ctrl</kbd>-<kbd>Q</kbd> is indeed the answer. I thought I’d toss in a little history of this that is too long to fit in the margins of <a href="https://unix.stackexchange.com/questions/12107/how-to-unfreeze-after-accidentally-pressing-ctrl-s-in-a-terminal/12108#12108">ak2’s correct answer</a>.</p>
<p>Back in the dark ages, a terminal was a large piece of equipment that connected to a remote device (originally another terminal because teletypes were so much easier to learn to operate than a telegraph key) over a long wire or via phone lines with modems. By the time Unix was developing, the ASCII code was already well established (although the competing EBCDIC code from IBM was still a force to be reckoned with).</p>
<p>The earliest terminals kept a printed record of every character received. As long as the characters arrived no faster than the print head could type them, at least. But as soon as CRT based terminals were possible, the problem arose that only about 25 lines fit on the CRT, and 25 lines of 80 characters represented enough RAM that no one thought seriously about providing more RAM for characters that had scrolled off the top of the screen.</p>
<p>So some convention was needed to signal that the sending end should pause to let the reader catch up.</p>
<p>The 7-bit ASCII code has 33 code points devoted to control characters (0 to 31 and 127). Some of those had really well established purposes, such as <code>NUL</code> (blank paper tape leader for threading, gaps, and splices), <code>DEL</code> (“crossed out” characters on paper tape indicated by punching all seven holes), <code>BEL</code> (ding!), <code>CR</code>, <code>LF</code>, and <code>TAB</code>. But four were defined explicitly for controlling the terminal device itself (<code>DC1</code> to <code>DC4</code> aka Ctrl+Q, Ctrl+R, Ctrl+S and Ctrl+T).</p>
<p>My best guess is that some engineer thought that (as mnemonics go), “S” for “Stop” and “Q” for “Continue” weren’t too bad, and assigned <code>DC3</code> to mean “please stop sending” and <code>DC1</code> to mean “ok, continue sending now”.</p>
<p>Even that convention was already well established by the time Unix was leaving nest at Bell Labs to go out into the world.</p>
<p>The convention is known as software flow control, and is extremely common in real serial devices. It is not easy to implement correctly, as it prevents the use of either of those characters for any other purpose in the communications channel, and the Stop signal has to be handled ahead of any pending received characters to avoid sending more than the receiving end can handle.</p>
<p>If practical, using additional signals out of band from the serial data stream for flow control is vastly preferred. On directly wired connections that can afford the additional signal wires, you will find hardware handshake in use, which frees up those characters for other uses.</p>
<p>Of course, today’s terminal window is not using an actual physical serial port, has scroll bars, and doesn’t really need software handshaking at all. But the convention persists.</p>
<p>I recall the claim that Richard Stallman received complaints about his mapping Ctrl+S to incremental-search in the first releases of emacs, and that he was rather unsympathetic to any user that had to depend on a 7-bit, software flow controlled connection.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="using-the-not-equal-operator-for-string-comparison-score-408060-in-2019" class="level3">
<h3>92: Using the not equal operator for string comparison (score <a href="https://stackoverflow.com/q/67898.html">408060</a> in 2019)</h3>
<section id="question-91" class="level4">
<h4>Question</h4>
<p>I tried to check if the <code>PHONE_TYPE</code> variable contains one of three valid values.</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb642-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;NORTEL&quot;</span><span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;NEC&quot;</span><span class="bu"> ]</span> <span class="kw">||</span></a>
<a class="sourceLine" id="cb642-2" title="2">   [ <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> != <span class="st">&quot;CISCO&quot;</span> ]</a>
<a class="sourceLine" id="cb642-3" title="3"><span class="kw">then</span></a>
<a class="sourceLine" id="cb642-4" title="4">    <span class="bu">echo</span> <span class="st">&quot;Phone type must be nortel,cisco or nec&quot;</span></a>
<a class="sourceLine" id="cb642-5" title="5">    <span class="bu">exit</span></a>
<a class="sourceLine" id="cb642-6" title="6"><span class="kw">fi</span></a></code></pre></div>
<p>The above code did not work for me, so I tried this instead:</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb643-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;NORTEL&quot;</span><span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;NEC&quot;</span><span class="bu"> ]</span> <span class="kw">||</span></a>
<a class="sourceLine" id="cb643-2" title="2">   [ <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> == <span class="st">&quot;CISCO&quot;</span> ]</a>
<a class="sourceLine" id="cb643-3" title="3"><span class="kw">then</span></a>
<a class="sourceLine" id="cb643-4" title="4">    <span class="bu">:</span>        <span class="co"># do nothing</span></a>
<a class="sourceLine" id="cb643-5" title="5"><span class="kw">else</span></a>
<a class="sourceLine" id="cb643-6" title="6">    <span class="bu">echo</span> <span class="st">&quot;Phone type must be nortel,cisco or nec&quot;</span></a>
<a class="sourceLine" id="cb643-7" title="7">    <span class="bu">exit</span></a>
<a class="sourceLine" id="cb643-8" title="8"><span class="kw">fi</span></a></code></pre></div>
<p>Are there cleaner ways for this type of task?</p>
</section>
<section id="answer-accepted-score-165-1" class="level4">
<h4>Answer accepted (score 165)</h4>
<p>I guess you’re looking for:</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb644-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;NORTEL&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;NEC&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span></a>
<a class="sourceLine" id="cb644-2" title="2">   [ <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span> != <span class="st">&quot;CISCO&quot;</span> ]</a></code></pre></div>
<p>The rules for these equivalents are called <a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws" rel="noreferrer">De Morgan’s laws</a> and in your case meant:</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb645-1" title="1"><span class="ex">not</span>(A <span class="kw">||</span> <span class="ex">B</span> <span class="kw">||</span> <span class="ex">C</span>) =<span class="op">&gt;</span> <span class="ex">not</span>(A) <span class="kw">&amp;&amp;</span> <span class="ex">not</span>(B) <span class="kw">&amp;&amp;</span> <span class="ex">not</span> (C)</a></code></pre></div>
<p>Note the change in the boolean operator or and and.</p>
<p>Whereas you tried to do:</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb646-1" title="1"><span class="ex">not</span>(A <span class="kw">||</span> <span class="ex">B</span> <span class="kw">||</span> <span class="ex">C</span>) =<span class="op">&gt;</span> <span class="ex">not</span>(A) <span class="kw">||</span> <span class="ex">not</span>(B) <span class="kw">||</span> <span class="ex">not</span>(C)</a></code></pre></div>
<p>Which obviously doesn’t work.</p>
</section>
<section id="answer-2-score-29-3" class="level4">
<h4>Answer 2 (score 29)</h4>
<p>A much shorter way would be:</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb647-1" title="1"><span class="kw">if [[</span> <span class="ot">!</span> <span class="va">$PHONE_TYPE</span> =~ ^(NORTEL|NEC|CISCO)$<span class="kw"> ]]</span>; <span class="kw">then</span> </a>
<a class="sourceLine" id="cb647-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;Phone type must be nortel, cisco or nec.&quot;</span></a>
<a class="sourceLine" id="cb647-3" title="3"><span class="kw">fi</span></a></code></pre></div>
<ul>
<li>
<code>^</code> – To match a starting at the beginning of line
</li>
<li>
<code>$</code> – To match end of the line
</li>
<li>
<code>=~</code> - Bash’s built-in regular expression comparison operator
</li>
</ul>
</section>
<section id="answer-3-score-12-2" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>Good answers, and an invaluable lesson ;) Only want to supplement with a note.</p>
<p>What type of test one choose to use is highly dependent on code, structure, surroundings etc.</p>
<p>An alternative could be to use a switch or <code>case</code> statement as in:</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb648-1" title="1"><span class="kw">case</span> <span class="st">&quot;</span><span class="va">$PHONE_TYPE</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb648-2" title="2"><span class="st">&quot;NORTEL&quot;</span><span class="kw">|</span><span class="st">&quot;NEC&quot;</span><span class="kw">|</span><span class="st">&quot;CISCO&quot;</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb648-3" title="3">    <span class="bu">echo</span> <span class="st">&quot;OK&quot;</span></a>
<a class="sourceLine" id="cb648-4" title="4">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb648-5" title="5">*<span class="kw">)</span></a>
<a class="sourceLine" id="cb648-6" title="6">    <span class="bu">echo</span> <span class="st">&quot;Phone type must be nortel,cisco or nec&quot;</span></a>
<a class="sourceLine" id="cb648-7" title="7">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb648-8" title="8"><span class="kw">esac</span></a></code></pre></div>
<p>As a second note you should be careful by using upper-case variable names. This is to prevent collision between variables introduced by the system, which almost always is all upper case. Thus <code>$phone_type</code> instead of <code>$PHONE_TYPE</code>.</p>
<p>Though that one is safe, if you have as habit using all upper case, one day you might say <code>IFS=&quot;boo&quot;</code> and you’re in a world of hurt.</p>
<p>It will also make it easier to spot which is what.</p>
<p>Not a <strong>have to</strong> but a would strongly consider.</p>
<hr>
<p>It is also presumably a good candidate for a function. This mostly makes the code easier to read and maintain. E.g.:</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb649-1" title="1"><span class="fu">valid_phone_type()</span></a>
<a class="sourceLine" id="cb649-2" title="2"><span class="kw">{</span></a>
<a class="sourceLine" id="cb649-3" title="3">    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb649-4" title="4">    <span class="st">&quot;NORTEL&quot;</span><span class="kw">|</span><span class="st">&quot;NEC&quot;</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb649-5" title="5">        <span class="bu">return</span> 0<span class="kw">;;</span></a>
<a class="sourceLine" id="cb649-6" title="6">    <span class="ex">*</span>)</a>
<a class="sourceLine" id="cb649-7" title="7">        <span class="bu">echo</span> <span class="st">&quot;Model </span><span class="va">$1</span><span class="st"> is not supported&quot;</span></a>
<a class="sourceLine" id="cb649-8" title="8">        <span class="bu">return</span> 1<span class="kw">;;</span></a>
<a class="sourceLine" id="cb649-9" title="9">    <span class="kw">esac</span></a>
<a class="sourceLine" id="cb649-10" title="10"><span class="kw">}</span></a>
<a class="sourceLine" id="cb649-11" title="11"></a>
<a class="sourceLine" id="cb649-12" title="12"><span class="kw">if</span> ! <span class="ex">valid_phone_type</span> <span class="st">&quot;</span><span class="va">$phone_type</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb649-13" title="13">    <span class="bu">echo</span> <span class="st">&quot;Bye.&quot;</span></a>
<a class="sourceLine" id="cb649-14" title="14">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb649-15" title="15"><span class="kw">fi</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ssh-login-with-clear-text-password-as-a-parameter-score-407789-in-2015" class="level3">
<h3>93: SSH login with clear text password as a parameter? (score <a href="https://stackoverflow.com/q/38737.html">407789</a> in 2015)</h3>
<section id="question-92" class="level4">
<h4>Question</h4>
<p>I need to login to a user that I’ve created on a remote host running Ubuntu. I can’t use an <code>ssh</code> key because the ssh login will happen from a bash script ran within a server that I won’t have access to (think continuous integration server like Bamboo).</p>
<p>I understand this isn’t an ideal practice, but I want to either set the remote host to not ask for the password or be able to login with something like <code>ssh --passsword foobar user@host</code>, kind of like MySQL allows you to do for logins.</p>
<p>I’m not finding this in <code>man ssh</code> and I’m open to any alternatives to getting around this issue.</p>
</section>
<section id="answer-2-score-146-1" class="level4">
<h4>Answer 2 (score 146)</h4>
<p>On Ubuntu, install the <code>sshpass</code> package, then use it like this:</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb650-1" title="1"><span class="ex">sshpass</span> -p <span class="st">&#39;YourPassword&#39;</span> ssh user@host</a></code></pre></div>
<p><code>sshpass</code> also supports passing the keyboard-interactive password from a file or an environment variable, which might be a more appropriate option in any situation where security is relevant. See <a href="http://linux.die.net/man/1/sshpass"><code>man sshpass</code></a> for the details.</p>
</section>
<section id="answer-3-score-17-1" class="level4">
<h4>Answer 3 (score 17)</h4>
<p>If your alternative is to put a password into a script or <code>ssh</code> command line or plain text file, then you’re <strong><em>MUCH</em></strong> better off using an <code>ssh</code> key instead. Either way, anyone who has access to the account where the <code>ssh</code> client script is stored would be able to use that to get into the server, but at least in the case of an <code>ssh</code> key, OpenSSH supports it properly, you don’t grant access by other means than <code>ssh</code>, it’s more easily revoked if necessary, etc…</p>
<p>You will have to explain why you have a requirement to not use an ssh key.</p>
<p>Consider also using a forced command (<code>command=&quot;...&quot;</code> in the <code>.ssh/authorized_keys</code> file) so that the client only has access to run the command they need on the server rather than a full shell.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-write-startup-script-for-systemd-score-407696-in-2017" class="level3">
<h3>94: How to write startup script for systemd (score <a href="https://stackoverflow.com/q/47695.html">407696</a> in 2017)</h3>
<section id="question-93" class="level4">
<h4>Question</h4>
<p>I have 2 graphics cards on my laptop. One is IGP and another discrete.</p>
<p>I’ve written a shell script to to turn off the discrete graphics card.</p>
<p>How can I convert it to systemd script to run it at start-up?</p>
</section>
<section id="answer-accepted-score-332" class="level4">
<h4>Answer accepted (score 332)</h4>
<p>There are mainly two approaches to do that:</p>
<ul>
<li>
If you have to run a script, you don’t convert it but rather run the script via a <code>systemd</code> service.
</li>
</ul>
<p>
Therefore you need two files: the script and the <code>.service</code> file (unit configuration file).<br> Make sure your script is executable and the first line (the <em>shebang</em>) is <code>#!/bin/sh</code>. Then create the <code>.service</code> file in <code>/etc/systemd/system</code> (a plain text file, let’s call it <code>vgaoff.service</code>).<br> For example:
</p>
<ol>
<li>
the script: <code>/usr/bin/vgaoff</code>
</li>
<li>
the unit file: <code>/etc/systemd/system/vgaoff.service</code>
</li>
</ol>
<p>Now, edit the unit file. Its content depends on how your script works:</p>
<p>If <code>vgaoff</code> just powers off the gpu, e.g.:</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb651-1" title="1"><span class="bu">exec</span> blah-blah pwrOFF etc </a></code></pre></div>
<p>then the content of <code>vgaoff.service</code> should be:</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb652-1" title="1">[<span class="ex">Unit</span>]</a>
<a class="sourceLine" id="cb652-2" title="2"><span class="va">Description=</span>Power-off <span class="ex">gpu</span></a>
<a class="sourceLine" id="cb652-3" title="3"></a>
<a class="sourceLine" id="cb652-4" title="4">[<span class="ex">Service</span>]</a>
<a class="sourceLine" id="cb652-5" title="5"><span class="va">Type=</span>oneshot</a>
<a class="sourceLine" id="cb652-6" title="6"><span class="va">ExecStart=</span>/usr/bin/vgaoff</a>
<a class="sourceLine" id="cb652-7" title="7"></a>
<a class="sourceLine" id="cb652-8" title="8">[<span class="ex">Install</span>]</a>
<a class="sourceLine" id="cb652-9" title="9"><span class="va">WantedBy=</span>multi-user.target</a></code></pre></div>
<p>If <code>vgaoff</code> is used to power off the GPU and also to power it back on, e.g.:</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb653-1" title="1"><span class="fu">start()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb653-2" title="2">  <span class="bu">exec</span> blah-blah pwrOFF etc</a>
<a class="sourceLine" id="cb653-3" title="3"><span class="kw">}</span></a>
<a class="sourceLine" id="cb653-4" title="4"></a>
<a class="sourceLine" id="cb653-5" title="5"><span class="fu">stop()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb653-6" title="6">  <span class="bu">exec</span> blah-blah pwrON etc</a>
<a class="sourceLine" id="cb653-7" title="7"><span class="kw">}</span></a>
<a class="sourceLine" id="cb653-8" title="8"></a>
<a class="sourceLine" id="cb653-9" title="9"><span class="kw">case</span> <span class="va">$1</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb653-10" title="10">  start<span class="kw">|</span>stop<span class="kw">)</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="kw">;;</span></a>
<a class="sourceLine" id="cb653-11" title="11"><span class="kw">esac</span></a></code></pre></div>
<p>then the content of <code>vgaoff.service</code> should be:</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb654-1" title="1">[<span class="ex">Unit</span>]</a>
<a class="sourceLine" id="cb654-2" title="2"><span class="va">Description=</span>Power-off <span class="ex">gpu</span></a>
<a class="sourceLine" id="cb654-3" title="3"></a>
<a class="sourceLine" id="cb654-4" title="4">[<span class="ex">Service</span>]</a>
<a class="sourceLine" id="cb654-5" title="5"><span class="va">Type=</span>oneshot</a>
<a class="sourceLine" id="cb654-6" title="6"><span class="va">ExecStart=</span>/usr/bin/vgaoff <span class="ex">start</span></a>
<a class="sourceLine" id="cb654-7" title="7"><span class="va">ExecStop=</span>/usr/bin/vgaoff <span class="ex">stop</span></a>
<a class="sourceLine" id="cb654-8" title="8"><span class="va">RemainAfterExit=</span>yes</a>
<a class="sourceLine" id="cb654-9" title="9"></a>
<a class="sourceLine" id="cb654-10" title="10">[<span class="ex">Install</span>]</a>
<a class="sourceLine" id="cb654-11" title="11"><span class="va">WantedBy=</span>multi-user.target</a></code></pre></div>
<ul>
<li>
For the most trivial cases, you can do without the script and execute a certain command directly:
</li>
</ul>
<p>To power off:</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb655-1" title="1">[<span class="ex">Unit</span>]</a>
<a class="sourceLine" id="cb655-2" title="2"><span class="va">Description=</span>Power-off <span class="ex">gpu</span></a>
<a class="sourceLine" id="cb655-3" title="3"></a>
<a class="sourceLine" id="cb655-4" title="4">[<span class="ex">Service</span>]</a>
<a class="sourceLine" id="cb655-5" title="5"><span class="va">Type=</span>oneshot</a>
<a class="sourceLine" id="cb655-6" title="6"><span class="va">ExecStart=</span>/bin/sh <span class="ex">-c</span> <span class="st">&quot;echo OFF &gt; /whatever/vga_pwr_gadget/switch&quot;</span></a>
<a class="sourceLine" id="cb655-7" title="7"></a>
<a class="sourceLine" id="cb655-8" title="8">[<span class="ex">Install</span>]</a>
<a class="sourceLine" id="cb655-9" title="9"><span class="va">WantedBy=</span>multi-user.target</a></code></pre></div>
<p>To power off and on:</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb656-1" title="1">[<span class="ex">Unit</span>]</a>
<a class="sourceLine" id="cb656-2" title="2"><span class="va">Description=</span>Power-off <span class="ex">gpu</span></a>
<a class="sourceLine" id="cb656-3" title="3"></a>
<a class="sourceLine" id="cb656-4" title="4">[<span class="ex">Service</span>]</a>
<a class="sourceLine" id="cb656-5" title="5"><span class="va">Type=</span>oneshot</a>
<a class="sourceLine" id="cb656-6" title="6"><span class="va">ExecStart=</span>/bin/sh <span class="ex">-c</span> <span class="st">&quot;echo OFF &gt; /whatever/vga_pwr_gadget/switch&quot;</span></a>
<a class="sourceLine" id="cb656-7" title="7"><span class="va">ExecStop=</span>/bin/sh <span class="ex">-c</span> <span class="st">&quot;echo ON &gt; /whatever/vga_pwr_gadget/switch&quot;</span></a>
<a class="sourceLine" id="cb656-8" title="8"><span class="va">RemainAfterExit=</span>yes</a>
<a class="sourceLine" id="cb656-9" title="9"></a>
<a class="sourceLine" id="cb656-10" title="10">[<span class="ex">Install</span>]</a>
<a class="sourceLine" id="cb656-11" title="11"><span class="va">WantedBy=</span>multi-user.target</a></code></pre></div>
<hr>
<p>Once you’re done with the files, enable the service:</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb657-1" title="1"><span class="ex">systemctl</span> enable vgaoff.service</a></code></pre></div>
<p>It will start automatically on next boot. You could even enable and start the service in one go with</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb658-1" title="1"><span class="ex">systemctl</span> enable --now vgaoff.service</a></code></pre></div>
<p>
as of <code>systemd v.220</code> (on older setups you’ll have to start it manually).<br> For more details see <a href="http://www.freedesktop.org/software/systemd/man/systemd.service.html" rel="noreferrer"><code>systemd.service</code></a> manual page.
</p>
<hr>
<p>
<em>Troubleshooting</em>.<br> Start here:<br> <a href="https://unix.stackexchange.com/q/225401/22142">How to see full log of a <code>systemd</code> service?</a><br> <a href="https://unix.stackexchange.com/q/458648/22142"><code>systemd</code> service exit codes and status information explanation</a>
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="delete-files-older-than-x-days-score-405807-in-2015" class="level3">
<h3>95: Delete files older than X days + (score <a href="https://stackoverflow.com/q/194863.html">405807</a> in 2015)</h3>
<section id="question-94" class="level4">
<h4>Question</h4>
<p>I have found the command to delete files older than 5 days in a folder</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb659-1" title="1"><span class="fu">find</span> /path/to/files* -mtime +5 -exec rm {} <span class="dt">\;</span></a></code></pre></div>
<p>But how do I also do this for subdirectories in that folder?</p>
</section>
<section id="answer-accepted-score-240-1" class="level4">
<h4>Answer accepted (score 240)</h4>
<p>Be careful with special file names (spaces, quotes) when piping to rm.</p>
<p>There is a safe alternative - the <strong>-delete</strong> option:</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb660-1" title="1"><span class="fu">find</span> /path/to/directory/ -mindepth 1 -mtime +5 -delete</a></code></pre></div>
<p>That’s it, no separate rm call and you don’t need to worry about file names.</p>
<p>Replace <code>-delete</code> with <code>-depth -print</code> to test this command before you run it (<code>-delete</code> implies <code>-depth</code>).</p>
</section>
<section id="answer-2-score-15" class="level4">
<h4>Answer 2 (score 15)</h4>
<p>Note that this command will not work when it finds too many files. It will yield an error like:</p>
<div class="sourceCode" id="cb661"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb661-1" title="1"><span class="ex">bash</span>: /usr/bin/find: Argument list too long</a></code></pre></div>
<p>Meaning the exec system call’s limit on the length of a command line was exceeded. Instead of executing rm that way it’s a lot more efficient to use <a href="https://en.wikipedia.org/wiki/Xargs" rel="noreferrer">xargs</a>. Here’s an example that works:</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb662-1" title="1"><span class="fu">find</span> /root/Maildir/ -mindepth 1 -type f -mtime +14 <span class="kw">|</span> <span class="fu">xargs</span> rm</a></code></pre></div>
<p>This will remove all files (type f) modified longer than 14 days ago under /root/Maildir/ recursively from there and deeper (mindepth 1). <a href="http://www.thelinuxlink.net/lvlinux/resources/commands/find.html" rel="noreferrer">See the find manual for more options</a>.</p>
</section>
<section id="answer-3-score-8" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>It’s the same. You just have to provide the parent directory rather than the prefix of files. In your example, it would be:</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb663-1" title="1"><span class="fu">find</span> /path/to -type f -mtime +5 -exec rm {} <span class="dt">\;</span></a></code></pre></div>
<p>This will delete all the files older than 5 days which are under <code>/path/to</code> and its sub-directories.</p>
<p>To delete empty sub-directories, refer to <span class="citation" data-cites="Costas">@Costas</span> comment above.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="in-a-bash-script-using-the-conditional-or-in-an-if-statement-score-405275-in-2017" class="level3">
<h3>96: In a bash script, using the conditional “or” in an “if” statement (score <a href="https://stackoverflow.com/q/47584.html">405275</a> in 2017)</h3>
<section id="question-95" class="level4">
<h4>Question</h4>
<p>This question is a sequel of sorts to my <a href="https://unix.stackexchange.com/questions/47557/in-a-bash-shell-script-writing-a-for-loop-that-iterates-over-string-values">earlier question</a>. The users on this site kindly helped me determine how to write a bash <code>for</code> loop that iterates over string values. For example, suppose that a loop control variable <code>fname</code> iterates over the strings <code>&quot;a.txt&quot; &quot;b.txt&quot; &quot;c.txt&quot;</code>. I would like to <code>echo</code> “yes!” when <code>fname</code> has the value <code>&quot;a.txt&quot;</code> or <code>&quot;c.txt&quot;</code>, and <code>echo</code> “no!” otherwise. I have tried the following bash shell script:</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb664-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb664-2" title="2"></a>
<a class="sourceLine" id="cb664-3" title="3"><span class="kw">for</span> <span class="ex">fname</span> in <span class="st">&quot;a.txt&quot;</span> <span class="st">&quot;b.txt&quot;</span> <span class="st">&quot;c.txt&quot;</span></a>
<a class="sourceLine" id="cb664-4" title="4"><span class="kw">do</span></a>
<a class="sourceLine" id="cb664-5" title="5"> <span class="bu">echo</span> <span class="va">$fname</span></a>
<a class="sourceLine" id="cb664-6" title="6"> <span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$fname</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;a.txt&quot;</span><span class="bu"> ]</span> <span class="kw">|</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$fname</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;c.txt&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb664-7" title="7"> <span class="bu">echo</span> <span class="st">&quot;yes!&quot;</span></a>
<a class="sourceLine" id="cb664-8" title="8"><span class="kw">else</span></a>
<a class="sourceLine" id="cb664-9" title="9"> <span class="bu">echo</span> <span class="st">&quot;no!&quot;</span></a>
<a class="sourceLine" id="cb664-10" title="10"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb664-11" title="11"><span class="kw">done</span></a></code></pre></div>
<p>I obtain the output:</p>
<blockquote>
<p>a.txt</p>
<p>no!</p>
<p>b.txt</p>
<p>no!</p>
<p>c.txt</p>
yes!
</blockquote>
<p>Why does the <code>if</code> statement apparently yield true when <code>fname</code> has the value <code>&quot;a.txt&quot;</code>? Have I used <code>|</code> incorrectly?</p>
</section>
<section id="answer-accepted-score-233" class="level4">
<h4>Answer accepted (score 233)</h4>
<p>If you want to say <code>OR</code> use double pipe (<code>||</code>).</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb665-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$fname</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;a.txt&quot;</span><span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$fname</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;c.txt&quot;</span><span class="bu"> ]</span></a></code></pre></div>
<p>(The original OP code using <code>|</code> was simply piping the output of the left side to the right side, in the same way any ordinary pipe works.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="gpu-usage-monitoring-cuda-score-404894-in" class="level3">
<h3>97: GPU usage monitoring (CUDA) (score <a href="https://stackoverflow.com/q/38560.html">404894</a> in )</h3>
<section id="question-96" class="level4">
<h4>Question</h4>
<p>I installed CUDA toolkit on my computer and started BOINC project on GPU. In BOINC I can see that it is running on GPU, but is there a tool that can show me more details about that what is running on GPU - GPU usage and memory usage?</p>
</section>
<section id="answer-accepted-score-252-1" class="level4">
<h4>Answer accepted (score 252)</h4>
<p>For Nvidia GPUs there is a tool <code>nvidia-smi</code> that can show memory usage, GPU utilization and temperature of GPU. There also is a list of compute processes and few more options but my graphic card (GeForce 9600 GT) is not fully supported.</p>
<div class="sourceCode" id="cb666"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb666-1" title="1"><span class="ex">Sun</span> May 13 20:02:49 2012       </a>
<a class="sourceLine" id="cb666-2" title="2"><span class="ex">+------------------------------------------------------+</span>                       </a>
<a class="sourceLine" id="cb666-3" title="3"><span class="kw">|</span> <span class="ex">NVIDIA-SMI</span> 3.295.40   Driver Version: 295.40         <span class="kw">|</span>                       </a>
<a class="sourceLine" id="cb666-4" title="4"><span class="kw">|</span><span class="ex">-------------------------------+----------------------+----------------------+</span></a>
<a class="sourceLine" id="cb666-5" title="5"><span class="kw">|</span> <span class="ex">Nb.</span>  Name                     <span class="kw">|</span> <span class="ex">Bus</span> Id        Disp.  <span class="kw">|</span> <span class="ex">Volatile</span> ECC SB / DB <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-6" title="6"><span class="kw">|</span> <span class="ex">Fan</span>   Temp   Power Usage /Cap <span class="kw">|</span> <span class="ex">Memory</span> Usage         <span class="kw">|</span> <span class="ex">GPU</span> Util. Compute M. <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-7" title="7"><span class="kw">|</span>===============================<span class="ex">+</span>======================+======================<span class="kw">|</span></a>
<a class="sourceLine" id="cb666-8" title="8"><span class="kw">|</span> <span class="ex">0.</span>  GeForce 9600 GT           <span class="kw">|</span> <span class="ex">0000</span>:01:00.0  N/A    <span class="kw">|</span>       <span class="ex">N/A</span>        N/A <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-9" title="9"><span class="kw">|</span>   <span class="ex">0%</span>   51 C  N/A   N/A /  N/A <span class="kw">|</span>  <span class="ex">90%</span>  459MB /  511MB <span class="kw">|</span>  <span class="ex">N/A</span>      Default    <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-10" title="10"><span class="kw">|</span><span class="ex">-------------------------------+----------------------+----------------------</span><span class="kw">|</span></a>
<a class="sourceLine" id="cb666-11" title="11"><span class="kw">|</span> <span class="ex">Compute</span> processes:                                               GPU Memory <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-12" title="12"><span class="kw">|</span>  <span class="ex">GPU</span>  PID     Process name                                       Usage      <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-13" title="13"><span class="kw">|</span>=============================================================================<span class="kw">|</span></a>
<a class="sourceLine" id="cb666-14" title="14"><span class="kw">|</span>  <span class="ex">0.</span>           Not Supported                                                 <span class="kw">|</span></a>
<a class="sourceLine" id="cb666-15" title="15"><span class="ex">+-----------------------------------------------------------------------------+</span></a></code></pre></div>
</section>
<section id="answer-2-score-71-1" class="level4">
<h4>Answer 2 (score 71)</h4>
<p>For linux, use <code>nvidia-smi -l 1</code> will continually give you the gpu usage info, with in refresh interval of 1 second.</p>
</section>
<section id="answer-3-score-63" class="level4">
<h4>Answer 3 (score 63)</h4>
<p>Recently I have written a simple command-line utility called <a href="https://github.com/wookayin/gpustat"><code>gpustat</code></a> (which is a wrapper of <code>nvidia-smi</code>) : please take a look at <a href="https://github.com/wookayin/gpustat">https://github.com/wookayin/gpustat</a>.</p>
<p><img src="https://github.com/wookayin/gpustat/raw/master/screenshot.png" alt=""></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-purpose-of-.bashrc-and-how-does-it-work-score-404368-in-2014" class="level3">
<h3>98: What is the purpose of .bashrc and how does it work? (score <a href="https://stackoverflow.com/q/129143.html">404368</a> in 2014)</h3>
<section id="question-97" class="level4">
<h4>Question</h4>
<p>I found the <code>.bashrc</code> file and I want to know the purpose/function of it. Also how and when is it used?</p>
</section>
<section id="answer-accepted-score-134-1" class="level4">
<h4>Answer accepted (score 134)</h4>
<p><code>.bashrc</code> is a <a href="http://en.wikipedia.org/wiki/Shell_script" rel="noreferrer">shell script</a> that Bash runs whenever it is started interactively. It initializes an interactive shell session. You can put any command in that file that you could type at the command prompt.</p>
<p>You put commands here to set up the shell for use in your particular environment, or to customize things to your preferences. A common thing to put in <code>.bashrc</code> are <a href="http://en.wikipedia.org/wiki/Alias_(command)" rel="noreferrer">aliases</a> that you want to always be available.</p>
<p><code>.bashrc</code> runs on <em>every</em> interactive shell launch. If you say:</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb667-1" title="1">$ <span class="fu">bash</span> <span class="kw">;</span> <span class="fu">bash</span> <span class="kw">;</span> <span class="fu">bash</span></a></code></pre></div>
<p>and then hit <kbd>Ctrl-D</kbd> three times, <code>.bashrc</code> will run three times. But if you say this instead:</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb668-1" title="1">$ <span class="fu">bash</span> -c exit <span class="kw">;</span> <span class="fu">bash</span> -c exit <span class="kw">;</span> <span class="fu">bash</span> -c exit</a></code></pre></div>
<p>then <code>.bashrc</code> won’t run at all, since <code>-c</code> makes the Bash call non-interactive. The same is true when you run a shell script from a file.</p>
<p>Contrast <code>.bash_profile</code> and <code>.profile</code> which are only run at the start of a new login shell. (<code>bash -l</code>) You choose whether a command goes in <code>.bashrc</code> vs <code>.bash_profile</code> depending on on whether you want it to run once or for every interactive shell start.</p>
<p>As a counterexample to aliases, which I prefer to put in <code>.bashrc</code>, you want to do <code>PATH</code> adjustments in <code>.bash_profile</code> instead, since these changes are typically not <a href="http://en.wikipedia.org/wiki/Idempotent" rel="noreferrer">idempotent</a>:</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb669-1" title="1"><span class="bu">export</span> <span class="va">PATH=</span><span class="st">&quot;</span><span class="va">$PATH</span><span class="st">:/some/addition&quot;</span></a></code></pre></div>
<p>If you put that in <code>.bashrc</code> instead, every time you launched an interactive sub-shell, <code>:/some/addition</code> would get tacked on to the end of the <code>PATH</code> again, creating extra work for the shell when you mistype a command.</p>
<p>You get a new interactive Bash shell whenever you <a href="http://web.physics.ucsb.edu/~pcs/apps/editors/vi/vi_unix.html" rel="noreferrer">shell out of <code>vi</code></a> with <code>:sh</code>, for example.</p>
</section>
<section id="answer-2-score-21" class="level4">
<h4>Answer 2 (score 21)</h4>
<p>The purpose of a <code>.bashrc</code> file is to provide a place where you can set up variables, functions and aliases, define your (PS1) prompt and define other settings that you want to use every start you open a new terminal window.</p>
<p>It works by being run each time you open up a new terminal, window or pane.</p>
<p>You can see mine here <a href="https://i.stack.imgur.com/DQnGN.png" rel="noreferrer">(pic with syntax highlighting)</a>:</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb670-1" title="1"><span class="va">HISTCONTROL=</span>ignoreboth:erasedups <span class="va">HISTSIZE=</span>100000 <span class="va">HISTFILESIZE=</span>200000</a>
<a class="sourceLine" id="cb670-2" title="2"><span class="fu">ls</span> --color=al <span class="op">&gt;</span> /dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">&amp;&amp;</span> <span class="bu">alias</span> ls=<span class="st">&#39;ls -F --color=al&#39;</span> <span class="kw">||</span> <span class="bu">alias</span> ls=<span class="st">&#39;ls -G&#39;</span></a>
<a class="sourceLine" id="cb670-3" title="3"><span class="fu">md ()</span> <span class="kw">{</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">=</span> 1<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="fu">mkdir</span> -p <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="kw">||</span> <span class="bu">echo</span> <span class="st">&quot;Error - no directory passed!&quot;</span><span class="kw">;</span> <span class="kw">}</span></a>
<a class="sourceLine" id="cb670-4" title="4"><span class="fu">git_branch ()</span> <span class="kw">{</span> <span class="fu">git</span> branch <span class="op">2&gt;</span> /dev/null <span class="kw">|</span> <span class="fu">sed</span> -e <span class="st">&#39;/^[^*]/d&#39;</span> -e <span class="st">&#39;s/* \(.*\)/\1/&#39;</span><span class="kw">;</span> <span class="kw">}</span></a>
<a class="sourceLine" id="cb670-5" title="5"><span class="va">HOST=</span><span class="st">&#39;\033[02;36m\]\h&#39;</span>; <span class="va">HOST=</span><span class="st">&#39; &#39;</span><span class="va">$HOST</span></a>
<a class="sourceLine" id="cb670-6" title="6"><span class="va">TIME=</span><span class="st">&#39;\033[01;31m\]\t \033[01;32m\]&#39;</span></a>
<a class="sourceLine" id="cb670-7" title="7"><span class="va">LOCATION=</span><span class="st">&#39; \033[01;34m\]`pwd | sed &quot;s#\(/[^/]\{1,\}/[^/]\{1,\}/[^/]\{1,\}/\).*\(/[^/]\{1,\}/[^/]\{1,\}\)/\{0,1\}#\1_\2#g&quot;`&#39;</span></a>
<a class="sourceLine" id="cb670-8" title="8"><span class="va">BRANCH=</span><span class="st">&#39; \033[00;33m\]$(git_branch)\[\033[00m\]\n\$ &#39;</span></a>
<a class="sourceLine" id="cb670-9" title="9"><span class="va">PS1=$TIME$USER$HOST$LOCATION$BRANCH</span></a>
<a class="sourceLine" id="cb670-10" title="10"><span class="va">PS2=</span><span class="st">&#39;\[\033[01;36m\]&gt;&#39;</span></a>
<a class="sourceLine" id="cb670-11" title="11"><span class="kw">set</span> <span class="ex">-o</span> vi <span class="co"># vi at command line</span></a>
<a class="sourceLine" id="cb670-12" title="12"><span class="bu">export</span> <span class="va">EDITOR=</span>vim</a>
<a class="sourceLine" id="cb670-13" title="13"><span class="bu">test</span> -f ~/.bash_aliases <span class="kw">&amp;&amp;</span> <span class="bu">.</span> <span class="va">$_</span></a>
<a class="sourceLine" id="cb670-14" title="14"><span class="bu">test</span> -f ~/.git-completion.bash <span class="kw">&amp;&amp;</span> <span class="bu">.</span> <span class="va">$_</span></a>
<a class="sourceLine" id="cb670-15" title="15"><span class="bu">test</span> -s ~/.autojump/etc/profile.d/autojump <span class="kw">&amp;&amp;</span> <span class="bu">.</span> <span class="va">$_</span></a>
<a class="sourceLine" id="cb670-16" title="16"><span class="bu">[</span> <span class="va">${BASH_VERSINFO[0]}</span> <span class="ot">-ge</span> 4<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="bu">shopt</span> -s autocd</a>
<a class="sourceLine" id="cb670-17" title="17"><span class="bu">[</span> <span class="ot">-f</span> /etc/bash_completion<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> ! <span class="bu">shopt</span> -oq posix <span class="kw">&amp;&amp;</span> <span class="bu">.</span> <span class="ex">/etc/bash_completion</span></a>
<a class="sourceLine" id="cb670-18" title="18"><span class="bu">[</span> <span class="ot">-z</span> <span class="va">$TMUX</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="bu">export</span> <span class="va">TERM=</span>xterm-256color <span class="kw">&amp;&amp;</span> <span class="bu">exec</span> tmux</a>
<a class="sourceLine" id="cb670-19" title="19"><span class="bu">export</span> <span class="va">PATH=</span><span class="st">&quot;</span><span class="va">$PATH</span><span class="st">:</span><span class="va">$HOME</span><span class="st">/.rvm/bin&quot;</span> <span class="co"># Add RVM to PATH for scripting</span></a>
<a class="sourceLine" id="cb670-20" title="20"><span class="kw">[[</span> <span class="ot">-s</span> <span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.rvm/scripts/rvm&quot;</span><span class="kw"> ]]</span> <span class="kw">&amp;&amp;</span> <span class="bu">source</span> <span class="st">&quot;</span><span class="va">$home</span><span class="st">/.rvm/scripts/rvm&quot;</span></a></code></pre></div>
<p>Explanation:</p>
<p>
-1. Set up my history file to ignore duplicates and be much larger than the default.<br> -2. Color option for <code>ls</code> depending on if you are using linux or OSX<br> -3. Function “<code>md</code>” to make and cd into a directory with one command<br> -4. Find the current git branch if in a git repo and…<br> -5. -9. Define an awesome PS1 prompt, as in <img src="https://i.stack.imgur.com/slR41.png" alt="&lt;code&gt;20:00:43 durrantm Castle2012 /hom/durrantm/Dropnot/_/rails_apps/linker master \n $ _&lt;/code&gt;"><br> -10. Improved PS2 prompt<br> -11. Set vi as the editor at the command line<br> -12. Set vi as the default editor<br> -13. execute my <code>.bash_aliases</code> file if it exists<br> -14. Execute my git tab completion script (for remotes and branches) if it exists.<br> -15. Execute autojump if it exists<br> -16. Allow cd’ing without typing the cd part if the bash version &gt;= 4<br> -17. Execute a bash completion script if it exists<br> -18. Use TMUX if it is present<br> -19. Add rvm to my PATH<br> -20. Use rvm if it exists.
</p>
<p>I’ve made this portable so that it works on any of my linux or OSX machines without customization - hence a number of tests for presence are done before using certain functions and other scripts.</p>
<p>
This also makes it easier to use the entire file immediately on a new machine without having issues that affect opening a new terminal window.
</p>
</section>
<section id="answer-3-score-7-1" class="level4">
<h4>Answer 3 (score 7)</h4>
<p>It is a <code>bash</code> config file.</p>
<p>Interactive (non-login) shells, then the config is read from these files:</p>
<ul>
<li>
<code>$HOME/.bashrc</code>
</li>
</ul>
<p>For Login shells, the config is read from these files:</p>
<ul>
<li>
<code>/etc/profile</code> (Always sourced)
</li>
<li>
<code>$HOME/.bash_profile</code> (the rest of these files are checked in order until one is found, then no others are read)
</li>
<li>
<code>$HOME/.bash_login</code>
</li>
<li>
<code>$HOME/.profile</code>
</li>
</ul>
<p>Simple illustration of how/when they are loaded is in the image below.</p>
<p>I added an <code>echo</code> to my <code>.bashrc</code> and <code>.bash_profile</code></p>
<p><a href="https://i.stack.imgur.com/rb1mX.png" rel="noreferrer"><img src="https://i.stack.imgur.com/rb1mX.png" alt="Interactive shell vs login shell"></a></p>
<p>see <code>man bash</code> for more information</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="inputoutput-error-when-accessing-a-directory-score-403238-in-2015" class="level3">
<h3>99: “Input/output error” when accessing a directory (score <a href="https://stackoverflow.com/q/39905.html">403238</a> in 2015)</h3>
<section id="question-98" class="level4">
<h4>Question</h4>
<p>I want to list and remove the content of a directory on a removable hard drive. But I have experienced “Input/output error”:</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb671-1" title="1">$ <span class="fu">rm</span>  pic -R</a>
<a class="sourceLine" id="cb671-2" title="2"><span class="ex">rm</span>: cannot remove <span class="kw">`</span><span class="ex">pic/60.jpg</span><span class="st">&#39;: Input/output error</span></a>
<a class="sourceLine" id="cb671-3" title="3"><span class="st">rm: cannot remove `pic/006.jpg&#39;</span>: <span class="ex">Input/output</span> error</a>
<a class="sourceLine" id="cb671-4" title="4"><span class="ex">rm</span>: cannot remove <span class="kw">`</span>pic/008.jpg<span class="st">&#39;: Input/output error</span></a>
<a class="sourceLine" id="cb671-5" title="5"><span class="st">rm: cannot remove `pic/011.jpg&#39;</span>: Input/output error</a>
<a class="sourceLine" id="cb671-6" title="6"></a>
<a class="sourceLine" id="cb671-7" title="7">$ <span class="fu">ls</span> -la pic</a>
<a class="sourceLine" id="cb671-8" title="8"><span class="ex">ls</span>: cannot access pic/60.jpg: Input/output error</a>
<a class="sourceLine" id="cb671-9" title="9"><span class="ex">-?????????</span> ? ?    ?         ?            ? 006.jpg</a>
<a class="sourceLine" id="cb671-10" title="10"><span class="ex">-?????????</span> ? ?    ?         ?            ? 006.jpg</a>
<a class="sourceLine" id="cb671-11" title="11"><span class="ex">-?????????</span> ? ?    ?         ?            ? 011.jpg</a></code></pre></div>
<p>I was wondering what the problem is?</p>
<p>How can I recover or remove the directory <code>pic</code> and all of its content?</p>
<p>My OS is Ubuntu 12.04, and the removable hard drive has ntfs filesystem. Other directories not containing or inside <code>pic</code> on the removable hard drive are working fine.</p>
<hr>
<p>Added:</p>
<p>Last part of output of <code>dmesg</code> after I tried to list the content of the directory:</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb672-1" title="1">[<span class="ex">19000.712070</span>] usb 1-1: new high-speed USB device number 2 using ehci_hcd</a>
<a class="sourceLine" id="cb672-2" title="2">[<span class="ex">19000.853167</span>] usb-storage 1-1:1.0: Quirks match for vid 05e3 pid 0702: 520</a>
<a class="sourceLine" id="cb672-3" title="3">[<span class="ex">19000.853195</span>] scsi5 : usb-storage 1-1:1.0</a>
<a class="sourceLine" id="cb672-4" title="4">[<span class="ex">19001.856687</span>] scsi 5:0:0:0: Direct-Access     ST316002 1A               0811 PQ: 0 ANSI: 0</a>
<a class="sourceLine" id="cb672-5" title="5">[<span class="ex">19001.858821</span>] sd 5:0:0:0: Attached scsi generic sg2 type 0</a>
<a class="sourceLine" id="cb672-6" title="6">[<span class="ex">19001.861733</span>] sd 5:0:0:0: [sdb] 312581808 512-byte logical blocks: (160 GB/149 GiB)</a>
<a class="sourceLine" id="cb672-7" title="7">[<span class="ex">19001.862969</span>] sd 5:0:0:0: [sdb] Test WP failed, assume Write Enabled</a>
<a class="sourceLine" id="cb672-8" title="8">[<span class="ex">19001.865223</span>] sd 5:0:0:0: [sdb] Cache data unavailable</a>
<a class="sourceLine" id="cb672-9" title="9">[<span class="ex">19001.865232</span>] sd 5:0:0:0: [sdb] Assuming drive cache: write through</a>
<a class="sourceLine" id="cb672-10" title="10">[<span class="ex">19001.867597</span>] sd 5:0:0:0: [sdb] Test WP failed, assume Write Enabled</a>
<a class="sourceLine" id="cb672-11" title="11">[<span class="ex">19001.869214</span>] sd 5:0:0:0: [sdb] Cache data unavailable</a>
<a class="sourceLine" id="cb672-12" title="12">[<span class="ex">19001.869218</span>] sd 5:0:0:0: [sdb] Assuming drive cache: write through</a>
<a class="sourceLine" id="cb672-13" title="13">[<span class="ex">19001.891946</span>]  sdb: sdb1</a>
<a class="sourceLine" id="cb672-14" title="14">[<span class="ex">19001.894713</span>] sd 5:0:0:0: [sdb] Test WP failed, assume Write Enabled</a>
<a class="sourceLine" id="cb672-15" title="15">[<span class="ex">19001.895950</span>] sd 5:0:0:0: [sdb] Cache data unavailable</a>
<a class="sourceLine" id="cb672-16" title="16">[<span class="ex">19001.895953</span>] sd 5:0:0:0: [sdb] Assuming drive cache: write through</a>
<a class="sourceLine" id="cb672-17" title="17">[<span class="ex">19001.895958</span>] sd 5:0:0:0: [sdb] Attached SCSI disk</a>
<a class="sourceLine" id="cb672-18" title="18">[<span class="ex">19113.024123</span>] usb 2-1: new high-speed USB device number 3 using ehci_hcd</a>
<a class="sourceLine" id="cb672-19" title="19">[<span class="ex">19113.218157</span>] scsi6 : usb-storage 2-1:1.0</a>
<a class="sourceLine" id="cb672-20" title="20">[<span class="ex">19114.232249</span>] scsi 6:0:0:0: Direct-Access     USB 2.0  Storage Device   0100 PQ: 0 ANSI: 0 CCS</a>
<a class="sourceLine" id="cb672-21" title="21">[<span class="ex">19114.233992</span>] sd 6:0:0:0: Attached scsi generic sg3 type 0</a>
<a class="sourceLine" id="cb672-22" title="22">[<span class="ex">19114.242547</span>] sd 6:0:0:0: [sdc] 312581808 512-byte logical blocks: (160 GB/149 GiB)</a>
<a class="sourceLine" id="cb672-23" title="23">[<span class="ex">19114.243144</span>] sd 6:0:0:0: [sdc] Write Protect is off</a>
<a class="sourceLine" id="cb672-24" title="24">[<span class="ex">19114.243154</span>] sd 6:0:0:0: [sdc] Mode Sense: 08 00 00 00</a>
<a class="sourceLine" id="cb672-25" title="25">[<span class="ex">19114.243770</span>] sd 6:0:0:0: [sdc] No Caching mode page present</a>
<a class="sourceLine" id="cb672-26" title="26">[<span class="ex">19114.243778</span>] sd 6:0:0:0: [sdc] Assuming drive cache: write through</a>
<a class="sourceLine" id="cb672-27" title="27">[<span class="ex">19114.252797</span>] sd 6:0:0:0: [sdc] No Caching mode page present</a>
<a class="sourceLine" id="cb672-28" title="28">[<span class="ex">19114.252807</span>] sd 6:0:0:0: [sdc] Assuming drive cache: write through</a>
<a class="sourceLine" id="cb672-29" title="29">[<span class="ex">19114.280407</span>]  sdc: sdc1 <span class="op">&lt;</span> sdc5 <span class="op">&gt;</span></a>
<a class="sourceLine" id="cb672-30" title="30">[<span class="ex">19114.289774</span>] sd 6:0:0:0: [sdc] No Caching mode page present</a>
<a class="sourceLine" id="cb672-31" title="31">[<span class="ex">19114.289779</span>] sd 6:0:0:0: [sdc] Assuming drive cache: write through</a>
<a class="sourceLine" id="cb672-32" title="32">[<span class="ex">19114.289783</span>] sd 6:0:0:0: [sdc] Attached SCSI disk</a></code></pre></div>
</section>
<section id="answer-2-score-36-1" class="level4">
<h4>Answer 2 (score 36)</h4>
<p>Input/Output errors during filesystem access attempts generally mean hardware issues.</p>
<p>Type <code>dmesg</code> and check the last few lines of output. If the disc or the connection to it is failing, it’ll be noted there.</p>
<p><strong>EDIT</strong> Are you mounting it via <code>ntfs</code> or <code>ntfs-3g</code> ? As I recall, the legacy <code>ntfs</code> driver had <em>no</em> stable write support and was largely abandoned when it turned out <code>ntfs-3g</code> was significantly more stable and secure.</p>
</section>
<section id="answer-3-score-19-1" class="level4">
<h4>Answer 3 (score 19)</h4>
<p>As Sadhur states this is probably caused by disk hardware issues and the <code>dmesg</code> output is the right place to check this.</p>
<p>You can issue a surface scan of your disk from Linux <code>/sbin/badblocks /dev/sda</code>.</p>
<p>Check the manual page for more thorough tests an basic fixes (block relocation). This is all filesystem-agnostic, so it is safe even with an NTFS filesystem as it operates on the ‘disk surface’ level.</p>
<p>
I personally made this to run on a monthly basis from cron. Of course you need to check if you receive the cron mails in your mailbox (which is often not the case by default). These mails end up in <code>/var/mail/$USER</code> or similar.
</p>
<p>I created <code>/etc/cron.d/badblocks</code>:</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb673-1" title="1"><span class="ex">30</span> 4 * * 3 root [ -x /sbin/badblocks ] <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="va">$(</span><span class="fu">date</span> +\%d<span class="va">)</span> <span class="ot">-le</span> 7<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="ex">/sbin/badblocks</span> /dev/sda</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-connect-to-a-serial-port-as-simple-as-using-ssh-score-402296-in-2011" class="level3">
<h3>100: How to connect to a serial port as simple as using SSH? (score <a href="https://stackoverflow.com/q/22545.html">402296</a> in 2011)</h3>
<section id="question-99" class="level4">
<h4>Question</h4>
<p>Is there a way to connect to a serial terminal just as you would do with SSH? There must be a simpler way than tools such as Minicom, like this</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb674-1" title="1">$ <span class="ex">serial</span> /dev/ttyS0 </a></code></pre></div>
<p>I know I can <code>cat</code> the output from <code>/dev/ttyS0</code> but only one way communication is possible that way, from the port to the console. And <code>echo</code> out to the port is just the same but the other way around, to the port.</p>
<p>How can I realize two way communication with a serial port the simplest possible way on Unix/Linux?</p>
</section>
<section id="answer-2-score-69-1" class="level4">
<h4>Answer 2 (score 69)</h4>
<p>I find <code>screen</code> the most useful program for serial communication since I use it for other things anyway. It’s usually just <code>screen /dev/ttyS0 &amp;lt;speed&amp;gt;</code>, although the default settings may be different for your device. It also allows you to pipe anything into the session by entering command mode and doing <code>exec !! &amp;lt;run some program that generates output&amp;gt;</code>.</p>
</section>
<section id="answer-3-score-48" class="level4">
<h4>Answer 3 (score 48)</h4>
<h5>
Background
</h3>
<p>The main reason why you need <em>any</em> program like <code>minicom</code> to communicate over a serial port is that the port needs to be <em>set up</em> prior to initiating a connection. If it weren’t set up appropriately, the <code>cat</code> and <code>echo</code> commands would not do for you what you might have expected. Notice that once you run a program like <code>minicom</code>, the port is left with the settings that <code>minicom</code> used. You can query the communication settings using the <code>stty</code> program like this:</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb675-1" title="1"><span class="fu">stty</span> <span class="op">&lt;</span> /dev/ttyS0</a></code></pre></div>
<p>If you have done it right; after booting the computer and before running any other program like <code>minicom,</code> the communication settings will be at their default settings. These are probably different than what you will need to make your connection. In this situation, sending the commands <code>cat</code> or <code>echo</code> to the port will either produce garbage or not work at all.</p>
<p>Run <code>stty</code> again <em>after</em> using <code>minicom</code>, and you’ll notice the settings are set to what the program was using.</p>
<h5>
Minimal serial communication
</h3>
<p>Basically, two things are needed to have two-way communication through a serial port: 1) configuring the serial port, and 2) opening the pseudo-tty read-write.</p>
<p>The most basic program that I know that does this is <strong><a href="http://code.google.com/p/picocom/" rel="noreferrer"><code>picocom</code></a></strong>. You can also use a tool like <a href="http://setserial.sourceforge.net/" rel="noreferrer"><code>setserial</code></a> to set up the port and then interact with it directly from the shell.</p>
</section>
</section>
</section>
</body>
</html>
