<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Qt_top_100.md – Qt &lt;- StackOverflow top 100</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #232629;
        color: #7a7c7d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
    div.sourceCode
      { color: #cfcfc2; background-color: #232629; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span. { color: #cfcfc2; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #3f8058; } /* Annotation */
    code span.at { color: #2980b9; } /* Attribute */
    code span.bn { color: #f67400; } /* BaseN */
    code span.bu { color: #7f8c8d; } /* BuiltIn */
    code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #3daee9; } /* Char */
    code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
    code span.co { color: #7a7c7d; } /* Comment */
    code span.cv { color: #7f8c8d; } /* CommentVar */
    code span.do { color: #a43340; } /* Documentation */
    code span.dt { color: #2980b9; } /* DataType */
    code span.dv { color: #f67400; } /* DecVal */
    code span.er { color: #da4453; text-decoration: underline; } /* Error */
    code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
    code span.fl { color: #f67400; } /* Float */
    code span.fu { color: #8e44ad; } /* Function */
    code span.im { color: #27ae60; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
    code span.op { color: #cfcfc2; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #27ae60; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #f44f4f; } /* String */
    code span.va { color: #27aeae; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../Css/color_dark_solarized.css" />
  <link rel="stylesheet" href="../Css/layout_toc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script type="text/javascript" src="../Css/js_masonry_desandro.js"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Qt &lt;- StackOverflow top 100</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#how-to-convert-int-to-qstring-score-432339-in-2015">1: How to convert int to QString? (score <span>432339</span> in 2015)</a></li>
<li><a href="#qlabel-set-color-of-text-and-background-score-298574-in-2012">2: QLabel: set color of text and background (score <span>298574</span> in 2012)</a></li>
<li><a href="#how-to-convert-qstring-to-stdstring-score-263024-in-2015">3: How to convert QString to std::string? (score <span>263024</span> in 2015)</a></li>
<li><a href="#how-to-print-to-console-when-using-qt-score-247741-in-2015">4: How to print to console when using Qt (score <span>247741</span> in 2015)</a></li>
<li><a href="#qt-5.1.1-application-failed-to-start-because-platform-plugin-windows-is-missing-score-227971-in-2017">5: Qt 5.1.1: Application failed to start because platform plugin “windows” is missing (score <span>227971</span> in 2017)</a></li>
<li><a href="#adding-external-library-into-qt-creator-project-score-208998-in-2013">6: Adding external library into Qt Creator project (score <span>208998</span> in 2013)</a></li>
<li><a href="#how-to-change-string-into-qstring-score-203123-in-2016">7: How to change string into QString? (score <span>203123</span> in 2016)</a></li>
<li><a href="#failed-to-load-platform-pluginxcb-while-launching-qt5-app-on-linux-without-qt-installed-score-183978-in-2015">8: “Failed to load platform plugin”xcb" " while launching qt5 app on linux without qt installed (score <span>183978</span> in 2015)</a></li>
<li><a href="#how-do-i-create-a-pausewait-function-using-qt-score-179030-in-2015">9: How do I create a pause/wait function using Qt? (score <span>179030</span> in 2015)</a></li>
<li><a href="#qmake-could-not-find-a-qt-installation-of-score-170258-in-2016">10: qmake: could not find a Qt installation of ’’ (score <span>170258</span> in 2016)</a></li>
<li><a href="#auto-expanding-layout-with-qt-designer-score-168660-in">11: Auto-expanding layout with Qt-Designer (score <span>168660</span> in )</a></li>
<li><a href="#how-to-convert-qstring-to-int-score-164587-in-2016">12: How to convert QString to int? (score <span>164587</span> in 2016)</a></li>
<li><a href="#creatingwriting-into-a-new-file-in-qt-score-159250-in-2017">13: Creating/writing into a new file in Qt (score <span>159250</span> in 2017)</a></li>
<li><a href="#qstring-to-char-conversion-score-153496-in-2014">14: QString to char* conversion (score <span>153496</span> in 2014)</a></li>
<li><a href="#qt-jpg-image-display-score-152919-in-2013">15: Qt jpg image display (score <span>152919</span> in 2013)</a></li>
<li><a href="#how-to-install-pyqt5-on-windows-score-136283-in-2018">16: How to install PyQt5 on Windows? (score <span>136283</span> in 2018)</a></li>
<li><a href="#yesno-message-box-using-qmessagebox-score-135833-in-2018">17: Yes/No message box using QMessageBox (score <span>135833</span> in 2018)</a></li>
<li><a href="#qt---reading-from-a-text-file-score-135498-in">18: Qt - reading from a text file (score <span>135498</span> in )</a></li>
<li><a href="#get-current-working-directory-in-a-qt-application-score-135066-in-2016">19: Get current working directory in a Qt application (score <span>135066</span> in 2016)</a></li>
<li><a href="#how-to-enable-c11-in-qt-creator-score-133748-in-2015">20: How to enable C++11 in Qt Creator? (score <span>133748</span> in 2015)</a></li>
<li><a href="#qt.-get-part-of-qstring-score-131962-in-2017">21: Qt. get part of QString (score <span>131962</span> in 2017)</a></li>
<li><a href="#cl-is-not-recognized-as-an-internal-or-external-command-score-129230-in-2012">22: ‘cl’ is not recognized as an internal or external command, (score <span>129230</span> in 2012)</a></li>
<li><a href="#how-can-i-get-the-selected-value-out-of-a-qcombobox-score-126983-in-2018">23: How can I get the selected VALUE out of a QCombobox? (score <span>126983</span> in 2018)</a></li>
<li><a href="#qtcreator-no-valid-kits-found-score-126122-in-2016">24: QtCreator: No valid kits found (score <span>126122</span> in 2016)</a></li>
<li><a href="#correct-way-to-quit-a-qt-program-score-122572-in-2013">25: Correct way to quit a Qt program? (score <span>122572</span> in 2013)</a></li>
<li><a href="#how-to-format-a-qstring-score-122452-in-2015">26: How to format a QString? (score <span>122452</span> in 2015)</a></li>
<li><a href="#how-to-set-image-on-qpushbutton-score-122196-in-2012">27: How to set image on QPushButton? (score <span>122196</span> in 2012)</a></li>
<li><a href="#error-qapplication-no-such-file-or-directory-score-120687-in-2014">28: Error QApplication: no such file or directory (score <span>120687</span> in 2014)</a></li>
<li><a href="#checking-if-a-folder-exists-and-creating-folders-in-qt-c-score-119925-in-2017">29: Checking if a folder exists (and creating folders) in Qt, C++ (score <span>119925</span> in 2017)</a></li>
<li><a href="#display-qimage-with-qtgui-score-116001-in-2013">30: Display QImage with QtGui (score <span>116001</span> in 2013)</a></li>
<li><a href="#interpreting-segfault-messages-score-115638-in">31: Interpreting segfault messages (score <span>115638</span> in )</a></li>
<li><a href="#how-to-get-the-current-timestamp-score-112703-in-2016">32: How to get the current TimeStamp? (score <span>112703</span> in 2016)</a></li>
<li><a href="#linking-a-qtdesigner-.ui-file-to-pythonpyqt-score-112212-in-2010">33: Linking a qtDesigner .ui file to python/pyqt? (score <span>112212</span> in 2010)</a></li>
<li><a href="#qt-c-aggregate-stdstringstream-ss-has-incomplete-type-and-cannot-be-defined-score-110931-in-2018">34: Qt c++ aggregate ‘std::stringstream ss’ has incomplete type and cannot be defined (score <span>110931</span> in 2018)</a></li>
<li><a href="#console-output-in-a-qt-gui-app-score-109338-in-2015">35: Console output in a Qt GUI app? (score <span>109338</span> in 2015)</a></li>
<li><a href="#how-do-i-create-a-simple-qt-console-application-in-c-score-102046-in-2010">36: How do I create a simple Qt console application in C++? (score <span>102046</span> in 2010)</a></li>
<li><a href="#how-to-specify-different-debugrelease-output-directories-in-qmake-.pro-file-score-101236-in">37: How to specify different Debug/Release output directories in QMake .pro file (score <span>101236</span> in )</a></li>
<li><a href="#how-to-show-another-window-from-mainwindow-in-qt-score-101105-in-2013">38: How to show another window from mainwindow in QT (score <span>101105</span> in 2013)</a></li>
<li><a href="#how-to-give-a-delay-in-loop-execution-using-qt-score-98368-in-2015">39: How to give a delay in loop execution using Qt (score <span>98368</span> in 2015)</a></li>
<li><a href="#qt-how-do-i-handle-the-event-of-the-user-pressing-the-x-close-button-score-97062-in-2017">40: Qt: How do I handle the event of the user pressing the ‘X’ (close) button? (score <span>97062</span> in 2017)</a></li>
<li><a href="#convert-a-double-to-a-qstring-score-93114-in-2017">41: Convert a double to a QString (score <span>93114</span> in 2017)</a></li>
<li><a href="#how-to-change-the-title-of-the-window-in-qt-score-91005-in-2012">42: How to change the Title of the window in Qt? (score <span>91005</span> in 2012)</a></li>
<li><a href="#cannot-connect-to-x-server-0.0-with-a-qt-application-score-90554-in-2012">43: Cannot connect to X server :0.0 with a Qt application (score <span>90554</span> in 2012)</a></li>
<li><a href="#for-loop-vs-qts-foreach-in-c-score-89778-in-2013">44: ‘for’ loop vs Qt’s ‘foreach’ in C++ (score <span>89778</span> in 2013)</a></li>
<li><a href="#how-to-link-opencv-in-qtcreator-and-use-qt-library-score-89274-in-2013">45: How to link opencv in QtCreator and use Qt library (score <span>89274</span> in 2013)</a></li>
<li><a href="#qbytearray-to-qstring-score-87770-in-2017">46: QByteArray to QString (score <span>87770</span> in 2017)</a></li>
<li><a href="#read-a-text-file-line-by-line-in-qt-score-86068-in-2015">47: Read a text file line by line in Qt (score <span>86068</span> in 2015)</a></li>
<li><a href="#how-to-use-qtimer-score-85340-in-2014">48: How to use QTimer (score <span>85340</span> in 2014)</a></li>
<li><a href="#hide-console-of-windows-application-score-85169-in-2012">49: Hide console of Windows Application (score <span>85169</span> in 2012)</a></li>
<li><a href="#how-to-createreadwrite-json-files-in-qt5-score-83939-in-2014">50: How to create/read/write JSon files in Qt5 (score <span>83939</span> in 2014)</a></li>
<li><a href="#get-elapsed-time-in-qt-score-83913-in-2015">51: Get elapsed time in Qt (score <span>83913</span> in 2015)</a></li>
<li><a href="#qcombobox---set-selected-item-based-on-the-items-data-score-83818-in-2018">52: QComboBox - set selected item based on the item’s data (score <span>83818</span> in 2018)</a></li>
<li><a href="#qt-resizing-a-qlabel-containing-a-qpixmap-while-keeping-its-aspect-ratio-score-83053-in-2017">53: Qt: resizing a QLabel containing a QPixmap while keeping its aspect ratio (score <span>83053</span> in 2017)</a></li>
<li><a href="#how-do-i-set-the-background-color-of-a-widget-like-combobox-or-double-spin-box-score-82434-in-2017">54: How do I set the background color of a widget like combobox or double spin box? (score <span>82434</span> in 2017)</a></li>
<li><a href="#cannot-launch-avd-in-emulatorqt-library-not-found-score-82177-in-2018">55: Cannot launch AVD in emulator:QT library not found (score <span>82177</span> in 2018)</a></li>
<li><a href="#set-qlineedit-to-accept-only-numbers-score-82113-in-2013">56: Set QLineEdit to accept only numbers (score <span>82113</span> in 2013)</a></li>
<li><a href="#qt-creator-needs-a-compiler-set-up-to-build.-configure-a-compiler-in-the-kit-options-score-81825-in-2016">57: Qt Creator needs a compiler set up to build. Configure a compiler in the kit options (score <span>81825</span> in 2016)</a></li>
<li><a href="#how-to-emit-cross-thread-signal-in-qt-score-81768-in-2018">58: How to emit cross-thread signal in Qt? (score <span>81768</span> in 2018)</a></li>
<li><a href="#qt-static-linking-and-deployment-score-81137-in">59: Qt static linking and deployment (score <span>81137</span> in )</a></li>
<li><a href="#can-the-open-file-dialog-be-used-to-select-a-folder-score-80712-in-2010">60: can the Open File dialog be used to select a Folder? (score <span>80712</span> in 2010)</a></li>
<li><a href="#how-to-configure-cdb-in-qt-creator-score-80287-in-2017">61: How to configure CDB in Qt Creator? (score <span>80287</span> in 2017)</a></li>
<li><a href="#qt-tutorials-for-beginners-score-79516-in-2015">62: Qt tutorials for beginners (score <span>79516</span> in 2015)</a></li>
<li><a href="#undefined-reference-to-vtable.-trying-to-compile-a-qt-project-score-78650-in-2017">63: Undefined reference to vtable. Trying to compile a Qt project (score <span>78650</span> in 2017)</a></li>
<li><a href="#convert-an-int-to-a-qstring-with-zero-padding-leading-zeroes-score-77961-in-2014">64: Convert an int to a QString with zero padding (leading zeroes) (score <span>77961</span> in 2014)</a></li>
<li><a href="#qt-cant-find--lgl-error-score-76629-in-2014">65: Qt: can’t find -lGL error (score <span>76629</span> in 2014)</a></li>
<li><a href="#how-to-set-application-icon-in-a-qt-based-project-score-75456-in-2013">66: How to set application icon in a Qt-based project? (score <span>75456</span> in 2013)</a></li>
<li><a href="#qtcpsocket-reading-and-writing-score-75373-in">67: QTcpSocket: reading and writing (score <span>75373</span> in )</a></li>
<li><a href="#how-to-build-qt-for-visual-studio-2010-score-75051-in-2011">68: How to build Qt for Visual Studio 2010 (score <span>75051</span> in 2011)</a></li>
<li><a href="#qt-repaintredrawupdatedo-something-score-74789-in-2017">69: QT Repaint/Redraw/Update/Do Something (score <span>74789</span> in 2017)</a></li>
<li><a href="#how-to-make-a-qpushbutton-disabled-score-74644-in-2013">70: How to make a QPushButton disabled (score <span>74644</span> in 2013)</a></li>
<li><a href="#how-to-check-whether-file-exists-in-qt-in-c-score-74605-in-2015">71: How to check whether file exists in Qt in c++ (score <span>74605</span> in 2015)</a></li>
<li><a href="#what-should-i-choose-gtk-or-qt-score-74518-in-2009">72: What should I choose: GTK+ or Qt? (score <span>74518</span> in 2009)</a></li>
<li><a href="#symbols-not-found-for-architecture-x86_64-on-qtcreator-project-score-72955-in">73: “Symbol(s) not found for architecture x86_64” on QtCreator project (score <span>72955</span> in )</a></li>
<li><a href="#configuring-the-gcc-compiler-switches-in-qt-qtcreator-and-qmake-score-72633-in-2011">74: Configuring the GCC compiler switches in Qt, QtCreator, and QMake (score <span>72633</span> in 2011)</a></li>
<li><a href="#qdialog-exec-and-getting-result-value-score-71773-in-2019">75: QDialog exec() and getting result value (score <span>71773</span> in 2019)</a></li>
<li><a href="#unresolved-external-symbol-public-virtual-struct-qmetaobject-const-__thiscall-parent-score-71464-in-2016">76: Unresolved external symbol "public: virtual struct QMetaObject const * __thiscall Parent (score <span>71464</span> in 2016)</a></li>
<li><a href="#non-resizeable-qdialog-with-fixed-size-in-qt-score-70946-in-2014">77: Non-resizeable QDialog with fixed size in Qt? (score <span>70946</span> in 2014)</a></li>
<li><a href="#how-to-compare-two-qstrings-score-70623-in-2013">78: How to Compare two Qstrings? (score <span>70623</span> in 2013)</a></li>
<li><a href="#error-c2228-left-of-must-have-classstructunion-score-70493-in">79: Error: C2228: left of ’’ must have class/struct/union (score <span>70493</span> in )</a></li>
<li><a href="#converting-qstring-to-char-score-70483-in-2017">80: Converting QString to char* (score <span>70483</span> in 2017)</a></li>
<li><a href="#how-do-i-configure-qt-for-cross-compilation-from-linux-to-windows-target-score-69935-in-2013">81: How do I configure Qt for cross-compilation from Linux to Windows target? (score <span>69935</span> in 2013)</a></li>
<li><a href="#what-does-the-q_object-macro-do-why-do-all-qt-objects-need-this-macro-score-69320-in-2016">82: What does the Q_OBJECT macro do? Why do all Qt objects need this macro? (score <span>69320</span> in 2016)</a></li>
<li><a href="#qt-parsing-json-using-qjsondocument-qjsonobject-qjsonarray-score-69072-in-2019">83: Qt parsing JSON using QJsonDocument, QJsonObject, QJsonArray (score <span>69072</span> in 2019)</a></li>
<li><a href="#what-is-the-correct-way-to-implement-a-qthread-example-please-score-68687-in-2018">84: what is the correct way to implement a QThread… (example please…) (score <span>68687</span> in 2018)</a></li>
<li><a href="#how-to-build-a-full-path-string-safely-from-separate-strings-score-68494-in-2011">85: How to build a full path string (safely) from separate strings? (score <span>68494</span> in 2011)</a></li>
<li><a href="#c-signal-to-qml-slot-in-qt-score-68457-in-2017">86: C++ signal to QML slot in Qt (score <span>68457</span> in 2017)</a></li>
<li><a href="#how-do-i-set-a-background-color-for-the-whole-window-of-a-qt-application-score-68078-in-2017">88: How do I set a background color for the whole window of a Qt application? (score <span>68078</span> in 2017)</a></li>
<li><a href="#iterating-over-a-qmap-with-for-score-67619-in-2015">89: Iterating over a QMap with for (score <span>67619</span> in 2015)</a></li>
<li><a href="#how-to-print-string-literal-and-qstring-with-qdebug-score-67586-in">90: How to print string literal and QString with qDebug? (score <span>67586</span> in )</a></li>
<li><a href="#fatal-error-qtguiqapplication-no-such-file-or-directory-score-67138-in-2019">91: fatal error: QtGui/QApplication: No such file or directory (score <span>67138</span> in 2019)</a></li>
<li><a href="#how-do-i-use-qt-in-my-visual-studio-2015-projects-score-66140-in">92: How do i use Qt in my Visual Studio 2015 projects? (score <span>66140</span> in )</a></li>
<li><a href="#how-to-create-a-bold-red-text-label-in-qt-score-66101-in">93: How to create a bold, red text label in Qt? (score <span>66101</span> in )</a></li>
<li><a href="#how-can-i-concatenate-qstrings-score-65515-in-2013">94: How can I concatenate QStrings? (score <span>65515</span> in 2013)</a></li>
<li><a href="#qt-layout-on-qmainwindow-score-64119-in-2017">95: Qt Layout on QMainWindow (score <span>64119</span> in 2017)</a></li>
<li><a href="#convert-stdstring-to-qstring-score-64084-in-2016">96: Convert std::string to QString (score <span>64084</span> in 2016)</a></li>
<li><a href="#how-to-get-selected-rows-in-qtableview-score-63806-in-2016">97: how to get selected rows in QTableView (score <span>63806</span> in 2016)</a></li>
<li><a href="#qvboxlayout-how-to-vertically-align-widgets-to-the-top-instead-of-the-center-score-63577-in">98: QVBoxLayout: How to vertically align widgets to the top instead of the center (score <span>63577</span> in )</a></li>
<li><a href="#qt5-static-build-yields-failed-to-load-platform-plugin-windows-score-63348-in-2013">99: Qt5 Static Build yields Failed to load platform plugin “windows” (score <span>63348</span> in 2013)</a></li>
<li><a href="#qt-set-size-of-qmainwindow-score-63091-in-2016">100: Qt: Set size of QMainWindow (score <span>63091</span> in 2016)</a></li>
</ul>
</nav>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="how-to-convert-int-to-qstring-score-432339-in-2015" class="level3">
<h3>1: How to convert int to QString? (score <a href="https://stackoverflow.com/q/3211771.html">432339</a> in 2015)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>Is there a <code>QString</code> function which takes an <strong>int</strong> and outputs it as a <code>QString</code>?</p>
</section>
<section id="answer-accepted-score-616" class="level4">
<h4>Answer accepted (score 616)</h4>
<p>Use <a href="http://doc.qt.io/qt-5/qstring.html#number" rel="noreferrer"><code>QString::number()</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1"></a><span class="dt">int</span> i = <span class="dv">42</span>;</span>
<span id="cb1-2"><a href="#cb1-2"></a>QString s = QString::number(i);</span></code></pre></div>
</section>
<section id="answer-2-score-116" class="level4">
<h4>Answer 2 (score 116)</h4>
<p>
And if you want to put it into string within some text context, forget about <code>+</code> operator. Simply do:
</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">// Qt 5 + C++11</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="dt">auto</span> i = <span class="dv">13</span>;    </span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="dt">auto</span> printable = QStringLiteral(<span class="st">&quot;My magic number is %1. That&#39;s all!&quot;</span>).arg(i);</span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">// Qt 5</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="dt">int</span> i = <span class="dv">13</span>;    </span>
<span id="cb2-7"><a href="#cb2-7"></a>QString printable = QStringLiteral(<span class="st">&quot;My magic number is %1. That&#39;s all!&quot;</span>).arg(i);</span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">// Qt 4</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="dt">int</span> i = <span class="dv">13</span>;    </span>
<span id="cb2-11"><a href="#cb2-11"></a>QString printable = QString::fromLatin1(<span class="st">&quot;My magic number is %1. That&#39;s all!&quot;</span>).arg(i);</span></code></pre></div>
</section>
<section id="answer-3-score-24" class="level4">
<h4>Answer 3 (score 24)</h4>
<p>
Moreover to convert whatever you want, you can use <code>QVariant</code>. For an <code>int</code> to a <code>QString</code> you get:
</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a>QVariant(<span class="dv">3</span>).toString();</span></code></pre></div>
<p>A <code>float</code> to a <code>string</code> or a <code>string</code> to a <code>float</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a>QVariant(<span class="fl">3.2</span>).toString();</span>
<span id="cb4-2"><a href="#cb4-2"></a>QVariant(<span class="st">&quot;5.2&quot;</span>).toFloat();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qlabel-set-color-of-text-and-background-score-298574-in-2012" class="level3">
<h3>2: QLabel: set color of text and background (score <a href="https://stackoverflow.com/q/2749798.html">298574</a> in 2012)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>How do I set color of text and background of a <code>QLabel</code> ?</p>
</section>
<section id="answer-accepted-score-247" class="level4">
<h4>Answer accepted (score 247)</h4>
<p>The best and recommended way is to use <a href="http://doc.qt.io/qt-5/stylesheet.html" rel="noreferrer">Qt Style Sheet</a>.</p>
<p>To change the text color and background color of a <code>QLabel</code>, here is what I would do :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1"></a>QLabel* pLabel = new QLabel;</span>
<span id="cb5-2"><a href="#cb5-2"></a>pLabel-&gt;setStyleSheet(<span class="st">&quot;QLabel { background-color : red; color : blue; }&quot;</span>);</span></code></pre></div>
<p>You could also avoid using Qt Style Sheets and change the <code>QPalette</code> colors of your <code>QLabel</code>, but you might get different results on different platforms and/or styles.</p>
<p>As Qt documentation states :</p>
<blockquote>
Using a QPalette isn’t guaranteed to work for all styles, because style authors are restricted by the different platforms’ guidelines and by the native theme engine.
</blockquote>
<p>But you could do something like this :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a> QPalette palette = ui-&gt;pLabel-&gt;palette();</span>
<span id="cb6-2"><a href="#cb6-2"></a> palette.setColor(ui-&gt;pLabel-&gt;backgroundRole(), Qt::yellow);</span>
<span id="cb6-3"><a href="#cb6-3"></a> palette.setColor(ui-&gt;pLabel-&gt;foregroundRole(), Qt::yellow);</span>
<span id="cb6-4"><a href="#cb6-4"></a> ui-&gt;pLabel-&gt;setPalette(palette);</span></code></pre></div>
<p>But as I said, I strongly suggest not to use the palette and go for Qt Style Sheet.</p>
</section>
<section id="answer-2-score-33" class="level4">
<h4>Answer 2 (score 33)</h4>
<p>You can use QPalette, however you must set <code>setAutoFillBackground(true);</code> to enable background color</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1"></a>QPalette sample_palette;</span>
<span id="cb7-2"><a href="#cb7-2"></a>sample_palette.setColor(QPalette::Window, Qt::white);</span>
<span id="cb7-3"><a href="#cb7-3"></a>sample_palette.setColor(QPalette::WindowText, Qt::blue);</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a>sample_label-&gt;setAutoFillBackground(true);</span>
<span id="cb7-6"><a href="#cb7-6"></a>sample_label-&gt;setPalette(sample_palette);</span>
<span id="cb7-7"><a href="#cb7-7"></a>sample_label-&gt;setText(<span class="st">&quot;What ever text&quot;</span>);</span></code></pre></div>
<p>It works fine on Windows and Ubuntu, I haven’t played with any other OS.</p>
<p>Note: Please see <a href="http://qt-project.org/doc/qt-4.8/qpalette.html" rel="noreferrer">QPalette</a>, color role section for more details</p>
</section>
<section id="answer-3-score-17" class="level4">
<h4>Answer 3 (score 17)</h4>
<p>I add this answer because I think it could be useful to anybody.</p>
<p>I step into the problem of setting <a href="https://en.wikipedia.org/wiki/RGBA_color_space" rel="nofollow noreferrer">RGBA</a> colors (that is, RGB color with an Alpha value for transparency) for color display labels in my painting application.</p>
<p>As I came across the first answer, I was unable to set an RGBA color. I have also tried things like:</p>
<p><code>myLabel.setStyleSheet("QLabel { background-color : %s"%color.name())</code></p>
<p>where <code>color</code> is an RGBA color.</p>
<p>So, my dirty solution was to extend <code>QLabel</code> and override <code>paintEvent()</code> method filling its bounding rect.</p>
<p>Today, I’ve open up the <code>qt-assistant</code> and read the <a href="https://doc.qt.io/qt-5/stylesheet-reference.html#list-of-properties" rel="nofollow noreferrer">style reference properties list</a>. Affortunately, it has an example that states the following:</p>
<p><code>QLineEdit { background-color: rgb(255, 0, 0) }</code></p>
<p>Thats open up my mind in doing something like the code below, as an example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb8-1"><a href="#cb8-1"></a>myLabel= QLabel()</span>
<span id="cb8-2"><a href="#cb8-2"></a>myLabel.setAutoFillBackground(True) # This is important!!</span>
<span id="cb8-3"><a href="#cb8-3"></a>color  = QtGui.QColor(<span class="dv">233</span>, <span class="dv">10</span>, <span class="dv">150</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a>alpha  = <span class="dv">140</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>values = <span class="st">&quot;{r}, {g}, {b}, {a}&quot;</span>.format(r = color.red(),</span>
<span id="cb8-6"><a href="#cb8-6"></a>                                     g = color.green(),</span>
<span id="cb8-7"><a href="#cb8-7"></a>                                     b = color.blue(),</span>
<span id="cb8-8"><a href="#cb8-8"></a>                                     a = alpha</span>
<span id="cb8-9"><a href="#cb8-9"></a>                                     )</span>
<span id="cb8-10"><a href="#cb8-10"></a>myLabel.setStyleSheet(<span class="st">&quot;QLabel { background-color: rgba(&quot;</span>+values+<span class="st">&quot;); }&quot;</span>)</span></code></pre></div>
<p>Note that <code>setAutoFillBackground()</code> set in <code>False</code> will not make it work.</p>
<p>Regards,</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-qstring-to-stdstring-score-263024-in-2015" class="level3">
<h3>3: How to convert QString to std::string? (score <a href="https://stackoverflow.com/q/4214369.html">263024</a> in 2015)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>I am trying to do something like this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1"></a>QString string;</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">// do things...</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>std::cout &lt;&lt; string &lt;&lt; std::endl;</span></code></pre></div>
<p>
but the code doesn’t compile. How to output the content of qstring into the console (e.g. for debugging purposes or other reasons)? How to convert <code>QString</code> to <code>std::string</code>?
</p>
</section>
<section id="answer-accepted-score-213" class="level4">
<h4>Answer accepted (score 213)</h4>
<p>One of the things you should remember when converting <code>QString</code> to <code>std::string</code> is the fact that <code>QString</code> is UTF-16 encoded while <code>std::string</code>… May have any encodings.</p>
<p>So the best would be either:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb10-1"><a href="#cb10-1"></a>QString qs;</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">// Either this if you use UTF-8 anywhere</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>std::string utf8_text = qs.toUtf8().constData();</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">// or this if you&#39;re on Windows :-)</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>std::string current_locale_text = qs.toLocal8Bit().constData();</span></code></pre></div>
<p>The suggested (accepted) method may work if you specify codec.</p>
<p>See: <a href="http://doc.qt.io/qt-5/qstring.html#toLatin1" rel="noreferrer">http://doc.qt.io/qt-5/qstring.html#toLatin1</a></p>
</section>
<section id="answer-2-score-256" class="level4">
<h4>Answer 2 (score 256)</h4>
<p>You can use:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1"></a>QString qs;</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co">// do things</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>std::cout &lt;&lt; qs.toStdString() &lt;&lt; std::endl;</span></code></pre></div>
<p><a href="http://doc.qt.io/qt-5/qstring.html#toStdString" rel="noreferrer">Here’s</a> reference documentation for <code>QString</code>.</p>
</section>
<section id="answer-3-score-35" class="level4">
<h4>Answer 3 (score 35)</h4>
<p>If your ultimate aim is to get debugging messages to the console, you can use <a href="http://doc.qt.io/qt-5/qdebug.html" rel="nofollow noreferrer">qDebug()</a>.</p>
<p>You can use like,</p>
<p><code>qDebug()&amp;lt;&amp;lt;string;</code> which will print the contents to the <em>console</em>.</p>
<p>This way is better than converting it into <code>std::string</code> just for the sake of debugging messages.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-print-to-console-when-using-qt-score-247741-in-2015" class="level3">
<h3>4: How to print to console when using Qt (score <a href="https://stackoverflow.com/q/3886105.html">247741</a> in 2015)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>I’m using Qt4 and C++ for making some programs in computer graphics. I need to be able to print some variables in my console at run-time, not debugging, but <code>cout</code> doesn’t seem to work even if I add the libraries. Is there a way to do this?</p>
</section>
<section id="answer-accepted-score-185" class="level4">
<h4>Answer accepted (score 185)</h4>
<p>If it is good enough to print to <code>stderr</code>, you can use the following streams originally intended for debugging:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb12-1"><a href="#cb12-1"></a><span class="pp">#include</span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co">//qInfo is qt5.5+ only.</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>qInfo() &lt;&lt; <span class="st">&quot;C++ Style Info Message&quot;</span>;</span>
<span id="cb12-5"><a href="#cb12-5"></a>qInfo( <span class="st">&quot;C Style Info Message&quot;</span> );</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a>qDebug() &lt;&lt; <span class="st">&quot;C++ Style Debug Message&quot;</span>;</span>
<span id="cb12-8"><a href="#cb12-8"></a>qDebug( <span class="st">&quot;C Style Debug Message&quot;</span> );</span>
<span id="cb12-9"><a href="#cb12-9"></a></span>
<span id="cb12-10"><a href="#cb12-10"></a>qWarning() &lt;&lt; <span class="st">&quot;C++ Style Warning Message&quot;</span>;</span>
<span id="cb12-11"><a href="#cb12-11"></a>qWarning( <span class="st">&quot;C Style Warning Message&quot;</span> );</span>
<span id="cb12-12"><a href="#cb12-12"></a></span>
<span id="cb12-13"><a href="#cb12-13"></a>qCritical() &lt;&lt; <span class="st">&quot;C++ Style Critical Error Message&quot;</span>;</span>
<span id="cb12-14"><a href="#cb12-14"></a>qCritical( <span class="st">&quot;C Style Critical Error Message&quot;</span> );</span>
<span id="cb12-15"><a href="#cb12-15"></a></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co">// qFatal does not have a C++ style method.</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>qFatal( <span class="st">&quot;C Style Fatal Error Message&quot;</span> );</span></code></pre></div>
<p>Though as pointed out in the comments, bear in mind qDebug messages are removed if <code>QT_NO_DEBUG_OUTPUT</code> is defined</p>
<p>If you need stdout you could try something like this (as Kyle Strand has pointed out):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1"></a>QTextStream&amp; qStdOut()</span>
<span id="cb13-2"><a href="#cb13-2"></a>{</span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="dt">static</span> QTextStream ts( stdout );</span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="cf">return</span> ts;</span>
<span id="cb13-5"><a href="#cb13-5"></a>}</span></code></pre></div>
<p>You could then call as follows:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1"></a>qStdOut() &lt;&lt; <span class="st">&quot;std out!&quot;</span>;</span></code></pre></div>
</section>
<section id="answer-2-score-145" class="level4">
<h4>Answer 2 (score 145)</h4>
<p>I found <a href="http://www.qtcentre.org/threads/33506-where-is-cout-in-Qt-Creator" rel="noreferrer">this</a> most useful:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1"></a><span class="pp">#include </span><span class="im">&lt;QTextStream&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a>QTextStream out(stdout);</span>
<span id="cb15-4"><a href="#cb15-4"></a>foreach(QString x, strings)</span>
<span id="cb15-5"><a href="#cb15-5"></a>    out &lt;&lt; x &lt;&lt; endl;</span></code></pre></div>
</section>
<section id="answer-3-score-33" class="level4">
<h4>Answer 3 (score 33)</h4>
<h5>
Writing to <code>stdout</code>
</h3>
<p>If you want something that, like <code>std::cout</code>, writes to your application’s standard output, you can simply do <a href="http://www.qtcentre.org/threads/33506-where-is-cout-in-Qt-Creator" rel="noreferrer">the following</a> (<a href="https://stackoverflow.com/a/17649741/1858225">credit to CapelliC</a>):</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb16-1"><a href="#cb16-1"></a>QTextStream(stdout) &lt;&lt; <span class="st">&quot;string to print&quot;</span> &lt;&lt; endl;</span></code></pre></div>
<p>If you want to avoid creating a temporary <code>QTextStream</code> object, follow Yakk’s suggestion in the comments below of creating a function to return a <code>static</code> handle for <code>stdout</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">inline</span> QTextStream&amp; qStdout()</span>
<span id="cb17-2"><a href="#cb17-2"></a>{</span>
<span id="cb17-3"><a href="#cb17-3"></a>    <span class="dt">static</span> QTextStream r{stdout};</span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="cf">return</span> r;</span>
<span id="cb17-5"><a href="#cb17-5"></a>}</span>
<span id="cb17-6"><a href="#cb17-6"></a></span>
<span id="cb17-7"><a href="#cb17-7"></a>...</span>
<span id="cb17-8"><a href="#cb17-8"></a></span>
<span id="cb17-9"><a href="#cb17-9"></a>foreach(QString x, strings)</span>
<span id="cb17-10"><a href="#cb17-10"></a>    qStdout() &lt;&lt; x &lt;&lt; endl;</span></code></pre></div>
<hr>
<p><strong>Remember</strong> to <code>flush</code> the stream periodically to ensure the output is actually printed.</p>
<h5>
Writing to <code>stderr</code>
</h3>
<p>Note that the above technique can also be used for other outputs. However, there are more readable ways to write to <code>stderr</code> (<a href="https://stackoverflow.com/a/3886128/1858225">credit to Goz</a> and the comments below his answer):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb18-1"><a href="#cb18-1"></a>qDebug() &lt;&lt; <span class="st">&quot;Debug Message&quot;</span>;    <span class="co">// CAN BE REMOVED AT COMPILE TIME!</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>qWarning() &lt;&lt; <span class="st">&quot;Warning Message&quot;</span>;</span>
<span id="cb18-3"><a href="#cb18-3"></a>qCritical() &lt;&lt; <span class="st">&quot;Critical Error Message&quot;</span>;</span>
<span id="cb18-4"><a href="#cb18-4"></a>qFatal(<span class="st">&quot;Fatal Error Message&quot;</span>);  <span class="co">// WILL KILL THE PROGRAM!</span></span></code></pre></div>
<p><code>qDebug()</code> is closed if <code>QT_NO_DEBUG_OUTPUT</code> is turned on at compile-time.</p>
<p>(Goz notes in a comment that for non-console apps, these can print to a different stream than <code>stderr</code>.)</p>
<hr>
<p><strong>NOTE:</strong> All of the Qt print methods <a href="http://doc.qt.io/qt-5/qtextstream.html#operator-lt-lt-16" rel="noreferrer">assume that <code>const char*</code> arguments</a> are ISO-8859-1 encoded strings with terminating <code>\0</code> characters.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-5.1.1-application-failed-to-start-because-platform-plugin-windows-is-missing-score-227971-in-2017" class="level3">
<h3>5: Qt 5.1.1: Application failed to start because platform plugin “windows” is missing (score <a href="https://stackoverflow.com/q/20495620.html">227971</a> in 2017)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<hr>
<p>
<strong>Edit:</strong> Some people started to mark my question as a duplicate. Do not forget that many similar questions existed when I asked this one (see e.g. the list below). However, <strong>none of these answers solved my problem</strong>. After a long search I found <strong>a comment</strong> which had been ignored by all users pointing to the missing lib. Now, many months later, the comment has been changed to an answer. However, when I answered this question by msyself I intended to help other people by directly providing the solution. This should not be forgotten and so far my answer helped a lot of people. Therefore my question is definitely not a duplicate. <strong>By the way: The accepted answer within the provided link on top does not solve the problem</strong>!
</p>
<hr>
<p>Yes, i used the search:</p>
<p><a href="https://stackoverflow.com/questions/17366967/failed-to-load-platform-plugin-windows-available-platforms-are-error">Failed to load platform plugin “windows”. Available platforms are : Error</a></p>
<p><a href="https://stackoverflow.com/questions/18368826/deploying-qt-c-application-from-visual-studio-qwindows-dll-error">Deploying Qt C++ Application from Visual Studio qwindows.dll error</a></p>
<p><a href="https://stackoverflow.com/questions/14963881/failed-to-load-platform-plugin-windows-available-platforms-are-windows-minim">failed to load platform plugin “windows” Available platforms are: windows, minimal</a></p>
<p>However, in my case the problem still persists. I am using Qt 5.1.1 with Visual Studio 2012 and developed my Application on Windows 7 with Qt Creator 2.8.1. Application is compiled in “Release”-mode and can be executed if directly started with Qt Creator.</p>
<p>However, when starting from the “release”-Folder, i get the following message:</p>
<blockquote>
<p>
This application failed to start because it could not find or load the Qt platform plugin “windows”. Available platform plugins are: minimal, offscreen, windows.
</p>
</blockquote>
<p>Folder structure looks like this:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1"></a>release</span>
<span id="cb19-2"><a href="#cb19-2"></a>+ gui.exe</span>
<span id="cb19-3"><a href="#cb19-3"></a>+ icudt51.dll</span>
<span id="cb19-4"><a href="#cb19-4"></a>+ icuin51.dll</span>
<span id="cb19-5"><a href="#cb19-5"></a>+ icuuc51.dll</span>
<span id="cb19-6"><a href="#cb19-6"></a>+ libGLESv2.dll</span>
<span id="cb19-7"><a href="#cb19-7"></a>+ Qt5Core.dll</span>
<span id="cb19-8"><a href="#cb19-8"></a>+ Qt5Gui.dll</span>
<span id="cb19-9"><a href="#cb19-9"></a>+ Qt5Widgets.dll</span>
<span id="cb19-10"><a href="#cb19-10"></a>+ platforms</span></code></pre></div>
<p>Platforms is the folder directly copied from <strong>Qt.1\5.1.1</strong> including e.g. qwindows.dll. Does not matter if I rename it to “platform” as some other users did. Qt is still not finding the “platform plugin windows”, where is my mistake?</p>
</section>
<section id="answer-accepted-score-63" class="level4">
<h4>Answer accepted (score 63)</h4>
<p>Okay, as posted here <a href="https://stackoverflow.com/a/17271172/1458552">https://stackoverflow.com/a/17271172/1458552</a> without much attention by other users:</p>
<p>The <strong>libEGL.dll</strong> was missing! Even though this has not been reported when trying to start the application (all other *.dlls such as Qt5Gui.dll had been reported).</p>
</section>
<section id="answer-2-score-35" class="level4">
<h4>Answer 2 (score 35)</h4>
<p>I created a platforms directory next to my exe location and put qwindows.dll inside, but I still received the “Failed to load platform plugin”windows“. Available platforms are: windows” error.</p>
<p>I had copied qwindows.dll from C:.1, which is not the right location. I looked at the debug log from running in Qt Creator and found that my app was looking in C:.1\5.1.1_32when it ran in the debugger.</p>
<p>When I copied from C:.1\5.1.1_32, everything worked fine.</p>
</section>
<section id="answer-3-score-21" class="level4">
<h4>Answer 3 (score 21)</h4>
<p>The release is likely missing a library/plugin or the library is in the wrong directory and or from the wrong directory.</p>
<p>Create a folder named “platforms” in the same directory as your application.exe file. Copy and paste the qwindows.dll, found in the /bin of whichever compiler you used to release your application, into the “platforms” folder. Like magic it works. If the .dll is not there check plugins/platforms/ ( with plugins/ being in the same directory as bin/ ) : PfunnyGuy’s comment.</p>
<p>It seems like a common issue is that the .dll was taken from the wrong compiler bin. Be sure to copy your the qwindows.dll from the same compiler as the one used to release your app.</p>
<p>Also another helpful tip, Qt comes with platform console applications that will add all dependencies (including ones like qwindows.dll and libEGL.dll) into the folder of your deployed executable. The application for windows is called windeployqt and the documentation can be found here <a href="http://doc.qt.io/qt-5/windows-deployment.html" rel="nofollow noreferrer">http://doc.qt.io/qt-5/windows-deployment.html</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="adding-external-library-into-qt-creator-project-score-208998-in-2013" class="level3">
<h3>6: Adding external library into Qt Creator project (score <a href="https://stackoverflow.com/q/718447.html">208998</a> in 2013)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p>How can I add external library into a project built by Qt Creator RC1 (version 0.9.2)? For example, the win32 function <code>EnumProcesses()</code> requires <code>Psapi.lib</code> to be added in the project to build.</p>
</section>
<section id="answer-accepted-score-210" class="level4">
<h4>Answer accepted (score 210)</h4>
<p>The proper way to do this is like this:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb20-1"><a href="#cb20-1"></a>LIBS += -L/path/to -lpsapi</span></code></pre></div>
<p>This way it will work on all platforms supported by Qt. The idea is that you have to separate the directory from the library name (without the extension and without any ‘lib’ prefix). Of course, if you are including a Windows specific lib, this really doesn’t matter.</p>
<p>In case you want to store your lib files in the project directory, you can reference them with the <code>$$_PRO_FILE_PWD_</code> variable, e.g.:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1"></a>LIBS += -L<span class="st">&quot;$$_PRO_FILE_PWD_/3rdparty/libs/&quot;</span> -lpsapi</span></code></pre></div>
</section>
<section id="answer-2-score-22" class="level4">
<h4>Answer 2 (score 22)</h4>
<p>Are you using <code>qmake</code> projects? If so, you can add an external library using the <a href="https://doc.qt.io/qt-5/qmake-variable-reference.html#libs" rel="nofollow noreferrer"><code>LIBS</code></a> variable. E.g:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb22-1"><a href="#cb22-1"></a>win32:LIBS += path/to/Psapi.lib</span></code></pre></div>
</section>
<section id="answer-3-score-11" class="level4">
<h4>Answer 3 (score 11)</h4>
<blockquote>
LIBS += C:Files
</blockquote>
<p>
won’t work because you’re using white-spaces in Program Files. In this case you have to add quotes, so the result will look like this: <strong>LIBS += “C:Files”</strong>. I recommend placing libraries in non white-space locations ;-)
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-change-string-into-qstring-score-203123-in-2016" class="level3">
<h3>7: How to change string into QString? (score <a href="https://stackoverflow.com/q/1814189.html">203123</a> in 2016)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>What is the most basic way to do it?</p>
</section>
<section id="answer-accepted-score-129" class="level4">
<h4>Answer accepted (score 129)</h4>
<p>If by string you mean <code>std::string</code> you can do it with this method:</p>
<p><a href="http://doc.qt.io/qt-4.8/qstring.html#fromStdString" rel="noreferrer">QString QString::fromStdString(const std::string &amp; str)</a></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1"></a>std::string str = <span class="st">&quot;Hello world&quot;</span>;</span>
<span id="cb23-2"><a href="#cb23-2"></a>QString qstr = QString::fromStdString(str);</span></code></pre></div>
<hr>
<p>If by string you mean Ascii encoded <code>const char *</code> then you can use this method:</p>
<p><a href="http://doc.qt.io/qt-4.8/qstring.html#fromAscii" rel="noreferrer">QString QString::fromAscii(const char * str, int size = -1)</a></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb24-1"><a href="#cb24-1"></a><span class="dt">const</span> <span class="dt">char</span>* str = <span class="st">&quot;Hello world&quot;</span>;</span>
<span id="cb24-2"><a href="#cb24-2"></a>QString qstr = QString::fromAscii(str);</span></code></pre></div>
<hr>
<p>If you have <code>const char *</code> encoded with system encoding that can be read with <a href="http://doc.qt.io/qt-4.8/qtextcodec.html#codecForLocale" rel="noreferrer">QTextCodec::codecForLocale()</a> then you should use this method:</p>
<p><a href="http://doc.qt.io/qt-4.8/qstring.html#fromLocal8Bit" rel="noreferrer">QString QString::fromLocal8Bit(const char * str, int size = -1)</a></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1"></a><span class="dt">const</span> <span class="dt">char</span>* str = <span class="st">&quot;zażółć gęślą jaźń&quot;</span>;      <span class="co">// latin2 source file and system encoding</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>QString qstr = QString::fromLocal8Bit(str);</span></code></pre></div>
<hr>
<p>If you have <code>const char *</code> that’s UTF8 encoded then you’ll need to use this method:</p>
<p><a href="http://doc.qt.io/qt-4.8/qstring.html#fromUtf8" rel="noreferrer">QString QString::fromUtf8(const char * str, int size = -1)</a></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb26-1"><a href="#cb26-1"></a><span class="dt">const</span> <span class="dt">char</span>* str = read_raw(<span class="st">&quot;hello.txt&quot;</span>); <span class="co">// assuming hello.txt is UTF8 encoded, and read_raw() reads bytes from file into memory and returns pointer to the first byte as const char*</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>QString qstr = QString::fromUtf8(str);</span></code></pre></div>
<hr>
<p>There’s also method for <code>const ushort *</code> containing UTF16 encoded string:</p>
<p><a href="http://doc.qt.io/qt-4.8/qstring.html#fromUtf16" rel="noreferrer">QString QString::fromUtf16(const ushort * unicode, int size = -1)</a></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1"></a><span class="dt">const</span> ushort* str = read_raw(<span class="st">&quot;hello.txt&quot;</span>); <span class="co">// assuming hello.txt is UTF16 encoded, and read_raw() reads bytes from file into memory and returns pointer to the first byte as const ushort*</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>QString qstr = QString::fromUtf16(str);</span></code></pre></div>
</section>
<section id="answer-2-score-242" class="level4">
<h4>Answer 2 (score 242)</h4>
<p>If compiled with STL compatibility, <code>QString</code> has a <a href="http://doc.qt.io/qt-5/qstring.html#fromStdString" rel="noreferrer">static method</a> to convert a <code>std::string</code> to a <code>QString</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb28-1"><a href="#cb28-1"></a>std::string str = <span class="st">&quot;abc&quot;</span>;</span>
<span id="cb28-2"><a href="#cb28-2"></a>QString qstr = QString::fromStdString(str);</span></code></pre></div>
</section>
<section id="answer-3-score-13" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>Alternative way:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb29-1"><a href="#cb29-1"></a>std::string s = <span class="st">&quot;This is an STL string&quot;</span>;</span>
<span id="cb29-2"><a href="#cb29-2"></a>QString qs = QString::fromAscii(s.data(), s.size());</span></code></pre></div>
<p>This has the advantage of not using <code>.c_str()</code> which might cause the <code>std::string</code> to copy itself in case there is no place to add the <code>'\0'</code> at the end.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="failed-to-load-platform-pluginxcb-while-launching-qt5-app-on-linux-without-qt-installed-score-183978-in-2015" class="level3">
<h3>8: “Failed to load platform plugin”xcb" " while launching qt5 app on linux without qt installed (score <a href="https://stackoverflow.com/q/17106315.html">183978</a> in 2015)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>I wrote application for linux which uses Qt5.</p>
<p>But when I am trying to launch it on the linux without Qt SDK installed, the output in console is:</p>
<blockquote>
Failed to load platform plugin “xcb”. Available platforms are:
</blockquote>
<p>
How can I fix this? May be I need to copy some plugin file? When I use ubuntu with Qt5 installed, but I rename Qt directory, the same problem occurs. So, it uses some file from Qt directory…
</p>
<p>
UPDATE: when I create in the app dir “platforms” folder with the file <strong>libqxcb.so</strong>, the app still doesnot start, but the error message changes:
</p>
<blockquote>
<p>Failed to load platform plugin “xcb”. Available platforms are:</p>
xcb
</blockquote>
<p>How can this happen? How can platform plugin be available but can’t be loaded?</p>
</section>
<section id="answer-accepted-score-54" class="level4">
<h4>Answer accepted (score 54)</h4>
<p>Use ldd (man ldd) to show shared library dependencies. Running this on libqxcb.so</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb30-1"><a href="#cb30-1"></a>.../platforms$ ldd libqxcb.so</span></code></pre></div>
<p>shows that xcb depends on libQt5DBus.so.5 in addition to libQt5Core.so.5 and libQt5Gui.so.5 (and many other system libs). Add libQt5DBus.so.5 to your collection of shared libs and you should be ready to move on.</p>
</section>
<section id="answer-2-score-50" class="level4">
<h4>Answer 2 (score 50)</h4>
<p>As was posted earlier, you need to make sure you install the platform plugins when you deploy your application. Depending on how you want to deploy things, there are two methods to tell your application where the platform plugins (e.g. platforms/plugins/libqxcb.so) are at runtime which may work for you.</p>
<p>The first is to export the path to the directory through the QT_QPA_PLATFORM_PLUGIN_PATH variable.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb31-1"><a href="#cb31-1"></a>QT_QPA_PLATFORM_PLUGIN_PATH=path/to/plugins ./my_qt_app</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb32-1"><a href="#cb32-1"></a>export QT_QPA_PLATFORM_PLUGIN_PATH=path/to/plugins</span>
<span id="cb32-2"><a href="#cb32-2"></a>./my_qt_app</span></code></pre></div>
<p>The other option, which I prefer is to create a qt.conf file in the same directory as your executable. The contents of which would be:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb33-1"><a href="#cb33-1"></a>[Paths]</span>
<span id="cb33-2"><a href="#cb33-2"></a>Plugins=/path/to/plugins</span></code></pre></div>
<p>More information regarding this can be found <a href="http://lemirep.wordpress.com/2013/06/01/deploying-qt-applications-on-linux-and-windows-3/">here</a> and <a href="http://qt-project.org/doc/qt-4.8/qt-conf.html">at using qt.conf</a></p>
</section>
<section id="answer-3-score-19" class="level4">
<h4>Answer 3 (score 19)</h4>
<p>I tried to start my binary, compiled with Qt 5.7, on Ubuntu 16.04 LTS where Qt 5.5 is preinstalled. Expectedly, it didn’t work as is.</p>
<p>At first, I inspected the binary itself with <code>ldd</code> as was suggested here, and satisfied all “not found” dependencies. Then this notorious <code>This application failed to start because it could not find or load the Qt platform plugin "xcb"</code> error was thrown in.</p>
<p><strong>What should be done on Linux to resolve this</strong></p>
<p>At first, you should create <code>platforms</code> directory where your binary is, because it is the place where Qt looks for XCB library. Copy <code>libqxcb.so</code> there. I wonder why authors of other answers didn’t mention this.</p>
<p>Then you may want to run your binary with <code>QT_DEBUG_PLUGINS=1</code> environment variable set to check what dependencies of <code>libqxcb.so</code> unsatisfied. (You may also use <code>ldd</code> for this as suggested in the accepted answer).</p>
<p>The command output may look like this:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb34-1"><a href="#cb34-1"></a>me@xerus:/media/sf_Qt/Package$ LD_LIBRARY_PATH=. QT_DEBUG_PLUGINS=<span class="dv">1</span> ./Binary</span>
<span id="cb34-2"><a href="#cb34-2"></a>QFactoryLoader::QFactoryLoader() checking directory path <span class="st">&quot;/media/sf_Qt/Package/platforms&quot;</span> ...</span>
<span id="cb34-3"><a href="#cb34-3"></a>QFactoryLoader::QFactoryLoader() looking at <span class="st">&quot;/media/sf_Qt/Package/platforms/libqxcb.so&quot;</span></span>
<span id="cb34-4"><a href="#cb34-4"></a>Found metadata in lib /media/sf_Qt/Package/platforms/libqxcb.so, metadata=</span>
<span id="cb34-5"><a href="#cb34-5"></a>{</span>
<span id="cb34-6"><a href="#cb34-6"></a>    <span class="st">&quot;IID&quot;</span>: <span class="st">&quot;org.qt-project.Qt.QPA.QPlatformIntegrationFactoryInterface.5.3&quot;</span>,</span>
<span id="cb34-7"><a href="#cb34-7"></a>    <span class="st">&quot;MetaData&quot;</span>: {</span>
<span id="cb34-8"><a href="#cb34-8"></a>        <span class="st">&quot;Keys&quot;</span>: [</span>
<span id="cb34-9"><a href="#cb34-9"></a>            <span class="st">&quot;xcb&quot;</span></span>
<span id="cb34-10"><a href="#cb34-10"></a>        ]</span>
<span id="cb34-11"><a href="#cb34-11"></a>    },</span>
<span id="cb34-12"><a href="#cb34-12"></a>    <span class="st">&quot;className&quot;</span>: <span class="st">&quot;QXcbIntegrationPlugin&quot;</span>,</span>
<span id="cb34-13"><a href="#cb34-13"></a>    <span class="st">&quot;debug&quot;</span>: false,</span>
<span id="cb34-14"><a href="#cb34-14"></a>    <span class="st">&quot;version&quot;</span>: <span class="dv">329472</span></span>
<span id="cb34-15"><a href="#cb34-15"></a>}</span>
<span id="cb34-16"><a href="#cb34-16"></a></span>
<span id="cb34-17"><a href="#cb34-17"></a></span>
<span id="cb34-18"><a href="#cb34-18"></a>Got keys from plugin meta data (<span class="st">&quot;xcb&quot;</span>)</span>
<span id="cb34-19"><a href="#cb34-19"></a>loaded library <span class="st">&quot;/media/sf_Qt/Package/platforms/libqxcb.so&quot;</span></span>
<span id="cb34-20"><a href="#cb34-20"></a>QLibraryPrivate::loadPlugin failed on <span class="st">&quot;/media/sf_Qt/Package/platforms/libqxcb.so&quot;</span> : <span class="st">&quot;Cannot load library /media/sf_Qt/Package/platforms/libqxcb.so: (/usr/lib/x86_64-linux-gnu/libQt5DBus.so.5: version `Qt_5&#39; not found (required by ./libQt5XcbQpa.so.5))&quot;</span></span>
<span id="cb34-21"><a href="#cb34-21"></a>This application failed to start because it could not find or load the Qt platform plugin <span class="st">&quot;xcb&quot;</span></span>
<span id="cb34-22"><a href="#cb34-22"></a>in <span class="st">&quot;&quot;</span>.</span>
<span id="cb34-23"><a href="#cb34-23"></a></span>
<span id="cb34-24"><a href="#cb34-24"></a>Available platform plugins are: xcb.</span>
<span id="cb34-25"><a href="#cb34-25"></a></span>
<span id="cb34-26"><a href="#cb34-26"></a>Reinstalling the application may fix this problem.</span>
<span id="cb34-27"><a href="#cb34-27"></a>Aborted (core dumped)</span></code></pre></div>
<p>Note the failing <code>libQt5DBus.so.5</code> library. Copy it to your libraries path, in my case it was the same directory where my binary is (hence <code>LD_LIBRARY_PATH=.</code>). Repeat this process until all dependencies are satisfied.</p>
<p>P.S. thanks to the author of <a href="https://stackoverflow.com/a/19913885/2202101">this answer</a> for <code>QT_DEBUG_PLUGINS=1</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-create-a-pausewait-function-using-qt-score-179030-in-2015" class="level3">
<h3>9: How do I create a pause/wait function using Qt? (score <a href="https://stackoverflow.com/q/3752742.html">179030</a> in 2015)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>I’m playing around with <a href="https://en.wikipedia.org/wiki/Qt_%28software%29" rel="noreferrer">Qt</a>, and I want to create a simple pause between two commands. However it won’t seem to let me use <code>Sleep(int mili);</code>, and I can’t find any obvious wait functions.</p>
<p>I am basically just making a console application to test some class code which will later be included in a proper Qt GUI, so for now I’m not bothered about breaking the whole event-driven model.</p>
</section>
<section id="answer-accepted-score-30" class="level4">
<h4>Answer accepted (score 30)</h4>
<p>This <a href="https://stackoverflow.com/questions/3149356/qt-make-a-function-to-pause-at-some-moment-for-some-time">previous question</a> mentions using <code>qSleep()</code> which is in the <code>QtTest</code> module. To avoid the overhead linking in the <code>QtTest</code> module, looking at the source for that function you could just make your own copy and call it. It uses defines to call either Windows <code>Sleep()</code> or Linux <code>nanosleep()</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb35-1"><a href="#cb35-1"></a><span class="pp">#ifdef Q_OS_WIN</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="pp">#include </span><span class="im">&lt;windows.h&gt;</span><span class="pp"> </span><span class="co">// for Sleep</span></span>
<span id="cb35-3"><a href="#cb35-3"></a><span class="pp">#endif</span></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="dt">void</span> QTest::qSleep(<span class="dt">int</span> ms)</span>
<span id="cb35-5"><a href="#cb35-5"></a>{</span>
<span id="cb35-6"><a href="#cb35-6"></a>    QTEST_ASSERT(ms &gt; <span class="dv">0</span>);</span>
<span id="cb35-7"><a href="#cb35-7"></a></span>
<span id="cb35-8"><a href="#cb35-8"></a><span class="pp">#ifdef Q_OS_WIN</span></span>
<span id="cb35-9"><a href="#cb35-9"></a>    Sleep(uint(ms));</span>
<span id="cb35-10"><a href="#cb35-10"></a><span class="pp">#else</span></span>
<span id="cb35-11"><a href="#cb35-11"></a>    <span class="kw">struct</span> timespec ts = { ms / <span class="dv">1000</span>, (ms % <span class="dv">1000</span>) * <span class="dv">1000</span> * <span class="dv">1000</span> };</span>
<span id="cb35-12"><a href="#cb35-12"></a>    nanosleep(&amp;ts, NULL);</span>
<span id="cb35-13"><a href="#cb35-13"></a><span class="pp">#endif</span></span>
<span id="cb35-14"><a href="#cb35-14"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-128" class="level4">
<h4>Answer 2 (score 128)</h4>
<p>I wrote a super simple delay function for an application I developed in Qt.</p>
<p>I would advise you to use this code rather than the sleep function as it won’t let your GUI freeze.</p>
<p>Here is the code:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb36-1"><a href="#cb36-1"></a><span class="dt">void</span> delay()</span>
<span id="cb36-2"><a href="#cb36-2"></a>{</span>
<span id="cb36-3"><a href="#cb36-3"></a>    QTime dieTime= QTime::currentTime().addSecs(<span class="dv">1</span>);</span>
<span id="cb36-4"><a href="#cb36-4"></a>    <span class="cf">while</span> (QTime::currentTime() &lt; dieTime)</span>
<span id="cb36-5"><a href="#cb36-5"></a>        QCoreApplication::processEvents(QEventLoop::AllEvents, <span class="dv">100</span>);</span>
<span id="cb36-6"><a href="#cb36-6"></a>}</span></code></pre></div>
<p>To delay an event by n seconds - use <code>addSecs(n)</code>.</p>
</section>
<section id="answer-3-score-61" class="level4">
<h4>Answer 3 (score 61)</h4>
<p>From Qt5 onwards we can also use</p>
<p><a href="http://doc.qt.io/qt-5/qthread.html#static-public-members" rel="noreferrer"><strong>Static Public Members of QThread</strong></a></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb37-1"><a href="#cb37-1"></a><span class="dt">void</span>    msleep(<span class="dt">unsigned</span> <span class="dt">long</span> msecs)</span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="dt">void</span>    sleep(<span class="dt">unsigned</span> <span class="dt">long</span> secs)</span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="dt">void</span>    usleep(<span class="dt">unsigned</span> <span class="dt">long</span> usecs)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qmake-could-not-find-a-qt-installation-of-score-170258-in-2016" class="level3">
<h3>10: qmake: could not find a Qt installation of ’’ (score <a href="https://stackoverflow.com/q/16607003.html">170258</a> in 2016)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>I have a software in ubuntu that requires me to run qmake to generate the Makefile.</p>
<p>However, running qmake gives back this error,</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1"></a>qmake: could not find a Qt installation of &#39;&#39;</span></code></pre></div>
<p>I have installed what I thought to be the required packages using,</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="#cb39-1"></a>sudo apt-get install qt4-qmake</span>
<span id="cb39-2"><a href="#cb39-2"></a>sudo apt-get install qt5-qmake</span></code></pre></div>
<p>But the error didn’t go away.</p>
<p>Any help on this would be gladly appreciated!</p>
</section>
<section id="answer-accepted-score-151" class="level4">
<h4>Answer accepted (score 151)</h4>
<p><code>sudo apt-get install qt5-default</code> works for me.</p>
<p>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1"></a>$ aptitude show qt5-<span class="cf">default</span>&lt;/pre&gt;&lt;/code&gt;</span>
<span id="cb40-2"><a href="#cb40-2"></a>tells that&lt;/p&gt;</span>
<span id="cb40-3"><a href="#cb40-3"></a></span>
<span id="cb40-4"><a href="#cb40-4"></a>&lt;blockquote&gt;</span>
<span id="cb40-5"><a href="#cb40-5"></a>  &lt;p&gt;This package sets Qt <span class="dv">5</span> to be the <span class="cf">default</span> Qt version to be used when using</span>
<span id="cb40-6"><a href="#cb40-6"></a>   development binaries like qmake. It provides a <span class="cf">default</span> configuration <span class="cf">for</span></span>
<span id="cb40-7"><a href="#cb40-7"></a>   qtchooser, but does not prevent alternative Qt installations from being used.&lt;/p&gt;</span>
<span id="cb40-8"><a href="#cb40-8"></a>&lt;/blockquote&gt;</span>
<span id="cb40-9"><a href="#cb40-9"></a></span>
<span id="cb40-10"><a href="#cb40-10"></a><span class="er">#### Answer 2 (score 28)</span></span>
<span id="cb40-11"><a href="#cb40-11"></a>You could check path to qmake using `which qmake`.  </span>
<span id="cb40-12"><a href="#cb40-12"></a></span>
<span id="cb40-13"><a href="#cb40-13"></a>Consider install `qt4-default` or `qt5-default` depends what version of qt you want use.  </span>
<span id="cb40-14"><a href="#cb40-14"></a></span>
<span id="cb40-15"><a href="#cb40-15"></a>You could also use &lt;a href=<span class="st">&quot;http://manpages.ubuntu.com/manpages/utopic/man1/qtchooser.1.html&quot;</span>&gt;qtchooser&lt;/a&gt;  -  a  wrapper  used  to select between Qt development binary versions.  </span>
<span id="cb40-16"><a href="#cb40-16"></a></span>
<span id="cb40-17"><a href="#cb40-17"></a><span class="er">#### Answer 3 (score 12)</span></span>
<span id="cb40-18"><a href="#cb40-18"></a>For others in my situation, the solution was:  </span>
<span id="cb40-19"><a href="#cb40-19"></a></span>
<span id="cb40-20"><a href="#cb40-20"></a>```c</span>
<span id="cb40-21"><a href="#cb40-21"></a>qmake -qt=qt5</span></code></pre></div>
<p>This was on Ubuntu 14.04 after install qt5-qmake. qmake was a symlink to qtchooser which takes the -qt argument.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="auto-expanding-layout-with-qt-designer-score-168660-in" class="level3">
<h3>11: Auto-expanding layout with Qt-Designer (score <a href="https://stackoverflow.com/q/3492739.html">168660</a> in )</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>I’m using the Qt Designer.</p>
<p>I want to create a <code>QVBoxLayout</code> which will automatically expand to fill the whole window.</p>
<p>The layout of the <code>QVBoxLayout</code> remains fixed.</p>
<p>How can I cause the <code>QVBoxLayout</code> to expand and fill the entire window through the designer?</p>
</section>
<section id="answer-accepted-score-341" class="level4">
<h4>Answer accepted (score 341)</h4>
<p>After creating your <code>QVBoxLayout</code> in Qt Designer, right-click on the background of your widget/dialog/window (not the <code>QVBoxLayout</code>, but the parent widget) and select <em>Lay Out -&gt; Lay Out in a Grid</em> from the bottom of the context-menu. The <code>QVBoxLayout</code> should now stretch to fit the window and will resize automatically when the entire window is resized.</p>
</section>
<section id="answer-2-score-13" class="level4">
<h4>Answer 2 (score 13)</h4>
<p>According to the <a href="http://doc.qt.io/qt-5/designer-layouts.html" rel="noreferrer">documentation</a>, there needs to be a top level layout set.</p>
<blockquote>
A top level layout is necessary to ensure that your widgets will resize correctly when its window is resized. To check if you have set a top level layout, preview your widget and attempt to resize the window by dragging the size grip.
</blockquote>
<p>You can set one by clearing the selection and right clicking on the form itself and choosing one of the layouts available in the context menu.</p>
<p><a href="https://i.stack.imgur.com/6VO9C.png" rel="noreferrer"><img src="https://i.stack.imgur.com/6VO9C.png" alt="Qt layouts"></a></p>
</section>
<section id="answer-3-score-2" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>I’ve tried to find a “fit to screen” property but there is no such.</p>
<p>But setting widget’s “maximumSize” to a “some big number” ( like 2000 x 2000 ) will automatically fit the widget to the parent widget space.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-qstring-to-int-score-164587-in-2016" class="level3">
<h3>12: How to convert QString to int? (score <a href="https://stackoverflow.com/q/16633555.html">164587</a> in 2016)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>
I have a <code>QString</code> in my sources. So I need to convert it to integer <strong>without “Kb”.</strong>
</p>
<p>I tried <code>Abcd.toInt()</code> but it does not work.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb41-1"><a href="#cb41-1"></a>QString Abcd = <span class="st">&quot;123.5 Kb&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-82" class="level4">
<h4>Answer 2 (score 82)</h4>
<p>You don’t have all digit characters in your string. So you have to split by space</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="#cb42-1"></a>QString Abcd = <span class="st">&quot;123.5 Kb&quot;</span>;</span>
<span id="cb42-2"><a href="#cb42-2"></a>Abcd.split(<span class="st">&quot; &quot;</span>)[<span class="dv">0</span>].toInt();    <span class="co">//convert the first part to Int</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>Abcd.split(<span class="st">&quot; &quot;</span>)[<span class="dv">0</span>].toDouble(); <span class="co">//convert the first part to double</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>Abcd.split(<span class="st">&quot; &quot;</span>)[<span class="dv">0</span>].toFloat();  <span class="co">//convert the first part to float</span></span></code></pre></div>
<p><strong>Update</strong>: I am updating an old answer. That was a straight forward answer to the specific question, with a strict assumption. However as noted by <span class="citation" data-cites="DomTomCat">@DomTomCat</span> in comments and <span class="citation" data-cites="Mikhail">@Mikhail</span> in answer, In general one should always check whether the operation is successful or not. So using a boolean flag is necessary.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="#cb43-1"></a><span class="dt">bool</span> flag;</span>
<span id="cb43-2"><a href="#cb43-2"></a><span class="dt">double</span> v = Abcd.split(<span class="st">&quot; &quot;</span>)[<span class="dv">0</span>].toDouble(&amp;flag); </span>
<span id="cb43-3"><a href="#cb43-3"></a><span class="cf">if</span>(flag){</span>
<span id="cb43-4"><a href="#cb43-4"></a>  <span class="co">// use v</span></span>
<span id="cb43-5"><a href="#cb43-5"></a>}</span></code></pre></div>
<p>Also if you are taking that string as user input, then you should also be doubtful about whether the string is really splitable with space. If there is a possibility that the assumption may break then a regex verifier is more preferable. A regex like the following will extract the floating point value and the prefix character of ‘b’. Then you can safely convert the captured strings to double.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="#cb44-1"></a>([<span class="dv">0</span>-<span class="dv">9</span>]*\.?[<span class="dv">0</span>-<span class="dv">9</span>]+)\s+(\w[bB])</span></code></pre></div>
<p>You can have an utility function like the following</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="#cb45-1"></a>QPair&lt;<span class="dt">double</span>, QString&gt; split_size_str(<span class="dt">const</span> QString&amp; str){</span>
<span id="cb45-2"><a href="#cb45-2"></a>    QRegExp regex(<span class="st">&quot;([0-9]*</span><span class="sc">\\</span><span class="st">.?[0-9]+)</span><span class="sc">\\</span><span class="st">s+(</span><span class="sc">\\</span><span class="st">w[bB])&quot;</span>);</span>
<span id="cb45-3"><a href="#cb45-3"></a>    <span class="dt">int</span> pos = regex.indexIn(str);</span>
<span id="cb45-4"><a href="#cb45-4"></a>    QStringList captures = regex.capturedTexts();</span>
<span id="cb45-5"><a href="#cb45-5"></a>    <span class="cf">if</span>(captures.count() &gt; <span class="dv">1</span>){</span>
<span id="cb45-6"><a href="#cb45-6"></a>        <span class="dt">double</span> value = captures[<span class="dv">1</span>].toDouble(); <span class="co">// should succeed as regex matched</span></span>
<span id="cb45-7"><a href="#cb45-7"></a>        QString unit = captures[<span class="dv">2</span>]; <span class="co">// should succeed as regex matched</span></span>
<span id="cb45-8"><a href="#cb45-8"></a>        <span class="cf">return</span> qMakePair(value, unit);</span>
<span id="cb45-9"><a href="#cb45-9"></a>    }</span>
<span id="cb45-10"><a href="#cb45-10"></a>    <span class="cf">return</span> qMakePair(<span class="fl">0.0</span><span class="bu">f</span>, QString());</span>
<span id="cb45-11"><a href="#cb45-11"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-8" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>Don’t forget to check if the conversion was successful!</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb46-1"><a href="#cb46-1"></a><span class="dt">bool</span> ok;</span>
<span id="cb46-2"><a href="#cb46-2"></a><span class="dt">auto</span> str= tr(<span class="st">&quot;1337&quot;</span>);</span>
<span id="cb46-3"><a href="#cb46-3"></a>str.toDouble(&amp;ok); <span class="co">// returns 1337.0, ok set to true</span></span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="dt">auto</span> strr= tr(<span class="st">&quot;LEET&quot;</span>);</span>
<span id="cb46-5"><a href="#cb46-5"></a>strr.toDouble(&amp;ok); <span class="co">// returns 0.0, ok set to false</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="creatingwriting-into-a-new-file-in-qt-score-159250-in-2017" class="level3">
<h3>13: Creating/writing into a new file in Qt (score <a href="https://stackoverflow.com/q/4916193.html">159250</a> in 2017)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>I am trying to write into a file and if the file doesn’t exist create it. I have searched on the internet and nothing worked for me.</p>
<p>My code looks currently like this:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="#cb47-1"></a>QString filename=<span class="st">&quot;Data.txt&quot;</span>;</span>
<span id="cb47-2"><a href="#cb47-2"></a>QFile file( filename );</span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="cf">if</span> ( file.open(QIODevice::ReadWrite) )</span>
<span id="cb47-4"><a href="#cb47-4"></a>{</span>
<span id="cb47-5"><a href="#cb47-5"></a>    QTextStream stream( &amp;file );</span>
<span id="cb47-6"><a href="#cb47-6"></a>    stream &lt;&lt; <span class="st">&quot;something&quot;</span> &lt;&lt; endl;</span>
<span id="cb47-7"><a href="#cb47-7"></a>}</span></code></pre></div>
<p>
If I create a text file called Data in the directory, it remains empty. If I don’t create anything it doesn’t create the file either. I don’t know what to do with this, this isn’t the first way in which I tried to create/write into a file and none of the ways worked.
</p>
<p>Thanks for your answers.</p>
</section>
<section id="answer-accepted-score-23" class="level4">
<h4>Answer accepted (score 23)</h4>
<p>
Are you sure you’re in the right directory?<br> Opening a file without a full path will open it in the current working directory. In most cases this is not what you want. Try changing the first line to
</p>
<p>
<code>QString filename="c:\\Data.txt"</code> or<br> <code>QString filename="c:/Data.txt"</code>
</p>
<p>and see if the file is created in <code>c:\</code></p>
</section>
<section id="answer-2-score-24" class="level4">
<h4>Answer 2 (score 24)</h4>
<p>That is weird, everything looks fine, are you sure it does not work for you? Because this <code>main</code> surely works for me, so I would look somewhere else for the source of your problem.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="#cb48-1"></a><span class="pp">#include </span><span class="im">&lt;QFile&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2"></a><span class="pp">#include </span><span class="im">&lt;QTextStream&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a></span>
<span id="cb48-5"><a href="#cb48-5"></a><span class="dt">int</span> main()</span>
<span id="cb48-6"><a href="#cb48-6"></a>{</span>
<span id="cb48-7"><a href="#cb48-7"></a>    QString filename = <span class="st">&quot;Data.txt&quot;</span>;</span>
<span id="cb48-8"><a href="#cb48-8"></a>    QFile file(filename);</span>
<span id="cb48-9"><a href="#cb48-9"></a>    <span class="cf">if</span> (file.open(QIODevice::ReadWrite)) {</span>
<span id="cb48-10"><a href="#cb48-10"></a>        QTextStream stream(&amp;file);</span>
<span id="cb48-11"><a href="#cb48-11"></a>        stream &lt;&lt; <span class="st">&quot;something&quot;</span> &lt;&lt; endl;</span>
<span id="cb48-12"><a href="#cb48-12"></a>    }</span>
<span id="cb48-13"><a href="#cb48-13"></a>}</span></code></pre></div>
<p>The code you provided is also almost the same as the one provided in <a href="http://doc.qt.nokia.com/4.7/qtextstream.html#details" rel="noreferrer">detailed description of QTextStream</a> so I am pretty sure, that the problem is elsewhere :)</p>
<p>Also note, that the file is not called <code>Data</code> but <code>Data.txt</code> and should be created/located in the directory from which the program was run (not necessarily the one where the executable is located).</p>
</section>
<section id="answer-3-score-9" class="level4">
<h4>Answer 3 (score 9)</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1"></a><span class="pp">#include </span><span class="im">&lt;QFile&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="pp">#include </span><span class="im">&lt;QCoreApplication&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3"></a><span class="pp">#include </span><span class="im">&lt;QTextStream&gt;</span></span>
<span id="cb49-4"><a href="#cb49-4"></a></span>
<span id="cb49-5"><a href="#cb49-5"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb49-6"><a href="#cb49-6"></a>{</span>
<span id="cb49-7"><a href="#cb49-7"></a>    <span class="co">// Create a new file     </span></span>
<span id="cb49-8"><a href="#cb49-8"></a>    QFile file(<span class="st">&quot;out.txt&quot;</span>);</span>
<span id="cb49-9"><a href="#cb49-9"></a>    file.open(QIODevice::WriteOnly | QIODevice::Text);</span>
<span id="cb49-10"><a href="#cb49-10"></a>    QTextStream out(&amp;file);</span>
<span id="cb49-11"><a href="#cb49-11"></a>    out &lt;&lt; <span class="st">&quot;This file is generated by Qt</span><span class="sc">\n</span><span class="st">&quot;</span>;</span>
<span id="cb49-12"><a href="#cb49-12"></a></span>
<span id="cb49-13"><a href="#cb49-13"></a>    <span class="co">// optional, as QFile destructor will already do it:</span></span>
<span id="cb49-14"><a href="#cb49-14"></a>    file.close(); </span>
<span id="cb49-15"><a href="#cb49-15"></a></span>
<span id="cb49-16"><a href="#cb49-16"></a>    <span class="co">//this would normally start the event loop, but is not needed for this</span></span>
<span id="cb49-17"><a href="#cb49-17"></a>    <span class="co">//minimal example:</span></span>
<span id="cb49-18"><a href="#cb49-18"></a>    <span class="co">//return app.exec();</span></span>
<span id="cb49-19"><a href="#cb49-19"></a></span>
<span id="cb49-20"><a href="#cb49-20"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb49-21"><a href="#cb49-21"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qstring-to-char-conversion-score-153496-in-2014" class="level3">
<h3>14: QString to char* conversion (score <a href="https://stackoverflow.com/q/2523765.html">153496</a> in 2014)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>I was trying to convert a QString to char* type by the following methods, but they don’t seem to work.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="#cb50-1"></a><span class="co">//QLineEdit *line=new QLineEdit();{just to describe what is line here}</span></span>
<span id="cb50-2"><a href="#cb50-2"></a></span>
<span id="cb50-3"><a href="#cb50-3"></a>QString temp=line-&gt;text();</span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="dt">char</span> *str=(<span class="dt">char</span> *)malloc(<span class="dv">10</span>);</span>
<span id="cb50-5"><a href="#cb50-5"></a>QByteArray ba=temp.toLatin1();</span>
<span id="cb50-6"><a href="#cb50-6"></a>strcpy(str,ba.data());</span></code></pre></div>
<p>Can you elaborate the possible flaw with this method, or give an alternative method?</p>
</section>
<section id="answer-accepted-score-108" class="level4">
<h4>Answer accepted (score 108)</h4>
<p>Well, the <a href="https://wiki.qt.io/Technical_FAQ#How_can_I_convert_a_QString_to_char.2A_and_vice_versa.3F" rel="noreferrer">Qt FAQ</a> says:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="#cb51-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> **argv)</span>
<span id="cb51-2"><a href="#cb51-2"></a>{</span>
<span id="cb51-3"><a href="#cb51-3"></a> QApplication app(argc, argv);</span>
<span id="cb51-4"><a href="#cb51-4"></a>  QString str1 = <span class="st">&quot;Test&quot;</span>;</span>
<span id="cb51-5"><a href="#cb51-5"></a>  QByteArray ba = str1.toLocal8Bit();</span>
<span id="cb51-6"><a href="#cb51-6"></a>  <span class="dt">const</span> <span class="dt">char</span> *c_str2 = ba.data();</span>
<span id="cb51-7"><a href="#cb51-7"></a>  printf(<span class="st">&quot;str2: %s&quot;</span>, c_str2);</span>
<span id="cb51-8"><a href="#cb51-8"></a>  <span class="cf">return</span> app.exec();</span>
<span id="cb51-9"><a href="#cb51-9"></a>}</span></code></pre></div>
<p>So perhaps you’re having other problems. How exactly doesn’t this work?</p>
</section>
<section id="answer-2-score-43" class="level4">
<h4>Answer 2 (score 43)</h4>
<p>Maybe</p>
<p><code>my_qstring.toStdString().c_str();</code></p>
<p>or safer, as Federico points out:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb52-1"><a href="#cb52-1"></a>std::string str = my_qstring.toStdString();</span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="dt">const</span> <span class="dt">char</span>* p = str.c_str();</span></code></pre></div>
<p>It’s far from optimal, but will do the work.</p>
</section>
<section id="answer-3-score-37" class="level4">
<h4>Answer 3 (score 37)</h4>
<p>
The easiest way to convert a <a href="http://doc.qt.io/qt-5/qstring.html#details" rel="noreferrer">QString</a> to <strong>char*</strong> is <a href="http://doc.qt.io/qt-5/qtglobal.html#qPrintable" rel="noreferrer">qPrintable(const QString&amp; str)</a>, which is a macro expanding to <code>str.toLocal8Bit().constData()</code>.
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-jpg-image-display-score-152919-in-2013" class="level3">
<h3>15: Qt jpg image display (score <a href="https://stackoverflow.com/q/1357960.html">152919</a> in 2013)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p>I want to display .jpg image in an Qt UI. I checked it online and found <a href="http://qt-project.org/doc/qt-4.8/widgets-imageviewer.html" rel="noreferrer">http://qt-project.org/doc/qt-4.8/widgets-imageviewer.html</a>. I thought Graphics View will do the same, and also it has codec to display video. How to display images using Graphics View? I went through the libraries, but because I am a totally newbie in Qt, I can’t find a clue to start with. Can you direct me to some resources/examples on how to load and display images in Qt?</p>
<p>Thanks.</p>
</section>
<section id="answer-accepted-score-39" class="level4">
<h4>Answer accepted (score 39)</h4>
<div class="sourceCode" id="cb53"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb53-1"><a href="#cb53-1"></a><span class="pp">#include ...</span></span>
<span id="cb53-2"><a href="#cb53-2"></a></span>
<span id="cb53-3"><a href="#cb53-3"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb53-4"><a href="#cb53-4"></a>{</span>
<span id="cb53-5"><a href="#cb53-5"></a>    QApplication a(argc, argv);</span>
<span id="cb53-6"><a href="#cb53-6"></a>    QGraphicsScene scene;</span>
<span id="cb53-7"><a href="#cb53-7"></a>    QGraphicsView view(&amp;scene);</span>
<span id="cb53-8"><a href="#cb53-8"></a>    QGraphicsPixmapItem item(QPixmap(<span class="st">&quot;c:</span><span class="sc">\\</span><span class="st">test.png&quot;</span>));</span>
<span id="cb53-9"><a href="#cb53-9"></a>    scene.addItem(&amp;item);</span>
<span id="cb53-10"><a href="#cb53-10"></a>    view.show();</span>
<span id="cb53-11"><a href="#cb53-11"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb53-12"><a href="#cb53-12"></a>}</span></code></pre></div>
<p>This should work. :) List of supported formats can be <a href="http://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html#reading-and-writing-image-files" rel="noreferrer">found here</a></p>
</section>
<section id="answer-2-score-42" class="level4">
<h4>Answer 2 (score 42)</h4>
<p>You could attach the image (as a pixmap) to a label then add that to your layout…</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb54-1"><a href="#cb54-1"></a>...</span>
<span id="cb54-2"><a href="#cb54-2"></a></span>
<span id="cb54-3"><a href="#cb54-3"></a>QPixmap image(<span class="st">&quot;blah.jpg&quot;</span>);</span>
<span id="cb54-4"><a href="#cb54-4"></a></span>
<span id="cb54-5"><a href="#cb54-5"></a>QLabel imageLabel = new QLabel();</span>
<span id="cb54-6"><a href="#cb54-6"></a>imageLabel.setPixmap(image);</span>
<span id="cb54-7"><a href="#cb54-7"></a></span>
<span id="cb54-8"><a href="#cb54-8"></a>mainLayout.addWidget(imageLabel);</span>
<span id="cb54-9"><a href="#cb54-9"></a></span>
<span id="cb54-10"><a href="#cb54-10"></a>...</span></code></pre></div>
<p>Apologies, this is using Jambi (Qt for Java) so the syntax is different, but the theory is the same.</p>
</section>
<section id="answer-3-score-12" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>If the only thing you want to do is drop in an image onto a widget withouth the complexity of the graphics API, you can also just create a new QWidget and set the background with StyleSheets. Something like this:</p>
<pre>
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)
{
    ...
    QWidget *pic = new QWidget(this);
    pic->setStyleSheet("background-image: url(test.png)");
    pic->setGeometry(QRect(50,50,128,128));
    ...
}
</pre>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-install-pyqt5-on-windows-score-136283-in-2018" class="level3">
<h3>16: How to install PyQt5 on Windows? (score <a href="https://stackoverflow.com/q/16846501.html">136283</a> in 2018)</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>When I try installing the PyQt5 on Windows using the command</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb55-1"><a href="#cb55-1"></a>python configure.py</span></code></pre></div>
<p>I get this error:</p>
<blockquote>
<div class="sourceCode" id="cb56"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb56-1"><a href="#cb56-1"></a>Error: Make sure you have a working Qt qmake on your PATH.</span></code></pre></div>
</blockquote>
<p>I got the pyQt5 from <a href="http://www.riverbankcomputing.co.uk/software/pyqt/download5" rel="noreferrer">PyQt5 Download</a>.</p>
<p>How can I install PyQt5?</p>
<hr>
<p><strong>Update:</strong></p>
<p>I installed <code>Qt 5.0.2 for Windows 64-bit (VS 2012, 500 MB)</code> from the <a href="http://qt-project.org/downloads" rel="noreferrer">Qt Download page</a> and now I have this error:</p>
<blockquote>
<div class="sourceCode" id="cb57"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb57-1"><a href="#cb57-1"></a>Querying qmake about your Qt installation...</span>
<span id="cb57-2"><a href="#cb57-2"></a>Determining the details of your Qt installation...</span>
<span id="cb57-3"><a href="#cb57-3"></a>Error: Failed to determine the detail of your Qt installation. Try again using</span>
<span id="cb57-4"><a href="#cb57-4"></a>the --verbose flag to see more detail about the problem.</span></code></pre></div>
</blockquote>
<p>And when I execute the command <code>python configure.py --verbose</code>:</p>
<blockquote>
<div class="sourceCode" id="cb58"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb58-1"><a href="#cb58-1"></a>Querying qmake about your Qt installation...</span>
<span id="cb58-2"><a href="#cb58-2"></a>Determining the details of your Qt installation...</span>
<span id="cb58-3"><a href="#cb58-3"></a>C:\Qt\Qt5<span class="fl">.0</span><span class="er">.2</span>\<span class="fl">5.0</span><span class="er">.2</span>\msvc2012_64\bin\qmake.exe -spec win32-msvc2008 -o qtdetail.m</span>
<span id="cb58-4"><a href="#cb58-4"></a>k qtdetail.pro</span>
<span id="cb58-5"><a href="#cb58-5"></a>nmake -f qtdetail.mk release</span>
<span id="cb58-6"><a href="#cb58-6"></a>&#39;nmake&#39; não é reconhecido como um comando interno</span>
<span id="cb58-7"><a href="#cb58-7"></a>ou externo, um programa operável ou um arquivo em lotes.</span>
<span id="cb58-8"><a href="#cb58-8"></a>Error: Failed to determine the detail of your Qt installation. Try again using</span>
<span id="cb58-9"><a href="#cb58-9"></a>the --verbose flag to see more detail about the problem.</span></code></pre></div>
</blockquote>
<p>I added <code>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin</code> (contains <code>nmake.exe</code>) to PATH and I got this error:</p>
<blockquote>
<div class="sourceCode" id="cb59"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb59-1"><a href="#cb59-1"></a>Querying qmake about your Qt installation...</span>
<span id="cb59-2"><a href="#cb59-2"></a>Determining the details of your Qt installation...</span>
<span id="cb59-3"><a href="#cb59-3"></a>C:\Qt\Qt5<span class="fl">.0</span><span class="er">.2</span>\<span class="fl">5.0</span><span class="er">.2</span>\msvc2012_64\bin\qmake.exe -spec win32-msvc2008 -o qtdetail.mk qtdetail.pro</span>
<span id="cb59-4"><a href="#cb59-4"></a>nmake -f qtdetail.mk release</span>
<span id="cb59-5"><a href="#cb59-5"></a></span>
<span id="cb59-6"><a href="#cb59-6"></a></span>
<span id="cb59-7"><a href="#cb59-7"></a>Microsoft (R) Program Maintenance Utility Version <span class="fl">11.00</span><span class="er">.50727</span><span class="fl">.1</span></span>
<span id="cb59-8"><a href="#cb59-8"></a></span>
<span id="cb59-9"><a href="#cb59-9"></a>Copyright (C) Microsoft Corporation.  All rights reserved.</span>
<span id="cb59-10"><a href="#cb59-10"></a></span>
<span id="cb59-11"><a href="#cb59-11"></a></span>
<span id="cb59-12"><a href="#cb59-12"></a>  <span class="st">&quot;C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC</span><span class="sc">\b</span><span class="st">in</span><span class="sc">\n</span><span class="st">make.exe&quot;</span> -f qtdetail.mk.Release</span>
<span id="cb59-13"><a href="#cb59-13"></a></span>
<span id="cb59-14"><a href="#cb59-14"></a></span>
<span id="cb59-15"><a href="#cb59-15"></a>Microsoft (R) Program Maintenance Utility Version <span class="fl">11.00</span><span class="er">.50727</span><span class="fl">.1</span></span>
<span id="cb59-16"><a href="#cb59-16"></a></span>
<span id="cb59-17"><a href="#cb59-17"></a>Copyright (C) Microsoft Corporation.  All rights reserved.</span>
<span id="cb59-18"><a href="#cb59-18"></a></span>
<span id="cb59-19"><a href="#cb59-19"></a>  cl -c -nologo -Zm200 -Zc:<span class="dt">wchar_t</span> -O2 -MD -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_NO_DEBUG -DQT_CORE_LIB -I<span class="st">&quot;..\..\..\..\..\..\..\Qt\Qt5.0.2\5.0.2\msvc2012_64\include&quot;</span> -I<span class="st">&quot;..\..\..\..\..\..\..\Qt\Qt5.0.2\5.0.2\msvc2012_64\include\QtCore&quot;</span> -I<span class="st">&quot;release&quot;</span> -I<span class="st">&quot;..\..\..\..\..\..\..\Qt\Qt5.0.2\5.0.2\msvc2012_64\mkspecs\win32-msvc2008&quot;</span> -Forelease\ @C:\Users\Victor\AppData\Local\Temp\nm68EA.tmp</span>
<span id="cb59-20"><a href="#cb59-20"></a></span>
<span id="cb59-21"><a href="#cb59-21"></a>NMAKE : fatal error U1077: &#39;<span class="st">&quot;C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC</span><span class="sc">\b</span><span class="st">in\cl.EXE&quot;</span>&#39; : <span class="cf">return</span> code &#39;<span class="bn">0xc0000135</span><span class="er">&#39;</span></span>
<span id="cb59-22"><a href="#cb59-22"></a></span>
<span id="cb59-23"><a href="#cb59-23"></a>Stop.</span>
<span id="cb59-24"><a href="#cb59-24"></a></span>
<span id="cb59-25"><a href="#cb59-25"></a>NMAKE : fatal error U1077: &#39;<span class="st">&quot;C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC</span><span class="sc">\b</span><span class="st">in</span><span class="sc">\n</span><span class="st">make.exe&quot;</span>&#39; : <span class="cf">return</span> code &#39;<span class="bn">0x2</span><span class="er">&#39;</span></span>
<span id="cb59-26"><a href="#cb59-26"></a></span>
<span id="cb59-27"><a href="#cb59-27"></a>Stop.</span></code></pre></div>
</blockquote>
</section>
<section id="answer-accepted-score-12" class="level4">
<h4>Answer accepted (score 12)</h4>
<p>The easiest way to install PyQt is to just use the installer (Link in your answer, step #5). If you install python 3.3, the installer will add all of the PyQt5 extras to that python installation automatically. You won’t need to do any compiling (none of: nmake, nmake install, python configure).</p>
<p>All of the build options are available for if you need a custom install (for instance, using a different version of python, where there isn’t an installer provided by riverbank computing).</p>
<p>If you do need to compile your own version of PyQt5, the steps (as you have found) are <a href="http://pyqt.sourceforge.net/Docs/PyQt5/installation.html">here</a>, but assume you have python and a compiler installed and in your path. The installed and in your path have been where you have been running into trouble it seems. I’d recommend using the installer version, but you need to install <a href="http://www.python.org/getit/">python 3.3</a> first.</p>
</section>
<section id="answer-2-score-27" class="level4">
<h4>Answer 2 (score 27)</h4>
<p>Mainly I use the following command under the <code>cmd</code></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb60-1"><a href="#cb60-1"></a>pip install pyqt5</span></code></pre></div>
<p>And it works with no problem!</p>
</section>
<section id="answer-3-score-8-1" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>First try this in your Windows cmd window:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb61-1"><a href="#cb61-1"></a>pip3 install pyqt5</span></code></pre></div>
<p>If that is successful, it will look something like this:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb62-1"><a href="#cb62-1"></a>C:\Windows\System32&gt;pip3 install pyqt5</span>
<span id="cb62-2"><a href="#cb62-2"></a>Collecting pyqt5</span>
<span id="cb62-3"><a href="#cb62-3"></a>  Downloading PyQt5-<span class="fl">5.9</span>-<span class="fl">5.9</span><span class="er">.1</span>-cp35.cp36.cp37-none-win_amd64.whl (<span class="fl">77.2</span><span class="er">MB</span>)</span>
<span id="cb62-4"><a href="#cb62-4"></a>    <span class="dv">100</span>% |################################| <span class="fl">77.2</span><span class="er">MB</span> <span class="dv">13</span><span class="er">kB</span>/s</span>
<span id="cb62-5"><a href="#cb62-5"></a>Collecting sip&lt;<span class="fl">4.20</span>,&gt;=<span class="fl">4.19</span><span class="er">.3</span> (from pyqt5)</span>
<span id="cb62-6"><a href="#cb62-6"></a>  Downloading sip-<span class="fl">4.19</span><span class="er">.3</span>-cp35-none-win_amd64.whl (<span class="dv">49</span><span class="er">kB</span>)</span>
<span id="cb62-7"><a href="#cb62-7"></a>    <span class="dv">100</span>% |################################| <span class="dv">51</span><span class="er">kB</span> <span class="dv">984</span><span class="er">kB</span>/s</span>
<span id="cb62-8"><a href="#cb62-8"></a>Installing collected packages: sip, pyqt5</span>
<span id="cb62-9"><a href="#cb62-9"></a>Successfully installed pyqt5-<span class="fl">5.9</span> sip-<span class="fl">4.19</span><span class="er">.3</span></span></code></pre></div>
<p>If that did not work, you might try this link from SourceForge.</p>
<p><a href="https://sourceforge.net/projects/pyqt/files/PyQt5/" rel="nofollow noreferrer">PyQt5 .exe installers for Windows</a></p>
<p><strong>How to find the installer that’s right for you?</strong></p>
<p>
First, determine what version of Python you have and whether you have 32-bit or 64-bit Python. Next, open one of the directories. I’m on Python 3.5 64-bit so I’m looking for a .exe with those specs. When you open a directory on SourceForge, you will see some directories with ONLY <em>.zip</em> or <em>.tar.gz</em>. That’s not what you’re looking for. A good indication of which directory you should click is given by the “Downloads/Week” column. I’ll open the <strong>PyQt-5.6</strong> directory in my case.
</p>
<p>Here we notice some .exe files:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="#cb63-1"></a>PyQt-<span class="fl">5.6</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>|_PyQt5-<span class="fl">5.6</span>-gpl-Py3<span class="fl">.5</span>-Qt5<span class="fl">.6</span><span class="er">.0</span>-x32-<span class="fl">2.</span><span class="er">exe</span></span>
<span id="cb63-3"><a href="#cb63-3"></a>|_PyQt5-<span class="fl">5.6</span>-gpl-Py3<span class="fl">.5</span>-Qt5<span class="fl">.6</span><span class="er">.0</span>-x64-<span class="fl">2.</span><span class="er">exe</span></span>
<span id="cb63-4"><a href="#cb63-4"></a>|_PyQt5_gpl-<span class="fl">5.6</span><span class="er">.zip</span></span>
<span id="cb63-5"><a href="#cb63-5"></a>|_PyQt5_gpl-<span class="fl">5.6</span><span class="er">.tar</span>.gz</span></code></pre></div>
<p>I know these are Python 3.5 by <code>Py3.5</code> in the file name. I am also looking for the 64-bit version so I’ll download <code>PyQt5-5.6-gpl-Py3.5-Qt5.6.0-x64-2.exe</code>. Final answer!</p>
<p>Note: if you try to install a version that’s not compatible with your system, a dialog box will appear immediately after running the .exe. That’s an indication that you’ve chosen the wrong one. I’m not trying to sound like a dbag… I did that several times!</p>
<p>To test a successful install, in your Python interpreter, try to import:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="#cb64-1"></a>from PyQt5 import QtCore, QtGui, QtWidgets</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="yesno-message-box-using-qmessagebox-score-135833-in-2018" class="level3">
<h3>17: Yes/No message box using QMessageBox (score <a href="https://stackoverflow.com/q/13111669.html">135833</a> in 2018)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>How do I show a message box with Yes/No buttons in Qt, and how do I check which of them was pressed?</p>
<p>I.e. a message box that looks like this:</p>
<p><img src="https://i.stack.imgur.com/h92PA.png" alt="enter image description here"></p>
</section>
<section id="answer-accepted-score-172" class="level4">
<h4>Answer accepted (score 172)</h4>
<p>You would use <a href="http://qt-project.org/doc/qt-5.0/qtwidgets/qmessagebox.html#question"><code>QMessageBox::question</code></a> for that.</p>
<p>Example in a hypothetical widget’s slot:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="#cb65-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2"></a><span class="pp">#include </span><span class="im">&lt;QMessageBox&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb65-4"><a href="#cb65-4"></a></span>
<span id="cb65-5"><a href="#cb65-5"></a><span class="co">// ...</span></span>
<span id="cb65-6"><a href="#cb65-6"></a></span>
<span id="cb65-7"><a href="#cb65-7"></a><span class="dt">void</span> MyWidget::someSlot() {</span>
<span id="cb65-8"><a href="#cb65-8"></a>  QMessageBox::StandardButton reply;</span>
<span id="cb65-9"><a href="#cb65-9"></a>  reply = QMessageBox::question(this, <span class="st">&quot;Test&quot;</span>, <span class="st">&quot;Quit?&quot;</span>,</span>
<span id="cb65-10"><a href="#cb65-10"></a>                                QMessageBox::Yes|QMessageBox::No);</span>
<span id="cb65-11"><a href="#cb65-11"></a>  <span class="cf">if</span> (reply == QMessageBox::Yes) {</span>
<span id="cb65-12"><a href="#cb65-12"></a>    qDebug() &lt;&lt; <span class="st">&quot;Yes was clicked&quot;</span>;</span>
<span id="cb65-13"><a href="#cb65-13"></a>    QApplication::quit();</span>
<span id="cb65-14"><a href="#cb65-14"></a>  } <span class="cf">else</span> {</span>
<span id="cb65-15"><a href="#cb65-15"></a>    qDebug() &lt;&lt; <span class="st">&quot;Yes was *not* clicked&quot;</span>;</span>
<span id="cb65-16"><a href="#cb65-16"></a>  }</span>
<span id="cb65-17"><a href="#cb65-17"></a>}</span></code></pre></div>
<p><sub>Should work on Qt 4 and 5, requires <code>QT += widgets</code> on Qt 5, and <code>CONFIG += console</code> on Win32 to see <code>qDebug()</code> output.</sub></p>
<p>See the <a href="http://qt-project.org/doc/qt-5.0/qtwidgets/qmessagebox.html#StandardButton-enum"><code>StandardButton</code></a> enum to get a list of buttons you can use; the function returns the button that was clicked. You can set a default button with an extra argument (Qt “<em>chooses a suitable default automatically</em>” if you don’t or specify <code>QMessageBox::NoButton</code>).</p>
</section>
<section id="answer-2-score-38" class="level4">
<h4>Answer 2 (score 38)</h4>
<p>You can use the QMessage object to create a Message Box then add buttons :</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="#cb66-1"></a>QMessageBox msgBox;</span>
<span id="cb66-2"><a href="#cb66-2"></a>msgBox.setWindowTitle(<span class="st">&quot;title&quot;</span>);</span>
<span id="cb66-3"><a href="#cb66-3"></a>msgBox.setText(<span class="st">&quot;Question&quot;</span>);</span>
<span id="cb66-4"><a href="#cb66-4"></a>msgBox.setStandardButtons(QMessageBox::Yes);</span>
<span id="cb66-5"><a href="#cb66-5"></a>msgBox.addButton(QMessageBox::No);</span>
<span id="cb66-6"><a href="#cb66-6"></a>msgBox.setDefaultButton(QMessageBox::No);</span>
<span id="cb66-7"><a href="#cb66-7"></a><span class="cf">if</span>(msgBox.exec() == QMessageBox::Yes){</span>
<span id="cb66-8"><a href="#cb66-8"></a>  <span class="co">// do something</span></span>
<span id="cb66-9"><a href="#cb66-9"></a>}<span class="cf">else</span> {</span>
<span id="cb66-10"><a href="#cb66-10"></a>  <span class="co">// do something else</span></span>
<span id="cb66-11"><a href="#cb66-11"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-17-1" class="level4">
<h4>Answer 3 (score 17)</h4>
<p>QT can be as simple as that of Windows. The equivalent code is</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="#cb67-1"></a><span class="cf">if</span> (QMessageBox::Yes == QMessageBox(QMessageBox::Information, <span class="st">&quot;title&quot;</span>, <span class="st">&quot;Question&quot;</span>, QMessageBox::Yes|QMessageBox::No).exec()) </span>
<span id="cb67-2"><a href="#cb67-2"></a>{</span>
<span id="cb67-3"><a href="#cb67-3"></a></span>
<span id="cb67-4"><a href="#cb67-4"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt---reading-from-a-text-file-score-135498-in" class="level3">
<h3>18: Qt - reading from a text file (score <a href="https://stackoverflow.com/q/2612103.html">135498</a> in )</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>I have a table view with three columns; I have just passed to write into text file using this code</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="#cb68-1"></a>QFile file(<span class="st">&quot;/home/hamad/lesson11.txt&quot;</span>);</span>
<span id="cb68-2"><a href="#cb68-2"></a><span class="cf">if</span>(!file.open(QIODevice::WriteOnly)) {</span>
<span id="cb68-3"><a href="#cb68-3"></a>    QMessageBox::information(<span class="dv">0</span>,<span class="st">&quot;error&quot;</span>,file.errorString());</span>
<span id="cb68-4"><a href="#cb68-4"></a>}</span>
<span id="cb68-5"><a href="#cb68-5"></a>QString dd;</span>
<span id="cb68-6"><a href="#cb68-6"></a></span>
<span id="cb68-7"><a href="#cb68-7"></a><span class="cf">for</span>(<span class="dt">int</span> row=<span class="dv">0</span>; row &lt; model-&gt;rowCount(); row++) {</span>
<span id="cb68-8"><a href="#cb68-8"></a>     dd = model-&gt;item(row,<span class="dv">0</span>)-&gt;text() +  <span class="st">&quot;,&quot;</span></span>
<span id="cb68-9"><a href="#cb68-9"></a>                 + model-&gt;item(row,<span class="dv">1</span>)-&gt;text() +  <span class="st">&quot;,&quot;</span></span>
<span id="cb68-10"><a href="#cb68-10"></a>                 + model-&gt;item(row,<span class="dv">2</span>)-&gt;text();</span>
<span id="cb68-11"><a href="#cb68-11"></a></span>
<span id="cb68-12"><a href="#cb68-12"></a>     QTextStream out(&amp;file);</span>
<span id="cb68-13"><a href="#cb68-13"></a>     out &lt;&lt; dd &lt;&lt; endl;</span>
<span id="cb68-14"><a href="#cb68-14"></a> }</span></code></pre></div>
<p>But I’m not succeed to read the same file again, I tried this code but I don’t know where is the problem in it</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="#cb69-1"></a>QFile file(<span class="st">&quot;/home/hamad/lesson11.txt&quot;</span>);</span>
<span id="cb69-2"><a href="#cb69-2"></a>QTextStream in(&amp;file);</span>
<span id="cb69-3"><a href="#cb69-3"></a>QString line = in.readLine();</span>
<span id="cb69-4"><a href="#cb69-4"></a><span class="cf">while</span>(!in.atEnd()) {</span>
<span id="cb69-5"><a href="#cb69-5"></a></span>
<span id="cb69-6"><a href="#cb69-6"></a>    QStringList  fields = line.split(<span class="st">&quot;,&quot;</span>);</span>
<span id="cb69-7"><a href="#cb69-7"></a></span>
<span id="cb69-8"><a href="#cb69-8"></a>    model-&gt;appendRow(fields);</span>
<span id="cb69-9"><a href="#cb69-9"></a></span>
<span id="cb69-10"><a href="#cb69-10"></a>}</span></code></pre></div>
<p>Any help please ?</p>
</section>
<section id="answer-2-score-87" class="level4">
<h4>Answer 2 (score 87)</h4>
<p>You have to replace string line</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="#cb70-1"></a>QString line = in.readLine();</span></code></pre></div>
<p>into <em>while</em>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="#cb71-1"></a>QFile file(<span class="st">&quot;/home/hamad/lesson11.txt&quot;</span>);</span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="cf">if</span>(!file.open(QIODevice::ReadOnly)) {</span>
<span id="cb71-3"><a href="#cb71-3"></a>    QMessageBox::information(<span class="dv">0</span>, <span class="st">&quot;error&quot;</span>, file.errorString());</span>
<span id="cb71-4"><a href="#cb71-4"></a>}</span>
<span id="cb71-5"><a href="#cb71-5"></a></span>
<span id="cb71-6"><a href="#cb71-6"></a>QTextStream in(&amp;file);</span>
<span id="cb71-7"><a href="#cb71-7"></a></span>
<span id="cb71-8"><a href="#cb71-8"></a><span class="cf">while</span>(!in.atEnd()) {</span>
<span id="cb71-9"><a href="#cb71-9"></a>    QString line = in.readLine();    </span>
<span id="cb71-10"><a href="#cb71-10"></a>    QStringList fields = line.split(<span class="st">&quot;,&quot;</span>);    </span>
<span id="cb71-11"><a href="#cb71-11"></a>    model-&gt;appendRow(fields);    </span>
<span id="cb71-12"><a href="#cb71-12"></a>}</span>
<span id="cb71-13"><a href="#cb71-13"></a></span>
<span id="cb71-14"><a href="#cb71-14"></a>file.close();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-current-working-directory-in-a-qt-application-score-135066-in-2016" class="level3">
<h3>19: Get current working directory in a Qt application (score <a href="https://stackoverflow.com/q/7402576.html">135066</a> in 2016)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>I’m writing a program in C++ using the Qt library. There is a symbolic link in my home bin directory to the executable. I would like the current working directory of my program to be the directory in which I am with my terminal (ie. the result of the <code>pwd</code> command). I saw the <code>QDir::currentPath()</code> function, but it gives back the directory where the binary is.</p>
<p>How can I find my current working directory?</p>
</section>
<section id="answer-accepted-score-3" class="level4">
<h4>Answer accepted (score 3)</h4>
<p>Thank you RedX and Kaz for your answers. I don’t get why by me it gives the path of the exe. I found an other way to do it :</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="#cb72-1"></a>QString pwd(<span class="st">&quot;&quot;</span>);</span>
<span id="cb72-2"><a href="#cb72-2"></a><span class="dt">char</span> * PWD;</span>
<span id="cb72-3"><a href="#cb72-3"></a>PWD = getenv (<span class="st">&quot;PWD&quot;</span>);</span>
<span id="cb72-4"><a href="#cb72-4"></a>pwd.append(PWD);</span>
<span id="cb72-5"><a href="#cb72-5"></a>cout &lt;&lt; <span class="st">&quot;Working directory : &quot;</span> &lt;&lt; pwd &lt;&lt; flush;</span></code></pre></div>
<p>It is less elegant than a single line… but it works for me.</p>
</section>
<section id="answer-2-score-90" class="level4">
<h4>Answer 2 (score 90)</h4>
<p>Just tested and <code>QDir::currentPath()</code> does return the path from which I called my executable.</p>
<p>And a symlink does not “exist”. If you are executing an exe from that path you are effectively executing it from the path the symlink points to.</p>
</section>
<section id="answer-3-score-53" class="level4">
<h4>Answer 3 (score 53)</h4>
<p>Have you tried <a href="http://doc.qt.io/qt-4.8/qcoreapplication.html#applicationDirPath" rel="noreferrer">QCoreApplication::applicationDirPath()</a><br></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1"></a>qDebug() &lt;&lt; <span class="st">&quot;App path : &quot;</span> &lt;&lt; qApp-&gt;applicationDirPath();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-enable-c11-in-qt-creator-score-133748-in-2015" class="level3">
<h3>20: How to enable C++11 in Qt Creator? (score <a href="https://stackoverflow.com/q/16948382.html">133748</a> in 2015)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>The title is pretty self-descriptive. I’ve downloaded Qt Creator 2.7.0, and I am trying to compile some basic C++11 code:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="#cb74-1"></a><span class="dt">int</span> my_array[<span class="dv">5</span>] = {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>};</span>
<span id="cb74-2"><a href="#cb74-2"></a><span class="cf">for</span>(<span class="dt">int</span> &amp;x : my_array)</span>
<span id="cb74-3"><a href="#cb74-3"></a>{</span>
<span id="cb74-4"><a href="#cb74-4"></a>  x *= <span class="dv">2</span>;</span>
<span id="cb74-5"><a href="#cb74-5"></a>}</span></code></pre></div>
<p>I’m receiving the following error:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1"></a>range based <span class="cf">for</span> loops are not allowed in c++ <span class="dv">98</span> mode</span></code></pre></div>
<p>Yet, according to <a href="http://blog.qt.digia.com/blog/2013/03/21/qt-creator-2-7-0-released/">this article</a> this version of Qt Creator supports C++11. So how do I enable it?</p>
</section>
<section id="answer-accepted-score-259" class="level4">
<h4>Answer accepted (score 259)</h4>
<p>According to <a href="http://woboq.com/blog/cpp11-in-qt5.html" rel="noreferrer">this site</a> add</p>
<p><code>CONFIG += c++11</code></p>
<p>to your .pro file (see at the bottom of that web page). <strong>It requires Qt 5.</strong></p>
<hr>
<p>The other answers, suggesting</p>
<p><code>QMAKE_CXXFLAGS += -std=c++11</code> (or <code>QMAKE_CXXFLAGS += -std=c++0x</code>)</p>
<p>also work with <strong>Qt 4.8 and gcc / clang.</strong></p>
</section>
<section id="answer-2-score-32" class="level4">
<h4>Answer 2 (score 32)</h4>
<p>Add this to your <strong>.pro file</strong></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1"></a>QMAKE_CXXFLAGS += -std=c++<span class="dv">11</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="#cb77-1"></a>CONFIG += c++<span class="dv">11</span></span></code></pre></div>
</section>
<section id="answer-3-score-19-1" class="level4">
<h4>Answer 3 (score 19)</h4>
<p>As an alternative for handling both cases addressed in Ali’s excellent answer, I usually add</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="#cb78-1"></a><span class="er"># With C++11 support</span></span>
<span id="cb78-2"><a href="#cb78-2"></a>greaterThan(QT_MAJOR_VERSION, <span class="dv">4</span>){    </span>
<span id="cb78-3"><a href="#cb78-3"></a>CONFIG += c++<span class="dv">11</span></span>
<span id="cb78-4"><a href="#cb78-4"></a>} <span class="cf">else</span> {</span>
<span id="cb78-5"><a href="#cb78-5"></a>QMAKE_CXXFLAGS += -std=c++<span class="er">0x</span></span>
<span id="cb78-6"><a href="#cb78-6"></a>}</span></code></pre></div>
<p>to my project files. This can be handy when you don’t really care much about which Qt version is people using in your team, but you want them to have C++11 enabled in any case.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt.-get-part-of-qstring-score-131962-in-2017" class="level3">
<h3>21: Qt. get part of QString (score <a href="https://stackoverflow.com/q/7584699.html">131962</a> in 2017)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>
I want to get <code>QString</code> from another <code>QString</code>, when I know necessary indexes. For example: Main string: <em>“This is a string”</em>. I want to create new <code>QString</code> from first 5 symbols and get <em>“This”</em>.<br> <strong>input :</strong> first and last char number.<br> <strong>output :</strong> new <code>QString</code>.
</p>
<p>How to create it ?</p>
<p><strong>P.S.</strong> Not only first several letters, also from the middle of the line, for example from 5 till 8.</p>
</section>
<section id="answer-2-score-101" class="level4">
<h4>Answer 2 (score 101)</h4>
<p>If you do not need to modify the substring, then you can use <code>QStringRef</code>. The <code>QStringRef</code> class is a read only wrapper around an existing <code>QString</code> that references a substring within the existing string. This gives much better performance than creating a new <code>QString</code> object to contain the sub-string. E.g.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1"></a>QString myString(<span class="st">&quot;This is a string&quot;</span>);</span>
<span id="cb79-2"><a href="#cb79-2"></a>QStringRef subString(&amp;myString, <span class="dv">5</span>, <span class="dv">2</span>); <span class="co">// subString contains &quot;is&quot;</span></span></code></pre></div>
<p>If you do need to modify the substring, then <code>left()</code>, <code>mid()</code> and <code>right()</code> will do what you need…</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="#cb80-1"></a>QString myString(<span class="st">&quot;This is a string&quot;</span>);</span>
<span id="cb80-2"><a href="#cb80-2"></a>QString subString = myString.mid(<span class="dv">5</span>,<span class="dv">2</span>); <span class="co">// subString contains &quot;is&quot;</span></span>
<span id="cb80-3"><a href="#cb80-3"></a>subString.append(<span class="st">&quot;n&#39;t&quot;</span>); <span class="co">// subString contains &quot;isn&#39;t&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-44" class="level4">
<h4>Answer 3 (score 44)</h4>
<p>Use the <code>left</code> function:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="#cb81-1"></a>QString yourString = <span class="st">&quot;This is a string&quot;</span>;</span>
<span id="cb81-2"><a href="#cb81-2"></a>QString leftSide = yourString.left(<span class="dv">5</span>);</span>
<span id="cb81-3"><a href="#cb81-3"></a>qDebug() &lt;&lt; leftSide; <span class="co">// output &quot;This &quot;</span></span></code></pre></div>
<p>Also have a look at <code>mid()</code> if you want more control.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="cl-is-not-recognized-as-an-internal-or-external-command-score-129230-in-2012" class="level3">
<h3>22: ‘cl’ is not recognized as an internal or external command, (score <a href="https://stackoverflow.com/q/8800361.html">129230</a> in 2012)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>I am trying to compile a hello world program in Qt Using Qt Creator.</p>
<p>I am getting ‘cl’ is not recognized as an internal or external command.</p>
<p>
I am using Windows 7 and Both Vs 2008 and 2010 installed in it. When I use Mingw it is compiling fine but if use vs 2008 it is giving this error.
</p>
<p>After Setting Env Path =..;..;C:FilesVisual Studio 9.0also it is showing the same error.</p>
</section>
<section id="answer-accepted-score-44" class="level4">
<h4>Answer accepted (score 44)</h4>
<p>I think <code>cl</code> isn’t in your path. You need to add it there. The recommended way to do this is to launch a <em>developer command prompt</em>.</p>
<p>Quoting the article <em><a href="https://msdn.microsoft.com/en-us/library/f2ccy3wt%28v=vs.140%29.aspx" rel="noreferrer">Setting the Path and Environment Variables for Command-Line Builds</a></em>:</p>
<blockquote>
<p>To open a Developer Command Prompt window</p>
<ol>
<li>
<p>
With the Windows 8 Start screen showing, type <strong>Visual Studio Tools</strong>. Notice that the search results change as you type; when <strong>Visual Studio Tools</strong> appears, choose it.
</p>
<p>
On earlier versions of Windows, choose <strong>Start</strong>, and then in the search box, type <strong>Visual Studio Tools</strong>. When <strong>Visual Studio Tools</strong> appears in the search results, choose it.
</p>
</li>
<li>
<p>
In the <strong>Visual Studio Tools</strong> folder, open the <strong>Developer Command Prompt</strong> for your version of Visual Studio. (To run as administrator, open the shortcut menu for the Developer Command Prompt and choose <strong>Run as Administrator</strong>.)
</p>
</li>
</ol>
</blockquote>
<p>As the article notes, there are several different shortcuts for setting up different toolsets - you need to pick the suitable one.</p>
<p>If you already have a plain Command Prompt window open, you can run the batch file <code>vcvarsall.bat</code> with the appropriate argument to set up the environment variables. Quoting the same article:</p>
<blockquote>
<p>To run vcvarsall.bat</p>
<ol>
<li>
<p>
At the command prompt, change to the Visual C++ installation directory. (The location depends on the system and the Visual Studio installation, but a typical location is C:Files (x86)Visual Studio version.) For example, enter:
</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1"></a>cd <span class="st">&quot;\Program Files (x86)\Microsoft Visual Studio 12.0\VC&quot;</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>```&lt;/li&gt;</span>
<span id="cb82-3"><a href="#cb82-3"></a>  &lt;li&gt;&lt;p&gt;To configure this Command Prompt window <span class="cf">for</span> <span class="dv">32</span>-bit x86 command-line builds, at the command prompt, enter:&lt;/p&gt;</span>
<span id="cb82-4"><a href="#cb82-4"></a></span>
<span id="cb82-5"><a href="#cb82-5"></a>```c</span>
<span id="cb82-6"><a href="#cb82-6"></a>vcvarsall x86</span>
<span id="cb82-7"><a href="#cb82-7"></a>```&lt;/li&gt;</span>
<span id="cb82-8"><a href="#cb82-8"></a>  &lt;/ol&gt;</span>
<span id="cb82-9"><a href="#cb82-9"></a>&lt;/blockquote&gt;</span>
<span id="cb82-10"><a href="#cb82-10"></a></span>
<span id="cb82-11"><a href="#cb82-11"></a>From the article, the possible arguments are the following:  </span>
<span id="cb82-12"><a href="#cb82-12"></a></span>
<span id="cb82-13"><a href="#cb82-13"></a>&lt;ul&gt;</span>
<span id="cb82-14"><a href="#cb82-14"></a>&lt;li&gt;`x86` (x86 <span class="dv">32</span>-bit native)&lt;/li&gt;</span>
<span id="cb82-15"><a href="#cb82-15"></a>&lt;li&gt;`x86_amd64` (x64 on x86 cross)&lt;/li&gt;</span>
<span id="cb82-16"><a href="#cb82-16"></a>&lt;li&gt;`x86_arm` (ARM on x86 cross)&lt;/li&gt;</span>
<span id="cb82-17"><a href="#cb82-17"></a>&lt;li&gt;`amd64` (x64 <span class="dv">64</span>-bit native)&lt;/li&gt;</span>
<span id="cb82-18"><a href="#cb82-18"></a>&lt;li&gt;`amd64_x86` (x86 on x64 cross)&lt;/li&gt;</span>
<span id="cb82-19"><a href="#cb82-19"></a>&lt;li&gt;`amd64_arm` (ARM on x64 cross)&lt;/li&gt;</span>
<span id="cb82-20"><a href="#cb82-20"></a>&lt;/ul&gt;</span>
<span id="cb82-21"><a href="#cb82-21"></a></span>
<span id="cb82-22"><a href="#cb82-22"></a><span class="er">#### Answer 2 (score 6)</span></span>
<span id="cb82-23"><a href="#cb82-23"></a>&lt;p&gt;I had the same problem. </span>
<span id="cb82-24"><a href="#cb82-24"></a>Try to make a bat-file to start the Qt Creator. Add something like this to the bat-file:&lt;/p&gt;</span>
<span id="cb82-25"><a href="#cb82-25"></a></span>
<span id="cb82-26"><a href="#cb82-26"></a>```c</span>
<span id="cb82-27"><a href="#cb82-27"></a>call <span class="st">&quot;C:\Program Files\Microsoft Visual Studio 9.0\VC</span><span class="sc">\b</span><span class="st">in</span><span class="sc">\v</span><span class="st">cvars32.bat&quot;</span>  </span>
<span id="cb82-28"><a href="#cb82-28"></a><span class="st">&quot;C:\QTsdk\qtcreator</span><span class="sc">\b</span><span class="st">in\qtcreator&quot;</span> </span></code></pre></div>
<p>Now I can compile and get:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1"></a>jom <span class="fl">1.0</span><span class="er">.8</span> - empower your cores</span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="dv">11</span>:<span class="dv">10</span>:<span class="er">08</span>: The process <span class="st">&quot;C:\QTsdk\qtcreator</span><span class="sc">\b</span><span class="st">in\jom.exe&quot;</span> exited normally.</span></code></pre></div>
</section>
<section id="answer-3-score-4" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>Make sure you restart your computer after you install the Build Tools.</p>
<p>This was what was causing the error for me.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-get-the-selected-value-out-of-a-qcombobox-score-126983-in-2018" class="level3">
<h3>23: How can I get the selected VALUE out of a QCombobox? (score <a href="https://stackoverflow.com/q/2056915.html">126983</a> in 2018)</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>
In Qt, I can get the <strong><code>selected text</code></strong> of a <code>QComboBox</code> by using the <code>combobox-&amp;gt;currentText()</code> method. How can I get the <strong><code>selected value</code></strong>?
</p>
<p>I searched for help but I couldn’t find a method <code>currentData()</code> which I expected to find. I could only find <code>combobox-&amp;gt;currentIndex()</code></p>
<p>Is there a smarter way to do it other than <code>combobox-&amp;gt;itemData(combobox-&amp;gt;currentIndex())</code>?</p>
<p>Update: This is no longer necessary as of Qt 5. A <code>currentData()</code> method has been added <a href="http://doc.qt.io/qt-5/qcombobox.html#currentData-prop" rel="noreferrer">http://doc.qt.io/qt-5/qcombobox.html#currentData-prop</a></p>
</section>
<section id="answer-accepted-score-78" class="level4">
<h4>Answer accepted (score 78)</h4>
<p>It seems you need to do <code>combobox-&amp;gt;itemData(combobox-&amp;gt;currentIndex())</code> if you want to get the current data of the QComboBox.</p>
<p>If you are using your own class derived from QComboBox, you can add a <code>currentData()</code> function.</p>
</section>
<section id="answer-2-score-24-1" class="level4">
<h4>Answer 2 (score 24)</h4>
<p>This one can get the text of current index:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="#cb84-1"></a>QString cb = cbChoice -&gt;currentText();</span></code></pre></div>
</section>
<section id="answer-3-score-20" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>you can set QVariant data for all items, then you can get the value when you need it.</p>
<p>there is an example code for this situation:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1"></a>ui.comboBoxSheetSize-&gt;addItem(<span class="st">&quot;128 m&quot;</span>, QVariant(<span class="dv">128</span>));</span>
<span id="cb85-2"><a href="#cb85-2"></a>ui.comboBoxSheetSize-&gt;addItem(<span class="st">&quot;256 m&quot;</span>, QVariant(<span class="dv">256</span>));</span>
<span id="cb85-3"><a href="#cb85-3"></a>ui.comboBoxSheetSize-&gt;addItem(<span class="st">&quot;512 m&quot;</span>, QVariant(<span class="dv">512</span>));</span>
<span id="cb85-4"><a href="#cb85-4"></a>ui.comboBoxSheetSize-&gt;addItem(<span class="st">&quot;1024 m&quot;</span>, QVariant(<span class="dv">1024</span>));</span>
<span id="cb85-5"><a href="#cb85-5"></a></span>
<span id="cb85-6"><a href="#cb85-6"></a>...</span>
<span id="cb85-7"><a href="#cb85-7"></a></span>
<span id="cb85-8"><a href="#cb85-8"></a><span class="dt">void</span> Page::onComboSheetSizeChanged( <span class="dt">int</span> index )</span>
<span id="cb85-9"><a href="#cb85-9"></a>{</span>
<span id="cb85-10"><a href="#cb85-10"></a> <span class="dt">int</span> value = ui.comboBoxSheetSize-&gt;itemData(index).toInt();</span>
<span id="cb85-11"><a href="#cb85-11"></a>}</span></code></pre></div>
<hr>
<p>by the way, i think i misunderstood your question. i think the way you get data is smart enough?</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qtcreator-no-valid-kits-found-score-126122-in-2016" class="level3">
<h3>24: QtCreator: No valid kits found (score <a href="https://stackoverflow.com/q/26499404.html">126122</a> in 2016)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>Installed just the IDE on Windows 7. I want to create a Plain C++ Project (Non-QT Project); however I get an error: <strong>No valid kits found</strong>. When I click on Options-&gt;Kits, I see the <em>Desktop (default)</em> kit, and it shows no errors.</p>
<p>Am I getting the error because I didn’t install a Qt library? If so, is there any way I can bypass downloading/installing that and just use the IDE?</p>
</section>
<section id="answer-accepted-score-42" class="level4">
<h4>Answer accepted (score 42)</h4>
<p>Found the issue. Qt Creator wants you to use a compiler listed under one of their Qt libraries. Use the Maintenance Tool to install this.</p>
<p>To do so:</p>
<blockquote>
<p>
Go to Tools -&gt; Options…. Select Build &amp; Run on left. Open Kits tab. You should have Manual -&gt; Desktop (default) line in list. Choose it. Now select something like Qt 5.5.1 in PATH (qt5) in Qt version combobox and click Apply button. From now you should be able to create, build and run empty Qt project.
</p>
</blockquote>
</section>
<section id="answer-2-score-46" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>Though OP is asking about Windows, this error also occurs on Ubuntu Linux and Google lists this result first when you search for the error“QtCreator: No valid kits found”.</p>
<p>On Ubuntu this is solved by running:</p>
<p>For Qt5:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="#cb86-1"></a>sudo apt-get install qt5-<span class="cf">default</span></span></code></pre></div>
<p>For Qt4:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="#cb87-1"></a>sudo apt-get install qt4-dev-tools libqt4-dev libqt4-core libqt4-gui</span></code></pre></div>
<p>This question is answered <a href="https://stackoverflow.com/questions/14581528/qt-version-is-not-properly-installed-please-run-make-install">here</a> and <a href="https://askubuntu.com/questions/694436/qt-version-is-not-properly-installed">here</a>, though those entries are less SEO-friendly…</p>
</section>
<section id="answer-3-score-2-1" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>For QT 5.* if you face error at Kits, like <code>No Valid Kits Found</code>, go to <strong>Options-&gt;Build&amp;Run-&gt;</strong> (Kits tab) then you see a Manual category which should list Desktop as the default.</p>
<p>Just go to your OS Terminal and write <code>sudo apt-get install qt5-default</code>, go back to QT Creator and Start your New Project, and there you see the kit option Desktop included in the list.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="correct-way-to-quit-a-qt-program-score-122572-in-2013" class="level3">
<h3>25: Correct way to quit a Qt program? (score <a href="https://stackoverflow.com/q/8026101.html">122572</a> in 2013)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>How should I quit a Qt Program, e.g when loading a data file, and discovered file corruption, and user need to quit this app or re-initiate data file?</p>
<p>Should I:</p>
<ol>
<li>
call <code>exit(EXIT_FAILURE)</code>
</li>
<li>
call <code>QApplication::quit()</code>
</li>
<li>
call <code>QCoreApplication::quit()</code>
</li>
</ol>
<p>And difference between (2) and (3)?</p>
</section>
<section id="answer-accepted-score-132" class="level4">
<h4>Answer accepted (score 132)</h4>
<p>QApplication is derived from QCoreApplication and thereby inherits <code>quit()</code> which is a public slot of <code>QCoreApplication</code>, so there is no difference between <code>QApplication::quit()</code> and <code>QCoreApplication::quit()</code>.</p>
<p>As we can read in the documentation of <a href="http://doc.qt.io/qt-5/qcoreapplication.html#quit" rel="noreferrer"><code>QCoreApplication::quit()</code></a> it <em>“tells the application to exit with return code 0 (success).”</em>. If you want to exit because you discovered file corruption then you may not want to exit with return code zero which means success, so you should call <a href="http://doc.qt.io/qt-5/qcoreapplication.html#exit" rel="noreferrer"><code>QCoreApplication::exit()</code></a> because you can provide a non-zero returnCode which, by convention, indicates an error.</p>
<p>It is important to note that <em>“if the event loop is not running, this function (QCoreApplication::exit()) does nothing”</em>, so in that case you should call <code>exit(EXIT_FAILURE)</code>.</p>
</section>
<section id="answer-2-score-29" class="level4">
<h4>Answer 2 (score 29)</h4>
<p>You can call <code>qApp.exit();</code>. I always use that and never had a problem with it.</p>
<p>If you application is a command line application, you might indeed want to return an exit code. It’s completely up to you what the code is.</p>
</section>
<section id="answer-3-score-0" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>If you’re using Qt Jambi, this should work:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1"></a>QApplication.closeAllWindows();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-format-a-qstring-score-122452-in-2015" class="level3">
<h3>26: How to format a QString? (score <a href="https://stackoverflow.com/q/4784155.html">122452</a> in 2015)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<p>I’d like to format a string for Qt label, I’m programming in C++ on Qt.</p>
<p>In ObjC I would write something like:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1"></a>NSString *format=[NSString stringWithFormat: ... ];</span></code></pre></div>
<p>How to do something like that in Qt?</p>
</section>
<section id="answer-2-score-151" class="level4">
<h4>Answer 2 (score 151)</h4>
<p>You can use QString.arg like this</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1"></a>QString my_formatted_string = QString(<span class="st">&quot;%1/%2-%3.txt&quot;</span>).arg(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Jane&quot;</span>);</span>
<span id="cb90-2"><a href="#cb90-2"></a><span class="co">// You get &quot;~/Tom-Jane.txt&quot;</span></span></code></pre></div>
<p>This method is preferred over sprintf because:</p>
<p>Changing the position of the string without having to change the ordering of substitution, e.g. </p>
<div class="sourceCode" id="cb91"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1"></a><span class="co">// To get &quot;~/Jane-Tom.txt&quot;</span></span>
<span id="cb91-2"><a href="#cb91-2"></a>QString my_formatted_string = QString(<span class="st">&quot;%1/%3-%2.txt&quot;</span>).arg(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Jane&quot;</span>);</span></code></pre></div>
<p>Or, changing the type of the arguments doesn’t require changing the format string, e.g. </p>
<div class="sourceCode" id="cb92"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb92-1"><a href="#cb92-1"></a><span class="co">// To get &quot;~/Tom-1.txt&quot;</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>QString my_formatted_string = QString(<span class="st">&quot;%1/%2-%3.txt&quot;</span>).arg(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;Tom&quot;</span>, QString::number(<span class="dv">1</span>));</span></code></pre></div>
<p>As you can see, the change is minimal. Of course, you generally do not need to care about the type that is passed into QString::arg() since most types are correctly overloaded.</p>
<p>One drawback though: QString::arg() doesn’t handle std::string. You will need to call: QString::fromStdString() on your std::string to make it into a QString before passing it to QString::arg(). Try to separate the classes that use QString from the classes that use std::string. Or if you can, switch to QString altogether.</p>
<p>UPDATE: Examples are updated thanks to Frank Osterfeld.</p>
<p>UPDATE: Examples are updated thanks to alexisdm.</p>
</section>
<section id="answer-3-score-28" class="level4">
<h4>Answer 3 (score 28)</h4>
<p>You can use the <code>sprintf</code> method, however the <code>arg</code> method is preferred as it supports unicode.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1"></a>QString str;</span>
<span id="cb93-2"><a href="#cb93-2"></a>str.sprintf(<span class="st">&quot;%s %d&quot;</span>, <span class="st">&quot;string&quot;</span>, <span class="dv">213</span>);</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-set-image-on-qpushbutton-score-122196-in-2012" class="level3">
<h3>27: How to set image on QPushButton? (score <a href="https://stackoverflow.com/q/3137805.html">122196</a> in 2012)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>I want to set an image on <code>QPushButton</code>, and the size of <code>QPushButton</code> should depend on the size of the image. I am able to do this when using <code>QLabel</code>, but not with <code>QPushButton</code>.</p>
<p>So, if anyone has a solution, then please help me out.</p>
</section>
<section id="answer-2-score-62" class="level4">
<h4>Answer 2 (score 62)</h4>
<p>What you can do is use a pixmap as an icon and then put this icon onto the button.</p>
<p>To make sure the size of the button will be correct, you have to reisze the icon according to the pixmap size.</p>
<p>Something like this should work :</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1"></a>QPixmap pixmap(<span class="st">&quot;image_path&quot;</span>);</span>
<span id="cb94-2"><a href="#cb94-2"></a>QIcon ButtonIcon(pixmap);</span>
<span id="cb94-3"><a href="#cb94-3"></a>button-&gt;setIcon(ButtonIcon);</span>
<span id="cb94-4"><a href="#cb94-4"></a>button-&gt;setIconSize(pixmap.rect().size());</span></code></pre></div>
</section>
<section id="answer-3-score-40" class="level4">
<h4>Answer 3 (score 40)</h4>
<div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1"></a>QPushButton *button = new QPushButton;</span>
<span id="cb95-2"><a href="#cb95-2"></a>button-&gt;setIcon(QIcon(<span class="st">&quot;:/icons/...&quot;</span>));</span>
<span id="cb95-3"><a href="#cb95-3"></a>button-&gt;setIconSize(QSize(<span class="dv">65</span>, <span class="dv">65</span>));</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="error-qapplication-no-such-file-or-directory-score-120687-in-2014" class="level3">
<h3>28: Error QApplication: no such file or directory (score <a href="https://stackoverflow.com/q/8995399.html">120687</a> in 2014)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>I have installed C++SDK that have Qt but when I try compiling a code linking QApplication it gives me the error:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb96-1"><a href="#cb96-1"></a>Error QApplication: no such file or directory</span></code></pre></div>
<p>How do I link these libraries? I searched into the directories and there is a file named QApplication.h; So I tried to link it with -I (linking the directory) but it was still giving me that error.</p>
</section>
<section id="answer-accepted-score-57" class="level4">
<h4>Answer accepted (score 57)</h4>
<p>To start things off, the error <code>QApplication: no such file or directory</code> means your compiler was not able to find this header. It is not related to the linking process as you mentioned in the question.</p>
<p>The <code>-I</code> flag (uppercase <strong>i</strong>) is used to specify the include (headers) directory (which is what you need to do), while the <code>-L</code> flag is used to specify the libraries directory. The <code>-l</code> flag (lowercase L) is used to link your application with a specified library.</p>
<p>But you can <strong>use Qt to your advantage</strong>: Qt has a build system named <strong>qmake</strong> which makes things easier. For instance, when I want to compile <em>main.cpp</em> I create a <strong>main.pro</strong> file. For educational purposes, let’s say this source code is a simple project that uses only <code>QApplication</code> and <code>QDeclarativeView</code>. An appropriate <em>.pro</em> file would be:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1"></a>TEMPLATE += app</span>
<span id="cb97-2"><a href="#cb97-2"></a>QT += gui declarative</span>
<span id="cb97-3"><a href="#cb97-3"></a>SOURCES += main.cpp</span></code></pre></div>
<p>Then, execute the <code>qmake</code> inside that directory to create the Makefile that will be used to compile your application, and finally execute <code>make</code> to get the job done.</p>
<p>On my system this <code>make</code> outputs:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1"></a>g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_DECLARATIVE_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/opt/qt_47x/mkspecs/linux-g++ -I. -I/opt/qt_47x/include/QtCore -I/opt/qt_47x/include/QtGui -I/opt/qt_47x/include/QtDeclarative -I/opt/qt_47x/include -I/usr/X11R6/include -I. -o main.o main.cpp</span>
<span id="cb98-2"><a href="#cb98-2"></a>g++ -Wl,-O1 -Wl,-rpath,/opt/qt_47x/lib -o main main.o -L/opt/qt_47x/lib -L/usr/X11R6/lib -lQtDeclarative -L/opt/qt_47x/lib -lQtScript -lQtSvg -L/usr/X11R6/lib -lQtSql -lQtXmlPatterns -lQtNetwork -lQtGui -lQtCore -lpthread</span></code></pre></div>
<p>Note: I installed Qt in another directory –&gt; <code>/opt/qt_47x</code></p>
<p><strong>Edit: Qt 5.x and later</strong></p>
<p>Add <code>QT += widgets</code> to the .pro file and solve this problem.</p>
</section>
<section id="answer-2-score-100" class="level4">
<h4>Answer 2 (score 100)</h4>
<p>In Qt 5 you now have to add <code>widgets</code> to the <code>QT</code> qmake variable (in your <code>MyProject.pro</code> file).</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1"></a> QT += widgets</span></code></pre></div>
</section>
<section id="answer-3-score-29" class="level4">
<h4>Answer 3 (score 29)</h4>
<p><strong>For QT 5</strong></p>
<p>
<strong>Step1:</strong> <code>.pro</code> (in pro file, add these 2 lines)
</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb100-1"><a href="#cb100-1"></a>QT       += core gui</span>
<span id="cb100-2"><a href="#cb100-2"></a>greaterThan(QT_MAJOR_VERSION, <span class="dv">4</span>): QT += widgets</span></code></pre></div>
<p>
<strong>Step2:</strong> In <code>main.cpp</code> replace code:
</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb101-1"><a href="#cb101-1"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QApplication&gt;</span><span class="pp"> </span></span></code></pre></div>
<p>with:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb102-1"><a href="#cb102-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="checking-if-a-folder-exists-and-creating-folders-in-qt-c-score-119925-in-2017" class="level3">
<h3>29: Checking if a folder exists (and creating folders) in Qt, C++ (score <a href="https://stackoverflow.com/q/2241808.html">119925</a> in 2017)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>
In Qt, how do I check if a given folder exists in the current directory?<br> If it doesn’t exist, how do I then create an empty folder?
</p>
</section>
<section id="answer-accepted-score-214" class="level4">
<h4>Answer accepted (score 214)</h4>
<p>To check if a directory named “Folder” exists use:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb103-1"><a href="#cb103-1"></a>QDir(<span class="st">&quot;Folder&quot;</span>).exists();</span></code></pre></div>
<p>To create a new folder named “MyFolder” use:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb104-1"><a href="#cb104-1"></a>QDir().mkdir(<span class="st">&quot;MyFolder&quot;</span>);</span></code></pre></div>
</section>
<section id="answer-2-score-137" class="level4">
<h4>Answer 2 (score 137)</h4>
<p>To both check if it exists and create if it doesn’t, including intermediaries:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb105-1"><a href="#cb105-1"></a>QDir dir(<span class="st">&quot;path/to/dir&quot;</span>);</span>
<span id="cb105-2"><a href="#cb105-2"></a><span class="cf">if</span> (!dir.exists())</span>
<span id="cb105-3"><a href="#cb105-3"></a>    dir.mkpath(<span class="st">&quot;.&quot;</span>);</span></code></pre></div>
</section>
<section id="answer-3-score-12-1" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>When you use QDir.mkpath() it returns true if the path already exists, in the other hand QDir.mkdir() returns false if the path already exists. So depending on your program you have to choose which fits better.</p>
<p>You can see more on <a href="http://qt-project.org/doc/qt-4.8/qdir.html#mkpath">Qt Documentation</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="display-qimage-with-qtgui-score-116001-in-2013" class="level3">
<h3>30: Display QImage with QtGui (score <a href="https://stackoverflow.com/q/4474086.html">116001</a> in 2013)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>I am new to Qt, and I am trying to create a simple GUI Application that displays an image once a button has been clicked on.</p>
<p>I can read the image in a <code>QImage</code> object, but is there any simple way to call a Qt function that takes the <code>QImage</code> as an input, and displays it?</p>
</section>
<section id="answer-accepted-score-6" class="level4">
<h4>Answer accepted (score 6)</h4>
<p>Thanks All, I found how to do it, which is the same as Dave and Sergey:</p>
<p>I am using QT Creator:</p>
<p>In the main GUI window create using the drag drop GUI and create label (e.g. “myLabel”)</p>
<p>In the callback of the button (clicked) do the following using the (*ui) pointer to the user interface window:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1"></a><span class="dt">void</span> MainWindow::on_pushButton_clicked()</span>
<span id="cb106-2"><a href="#cb106-2"></a>{</span>
<span id="cb106-3"><a href="#cb106-3"></a>     QImage imageObject;</span>
<span id="cb106-4"><a href="#cb106-4"></a>     imageObject.load(imagePath);</span>
<span id="cb106-5"><a href="#cb106-5"></a>     ui-&gt;myLabel-&gt;setPixmap(QPixmap::fromImage(imageObject));</span>
<span id="cb106-6"><a href="#cb106-6"></a></span>
<span id="cb106-7"><a href="#cb106-7"></a>     <span class="co">//OR use the other way by setting the Pixmap directly</span></span>
<span id="cb106-8"><a href="#cb106-8"></a></span>
<span id="cb106-9"><a href="#cb106-9"></a>     QPixmap pixmapObject(imagePath<span class="st">&quot;);</span></span>
<span id="cb106-10"><a href="#cb106-10"></a>     ui-&gt;myLabel2-&gt;setPixmap(pixmapObject);</span>
<span id="cb106-11"><a href="#cb106-11"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-68" class="level4">
<h4>Answer 2 (score 68)</h4>
<p>Simple, but complete example showing how to display QImage might look like this:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb107-1"><a href="#cb107-1"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QApplication&gt;</span></span>
<span id="cb107-2"><a href="#cb107-2"></a><span class="pp">#include </span><span class="im">&lt;QLabel&gt;</span></span>
<span id="cb107-3"><a href="#cb107-3"></a></span>
<span id="cb107-4"><a href="#cb107-4"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb107-5"><a href="#cb107-5"></a>{</span>
<span id="cb107-6"><a href="#cb107-6"></a>    QApplication a(argc, argv);</span>
<span id="cb107-7"><a href="#cb107-7"></a></span>
<span id="cb107-8"><a href="#cb107-8"></a>    QImage myImage;</span>
<span id="cb107-9"><a href="#cb107-9"></a>    myImage.load(<span class="st">&quot;test.png&quot;</span>);</span>
<span id="cb107-10"><a href="#cb107-10"></a></span>
<span id="cb107-11"><a href="#cb107-11"></a>    QLabel myLabel;</span>
<span id="cb107-12"><a href="#cb107-12"></a>    myLabel.setPixmap(QPixmap::fromImage(myImage));</span>
<span id="cb107-13"><a href="#cb107-13"></a></span>
<span id="cb107-14"><a href="#cb107-14"></a>    myLabel.show();</span>
<span id="cb107-15"><a href="#cb107-15"></a></span>
<span id="cb107-16"><a href="#cb107-16"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb107-17"><a href="#cb107-17"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-24-1" class="level4">
<h4>Answer 3 (score 24)</h4>
<p>Drawing an image using a <code>QLabel</code> seems like a bit of a kludge to me. With newer versions of Qt you can use a <code>QGraphicsView</code> widget. In Qt Creator, drag a <code>Graphics View</code> widget onto your UI and name it something (it is named <code>mainImage</code> in the code below). In <code>mainwindow.h</code>, add something like the following as <code>private</code> variables to your <code>MainWindow</code> class:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb108-1"><a href="#cb108-1"></a>QGraphicsScene *scene;</span>
<span id="cb108-2"><a href="#cb108-2"></a>QPixmap image;</span></code></pre></div>
<p>Then just edit <code>mainwindow.cpp</code> and make the constructor something like this:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb109-1"><a href="#cb109-1"></a>MainWindow::MainWindow(QWidget *parent) :</span>
<span id="cb109-2"><a href="#cb109-2"></a>    QMainWindow(parent), ui(new Ui::MainWindow)</span>
<span id="cb109-3"><a href="#cb109-3"></a>{</span>
<span id="cb109-4"><a href="#cb109-4"></a>    ui-&gt;setupUi(this);</span>
<span id="cb109-5"><a href="#cb109-5"></a></span>
<span id="cb109-6"><a href="#cb109-6"></a>    image.load(<span class="st">&quot;myimage.png&quot;</span>);</span>
<span id="cb109-7"><a href="#cb109-7"></a>    scene = new QGraphicsScene(this);</span>
<span id="cb109-8"><a href="#cb109-8"></a>    scene-&gt;addPixmap(image);</span>
<span id="cb109-9"><a href="#cb109-9"></a>    scene-&gt;setSceneRect(image.rect());</span>
<span id="cb109-10"><a href="#cb109-10"></a></span>
<span id="cb109-11"><a href="#cb109-11"></a>    ui-&gt;mainImage-&gt;setScene(scene);</span>
<span id="cb109-12"><a href="#cb109-12"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="interpreting-segfault-messages-score-115638-in" class="level3">
<h3>31: Interpreting segfault messages (score <a href="https://stackoverflow.com/q/2549214.html">115638</a> in )</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>What is the correct interpretation of the following segfault messages?</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb110-1"><a href="#cb110-1"></a>segfault at <span class="dv">10</span> ip <span class="bn">00007</span><span class="er">f9bebcca90d</span> sp <span class="bn">00007</span><span class="er">fffb62705f0</span> error <span class="dv">4</span> in libQtWebKit.so<span class="fl">.4</span><span class="er">.5</span><span class="fl">.2</span>[<span class="dv">7</span><span class="er">f9beb83a000</span>+f6f000]</span>
<span id="cb110-2"><a href="#cb110-2"></a>segfault at <span class="dv">10</span> ip <span class="bn">00007</span><span class="er">fa44d78890d</span> sp <span class="bn">00007</span><span class="er">fff43f6b720</span> error <span class="dv">4</span> in libQtWebKit.so<span class="fl">.4</span><span class="er">.5</span><span class="fl">.2</span>[<span class="dv">7</span><span class="er">fa44d2f8000</span>+f6f000]</span>
<span id="cb110-3"><a href="#cb110-3"></a>segfault at <span class="dv">11</span> ip <span class="bn">00007</span><span class="er">f2b0022acee</span> sp <span class="bn">00007</span><span class="er">fff368ea610</span> error <span class="dv">4</span> in libQtWebKit.so<span class="fl">.4</span><span class="er">.5</span><span class="fl">.2</span>[<span class="dv">7</span><span class="er">f2aff9f7000</span>+f6f000]</span>
<span id="cb110-4"><a href="#cb110-4"></a>segfault at <span class="dv">11</span> ip <span class="bn">00007</span><span class="er">f24b21adcee</span> sp <span class="bn">00007</span><span class="er">fff7379ded0</span> error <span class="dv">4</span> in libQtWebKit.so<span class="fl">.4</span><span class="er">.5</span><span class="fl">.2</span>[<span class="dv">7</span><span class="er">f24b197a000</span>+f6f000]</span></code></pre></div>
</section>
<section id="answer-accepted-score-86" class="level4">
<h4>Answer accepted (score 86)</h4>
<p>This is a segfault due to following a null pointer trying to find code to run (that is, during an instruction fetch).</p>
<h5>
If this were a program, not a shared library
</h2>
<p>Run <code>addr2line -e yourSegfaultingProgram 00007f9bebcca90d</code> (and repeat for the other instruction pointer values given) to see where the error is happening. Better, get a debug-instrumented build, and reproduce the problem under a debugger such as gdb.</p>
<h5>
Since it’s a shared library
</h2>
<p>You’re hosed, unfortunately; it’s not possible to know where the libraries were placed in memory by the dynamic linker after-the-fact. Reproduce the problem under <code>gdb</code>.</p>
<h5>
What the error means
</h2>
<p>Here’s the breakdown of the fields:</p>
<ul>
<li>
<code>address</code> (after the <code>at</code>) - the location in memory the code is trying to access (it’s likely that <code>10</code> and <code>11</code> are offsets from a pointer we expect to be set to a valid value but which is instead pointing to <code>0</code>)
</li>
<li>
<code>ip</code> - instruction pointer, ie. where the code which is trying to do this lives
</li>
<li>
<code>sp</code> - stack pointer
</li>
<li>
<p>
<code>error</code> - An error code for page faults; see below for what this means on x86.
</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb111-1"><a href="#cb111-1"></a><span class="co">/*</span></span>
<span id="cb111-2"><a href="#cb111-2"></a><span class="co"> * Page fault error code bits:</span></span>
<span id="cb111-3"><a href="#cb111-3"></a><span class="co"> *</span></span>
<span id="cb111-4"><a href="#cb111-4"></a><span class="co"> *   bit 0 ==    0: no page found       1: protection fault</span></span>
<span id="cb111-5"><a href="#cb111-5"></a><span class="co"> *   bit 1 ==    0: read access         1: write access</span></span>
<span id="cb111-6"><a href="#cb111-6"></a><span class="co"> *   bit 2 ==    0: kernel-mode access  1: user-mode access</span></span>
<span id="cb111-7"><a href="#cb111-7"></a><span class="co"> *   bit 3 ==                           1: use of reserved bit detected</span></span>
<span id="cb111-8"><a href="#cb111-8"></a><span class="co"> *   bit 4 ==                           1: fault was an instruction fetch</span></span>
<span id="cb111-9"><a href="#cb111-9"></a><span class="co"> */</span></span>
<span id="cb111-10"><a href="#cb111-10"></a>```&lt;/li&gt;</span>
<span id="cb111-11"><a href="#cb111-11"></a>&lt;/ul&gt;</span>
<span id="cb111-12"><a href="#cb111-12"></a></span>
<span id="cb111-13"><a href="#cb111-13"></a><span class="er">#### Answer 2 (score 46)</span></span>
<span id="cb111-14"><a href="#cb111-14"></a>Error <span class="dv">4</span> means <span class="st">&quot;The cause was a user-mode read resulting in no page being found.&quot;</span>. There&#39;s a tool that decodes it &lt;a href=<span class="st">&quot;http://rgeissert.blogspot.com/p/segmentation-fault-error.html&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;here&lt;/a&gt;.  </span>
<span id="cb111-15"><a href="#cb111-15"></a></span>
<span id="cb111-16"><a href="#cb111-16"></a>Here&#39;s the definition from the kernel. Keep in mind that <span class="dv">4</span> means that bit <span class="dv">2</span> is set and no other bits are set. If you convert it to binary that becomes clear.  </span>
<span id="cb111-17"><a href="#cb111-17"></a></span>
<span id="cb111-18"><a href="#cb111-18"></a>```c</span>
<span id="cb111-19"><a href="#cb111-19"></a><span class="co">/*</span></span>
<span id="cb111-20"><a href="#cb111-20"></a><span class="co"> * Page fault error code bits</span></span>
<span id="cb111-21"><a href="#cb111-21"></a><span class="co"> *      bit 0 == 0 means no page found, 1 means protection fault</span></span>
<span id="cb111-22"><a href="#cb111-22"></a><span class="co"> *      bit 1 == 0 means read, 1 means write</span></span>
<span id="cb111-23"><a href="#cb111-23"></a><span class="co"> *      bit 2 == 0 means kernel, 1 means user-mode</span></span>
<span id="cb111-24"><a href="#cb111-24"></a><span class="co"> *      bit 3 == 1 means use of reserved bit detected</span></span>
<span id="cb111-25"><a href="#cb111-25"></a><span class="co"> *      bit 4 == 1 means fault was an instruction fetch</span></span>
<span id="cb111-26"><a href="#cb111-26"></a><span class="co"> */</span></span>
<span id="cb111-27"><a href="#cb111-27"></a><span class="pp">#define PF_PROT         (1&lt;&lt;0)</span></span>
<span id="cb111-28"><a href="#cb111-28"></a><span class="pp">#define PF_WRITE        (1&lt;&lt;1)</span></span>
<span id="cb111-29"><a href="#cb111-29"></a><span class="pp">#define PF_USER         (1&lt;&lt;2)</span></span>
<span id="cb111-30"><a href="#cb111-30"></a><span class="pp">#define PF_RSVD         (1&lt;&lt;3)</span></span>
<span id="cb111-31"><a href="#cb111-31"></a><span class="pp">#define PF_INSTR        (1&lt;&lt;4)</span></span></code></pre></div>
<p>Now then, “ip 00007f9bebcca90d” means the instruction pointer was at 0x00007f9bebcca90d when the segfault happened.</p>
<p>“libQtWebKit.so.4.5.2[7f9beb83a000+f6f000]” tells you:</p>
<ul>
<li>
The object the crash was in: “libQtWebKit.so.4.5.2”
</li>
<li>
The base address of that object “7f9beb83a000”
</li>
<li>
How big that object is: “f6f000”
</li>
</ul>
<p>If you take the base address and subtract it from the ip, you get the offset into that object:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb112-1"><a href="#cb112-1"></a><span class="bn">0x00007f9bebcca90d</span> - <span class="bn">0x7f9beb83a000</span> = <span class="bn">0x49090D</span></span></code></pre></div>
<p>Then you can run addr2line on it:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb113-1"><a href="#cb113-1"></a>addr2line -e /usr/lib64/qt45/lib/libQtWebKit.so<span class="fl">.4</span><span class="er">.5</span><span class="fl">.2</span> -fCi <span class="bn">0x49090D</span></span>
<span id="cb113-2"><a href="#cb113-2"></a>??</span>
<span id="cb113-3"><a href="#cb113-3"></a>??:<span class="dv">0</span></span></code></pre></div>
<p>In my case it wasn’t successful, either the copy I installed isn’t identical to yours, or it’s stripped.</p>
</section>
<section id="answer-3-score-10" class="level4">
<h4>Answer 3 (score 10)</h4>
<p>Let’s go to the source – <a href="http://lxr.free-electrons.com/source/arch/x86/mm/fault.c?v=2.6.32#L683">2.6.32, for example</a>. The message is printed by show_signal_msg() function in arch/x86/mm/fault.c if the show_unhandled_signals sysctl is set.</p>
<p>“error” is not an errno nor a signal number, it’s a “page fault error code” – see definition of enum x86_pf_error_code.</p>
<p>“[7fa44d2f8000+f6f000]” is starting address and size of virtual memory area where offending object was mapped at the time of crash. Value of “ip” should fit in this region. With this info in hand, it should be easy to find offending code in gdb.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-the-current-timestamp-score-112703-in-2016" class="level3">
<h3>32: How to get the current TimeStamp? (score <a href="https://stackoverflow.com/q/2781119.html">112703</a> in 2016)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>I’m trying to get the current time as TimeStamp without success.</p>
<p>I have this code:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1"></a>QDateTime setTime = QDateTime::fromString (QString(<span class="st">&quot;1970-07-18T14:15:09&quot;</span>), Qt::ISODate);</span>
<span id="cb114-2"><a href="#cb114-2"></a>QDateTime current = QDateTime::currentDateTime();</span>
<span id="cb114-3"><a href="#cb114-3"></a>uint msecs = setTime.time().msecsTo(current.time());</span>
<span id="cb114-4"><a href="#cb114-4"></a></span>
<span id="cb114-5"><a href="#cb114-5"></a><span class="cf">return</span>  QString::number(msecs);</span></code></pre></div>
<p>The output is</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb115-1"><a href="#cb115-1"></a>Sunday, January <span class="dv">25</span><span class="er">th</span> <span class="dv">1970</span>, <span class="bn">03</span>:<span class="dv">17</span>:<span class="dv">35</span> (GMT)</span></code></pre></div>
</section>
<section id="answer-accepted-score-35" class="level4">
<h4>Answer accepted (score 35)</h4>
<p>I think you are looking for this function:</p>
<p><a href="http://doc.qt.io/qt-5/qdatetime.html#toTime_t" rel="noreferrer">http://doc.qt.io/qt-5/qdatetime.html#toTime_t</a></p>
<blockquote>
<p>uint QDateTime::toTime_t () const</p>
<p>Returns the datetime as the number of seconds that have passed since 1970-01-01T00:00:00, &gt; Coordinated Universal Time (Qt::UTC).</p>
<p>On systems that do not support time zones, this function will behave as if local time were Qt::UTC.</p>
See also setTime_t().
</blockquote>
</section>
<section id="answer-2-score-77" class="level4">
<h4>Answer 2 (score 77)</h4>
<p>In Qt 4.7, there is the <a href="http://qt-project.org/doc/qt-5.0/qtcore/qdatetime.html#currentMSecsSinceEpoch" rel="noreferrer"><code>QDateTime::currentMSecsSinceEpoch()</code></a> static function, which does exactly what you need, without any intermediary steps. Hence I’d recommend that for projects using Qt 4.7 or newer.</p>
</section>
<section id="answer-3-score-4-1" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>Since Qt 5.8, we now have <a href="http://doc.qt.io/qt-5/qdatetime.html#currentSecsSinceEpoch" rel="nofollow noreferrer"><code>QDateTime::currentSecsSinceEpoch()</code></a> to deliver the seconds directly, a.k.a. as real Unix timestamp. So, no need to divide the result by 1000 to get seconds anymore.</p>
<p>Credits: also posted as comment to <a href="https://stackoverflow.com/a/4460647">this answer</a>. However, I think it is easier to find if it is a separate answer.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="linking-a-qtdesigner-.ui-file-to-pythonpyqt-score-112212-in-2010" class="level3">
<h3>33: Linking a qtDesigner .ui file to python/pyqt? (score <a href="https://stackoverflow.com/q/2398800.html">112212</a> in 2010)</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>So if I go into QtDesigner and build a UI, it’ll be saved as a .ui file. How can I make this as a python file or use this in python?</p>
</section>
<section id="answer-accepted-score-58" class="level4">
<h4>Answer accepted (score 58)</h4>
<p>Another way to use .ui in your code is:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb116-1"><a href="#cb116-1"></a>from PyQt4 import QtCore, QtGui, uic</span>
<span id="cb116-2"><a href="#cb116-2"></a>class MyWidget(QtGui.QWidget)</span>
<span id="cb116-3"><a href="#cb116-3"></a>    ...</span>
<span id="cb116-4"><a href="#cb116-4"></a>    <span class="er">#somewhere in constructor:</span></span>
<span id="cb116-5"><a href="#cb116-5"></a>    uic.loadUi(&#39;MyWidget.ui&#39;, self)</span></code></pre></div>
<p>both approaches are good. Do not forget, that if you use Qt resource files (extremely useful) for icons and so on, you must compile it too:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb117-1"><a href="#cb117-1"></a>pyrcc4.exe -o ui/images_rc.py ui/images/images.qrc</span></code></pre></div>
<p>Note, when <code>uic</code> compiles interface, it adds ‘import images_rc’ at the end of .py file, so you must compile resources into the file with this name, or rename it in generated code.</p>
</section>
<section id="answer-2-score-45" class="level4">
<h4>Answer 2 (score 45)</h4>
<p>Combining <a href="https://stackoverflow.com/a/2500905/544059">Max’s answer</a> and <a href="http://www.riverbankcomputing.com/pipermail/pyqt/2007-April/015902.html" rel="noreferrer">Shriramana Sharma’s mailing list post</a>, I built a small working example for loading a <code>mywindow.ui</code> file containing a <code>QMainWindow</code> (so just choose to create a Main Window in Qt Designer’s <code>File-New</code> dialog).</p>
<p>This is the code that loads it:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1"></a>import sys</span>
<span id="cb118-2"><a href="#cb118-2"></a>from PyQt4 import QtGui, uic</span>
<span id="cb118-3"><a href="#cb118-3"></a></span>
<span id="cb118-4"><a href="#cb118-4"></a>class MyWindow(QtGui.QMainWindow):</span>
<span id="cb118-5"><a href="#cb118-5"></a>    def __init__(self):</span>
<span id="cb118-6"><a href="#cb118-6"></a>        super(MyWindow, self).__init__()</span>
<span id="cb118-7"><a href="#cb118-7"></a>        uic.loadUi(&#39;mywindow.ui&#39;, self)</span>
<span id="cb118-8"><a href="#cb118-8"></a>        self.show()</span>
<span id="cb118-9"><a href="#cb118-9"></a></span>
<span id="cb118-10"><a href="#cb118-10"></a><span class="cf">if</span> __name__ == &#39;__main__&#39;:</span>
<span id="cb118-11"><a href="#cb118-11"></a>    app = QtGui.QApplication(sys.argv)</span>
<span id="cb118-12"><a href="#cb118-12"></a>    window = MyWindow()</span>
<span id="cb118-13"><a href="#cb118-13"></a>    sys.exit(app.exec_())</span></code></pre></div>
</section>
<section id="answer-3-score-28-1" class="level4">
<h4>Answer 3 (score 28)</h4>
<p>You need to generate a python file from your ui file with the pyuic tool (site-packages)</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb119-1"><a href="#cb119-1"></a>pyuic form1.ui &gt; form1.py</span></code></pre></div>
<p>with pyqt4</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb120-1"><a href="#cb120-1"></a>pyuic4.bat form1.ui &gt; form1.py</span></code></pre></div>
<p>Then you can import the form1 into your script.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-c-aggregate-stdstringstream-ss-has-incomplete-type-and-cannot-be-defined-score-110931-in-2018" class="level3">
<h3>34: Qt c++ aggregate ‘std::stringstream ss’ has incomplete type and cannot be defined (score <a href="https://stackoverflow.com/q/11751486.html">110931</a> in 2018)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>I have this function in my program that converts integers to strings:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb121-1"><a href="#cb121-1"></a>    QString Stats_Manager::convertInt(<span class="dt">int</span> num)</span>
<span id="cb121-2"><a href="#cb121-2"></a>    {</span>
<span id="cb121-3"><a href="#cb121-3"></a>        stringstream ss;</span>
<span id="cb121-4"><a href="#cb121-4"></a>        ss &lt;&lt; num;</span>
<span id="cb121-5"><a href="#cb121-5"></a>        <span class="cf">return</span> ss.str();</span>
<span id="cb121-6"><a href="#cb121-6"></a>    }</span></code></pre></div>
<p>But when ever i run this i get the error:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1"></a>aggregate &#39;std::stringstream ss&#39; has incomplete type and cannot be defined</span></code></pre></div>
<p>Im not really sure what that means. But if you know how to fix it or need any more code please just comment. Thanks.</p>
</section>
<section id="answer-accepted-score-137" class="level4">
<h4>Answer accepted (score 137)</h4>
<p>You probably have a forward declaration of the class, but haven’t included the header:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb123-1"><a href="#cb123-1"></a><span class="pp">#include </span><span class="im">&lt;sstream&gt;</span></span>
<span id="cb123-2"><a href="#cb123-2"></a></span>
<span id="cb123-3"><a href="#cb123-3"></a><span class="co">//...</span></span>
<span id="cb123-4"><a href="#cb123-4"></a>QString Stats_Manager::convertInt(<span class="dt">int</span> num)</span>
<span id="cb123-5"><a href="#cb123-5"></a>{</span>
<span id="cb123-6"><a href="#cb123-6"></a>    std::stringstream ss;   <span class="co">// &lt;-- also note namespace qualification</span></span>
<span id="cb123-7"><a href="#cb123-7"></a>    ss &lt;&lt; num;</span>
<span id="cb123-8"><a href="#cb123-8"></a>    <span class="cf">return</span> ss.str();</span>
<span id="cb123-9"><a href="#cb123-9"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-6" class="level4">
<h4>Answer 2 (score 6)</h4>
<p>Like it’s written up there, you forget to type <code>#include &amp;lt;sstream&amp;gt;</code></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb124-1"><a href="#cb124-1"></a><span class="pp">#include </span><span class="im">&lt;sstream&gt;</span></span>
<span id="cb124-2"><a href="#cb124-2"></a>using namespace std;</span>
<span id="cb124-3"><a href="#cb124-3"></a></span>
<span id="cb124-4"><a href="#cb124-4"></a>QString Stats_Manager::convertInt(<span class="dt">int</span> num)</span>
<span id="cb124-5"><a href="#cb124-5"></a>{</span>
<span id="cb124-6"><a href="#cb124-6"></a>   stringstream ss;</span>
<span id="cb124-7"><a href="#cb124-7"></a>   ss &lt;&lt; num;</span>
<span id="cb124-8"><a href="#cb124-8"></a>   <span class="cf">return</span> ss.str();</span>
<span id="cb124-9"><a href="#cb124-9"></a>}</span></code></pre></div>
<p>You can also use some other ways to convert <code>int</code> to <code>string</code>, like</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb125-1"><a href="#cb125-1"></a><span class="dt">char</span> numstr[<span class="dv">21</span>]; <span class="co">// enough to hold all numbers up to 64-bits</span></span>
<span id="cb125-2"><a href="#cb125-2"></a>sprintf(numstr, <span class="st">&quot;%d&quot;</span>, age);</span>
<span id="cb125-3"><a href="#cb125-3"></a>result = name + numstr;</span></code></pre></div>
<p>check <a href="https://stackoverflow.com/questions/191757/c-concatenate-string-and-int">this!</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="console-output-in-a-qt-gui-app-score-109338-in-2015" class="level3">
<h3>35: Console output in a Qt GUI app? (score <a href="https://stackoverflow.com/q/3360548.html">109338</a> in 2015)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>I have a Qt GUI application running on Windows that allows command-line options to be passed and under some circumstances I want to output a message to the console and then quit, for example:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb126-2"><a href="#cb126-2"></a>{</span>
<span id="cb126-3"><a href="#cb126-3"></a>  QApplication a(argc, argv);</span>
<span id="cb126-4"><a href="#cb126-4"></a></span>
<span id="cb126-5"><a href="#cb126-5"></a>  <span class="cf">if</span> (someCommandLineParam)</span>
<span id="cb126-6"><a href="#cb126-6"></a>  {</span>
<span id="cb126-7"><a href="#cb126-7"></a>    std::cout &lt;&lt; <span class="st">&quot;Hello, world!&quot;</span>;</span>
<span id="cb126-8"><a href="#cb126-8"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb126-9"><a href="#cb126-9"></a>  }</span>
<span id="cb126-10"><a href="#cb126-10"></a></span>
<span id="cb126-11"><a href="#cb126-11"></a>  MainWindow w;</span>
<span id="cb126-12"><a href="#cb126-12"></a>  w.show();</span>
<span id="cb126-13"><a href="#cb126-13"></a></span>
<span id="cb126-14"><a href="#cb126-14"></a>  <span class="cf">return</span> a.exec();</span>
<span id="cb126-15"><a href="#cb126-15"></a>}</span></code></pre></div>
<p>However, the console messages do not appear when I run the app from a command-prompt. Does anyone know how I can get this to work?</p>
</section>
<section id="answer-accepted-score-46" class="level4">
<h4>Answer accepted (score 46)</h4>
<p>Windows does not really support dual mode applications.</p>
<p>To see console output you need to create a console application</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb127-1"><a href="#cb127-1"></a>CONFIG += console</span></code></pre></div>
<p>However, if you double click on the program to start the GUI mode version then you will get a console window appearing, which is probably not what you want. To prevent the console window appearing you have to create a GUI mode application in which case you get no output in the console.</p>
<p>One idea may be to create a second small application which is a console application and provides the output. This can call the second one to do the work.</p>
<p>Or you could put all the functionality in a DLL then create two versions of the .exe file which have very simple main functions which call into the DLL. One is for the GUI and one is for the console.</p>
</section>
<section id="answer-2-score-12" class="level4">
<h4>Answer 2 (score 12)</h4>
<p>Add:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb128-1"><a href="#cb128-1"></a><span class="pp">#ifdef _WIN32</span></span>
<span id="cb128-2"><a href="#cb128-2"></a><span class="cf">if</span> (AttachConsole(ATTACH_PARENT_PROCESS)) {</span>
<span id="cb128-3"><a href="#cb128-3"></a>    freopen(<span class="st">&quot;CONOUT$&quot;</span>, <span class="st">&quot;w&quot;</span>, stdout);</span>
<span id="cb128-4"><a href="#cb128-4"></a>    freopen(<span class="st">&quot;CONOUT$&quot;</span>, <span class="st">&quot;w&quot;</span>, stderr);</span>
<span id="cb128-5"><a href="#cb128-5"></a>}</span>
<span id="cb128-6"><a href="#cb128-6"></a><span class="pp">#endif</span></span></code></pre></div>
<p>at the top of <code>main()</code>. This will enable output to the console only if the program is started in a console, and won’t pop up a console window in other situations. If you want to create a console window to display messages when you run the app outside a console you can change the condition to:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb129-1"><a href="#cb129-1"></a><span class="cf">if</span> (AttachConsole(ATTACH_PARENT_PROCESS) || AllocConsole())</span></code></pre></div>
</section>
<section id="answer-3-score-6" class="level4">
<h4>Answer 3 (score 6)</h4>
<div class="sourceCode" id="cb130"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1"></a><span class="dt">void</span> Console()</span>
<span id="cb130-2"><a href="#cb130-2"></a>{</span>
<span id="cb130-3"><a href="#cb130-3"></a>    AllocConsole();</span>
<span id="cb130-4"><a href="#cb130-4"></a>    <span class="dt">FILE</span> *pFileCon = NULL;</span>
<span id="cb130-5"><a href="#cb130-5"></a>    pFileCon = freopen(<span class="st">&quot;CONOUT$&quot;</span>, <span class="st">&quot;w&quot;</span>, stdout);</span>
<span id="cb130-6"><a href="#cb130-6"></a></span>
<span id="cb130-7"><a href="#cb130-7"></a>    COORD coordInfo;</span>
<span id="cb130-8"><a href="#cb130-8"></a>    coordInfo.X = <span class="dv">130</span>;</span>
<span id="cb130-9"><a href="#cb130-9"></a>    coordInfo.Y = <span class="dv">9000</span>;</span>
<span id="cb130-10"><a href="#cb130-10"></a></span>
<span id="cb130-11"><a href="#cb130-11"></a>    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), coordInfo);</span>
<span id="cb130-12"><a href="#cb130-12"></a>    SetConsoleMode(GetStdHandle(STD_OUTPUT_HANDLE),ENABLE_QUICK_EDIT_MODE| ENABLE_EXTENDED_FLAGS);</span>
<span id="cb130-13"><a href="#cb130-13"></a>}</span>
<span id="cb130-14"><a href="#cb130-14"></a></span>
<span id="cb130-15"><a href="#cb130-15"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb130-16"><a href="#cb130-16"></a>{</span>
<span id="cb130-17"><a href="#cb130-17"></a>    Console();</span>
<span id="cb130-18"><a href="#cb130-18"></a>    std::cout&lt;&lt;<span class="st">&quot;start@@&quot;</span>;</span>
<span id="cb130-19"><a href="#cb130-19"></a>    qDebug()&lt;&lt;<span class="st">&quot;start!&quot;</span>;</span></code></pre></div>
<p>You can’t use std::cout as others have said,my way is perfect even for some code can’t include “qdebug” !</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-create-a-simple-qt-console-application-in-c-score-102046-in-2010" class="level3">
<h3>36: How do I create a simple Qt console application in C++? (score <a href="https://stackoverflow.com/q/4180394.html">102046</a> in 2010)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I was trying to create a simple console application to try out Qt’s XML parser. I started a project in VS2008 and got this template:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb131-1"><a href="#cb131-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb131-2"><a href="#cb131-2"></a>{</span>
<span id="cb131-3"><a href="#cb131-3"></a>    QCoreApplication a(argc, argv);</span>
<span id="cb131-4"><a href="#cb131-4"></a></span>
<span id="cb131-5"><a href="#cb131-5"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb131-6"><a href="#cb131-6"></a>}</span></code></pre></div>
<p>Since I don’t need event processing, I was wondering whether I may get into trouble if I neglect to create a QCoreApplication and running the event loop. The docs state that it’s recommended in most cases.</p>
<p>For the sake of curiosity however, I am wondering how could I make some generic task execute on the event loop and then terminate the application. I was unable to google a relevant example.</p>
</section>
<section id="answer-accepted-score-99" class="level4">
<h4>Answer accepted (score 99)</h4>
<p>Here is one simple way you could structure an application if you want an event loop running.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb132-1"><a href="#cb132-1"></a><span class="co">// main.cpp</span></span>
<span id="cb132-2"><a href="#cb132-2"></a><span class="pp">#include </span><span class="im">&lt;QtCore&gt;</span></span>
<span id="cb132-3"><a href="#cb132-3"></a></span>
<span id="cb132-4"><a href="#cb132-4"></a>class Task : public QObject</span>
<span id="cb132-5"><a href="#cb132-5"></a>{</span>
<span id="cb132-6"><a href="#cb132-6"></a>    Q_OBJECT</span>
<span id="cb132-7"><a href="#cb132-7"></a>public:</span>
<span id="cb132-8"><a href="#cb132-8"></a>    Task(QObject *parent = <span class="dv">0</span>) : QObject(parent) {}</span>
<span id="cb132-9"><a href="#cb132-9"></a></span>
<span id="cb132-10"><a href="#cb132-10"></a>public slots:</span>
<span id="cb132-11"><a href="#cb132-11"></a>    <span class="dt">void</span> run()</span>
<span id="cb132-12"><a href="#cb132-12"></a>    {</span>
<span id="cb132-13"><a href="#cb132-13"></a>        <span class="co">// Do processing here</span></span>
<span id="cb132-14"><a href="#cb132-14"></a></span>
<span id="cb132-15"><a href="#cb132-15"></a>        emit finished();</span>
<span id="cb132-16"><a href="#cb132-16"></a>    }</span>
<span id="cb132-17"><a href="#cb132-17"></a></span>
<span id="cb132-18"><a href="#cb132-18"></a>signals:</span>
<span id="cb132-19"><a href="#cb132-19"></a>    <span class="dt">void</span> finished();</span>
<span id="cb132-20"><a href="#cb132-20"></a>};</span>
<span id="cb132-21"><a href="#cb132-21"></a></span>
<span id="cb132-22"><a href="#cb132-22"></a><span class="pp">#include </span><span class="im">&quot;main.moc&quot;</span></span>
<span id="cb132-23"><a href="#cb132-23"></a></span>
<span id="cb132-24"><a href="#cb132-24"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb132-25"><a href="#cb132-25"></a>{</span>
<span id="cb132-26"><a href="#cb132-26"></a>    QCoreApplication a(argc, argv);</span>
<span id="cb132-27"><a href="#cb132-27"></a></span>
<span id="cb132-28"><a href="#cb132-28"></a>    <span class="co">// Task parented to the application so that it</span></span>
<span id="cb132-29"><a href="#cb132-29"></a>    <span class="co">// will be deleted by the application.</span></span>
<span id="cb132-30"><a href="#cb132-30"></a>    Task *task = new Task(&amp;a);</span>
<span id="cb132-31"><a href="#cb132-31"></a></span>
<span id="cb132-32"><a href="#cb132-32"></a>    <span class="co">// This will cause the application to exit when</span></span>
<span id="cb132-33"><a href="#cb132-33"></a>    <span class="co">// the task signals finished.    </span></span>
<span id="cb132-34"><a href="#cb132-34"></a>    QObject::connect(task, SIGNAL(finished()), &amp;a, SLOT(quit()));</span>
<span id="cb132-35"><a href="#cb132-35"></a></span>
<span id="cb132-36"><a href="#cb132-36"></a>    <span class="co">// This will run the task from the application event loop.</span></span>
<span id="cb132-37"><a href="#cb132-37"></a>    QTimer::singleShot(<span class="dv">0</span>, task, SLOT(run()));</span>
<span id="cb132-38"><a href="#cb132-38"></a></span>
<span id="cb132-39"><a href="#cb132-39"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb132-40"><a href="#cb132-40"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-18" class="level4">
<h4>Answer 2 (score 18)</h4>
<p>Don’t forget to add the</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb133-1"><a href="#cb133-1"></a>CONFIG += console </span></code></pre></div>
<p>flag in the qmake .pro file.</p>
<p>
For the rest is just using some of Qt classes. One way I use it is to spawn processes cross-platform.
</p>
</section>
<section id="answer-3-score-4-2" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>You don’t need the <code>QCoreApplication</code> at all, just include your Qt objects as you would other objects, for example:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1"></a><span class="pp">#include </span><span class="im">&lt;QtCore&gt;</span></span>
<span id="cb134-2"><a href="#cb134-2"></a></span>
<span id="cb134-3"><a href="#cb134-3"></a><span class="dt">int</span> main()</span>
<span id="cb134-4"><a href="#cb134-4"></a>{</span>
<span id="cb134-5"><a href="#cb134-5"></a>    QVector&lt;<span class="dt">int</span>&gt; a; <span class="co">// Qt object</span></span>
<span id="cb134-6"><a href="#cb134-6"></a></span>
<span id="cb134-7"><a href="#cb134-7"></a>    <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;<span class="dv">10</span>; i++)</span>
<span id="cb134-8"><a href="#cb134-8"></a>    {</span>
<span id="cb134-9"><a href="#cb134-9"></a>        a.append(i);</span>
<span id="cb134-10"><a href="#cb134-10"></a>    }</span>
<span id="cb134-11"><a href="#cb134-11"></a></span>
<span id="cb134-12"><a href="#cb134-12"></a>    <span class="co">/* manipulate a here */</span></span>
<span id="cb134-13"><a href="#cb134-13"></a></span>
<span id="cb134-14"><a href="#cb134-14"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb134-15"><a href="#cb134-15"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-specify-different-debugrelease-output-directories-in-qmake-.pro-file-score-101236-in" class="level3">
<h3>37: How to specify different Debug/Release output directories in QMake .pro file (score <a href="https://stackoverflow.com/q/2580934.html">101236</a> in )</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>I have a Qt project and I would like to output compilation files outside the source tree.</p>
<p>I currently have the following directory structure:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb135-1"><a href="#cb135-1"></a>/</span>
<span id="cb135-2"><a href="#cb135-2"></a>|_/build</span>
<span id="cb135-3"><a href="#cb135-3"></a>|_/mylib</span>
<span id="cb135-4"><a href="#cb135-4"></a>  |_/include</span>
<span id="cb135-5"><a href="#cb135-5"></a>  |_/src</span>
<span id="cb135-6"><a href="#cb135-6"></a>  |_/resources</span></code></pre></div>
<p>Depending on the configuration (debug/release), I will like to output the resulting files inside the build directory under build/debug or build/release directories.</p>
<p>How can I do that using a .pro file?</p>
</section>
<section id="answer-accepted-score-3-1" class="level4">
<h4>Answer accepted (score 3)</h4>
<p>The short answer is: <strong>you don’t</strong>.</p>
<p>You should run <code>qmake</code> followed by <code>make</code> in whatever build directory you want to build in. So, run it once in a <code>debug</code> directory, once in a <code>release</code> directory.</p>
<p>That’s how anyone building your project would expect it to work, and that’s how Qt itself is set up to build, that’s also how Qt Creator expects your <code>.pro</code> file to behave: it simply starts <code>qmake</code> and then <code>make</code> in the build folder for your target’s chosen configuration.</p>
<p>If you wish to create these folders and perform the two (or more) builds in them, you’ll need a top-level makefile, possibly created from a top-level project file via qmake.</p>
<p>It’s not uncommon to have more than two build configurations, so you’re unnecessarily committing yourself to only differentiating between a build and a release; you might have builds with different optimization levels, etc. <strong>The debug/release dichotomy is best left to rest in peace.</strong></p>
</section>
<section id="answer-2-score-147" class="level4">
<h4>Answer 2 (score 147)</h4>
<p>For my Qt project, I use this scheme in *.pro file:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1"></a>HEADERS += src/dialogs.h</span>
<span id="cb136-2"><a href="#cb136-2"></a>SOURCES += src/main.cpp \</span>
<span id="cb136-3"><a href="#cb136-3"></a>           src/dialogs.cpp</span>
<span id="cb136-4"><a href="#cb136-4"></a></span>
<span id="cb136-5"><a href="#cb136-5"></a>Release:DESTDIR = release</span>
<span id="cb136-6"><a href="#cb136-6"></a>Release:OBJECTS_DIR = release/.obj</span>
<span id="cb136-7"><a href="#cb136-7"></a>Release:MOC_DIR = release/.moc</span>
<span id="cb136-8"><a href="#cb136-8"></a>Release:RCC_DIR = release/.rcc</span>
<span id="cb136-9"><a href="#cb136-9"></a>Release:UI_DIR = release/.ui</span>
<span id="cb136-10"><a href="#cb136-10"></a></span>
<span id="cb136-11"><a href="#cb136-11"></a>Debug:DESTDIR = debug</span>
<span id="cb136-12"><a href="#cb136-12"></a>Debug:OBJECTS_DIR = debug/.obj</span>
<span id="cb136-13"><a href="#cb136-13"></a>Debug:MOC_DIR = debug/.moc</span>
<span id="cb136-14"><a href="#cb136-14"></a>Debug:RCC_DIR = debug/.rcc</span>
<span id="cb136-15"><a href="#cb136-15"></a>Debug:UI_DIR = debug/.ui</span></code></pre></div>
<p>It`s simple, but nice! :)</p>
</section>
<section id="answer-3-score-49" class="level4">
<h4>Answer 3 (score 49)</h4>
<p>To change the directory for target dll/exe, use this in your pro file:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb137-1"><a href="#cb137-1"></a>CONFIG(debug, debug|release) {</span>
<span id="cb137-2"><a href="#cb137-2"></a>    DESTDIR = build/debug</span>
<span id="cb137-3"><a href="#cb137-3"></a>} <span class="cf">else</span> {</span>
<span id="cb137-4"><a href="#cb137-4"></a>    DESTDIR = build/release</span>
<span id="cb137-5"><a href="#cb137-5"></a>}</span></code></pre></div>
<p>You might also want to change directories for other build targets like object files and moc files (check <a href="http://qt-project.org/doc/qt-5/qmake-variable-reference.html" rel="noreferrer">qmake variable reference</a> for details or <a href="http://doc.qt.io/qt-4.8/qmake-function-reference.html#config-config" rel="noreferrer">qmake CONFIG() function reference</a>).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-show-another-window-from-mainwindow-in-qt-score-101105-in-2013" class="level3">
<h3>38: How to show another window from mainwindow in QT (score <a href="https://stackoverflow.com/q/1518317.html">101105</a> in 2013)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>Platform: QT, Windows XP</p>
<p>I am new to Qt. I want to show another window(what to do to open it as dialog) from <code>mainwindow</code>. I did “<code>add New Item -&amp;gt;Qt Designer Form Class</code>”, named it say <code>MyWindow</code>. But how to show this <code>MyWindow</code> from <code>mainwindow</code> ?</p>
</section>
<section id="answer-2-score-54" class="level4">
<h4>Answer 2 (score 54)</h4>
<ol>
<li>
Implement a slot in your QMainWindow where you will open your new Window,
</li>
<li>
Place a widget on your QMainWindow,
</li>
<li>
Connect a signal from this widget to a slot from the QMainWindow (for example: if the widget is a QPushButton connect the signal <code>click()</code> to the QMainWindow custom slot you have created).
</li>
</ol>
<p>Code example:</p>
<p><strong>MainWindow.h</strong></p>
<div class="sourceCode" id="cb138"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb138-1"><a href="#cb138-1"></a><span class="co">// ...</span></span>
<span id="cb138-2"><a href="#cb138-2"></a>include <span class="st">&quot;newwindow.h&quot;</span></span>
<span id="cb138-3"><a href="#cb138-3"></a><span class="co">// ...</span></span>
<span id="cb138-4"><a href="#cb138-4"></a>public slots:</span>
<span id="cb138-5"><a href="#cb138-5"></a>   <span class="dt">void</span> openNewWindow();</span>
<span id="cb138-6"><a href="#cb138-6"></a><span class="co">// ...</span></span>
<span id="cb138-7"><a href="#cb138-7"></a>private:</span>
<span id="cb138-8"><a href="#cb138-8"></a>   NewWindow *mMyNewWindow;</span>
<span id="cb138-9"><a href="#cb138-9"></a><span class="co">// ...</span></span>
<span id="cb138-10"><a href="#cb138-10"></a>}</span></code></pre></div>
<p><strong>MainWindow.cpp</strong></p>
<div class="sourceCode" id="cb139"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb139-1"><a href="#cb139-1"></a><span class="co">// ...</span></span>
<span id="cb139-2"><a href="#cb139-2"></a>   MainWindow::MainWindow()</span>
<span id="cb139-3"><a href="#cb139-3"></a>   {</span>
<span id="cb139-4"><a href="#cb139-4"></a>      <span class="co">// ...</span></span>
<span id="cb139-5"><a href="#cb139-5"></a>      connect(mMyButton, SIGNAL(click()), this, SLOT(openNewWindow()));</span>
<span id="cb139-6"><a href="#cb139-6"></a>      <span class="co">// ...</span></span>
<span id="cb139-7"><a href="#cb139-7"></a>   }</span>
<span id="cb139-8"><a href="#cb139-8"></a><span class="co">// ...</span></span>
<span id="cb139-9"><a href="#cb139-9"></a><span class="dt">void</span> MainWindow::openNewWindow()</span>
<span id="cb139-10"><a href="#cb139-10"></a>{</span>
<span id="cb139-11"><a href="#cb139-11"></a>   mMyNewWindow = new NewWindow(); <span class="co">// Be sure to destroy your window somewhere</span></span>
<span id="cb139-12"><a href="#cb139-12"></a>   mMyNewWindow-&gt;show();</span>
<span id="cb139-13"><a href="#cb139-13"></a>   <span class="co">// ...</span></span>
<span id="cb139-14"><a href="#cb139-14"></a>}</span></code></pre></div>
<p>This is an example on how display a custom new window. There are a lot of ways to do this.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-give-a-delay-in-loop-execution-using-qt-score-98368-in-2015" class="level3">
<h3>39: How to give a delay in loop execution using Qt (score <a href="https://stackoverflow.com/q/3831439.html">98368</a> in 2015)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>In my application I want that when a loop is being executed, each time the control transfers to the loop, each execution must be delayed by a particular time. How can I do this?</p>
</section>
<section id="answer-accepted-score-48" class="level4">
<h4>Answer accepted (score 48)</h4>
<p>
EDIT (removed wrong solution). EDIT (to add this other option):
</p>
<p>Another way to use it would be subclass QThread since it has protected *sleep methods.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb140-1"><a href="#cb140-1"></a>QThread::usleep(<span class="dt">unsigned</span> <span class="dt">long</span> microseconds);</span>
<span id="cb140-2"><a href="#cb140-2"></a>QThread::msleep(<span class="dt">unsigned</span> <span class="dt">long</span> milliseconds);</span>
<span id="cb140-3"><a href="#cb140-3"></a>QThread::sleep(<span class="dt">unsigned</span> <span class="dt">long</span> second);</span></code></pre></div>
<p>Here’s the code to create your own *sleep method.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1"></a><span class="pp">#include </span><span class="im">&lt;QThread&gt;</span><span class="pp">    </span></span>
<span id="cb141-2"><a href="#cb141-2"></a></span>
<span id="cb141-3"><a href="#cb141-3"></a>class Sleeper : public QThread</span>
<span id="cb141-4"><a href="#cb141-4"></a>{</span>
<span id="cb141-5"><a href="#cb141-5"></a>public:</span>
<span id="cb141-6"><a href="#cb141-6"></a>    <span class="dt">static</span> <span class="dt">void</span> usleep(<span class="dt">unsigned</span> <span class="dt">long</span> usecs){QThread::usleep(usecs);}</span>
<span id="cb141-7"><a href="#cb141-7"></a>    <span class="dt">static</span> <span class="dt">void</span> msleep(<span class="dt">unsigned</span> <span class="dt">long</span> msecs){QThread::msleep(msecs);}</span>
<span id="cb141-8"><a href="#cb141-8"></a>    <span class="dt">static</span> <span class="dt">void</span> sleep(<span class="dt">unsigned</span> <span class="dt">long</span> secs){QThread::sleep(secs);}</span>
<span id="cb141-9"><a href="#cb141-9"></a>};</span></code></pre></div>
<p>and you call it by doing this:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb142-1"><a href="#cb142-1"></a>Sleeper::usleep(<span class="dv">10</span>);</span>
<span id="cb142-2"><a href="#cb142-2"></a>Sleeper::msleep(<span class="dv">10</span>);</span>
<span id="cb142-3"><a href="#cb142-3"></a>Sleeper::sleep(<span class="dv">10</span>);</span></code></pre></div>
<p>This would give you a delay of 10 microseconds, 10 milliseconds or 10 seconds, accordingly. If the underlying operating system timers support the resolution.</p>
</section>
<section id="answer-2-score-25" class="level4">
<h4>Answer 2 (score 25)</h4>
<p>As an update of <a href="https://stackoverflow.com/a/3831460/1290438"><span class="citation" data-cites="Live">@Live</span>’s answer</a>, for Qt ≥ 5.2 there is no more need to subclass <code>QThread</code>, as now the sleep functions are public:</p>
<blockquote>
<h5>
Static Public Members
</h2>
<ul>
<li>
<code>QThread *  currentThread()</code>
</li>
<li>
<code>Qt::HANDLE     currentThreadId()</code>
</li>
<li>
<code>int    idealThreadCount()</code>
</li>
<li>
<code>void   msleep(unsigned long msecs)</code>
</li>
<li>
<code>void   sleep(unsigned long secs)</code>
</li>
<li>
<code>void   usleep(unsigned long usecs)</code>
</li>
<li>
<code>void   yieldCurrentThread()</code>
</li>
</ul>
</blockquote>
<p>cf <a href="http://qt-project.org/doc/qt-5/qthread.html#static-public-members" rel="noreferrer">http://qt-project.org/doc/qt-5/qthread.html#static-public-members</a></p>
</section>
<section id="answer-3-score-8-2" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>C++11 has some portable timer stuff. Check out <a href="http://en.cppreference.com/w/cpp/thread/sleep_for" rel="noreferrer"><code>sleep_for.</code></a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-how-do-i-handle-the-event-of-the-user-pressing-the-x-close-button-score-97062-in-2017" class="level3">
<h3>40: Qt: How do I handle the event of the user pressing the ‘X’ (close) button? (score <a href="https://stackoverflow.com/q/17480984.html">97062</a> in 2017)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>I am developing an application using Qt. I don’t know which slot corresponds to the event of “the user clicking the ‘X’(close) button of the window frame” i.e. this button:</p>
<p><img src="https://i.stack.imgur.com/rgFqm.png" alt="Close button of the window"></p>
<p>If there isn’t a slot for this, can anyone suggest me some other method by which I can start a function after the user presses that close button.</p>
</section>
<section id="answer-accepted-score-145" class="level4">
<h4>Answer accepted (score 145)</h4>
<p>If you have a <code>QMainWindow</code> you can override <code>closeEvent</code> method.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb143-1"><a href="#cb143-1"></a><span class="pp">#include </span><span class="im">&lt;QCloseEvent&gt;</span></span>
<span id="cb143-2"><a href="#cb143-2"></a><span class="dt">void</span> MainWindow::closeEvent (QCloseEvent *event)</span>
<span id="cb143-3"><a href="#cb143-3"></a>{</span>
<span id="cb143-4"><a href="#cb143-4"></a>    QMessageBox::StandardButton resBtn = QMessageBox::question( this, APP_NAME,</span>
<span id="cb143-5"><a href="#cb143-5"></a>                                                                tr(<span class="st">&quot;Are you sure?</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb143-6"><a href="#cb143-6"></a>                                                                QMessageBox::Cancel | QMessageBox::No | QMessageBox::Yes,</span>
<span id="cb143-7"><a href="#cb143-7"></a>                                                                QMessageBox::Yes);</span>
<span id="cb143-8"><a href="#cb143-8"></a>    <span class="cf">if</span> (resBtn != QMessageBox::Yes) {</span>
<span id="cb143-9"><a href="#cb143-9"></a>        event-&gt;ignore();</span>
<span id="cb143-10"><a href="#cb143-10"></a>    } <span class="cf">else</span> {</span>
<span id="cb143-11"><a href="#cb143-11"></a>        event-&gt;accept();</span>
<span id="cb143-12"><a href="#cb143-12"></a>    }</span>
<span id="cb143-13"><a href="#cb143-13"></a>}</span></code></pre></div>
<p><br>If you’re subclassing a <code>QDialog</code>, the <code>closeEvent</code> will not be called and so you have to override <code>reject()</code>:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb144-1"><a href="#cb144-1"></a><span class="dt">void</span> MyDialog::reject()</span>
<span id="cb144-2"><a href="#cb144-2"></a>{</span>
<span id="cb144-3"><a href="#cb144-3"></a>    QMessageBox::StandardButton resBtn = QMessageBox::Yes;</span>
<span id="cb144-4"><a href="#cb144-4"></a>    <span class="cf">if</span> (changes) {</span>
<span id="cb144-5"><a href="#cb144-5"></a>        resBtn = QMessageBox::question( this, APP_NAME,</span>
<span id="cb144-6"><a href="#cb144-6"></a>                                        tr(<span class="st">&quot;Are you sure?</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb144-7"><a href="#cb144-7"></a>                                        QMessageBox::Cancel | QMessageBox::No | QMessageBox::Yes,</span>
<span id="cb144-8"><a href="#cb144-8"></a>                                        QMessageBox::Yes);</span>
<span id="cb144-9"><a href="#cb144-9"></a>    }</span>
<span id="cb144-10"><a href="#cb144-10"></a>    <span class="cf">if</span> (resBtn == QMessageBox::Yes) {</span>
<span id="cb144-11"><a href="#cb144-11"></a>        QDialog::reject();</span>
<span id="cb144-12"><a href="#cb144-12"></a>    }</span>
<span id="cb144-13"><a href="#cb144-13"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-15" class="level4">
<h4>Answer 2 (score 15)</h4>
<p>Well, I got it. One way is to override the <a href="http://doc.qt.io/qt-5/qwidget.html#closeEvent" rel="noreferrer"><code>QWidget::closeEvent</code></a><code>(QCloseEvent *event)</code> method in your class definition and add your code into that function. Example:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb145-1"><a href="#cb145-1"></a>class foo : public QMainWindow</span>
<span id="cb145-2"><a href="#cb145-2"></a>{</span>
<span id="cb145-3"><a href="#cb145-3"></a>    Q_OBJECT</span>
<span id="cb145-4"><a href="#cb145-4"></a>private:</span>
<span id="cb145-5"><a href="#cb145-5"></a>    <span class="dt">void</span> closeEvent(QCloseEvent *bar);</span>
<span id="cb145-6"><a href="#cb145-6"></a>    <span class="co">// ...</span></span>
<span id="cb145-7"><a href="#cb145-7"></a>};</span>
<span id="cb145-8"><a href="#cb145-8"></a></span>
<span id="cb145-9"><a href="#cb145-9"></a></span>
<span id="cb145-10"><a href="#cb145-10"></a><span class="dt">void</span> foo::closeEvent(QCloseEvent *bar)</span>
<span id="cb145-11"><a href="#cb145-11"></a>{</span>
<span id="cb145-12"><a href="#cb145-12"></a>    <span class="co">// Do something</span></span>
<span id="cb145-13"><a href="#cb145-13"></a>    bar-&gt;accept();</span>
<span id="cb145-14"><a href="#cb145-14"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-12-2" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>You can attach a SLOT to the</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb146-1"><a href="#cb146-1"></a><span class="dt">void</span> aboutToQuit();</span></code></pre></div>
<p>signal of your QApplication. This signal should be raised just before app closes.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="convert-a-double-to-a-qstring-score-93114-in-2017" class="level3">
<h3>41: Convert a double to a QString (score <a href="https://stackoverflow.com/q/5940846.html">93114</a> in 2017)</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>I am writing a program in QT. I want to convert a <code>double</code> into a <code>Qstring</code> in C++.</p>
</section>
<section id="answer-accepted-score-82" class="level4">
<h4>Answer accepted (score 82)</h4>
<p>Use QString’s number method (docs are <a href="https://doc.qt.io/qt-5/qstring.html#number-2" rel="noreferrer">here</a>):</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb147-1"><a href="#cb147-1"></a><span class="dt">double</span> valueAsDouble = <span class="fl">1.2</span>;</span>
<span id="cb147-2"><a href="#cb147-2"></a>QString valueAsString = QString::number(valueAsDouble);</span></code></pre></div>
</section>
<section id="answer-2-score-16" class="level4">
<h4>Answer 2 (score 16)</h4>
<p>Instead of <code>QString::number()</code> i would use <a href="https://doc.qt.io/qt-5/qlocale.html#toString-6" rel="noreferrer"><code>QLocale::toString()</code></a>, so i can get locale aware group seperatores like german “1.234.567,89”.</p>
</section>
<section id="answer-3-score-8-3" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>You can use arg(), as follow:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb148-1"><a href="#cb148-1"></a><span class="dt">double</span> dbl = <span class="fl">0.25874601</span>;</span>
<span id="cb148-2"><a href="#cb148-2"></a>QString str = QString(<span class="st">&quot;%1&quot;</span>).arg(dbl);</span></code></pre></div>
<p>This overcomes the problem of: “Fixed precision” at the other functions like: setNum() and number(), which will generate random numbers to complete the defined precision</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-change-the-title-of-the-window-in-qt-score-91005-in-2012" class="level3">
<h3>42: How to change the Title of the window in Qt? (score <a href="https://stackoverflow.com/q/10598269.html">91005</a> in 2012)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>How to change the title of the window in Qt? (Both for <code>QDialog</code> and <code>QMainWindow</code>.)</p>
</section>
<section id="answer-accepted-score-102" class="level4">
<h4>Answer accepted (score 102)</h4>
<div class="sourceCode" id="cb149"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb149-1"><a href="#cb149-1"></a><span class="dt">void</span>    QWidget::setWindowTitle ( <span class="dt">const</span> QString &amp; )</span></code></pre></div>
<p>EDIT: <strong>If you are using QtDesigner</strong>, on the property tab, there is an editable property called <strong><em>windowTitle</em></strong> which can be found under the QWidget section. The property tab can usually be found on the lower right part of the designer window.</p>
</section>
<section id="answer-2-score-45-1" class="level4">
<h4>Answer 2 (score 45)</h4>
<p>For new Qt users this is a little more confusing than it seems if you are using QT Designer and <code>.ui</code> files.</p>
<p>Initially I tried to use <code>ui-&amp;gt;setWindowTitle</code>, but that doesn’t exist. <code>ui</code> is not a <code>QDialog</code> or a <code>QMainWindow</code>.</p>
<p>The owner of the <code>ui</code> is the <code>QDialog</code> or <code>QMainWindow</code>, the <code>.ui</code> just describes how to lay it out. In that case, you would use:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb150-1"><a href="#cb150-1"></a>this-&gt;setWindowTitle(<span class="st">&quot;New Title&quot;</span>);</span></code></pre></div>
<p>I hope this helps someone else.</p>
</section>
<section id="answer-3-score-2-2" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>I know this is years later but I ran into the same problem. The solution I found was to change the window title in main.cpp. I guess once the <code>w.show();</code> is called the window title can no longer be changed. In my case I just wanted the title to reflect the current directory and it works.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb151-1"><a href="#cb151-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[]) </span>
<span id="cb151-2"><a href="#cb151-2"></a>{</span>
<span id="cb151-3"><a href="#cb151-3"></a>QApplication a(argc, argv);</span>
<span id="cb151-4"><a href="#cb151-4"></a>MainWindow w;</span>
<span id="cb151-5"><a href="#cb151-5"></a>w.setWindowTitle(QDir::currentPath());</span>
<span id="cb151-6"><a href="#cb151-6"></a>w.show();</span>
<span id="cb151-7"><a href="#cb151-7"></a></span>
<span id="cb151-8"><a href="#cb151-8"></a><span class="cf">return</span> a.exec();</span>
<span id="cb151-9"><a href="#cb151-9"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="cannot-connect-to-x-server-0.0-with-a-qt-application-score-90554-in-2012" class="level3">
<h3>43: Cannot connect to X server :0.0 with a Qt application (score <a href="https://stackoverflow.com/q/646930.html">90554</a> in 2012)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>Compiling on Fedora 10.</p>
<p>I have just started my first qt GUI application. I used all the default settings.</p>
<p>Its just a simple form. It builds OK without any errors. But when I try and run the application. I get the following message:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb152-1"><a href="#cb152-1"></a>Starting /home/rob/projects/qt/test1/test1/test1...</span>
<span id="cb152-2"><a href="#cb152-2"></a>No protocol specified</span>
<span id="cb152-3"><a href="#cb152-3"></a>test1: cannot connect to X server :<span class="fl">0.0</span></span></code></pre></div>
<p>Thanks for any advice,</p>
</section>
<section id="answer-accepted-score-41" class="level4">
<h4>Answer accepted (score 41)</h4>
<p>The general causes for this are as follows:</p>
<ol>
<li>
<p>
DISPLAY not set in the environment.<br> <strong>Solution</strong>:
</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb153-1"><a href="#cb153-1"></a>export DISPLAY=:<span class="fl">0.0</span></span>
<span id="cb153-2"><a href="#cb153-2"></a>./myQtCmdHere</span></code></pre></div>
( This one doesn’t appear to be the one at fault though, as its saying which X display its trying to connect to. Also, its not always 0.0, but most of the time it is )
</li>
<li>
<p>
Non-Authorised User trying to run the X Application<br> <strong>Solution</strong> ( as X owning user, ie: yourself )
</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb154-1"><a href="#cb154-1"></a>xhost +local:root   # where root is the local user you want to grant access to. </span>
<span id="cb154-2"><a href="#cb154-2"></a>```&lt;/li&gt;</span>
<span id="cb154-3"><a href="#cb154-3"></a>&lt;/ol&gt;</span>
<span id="cb154-4"><a href="#cb154-4"></a></span>
<span id="cb154-5"><a href="#cb154-5"></a><span class="er">#### Answer 2 (score 5)</span></span>
<span id="cb154-6"><a href="#cb154-6"></a>Also, <span class="cf">if</span> you&#39;d like your X server to be able to receive connection over TCP, these days you must almost always explicitly enable this. To test whether you&#39;re server is allowing remote TCP connections try:  </span>
<span id="cb154-7"><a href="#cb154-7"></a></span>
<span id="cb154-8"><a href="#cb154-8"></a>telnet <span class="fl">127.0</span><span class="er">.0</span><span class="fl">.1</span> <span class="dv">6000</span>  </span>
<span id="cb154-9"><a href="#cb154-9"></a></span>
<span id="cb154-10"><a href="#cb154-10"></a>If telnet is able to connect, then your X server is listening. If it can&#39;t, then neither will any remote X application and you need to enable remote TCP connections on your server.  </span>
<span id="cb154-11"><a href="#cb154-11"></a></span>
<span id="cb154-12"><a href="#cb154-12"></a><span class="er">#### Answer 3 (score 2)</span></span>
<span id="cb154-13"><a href="#cb154-13"></a>&lt;p&gt;Adding to above answers. </span>
<span id="cb154-14"><a href="#cb154-14"></a>I was in a similar situation <span class="cf">while</span> running tests <span class="cf">for</span> &lt;a href=<span class="st">&quot;https://github.com/tushar-rishav/code2pdf&quot;</span> rel=<span class="st">&quot;nofollow&quot;</span>&gt;Code2Pdf&lt;/a&gt; at travis.</span>
<span id="cb154-15"><a href="#cb154-15"></a>I solved the problem using &lt;a href=<span class="st">&quot;http://manpages.ubuntu.com/manpages/lucid/man1/xvfb-run.1.html&quot;</span> rel=<span class="st">&quot;nofollow&quot;</span>&gt;xvfb-run&lt;/a&gt;. Quoting from the manpage,&lt;/p&gt;</span>
<span id="cb154-16"><a href="#cb154-16"></a></span>
<span id="cb154-17"><a href="#cb154-17"></a>&lt;blockquote&gt;</span>
<span id="cb154-18"><a href="#cb154-18"></a>  xvfb-run is a wrapper <span class="cf">for</span> the Xvfb(<span class="dv">1</span><span class="er">x</span>)  command  which  simplifies the task of running commands (typically an X client, or a script containing a list of clients to be run) within a virtual X server environment.  </span>
<span id="cb154-19"><a href="#cb154-19"></a>&lt;/blockquote&gt;</span>
<span id="cb154-20"><a href="#cb154-20"></a></span>
<span id="cb154-21"><a href="#cb154-21"></a>The script that I wrote was:  </span>
<span id="cb154-22"><a href="#cb154-22"></a></span>
<span id="cb154-23"><a href="#cb154-23"></a>```c</span>
<span id="cb154-24"><a href="#cb154-24"></a>check_install_xvfb() { # check and install xvfb</span>
<span id="cb154-25"><a href="#cb154-25"></a>    <span class="cf">if</span> hash xvfb-run <span class="dv">2</span>&gt;/dev/null; then</span>
<span id="cb154-26"><a href="#cb154-26"></a>        :</span>
<span id="cb154-27"><a href="#cb154-27"></a>    <span class="cf">else</span></span>
<span id="cb154-28"><a href="#cb154-28"></a>        sudo apt-get update</span>
<span id="cb154-29"><a href="#cb154-29"></a>        sudo apt-get upgrade</span>
<span id="cb154-30"><a href="#cb154-30"></a>        sudo apt-get install xvfb</span>
<span id="cb154-31"><a href="#cb154-31"></a>    fi</span>
<span id="cb154-32"><a href="#cb154-32"></a>}</span>
<span id="cb154-33"><a href="#cb154-33"></a>check_install_xvfb</span>
<span id="cb154-34"><a href="#cb154-34"></a>export DISPLAY=localhost:<span class="fl">1.0</span></span>
<span id="cb154-35"><a href="#cb154-35"></a>xvfb-run -a bash .misc/tests.sh</span>
<span id="cb154-36"><a href="#cb154-36"></a><span class="er"># .misc/tests.sh is script that runs unit tests. You can replace it with something suitable to you.</span></span></code></pre></div>
<blockquote>
Please bear with my bash code style. I am a noob bash programmer.
</blockquote>
<p>
Running the above script helped me. You can see the <a href="https://travis-ci.org/tushar-rishav/code2pdf/builds/120957939" rel="nofollow">failing build</a> and <a href="https://travis-ci.org/tushar-rishav/code2pdf/builds/120988164" rel="nofollow">passing build</a>.
</p>
<p>Hope it helps</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="for-loop-vs-qts-foreach-in-c-score-89778-in-2013" class="level3">
<h3>44: ‘for’ loop vs Qt’s ‘foreach’ in C++ (score <a href="https://stackoverflow.com/q/771008.html">89778</a> in 2013)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>Which is better (or faster), a C++ <code>for</code> loop or the <code>foreach</code> operator provided by Qt? For example, the following condition</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb155-1"><a href="#cb155-1"></a>QList&lt;QString&gt; listofstrings;</span></code></pre></div>
<p>Which is better?</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb156-1"><a href="#cb156-1"></a>foreach(QString str, listofstrings)</span>
<span id="cb156-2"><a href="#cb156-2"></a>{</span>
<span id="cb156-3"><a href="#cb156-3"></a>    <span class="co">//code</span></span>
<span id="cb156-4"><a href="#cb156-4"></a>}</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb157-1"><a href="#cb157-1"></a><span class="dt">int</span> count = listofstrings.count();</span>
<span id="cb157-2"><a href="#cb157-2"></a>QString str = QString();</span>
<span id="cb157-3"><a href="#cb157-3"></a><span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;count;i++)</span>
<span id="cb157-4"><a href="#cb157-4"></a>{</span>
<span id="cb157-5"><a href="#cb157-5"></a>    str = listofstrings.at(i);</span>
<span id="cb157-6"><a href="#cb157-6"></a>    <span class="co">//Code</span></span>
<span id="cb157-7"><a href="#cb157-7"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-148" class="level4">
<h4>Answer accepted (score 148)</h4>
<p>It really doesn’t matter in most cases.</p>
<p>The large number of questions on StackOverflow regarding whether this method or that method is faster, belie the fact that, in the vast majority of cases, code spends most of its time sitting around waiting for users to do something.</p>
<p>If you <em>are</em> really concerned, profile it for yourself and act on what you find.</p>
<p>But I think you’ll most likely find that only in the most intense data-processing-heavy work does this question matter. The difference may well be only a couple of seconds and even then, only when processing huge numbers of elements.</p>
<p>Get your code working <em>first</em>. Then get it working <em>fast</em> (and only if you find an actual performance issue).</p>
<p>Time spent optimising before you’ve finished the functionality and can properly profile, is mostly wasted time.</p>
</section>
<section id="answer-2-score-23" class="level4">
<h4>Answer 2 (score 23)</h4>
<p>First off, I’d just like to say I agree with Pax, and that the speed probably doesn’t enter into it. foreach wins hands down based on readability, and that’s enough in 98% of cases.</p>
<p>
But of course the Qt guys have looked into it and actually done some profiling: <a href="http://blog.qt.io/blog/2009/01/23/iterating-efficiently/" rel="noreferrer">http://blog.qt.io/blog/2009/01/23/iterating-efficiently/</a>
</p>
<p>The main lesson to take away from that is: use const references in read only loops as it avoids the creation of temporary instances. It also make the purpose of the loop more explicit, regardless of the looping method you use.</p>
</section>
<section id="answer-3-score-14" class="level4">
<h4>Answer 3 (score 14)</h4>
<p><strong>It really doesn’t matter</strong>. Odds are if your program is slow, this isn’t the problem. However, it should be noted that you aren’t make a completely equal comparison. Qt’s <code>foreach</code> is more similar to this (this example will use <code>QList&amp;lt;QString&amp;gt;</code>):</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb158-1"><a href="#cb158-1"></a><span class="cf">for</span>(QList&lt;QString&gt;::iterator it = Con.begin(); it != Con.end(); ++it) {</span>
<span id="cb158-2"><a href="#cb158-2"></a>    QString &amp;str = *it;</span>
<span id="cb158-3"><a href="#cb158-3"></a>    <span class="co">// your code here</span></span>
<span id="cb158-4"><a href="#cb158-4"></a>}</span></code></pre></div>
<p>The macro is able to do this by using some compiler extensions (like GCC’s <code>__typeof__</code>) to get the type of the container passed. Also imagine that boost’s <code>BOOST_FOREACH</code> is very similar in concept.</p>
<p>The reason why your example isn’t fair is that your non-Qt version is adding extra work.</p>
<p>You are indexing instead of really iterating. If you are using a type with non-contiguous allocation (I suspect this might be the case with <code>QList&amp;lt;&amp;gt;</code>), then indexing will be more expensive since the code has to calculate “where” the n-th item is.</p>
<p>That being said. It <strong>still</strong> doesn’t matter. The timing difference between those two pieces of code will be negligible if existent at all. Don’t waste your time worrying about it. Write whichever you find more clear and understandable.</p>
<p><strong>EDIT:</strong> As a bonus, currently I strongly favor the C++11 version of container iteration, it is clean, concise and simple:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb159-1"><a href="#cb159-1"></a><span class="cf">for</span>(QString &amp;s : Con) {</span>
<span id="cb159-2"><a href="#cb159-2"></a>    <span class="co">// you code here</span></span>
<span id="cb159-3"><a href="#cb159-3"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-link-opencv-in-qtcreator-and-use-qt-library-score-89274-in-2013" class="level3">
<h3>45: How to link opencv in QtCreator and use Qt library (score <a href="https://stackoverflow.com/q/15881913.html">89274</a> in 2013)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>
This question must be duplicate many times, but it just doesn’t work and sometimes it still remains unanswered. Sources of information are mainly these<br> <a href="http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml">http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml</a><br> <a href="http://www.youtube.com/watch?v=dgcXYQijV6c">http://www.youtube.com/watch?v=dgcXYQijV6c</a><br>
</p>
<p>This is the summation of what I think one should/can do. (And now it works for me.) Hopefully I mentioned everything from the very beginning, the aim is to write a very clear tutorial.<br></p>
<p><strong>Installation of OpenCV for QtCreator</strong><br></p>
<ol>
<li>
I have already MS Visual Studio 2010 Professional installed. (I have a free licence as a student) - I think this is not necessary, just a mention
</li>
<li>
<strong>Download:</strong> Qt 5.0.1 for Windows 32-bit (MinGW 4.7, 823 MB)<br> 2.1 <strong>Install:</strong> Warning, everything that Qt uses (e.g. OpenCV) must be in directories that don’t contain white-spaces in their names. - i.e. “Program Files” is wrong. (But I don’t want different program files to accumulate directly on C, so I’ve only made a folder “Programs” in which everything important is installed)
</li>
<li>
<strong>Download:</strong> cmake-2.8.10.2-win32-x86.exe - Install for all users (this can be in Program Files)
</li>
<li>
<strong>Download:</strong> OpenCV-2.4.0.exe, extract to: <i>C:</i> - it’ll create a dir “opencv”; add another folder “opencv_bin”. Now it looks like this:<br> <i>C:</i><br> <i>C:_bin</i>
</li>
<li>
<strong>Set PATH environment variable</strong>, so that there be a link to MinGW compiler. e.g. <i>C:.1;</i>
</li>
<li>
<strong>Start cmake-gui.exe</strong><br> 6.1 <strong>source code:</strong> set the default dir for OpenCV; <i>C:</i><br> 6.2 <strong>binaries:</strong> set the opencv_bin dir; C:_bin<br> 6.3 <strong>click configure:</strong>
<ul>
<li>
Choose <strong>MinGW Makefiles</strong> and <strong>Specify native compilers</strong>, click next
</li>
<li>
Field C is for gcc.exe; <i>C:/Programs/Qt/Qt5.0.1/Tools/MinGW/bin/gcc.exe</i>
</li>
<li>
Field C++ is for g++.exe; <i>C:/Programs/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe</i>
</li>
Field fortran can be empty, click finish
</ul>
6.4 <strong>Many red lines will appear</strong> To the search field enter one by one: WITH_QT, WITH_TBB, WITH_IPP, WITH_CUDA, CMAKE_BUILD_TYPE
<ul>
<li>
WITH_QT - must be selected.
</li>
<li>
WITH_TBB, WITH_IPP, WITH_CUDA - must be unselected
</li>
<li>
CMAKE_BUILD_TYPE - click and enter a text “Debug” (without quotes).
</li>
Clear the text from the Search field.
</ul>
6.5 <strong>click configure</strong> and keep clicking configure until all red lines are gone, then <strong>click generate</strong> and <strong>close</strong> <em>cmake-gui.exe</em>
</li>
<li>
Go to the <strong><em>terminal (~command prompt)</em></strong>, cd to the directory where are the builds <i>(opencv_bin)</i> and type <strong><em>mingw32-make</em></strong><br>
</li>
<li>
When the process ends after a long time, type <strong>mingw32-make install</strong><br>
</li>
<li>
Add into Path variable the path to the QtCreator/bin<i> C:.1</i>
</li>
</ol>
<p>Now I have created a new console app in QtCreator.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb160-1"><a href="#cb160-1"></a><span class="co">//cvHello.pro</span></span>
<span id="cb160-2"><a href="#cb160-2"></a>QT       += core</span>
<span id="cb160-3"><a href="#cb160-3"></a>QT       -= gui</span>
<span id="cb160-4"><a href="#cb160-4"></a></span>
<span id="cb160-5"><a href="#cb160-5"></a>TARGET = cvHello</span>
<span id="cb160-6"><a href="#cb160-6"></a>CONFIG   += console</span>
<span id="cb160-7"><a href="#cb160-7"></a>CONFIG   -= app_bundle</span>
<span id="cb160-8"><a href="#cb160-8"></a></span>
<span id="cb160-9"><a href="#cb160-9"></a>TEMPLATE = app</span>
<span id="cb160-10"><a href="#cb160-10"></a>INCLUDEPATH += C:/Programs/opencv24/opencv_bin2/install/include</span>
<span id="cb160-11"><a href="#cb160-11"></a>LIBS += <span class="st">&quot;C:/Programs/opencv24/opencv_bin2/bin/*.dll&quot;</span></span>
<span id="cb160-12"><a href="#cb160-12"></a></span>
<span id="cb160-13"><a href="#cb160-13"></a>SOURCES += main.cpp</span>
<span id="cb160-14"><a href="#cb160-14"></a>OTHER_FILES += \</span>
<span id="cb160-15"><a href="#cb160-15"></a>    img.JPG</span></code></pre></div>
<p>And the main file:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb161-1"><a href="#cb161-1"></a><span class="co">//main.cpp</span></span>
<span id="cb161-2"><a href="#cb161-2"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb161-3"><a href="#cb161-3"></a><span class="pp">#include </span><span class="im">&quot;opencv2/core/core.hpp&quot;</span></span>
<span id="cb161-4"><a href="#cb161-4"></a><span class="pp">#include </span><span class="im">&quot;opencv2/highgui/highgui.hpp&quot;</span></span>
<span id="cb161-5"><a href="#cb161-5"></a><span class="pp">#include </span><span class="im">&quot;opencv/cv.h&quot;</span></span>
<span id="cb161-6"><a href="#cb161-6"></a></span>
<span id="cb161-7"><a href="#cb161-7"></a>using namespace std;</span>
<span id="cb161-8"><a href="#cb161-8"></a></span>
<span id="cb161-9"><a href="#cb161-9"></a><span class="dt">int</span> main()</span>
<span id="cb161-10"><a href="#cb161-10"></a>{</span>
<span id="cb161-11"><a href="#cb161-11"></a>    cout &lt;&lt; <span class="st">&quot;Hello World!&quot;</span> &lt;&lt; endl;</span>
<span id="cb161-12"><a href="#cb161-12"></a></span>
<span id="cb161-13"><a href="#cb161-13"></a>    cv::Mat mat;</span>
<span id="cb161-14"><a href="#cb161-14"></a>    mat = cv::imread(<span class="st">&quot;img.JPG&quot;</span>);</span>
<span id="cb161-15"><a href="#cb161-15"></a>    cvNamedWindow(<span class="st">&quot;hello&quot;</span>);</span>
<span id="cb161-16"><a href="#cb161-16"></a>    cv::imshow(<span class="st">&quot;hello&quot;</span>,mat);</span>
<span id="cb161-17"><a href="#cb161-17"></a></span>
<span id="cb161-18"><a href="#cb161-18"></a>    cvWaitKey(<span class="dv">0</span>);</span>
<span id="cb161-19"><a href="#cb161-19"></a></span>
<span id="cb161-20"><a href="#cb161-20"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb161-21"><a href="#cb161-21"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-13" class="level4">
<h4>Answer accepted (score 13)</h4>
<p>Finally I am starting to be happy. When adjusting this question I had to try all ways, how to define LIBS. Listing them manually helped, at first I wrote them somehow wrongly.</p>
<p>This is how it works finally:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb162-1"><a href="#cb162-1"></a>LIBS += -LC:\\Programs\\opencv24\\opencv_bin2\\bin \</span>
<span id="cb162-2"><a href="#cb162-2"></a>    libopencv_core240d \</span>
<span id="cb162-3"><a href="#cb162-3"></a>    libopencv_highgui240d \</span>
<span id="cb162-4"><a href="#cb162-4"></a>    libopencv_imgproc240d \</span>
<span id="cb162-5"><a href="#cb162-5"></a>    libopencv_features2d240d \</span>
<span id="cb162-6"><a href="#cb162-6"></a>    libopencv_calib3d240d \</span></code></pre></div>
<p>Btw if I’ve made any grammar mistakes, I am sorry for my english. :)</p>
</section>
<section id="answer-2-score-2" class="level4">
<h4>Answer 2 (score 2)</h4>
<p>The originally accepted answer did not work for me, I am running MSVC2013 Professional and QT5.9. I found SIMPLE and SUREFIRE CROSS-PLATFORM solution that should help anyone who is trying to link an external library (like openCV) with QT.</p>
<p>The steps listed below are found in the Qt5 documentation: <a href="http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html" rel="nofollow noreferrer">http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html</a> under the “To Add Library” section.</p>
<ol>
<li>
Right click on the project file located in the ‘project pane’ on the left side of the creator… and select “Add Library…”
</li>
<li>
Follow the instructions of the wizard
</li>
</ol>
<p>Let me add some specificity from here:</p>
<ol start="3">
<li>
Select “External Library”
</li>
<li>
For the “Library File” navigate to your opencv_worldXXX.lib file (or opencv_worldXXXd.lib file, you will notice that by specifying only one or the other the wizard has a checkbox which includes the other automatically) <strong>[ex. …_world310.lib]</strong>
</li>
<li>
For the “Include Folder” navigate to the “include” folder within the build. <strong>[ex. …
]</strong>
</li>
<li>
Select your operating system, dynamic/static library (whichever is appropriate)
</li>
<li>
Hit NEXT, CLEAN UP, and RUN!
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qbytearray-to-qstring-score-87770-in-2017" class="level3">
<h3>46: QByteArray to QString (score <a href="https://stackoverflow.com/q/14131127.html">87770</a> in 2017)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>I’m having issues with <code>QByteArray</code> and <code>QString</code>.</p>
<p>I’m reading a file and stores its information in a <code>QByteArray</code>. The file is in unicode, so it contains something like: <code>t\0 e\0 s\0 t\0 \0 \0</code></p>
<p>I’m trying to compare this value to my specified value, but it fails, because in the debugger I see it’s not an unicode string.</p>
<p>The code will explain everything:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb163-1"><a href="#cb163-1"></a>QByteArray Data; <span class="co">//contains unicode string &quot;t\0 e\0 s\0 t\0 \0 \0&quot;</span></span>
<span id="cb163-2"><a href="#cb163-2"></a>QString myValue = <span class="st">&quot;test&quot;</span>; <span class="co">//value to compare.</span></span>
<span id="cb163-3"><a href="#cb163-3"></a><span class="cf">if</span>(Data.contains(myValue))</span>
<span id="cb163-4"><a href="#cb163-4"></a>    <span class="co">//do some stuff.</span></span>
<span id="cb163-5"><a href="#cb163-5"></a><span class="cf">else</span></span>
<span id="cb163-6"><a href="#cb163-6"></a>    <span class="co">//do other stuff.</span></span></code></pre></div>
<p>In the debugger, it shows me that the variable <code>Data</code> has the value <code>"t\0 e\0 s\0 t\0 \0 \0"</code> and <code>myValue</code> has the value <code>"test"</code>. How can I fix it?</p>
</section>
<section id="answer-accepted-score-26" class="level4">
<h4>Answer accepted (score 26)</h4>
<p>You can use <a href="http://doc.qt.io/qt-5/qtextcodec.html#codecForMib">QTextCodec</a> to convert the bytearray to a string:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb164-1"><a href="#cb164-1"></a>QString DataAsString = QTextCodec::codecForMib(<span class="dv">1015</span>)-&gt;toUnicode(Data);</span></code></pre></div>
<p>(1015 is UTF-16, 1014 UTF-16LE, 1013 UTF-16BE, 106 UTF-8)</p>
<p>From your example we can see that the string <code>"test"</code> is encoded as <code>"t\0 e\0 s\0 t\0 \0 \0"</code> in your encoding, i.e. every ascii character is followed by a <code>\0</code>-byte, or resp. every ascii character is encoded as 2 bytes. The only unicode encoding in which ascii letters are encoded in this way, are UTF-16 or UCS-2 (which is a restricted version of UTF-16), so in your case the 1015 mib is needed (assuming your local endianess is the same as the input endianess).</p>
</section>
<section id="answer-2-score-14" class="level4">
<h4>Answer 2 (score 14)</h4>
<p>you can use <code>QString::fromAscii()</code></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb165-1"><a href="#cb165-1"></a>QByteArray data = entity-&gt;getData();</span>
<span id="cb165-2"><a href="#cb165-2"></a>QString s_data = QString::fromAscii(data.data());</span></code></pre></div>
<p>with <code>data()</code> returning a <code>char*</code></p>
<p>for QT5, you should use <code>fromCString()</code> instead, as <code>fromAscii()</code> is deprecated, see <strike><a href="https://bugreports.qt-project.org/browse/QTBUG-21872" rel="noreferrer">https://bugreports.qt-project.org/browse/QTBUG-21872</a></strike> <a href="https://bugreports.qt.io/browse/QTBUG-21872" rel="noreferrer">https://bugreports.qt.io/browse/QTBUG-21872</a></p>
</section>
<section id="answer-3-score-11-1" class="level4">
<h4>Answer 3 (score 11)</h4>
<p>You can use:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb166-1"><a href="#cb166-1"></a>QString::fromStdString(byteArray.toStdString())</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="read-a-text-file-line-by-line-in-qt-score-86068-in-2015" class="level3">
<h3>47: Read a text file line by line in Qt (score <a href="https://stackoverflow.com/q/5444959.html">86068</a> in 2015)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>How can I read a text file line by line in Qt?</p>
<p>I’m looking for the Qt equivalent to:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb167-1"><a href="#cb167-1"></a>std::ifstream infile;</span>
<span id="cb167-2"><a href="#cb167-2"></a>std::string line;</span>
<span id="cb167-3"><a href="#cb167-3"></a><span class="cf">while</span> (std::getline(infile, line))</span>
<span id="cb167-4"><a href="#cb167-4"></a>{</span>
<span id="cb167-5"><a href="#cb167-5"></a>   ...</span>
<span id="cb167-6"><a href="#cb167-6"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-85" class="level4">
<h4>Answer accepted (score 85)</h4>
<p>Use this code:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb168-1"><a href="#cb168-1"></a>QFile inputFile(fileName);</span>
<span id="cb168-2"><a href="#cb168-2"></a><span class="cf">if</span> (inputFile.open(QIODevice::ReadOnly))</span>
<span id="cb168-3"><a href="#cb168-3"></a>{</span>
<span id="cb168-4"><a href="#cb168-4"></a>   QTextStream in(&amp;inputFile);</span>
<span id="cb168-5"><a href="#cb168-5"></a>   <span class="cf">while</span> (!in.atEnd())</span>
<span id="cb168-6"><a href="#cb168-6"></a>   {</span>
<span id="cb168-7"><a href="#cb168-7"></a>      QString line = in.readLine();</span>
<span id="cb168-8"><a href="#cb168-8"></a>      ...</span>
<span id="cb168-9"><a href="#cb168-9"></a>   }</span>
<span id="cb168-10"><a href="#cb168-10"></a>   inputFile.close();</span>
<span id="cb168-11"><a href="#cb168-11"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-3" class="level4">
<h4>Answer 2 (score 3)</h4>
<div class="sourceCode" id="cb169"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb169-1"><a href="#cb169-1"></a>QFile inputFile(QString(<span class="st">&quot;/path/to/file&quot;</span>));</span>
<span id="cb169-2"><a href="#cb169-2"></a>inputFile.open(QIODevice::ReadOnly);</span>
<span id="cb169-3"><a href="#cb169-3"></a><span class="cf">if</span> (!inputFile.isOpen())</span>
<span id="cb169-4"><a href="#cb169-4"></a>    <span class="cf">return</span>;</span>
<span id="cb169-5"><a href="#cb169-5"></a></span>
<span id="cb169-6"><a href="#cb169-6"></a>QTextStream stream(&amp;inputFile);</span>
<span id="cb169-7"><a href="#cb169-7"></a>QString line = stream.readLine();</span>
<span id="cb169-8"><a href="#cb169-8"></a><span class="cf">while</span> (!line.isNull()) {</span>
<span id="cb169-9"><a href="#cb169-9"></a>    <span class="co">/* process information */</span></span>
<span id="cb169-10"><a href="#cb169-10"></a></span>
<span id="cb169-11"><a href="#cb169-11"></a>    line = stream.readLine();</span>
<span id="cb169-12"><a href="#cb169-12"></a>};</span></code></pre></div>
</section>
<section id="answer-3-score-1" class="level4">
<h4>Answer 3 (score 1)</h4>
<p>Since Qt 5.5 you can use <code>QTextStream::readLineInto</code>. It behaves similar to <code>std::getline</code> and is maybe faster as <code>QTextStream::readLine</code>, because it reuses the string:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb170-1"><a href="#cb170-1"></a>QIODevice* device;</span>
<span id="cb170-2"><a href="#cb170-2"></a>QTextStream in(&amp;device);</span>
<span id="cb170-3"><a href="#cb170-3"></a></span>
<span id="cb170-4"><a href="#cb170-4"></a>QString line;</span>
<span id="cb170-5"><a href="#cb170-5"></a><span class="cf">while</span> (in.readLineInto(&amp;line)) {</span>
<span id="cb170-6"><a href="#cb170-6"></a>  <span class="co">// ...</span></span>
<span id="cb170-7"><a href="#cb170-7"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-use-qtimer-score-85340-in-2014" class="level3">
<h3>48: How to use QTimer (score <a href="https://stackoverflow.com/q/11651852.html">85340</a> in 2014)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<p>In Qt I’m trying to set a <code>QTimer</code> that calls a function called “update” every second. Here is my .cpp file:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb171-1"><a href="#cb171-1"></a><span class="pp">#include </span><span class="im">&quot;mainwindow.h&quot;</span></span>
<span id="cb171-2"><a href="#cb171-2"></a><span class="pp">#include </span><span class="im">&quot;ui_mainwindow.h&quot;</span></span>
<span id="cb171-3"><a href="#cb171-3"></a><span class="pp">#include </span><span class="im">&lt;QTimer&gt;</span></span>
<span id="cb171-4"><a href="#cb171-4"></a><span class="pp">#include </span><span class="im">&quot;QDebug&quot;</span></span>
<span id="cb171-5"><a href="#cb171-5"></a></span>
<span id="cb171-6"><a href="#cb171-6"></a>MainWindow::MainWindow(QWidget *parent) :</span>
<span id="cb171-7"><a href="#cb171-7"></a>    QMainWindow(parent),</span>
<span id="cb171-8"><a href="#cb171-8"></a>    ui(new Ui::MainWindow)</span>
<span id="cb171-9"><a href="#cb171-9"></a>{</span>
<span id="cb171-10"><a href="#cb171-10"></a>    ui-&gt;setupUi(this);</span>
<span id="cb171-11"><a href="#cb171-11"></a></span>
<span id="cb171-12"><a href="#cb171-12"></a>    QTimer *timer = new QTimer(this);</span>
<span id="cb171-13"><a href="#cb171-13"></a>    connect(timer, SIGNAL(timeout()), this, SLOT(update()));</span>
<span id="cb171-14"><a href="#cb171-14"></a>    timer-&gt;start(<span class="dv">1000</span>);</span>
<span id="cb171-15"><a href="#cb171-15"></a>}</span>
<span id="cb171-16"><a href="#cb171-16"></a></span>
<span id="cb171-17"><a href="#cb171-17"></a>MainWindow::~MainWindow()</span>
<span id="cb171-18"><a href="#cb171-18"></a>{</span>
<span id="cb171-19"><a href="#cb171-19"></a>    delete ui;</span>
<span id="cb171-20"><a href="#cb171-20"></a>}</span>
<span id="cb171-21"><a href="#cb171-21"></a></span>
<span id="cb171-22"><a href="#cb171-22"></a><span class="dt">void</span> MainWindow::update()</span>
<span id="cb171-23"><a href="#cb171-23"></a>{</span>
<span id="cb171-24"><a href="#cb171-24"></a>    qDebug() &lt;&lt; <span class="st">&quot;update&quot;</span>;</span>
<span id="cb171-25"><a href="#cb171-25"></a>}</span></code></pre></div>
<p>and the main:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb172-1"><a href="#cb172-1"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QApplication&gt;</span></span>
<span id="cb172-2"><a href="#cb172-2"></a><span class="pp">#include </span><span class="im">&quot;mainwindow.h&quot;</span></span>
<span id="cb172-3"><a href="#cb172-3"></a></span>
<span id="cb172-4"><a href="#cb172-4"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb172-5"><a href="#cb172-5"></a>{</span>
<span id="cb172-6"><a href="#cb172-6"></a>    QApplication a(argc, argv);</span>
<span id="cb172-7"><a href="#cb172-7"></a>    MainWindow w;</span>
<span id="cb172-8"><a href="#cb172-8"></a>    w.show();</span>
<span id="cb172-9"><a href="#cb172-9"></a></span>
<span id="cb172-10"><a href="#cb172-10"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb172-11"><a href="#cb172-11"></a>}</span></code></pre></div>
<p>The project is being build, but it doesn’t execute update, since the line “update” is not showing anywhere… Does anybody see what I´m doing wrong?</p>
</section>
<section id="answer-accepted-score-12-1" class="level4">
<h4>Answer accepted (score 12)</h4>
<ol>
<li>
<p>
It’s good practice to give a parent to your <code>QTimer</code> to use Qt’s memory management system.
</p>
</li>
<li>
<p>
<code>update()</code> is a <em>QWidget</em> function - is that what you are trying to call or not? <a href="http://qt-project.org/doc/qt-4.8/qwidget.html#update" rel="nofollow noreferrer">http://qt-project.org/doc/qt-4.8/qwidget.html#update</a>.
</p>
</li>
<li>
<p>
If number 2 does not apply, make sure that the function you are trying to trigger is declared as a slot in the header.
</p>
</li>
<li>
<p>
Finally if none of these are your issue, it would be helpful to know if you are getting any run-time connect errors.
</p>
</li>
</ol>
</section>
<section id="answer-2-score-15-1" class="level4">
<h4>Answer 2 (score 15)</h4>
<p>Other way is using of built-in method start timer &amp; event TimerEvent.</p>
<p>Header:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb173-1"><a href="#cb173-1"></a><span class="pp">#ifndef MAINWINDOW_H</span></span>
<span id="cb173-2"><a href="#cb173-2"></a><span class="pp">#define MAINWINDOW_H</span></span>
<span id="cb173-3"><a href="#cb173-3"></a></span>
<span id="cb173-4"><a href="#cb173-4"></a><span class="pp">#include </span><span class="im">&lt;QMainWindow&gt;</span></span>
<span id="cb173-5"><a href="#cb173-5"></a></span>
<span id="cb173-6"><a href="#cb173-6"></a>namespace Ui {</span>
<span id="cb173-7"><a href="#cb173-7"></a>class MainWindow;</span>
<span id="cb173-8"><a href="#cb173-8"></a>}</span>
<span id="cb173-9"><a href="#cb173-9"></a></span>
<span id="cb173-10"><a href="#cb173-10"></a>class MainWindow : public QMainWindow</span>
<span id="cb173-11"><a href="#cb173-11"></a>{</span>
<span id="cb173-12"><a href="#cb173-12"></a>    Q_OBJECT</span>
<span id="cb173-13"><a href="#cb173-13"></a></span>
<span id="cb173-14"><a href="#cb173-14"></a>public:</span>
<span id="cb173-15"><a href="#cb173-15"></a>    explicit MainWindow(QWidget *parent = <span class="dv">0</span>);</span>
<span id="cb173-16"><a href="#cb173-16"></a>    ~MainWindow();</span>
<span id="cb173-17"><a href="#cb173-17"></a></span>
<span id="cb173-18"><a href="#cb173-18"></a>private:</span>
<span id="cb173-19"><a href="#cb173-19"></a>    Ui::MainWindow *ui;</span>
<span id="cb173-20"><a href="#cb173-20"></a>    <span class="dt">int</span> timerId;</span>
<span id="cb173-21"><a href="#cb173-21"></a></span>
<span id="cb173-22"><a href="#cb173-22"></a>protected:</span>
<span id="cb173-23"><a href="#cb173-23"></a>    <span class="dt">void</span> timerEvent(QTimerEvent *event);</span>
<span id="cb173-24"><a href="#cb173-24"></a>};</span>
<span id="cb173-25"><a href="#cb173-25"></a></span>
<span id="cb173-26"><a href="#cb173-26"></a><span class="pp">#endif </span><span class="co">// MAINWINDOW_H</span></span></code></pre></div>
<p>Source:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb174-1"><a href="#cb174-1"></a><span class="pp">#include </span><span class="im">&quot;mainwindow.h&quot;</span></span>
<span id="cb174-2"><a href="#cb174-2"></a><span class="pp">#include </span><span class="im">&quot;ui_mainwindow.h&quot;</span></span>
<span id="cb174-3"><a href="#cb174-3"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb174-4"><a href="#cb174-4"></a></span>
<span id="cb174-5"><a href="#cb174-5"></a>MainWindow::MainWindow(QWidget *parent) :</span>
<span id="cb174-6"><a href="#cb174-6"></a>    QMainWindow(parent),</span>
<span id="cb174-7"><a href="#cb174-7"></a>    ui(new Ui::MainWindow)</span>
<span id="cb174-8"><a href="#cb174-8"></a>{</span>
<span id="cb174-9"><a href="#cb174-9"></a>    ui-&gt;setupUi(this);</span>
<span id="cb174-10"><a href="#cb174-10"></a></span>
<span id="cb174-11"><a href="#cb174-11"></a>    timerId = startTimer(<span class="dv">1000</span>);</span>
<span id="cb174-12"><a href="#cb174-12"></a>}</span>
<span id="cb174-13"><a href="#cb174-13"></a></span>
<span id="cb174-14"><a href="#cb174-14"></a>MainWindow::~MainWindow()</span>
<span id="cb174-15"><a href="#cb174-15"></a>{</span>
<span id="cb174-16"><a href="#cb174-16"></a>    killTimer(timerId);</span>
<span id="cb174-17"><a href="#cb174-17"></a>    delete ui;</span>
<span id="cb174-18"><a href="#cb174-18"></a>}</span>
<span id="cb174-19"><a href="#cb174-19"></a></span>
<span id="cb174-20"><a href="#cb174-20"></a><span class="dt">void</span> MainWindow::timerEvent(QTimerEvent *event)</span>
<span id="cb174-21"><a href="#cb174-21"></a>{</span>
<span id="cb174-22"><a href="#cb174-22"></a>    qDebug() &lt;&lt; <span class="st">&quot;Update...&quot;</span>;</span>
<span id="cb174-23"><a href="#cb174-23"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-0-1" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>mytimer.h:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb175-1"><a href="#cb175-1"></a>    <span class="pp">#ifndef MYTIMER_H</span></span>
<span id="cb175-2"><a href="#cb175-2"></a>    <span class="pp">#define MYTIMER_H</span></span>
<span id="cb175-3"><a href="#cb175-3"></a></span>
<span id="cb175-4"><a href="#cb175-4"></a>    <span class="pp">#include </span><span class="im">&lt;QTimer&gt;</span></span>
<span id="cb175-5"><a href="#cb175-5"></a></span>
<span id="cb175-6"><a href="#cb175-6"></a>    class MyTimer : public QObject</span>
<span id="cb175-7"><a href="#cb175-7"></a>    {</span>
<span id="cb175-8"><a href="#cb175-8"></a>        Q_OBJECT</span>
<span id="cb175-9"><a href="#cb175-9"></a>    public:</span>
<span id="cb175-10"><a href="#cb175-10"></a>        MyTimer();</span>
<span id="cb175-11"><a href="#cb175-11"></a>        QTimer *timer;</span>
<span id="cb175-12"><a href="#cb175-12"></a></span>
<span id="cb175-13"><a href="#cb175-13"></a>    public slots:</span>
<span id="cb175-14"><a href="#cb175-14"></a>        <span class="dt">void</span> MyTimerSlot();</span>
<span id="cb175-15"><a href="#cb175-15"></a>    };</span>
<span id="cb175-16"><a href="#cb175-16"></a></span>
<span id="cb175-17"><a href="#cb175-17"></a>    <span class="pp">#endif </span><span class="co">// MYTIME</span></span></code></pre></div>
<p>mytimer.cpp:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb176-1"><a href="#cb176-1"></a><span class="pp">#include </span><span class="im">&quot;mytimer.h&quot;</span></span>
<span id="cb176-2"><a href="#cb176-2"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb176-3"><a href="#cb176-3"></a></span>
<span id="cb176-4"><a href="#cb176-4"></a>MyTimer::MyTimer()</span>
<span id="cb176-5"><a href="#cb176-5"></a>{</span>
<span id="cb176-6"><a href="#cb176-6"></a>    <span class="co">// create a timer</span></span>
<span id="cb176-7"><a href="#cb176-7"></a>    timer = new QTimer(this);</span>
<span id="cb176-8"><a href="#cb176-8"></a></span>
<span id="cb176-9"><a href="#cb176-9"></a>    <span class="co">// setup signal and slot</span></span>
<span id="cb176-10"><a href="#cb176-10"></a>    connect(timer, SIGNAL(timeout()),</span>
<span id="cb176-11"><a href="#cb176-11"></a>          this, SLOT(MyTimerSlot()));</span>
<span id="cb176-12"><a href="#cb176-12"></a></span>
<span id="cb176-13"><a href="#cb176-13"></a>    <span class="co">// msec</span></span>
<span id="cb176-14"><a href="#cb176-14"></a>    timer-&gt;start(<span class="dv">1000</span>);</span>
<span id="cb176-15"><a href="#cb176-15"></a>}</span>
<span id="cb176-16"><a href="#cb176-16"></a></span>
<span id="cb176-17"><a href="#cb176-17"></a><span class="dt">void</span> MyTimer::MyTimerSlot()</span>
<span id="cb176-18"><a href="#cb176-18"></a>{</span>
<span id="cb176-19"><a href="#cb176-19"></a>    qDebug() &lt;&lt; <span class="st">&quot;Timer...&quot;</span>;</span>
<span id="cb176-20"><a href="#cb176-20"></a>}</span></code></pre></div>
<p>main.cpp:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb177-1"><a href="#cb177-1"></a><span class="pp">#include </span><span class="im">&lt;QCoreApplication&gt;</span></span>
<span id="cb177-2"><a href="#cb177-2"></a><span class="pp">#include </span><span class="im">&quot;mytimer.h&quot;</span></span>
<span id="cb177-3"><a href="#cb177-3"></a></span>
<span id="cb177-4"><a href="#cb177-4"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb177-5"><a href="#cb177-5"></a>{</span>
<span id="cb177-6"><a href="#cb177-6"></a>    QCoreApplication a(argc, argv);</span>
<span id="cb177-7"><a href="#cb177-7"></a></span>
<span id="cb177-8"><a href="#cb177-8"></a>    <span class="co">// Create MyTimer instance</span></span>
<span id="cb177-9"><a href="#cb177-9"></a>    <span class="co">// QTimer object will be created in the MyTimer constructor</span></span>
<span id="cb177-10"><a href="#cb177-10"></a>    MyTimer timer;</span>
<span id="cb177-11"><a href="#cb177-11"></a></span>
<span id="cb177-12"><a href="#cb177-12"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb177-13"><a href="#cb177-13"></a>}</span></code></pre></div>
<p>If we run the code:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb178-1"><a href="#cb178-1"></a>Timer...</span>
<span id="cb178-2"><a href="#cb178-2"></a>Timer...</span>
<span id="cb178-3"><a href="#cb178-3"></a>Timer...</span>
<span id="cb178-4"><a href="#cb178-4"></a>Timer...</span>
<span id="cb178-5"><a href="#cb178-5"></a>Timer...</span>
<span id="cb178-6"><a href="#cb178-6"></a>...</span></code></pre></div>
<p><a href="https://www.bogotobogo.com/Qt/Qt5_QTimer.php" rel="nofollow noreferrer">resources</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="hide-console-of-windows-application-score-85169-in-2012" class="level3">
<h3>49: Hide console of Windows Application (score <a href="https://stackoverflow.com/q/2139637.html">85169</a> in 2012)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>
I have a Qt application, and when I run this application, there is a console opening behind it. In development it is nice because i see debug outputs on the console, but when I want to give this executable to the customer there should be no console window. how do I hide it?
</p>
<p>(I am using Visual Studio 2008)</p>
</section>
<section id="answer-accepted-score-49" class="level4">
<h4>Answer accepted (score 49)</h4>
<p>It sounds like your linker configuration is incorrect. Right-click the project, Properties, Linker, System, SubSystem setting. Make sure “Windows” is selected, not “Console”.</p>
<p>And, change main() to WinMain().</p>
</section>
<section id="answer-2-score-109" class="level4">
<h4>Answer 2 (score 109)</h4>
<p>In the project build linker options set</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb179-1"><a href="#cb179-1"></a>/SUBSYSTEM:windows</span>
<span id="cb179-2"><a href="#cb179-2"></a>/ENTRY:mainCRTStartup</span></code></pre></div>
<p>Or use the following <em>#pragma</em> in the source file with the <code>int main(...)</code></p>
<div class="sourceCode" id="cb180"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb180-1"><a href="#cb180-1"></a><span class="pp">#pragma comment(linker, &quot;/SUBSYSTEM:windows /ENTRY:mainCRTStartup&quot;)</span></span></code></pre></div>
</section>
<section id="answer-3-score-15" class="level4">
<h4>Answer 3 (score 15)</h4>
<p>You can get rid of the console by calling:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb181-1"><a href="#cb181-1"></a>FreeConsole();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-createreadwrite-json-files-in-qt5-score-83939-in-2014" class="level3">
<h3>50: How to create/read/write JSon files in Qt5 (score <a href="https://stackoverflow.com/q/15893040.html">83939</a> in 2014)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>Qt5 has a new JSon parser and I want to use it. The problem is that it isn’t too clear about what the functions do in layman’s terms and how to write code with it. That or I could be reading it wrong.</p>
<p>I want to know the code on creating a Json file in Qt5 and what “encapsulates” mean.</p>
</section>
<section id="answer-accepted-score-91" class="level4">
<h4>Answer accepted (score 91)</h4>
<p><strong>Example: Read json from file</strong></p>
<div class="sourceCode" id="cb182"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb182-1"><a href="#cb182-1"></a><span class="co">/* test.json */</span></span>
<span id="cb182-2"><a href="#cb182-2"></a>{</span>
<span id="cb182-3"><a href="#cb182-3"></a>   <span class="st">&quot;appDesc&quot;</span>: {</span>
<span id="cb182-4"><a href="#cb182-4"></a>      <span class="st">&quot;description&quot;</span>: <span class="st">&quot;SomeDescription&quot;</span>,</span>
<span id="cb182-5"><a href="#cb182-5"></a>      <span class="st">&quot;message&quot;</span>: <span class="st">&quot;SomeMessage&quot;</span></span>
<span id="cb182-6"><a href="#cb182-6"></a>   },</span>
<span id="cb182-7"><a href="#cb182-7"></a>   <span class="st">&quot;appName&quot;</span>: {</span>
<span id="cb182-8"><a href="#cb182-8"></a>      <span class="st">&quot;description&quot;</span>: <span class="st">&quot;Home&quot;</span>,</span>
<span id="cb182-9"><a href="#cb182-9"></a>      <span class="st">&quot;message&quot;</span>: <span class="st">&quot;Welcome&quot;</span>,</span>
<span id="cb182-10"><a href="#cb182-10"></a>      <span class="st">&quot;imp&quot;</span>:[<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>]</span>
<span id="cb182-11"><a href="#cb182-11"></a>   }</span>
<span id="cb182-12"><a href="#cb182-12"></a>}</span>
<span id="cb182-13"><a href="#cb182-13"></a></span>
<span id="cb182-14"><a href="#cb182-14"></a></span>
<span id="cb182-15"><a href="#cb182-15"></a><span class="dt">void</span> readJson()</span>
<span id="cb182-16"><a href="#cb182-16"></a>   {</span>
<span id="cb182-17"><a href="#cb182-17"></a>      QString val;</span>
<span id="cb182-18"><a href="#cb182-18"></a>      QFile file;</span>
<span id="cb182-19"><a href="#cb182-19"></a>      file.setFileName(<span class="st">&quot;test.json&quot;</span>);</span>
<span id="cb182-20"><a href="#cb182-20"></a>      file.open(QIODevice::ReadOnly | QIODevice::Text);</span>
<span id="cb182-21"><a href="#cb182-21"></a>      val = file.readAll();</span>
<span id="cb182-22"><a href="#cb182-22"></a>      file.close();</span>
<span id="cb182-23"><a href="#cb182-23"></a>      qWarning() &lt;&lt; val;</span>
<span id="cb182-24"><a href="#cb182-24"></a>      QJsonDocument d = QJsonDocument::fromJson(val.toUtf8());</span>
<span id="cb182-25"><a href="#cb182-25"></a>      QJsonObject sett2 = d.object();</span>
<span id="cb182-26"><a href="#cb182-26"></a>      QJsonValue value = sett2.value(QString(<span class="st">&quot;appName&quot;</span>));</span>
<span id="cb182-27"><a href="#cb182-27"></a>      qWarning() &lt;&lt; value;</span>
<span id="cb182-28"><a href="#cb182-28"></a>      QJsonObject item = value.toObject();</span>
<span id="cb182-29"><a href="#cb182-29"></a>      qWarning() &lt;&lt; tr(<span class="st">&quot;QJsonObject of description: &quot;</span>) &lt;&lt; item;</span>
<span id="cb182-30"><a href="#cb182-30"></a></span>
<span id="cb182-31"><a href="#cb182-31"></a>      <span class="co">/* in case of string value get value and convert into string*/</span></span>
<span id="cb182-32"><a href="#cb182-32"></a>      qWarning() &lt;&lt; tr(<span class="st">&quot;QJsonObject[appName] of description: &quot;</span>) &lt;&lt; item[<span class="st">&quot;description&quot;</span>];</span>
<span id="cb182-33"><a href="#cb182-33"></a>      QJsonValue subobj = item[<span class="st">&quot;description&quot;</span>];</span>
<span id="cb182-34"><a href="#cb182-34"></a>      qWarning() &lt;&lt; subobj.toString();</span>
<span id="cb182-35"><a href="#cb182-35"></a></span>
<span id="cb182-36"><a href="#cb182-36"></a>      <span class="co">/* in case of array get array and convert into string*/</span></span>
<span id="cb182-37"><a href="#cb182-37"></a>      qWarning() &lt;&lt; tr(<span class="st">&quot;QJsonObject[appName] of value: &quot;</span>) &lt;&lt; item[<span class="st">&quot;imp&quot;</span>];</span>
<span id="cb182-38"><a href="#cb182-38"></a>      QJsonArray test = item[<span class="st">&quot;imp&quot;</span>].toArray();</span>
<span id="cb182-39"><a href="#cb182-39"></a>      qWarning() &lt;&lt; test[<span class="dv">1</span>].toString();</span>
<span id="cb182-40"><a href="#cb182-40"></a>   }</span></code></pre></div>
<hr>
<p><strong>OUTPUT</strong></p>
<div class="sourceCode" id="cb183"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb183-1"><a href="#cb183-1"></a>QJsonValue(object, QJsonObject({<span class="st">&quot;description&quot;</span>: <span class="st">&quot;Home&quot;</span>,<span class="st">&quot;imp&quot;</span>: [<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>],<span class="st">&quot;message&quot;</span>: <span class="st">&quot;YouTube&quot;</span>}) ) </span>
<span id="cb183-2"><a href="#cb183-2"></a><span class="st">&quot;QJsonObject of description: &quot;</span> QJsonObject({<span class="st">&quot;description&quot;</span>: <span class="st">&quot;Home&quot;</span>,<span class="st">&quot;imp&quot;</span>: [<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>],<span class="st">&quot;message&quot;</span>: <span class="st">&quot;YouTube&quot;</span>}) </span>
<span id="cb183-3"><a href="#cb183-3"></a><span class="st">&quot;QJsonObject[appName] of description: &quot;</span> QJsonValue(string, <span class="st">&quot;Home&quot;</span>) </span>
<span id="cb183-4"><a href="#cb183-4"></a><span class="st">&quot;Home&quot;</span> </span>
<span id="cb183-5"><a href="#cb183-5"></a><span class="st">&quot;QJsonObject[appName] of value: &quot;</span> QJsonValue(array, QJsonArray([<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>]) ) </span>
<span id="cb183-6"><a href="#cb183-6"></a><span class="st">&quot;best&quot;</span> </span></code></pre></div>
<hr>
<p><strong>Example: Read json from string</strong></p>
<p>Assign json to string as below and use the <code>readJson()</code> function shown before:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb184-1"><a href="#cb184-1"></a>val =   </span>
<span id="cb184-2"><a href="#cb184-2"></a>&#39;  {</span>
<span id="cb184-3"><a href="#cb184-3"></a>       <span class="st">&quot;appDesc&quot;</span>: {</span>
<span id="cb184-4"><a href="#cb184-4"></a>          <span class="st">&quot;description&quot;</span>: <span class="st">&quot;SomeDescription&quot;</span>,</span>
<span id="cb184-5"><a href="#cb184-5"></a>          <span class="st">&quot;message&quot;</span>: <span class="st">&quot;SomeMessage&quot;</span></span>
<span id="cb184-6"><a href="#cb184-6"></a>       },</span>
<span id="cb184-7"><a href="#cb184-7"></a>       <span class="st">&quot;appName&quot;</span>: {</span>
<span id="cb184-8"><a href="#cb184-8"></a>          <span class="st">&quot;description&quot;</span>: <span class="st">&quot;Home&quot;</span>,</span>
<span id="cb184-9"><a href="#cb184-9"></a>          <span class="st">&quot;message&quot;</span>: <span class="st">&quot;Welcome&quot;</span>,</span>
<span id="cb184-10"><a href="#cb184-10"></a>          <span class="st">&quot;imp&quot;</span>:[<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>]</span>
<span id="cb184-11"><a href="#cb184-11"></a>       }</span>
<span id="cb184-12"><a href="#cb184-12"></a>    }&#39;;</span></code></pre></div>
<hr>
<p><strong>OUTPUT</strong></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb185-1"><a href="#cb185-1"></a>QJsonValue(object, QJsonObject({<span class="st">&quot;description&quot;</span>: <span class="st">&quot;Home&quot;</span>,<span class="st">&quot;imp&quot;</span>: [<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>],<span class="st">&quot;message&quot;</span>: <span class="st">&quot;YouTube&quot;</span>}) ) </span>
<span id="cb185-2"><a href="#cb185-2"></a><span class="st">&quot;QJsonObject of description: &quot;</span> QJsonObject({<span class="st">&quot;description&quot;</span>: <span class="st">&quot;Home&quot;</span>,<span class="st">&quot;imp&quot;</span>: [<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>],<span class="st">&quot;message&quot;</span>: <span class="st">&quot;YouTube&quot;</span>}) </span>
<span id="cb185-3"><a href="#cb185-3"></a><span class="st">&quot;QJsonObject[appName] of description: &quot;</span> QJsonValue(string, <span class="st">&quot;Home&quot;</span>) </span>
<span id="cb185-4"><a href="#cb185-4"></a><span class="st">&quot;Home&quot;</span> </span>
<span id="cb185-5"><a href="#cb185-5"></a><span class="st">&quot;QJsonObject[appName] of value: &quot;</span> QJsonValue(array, QJsonArray([<span class="st">&quot;awesome&quot;</span>,<span class="st">&quot;best&quot;</span>,<span class="st">&quot;good&quot;</span>]) ) </span>
<span id="cb185-6"><a href="#cb185-6"></a><span class="st">&quot;best&quot;</span> </span></code></pre></div>
</section>
<section id="answer-2-score-2-1" class="level4">
<h4>Answer 2 (score 2)</h4>
<p>Sadly, many JSON C++ libraries have APIs that are non trivial to use, while JSON was intended to be easy to use.</p>
<p>So I tried <a href="http://www.genivia.com/doc/xml-rpc-json/html/index.html" rel="nofollow">jsoncpp</a> from the <a href="http://www.genivia.com/tutorials.html" rel="nofollow">gSOAP tools</a> on the JSON doc shown in one of the answers above and this is the code generated with jsoncpp to construct a JSON object in C++ which is then written in JSON format to std::cout:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb186-1"><a href="#cb186-1"></a>value x(ctx);</span>
<span id="cb186-2"><a href="#cb186-2"></a>x[<span class="st">&quot;appDesc&quot;</span>][<span class="st">&quot;description&quot;</span>] = <span class="st">&quot;SomeDescription&quot;</span>;</span>
<span id="cb186-3"><a href="#cb186-3"></a>x[<span class="st">&quot;appDesc&quot;</span>][<span class="st">&quot;message&quot;</span>] = <span class="st">&quot;SomeMessage&quot;</span>;</span>
<span id="cb186-4"><a href="#cb186-4"></a>x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;description&quot;</span>] = <span class="st">&quot;Home&quot;</span>;</span>
<span id="cb186-5"><a href="#cb186-5"></a>x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;message&quot;</span>] = <span class="st">&quot;Welcome&quot;</span>;</span>
<span id="cb186-6"><a href="#cb186-6"></a>x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;imp&quot;</span>][<span class="dv">0</span>] = <span class="st">&quot;awesome&quot;</span>;</span>
<span id="cb186-7"><a href="#cb186-7"></a>x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;imp&quot;</span>][<span class="dv">1</span>] = <span class="st">&quot;best&quot;</span>;</span>
<span id="cb186-8"><a href="#cb186-8"></a>x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;imp&quot;</span>][<span class="dv">2</span>] = <span class="st">&quot;good&quot;</span>;</span>
<span id="cb186-9"><a href="#cb186-9"></a>std::cout &lt;&lt; x &lt;&lt; std::endl;</span></code></pre></div>
<p>and this is the code generated by jsoncpp to parse JSON from std::cin and extract its values (replace <code>USE_VAL</code> as needed):</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb187-1"><a href="#cb187-1"></a>value x(ctx);</span>
<span id="cb187-2"><a href="#cb187-2"></a>std::cin &gt;&gt; x;</span>
<span id="cb187-3"><a href="#cb187-3"></a><span class="cf">if</span> (x.soap-&gt;error)</span>
<span id="cb187-4"><a href="#cb187-4"></a>  exit(EXIT_FAILURE); <span class="co">// error parsing JSON</span></span>
<span id="cb187-5"><a href="#cb187-5"></a><span class="pp">#define USE_VAL(path, val) std::cout &lt;&lt; path &lt;&lt; &quot; = &quot; &lt;&lt; val &lt;&lt; std::endl</span></span>
<span id="cb187-6"><a href="#cb187-6"></a><span class="cf">if</span> (x.has(<span class="st">&quot;appDesc&quot;</span>))</span>
<span id="cb187-7"><a href="#cb187-7"></a>{</span>
<span id="cb187-8"><a href="#cb187-8"></a>  <span class="cf">if</span> (x[<span class="st">&quot;appDesc&quot;</span>].has(<span class="st">&quot;description&quot;</span>))</span>
<span id="cb187-9"><a href="#cb187-9"></a>    USE_VAL(<span class="st">&quot;$.appDesc.description&quot;</span>, x[<span class="st">&quot;appDesc&quot;</span>][<span class="st">&quot;description&quot;</span>]);</span>
<span id="cb187-10"><a href="#cb187-10"></a>  <span class="cf">if</span> (x[<span class="st">&quot;appDesc&quot;</span>].has(<span class="st">&quot;message&quot;</span>))</span>
<span id="cb187-11"><a href="#cb187-11"></a>    USE_VAL(<span class="st">&quot;$.appDesc.message&quot;</span>, x[<span class="st">&quot;appDesc&quot;</span>][<span class="st">&quot;message&quot;</span>]);</span>
<span id="cb187-12"><a href="#cb187-12"></a>}</span>
<span id="cb187-13"><a href="#cb187-13"></a><span class="cf">if</span> (x.has(<span class="st">&quot;appName&quot;</span>))</span>
<span id="cb187-14"><a href="#cb187-14"></a>{</span>
<span id="cb187-15"><a href="#cb187-15"></a>  <span class="cf">if</span> (x[<span class="st">&quot;appName&quot;</span>].has(<span class="st">&quot;description&quot;</span>))</span>
<span id="cb187-16"><a href="#cb187-16"></a>    USE_VAL(<span class="st">&quot;$.appName.description&quot;</span>, x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;description&quot;</span>]);</span>
<span id="cb187-17"><a href="#cb187-17"></a>  <span class="cf">if</span> (x[<span class="st">&quot;appName&quot;</span>].has(<span class="st">&quot;message&quot;</span>))</span>
<span id="cb187-18"><a href="#cb187-18"></a>    USE_VAL(<span class="st">&quot;$.appName.message&quot;</span>, x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;message&quot;</span>]);</span>
<span id="cb187-19"><a href="#cb187-19"></a>  <span class="cf">if</span> (x[<span class="st">&quot;appName&quot;</span>].has(<span class="st">&quot;imp&quot;</span>))</span>
<span id="cb187-20"><a href="#cb187-20"></a>  {</span>
<span id="cb187-21"><a href="#cb187-21"></a>    <span class="cf">for</span> (<span class="dt">int</span> i2 = <span class="dv">0</span>; i2 &lt; x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;imp&quot;</span>].size(); i2++)</span>
<span id="cb187-22"><a href="#cb187-22"></a>      USE_VAL(<span class="st">&quot;$.appName.imp[]&quot;</span>, x[<span class="st">&quot;appName&quot;</span>][<span class="st">&quot;imp&quot;</span>][i2]);</span>
<span id="cb187-23"><a href="#cb187-23"></a>  }</span>
<span id="cb187-24"><a href="#cb187-24"></a>}</span></code></pre></div>
<p>This code uses the JSON C++ API of gSOAP 2.8.28. I don’t expect people to change libraries, but I think this comparison helps to put JSON C++ libraries in perspective.</p>
</section>
<section id="answer-3-score-0-2" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>An example on how to use that would be great. There is a couple of examples at the <a href="http://www.qtcentre.org/threads/52857-reading-JSON-file-in-Qt5" rel="nofollow">Qt forum</a>, but you’re right that the official documentation should be expanded.</p>
<p><code>QJsonDocument</code> on its own indeed doesn’t produce anything, you will have to add the data to it. That’s done through the <code>QJsonObject</code>, <code>QJsonArray</code> and <code>QJsonValue</code> classes. The top-level item needs to be either an array or an object (because <code>1</code> is not a valid json document, while <code>{foo: 1}</code> is.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-elapsed-time-in-qt-score-83913-in-2015" class="level3">
<h3>51: Get elapsed time in Qt (score <a href="https://stackoverflow.com/q/244646.html">83913</a> in 2015)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>I’m looking for the equivalent in Qt to <code>GetTickCount()</code></p>
<p>Something that will allow me to measure the time it takes for a segment of code to run as in:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb188-1"><a href="#cb188-1"></a>uint start = GetTickCount();</span>
<span id="cb188-2"><a href="#cb188-2"></a><span class="co">// do something..</span></span>
<span id="cb188-3"><a href="#cb188-3"></a>uint timeItTook = GetTickCount() - start;</span></code></pre></div>
<p>any suggestions?</p>
</section>
<section id="answer-accepted-score-90" class="level4">
<h4>Answer accepted (score 90)</h4>
<p>How about <a href="http://doc.qt.io/qt-5/qtime.html" rel="noreferrer"><code>QTime</code></a>? Depending on your platform it should have 1 millisecond accuracy. Code would look something like this:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb189-1"><a href="#cb189-1"></a>QTime myTimer;</span>
<span id="cb189-2"><a href="#cb189-2"></a>myTimer.start();</span>
<span id="cb189-3"><a href="#cb189-3"></a><span class="co">// do something..</span></span>
<span id="cb189-4"><a href="#cb189-4"></a><span class="dt">int</span> nMilliseconds = myTimer.elapsed();</span></code></pre></div>
</section>
<section id="answer-2-score-115" class="level4">
<h4>Answer 2 (score 115)</h4>
<p>I think it’s probably better to use <a href="http://doc.qt.io/qt-5/qelapsedtimer.html" rel="noreferrer"><code>QElapsedTimer</code></a> since that is why the class exists in the first place. It was introduced with Qt 4.7. Note that it is also immuned to system’s clock time change.</p>
<p>Example usage:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb190-1"><a href="#cb190-1"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb190-2"><a href="#cb190-2"></a><span class="pp">#include </span><span class="im">&lt;QElapsedTimer&gt;</span></span>
<span id="cb190-3"><a href="#cb190-3"></a>...</span>
<span id="cb190-4"><a href="#cb190-4"></a>...</span>
<span id="cb190-5"><a href="#cb190-5"></a>QElapsedTimer timer;</span>
<span id="cb190-6"><a href="#cb190-6"></a>timer.start();</span>
<span id="cb190-7"><a href="#cb190-7"></a>slowOperation();  <span class="co">// we want to measure the time of this slowOperation()</span></span>
<span id="cb190-8"><a href="#cb190-8"></a>qDebug() &lt;&lt; timer.elapsed();</span></code></pre></div>
</section>
<section id="answer-3-score-37-1" class="level4">
<h4>Answer 3 (score 37)</h4>
<p>
Even if the first answer was accepted, the rest of the people who read the answers should consider <code>sivabudh</code>’s suggestion. <br/> <a href="http://doc.qt.io/qt-5/qelapsedtimer.html" rel="nofollow noreferrer"><code>QElapsedTimer</code></a> can also be used to calculate the time in nanoseconds. <br/> Code example:
</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb191-1"><a href="#cb191-1"></a>QElapsedTimer timer;</span>
<span id="cb191-2"><a href="#cb191-2"></a>qint64 nanoSec;</span>
<span id="cb191-3"><a href="#cb191-3"></a>timer.start();</span>
<span id="cb191-4"><a href="#cb191-4"></a><span class="co">//something happens here</span></span>
<span id="cb191-5"><a href="#cb191-5"></a>nanoSec = timer.nsecsElapsed();</span>
<span id="cb191-6"><a href="#cb191-6"></a><span class="co">//printing the result(nanoSec)</span></span>
<span id="cb191-7"><a href="#cb191-7"></a><span class="co">//something else happening here</span></span>
<span id="cb191-8"><a href="#cb191-8"></a>timer.restart();</span>
<span id="cb191-9"><a href="#cb191-9"></a><span class="co">//some other operation</span></span>
<span id="cb191-10"><a href="#cb191-10"></a>nanoSec = timer.nsecsElapsed();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qcombobox---set-selected-item-based-on-the-items-data-score-83818-in-2018" class="level3">
<h3>52: QComboBox - set selected item based on the item’s data (score <a href="https://stackoverflow.com/q/4340415.html">83818</a> in 2018)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>What would be the best way of selecting an item in a QT combo box out of a predefined list of <code>enum</code> based unique values.</p>
<p>In the past I have become accustomed to .NET’s style of selection where the item can be selected by setting the selected property to the item’s value you wish to select:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb192-1"><a href="#cb192-1"></a>cboExample.SelectedValue = <span class="dv">2</span>;</span></code></pre></div>
<p>Is there anyway to do this with QT based on the item’s data, if the data is a C++ enumeration?</p>
</section>
<section id="answer-accepted-score-97" class="level4">
<h4>Answer accepted (score 97)</h4>
<p>You lookup the value of the data with <code>findData()</code> and then use <code>setCurrentIndex()</code></p>
<div class="sourceCode" id="cb193"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb193-1"><a href="#cb193-1"></a>QComboBox* combo = new QComboBox;</span>
<span id="cb193-2"><a href="#cb193-2"></a>combo-&gt;addItem(<span class="st">&quot;100&quot;</span>,<span class="fl">100.0</span>);    <span class="co">// 2nd parameter can be any Qt type</span></span>
<span id="cb193-3"><a href="#cb193-3"></a>combo-&gt;addItem .....</span>
<span id="cb193-4"><a href="#cb193-4"></a></span>
<span id="cb193-5"><a href="#cb193-5"></a><span class="dt">float</span> value=<span class="fl">100.0</span>;</span>
<span id="cb193-6"><a href="#cb193-6"></a><span class="dt">int</span> index = combo-&gt;findData(value);</span>
<span id="cb193-7"><a href="#cb193-7"></a><span class="cf">if</span> ( index != -<span class="dv">1</span> ) { <span class="co">// -1 for not found</span></span>
<span id="cb193-8"><a href="#cb193-8"></a>   combo-&gt;setCurrentIndex(index);</span>
<span id="cb193-9"><a href="#cb193-9"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-22-1" class="level4">
<h4>Answer 2 (score 22)</h4>
<p>
You can also have a look at the method findText(const QString &amp; text) from QComboBox; it returns the index of the element which contains the given text, (-1 if not found). The advantage of using this method is that you don’t need to set the second parameter when you add an item.
</p>
<p>Here is a little example :</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb194-1"><a href="#cb194-1"></a><span class="co">/* Create the comboBox */</span></span>
<span id="cb194-2"><a href="#cb194-2"></a>QComboBox   *_comboBox = new QComboBox;</span>
<span id="cb194-3"><a href="#cb194-3"></a></span>
<span id="cb194-4"><a href="#cb194-4"></a><span class="co">/* Create the ComboBox elements list (here we use QString) */</span></span>
<span id="cb194-5"><a href="#cb194-5"></a>QList&lt;QString&gt; stringsList;</span>
<span id="cb194-6"><a href="#cb194-6"></a>stringsList.append(<span class="st">&quot;Text1&quot;</span>);</span>
<span id="cb194-7"><a href="#cb194-7"></a>stringsList.append(<span class="st">&quot;Text3&quot;</span>);</span>
<span id="cb194-8"><a href="#cb194-8"></a>stringsList.append(<span class="st">&quot;Text4&quot;</span>);</span>
<span id="cb194-9"><a href="#cb194-9"></a>stringsList.append(<span class="st">&quot;Text2&quot;</span>);</span>
<span id="cb194-10"><a href="#cb194-10"></a>stringsList.append(<span class="st">&quot;Text5&quot;</span>);</span>
<span id="cb194-11"><a href="#cb194-11"></a></span>
<span id="cb194-12"><a href="#cb194-12"></a><span class="co">/* Populate the comboBox */</span></span>
<span id="cb194-13"><a href="#cb194-13"></a>_comboBox-&gt;addItems(stringsList);</span>
<span id="cb194-14"><a href="#cb194-14"></a></span>
<span id="cb194-15"><a href="#cb194-15"></a><span class="co">/* Create the label */</span></span>
<span id="cb194-16"><a href="#cb194-16"></a>QLabel *label = new QLabel;</span>
<span id="cb194-17"><a href="#cb194-17"></a></span>
<span id="cb194-18"><a href="#cb194-18"></a><span class="co">/* Search for &quot;Text2&quot; text */</span></span>
<span id="cb194-19"><a href="#cb194-19"></a><span class="dt">int</span> index = _comboBox-&gt;findText(<span class="st">&quot;Text2&quot;</span>);</span>
<span id="cb194-20"><a href="#cb194-20"></a><span class="cf">if</span>( index == -<span class="dv">1</span> )</span>
<span id="cb194-21"><a href="#cb194-21"></a>    label-&gt;setText(<span class="st">&quot;Text2 not found !&quot;</span>);</span>
<span id="cb194-22"><a href="#cb194-22"></a><span class="cf">else</span></span>
<span id="cb194-23"><a href="#cb194-23"></a>    label-&gt;setText(QString(<span class="st">&quot;Text2&#39;s index is &quot;</span>)</span>
<span id="cb194-24"><a href="#cb194-24"></a>                   .append(QString::number(_comboBox-&gt;findText(<span class="st">&quot;Text2&quot;</span>))));</span>
<span id="cb194-25"><a href="#cb194-25"></a></span>
<span id="cb194-26"><a href="#cb194-26"></a><span class="co">/* setup layout */</span></span>
<span id="cb194-27"><a href="#cb194-27"></a>QVBoxLayout *layout = new QVBoxLayout(this);</span>
<span id="cb194-28"><a href="#cb194-28"></a>layout-&gt;addWidget(_comboBox);</span>
<span id="cb194-29"><a href="#cb194-29"></a>layout-&gt;addWidget(label);</span></code></pre></div>
</section>
<section id="answer-3-score-3" class="level4">
<h4>Answer 3 (score 3)</h4>
<p>If you know the text in the combo box that you want to select, just use the setCurrentText() method to select that item.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb195-1"><a href="#cb195-1"></a>ui-&gt;comboBox-&gt;setCurrentText(<span class="st">&quot;choice 2&quot;</span>);</span></code></pre></div>
<p>From the Qt 5.7 documentation</p>
<blockquote>
<p>
The setter setCurrentText() simply calls setEditText() if the combo box is editable. Otherwise, if there is a matching text in the list, currentIndex is set to the corresponding index.
</p>
</blockquote>
<p>So as long as the combo box is not editable, the text specified in the function call will be selected in the combo box.</p>
<p>Reference: <a href="http://doc.qt.io/qt-5/qcombobox.html#currentText-prop" rel="nofollow noreferrer">http://doc.qt.io/qt-5/qcombobox.html#currentText-prop</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-resizing-a-qlabel-containing-a-qpixmap-while-keeping-its-aspect-ratio-score-83053-in-2017" class="level3">
<h3>53: Qt: resizing a QLabel containing a QPixmap while keeping its aspect ratio (score <a href="https://stackoverflow.com/q/8211982.html">83053</a> in 2017)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>I use a QLabel to display the content of a bigger, dynamically changing QPixmap to the user. It would be nice to make this label smaller/larger depending on the space available. The screen size is not always as big as the QPixmap.</p>
<p>How can I modify the <code>QSizePolicy</code> and <code>sizeHint()</code> of the QLabel to resize the QPixmap while keeping the aspect ratio of the original QPixmap?</p>
<p>I can’t modify <code>sizeHint()</code> of the QLabel, setting the <code>minimumSize()</code> to zero does not help. Setting <code>hasScaledContents()</code> on the QLabel allows growing, but breaks the aspect ratio thingy…</p>
<p>Subclassing QLabel did help, but this solution adds too much code for just a simple problem…</p>
<p>Any smart hints how to accomplish this <em>without</em> subclassing?</p>
</section>
<section id="answer-accepted-score-86-1" class="level4">
<h4>Answer accepted (score 86)</h4>
<p>In order to change the label size you can select an appropriate size policy for the label like expanding or minimum expanding.</p>
<p>You can scale the pixmap by keeping its aspect ratio every time it changes:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb196-1"><a href="#cb196-1"></a>QPixmap p; <span class="co">// load pixmap</span></span>
<span id="cb196-2"><a href="#cb196-2"></a><span class="co">// get label dimensions</span></span>
<span id="cb196-3"><a href="#cb196-3"></a><span class="dt">int</span> w = label-&gt;width();</span>
<span id="cb196-4"><a href="#cb196-4"></a><span class="dt">int</span> h = label-&gt;height();</span>
<span id="cb196-5"><a href="#cb196-5"></a></span>
<span id="cb196-6"><a href="#cb196-6"></a><span class="co">// set a scaled pixmap to a w x h window keeping its aspect ratio </span></span>
<span id="cb196-7"><a href="#cb196-7"></a>label-&gt;setPixmap(p.scaled(w,h,Qt::KeepAspectRatio));</span></code></pre></div>
<p>There are two places where you should add this code:</p>
<ul>
<li>
When the pixmap is updated
</li>
<li>
In the <code>resizeEvent</code> of the widget that contains the label
</li>
</ul>
</section>
<section id="answer-2-score-29-1" class="level4">
<h4>Answer 2 (score 29)</h4>
<p>I have polished this missing subclass of <code>QLabel</code>. It is awesome and works well.</p>
<p>aspectratiopixmaplabel.h</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb197-1"><a href="#cb197-1"></a><span class="pp">#ifndef ASPECTRATIOPIXMAPLABEL_H</span></span>
<span id="cb197-2"><a href="#cb197-2"></a><span class="pp">#define ASPECTRATIOPIXMAPLABEL_H</span></span>
<span id="cb197-3"><a href="#cb197-3"></a></span>
<span id="cb197-4"><a href="#cb197-4"></a><span class="pp">#include </span><span class="im">&lt;QLabel&gt;</span></span>
<span id="cb197-5"><a href="#cb197-5"></a><span class="pp">#include </span><span class="im">&lt;QPixmap&gt;</span></span>
<span id="cb197-6"><a href="#cb197-6"></a><span class="pp">#include </span><span class="im">&lt;QResizeEvent&gt;</span></span>
<span id="cb197-7"><a href="#cb197-7"></a></span>
<span id="cb197-8"><a href="#cb197-8"></a>class AspectRatioPixmapLabel : public QLabel</span>
<span id="cb197-9"><a href="#cb197-9"></a>{</span>
<span id="cb197-10"><a href="#cb197-10"></a>    Q_OBJECT</span>
<span id="cb197-11"><a href="#cb197-11"></a>public:</span>
<span id="cb197-12"><a href="#cb197-12"></a>    explicit AspectRatioPixmapLabel(QWidget *parent = <span class="dv">0</span>);</span>
<span id="cb197-13"><a href="#cb197-13"></a>    virtual <span class="dt">int</span> heightForWidth( <span class="dt">int</span> width ) <span class="dt">const</span>;</span>
<span id="cb197-14"><a href="#cb197-14"></a>    virtual QSize sizeHint() <span class="dt">const</span>;</span>
<span id="cb197-15"><a href="#cb197-15"></a>    QPixmap scaledPixmap() <span class="dt">const</span>;</span>
<span id="cb197-16"><a href="#cb197-16"></a>public slots:</span>
<span id="cb197-17"><a href="#cb197-17"></a>    <span class="dt">void</span> setPixmap ( <span class="dt">const</span> QPixmap &amp; );</span>
<span id="cb197-18"><a href="#cb197-18"></a>    <span class="dt">void</span> resizeEvent(QResizeEvent *);</span>
<span id="cb197-19"><a href="#cb197-19"></a>private:</span>
<span id="cb197-20"><a href="#cb197-20"></a>    QPixmap pix;</span>
<span id="cb197-21"><a href="#cb197-21"></a>};</span>
<span id="cb197-22"><a href="#cb197-22"></a></span>
<span id="cb197-23"><a href="#cb197-23"></a><span class="pp">#endif </span><span class="co">// ASPECTRATIOPIXMAPLABEL_H</span></span></code></pre></div>
<p>aspectratiopixmaplabel.cpp</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb198-1"><a href="#cb198-1"></a><span class="pp">#include </span><span class="im">&quot;aspectratiopixmaplabel.h&quot;</span></span>
<span id="cb198-2"><a href="#cb198-2"></a><span class="co">//#include &lt;QDebug&gt;</span></span>
<span id="cb198-3"><a href="#cb198-3"></a></span>
<span id="cb198-4"><a href="#cb198-4"></a>AspectRatioPixmapLabel::AspectRatioPixmapLabel(QWidget *parent) :</span>
<span id="cb198-5"><a href="#cb198-5"></a>    QLabel(parent)</span>
<span id="cb198-6"><a href="#cb198-6"></a>{</span>
<span id="cb198-7"><a href="#cb198-7"></a>    this-&gt;setMinimumSize(<span class="dv">1</span>,<span class="dv">1</span>);</span>
<span id="cb198-8"><a href="#cb198-8"></a>    setScaledContents(false);</span>
<span id="cb198-9"><a href="#cb198-9"></a>}</span>
<span id="cb198-10"><a href="#cb198-10"></a></span>
<span id="cb198-11"><a href="#cb198-11"></a><span class="dt">void</span> AspectRatioPixmapLabel::setPixmap ( <span class="dt">const</span> QPixmap &amp; p)</span>
<span id="cb198-12"><a href="#cb198-12"></a>{</span>
<span id="cb198-13"><a href="#cb198-13"></a>    pix = p;</span>
<span id="cb198-14"><a href="#cb198-14"></a>    QLabel::setPixmap(scaledPixmap());</span>
<span id="cb198-15"><a href="#cb198-15"></a>}</span>
<span id="cb198-16"><a href="#cb198-16"></a></span>
<span id="cb198-17"><a href="#cb198-17"></a><span class="dt">int</span> AspectRatioPixmapLabel::heightForWidth( <span class="dt">int</span> width ) <span class="dt">const</span></span>
<span id="cb198-18"><a href="#cb198-18"></a>{</span>
<span id="cb198-19"><a href="#cb198-19"></a>    <span class="cf">return</span> pix.isNull() ? this-&gt;height() : ((qreal)pix.height()*width)/pix.width();</span>
<span id="cb198-20"><a href="#cb198-20"></a>}</span>
<span id="cb198-21"><a href="#cb198-21"></a></span>
<span id="cb198-22"><a href="#cb198-22"></a>QSize AspectRatioPixmapLabel::sizeHint() <span class="dt">const</span></span>
<span id="cb198-23"><a href="#cb198-23"></a>{</span>
<span id="cb198-24"><a href="#cb198-24"></a>    <span class="dt">int</span> w = this-&gt;width();</span>
<span id="cb198-25"><a href="#cb198-25"></a>    <span class="cf">return</span> QSize( w, heightForWidth(w) );</span>
<span id="cb198-26"><a href="#cb198-26"></a>}</span>
<span id="cb198-27"><a href="#cb198-27"></a></span>
<span id="cb198-28"><a href="#cb198-28"></a>QPixmap AspectRatioPixmapLabel::scaledPixmap() <span class="dt">const</span></span>
<span id="cb198-29"><a href="#cb198-29"></a>{</span>
<span id="cb198-30"><a href="#cb198-30"></a>    <span class="cf">return</span> pix.scaled(this-&gt;size(), Qt::KeepAspectRatio, Qt::SmoothTransformation);</span>
<span id="cb198-31"><a href="#cb198-31"></a>}</span>
<span id="cb198-32"><a href="#cb198-32"></a></span>
<span id="cb198-33"><a href="#cb198-33"></a><span class="dt">void</span> AspectRatioPixmapLabel::resizeEvent(QResizeEvent * e)</span>
<span id="cb198-34"><a href="#cb198-34"></a>{</span>
<span id="cb198-35"><a href="#cb198-35"></a>    <span class="cf">if</span>(!pix.isNull())</span>
<span id="cb198-36"><a href="#cb198-36"></a>        QLabel::setPixmap(scaledPixmap());</span>
<span id="cb198-37"><a href="#cb198-37"></a>}</span></code></pre></div>
<p>
Hope that helps! (Updated <code>resizeEvent</code>, per <span class="citation" data-cites="dmzl">@dmzl</span>’s answer)
</p>
</section>
<section id="answer-3-score-12-3" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>I just use <code>contentsMargin</code> to fix the aspect ratio.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb199-1"><a href="#cb199-1"></a><span class="pp">#pragma once</span></span>
<span id="cb199-2"><a href="#cb199-2"></a></span>
<span id="cb199-3"><a href="#cb199-3"></a><span class="pp">#include </span><span class="im">&lt;QLabel&gt;</span></span>
<span id="cb199-4"><a href="#cb199-4"></a></span>
<span id="cb199-5"><a href="#cb199-5"></a>class AspectRatioLabel : public QLabel</span>
<span id="cb199-6"><a href="#cb199-6"></a>{</span>
<span id="cb199-7"><a href="#cb199-7"></a>public:</span>
<span id="cb199-8"><a href="#cb199-8"></a>    explicit AspectRatioLabel(QWidget* parent = nullptr, Qt::WindowFlags f = Qt::WindowFlags());</span>
<span id="cb199-9"><a href="#cb199-9"></a>    ~AspectRatioLabel();</span>
<span id="cb199-10"><a href="#cb199-10"></a></span>
<span id="cb199-11"><a href="#cb199-11"></a>public slots:</span>
<span id="cb199-12"><a href="#cb199-12"></a>    <span class="dt">void</span> setPixmap(<span class="dt">const</span> QPixmap&amp; pm);</span>
<span id="cb199-13"><a href="#cb199-13"></a></span>
<span id="cb199-14"><a href="#cb199-14"></a>protected:</span>
<span id="cb199-15"><a href="#cb199-15"></a>    <span class="dt">void</span> resizeEvent(QResizeEvent* event) override;</span>
<span id="cb199-16"><a href="#cb199-16"></a></span>
<span id="cb199-17"><a href="#cb199-17"></a>private:</span>
<span id="cb199-18"><a href="#cb199-18"></a>    <span class="dt">void</span> updateMargins();</span>
<span id="cb199-19"><a href="#cb199-19"></a></span>
<span id="cb199-20"><a href="#cb199-20"></a>    <span class="dt">int</span> pixmapWidth = <span class="dv">0</span>;</span>
<span id="cb199-21"><a href="#cb199-21"></a>    <span class="dt">int</span> pixmapHeight = <span class="dv">0</span>;</span>
<span id="cb199-22"><a href="#cb199-22"></a>};</span></code></pre></div>
<div class="sourceCode" id="cb200"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb200-1"><a href="#cb200-1"></a><span class="pp">#include </span><span class="im">&quot;AspectRatioLabel.h&quot;</span></span>
<span id="cb200-2"><a href="#cb200-2"></a></span>
<span id="cb200-3"><a href="#cb200-3"></a>AspectRatioLabel::AspectRatioLabel(QWidget* parent, Qt::WindowFlags f) : QLabel(parent, f)</span>
<span id="cb200-4"><a href="#cb200-4"></a>{</span>
<span id="cb200-5"><a href="#cb200-5"></a>}</span>
<span id="cb200-6"><a href="#cb200-6"></a></span>
<span id="cb200-7"><a href="#cb200-7"></a>AspectRatioLabel::~AspectRatioLabel()</span>
<span id="cb200-8"><a href="#cb200-8"></a>{</span>
<span id="cb200-9"><a href="#cb200-9"></a>}</span>
<span id="cb200-10"><a href="#cb200-10"></a></span>
<span id="cb200-11"><a href="#cb200-11"></a><span class="dt">void</span> AspectRatioLabel::setPixmap(<span class="dt">const</span> QPixmap&amp; pm)</span>
<span id="cb200-12"><a href="#cb200-12"></a>{</span>
<span id="cb200-13"><a href="#cb200-13"></a>    pixmapWidth = pm.width();</span>
<span id="cb200-14"><a href="#cb200-14"></a>    pixmapHeight = pm.height();</span>
<span id="cb200-15"><a href="#cb200-15"></a></span>
<span id="cb200-16"><a href="#cb200-16"></a>    updateMargins();</span>
<span id="cb200-17"><a href="#cb200-17"></a>    QLabel::setPixmap(pm);</span>
<span id="cb200-18"><a href="#cb200-18"></a>}</span>
<span id="cb200-19"><a href="#cb200-19"></a></span>
<span id="cb200-20"><a href="#cb200-20"></a><span class="dt">void</span> AspectRatioLabel::resizeEvent(QResizeEvent* event)</span>
<span id="cb200-21"><a href="#cb200-21"></a>{</span>
<span id="cb200-22"><a href="#cb200-22"></a>    updateMargins();</span>
<span id="cb200-23"><a href="#cb200-23"></a>    QLabel::resizeEvent(event);</span>
<span id="cb200-24"><a href="#cb200-24"></a>}</span>
<span id="cb200-25"><a href="#cb200-25"></a></span>
<span id="cb200-26"><a href="#cb200-26"></a><span class="dt">void</span> AspectRatioLabel::updateMargins()</span>
<span id="cb200-27"><a href="#cb200-27"></a>{</span>
<span id="cb200-28"><a href="#cb200-28"></a>    <span class="cf">if</span> (pixmapWidth &lt;= <span class="dv">0</span> || pixmapHeight &lt;= <span class="dv">0</span>)</span>
<span id="cb200-29"><a href="#cb200-29"></a>        <span class="cf">return</span>;</span>
<span id="cb200-30"><a href="#cb200-30"></a></span>
<span id="cb200-31"><a href="#cb200-31"></a>    <span class="dt">int</span> w = this-&gt;width();</span>
<span id="cb200-32"><a href="#cb200-32"></a>    <span class="dt">int</span> h = this-&gt;height();</span>
<span id="cb200-33"><a href="#cb200-33"></a></span>
<span id="cb200-34"><a href="#cb200-34"></a>    <span class="cf">if</span> (w &lt;= <span class="dv">0</span> || h &lt;= <span class="dv">0</span>)</span>
<span id="cb200-35"><a href="#cb200-35"></a>        <span class="cf">return</span>;</span>
<span id="cb200-36"><a href="#cb200-36"></a></span>
<span id="cb200-37"><a href="#cb200-37"></a>    <span class="cf">if</span> (w * pixmapHeight &gt; h * pixmapWidth)</span>
<span id="cb200-38"><a href="#cb200-38"></a>    {</span>
<span id="cb200-39"><a href="#cb200-39"></a>        <span class="dt">int</span> m = (w - (pixmapWidth * h / pixmapHeight)) / <span class="dv">2</span>;</span>
<span id="cb200-40"><a href="#cb200-40"></a>        setContentsMargins(m, <span class="dv">0</span>, m, <span class="dv">0</span>);</span>
<span id="cb200-41"><a href="#cb200-41"></a>    }</span>
<span id="cb200-42"><a href="#cb200-42"></a>    <span class="cf">else</span></span>
<span id="cb200-43"><a href="#cb200-43"></a>    {</span>
<span id="cb200-44"><a href="#cb200-44"></a>        <span class="dt">int</span> m = (h - (pixmapHeight * w / pixmapWidth)) / <span class="dv">2</span>;</span>
<span id="cb200-45"><a href="#cb200-45"></a>        setContentsMargins(<span class="dv">0</span>, m, <span class="dv">0</span>, m);</span>
<span id="cb200-46"><a href="#cb200-46"></a>    }</span>
<span id="cb200-47"><a href="#cb200-47"></a>}</span></code></pre></div>
<p>Works perfectly for me so far. You’re welcome.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-set-the-background-color-of-a-widget-like-combobox-or-double-spin-box-score-82434-in-2017" class="level3">
<h3>54: How do I set the background color of a widget like combobox or double spin box? (score <a href="https://stackoverflow.com/q/177778.html">82434</a> in 2017)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>I am trying to set the background color for a double spin box, and I am not sure what function I should use.</p>
<p>I saw some function called <code>SetBackgroundRole</code> which accepts a <code>Qt::ColorRole</code>, but I am not sure how to use this one as well.</p>
<p>Kindly let me know, what’s the simple way to change the background color of a <code>QComboBox</code> or <code>QDoubleSpinBox</code>?</p>
</section>
<section id="answer-accepted-score-37" class="level4">
<h4>Answer accepted (score 37)</h4>
<p>Using a <code>QPalette</code> isn’t guaranteed to work for all styles, because style authors are restricted by the different platforms’ guidelines and by the native theme engine.</p>
<p>To make sure your background color will be correct, I would suggest to use the <a href="http://doc.qt.io/qt-4.8/stylesheet.html" rel="noreferrer">Qt Style Sheet</a>. Here is what I did to change the background color of a <code>QComboBox</code>:</p>
<p><code>myComboBox-&amp;gt;setStyleSheet("QComboBox { background-color: blue; }");</code></p>
<p>I haven’t specifically tried for a <code>QSpinBox</code>, but I guess it’ll work the same !</p>
</section>
<section id="answer-2-score-42-1" class="level4">
<h4>Answer 2 (score 42)</h4>
<p>fhe is generally correct, but doesn’t account for the widgets (like spin boxes and buttons/comboboxes) that use a different background role in the palette. A more general solution would be something like this:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb201-1"><a href="#cb201-1"></a>QPalette pal = widget.palette();</span>
<span id="cb201-2"><a href="#cb201-2"></a>pal.setColor(widget.backgroundRole(), Qt::blue);</span>
<span id="cb201-3"><a href="#cb201-3"></a>widget.setPalette(pal);</span></code></pre></div>
<p>Alternatively, you could look into the descriptions of the various palette roles and figure out the one you want, then apply it to the widget containing the others you want changed. The palette changes should propagate to the children widgets.</p>
</section>
<section id="answer-3-score-12-4" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>Actually, if you look at the Qt docs for QPalette in the case of a QComboBox the background role is probably not what you want. What you want is:</p>
<blockquote>
<strong>QPalette::Base</strong> Used mostly as the background color for text entry widgets, but can also be used for other painting - such as the background of combobox drop down lists and toolbar handles. It is usually white or another light color.
</blockquote>
<p>So here is the code I am using to set the background color of a combo box I am using to match the color of the widget it is on:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb202-1"><a href="#cb202-1"></a>QPalette pal = myComboBox-&gt;palette();</span>
<span id="cb202-2"><a href="#cb202-2"></a>pal.setColor(QPalette::Base, pal.color(QPalette::Window));</span>
<span id="cb202-3"><a href="#cb202-3"></a>myComboBox-&gt;setPalette(pal);</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="cannot-launch-avd-in-emulatorqt-library-not-found-score-82177-in-2018" class="level3">
<h3>55: Cannot launch AVD in emulator:QT library not found (score <a href="https://stackoverflow.com/q/42554337.html">82177</a> in 2018)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>I am new to Android Studio and I am having problems while using the emulator. When I try to run it keeps crashing saying:</p>
<blockquote>
<p>
“Cannot launch AVD in emulator” [6816]:ERROR:./android/qt/qt_setup.cpp:28:Qt library not found at C:
</p>
<p>
Could not launch ‘C:/qemu/windows-x86_64/qemu-system-i386.exe’: No such file or directory
</p>
</blockquote>
<p>I have enabled VT-x from BIOS settings yet I am having the problem. I have searched a lot and cannot find an answer. Any help will be much appreciated. Can anyone give me a solution?</p>
<p>
Screenshot of error <a href="https://i.stack.imgur.com/IVWIk.jpg" rel="noreferrer"><img src="https://i.stack.imgur.com/IVWIk.jpg" alt="Log Snapshot"></a>
</p>
</section>
<section id="answer-2-score-145-1" class="level4">
<h4>Answer 2 (score 145)</h4>
<p>This seems to be an issue relating to the recent update. A temporary solution is to launch emulator from within the <code>/path/to/android-sdk/tools</code> directory in the commandline.</p>
<p>See <a href="https://code.google.com/p/android/issues/detail?id=235461" rel="noreferrer">https://code.google.com/p/android/issues/detail?id=235461</a> to follow the issue.</p>
</section>
<section id="answer-3-score-100" class="level4">
<h4>Answer 3 (score 100)</h4>
<p>All other answers did not work for me as “Android Emulator” was not installed with a standard installation of Android Studio. Make sure you have installed it and then try other answers if required.<a href="https://i.stack.imgur.com/UVnup.png" rel="noreferrer"><img src="https://i.stack.imgur.com/UVnup.png" alt="enter image description here"></a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="set-qlineedit-to-accept-only-numbers-score-82113-in-2013" class="level3">
<h3>56: Set QLineEdit to accept only numbers (score <a href="https://stackoverflow.com/q/13422995.html">82113</a> in 2013)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<p>I have a <code>QLineEdit</code> where the user should input only numbers.</p>
<p>So is there a numbers-only setting for <code>QLineEdit</code>?</p>
</section>
<section id="answer-accepted-score-113" class="level4">
<h4>Answer accepted (score 113)</h4>
<p><code>QLineEdit::setValidator()</code>, for example:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb203-1"><a href="#cb203-1"></a>myLineEdit-&gt;setValidator( new QIntValidator(<span class="dv">0</span>, <span class="dv">100</span>, this) );</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb204-1"><a href="#cb204-1"></a>myLineEdit-&gt;setValidator( new QDoubleValidator(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">2</span>, this) );</span></code></pre></div>
<p>See: <a href="http://doc.qt.io/qt-5/qintvalidator.html" rel="noreferrer">QIntValidator</a>, <a href="http://doc.qt.io/qt-5/qdoublevalidator.html" rel="noreferrer">QDoubleValidator</a>, <a href="http://doc.qt.io/qt-5/qlineedit.html#setValidator" rel="noreferrer">QLineEdit::setValidator</a></p>
</section>
<section id="answer-2-score-22-2" class="level4">
<h4>Answer 2 (score 22)</h4>
<p>The best is <a href="http://doc.qt.io/qt-4.8/qspinbox.html" rel="noreferrer"><code>QSpinBox</code></a>.</p>
<p>And for a double value use <a href="http://doc.qt.io/qt-4.8/qdoublespinbox.html" rel="noreferrer"><code>QDoubleSpinBox</code></a>.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb205-1"><a href="#cb205-1"></a>QSpinBox myInt;</span>
<span id="cb205-2"><a href="#cb205-2"></a>myInt.setMinimum(-<span class="dv">5</span>);</span>
<span id="cb205-3"><a href="#cb205-3"></a>myInt.setMaximum(<span class="dv">5</span>);</span>
<span id="cb205-4"><a href="#cb205-4"></a>myInt.setSingleStep(<span class="dv">1</span>);<span class="co">// Will increment the current value with 1 (if you use up arrow key) (if you use down arrow key =&gt; -1)</span></span>
<span id="cb205-5"><a href="#cb205-5"></a>myInt.setValue(<span class="dv">2</span>);<span class="co">// Default/begining value</span></span>
<span id="cb205-6"><a href="#cb205-6"></a>myInt.value();<span class="co">// Get the current value</span></span>
<span id="cb205-7"><a href="#cb205-7"></a><span class="co">//connect(&amp;myInt, SIGNAL(valueChanged(int)), this, SLOT(myValueChanged(int)));</span></span></code></pre></div>
</section>
<section id="answer-3-score-7" class="level4">
<h4>Answer 3 (score 7)</h4>
<p>Why don’t you use a <code>QSpinBox</code> for this purpose ? You can set the up/down buttons invisible with the following line of codes:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb206-1"><a href="#cb206-1"></a><span class="co">// ...</span></span>
<span id="cb206-2"><a href="#cb206-2"></a>QSpinBox* spinBox = new QSpinBox( this );</span>
<span id="cb206-3"><a href="#cb206-3"></a>spinBox-&gt;setButtonSymbols( QAbstractSpinBox::NoButtons ); <span class="co">// After this it looks just like a QLineEdit.</span></span>
<span id="cb206-4"><a href="#cb206-4"></a><span class="co">//...</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-creator-needs-a-compiler-set-up-to-build.-configure-a-compiler-in-the-kit-options-score-81825-in-2016" class="level3">
<h3>57: Qt Creator needs a compiler set up to build. Configure a compiler in the kit options (score <a href="https://stackoverflow.com/q/14700965.html">81825</a> in 2016)</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>
I Have Installed Qt Creator5 with latest binaries. but when i am running any program it is giving me this error.
</p>
<p><strong>:-1: error: Qt Creator needs a compiler set up to build. Configure a compiler in the kit options.</strong></p>
<p>
i have searched the whole internet for answer but its inadequate and not helping. kindly reply the way to get rid of this error.
</p>
</section>
<section id="answer-accepted-score-43" class="level4">
<h4>Answer accepted (score 43)</h4>
<p>i was also having the same problem so what i did is</p>
<p><strong>For linux</strong></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb207-1"><a href="#cb207-1"></a>sudo apt-get install g++ </span>
<span id="cb207-2"><a href="#cb207-2"></a>sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev</span></code></pre></div>
<p>and then closed the qt creator and restarted it and it worked</p>
<p>i do not know which of the above two made it work but it worked !!</p>
<p><strong>For Windows</strong></p>
<p>Below given solution have worked for few people. so it is worth a try.</p>
<p>
Delete this file <code>C:\Users\AppData\Roaming\QtProject\qtcreator\toolchains.xml</code> to solve the problem.
</p>
</section>
<section id="answer-2-score-13-1" class="level4">
<h4>Answer 2 (score 13)</h4>
<p>For me on Windows 7 this was solved by clicking on the arrow icon next to the computer icon on the bottom left of the Qt Creator screen above green arrows and then double clicked a compiler on the list and rebuild the project.</p>
</section>
<section id="answer-3-score-8-4" class="level4">
<h4>Answer 3 (score 8)</h4>
<p><strong>* for windows users only *</strong></p>
<p>Before continuing to next steps make sure u have downloaded latest version of Qt.</p>
<ol>
<li>
Download and install minGW-64-bit from link: <a href="https://sourceforge.net/projects/mingw-w64/files/latest/download" rel="noreferrer">https://sourceforge.net/projects/mingw-w64/files/latest/download</a>
</li>
<li>
Remember The directory to which you install minGW.
</li>
<li>
Open Qt creator and go to tools -&gt; options -&gt; Build and Run
</li>
<li>
<p>
In Compilers tab Select add -&gt; MinGW -&gt;<br> Name: MinGW <br> path: Browse for <strong>mingw-w64.bat</strong> (you will find this file in the directory in which you have installed MinGW).<br>ABI: x86 Windows msvc2015 pe 64bit <br> <br> Don’t forget to apply your edits.
</p>
</li>
<li>
<p>
Go to Kit -&gt; add <br> Name: GCC <br> Device Type: Desktop<br> Device: Local PC (Default for desktop)<br> Compiler: minGW<br> Qt Version: select newest version<br><br> Apply changes and restart qt
</p>
</li>
</ol>
<p>
While creating new project make sure you use GCC as kit <br><br> If it still doesn’t works Click computer icon on bottom left above play button -&gt; GCC -&gt; Build
</p>
<p><br> OR <br></p>
<p>Go to projects (It is in the menu on left hand side) -&gt; Build Steps -&gt; make -&gt; Override minGw31-make.exe -&gt; browse to path in which you have installed minGW/bin-make.exe<br>Do the same for clean steps too</p>
<p><br></p>
<p>If u Still get any error after these steps try setting <strong>Environment Variables</strong></p>
<ol>
<li>
Press Win+Q
</li>
<li>
Type " Environment variables "
</li>
<li>
click on " Edit the system environment variables "
</li>
<li>
System Properties -&gt; Advance -&gt; Environment Variables
</li>
<li>
Click on path (<strong>NOTE : Use These steps very carefully and do not mess with other options</strong>)
</li>
<li>
Click edit
</li>
<li>
press right arrow to go to end of text
</li>
<li>
type a semi-colon (if it isn’t at the end of it because all the system paths are distinguished by a semi-colon)
</li>
<li>
paste path “MinGW_installation_directory” (In my case it was “G:”). <strong>Make sure you copy and paste CORRECT path</strong>
</li>
<li>
Click OK and apply the changes.
</li>
</ol>
<p><br>That should do it !!!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-emit-cross-thread-signal-in-qt-score-81768-in-2018" class="level3">
<h3>58: How to emit cross-thread signal in Qt? (score <a href="https://stackoverflow.com/q/638251.html">81768</a> in 2018)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>Qt documentation states that signals and slots can be <code>direct</code>, <code>queued</code> and <code>auto</code>.</p>
<p>It also stated that if object that owns slot ‘lives’ in a thread different from object that owns signal, emitting such signal will be like posting message - signal emit will return instantly and slot method will be called in target thread’s event loop.</p>
<p>Unfortunately, documentation do not specify that ‘lives’ stands for and no examples is available. I have tried the following code:</p>
<p><strong><code>main.h:</code></strong></p>
<div class="sourceCode" id="cb208"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb208-1"><a href="#cb208-1"></a>class CThread1 : public QThread</span>
<span id="cb208-2"><a href="#cb208-2"></a>{</span>
<span id="cb208-3"><a href="#cb208-3"></a>Q_OBJECT</span>
<span id="cb208-4"><a href="#cb208-4"></a>public:</span>
<span id="cb208-5"><a href="#cb208-5"></a>    <span class="dt">void</span> run( <span class="dt">void</span> )</span>
<span id="cb208-6"><a href="#cb208-6"></a>    {</span>
<span id="cb208-7"><a href="#cb208-7"></a>        msleep( <span class="dv">200</span> );</span>
<span id="cb208-8"><a href="#cb208-8"></a>        std::cout &lt;&lt; <span class="st">&quot;thread 1 started&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb208-9"><a href="#cb208-9"></a>        MySignal();</span>
<span id="cb208-10"><a href="#cb208-10"></a>        exec();</span>
<span id="cb208-11"><a href="#cb208-11"></a>    }</span>
<span id="cb208-12"><a href="#cb208-12"></a>signals:</span>
<span id="cb208-13"><a href="#cb208-13"></a>    <span class="dt">void</span> MySignal( <span class="dt">void</span> );</span>
<span id="cb208-14"><a href="#cb208-14"></a>};</span>
<span id="cb208-15"><a href="#cb208-15"></a></span>
<span id="cb208-16"><a href="#cb208-16"></a>class CThread2 : public QThread</span>
<span id="cb208-17"><a href="#cb208-17"></a>{</span>
<span id="cb208-18"><a href="#cb208-18"></a>Q_OBJECT</span>
<span id="cb208-19"><a href="#cb208-19"></a>public:</span>
<span id="cb208-20"><a href="#cb208-20"></a>    <span class="dt">void</span> run( <span class="dt">void</span> )</span>
<span id="cb208-21"><a href="#cb208-21"></a>    {</span>
<span id="cb208-22"><a href="#cb208-22"></a>        std::cout &lt;&lt; <span class="st">&quot;thread 2 started&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb208-23"><a href="#cb208-23"></a>        exec();</span>
<span id="cb208-24"><a href="#cb208-24"></a>    }</span>
<span id="cb208-25"><a href="#cb208-25"></a>public slots:</span>
<span id="cb208-26"><a href="#cb208-26"></a>    <span class="dt">void</span> MySlot( <span class="dt">void</span> )</span>
<span id="cb208-27"><a href="#cb208-27"></a>    {</span>
<span id="cb208-28"><a href="#cb208-28"></a>        std::cout &lt;&lt; <span class="st">&quot;slot called&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb208-29"><a href="#cb208-29"></a>    }</span>
<span id="cb208-30"><a href="#cb208-30"></a>};</span></code></pre></div>
<p><strong><code>main.cpp:</code></strong></p>
<div class="sourceCode" id="cb209"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb209-1"><a href="#cb209-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb209-2"><a href="#cb209-2"></a>{</span>
<span id="cb209-3"><a href="#cb209-3"></a>    QCoreApplication a(argc, argv);</span>
<span id="cb209-4"><a href="#cb209-4"></a>    CThread1 oThread1;</span>
<span id="cb209-5"><a href="#cb209-5"></a>    CThread2 oThread2;</span>
<span id="cb209-6"><a href="#cb209-6"></a>    QObject::connect( &amp; oThread1, SIGNAL( MySignal() ),</span>
<span id="cb209-7"><a href="#cb209-7"></a>        &amp; oThread2, SLOT( MySlot() ) );</span>
<span id="cb209-8"><a href="#cb209-8"></a>    oThread1.start();</span>
<span id="cb209-9"><a href="#cb209-9"></a>    oThread2.start();</span>
<span id="cb209-10"><a href="#cb209-10"></a>    oThread1.wait();</span>
<span id="cb209-11"><a href="#cb209-11"></a>    oThread2.wait();</span>
<span id="cb209-12"><a href="#cb209-12"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb209-13"><a href="#cb209-13"></a>}</span></code></pre></div>
<p>Output is:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb210-1"><a href="#cb210-1"></a>thread <span class="dv">2</span> started</span>
<span id="cb210-2"><a href="#cb210-2"></a>thread <span class="dv">1</span> started</span></code></pre></div>
<p><code>MySlot()</code> is never called :(. What I’m doing wrong?</p>
</section>
<section id="answer-accepted-score-46-1" class="level4">
<h4>Answer accepted (score 46)</h4>
<p>There are quite a few problems with your code :</p>
<ul>
<li>
like said by Evan the emit keyword is missing
</li>
<li>
all your objects live in the main thread, only the code in the run methods live in other threads, which means that the MySlot slot would be called in the main thread and I’m not sure that’s what you want
</li>
<li>
your slot will never be called since the main event loop will never been launched : your two calls to wait() will only timeout after a very long time (and you’ll probably kill your application before that happens) and I don’t think that’s what you want either, anyway they really have no use in your code.
</li>
</ul>
<p>This code would most likely work (though I have not tested it) and I think it does what you want it to do :</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb211-1"><a href="#cb211-1"></a>class MyObject : public QObject</span>
<span id="cb211-2"><a href="#cb211-2"></a>{</span>
<span id="cb211-3"><a href="#cb211-3"></a>    Q_OBJECT</span>
<span id="cb211-4"><a href="#cb211-4"></a>public slots:</span>
<span id="cb211-5"><a href="#cb211-5"></a>    <span class="dt">void</span> MySlot( <span class="dt">void</span> )</span>
<span id="cb211-6"><a href="#cb211-6"></a>    {</span>
<span id="cb211-7"><a href="#cb211-7"></a>        std::cout &lt;&lt; <span class="st">&quot;slot called&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb211-8"><a href="#cb211-8"></a>    }</span>
<span id="cb211-9"><a href="#cb211-9"></a>};</span>
<span id="cb211-10"><a href="#cb211-10"></a></span>
<span id="cb211-11"><a href="#cb211-11"></a>class CThread1 : public QThread</span>
<span id="cb211-12"><a href="#cb211-12"></a>{</span>
<span id="cb211-13"><a href="#cb211-13"></a>    Q_OBJECT</span>
<span id="cb211-14"><a href="#cb211-14"></a>public:</span>
<span id="cb211-15"><a href="#cb211-15"></a>    <span class="dt">void</span> run( <span class="dt">void</span> )</span>
<span id="cb211-16"><a href="#cb211-16"></a>    {</span>
<span id="cb211-17"><a href="#cb211-17"></a>        std::cout &lt;&lt; <span class="st">&quot;thread 1 started&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb211-18"><a href="#cb211-18"></a>        <span class="dt">int</span> i = <span class="dv">0</span>;</span>
<span id="cb211-19"><a href="#cb211-19"></a>        <span class="cf">while</span>(<span class="dv">1</span>)</span>
<span id="cb211-20"><a href="#cb211-20"></a>        {</span>
<span id="cb211-21"><a href="#cb211-21"></a>           msleep( <span class="dv">200</span> );</span>
<span id="cb211-22"><a href="#cb211-22"></a>           i++;</span>
<span id="cb211-23"><a href="#cb211-23"></a>           <span class="cf">if</span>(i==<span class="dv">1000</span>)</span>
<span id="cb211-24"><a href="#cb211-24"></a>              emit MySignal();</span>
<span id="cb211-25"><a href="#cb211-25"></a>        }</span>
<span id="cb211-26"><a href="#cb211-26"></a>    }</span>
<span id="cb211-27"><a href="#cb211-27"></a>signals:</span>
<span id="cb211-28"><a href="#cb211-28"></a>    <span class="dt">void</span> MySignal( <span class="dt">void</span> );</span>
<span id="cb211-29"><a href="#cb211-29"></a>};</span>
<span id="cb211-30"><a href="#cb211-30"></a></span>
<span id="cb211-31"><a href="#cb211-31"></a>class CThread2 : public QThread</span>
<span id="cb211-32"><a href="#cb211-32"></a>{</span>
<span id="cb211-33"><a href="#cb211-33"></a>    Q_OBJECT</span>
<span id="cb211-34"><a href="#cb211-34"></a>public:</span>
<span id="cb211-35"><a href="#cb211-35"></a>    <span class="dt">void</span> run( <span class="dt">void</span> )</span>
<span id="cb211-36"><a href="#cb211-36"></a>    {</span>
<span id="cb211-37"><a href="#cb211-37"></a>        std::cout &lt;&lt; <span class="st">&quot;thread 2 started&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb211-38"><a href="#cb211-38"></a>        exec();</span>
<span id="cb211-39"><a href="#cb211-39"></a>    }</span>
<span id="cb211-40"><a href="#cb211-40"></a>};</span>
<span id="cb211-41"><a href="#cb211-41"></a></span>
<span id="cb211-42"><a href="#cb211-42"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])</span>
<span id="cb211-43"><a href="#cb211-43"></a>{</span>
<span id="cb211-44"><a href="#cb211-44"></a>    QCoreApplication a(argc, argv);</span>
<span id="cb211-45"><a href="#cb211-45"></a>    CThread1 oThread1;</span>
<span id="cb211-46"><a href="#cb211-46"></a>    CThread2 oThread2;</span>
<span id="cb211-47"><a href="#cb211-47"></a>    MyObject myObject;</span>
<span id="cb211-48"><a href="#cb211-48"></a>    QObject::connect( &amp; oThread1, SIGNAL( MySignal() ),</span>
<span id="cb211-49"><a href="#cb211-49"></a>        &amp; myObject, SLOT( MySlot() ) );</span>
<span id="cb211-50"><a href="#cb211-50"></a>    oThread2.start();</span>
<span id="cb211-51"><a href="#cb211-51"></a>    myObject.moveToThread(&amp;oThread2)</span>
<span id="cb211-52"><a href="#cb211-52"></a>    oThread1.start();</span>
<span id="cb211-53"><a href="#cb211-53"></a>    <span class="cf">return</span> a.exec();</span>
<span id="cb211-54"><a href="#cb211-54"></a>}</span></code></pre></div>
<p>Now MyObject will live in thread2 (thanks to moveToThread).</p>
<p>MySignal should be sent from thread1 (thought I’m not sure on that one, it might be sent from main thread, it doesn’t really matter).</p>
<p>No event loop is needed in thread1 since emitting a signal doesn’t need an event loop. An event loop is needed in thread2 (lanched by exec()) to receive the signal.</p>
<p>MySlot will be called in thread2.</p>
</section>
<section id="answer-2-score-36" class="level4">
<h4>Answer 2 (score 36)</h4>
<h5>
Do not subclass QThread for Qt 4.4+
</h2>
<p>While Aiua’s answer is good, I want to point out some issues with QThread and Qt 4.6 or 4.7.</p>
<p>This article sums it up: <a href="http://blog.qt.io/blog/2010/06/17/youre-doing-it-wrong/" rel="noreferrer">http://blog.qt.io/blog/2010/06/17/youre-doing-it-wrong/</a></p>
<h5>
Lack of Documentation on Qt’s part
</h2>
<p>Unfortunately the problem stems from a lack of updates to documentation. Prior to Qt 4.4 QThread had no default run() implementation, which meant that you had to subclass QThread in order to use it.</p>
<p>If you’re using Qt 4.6 or 4.7 then you almost certainly should <em>not</em> subclass QThread.</p>
<h5>
Use moveToThread
</h2>
<p>The key to getting slots to execute in a worker thread is to use the moveToThread method as Aiua pointed out.</p>
</section>
<section id="answer-3-score-0-3" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>you should emit the signal to start your thread function like</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb212-1"><a href="#cb212-1"></a>emit operateCut(examId,examName_examTemplate[examName].studentIdRec,examName_examTemplate[examName].choiceRecA,examName_examTemplate[examName].choiceRecB,examName_examTemplate[examName].objectRecA,examName_examTemplate[examName].objectRecB);</span></code></pre></div>
<p>you can add more than one argument in this signal</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-static-linking-and-deployment-score-81137-in" class="level3">
<h3>59: Qt static linking and deployment (score <a href="https://stackoverflow.com/q/1011197.html">81137</a> in )</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>I am trying to deploy(release to public) a simple qt application I made recently, but got stuck at static linking qt libs.</p>
<p>I followed the guide on qt docs to re-build qt and my app statically. But the release build still require qtgui / qtcore dll for no apparent reasons, I wonder if anyone has seen this kind of problems before ? Or even better, has successfully resolved it ?</p>
<p><a href="http://doc.qtsoftware.com/4.5/deployment-windows.html" rel="noreferrer">http://doc.qtsoftware.com/4.5/deployment-windows.html</a></p>
</section>
<section id="answer-2-score-42-2" class="level4">
<h4>Answer 2 (score 42)</h4>
<p>I wrote <a href="http://web.archive.org/web/20161222135358/http://www.formortals.com/how-to-statically-link-qt-4/" rel="noreferrer">a guide to static linking</a></p>
<p>
and <a href="http://web.archive.org/web/20161222125623/http://www.formortals.com/build-qt-static-small-microsoft-intel-gcc-compiler/" rel="noreferrer">How to build Qt static with multiple compilers and keep it small</a>
</p>
<p>
(because it can get pretty big, especially for simple programs). You may also want to check out the BitRock installer, which is free for open source projects.
</p>
<p>
In short, it turns out to be a little more complex if you are using anything Qt thinks of as a plugin, such as support for most image types (JPEG, GIF) or databases. For example, if you want to include support for Oracle DBMS and GIF images for your icons, you add the following to your .PRO file:
</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb213-1"><a href="#cb213-1"></a>QTPLUGIN += qsqloci qgif</span>
<span id="cb213-2"><a href="#cb213-2"></a>CONFIG += <span class="dt">static</span></span></code></pre></div>
<p>You will then need to:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb214-1"><a href="#cb214-1"></a><span class="pp">#include </span><span class="im">&lt;QtPlugin&gt;</span></span></code></pre></div>
<p>in your project, and import any plugins used. You need to change these settings back order to get it to compile with dynamic linking again (like when debugging or adding features), though this can be easily automated. There are also considerations when building the Qt libraries for use with static linking, though the Qt instructions will at least get you started.</p>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>With Qt 5.5, things are quite easy. There are following orthogonal settings that you pass to <code>configure</code> when building Qt:</p>
<ol>
<li>
<p>
Do you want a static Qt library?
</p>
<code>-static</code> option should be passed to <code>configure</code>
</li>
<li>
<p>
Do you want the build of Qt, and of your application, to use a static C++ runtime?
</p>
<code>-static-runtime</code> option should be passed to <code>configure</code>
</li>
<li>
<p>
Do you want XP targeting?
</p>
<p><code>-target xp</code> option should be passed to <code>configure</code></p>
<p>Additionally, follow the instructions from <a href="http://blogs.msdn.com/b/vcblog/archive/2012/10/08/windows-xp-targeting-with-c-in-visual-studio-2012.aspx" rel="noreferrer">this blog post</a>.</p>
Qt Creator didn’t support XP targeting automagically at least until v.3.5.0 since it doesn’t set up the environment for the build tools properly. You have to modify the build environment manually <a href="http://blogs.msdn.com/b/vcblog/archive/2012/10/08/windows-xp-targeting-with-c-in-visual-studio-2012.aspx" rel="noreferrer">per the blog post</a>.
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="can-the-open-file-dialog-be-used-to-select-a-folder-score-80712-in-2010" class="level3">
<h3>60: can the Open File dialog be used to select a Folder? (score <a href="https://stackoverflow.com/q/3941917.html">80712</a> in 2010)</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<p>The “Browse For Folder” Windows dialog is very inconvenient because:</p>
<ul>
<li>
it has no Path box where I can paste the path I want (eg from Total Commander)
</li>
<li>
it always starts from the Desktop with everything closed
</li>
</ul>
<p>Is there a way to use the “Open File” dialog (which is much better) to select a Folder? Some flag or option or something?</p>
<p>Context: the <a href="http://bugs.calibre-ebook.com/ticket/7160" rel="noreferrer">calibre eLibrary manager</a> which is written in Python and Qt.</p>
<p>
It currently displays as on the left. I’d like it to display as on the right <img src="https://i.stack.imgur.com/CzxbK.gif" alt="BrowserFileDialog">
</p>
<p>
or even better, as the Open File dialog: <img src="https://i.stack.imgur.com/oy8zG.png" alt="OpenFileDialog">
</p>
</section>
<section id="answer-2-score-90-1" class="level4">
<h4>Answer 2 (score 90)</h4>
<p>You can try this one:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb215-1"><a href="#cb215-1"></a>QString QFileDialog::getExistingDirectory ( QWidget * parent = <span class="dv">0</span>, <span class="dt">const</span> QString &amp; caption = QString(), <span class="dt">const</span> QString &amp; dir = QString(), Options options = ShowDirsOnly ) [<span class="dt">static</span>]</span></code></pre></div>
<p>This one is used to choose a directory, and will popup a dialog like you show at last.</p>
<p>Demo:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb216-1"><a href="#cb216-1"></a> QString dir = QFileDialog::getExistingDirectory(this, tr(<span class="st">&quot;Open Directory&quot;</span>),</span>
<span id="cb216-2"><a href="#cb216-2"></a>                                             <span class="st">&quot;/home&quot;</span>,</span>
<span id="cb216-3"><a href="#cb216-3"></a>                                             QFileDialog::ShowDirsOnly</span>
<span id="cb216-4"><a href="#cb216-4"></a>                                             | QFileDialog::DontResolveSymlinks);</span></code></pre></div>
</section>
<section id="answer-3-score-22" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>You can set the file mode in <code>QFileDialog</code> to <code>QFileDialog::Directory</code></p>
<p>see <a href="http://qt-project.org/doc/qt-5.0/qtwidgets/qfiledialog.html#FileMode-enum" rel="noreferrer">http://qt-project.org/doc/qt-5.0/qtwidgets/qfiledialog.html#FileMode-enum</a></p>
<p>Or You can use <code>QFileDialog::setOption</code> with value <code>QFileDialog::ShowDirsOnly</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-configure-cdb-in-qt-creator-score-80287-in-2017" class="level3">
<h3>61: How to configure CDB in Qt Creator? (score <a href="https://stackoverflow.com/q/9975949.html">80287</a> in 2017)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<p>The question <a href="https://stackoverflow.com/q/5318691/559085">here</a> is the same as mine but the solution there is not working for me. I am using QtCreator 2.4.1 on Windows 7. When i try to debug a simple hello world app the message displayed is: “The preferred debugger engine for debugging binaries of type ‘x86-windows-msvc2010-pe-32bit’ is not available….Details: There is no CDB binary available for binaries in format ’x86-windows-msvc2010-pe-32bit”</p>
<p>When i found that cdb.exe was not on my system i had Windows SDK installed with debugger tools and the current location of cdb.exe is “C:Files (x86)Kits\8.0.exe” and “C:Files (x86)Kits\8.0.exe”,</p>
<p>In the CDB tab i configured symbol server as well as the path of CDB.exe, but in vain!</p>
<p>
QtCreator-&gt;Tools-&gt;options-&gt;Debugger-&gt;CDB Tab-&gt;has the following fields:<br> Additional arguments<br> use CDB console<br> Symbol Paths<br> Source Paths<br> Correct breakpoint location etc…
</p>
<p>Can somebody kindly explain in detail what these mean and what values are expected here. Has anybody successfully debugged any applicaiton using Qt Creator.</p>
<hr>
<p>
Please refer this link:<br> <a href="http://qt-project.org/forums/viewthread/16018/" rel="noreferrer">http://qt-project.org/forums/viewthread/16018/</a>
</p>
</section>
<section id="answer-accepted-score-58-1" class="level4">
<h4>Answer accepted (score 58)</h4>
<p>I was having the same problems too, and finally figured out how to solve this. Styne666 gave me a hint. Do the following:</p>
<ol>
<li>
Tools
</li>
<li>
Options…
</li>
<li>
Build &amp; Run
</li>
<li>
Tool Chains
</li>
<li>
Use the “Clone” button to make a copy of each of the auto-detected MSVC items
</li>
<li>
In each of the cloned items, you can specify the debugger in the “Debugger” field (e.g. C:FilesKits\8.0.exe)
</li>
<li>
After this everything seems to work…
</li>
</ol>
<p>I should further mention that if you are running a 64-bit version of Windows and a 32-bit version of Qt Creator like I am, you need to make sure that you are pointing to the 32-bit versions of cdb (of which there are x86 and x64 <em>target</em> versions). So for the 32-bit target builds I run this:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb217-1"><a href="#cb217-1"></a>C:\Program Files (x86)\Windows Kits\<span class="fl">8.0</span>\Debuggers\x86\cdb.exe</span></code></pre></div>
<p>And for x64 builds I run this:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb218-1"><a href="#cb218-1"></a>C:\Program Files (x86)\Windows Kits\<span class="fl">8.0</span>\Debuggers\x64\cdb.exe</span></code></pre></div>
<p>The tricky part is that it is somewhat difficult to get Microsoft to install the 32-bit version of the debugging tools on your 64-bit machine. A co-worker tried to do so recently and said that he needed to install the Windows 8 tools in order to have the option to do that - the Windows 7 versions would not let you.</p>
</section>
<section id="answer-2-score-4" class="level4">
<h4>Answer 2 (score 4)</h4>
<p>Took me some time to figure out this with Qt Creator 2.6.0 (on Windows 7), so here it is:</p>
<ul>
<li>
Tools, Options…
</li>
<li>
Build &amp; Run, Kits tab, select “Desktop (default)” (under Manual)
</li>
<li>
Click the Manage button and select Edit on the right side of “Debugger:”
</li>
<li>
Engine: CDB, Binary: C:FilesTools for Windows (x64).exe
</li>
</ul>
</section>
<section id="answer-3-score-2-3" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>Depending on the version of Visual Studio you have installed you can find the CDB.exe in different locations. Check if it is available in your system by searching in C: drive.</p>
<p>In my case I have Windows 7 (x64) with Visual Studio 2012 Express and Visual Studio 2013 installed and I had to install Microsoft Windows SDK for Windows 7 available <a href="http://www.microsoft.com/en-au/download/confirmation.aspx?id=8279" rel="nofollow">here</a> in order to have CDB.exe in my system. After the install, QT Creator was able to detect CDB.exe in this location: C:FilesTools for Windows (x64).exe.</p>
<p>The only thing you need from the SDK is the Common Utilities | Debugging Tools For Windows.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-tutorials-for-beginners-score-79516-in-2015" class="level3">
<h3>62: Qt tutorials for beginners (score <a href="https://stackoverflow.com/q/5734253.html">79516</a> in 2015)</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>I want to ask about resources for learning <code>Qt</code> for <strong>beginners</strong>. What resources do you recommend for that?</p>
</section>
<section id="answer-2-score-26" class="level4">
<h4>Answer 2 (score 26)</h4>
<p>Have also a look at the <a href="https://www.youtube.com/watch?v=6KtOzh0StTc&amp;list=PL2D1942A4688E9D63&amp;spfreload=10" rel="noreferrer">Qt programming videos</a> on <em>VoidRealms</em>’ Youtube channel.</p>
</section>
<section id="answer-3-score-9-1" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>The transition from C++ to QT may seem bit awkward at first. But don’t be afraid its somewhat easier than c++ when you get more familiar with it.</p>
<p>
To start of I would like to recommend the first few videos of <a href="http://www.youtube.com/watch?v=6KtOzh0StTc&amp;playnext=1&amp;list=PL2D1942A4688E9D63&amp;feature=results_main" rel="noreferrer">voidRealms youvideos on c++ QT</a> to get a feel on QT framework. All of them are really good. Try to do the examples by your own. You will be quite comfortable with the framework after watching these videos.
</p>
<p>
Next if possible try to refer <a href="https://rads.stackoverflow.com/amzn/click/com/1590598318" rel="noreferrer" rel="nofollow noreferrer">Foundations of Qt Development (Expert’s Voice in Open Source)</a> which is also a very good reference for QT. After going through few chapters you will be very accustomed to the Framework.
</p>
<p>Reading C++ GUI Programming with Qt 4 which is a usually recommended book will look good if you have this basic background on QT.</p>
<p>I would also like to recommend the On-line Reference Documentation which will give a great depth in to QT when going forward.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="undefined-reference-to-vtable.-trying-to-compile-a-qt-project-score-78650-in-2017" class="level3">
<h3>63: Undefined reference to vtable. Trying to compile a Qt project (score <a href="https://stackoverflow.com/q/1552069.html">78650</a> in 2017)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>I’m using <a href="http://en.wikipedia.org/wiki/Code::Blocks" rel="noreferrer">Code::Blocks</a> 8.02 and the mingw 5.1.6 compiler. I’m getting this error when I compile my Qt project:</p>
<blockquote>
<p>
C:and Settings Fuzz_interface.cpp|33|undefined reference to `vtable for AddressBook’
</p>
</blockquote>
<p>File AddressBook.h:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb219-1"><a href="#cb219-1"></a> <span class="pp">#ifndef ADDRESSBOOK_H</span></span>
<span id="cb219-2"><a href="#cb219-2"></a> <span class="pp">#define ADDRESSBOOK_H</span></span>
<span id="cb219-3"><a href="#cb219-3"></a></span>
<span id="cb219-4"><a href="#cb219-4"></a> <span class="pp">#include </span><span class="im">&lt;QWidget&gt;</span></span>
<span id="cb219-5"><a href="#cb219-5"></a></span>
<span id="cb219-6"><a href="#cb219-6"></a> class QLabel;</span>
<span id="cb219-7"><a href="#cb219-7"></a> class QLineEdit;</span>
<span id="cb219-8"><a href="#cb219-8"></a> class QTextEdit;</span>
<span id="cb219-9"><a href="#cb219-9"></a></span>
<span id="cb219-10"><a href="#cb219-10"></a> class AddressBook : public QWidget</span>
<span id="cb219-11"><a href="#cb219-11"></a> {</span>
<span id="cb219-12"><a href="#cb219-12"></a>     Q_OBJECT</span>
<span id="cb219-13"><a href="#cb219-13"></a></span>
<span id="cb219-14"><a href="#cb219-14"></a> public:</span>
<span id="cb219-15"><a href="#cb219-15"></a>     AddressBook(QWidget *parent = <span class="dv">0</span>);</span>
<span id="cb219-16"><a href="#cb219-16"></a></span>
<span id="cb219-17"><a href="#cb219-17"></a> private:</span>
<span id="cb219-18"><a href="#cb219-18"></a>     QLineEdit *nameLine;</span>
<span id="cb219-19"><a href="#cb219-19"></a>     QTextEdit *addressText;</span>
<span id="cb219-20"><a href="#cb219-20"></a> };</span>
<span id="cb219-21"><a href="#cb219-21"></a></span>
<span id="cb219-22"><a href="#cb219-22"></a> <span class="pp">#endif</span></span></code></pre></div>
<p>File AddressBook.cpp:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb220-1"><a href="#cb220-1"></a><span class="pp">#include </span><span class="im">&lt;QtGui&gt;</span></span>
<span id="cb220-2"><a href="#cb220-2"></a><span class="pp">#include </span><span class="im">&quot;addressbook.h&quot;</span></span>
<span id="cb220-3"><a href="#cb220-3"></a></span>
<span id="cb220-4"><a href="#cb220-4"></a>AddressBook::AddressBook(QWidget *parent)</span>
<span id="cb220-5"><a href="#cb220-5"></a>     : QWidget(parent)</span>
<span id="cb220-6"><a href="#cb220-6"></a>{</span>
<span id="cb220-7"><a href="#cb220-7"></a>    QLabel *nameLabel = new QLabel(tr(<span class="st">&quot;Name:&quot;</span>));</span>
<span id="cb220-8"><a href="#cb220-8"></a>    nameLine = new QLineEdit;</span>
<span id="cb220-9"><a href="#cb220-9"></a></span>
<span id="cb220-10"><a href="#cb220-10"></a>    QLabel *addressLabel = new QLabel(tr(<span class="st">&quot;Address:&quot;</span>));</span>
<span id="cb220-11"><a href="#cb220-11"></a>    addressText = new QTextEdit;</span>
<span id="cb220-12"><a href="#cb220-12"></a></span>
<span id="cb220-13"><a href="#cb220-13"></a>    QGridLayout *mainLayout = new QGridLayout;</span>
<span id="cb220-14"><a href="#cb220-14"></a>    mainLayout-&gt;addWidget(nameLabel, <span class="dv">0</span>, <span class="dv">0</span>);</span>
<span id="cb220-15"><a href="#cb220-15"></a>    mainLayout-&gt;addWidget(nameLine, <span class="dv">0</span>, <span class="dv">1</span>);</span>
<span id="cb220-16"><a href="#cb220-16"></a>    mainLayout-&gt;addWidget(addressLabel, <span class="dv">1</span>, <span class="dv">0</span>, Qt::AlignTop);</span>
<span id="cb220-17"><a href="#cb220-17"></a>    mainLayout-&gt;addWidget(addressText, <span class="dv">1</span>, <span class="dv">1</span>);</span>
<span id="cb220-18"><a href="#cb220-18"></a></span>
<span id="cb220-19"><a href="#cb220-19"></a>    setLayout(mainLayout);</span>
<span id="cb220-20"><a href="#cb220-20"></a>    setWindowTitle(tr(<span class="st">&quot;Simple Address Book&quot;</span>));</span>
<span id="cb220-21"><a href="#cb220-21"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-43-1" class="level4">
<h4>Answer accepted (score 43)</h4>
<p><strong>Warning: Do not do this if you already have a .pro file - you’ll lose it!</strong></p>
<p>In order to automatically ensure that all moc cpp files are generated, you can get qmake to automatically generate a .pro file for you instead of writing one yourself.</p>
<p>Run</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb221-1"><a href="#cb221-1"></a>qmake -project</span></code></pre></div>
<p>in the project directory, and qmake will scan your directory for all C++ headers and source files to generate moc cpp files for.</p>
</section>
<section id="answer-2-score-47" class="level4">
<h4>Answer 2 (score 47)</h4>
<p>When using Qt Creator:</p>
<ol>
<li>
Build → Run qmake
</li>
<li>
Build → Rebuild All
</li>
</ol>
</section>
<section id="answer-3-score-16-1" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>The problem is almost certainly that you are not compiling or not linking in the generated moc_AddressBook.cpp file. (It should have been generated for you – you are running Qt’s <code>moc</code> on your code before compiling, right?)</p>
<p>To answer a little more thoroughly, the <code>Q_OBJECT</code> macro signals Qt’s <code>moc</code> tool to create an extra implementation file that contains the code necessary to support <code>QObject</code>’s meta-information system. If you had any signals or slots, it would do a few things for those as well.</p>
<p>An alternative solution might be to remove the <code>Q_OBJECT</code> macro. You probably don’t want to do this, but it would help the immediate problem, and it isn’t strictly necessary with the code that you’ve presented.</p>
<p>Also, I would note that your line:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb222-1"><a href="#cb222-1"></a><span class="pp">#include </span><span class="im">&quot;addressbook.h&quot;</span></span></code></pre></div>
<p>Should probably be:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb223-1"><a href="#cb223-1"></a><span class="pp">#include </span><span class="im">&quot;AddressBook.h&quot;</span></span></code></pre></div>
<p>based on how you presented the filenames in the question.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="convert-an-int-to-a-qstring-with-zero-padding-leading-zeroes-score-77961-in-2014" class="level3">
<h3>64: Convert an int to a QString with zero padding (leading zeroes) (score <a href="https://stackoverflow.com/q/2618414.html">77961</a> in 2014)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>I want to “stringify” a number and add zero-padding, like how <code>printf("%05d")</code> would add leading zeros if the number is less than 5 digits.</p>
</section>
<section id="answer-accepted-score-163" class="level4">
<h4>Answer accepted (score 163)</h4>
<p>Use this:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb224-1"><a href="#cb224-1"></a>QString number = QString(<span class="st">&quot;%1&quot;</span>).arg(yourNumber, <span class="dv">5</span>, <span class="dv">10</span>, QChar(<span class="ch">&#39;0&#39;</span>));</span></code></pre></div>
<p>5 here corresponds to 5 in <code>printf("%05d")</code>. 10 is the radix, you can put 16 to print the number in hex.</p>
</section>
<section id="answer-2-score-31" class="level4">
<h4>Answer 2 (score 31)</h4>
<p>QString QString::rightJustified ( int width, QChar fill = QLatin1Char( ’ ’ ), bool truncate = false ) const</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb225-1"><a href="#cb225-1"></a><span class="dt">int</span> myNumber = <span class="dv">99</span>;</span>
<span id="cb225-2"><a href="#cb225-2"></a>QString result;</span>
<span id="cb225-3"><a href="#cb225-3"></a>result = QString::number(myNumber).rightJustified(<span class="dv">5</span>, <span class="ch">&#39;0&#39;</span>);</span></code></pre></div>
<p>result is now 00099</p>
</section>
<section id="answer-3-score-17-2" class="level4">
<h4>Answer 3 (score 17)</h4>
<p><strong>The Short Example:</strong></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb226-1"><a href="#cb226-1"></a><span class="dt">int</span> myNumber = <span class="dv">9</span>;</span>
<span id="cb226-2"><a href="#cb226-2"></a></span>
<span id="cb226-3"><a href="#cb226-3"></a><span class="co">//Arg1: the number</span></span>
<span id="cb226-4"><a href="#cb226-4"></a><span class="co">//Arg2: how many 0 you want?</span></span>
<span id="cb226-5"><a href="#cb226-5"></a><span class="co">//Arg3: The base (10 - decimal, 16 hexadecimal - if you don&#39;t understand, choose 10)</span></span>
<span id="cb226-6"><a href="#cb226-6"></a><span class="co">//      It seems like only decimal can support negative numbers.</span></span>
<span id="cb226-7"><a href="#cb226-7"></a>QString number = QString(<span class="st">&quot;%1&quot;</span>).arg(myNumber, <span class="dv">2</span>, <span class="dv">10</span>, QChar(<span class="ch">&#39;0&#39;</span>)); </span>
<span id="cb226-8"><a href="#cb226-8"></a></span>
<span id="cb226-9"><a href="#cb226-9"></a>Output will be: <span class="er">09</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-cant-find--lgl-error-score-76629-in-2014" class="level3">
<h3>65: Qt: can’t find -lGL error (score <a href="https://stackoverflow.com/q/18406369.html">76629</a> in 2014)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>I just reinstalled QtCreator, created new project (<em>Qt Application</em>) an got this after compilation:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb227-1"><a href="#cb227-1"></a>/usr/bin/ld: **cannot find -lGL**</span>
<span id="cb227-2"><a href="#cb227-2"></a>collect2: error: ld returned <span class="dv">1</span> exit status</span>
<span id="cb227-3"><a href="#cb227-3"></a>make: *** [untitled1] Error <span class="dv">1</span></span>
<span id="cb227-4"><a href="#cb227-4"></a><span class="dv">18</span>:<span class="bn">07</span>:<span class="dv">41</span>: The process <span class="st">&quot;/usr/bin/make&quot;</span> exited with code <span class="fl">2.</span></span>
<span id="cb227-5"><a href="#cb227-5"></a>Error <span class="cf">while</span> building/deploying project untitled1 (kit: Desktop Qt <span class="fl">5.1</span><span class="er">.0</span> GCC <span class="dv">32</span><span class="er">bit</span>)</span>
<span id="cb227-6"><a href="#cb227-6"></a>When executing step &#39;Make&#39;</span></code></pre></div>
<p>(<em>Project is empty, I did’n commit any changes</em>)</p>
<blockquote>
<p>
Qt Creator 2.7.2<br> Based on Qt 5.1.0 (32 bit)<br> Ubuntu 13.04
</p>
</blockquote>
<p>How do I solve this problem?</p>
</section>
<section id="answer-accepted-score-142" class="level4">
<h4>Answer accepted (score 142)</h4>
<p>You should install package “libgl1-mesa-dev”:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb228-1"><a href="#cb228-1"></a>sudo apt install libgl1-mesa-dev</span></code></pre></div>
</section>
<section id="answer-2-score-62-1" class="level4">
<h4>Answer 2 (score 62)</h4>
<p>you don’t need to install anything. <code>libGL</code> is already installed with Ubuntu, you just need to soft link it. (tested for ubuntu 14.x and 15.x, might work for later versions)</p>
<ol>
<li>
First locate the GL library
</li>
<li>
Then link it under /usr/lib
</li>
<li>
If the library is missing, it can be installed via libgl1-mesa-dev package
</li>
</ol>
<p>Here is how you could do this:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb229-1"><a href="#cb229-1"></a>$ locate libGL</span>
<span id="cb229-2"><a href="#cb229-2"></a>/usr/lib/i386-linux-gnu/mesa/libGL.so<span class="fl">.1</span></span>
<span id="cb229-3"><a href="#cb229-3"></a>/usr/lib/i386-linux-gnu/mesa/libGL.so<span class="fl">.1</span><span class="er">.2</span><span class="fl">.0</span></span>
<span id="cb229-4"><a href="#cb229-4"></a>/usr/lib/x86_64-linux-gnu/libGLEW.so<span class="fl">.1</span><span class="er">.10</span></span>
<span id="cb229-5"><a href="#cb229-5"></a>/usr/lib/x86_64-linux-gnu/libGLEW.so<span class="fl">.1</span><span class="er">.10</span><span class="fl">.0</span></span>
<span id="cb229-6"><a href="#cb229-6"></a>/usr/lib/x86_64-linux-gnu/libGLEWmx.so<span class="fl">.1</span><span class="er">.10</span></span>
<span id="cb229-7"><a href="#cb229-7"></a>/usr/lib/x86_64-linux-gnu/libGLEWmx.so<span class="fl">.1</span><span class="er">.10</span><span class="fl">.0</span></span>
<span id="cb229-8"><a href="#cb229-8"></a>/usr/lib/x86_64-linux-gnu/libGLU.so<span class="fl">.1</span></span>
<span id="cb229-9"><a href="#cb229-9"></a>/usr/lib/x86_64-linux-gnu/libGLU.so<span class="fl">.1</span><span class="er">.3</span><span class="fl">.1</span></span>
<span id="cb229-10"><a href="#cb229-10"></a>/usr/lib/x86_64-linux-gnu/mesa/libGL.so<span class="fl">.1</span></span>
<span id="cb229-11"><a href="#cb229-11"></a>/usr/lib/x86_64-linux-gnu/mesa/libGL.so<span class="fl">.1</span><span class="er">.2</span><span class="fl">.0</span></span>
<span id="cb229-12"><a href="#cb229-12"></a>/usr/lib/x86_64-linux-gnu/mesa-egl/libGLESv2.so<span class="fl">.2</span></span>
<span id="cb229-13"><a href="#cb229-13"></a>/usr/lib/x86_64-linux-gnu/mesa-egl/libGLESv2.so<span class="fl">.2</span><span class="er">.0</span><span class="fl">.0</span></span>
<span id="cb229-14"><a href="#cb229-14"></a>$ sudo ln -s /usr/lib/x86_64-linux-gnu/mesa/libGL.so<span class="fl">.1</span> /usr/lib/libGL.so</span></code></pre></div>
</section>
<section id="answer-3-score-2-4" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>write:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb230-1"><a href="#cb230-1"></a>yum provides */libGL.so </span></code></pre></div>
<p>after providing:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb231-1"><a href="#cb231-1"></a>yum install mesa-libGL-devel mesa-libGLU-devel</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-set-application-icon-in-a-qt-based-project-score-75456-in-2013" class="level3">
<h3>66: How to set application icon in a Qt-based project? (score <a href="https://stackoverflow.com/q/1460361.html">75456</a> in 2013)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>How do you set application icon for application made using Qt? Is there some easy way? It’s a qmake-based project.</p>
</section>
<section id="answer-accepted-score-88" class="level4">
<h4>Answer accepted (score 88)</h4>
<p>For <strong>Qt 5</strong>, this process is automated by qmake. Just add the following to the project file:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb232-1"><a href="#cb232-1"></a>win32:RC_ICONS += your_icon.ico</span></code></pre></div>
<p>The automated resource file generation also uses the values of the following qmake variables: <code>VERSION, QMAKE_TARGET_COMPANY, QMAKE_TARGET_DESCRIPTION, QMAKE_TARGET_COPYRIGHT, QMAKE_TARGET_PRODUCT, RC_LANG, RC_CODEPAGE</code>.</p>
<p>For <strong>Qt 4</strong>, you need to do it manually. On Windows, you need to create a .rc file and add it to your project (.pro). The RC file should look like this:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb233-1"><a href="#cb233-1"></a>IDI_ICON1 ICON DISCARDABLE <span class="st">&quot;path_to_you_icon.ico&quot;</span></span></code></pre></div>
<p>The .pro entry should also be win32 specific, e.g.:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb234-1"><a href="#cb234-1"></a>win32:RC_FILE += MyApplication.rc</span></code></pre></div>
</section>
<section id="answer-2-score-3-1" class="level4">
<h4>Answer 2 (score 3)</h4>
<p>One more way to do that. Verified in Linux (Qt 4.8.6) and Windows (Qt 5.6):</p>
<ol type="1">
<li><p>Add the icon file to your project folder;</p></li>
<li><p>In the main function call setWindowIcon() method. For example:</p></li>
</ol>
<div class="sourceCode" id="cb235"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb235-1"><a href="#cb235-1"></a>QApplication a(argc, argv);</span>
<span id="cb235-2"><a href="#cb235-2"></a>a.setWindowIcon(QIcon(<span class="st">&quot;./images/icon.png&quot;</span>));</span></code></pre></div>
</section>
<section id="answer-3-score-2-5" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>To extend Rob’s answer, you can set an application icon for macOS by adding and modifying the following line onto your <code>.pro</code> file.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb236-1"><a href="#cb236-1"></a>macx: ICON = &lt;app_icon&gt;.icns</span></code></pre></div>
<p>Note that the <a href="https://doc.qt.io/qt-5/qmake-variable-reference.html#icon" rel="nofollow noreferrer"><code>ICON</code> qmake variable</a> is only meant to target macOS.</p>
<p>For Windows, use</p>
<ul>
<li>
<code>RC_ICONS = &amp;lt;app_icon&amp;gt;.ico</code> if you’re attaching a <code>.ico</code> file
</li>
<li>
<strong>or</strong> <code>RC_FILE = &amp;lt;app_icon&amp;gt;.rc</code> if you want to attach your icon through a <code>.rc</code> file. (Be sure to add <code>IDI_ICON1               ICON    DISCARDABLE     "myappico.ico"</code> into the rc file. Indentation not mine.)
</li>
</ul>
<p>For further reading, see <a href="https://doc.qt.io/qt-5/appicon.html" rel="nofollow noreferrer">Setting the Application Icon</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qtcpsocket-reading-and-writing-score-75373-in" class="level3">
<h3>67: QTcpSocket: reading and writing (score <a href="https://stackoverflow.com/q/20546750.html">75373</a> in )</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<p>I know some similar questions may have been asked already, but the answers to those I found covered very specific problems and I still haven’t figured it out.</p>
<p>In my program I’m creating a QObject (called QPeer) that uses a QTcpSocket to communicate with another such object over a network. QPeer has a slot that accepts a QByteArray with data (<code>sendData(QByteArray)</code>). The entire contents of that array are considered to be one ‘message’ and they are written to the socket. I want to do the following: every time a message is written, I want the receiving QPeer to emit its signal <code>dataReceived(QByteArray)</code> exactly once, that QByteArray containing the entire message. (NOTE: all signals/slots, both private ones connecting the QPeer with its socket and the public ones such as <code>sendData(QByteArray)</code> are serialized by using <code>Qt::QueuedConnection</code> whenever necessary.)</p>
<p>I use the signal <code>QTcpSocket::readyRead()</code> for asynchronous reading from the socket. Now I know I can’t just call <code>QTcpSocket::write()</code> once in sendData and then assume that for every write I do, the QTcpSocket on the other side produces exactly one readyRead signal. So what should I do?</p>
<p>This is my idea, please tell me if this will work:</p>
<p>WRITING:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb237-1"><a href="#cb237-1"></a><span class="dt">void</span> QPeer::sendData(QByteArray data)</span>
<span id="cb237-2"><a href="#cb237-2"></a>{</span>
<span id="cb237-3"><a href="#cb237-3"></a>    <span class="co">// </span><span class="al">TODO</span><span class="co">: write data.size() as raw int of exactly 4 bytes to socket</span></span>
<span id="cb237-4"><a href="#cb237-4"></a>    <span class="dt">const</span> <span class="dt">char</span> *bytes = data.constData();</span>
<span id="cb237-5"><a href="#cb237-5"></a>    <span class="dt">int</span> bytesWritten = <span class="dv">0</span>;</span>
<span id="cb237-6"><a href="#cb237-6"></a>    <span class="cf">while</span> (bytesWritten &lt; data.size())</span>
<span id="cb237-7"><a href="#cb237-7"></a>        bytesWritten += _socket-&gt;write(bytes + bytesWritten);</span>
<span id="cb237-8"><a href="#cb237-8"></a>}</span></code></pre></div>
<p>READING:</p>
<p>now I want the read function (connected to <code>QTcpSocket::readyRead()</code>) to use the header (the 4 byte int specifying the length of the message) and then read that amount of bytes; next emit dataReceived with exactly those bytes. I’m having serious trouble trying to do this. <em>For example: what to do if readyRead is emitted and I can read the header of a message, but not the amount of bytes specified? Or what if a header has only been received partially?</em></p>
<p><strong>1. How do I correctly write the header (4 byte int) to the socket?</strong></p>
<p><strong>2. How do I correctly implement the read function so that it does what I want?</strong></p>
<p>Any tips are welcome. Thanks!</p>
</section>
<section id="answer-accepted-score-37-1" class="level4">
<h4>Answer accepted (score 37)</h4>
<p>I worked on a project that does what you expect, see here the solution that I developed to our problems, simplified to be easier to understand:</p>
<p><strong>Edited, added support to the server deal with multiple clients.</strong></p>
<p>Client.h:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb238-1"><a href="#cb238-1"></a><span class="pp">#include </span><span class="im">&lt;QtCore&gt;</span></span>
<span id="cb238-2"><a href="#cb238-2"></a><span class="pp">#include </span><span class="im">&lt;QtNetwork&gt;</span></span>
<span id="cb238-3"><a href="#cb238-3"></a></span>
<span id="cb238-4"><a href="#cb238-4"></a>class Client : public QObject</span>
<span id="cb238-5"><a href="#cb238-5"></a>{</span>
<span id="cb238-6"><a href="#cb238-6"></a>    Q_OBJECT</span>
<span id="cb238-7"><a href="#cb238-7"></a>public:</span>
<span id="cb238-8"><a href="#cb238-8"></a>    explicit Client(QObject *parent = <span class="dv">0</span>);</span>
<span id="cb238-9"><a href="#cb238-9"></a></span>
<span id="cb238-10"><a href="#cb238-10"></a>public slots:</span>
<span id="cb238-11"><a href="#cb238-11"></a>    <span class="dt">bool</span> connectToHost(QString host);</span>
<span id="cb238-12"><a href="#cb238-12"></a>    <span class="dt">bool</span> writeData(QByteArray data);</span>
<span id="cb238-13"><a href="#cb238-13"></a></span>
<span id="cb238-14"><a href="#cb238-14"></a>private:</span>
<span id="cb238-15"><a href="#cb238-15"></a>    QTcpSocket *socket;</span>
<span id="cb238-16"><a href="#cb238-16"></a>};</span></code></pre></div>
<p>Client.cpp:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb239-1"><a href="#cb239-1"></a><span class="pp">#include </span><span class="im">&quot;client.h&quot;</span></span>
<span id="cb239-2"><a href="#cb239-2"></a></span>
<span id="cb239-3"><a href="#cb239-3"></a><span class="dt">static</span> <span class="kw">inline</span> QByteArray IntToArray(qint32 source);</span>
<span id="cb239-4"><a href="#cb239-4"></a></span>
<span id="cb239-5"><a href="#cb239-5"></a>Client::Client(QObject *parent) : QObject(parent)</span>
<span id="cb239-6"><a href="#cb239-6"></a>{</span>
<span id="cb239-7"><a href="#cb239-7"></a>    socket = new QTcpSocket(this);</span>
<span id="cb239-8"><a href="#cb239-8"></a>}</span>
<span id="cb239-9"><a href="#cb239-9"></a></span>
<span id="cb239-10"><a href="#cb239-10"></a><span class="dt">bool</span> Client::connectToHost(QString host)</span>
<span id="cb239-11"><a href="#cb239-11"></a>{</span>
<span id="cb239-12"><a href="#cb239-12"></a>    socket-&gt;connectToHost(host, <span class="dv">1024</span>);</span>
<span id="cb239-13"><a href="#cb239-13"></a>    <span class="cf">return</span> socket-&gt;waitForConnected();</span>
<span id="cb239-14"><a href="#cb239-14"></a>}</span>
<span id="cb239-15"><a href="#cb239-15"></a></span>
<span id="cb239-16"><a href="#cb239-16"></a><span class="dt">bool</span> Client::writeData(QByteArray data)</span>
<span id="cb239-17"><a href="#cb239-17"></a>{</span>
<span id="cb239-18"><a href="#cb239-18"></a>    <span class="cf">if</span>(socket-&gt;state() == QAbstractSocket::ConnectedState)</span>
<span id="cb239-19"><a href="#cb239-19"></a>    {</span>
<span id="cb239-20"><a href="#cb239-20"></a>        socket-&gt;write(IntToArray(data.size())); <span class="co">//write size of data</span></span>
<span id="cb239-21"><a href="#cb239-21"></a>        socket-&gt;write(data); <span class="co">//write the data itself</span></span>
<span id="cb239-22"><a href="#cb239-22"></a>        <span class="cf">return</span> socket-&gt;waitForBytesWritten();</span>
<span id="cb239-23"><a href="#cb239-23"></a>    }</span>
<span id="cb239-24"><a href="#cb239-24"></a>    <span class="cf">else</span></span>
<span id="cb239-25"><a href="#cb239-25"></a>        <span class="cf">return</span> false;</span>
<span id="cb239-26"><a href="#cb239-26"></a>}</span>
<span id="cb239-27"><a href="#cb239-27"></a></span>
<span id="cb239-28"><a href="#cb239-28"></a>QByteArray IntToArray(qint32 source) <span class="co">//Use qint32 to ensure that the number have 4 bytes</span></span>
<span id="cb239-29"><a href="#cb239-29"></a>{</span>
<span id="cb239-30"><a href="#cb239-30"></a>    <span class="co">//Avoid use of cast, this is the Qt way to serialize objects</span></span>
<span id="cb239-31"><a href="#cb239-31"></a>    QByteArray temp;</span>
<span id="cb239-32"><a href="#cb239-32"></a>    QDataStream data(&amp;temp, QIODevice::ReadWrite);</span>
<span id="cb239-33"><a href="#cb239-33"></a>    data &lt;&lt; source;</span>
<span id="cb239-34"><a href="#cb239-34"></a>    <span class="cf">return</span> temp;</span>
<span id="cb239-35"><a href="#cb239-35"></a>}</span></code></pre></div>
<p>Server.h:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb240-1"><a href="#cb240-1"></a><span class="pp">#include </span><span class="im">&lt;QtCore&gt;</span></span>
<span id="cb240-2"><a href="#cb240-2"></a><span class="pp">#include </span><span class="im">&lt;QtNetwork&gt;</span></span>
<span id="cb240-3"><a href="#cb240-3"></a></span>
<span id="cb240-4"><a href="#cb240-4"></a>class Server : public QObject</span>
<span id="cb240-5"><a href="#cb240-5"></a>{</span>
<span id="cb240-6"><a href="#cb240-6"></a>    Q_OBJECT</span>
<span id="cb240-7"><a href="#cb240-7"></a>public:</span>
<span id="cb240-8"><a href="#cb240-8"></a>    explicit Server(QObject *parent = <span class="dv">0</span>);</span>
<span id="cb240-9"><a href="#cb240-9"></a></span>
<span id="cb240-10"><a href="#cb240-10"></a>signals:</span>
<span id="cb240-11"><a href="#cb240-11"></a>    <span class="dt">void</span> dataReceived(QByteArray);</span>
<span id="cb240-12"><a href="#cb240-12"></a></span>
<span id="cb240-13"><a href="#cb240-13"></a>private slots:</span>
<span id="cb240-14"><a href="#cb240-14"></a>    <span class="dt">void</span> newConnection();</span>
<span id="cb240-15"><a href="#cb240-15"></a>    <span class="dt">void</span> disconnected();</span>
<span id="cb240-16"><a href="#cb240-16"></a>    <span class="dt">void</span> readyRead();</span>
<span id="cb240-17"><a href="#cb240-17"></a></span>
<span id="cb240-18"><a href="#cb240-18"></a>private:</span>
<span id="cb240-19"><a href="#cb240-19"></a>    QTcpServer *server;</span>
<span id="cb240-20"><a href="#cb240-20"></a>    QHash&lt;QTcpSocket*, QByteArray*&gt; buffers; <span class="co">//We need a buffer to store data until block has completely received</span></span>
<span id="cb240-21"><a href="#cb240-21"></a>    QHash&lt;QTcpSocket*, qint32*&gt; sizes; <span class="co">//We need to store the size to verify if a block has received completely</span></span>
<span id="cb240-22"><a href="#cb240-22"></a>};</span></code></pre></div>
<p>Server.cpp:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb241-1"><a href="#cb241-1"></a><span class="pp">#include </span><span class="im">&quot;server.h&quot;</span></span>
<span id="cb241-2"><a href="#cb241-2"></a></span>
<span id="cb241-3"><a href="#cb241-3"></a><span class="dt">static</span> <span class="kw">inline</span> qint32 ArrayToInt(QByteArray source);</span>
<span id="cb241-4"><a href="#cb241-4"></a></span>
<span id="cb241-5"><a href="#cb241-5"></a>Server::Server(QObject *parent) : QObject(parent)</span>
<span id="cb241-6"><a href="#cb241-6"></a>{</span>
<span id="cb241-7"><a href="#cb241-7"></a>    server = new QTcpServer(this);</span>
<span id="cb241-8"><a href="#cb241-8"></a>    connect(server, SIGNAL(newConnection()), SLOT(newConnection()));</span>
<span id="cb241-9"><a href="#cb241-9"></a>    qDebug() &lt;&lt; <span class="st">&quot;Listening:&quot;</span> &lt;&lt; server-&gt;listen(QHostAddress::Any, <span class="dv">1024</span>);</span>
<span id="cb241-10"><a href="#cb241-10"></a>}</span>
<span id="cb241-11"><a href="#cb241-11"></a></span>
<span id="cb241-12"><a href="#cb241-12"></a><span class="dt">void</span> Server::newConnection()</span>
<span id="cb241-13"><a href="#cb241-13"></a>{</span>
<span id="cb241-14"><a href="#cb241-14"></a>    <span class="cf">while</span> (server-&gt;hasPendingConnections())</span>
<span id="cb241-15"><a href="#cb241-15"></a>    {</span>
<span id="cb241-16"><a href="#cb241-16"></a>        QTcpSocket *socket = server-&gt;nextPendingConnection();</span>
<span id="cb241-17"><a href="#cb241-17"></a>        connect(socket, SIGNAL(readyRead()), SLOT(readyRead()));</span>
<span id="cb241-18"><a href="#cb241-18"></a>        connect(socket, SIGNAL(disconnected()), SLOT(disconnected()));</span>
<span id="cb241-19"><a href="#cb241-19"></a>        QByteArray *buffer = new QByteArray();</span>
<span id="cb241-20"><a href="#cb241-20"></a>        qint32 *s = new qint32(<span class="dv">0</span>);</span>
<span id="cb241-21"><a href="#cb241-21"></a>        buffers.insert(socket, buffer);</span>
<span id="cb241-22"><a href="#cb241-22"></a>        sizes.insert(socket, s);</span>
<span id="cb241-23"><a href="#cb241-23"></a>    }</span>
<span id="cb241-24"><a href="#cb241-24"></a>}</span>
<span id="cb241-25"><a href="#cb241-25"></a></span>
<span id="cb241-26"><a href="#cb241-26"></a><span class="dt">void</span> Server::disconnected()</span>
<span id="cb241-27"><a href="#cb241-27"></a>{</span>
<span id="cb241-28"><a href="#cb241-28"></a>    QTcpSocket *socket = static_cast&lt;QTcpSocket*&gt;(sender());</span>
<span id="cb241-29"><a href="#cb241-29"></a>    QByteArray *buffer = buffers.value(socket);</span>
<span id="cb241-30"><a href="#cb241-30"></a>    qint32 *s = sizes.value(socket);</span>
<span id="cb241-31"><a href="#cb241-31"></a>    socket-&gt;deleteLater();</span>
<span id="cb241-32"><a href="#cb241-32"></a>    delete buffer;</span>
<span id="cb241-33"><a href="#cb241-33"></a>    delete s;</span>
<span id="cb241-34"><a href="#cb241-34"></a>}</span>
<span id="cb241-35"><a href="#cb241-35"></a></span>
<span id="cb241-36"><a href="#cb241-36"></a><span class="dt">void</span> Server::readyRead()</span>
<span id="cb241-37"><a href="#cb241-37"></a>{</span>
<span id="cb241-38"><a href="#cb241-38"></a>    QTcpSocket *socket = static_cast&lt;QTcpSocket*&gt;(sender());</span>
<span id="cb241-39"><a href="#cb241-39"></a>    QByteArray *buffer = buffers.value(socket);</span>
<span id="cb241-40"><a href="#cb241-40"></a>    qint32 *s = sizes.value(socket);</span>
<span id="cb241-41"><a href="#cb241-41"></a>    qint32 size = *s;</span>
<span id="cb241-42"><a href="#cb241-42"></a>    <span class="cf">while</span> (socket-&gt;bytesAvailable() &gt; <span class="dv">0</span>)</span>
<span id="cb241-43"><a href="#cb241-43"></a>    {</span>
<span id="cb241-44"><a href="#cb241-44"></a>        buffer-&gt;append(socket-&gt;readAll());</span>
<span id="cb241-45"><a href="#cb241-45"></a>        <span class="cf">while</span> ((size == <span class="dv">0</span> &amp;&amp; buffer-&gt;size() &gt;= <span class="dv">4</span>) || (size &gt; <span class="dv">0</span> &amp;&amp; buffer-&gt;size() &gt;= size)) <span class="co">//While can process data, process it</span></span>
<span id="cb241-46"><a href="#cb241-46"></a>        {</span>
<span id="cb241-47"><a href="#cb241-47"></a>            <span class="cf">if</span> (size == <span class="dv">0</span> &amp;&amp; buffer-&gt;size() &gt;= <span class="dv">4</span>) <span class="co">//if size of data has received completely, then store it on our global variable</span></span>
<span id="cb241-48"><a href="#cb241-48"></a>            {</span>
<span id="cb241-49"><a href="#cb241-49"></a>                size = ArrayToInt(buffer-&gt;mid(<span class="dv">0</span>, <span class="dv">4</span>));</span>
<span id="cb241-50"><a href="#cb241-50"></a>                *s = size;</span>
<span id="cb241-51"><a href="#cb241-51"></a>                buffer-&gt;remove(<span class="dv">0</span>, <span class="dv">4</span>);</span>
<span id="cb241-52"><a href="#cb241-52"></a>            }</span>
<span id="cb241-53"><a href="#cb241-53"></a>            <span class="cf">if</span> (size &gt; <span class="dv">0</span> &amp;&amp; buffer-&gt;size() &gt;= size) <span class="co">// If data has received completely, then emit our SIGNAL with the data</span></span>
<span id="cb241-54"><a href="#cb241-54"></a>            {</span>
<span id="cb241-55"><a href="#cb241-55"></a>                QByteArray data = buffer-&gt;mid(<span class="dv">0</span>, size);</span>
<span id="cb241-56"><a href="#cb241-56"></a>                buffer-&gt;remove(<span class="dv">0</span>, size);</span>
<span id="cb241-57"><a href="#cb241-57"></a>                size = <span class="dv">0</span>;</span>
<span id="cb241-58"><a href="#cb241-58"></a>                *s = size;</span>
<span id="cb241-59"><a href="#cb241-59"></a>                emit dataReceived(data);</span>
<span id="cb241-60"><a href="#cb241-60"></a>            }</span>
<span id="cb241-61"><a href="#cb241-61"></a>        }</span>
<span id="cb241-62"><a href="#cb241-62"></a>    }</span>
<span id="cb241-63"><a href="#cb241-63"></a>}</span>
<span id="cb241-64"><a href="#cb241-64"></a></span>
<span id="cb241-65"><a href="#cb241-65"></a>qint32 ArrayToInt(QByteArray source)</span>
<span id="cb241-66"><a href="#cb241-66"></a>{</span>
<span id="cb241-67"><a href="#cb241-67"></a>    qint32 temp;</span>
<span id="cb241-68"><a href="#cb241-68"></a>    QDataStream data(&amp;source, QIODevice::ReadWrite);</span>
<span id="cb241-69"><a href="#cb241-69"></a>    data &gt;&gt; temp;</span>
<span id="cb241-70"><a href="#cb241-70"></a>    <span class="cf">return</span> temp;</span>
<span id="cb241-71"><a href="#cb241-71"></a>}</span></code></pre></div>
<p><strong>Note:</strong> Do not use this method to transfer large files because with this method the entire contents of the message is put inside the memory before sent and this causes a high memory usage. And because 32 bits signed INT has max value to <a href="https://stackoverflow.com/a/94608/2014561">2,147,483,647</a>, if your input data has a value higher than that in bytes it won’t work. Take care.</p>
</section>
<section id="answer-2-score-2-2" class="level4">
<h4>Answer 2 (score 2)</h4>
<p>As you said, you need to wait that your header is entirely sent, before reading it, and then read the good number of bytes and emit a signal for data availability.</p>
<p>Here an example (untested) :</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb242-1"><a href="#cb242-1"></a><span class="co">//header file</span></span>
<span id="cb242-2"><a href="#cb242-2"></a></span>
<span id="cb242-3"><a href="#cb242-3"></a>class Peer {</span>
<span id="cb242-4"><a href="#cb242-4"></a><span class="co">//[...]</span></span>
<span id="cb242-5"><a href="#cb242-5"></a>protected:</span>
<span id="cb242-6"><a href="#cb242-6"></a>   <span class="dt">bool</span> m_headerRead; <span class="co">//initialize to false</span></span>
<span id="cb242-7"><a href="#cb242-7"></a>   <span class="dt">unsigned</span> <span class="dt">int</span> m_size_of_data_to_read;</span>
<span id="cb242-8"><a href="#cb242-8"></a><span class="co">//[...]</span></span>
<span id="cb242-9"><a href="#cb242-9"></a>};</span>
<span id="cb242-10"><a href="#cb242-10"></a></span>
<span id="cb242-11"><a href="#cb242-11"></a><span class="co">//source file</span></span>
<span id="cb242-12"><a href="#cb242-12"></a><span class="dt">void</span> QPeer::sendData(QByteArray data)</span>
<span id="cb242-13"><a href="#cb242-13"></a>{</span>
<span id="cb242-14"><a href="#cb242-14"></a>  <span class="dt">int</span> size = data.size();</span>
<span id="cb242-15"><a href="#cb242-15"></a>  _socket-&gt;write((<span class="dt">const</span> <span class="dt">char</span>*) &amp;size, <span class="kw">sizeof</span>(<span class="dt">int</span>);</span>
<span id="cb242-16"><a href="#cb242-16"></a>  <span class="co">//use directly QIODevice::write(QByteArray)</span></span>
<span id="cb242-17"><a href="#cb242-17"></a>  _socket-&gt;write(data);</span>
<span id="cb242-18"><a href="#cb242-18"></a>}</span>
<span id="cb242-19"><a href="#cb242-19"></a></span>
<span id="cb242-20"><a href="#cb242-20"></a><span class="dt">void</span> QPeer::readData()</span>
<span id="cb242-21"><a href="#cb242-21"></a>{</span>
<span id="cb242-22"><a href="#cb242-22"></a>    <span class="dt">int</span> bytes = _socket-&gt;bytesAvailable();</span>
<span id="cb242-23"><a href="#cb242-23"></a>    <span class="dt">bool</span> contains_enough_data = true;</span>
<span id="cb242-24"><a href="#cb242-24"></a></span>
<span id="cb242-25"><a href="#cb242-25"></a>    <span class="cf">while</span> (contains_enough_data) {</span>
<span id="cb242-26"><a href="#cb242-26"></a>       <span class="cf">if</span> (! m_headerRead &amp;&amp; _socket-&gt;bytesAvailable() &gt;= <span class="kw">sizeof</span>(<span class="dt">int</span>)) {</span>
<span id="cb242-27"><a href="#cb242-27"></a>         <span class="co">//read header only and update m_size_of_data_to_read</span></span>
<span id="cb242-28"><a href="#cb242-28"></a>         m_headerRead = true;</span>
<span id="cb242-29"><a href="#cb242-29"></a>        } <span class="cf">else</span> <span class="cf">if</span> (m_headerRead &amp;&amp; _socket-&gt;bytesAvailable &gt;= m_size_of_data_to_read) {</span>
<span id="cb242-30"><a href="#cb242-30"></a>          <span class="co">//read data here</span></span>
<span id="cb242-31"><a href="#cb242-31"></a>          m_headerRead = false;</span>
<span id="cb242-32"><a href="#cb242-32"></a>          emit dataAvailable();</span>
<span id="cb242-33"><a href="#cb242-33"></a>       } <span class="cf">else</span> {</span>
<span id="cb242-34"><a href="#cb242-34"></a>           contains_enough_data = false; <span class="co">//wait that further data arrived</span></span>
<span id="cb242-35"><a href="#cb242-35"></a>       }</span>
<span id="cb242-36"><a href="#cb242-36"></a>    }</span>
<span id="cb242-37"><a href="#cb242-37"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-build-qt-for-visual-studio-2010-score-75051-in-2011" class="level3">
<h3>68: How to build Qt for Visual Studio 2010 (score <a href="https://stackoverflow.com/q/5601950.html">75051</a> in 2011)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>I struggled finding a how-to which provides a stable solution for using Qt with Visual Studio 2010, so after collecting all the bits of information and some trial and error, I would like to write my solution into a guide.</p>
<h5>
The problem, or why is it not possible to use prebuilt binaries?
</h2>
<p>It seems that using binaries built for Visual Studio 2008 might work in some special cases, but I found them not to work. In my case they compiled OK, but they produce runtime errors, like this:</p>
<p><img src="https://i.stack.imgur.com/LvWOd.png" alt="problem2"></p>
<p>or when started from Visual Studio 2010:</p>
<p><img src="https://i.stack.imgur.com/cXTle.png" alt="problem"></p>
<p>
<strong>Update</strong>: I found a blog post analysing why does it work for some people, while it does not for others. In one word, it depends on whether you have Visual Studio 2008 installed on the same machine, or not. <a href="http://blog.paulnettleship.com/2010/11/11/troubleshooting-visual-studio-2010-and-qt-4-7-integration/" rel="noreferrer">http://blog.paulnettleship.com/2010/11/11/troubleshooting-visual-studio-2010-and-qt-4-7-integration/</a>
</p>
<blockquote>
The most important thing (that I stupidly didn’t realize) was the fact that you CANNOT use the Visual Studio 2008 compiled libraries and dll’s (available on the Qt webpage) if you don’t have Visual Studio 2008 installed. The reason is because the Qt SDK you download is a debug build which is dependant on the VC9.0 DebugCRT, meaning it needs the Visual C++ 2008 Debug Runtime installed, which is NOT available as a redistributable installer. The only way to install the DebugCRT is to install the entirety of Visual Studio 2008.
</blockquote>
</section>
<section id="answer-accepted-score-142-1" class="level4">
<h4>Answer accepted (score 142)</h4>
<p>First of all, it’s very important to understand that <strong>for using Qt with Visual Studio 2010, it’s not possible to use the pre-built binaries which were made for Visual Studio 2008</strong>, but you have to compile it from source.</p>
<h5>
Downloading Qt
</h2>
<p>On <a href="https://www.qt.io/download/" rel="noreferrer">https://www.qt.io/download/</a></p>
<p><strong>Update 2017:</strong> the latest Qt 4.x branch (Qt 4.8.6) has 2 pre-built packages, which are now in the archive section:</p>
<ol>
<li>
<a href="http://download.qt.io/archive/qt/4.8/4.8.6/qt-opensource-windows-x86-vs2010-4.8.6.exe" rel="noreferrer">http://download.qt.io/archive/qt/4.8/4.8.6/qt-opensource-windows-x86-vs2010-4.8.6.exe</a>
</li>
<li>
<a href="http://download.qt.io/archive/qt/4.8/4.8.6/qt-opensource-windows-x86-vs2008-4.8.6.exe" rel="noreferrer">http://download.qt.io/archive/qt/4.8/4.8.6/qt-opensource-windows-x86-vs2008-4.8.6.exe</a>
</li>
</ol>
<p>You should not download Qt by clicking <em>“Qt libraries 4.8.6 for Windows (Visual Studio 2008, 218 MB)”</em>, but by clicking on the <em>“zip”</em> link above it.</p>
<p><img src="https://i.stack.imgur.com/odCKO.png" alt="link-selection"></p>
<p>On that link, you get a big zip file like <em>“qt-everywhere-opensource-src-4.8.6.zip”</em>. Unzip this into a folder and make its path something nice and small, for example <em>“E:”</em></p>
<h5>
Visual Studio Command Prompt
</h2>
<p>Now that we have the sources, we need to build the binaries. To do it, open the <code>Microsoft Visual Studio 2010\Visual Studio Tools\Visual Studio Command Prompt (2010)</code> link from your start menu, or even pin it to the taskbar (a good idea). This is a special command prompt which has all the variables set for building with Visual Studio 2010 tools.</p>
<p>Once within the command prompt, navigate to your extracted Qt folder using old-school DOS way, which means you have to change drive letter by <code>E:</code>, enter directories by <code>cd Qt</code> and list dir contents by <code>dir</code>. You can use the tab key for helping you with the directory names. When you have arrived at the correct directory, a <code>dir</code> command should return something like this.</p>
<p><img src="https://i.stack.imgur.com/O6VWe.png" alt="command line"></p>
<h5>
Building Qt
</h2>
<p>Now it’s time for configure and build. For configuring a minimalist Qt, I’m using the following flags with <code>configure.exe</code>. Just copy and paste it into the command line. Look in the <a href="http://doc.qt.io/qt-4.8/configure-options.html" rel="noreferrer">Qt reference manual</a> for what flag to use or not to use.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb243-1"><a href="#cb243-1"></a>configure.exe -release -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-qt3support -no-multimedia -no-ltcg</span></code></pre></div>
<p>Once <code>configure.exe</code> has finished (it was 10 minutes for me), you’ll need to start the build process. It will take about 20-30 minutes with the above flags. To start it, just type:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb244-1"><a href="#cb244-1"></a>nmake</span></code></pre></div>
<h5>
Setting environment variables
</h2>
<p>Basically, we are done. All you need to do is to set your environment variables (<code>QTDIR</code> and <code>PATH</code>), which tell programs where to find Qt. If you are on Windows 7, you can use the following command to set <code>QTDIR</code> to your installation dir.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb245-1"><a href="#cb245-1"></a>setx QTDIR e:\Qt</span></code></pre></div>
<p>For setting the <code>PATH</code>, I strongly recommend using <a href="https://patheditor2.codeplex.com/" rel="noreferrer">Path Editor</a>. Within Path Editor</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb246-1"><a href="#cb246-1"></a>add the directory of Qt\bin to your PATH</span></code></pre></div>
<p>(it doesn’t matter if it’s in system path or user path)</p>
<p>If you prefer to use <code>Control Panel\System\Environment Variables</code>, then you can set these there, too.</p>
<h5>
Qt Visual Studio Add-in
</h2>
<p>Here you go, after a logoff-logon or a restart, all the Qt demo applications should start correctly (I recommend have a look at <em>bin.exe</em>). Now you can download and install the Visual Studio Add-in (qt-vs-addin-1.1.9.exe) from the Qt download page, it will work perfectly.</p>
<p><img src="https://i.stack.imgur.com/2STpj.png" alt="addin"></p>
<h5>
Appendix A: Official Instructions:
</h2>
<p>There is a page at the official wiki at the Qt website called <a href="http://doc.qt.io/qt-4.8/install-win.html" rel="noreferrer"><em>Qt 4.8 Installing Qt for Windows</em></a>, but I found it lacking important information.</p>
<h5>
References
</h2>
<blockquote>
<p>
<a href="http://developer.qt.nokia.com/forums/" rel="noreferrer">Qt DevNet forums</a><br> <a href="https://stackoverflow.com/questions/5587141/recommended-flags-for-minimalistic-qt-build">Recommended flags for a minimalistic Qt build</a><br> <a href="https://stackoverflow.com/questions/1644172/building-qt-4-5-with-visual-c-2010">Building Qt 4.5 with Visual C++ 2010</a><br> <a href="https://stackoverflow.com/questions/4112972/how-to-compile-qt-as-static">How to compile Qt as static</a><br> <a href="http://doc.qt.io/qt-4.8/configure-options.html" rel="noreferrer">Qt 4.8: Configure options for Qt</a><br> <a href="http://op111.net/82/" rel="noreferrer">Edit the PATH environment variable in<br> Windows without pain - op111.net</a>
</p>
</blockquote>
</section>
<section id="answer-2-score-25-1" class="level4">
<h4>Answer 2 (score 25)</h4>
<p>
Qt V4.8.0 contains prebuilt binaries for Visual Studio 2010 so you don’t need to do this anymore: <a href="http://qt.nokia.com/downloads/windows-cpp-vs2010">http://qt.nokia.com/downloads/windows-cpp-vs2010</a>
</p>
</section>
<section id="answer-3-score-1-1" class="level4">
<h4>Answer 3 (score 1)</h4>
<p>
Refer below link and it might be useful 1)<a href="https://www.slicer.org/slicerWiki/index.php/Documentation/Nightly/Developers/Build_Instructions/Prerequisites/Qt#Windows_3" rel="nofollow">https://www.slicer.org/slicerWiki/index.php/Documentation/Nightly/Developers/Build_Instructions/Prerequisites/Qt#Windows_3</a> 2)<a href="http://eecs.vanderbilt.edu/research/hmtl/wp/index.php/qt-vs/" rel="nofollow">http://eecs.vanderbilt.edu/research/hmtl/wp/index.php/qt-vs/</a>
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-repaintredrawupdatedo-something-score-74789-in-2017" class="level3">
<h3>69: QT Repaint/Redraw/Update/Do Something (score <a href="https://stackoverflow.com/q/2052907.html">74789</a> in 2017)</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>I’m New to QT. I understand that you can force a display refresh, but I’ve pulled all my hair out trying to figure out how. Here is what I’m specifically trying to do.</p>
<p>I press a button (onClick signal event), which runs code that changes an image (QLabel) on the display, waits for input, and then proceeds by changing a new image (different QLabel). I’ve tried everything and the display doesn’t refresh until the onclick signal event code is complete. Right now, I’m not waiting for user input, I’m using usleep(~500 ms) for testing purposes.</p>
<p>From what I read, QT is event driven meaning that I’m basically creating a bunch of events, that get put in a que, and executed when the (onClick signal event) returns to the (main loop)/(event handler). I don’t want to wait until the function is complete, it’s going to make programming extremely painful if I have to accomplish this routine entirely based on events.</p>
<p>How can I force the QLabel pixmap to refresh. I’ve tried everything. Below is all the code I have tried in my onClick signal event handler. (upButton is the name of the QLabel which is a pixmap)</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb247-1"><a href="#cb247-1"></a>update();</span>
<span id="cb247-2"><a href="#cb247-2"></a>repaint();</span>
<span id="cb247-3"><a href="#cb247-3"></a>ui-&gt;upButton-&gt;setUpdatesEnabled(TRUE);</span>
<span id="cb247-4"><a href="#cb247-4"></a>update();</span>
<span id="cb247-5"><a href="#cb247-5"></a>repaint();</span>
<span id="cb247-6"><a href="#cb247-6"></a>QPaintEvent paintevent(ui-&gt;upButton-&gt;childrenRegion());</span>
<span id="cb247-7"><a href="#cb247-7"></a>QPaintEvent * test = &amp;paintevent;</span>
<span id="cb247-8"><a href="#cb247-8"></a>paintEvent(test);</span>
<span id="cb247-9"><a href="#cb247-9"></a>this-&gt;changeEvent(test);</span>
<span id="cb247-10"><a href="#cb247-10"></a>ui-&gt;upButton-&gt;update();</span>
<span id="cb247-11"><a href="#cb247-11"></a>ui-&gt;upButton-&gt;repaint();</span>
<span id="cb247-12"><a href="#cb247-12"></a>ui-&gt;upButton-&gt;repaint(ui-&gt;upButton-&gt;childrenRegion());</span>
<span id="cb247-13"><a href="#cb247-13"></a>repaint();</span>
<span id="cb247-14"><a href="#cb247-14"></a>QApplication::sendPostedEvents();</span>
<span id="cb247-15"><a href="#cb247-15"></a>this-&gt;parentWidget()-&gt;update();</span>
<span id="cb247-16"><a href="#cb247-16"></a>usleep(<span class="dv">100000</span>);</span></code></pre></div>
<p>As you can see, I’m just shooting in the dark at this point. I’ve tried to look at sample code and do all my homework, but I’m lost. Appreciate any help, advice, and or sample code.</p>
</section>
<section id="answer-2-score-22-3" class="level4">
<h4>Answer 2 (score 22)</h4>
<p>I was using sleep to emulate a brief amount of time the computer was waiting for something to happen.</p>
<p>As I stated in my question, I didn’t want to use events because it’s a whole lot of unnecessary work to accomplish something extremely simply.</p>
<p>Also, the ‘event’ that needs to take place for the program to continue, is a USB event. Since I’m using an HID class device, there is no way to set an event to happen without a wait loop. USB HID classes don’t permit setting interrupts, the OS claims the device.</p>
<p>I managed to get the above to work. I walked through the debugger and noticed the display would refresh before the sleep function. Running the program independently, I got random results with the display refreshing 1% of the time. I got rid of the sleep function, and added some other code in it’s place to emulate a delay, and it was fine.</p>
<p>Just for everyone’s knowledge, this is possible, it’s not forbidden, and it’s easy to do with the following:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb248-1"><a href="#cb248-1"></a>qApp-&gt;processEvents();</span></code></pre></div>
<p>qApp is a global external variable in the QApplication header.</p>
<p>Because this USB event is making my flow tricky, I stumbled upon the QWaitCondition Class. I was going to start a process waiting for the USB event. I would wait until the process releases the wait condition for my routine to continue.</p>
<p>But if anyone thinks this is a bad idea, please, speak out. I really do appreciate your feedback PiedPiper and Hostile Fork.</p>
<p>Thank you.</p>
</section>
<section id="answer-3-score-7-1" class="level4">
<h4>Answer 3 (score 7)</h4>
<p>You shouldn’t be waiting for input in your event handler. You need to rethink the logic of your program to use events the way they were intended. All the update() and repaint() calls in your code are unnecessary if you return to the event loop.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-make-a-qpushbutton-disabled-score-74644-in-2013" class="level3">
<h3>70: How to make a QPushButton disabled (score <a href="https://stackoverflow.com/q/5714404.html">74644</a> in 2013)</h3>
<section id="question-69" class="level4">
<h4>Question</h4>
<p>I created lots of <a href="http://qt-project.org/doc/qt-5.0/qtwidgets/qpushbutton.html" rel="noreferrer">QPushButtons</a>, added clicked signal and a slot name ´deneme()´ to all of the buttons with <code>QT DESIGNER</code> and the thing I want to do is; when I clicked any button, some operation should be done and lastly the button should be disabled but we do not know which button is clicked. I know I can disable the buttons with <code>setEnabled()</code> and <code>isEnabled()</code> but I do not know how to disable them.</p>
</section>
<section id="answer-accepted-score-28" class="level4">
<h4>Answer accepted (score 28)</h4>
<p>
If I understood correctly you connected various <code>QPushButtons</code> to the same slot. Inside of the slot <code>deneme()</code> you want to know which of the buttons was <code>clicked</code>. You can do something like:
</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb249-1"><a href="#cb249-1"></a>  <span class="dt">void</span> deneme() {</span>
<span id="cb249-2"><a href="#cb249-2"></a>    QPushButton * b = qobject_cast&lt;QPushButton *&gt;(sender());</span>
<span id="cb249-3"><a href="#cb249-3"></a>    <span class="cf">if</span> (b) {</span>
<span id="cb249-4"><a href="#cb249-4"></a>       <span class="cf">if</span> (b == button1) { <span class="co">//button1 clicked</span></span>
<span id="cb249-5"><a href="#cb249-5"></a>           <span class="co">//doSomething();</span></span>
<span id="cb249-6"><a href="#cb249-6"></a>       } </span>
<span id="cb249-7"><a href="#cb249-7"></a>       <span class="cf">else</span> {</span>
<span id="cb249-8"><a href="#cb249-8"></a>          <span class="cf">if</span> (b == button2) {</span>
<span id="cb249-9"><a href="#cb249-9"></a>             <span class="co">//doSomething();</span></span>
<span id="cb249-10"><a href="#cb249-10"></a>          }</span>
<span id="cb249-11"><a href="#cb249-11"></a>       }</span>
<span id="cb249-12"><a href="#cb249-12"></a>       b-&gt;setEnabled(false);</span>
<span id="cb249-13"><a href="#cb249-13"></a>    }</span>
<span id="cb249-14"><a href="#cb249-14"></a>  }</span></code></pre></div>
</section>
<section id="answer-2-score-7" class="level4">
<h4>Answer 2 (score 7)</h4>
<p>Why is setEnabled not working then? <a href="http://doc.trolltech.com/4.7/qwidget.html#enabled-prop" rel="noreferrer">The reference</a>.</p>
<p>So a simple setEnabled(false); is enough.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb250-1"><a href="#cb250-1"></a>QPushButton* button = new QPushButton(someParent);</span>
<span id="cb250-2"><a href="#cb250-2"></a>button-&gt;setEnabled(false);</span></code></pre></div>
<p>
If the connecting a event handler on the click event of the button maybe you should look at the QT documentation: <a href="http://doc.qt.nokia.com/4.7/signalsandslots.html" rel="noreferrer">Signal and slots</a>
</p>
</section>
<section id="answer-3-score-2-6" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>You mean Button has to be disabled right after clicking on it? I guess in that case you probably want to do something like this:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb251-1"><a href="#cb251-1"></a>class MyWidget : public QWidget </span>
<span id="cb251-2"><a href="#cb251-2"></a>{</span>
<span id="cb251-3"><a href="#cb251-3"></a>Q_OBJECT</span>
<span id="cb251-4"><a href="#cb251-4"></a></span>
<span id="cb251-5"><a href="#cb251-5"></a><span class="co">// ...</span></span>
<span id="cb251-6"><a href="#cb251-6"></a></span>
<span id="cb251-7"><a href="#cb251-7"></a>private slots:</span>
<span id="cb251-8"><a href="#cb251-8"></a>  <span class="dt">void</span> disableButton();</span>
<span id="cb251-9"><a href="#cb251-9"></a></span>
<span id="cb251-10"><a href="#cb251-10"></a>private:</span>
<span id="cb251-11"><a href="#cb251-11"></a>  QPushButton *myButton;</span>
<span id="cb251-12"><a href="#cb251-12"></a></span>
<span id="cb251-13"><a href="#cb251-13"></a><span class="co">// ...</span></span>
<span id="cb251-14"><a href="#cb251-14"></a>};</span>
<span id="cb251-15"><a href="#cb251-15"></a></span>
<span id="cb251-16"><a href="#cb251-16"></a>MyWidget::MyWidget(QWidget *parent = NULL) : QWidget(parent) </span>
<span id="cb251-17"><a href="#cb251-17"></a>{</span>
<span id="cb251-18"><a href="#cb251-18"></a></span>
<span id="cb251-19"><a href="#cb251-19"></a><span class="co">///...</span></span>
<span id="cb251-20"><a href="#cb251-20"></a>myButton = new QPushButton(<span class="st">&quot;click me&quot;</span>, this);</span>
<span id="cb251-21"><a href="#cb251-21"></a>connect(myButton, SIGNAL(clicked), this, SLOT(disableButton));</span>
<span id="cb251-22"><a href="#cb251-22"></a><span class="co">// ...</span></span>
<span id="cb251-23"><a href="#cb251-23"></a>}</span>
<span id="cb251-24"><a href="#cb251-24"></a></span>
<span id="cb251-25"><a href="#cb251-25"></a><span class="dt">void</span> MyWidget::disableButton() </span>
<span id="cb251-26"><a href="#cb251-26"></a>{</span>
<span id="cb251-27"><a href="#cb251-27"></a>myButton-&gt;setEnabled(false);</span>
<span id="cb251-28"><a href="#cb251-28"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-whether-file-exists-in-qt-in-c-score-74605-in-2015" class="level3">
<h3>71: How to check whether file exists in Qt in c++ (score <a href="https://stackoverflow.com/q/10273816.html">74605</a> in 2015)</h3>
<section id="question-70" class="level4">
<h4>Question</h4>
<p>How do I check whether a file exists in a given path or not in Qt?</p>
<p>My current code is below:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb252-1"><a href="#cb252-1"></a>QFile Fout(<span class="st">&quot;/Users/Hans/Desktop/result.txt&quot;</span>);</span>
<span id="cb252-2"><a href="#cb252-2"></a></span>
<span id="cb252-3"><a href="#cb252-3"></a><span class="cf">if</span>(!Fout.exists()) </span>
<span id="cb252-4"><a href="#cb252-4"></a>{       </span>
<span id="cb252-5"><a href="#cb252-5"></a>  eh.handleError(<span class="dv">8</span>);</span>
<span id="cb252-6"><a href="#cb252-6"></a>}  </span>
<span id="cb252-7"><a href="#cb252-7"></a><span class="cf">else</span></span>
<span id="cb252-8"><a href="#cb252-8"></a>{</span>
<span id="cb252-9"><a href="#cb252-9"></a>  <span class="co">// ......</span></span>
<span id="cb252-10"><a href="#cb252-10"></a>}</span></code></pre></div>
<p>But when I run the code it is not giving the error message specified in <code>handleError</code> even though the file I mentioned in the path does not exist.</p>
</section>
<section id="answer-2-score-92" class="level4">
<h4>Answer 2 (score 92)</h4>
<p><strong>(TL;DR at the bottom)</strong></p>
<p>I would use the <code>QFileInfo</code>-class (<a href="http://qt-project.org/doc/qt-5/qfileinfo.html" rel="noreferrer">docs</a>) - this is exactly what it is made for:</p>
<blockquote>
<p>The QFileInfo class provides system-independent file information.</p>
<p>
QFileInfo provides information about a file’s name and position (path) in the file system, its access rights and whether it is a directory or symbolic link, etc. The file’s size and last modified/read times are also available. QFileInfo can also be used to obtain information about a Qt resource.
</p>
</blockquote>
<p>This is the source code to check whether a file exists:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb253-1"><a href="#cb253-1"></a><span class="pp">#include </span><span class="im">&lt;QFileInfo&gt;</span></span></code></pre></div>
<p><em>(don’t forget to add the corresponding <code>#include</code>-statement)</em></p>
<div class="sourceCode" id="cb254"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb254-1"><a href="#cb254-1"></a><span class="dt">bool</span> fileExists(QString path) {</span>
<span id="cb254-2"><a href="#cb254-2"></a>    QFileInfo check_file(path);</span>
<span id="cb254-3"><a href="#cb254-3"></a>    <span class="co">// check if file exists and if yes: Is it really a file and no directory?</span></span>
<span id="cb254-4"><a href="#cb254-4"></a>    <span class="cf">if</span> (check_file.exists() &amp;&amp; check_file.isFile()) {</span>
<span id="cb254-5"><a href="#cb254-5"></a>        <span class="cf">return</span> true;</span>
<span id="cb254-6"><a href="#cb254-6"></a>    } <span class="cf">else</span> {</span>
<span id="cb254-7"><a href="#cb254-7"></a>        <span class="cf">return</span> false;</span>
<span id="cb254-8"><a href="#cb254-8"></a>    }</span>
<span id="cb254-9"><a href="#cb254-9"></a>}</span></code></pre></div>
<p>Also consider: Do you only want to check if the path exists (<code>exists()</code>) or do you want to also make sure that this is a file and not a directory (<code>isFile()</code>)?</p>
<p><strong>Be careful</strong>: The documentation of the <code>exists()</code>-function says:</p>
<blockquote>
<p>Returns true if the file exists; otherwise returns false.</p>
Note: If file is a symlink that points to a non-existing file, false is returned.
</blockquote>
<p><strong>This is not precise.</strong> It should be:</p>
<blockquote>
Returns true if the path (i.e. file or directory) exists; otherwise returns false.
</blockquote>
<hr>
<p><strong>TL;DR</strong></p>
<p><em>(with shorter version of the function above, saving a few lines of code)</em></p>
<div class="sourceCode" id="cb255"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb255-1"><a href="#cb255-1"></a><span class="pp">#include </span><span class="im">&lt;QFileInfo&gt;</span></span>
<span id="cb255-2"><a href="#cb255-2"></a></span>
<span id="cb255-3"><a href="#cb255-3"></a><span class="dt">bool</span> fileExists(QString path) {</span>
<span id="cb255-4"><a href="#cb255-4"></a>    QFileInfo check_file(path);</span>
<span id="cb255-5"><a href="#cb255-5"></a>    <span class="co">// check if path exists and if yes: Is it really a file and no directory?</span></span>
<span id="cb255-6"><a href="#cb255-6"></a>    <span class="cf">return</span> check_file.exists() &amp;&amp; check_file.isFile();</span>
<span id="cb255-7"><a href="#cb255-7"></a>}</span></code></pre></div>
<p><strong>TL;DR for Qt &gt;=5.2</strong></p>
<p><em>(using <code>exists</code> as a <code>static</code> which was introduce in Qt 5.2; the docs say the static function is faster, though I’m not sure this is still the case when also using the <code>isFile()</code> method; at least this is a one-liner then)</em></p>
<div class="sourceCode" id="cb256"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb256-1"><a href="#cb256-1"></a><span class="pp">#include </span><span class="im">&lt;QFileInfo&gt;</span></span>
<span id="cb256-2"><a href="#cb256-2"></a></span>
<span id="cb256-3"><a href="#cb256-3"></a><span class="co">// check if path exists and if yes: Is it a file and no directory?</span></span>
<span id="cb256-4"><a href="#cb256-4"></a><span class="dt">bool</span> fileExists = QFileInfo::exists(path) &amp;&amp; QFileInfo(path).isFile();</span></code></pre></div>
</section>
<section id="answer-3-score-11-2" class="level4">
<h4>Answer 3 (score 11)</h4>
<p>You can use the <code>QFileInfo::exists()</code> method:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb257-1"><a href="#cb257-1"></a><span class="pp">#include </span><span class="im">&lt;QFileInfo&gt;</span></span>
<span id="cb257-2"><a href="#cb257-2"></a><span class="cf">if</span>(QFileInfo(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">exampleFile.txt&quot;</span>).exists()){</span>
<span id="cb257-3"><a href="#cb257-3"></a>    <span class="co">//The file exists</span></span>
<span id="cb257-4"><a href="#cb257-4"></a>}</span>
<span id="cb257-5"><a href="#cb257-5"></a><span class="cf">else</span>{</span>
<span id="cb257-6"><a href="#cb257-6"></a>    <span class="co">//The file doesn&#39;t exist</span></span>
<span id="cb257-7"><a href="#cb257-7"></a>}</span></code></pre></div>
<hr>
<p>If you want it to return <code>true</code> only if the <em>file</em> exists and <code>false</code> if the path exists but is a folder, you can combine it with <code>QDir::exists()</code>:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb258-1"><a href="#cb258-1"></a><span class="pp">#include </span><span class="im">&lt;QFileInfo&gt;</span></span>
<span id="cb258-2"><a href="#cb258-2"></a><span class="pp">#include </span><span class="im">&lt;QDir&gt;</span></span>
<span id="cb258-3"><a href="#cb258-3"></a>QString path = <span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">exampleFile.txt&quot;</span>;</span>
<span id="cb258-4"><a href="#cb258-4"></a><span class="cf">if</span>(QFileInfo(path).exists() &amp;&amp; !QDir(path).exists()){</span>
<span id="cb258-5"><a href="#cb258-5"></a>    <span class="co">//The file exists and is not a folder</span></span>
<span id="cb258-6"><a href="#cb258-6"></a>}</span>
<span id="cb258-7"><a href="#cb258-7"></a><span class="cf">else</span>{</span>
<span id="cb258-8"><a href="#cb258-8"></a>    <span class="co">//The file doesn&#39;t exist, either the path doesn&#39;t exist or is the path of a folder</span></span>
<span id="cb258-9"><a href="#cb258-9"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-should-i-choose-gtk-or-qt-score-74518-in-2009" class="level3">
<h3>72: What should I choose: GTK+ or Qt? (score <a href="https://stackoverflow.com/q/1887070.html">74518</a> in 2009)</h3>
<section id="question-71" class="level4">
<h4>Question</h4>
<p>Can someone suggest what’s the best uses for those libraries today? Is it just GUI, or do they have database, XML, networking, threading, etc support too?</p>
<p>I was reading about them, and considered starting to learning/using one of them.</p>
<p>What is the most common one? What’s the difference between them? Why would you choose one over the other?</p>
</section>
<section id="answer-accepted-score-89" class="level4">
<h4>Answer accepted (score 89)</h4>
<p>As you seem to primarily target Linux, then the choice mostly depends on the programming language you want to use.</p>
<p>If you code in C, then obviously go for GTK+</p>
<p>If you code in C++, go for Qt, otherwise you will need <a href="http://www.gtkmm.org/" rel="noreferrer">Gtkmm</a> (a C++ wrapper over GTK+)</p>
<p>If you code in Python, both GTK+ and Qt have bindings for the language: see <a href="http://www.pygtk.org/" rel="noreferrer">PyGtk</a>, <a href="http://www.riverbankcomputing.co.uk/software/pyqt/intro" rel="noreferrer">PyQt</a> and <a href="http://www.pyside.org/" rel="noreferrer">PySide</a> (the one launched by Nokia themselves).</p>
<p>If you code in Java, Qt is no more a viable option imho as <a href="https://web.archive.org/web/20090221105007/http://www.qtsoftware.com/about/news/preview-of-final-qt-jambi-release-available" rel="noreferrer">Nokia discontinued Qt Jambi</a> (the Java bindings for Qt).</p>
<p>Also, Qt is more top-notch regarding its scenegraph <a href="http://doc.qt.io/qt-5/qgraphicsscene.html" rel="noreferrer">QGraphicsScene</a> API, its scripting engine built over Javascript Core (the engine powering WebKit), its state machine and animations framework, and the <a href="http://blog.qt.io/blog/2009/05/13/qt-declarative-ui/" rel="noreferrer">declarative UI</a>.</p>
<p>GTK+ doesn’t offer that much although you can use <a href="http://www.clutter-project.org/" rel="noreferrer">Clutter</a> alongside with it.</p>
<p>If you’re specifically looking into DB, XML (GTK+ has a parser for a subset of XML) and threading (GTK+ has <a href="http://library.gnome.org/devel/glib/" rel="noreferrer">GLib</a>) features then Qt will offer all that in <a href="http://doc.qt.io/qt-5/qtsql-index.html" rel="noreferrer">QtSql</a>, <a href="http://doc.qt.io/qt-5/qtxml-index.html" rel="noreferrer">QtXml</a> and <a href="http://doc.qt.io/qt-5/qtconcurrent-index.html" rel="noreferrer">QtConcurrent</a>.</p>
<p>All in all, I would say Qt is a sure choice. But GTK+ is very capable as well.</p>
<p>I’m not sure you will get a crystal clear answer for your question, which explains why some people keep preferring Gnome over KDE or vice-versa. <strong>Choose what works best for you.</strong></p>
<p>PS: I you plan to also target Symbian, then go for Qt.</p>
<p>EDIT: Something that is also great with Qt is <code>QtWebView</code>: it brings Chromium into your Qt application to display web content. Others are embedding web content into their application using for instance Awesomium or Berkelium.</p>
</section>
<section id="answer-2-score-42-3" class="level4">
<h4>Answer 2 (score 42)</h4>
<p>I’ve used GTK+, QT and wxWidgets before. Here’s a brief summary:</p>
<p>For my first cross platform UI project I decided to go for wxWidgets mainly because at the time the license wasn’t as restrictive as QT’s (QT was GPL and only for Linux) and it had platform specific UI (unlike GTK). The project worked out well but there were quite a few glitches getting it to compile and run properly in other platforms - sometimes some events were fired up differently and such. Also GDI in wxWidgets was pretty slow.</p>
<p>Next I used GTK for a different project in python. For this I used the python bindings and everything worked out more or less smoothly. I didn’t quite like the fact that the UI didn’t look native on Windows and Mac and also when you launch a GTK+ app it always debug outputs loads of CRITICAL warnings which seem fine to ignore. :S</p>
<p>Finally, I did a very simple QT project now that Nokia has acquired it and was brilliant. The best of the three. First off, if you’re not an old schooler who prefers VI or Emacs, QtCreator is brilliant. I really love VI and used it for years but I much prefer QtCreator for C++ QT projects. Regarding the library I also liked a lot the documentation and the APIs provided. QT has a concept of slots and signals which introduce new C++ keywords and a preprocessor. Basically, after reading a tutorial you’ll get it easily and will start to love it. I’m now doing iPhone dev and it does feel a bit like Cocoa’s/Interface Builder’s UI paradigm.</p>
<p>Summary: I’d go for QT hands down. The license is pretty good and the SDK and documentation really nice.</p>
</section>
<section id="answer-3-score-24-2" class="level4">
<h4>Answer 3 (score 24)</h4>
<p>I have never used GTK, but from my personal experience using Qt:</p>
<p>It is much more than a simple GUI. It’s a whole application framework. I used to think of it as the Java libraries for C++. It provides all you mention – database, XML, networking and threading, and more. It also provides things such as containers and iterators, and counterparts to a number of boost libraries.</p>
<p>The thing that impressed me most when starting to use Qt was the extremely extensive documentation. You get a program called Qt Assistant, which provides fully indexed and searchable API documentation on your desktop, as well as numerous code examples and tutorials. I found it made a big difference in searching the web each time for API info. Very quick access when you need to remember a method signature.</p>
<p>I am not sure which is most common; that’s probably hard to measure accurately. They’re certainly both popular. As Gnome is the default desktop of Ubuntu, and Gnome sits on top of GTK, it obviously has widespread usage. Of course, KDE is very popular as well. Nokia is heavily pushing Qt in the mobile space – their Maemo OS, used on the new N900 for example, is soon to switch to Qt as the default toolkit (currently it is GTK.) I believe Qt will also soon become the default toolkit for Symbian OS.</p>
<p>I have not used Qt Creator, but I have heard many good things about it. It is a C++ IDE with obvious heavy integration with Qt. It also has fake vim emulation which is always nice if you like that kind of thing!</p>
<p>Qt uses qmake for build configuration. I found this much nicer than having to write your own makefiles. I do not know what GTK uses for building.</p>
<p>A couple of things I found a bit offputting with Qt at first was its big uses of preprocessor macros. The signal/slots system provides a nice mechanism for event/message passing in your application, but it does feel a bit like magic that may not be easily portable to another toolkit if you ever want to. Also, the moc (meta-object compiler), while I’m not entirely sure what it does, also feels a bit too much like magic going on behind the scenes.</p>
<p>All in all, though, I would recommend Qt, particularly if you are learning. It has really amazing documentation and a nice IDE, and busy forums. You’ll be able to build C++ apps very rapidly with it, particularly with the QML coming in 4.7.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="symbols-not-found-for-architecture-x86_64-on-qtcreator-project-score-72955-in" class="level3">
<h3>73: “Symbol(s) not found for architecture x86_64” on QtCreator project (score <a href="https://stackoverflow.com/q/18973042.html">72955</a> in )</h3>
<section id="question-72" class="level4">
<h4>Question</h4>
<p>I’m getting the error</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb259-1"><a href="#cb259-1"></a>Symbol(s) not found <span class="cf">for</span> architecture x86_64</span></code></pre></div>
<p>Trying to compile a project on QtCreator. It happens when I try to create an instance of an user defined class, <code>Layer</code>. That class consists of a header, <code>layer.h</code>, and a implementation, <code>layer.cpp</code>. It was tested and works in another programs. On my project, it is included in <code>qtwidget.h</code> and the error happens when I try to use it on <code>qtwidget.cpp</code>. For example:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb260-1"><a href="#cb260-1"></a>Layer&lt;<span class="dt">double</span>&gt; text(<span class="st">&quot;pq.txt&quot;</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>);</span></code></pre></div>
<p>Having this line on <code>qtwidget.cpp</code> is enough for the error to show up.</p>
<p>This is such a generic error that I’m clueless on how to isolate it any further, but if it helps, I’ve included the whole project on <a href="http://github.com/viclib/3d_multilayer_viewer">this git repo</a>.</p>
</section>
<section id="answer-2-score-46-1" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>In my opinion, the error message that Qt Creator displays is quite misleading until you understand it, but does not prevent splitting the template class into a header and implementation file. If you think about the message:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb261-1"><a href="#cb261-1"></a>Symbol(s) not found <span class="cf">for</span> architecture x86_64</span></code></pre></div>
<p>the problem, I originally thought when I saw this, is that it states this error on its own in the <em>Issues</em> output and can lead the user into thinking that the problem is due to the architecture. Actually, all its saying is that there’s a defined symbol (often function) whose matching implementation wasn’t found.</p>
<p>If you change from <em>Issues</em> to the <em>Compile Output</em> window and scroll up, you’ll be able to see exactly what symbols can’t be found; mine’s displayed in red. It’s just annoying that the detail of the missing symbol(s) doesn’t show up in the <em>Issues</em> view.</p>
<p>It’s easy to replicate this error by just adding a function definition into a header and without implementing the function, call it from the .cpp file. You’ll then see something like this in the Issues window</p>
<p><img src="https://i.stack.imgur.com/7zemK.png" alt="symbol not found"></p>
<p>Switching to the Compile Output view and scrolling up displays this: -</p>
<p><img src="https://i.stack.imgur.com/xHpYU.png" alt="enter image description here"></p>
<p>So now we see that tthe actual problem is that the function DoSomeStuff in the class called PGGui is being called from the constructor PGGui::PGGui, but the body of DoSomeStuff is missing, as its symbol is not found.</p>
</section>
<section id="answer-3-score-8-5" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>Fortunately I’ve managed to solve my problem before any answers, so, if anyone is experiencing anything similar, the issue was that it seems you <strong>can’t split a templated class into a .cpp and a .h file</strong>. Putting all declarations of the <code>.cpp</code> file back into the <code>.h</code> solved the issue.</p>
<p>I still had a leftover problem, though: duplicated symbols (which was the reason I split it). This time, declaring a variable as <code>external</code> in the <code>.h</code>, and redeclaring it without the <code>external</code> keyword in one (and only one) <code>.cpp</code> file solved the issue for good.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="configuring-the-gcc-compiler-switches-in-qt-qtcreator-and-qmake-score-72633-in-2011" class="level3">
<h3>74: Configuring the GCC compiler switches in Qt, QtCreator, and QMake (score <a href="https://stackoverflow.com/q/2987062.html">72633</a> in 2011)</h3>
<section id="question-73" class="level4">
<h4>Question</h4>
<p>I recently tried to use <a href="http://en.wikipedia.org/wiki/Qt_Creator" rel="noreferrer">Qt Creator</a> 1.3.2, Qt 4.6.2, and GCC 4.4.0 (32-bit version) on Windows 7 (64-bit) to compile an application using some of the experimental C++0x extensions and encountered the following (fatal) error:</p>
<blockquote>
<p>
This file requires compiler and library support for the upcoming ISO C++ standard, C++0x. This support is currently experimental, and must be enabled with the -std=c++0x or -std=gnu++0x compiler options.
</p>
</blockquote>
<p>In my search for a solution, I came across the thread <em><a href="http://lists.trolltech.com/qt-interest/2004-05/thread00001-0.html" rel="noreferrer">qmake and compiler flags?</a></em>, and added the following to the .pro file:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb262-1"><a href="#cb262-1"></a>CXXFLAGS += -std=c++<span class="er">0x</span></span></code></pre></div>
<p>but that didn’t seem to make a difference.</p>
<p>So, I expect there’s some tag I need to add to the .pro (project) file, but I’ve never messed with the GCC compiler switches in Qt, QMake, and QtCreator before, and I am uncertain about the proper invokation / incantation. So, my question is how do you set GCC compiler switches when using QtCreator, QMake, and Qt?</p>
</section>
<section id="answer-accepted-score-104" class="level4">
<h4>Answer accepted (score 104)</h4>
<p>It boils down to reading the <a href="http://qt-project.org/doc/qt-5/qmake-variable-reference.html#qmake-cxxflags" rel="noreferrer">manual</a>. Instead of using <code>CXXFLAGS</code> in the .pro file, you need to use <code>QMAKE_CXXFLAGS</code> as in:</p>
<p>main.cpp:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb263-1"><a href="#cb263-1"></a><span class="pp">#include </span><span class="im">&lt;cinttypes&gt;</span></span>
<span id="cb263-2"><a href="#cb263-2"></a></span>
<span id="cb263-3"><a href="#cb263-3"></a><span class="dt">int</span> main() { <span class="cf">return</span> <span class="dv">0</span>; }</span></code></pre></div>
<p>main.pro:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb264-1"><a href="#cb264-1"></a>SOURCES += main.cpp</span>
<span id="cb264-2"><a href="#cb264-2"></a>QMAKE_CXXFLAGS += -std=c++<span class="er">0x</span></span></code></pre></div>
</section>
<section id="answer-2-score-5" class="level4">
<h4>Answer 2 (score 5)</h4>
<p>You should use</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb265-1"><a href="#cb265-1"></a>CONFIG += c++<span class="dv">11</span></span></code></pre></div>
<p>to enable C++11 compiler flags automatically.</p>
<p>Look for <code>.prf</code> files in your qt installation. I don’t know where they might be on windows, but on my Linux installation they are under <code>/opt/Qt/5.4/gcc_64/mkspecs/features</code>.</p>
<p>You might want to read the <a href="http://doc.qt.io/qt-4.8/qmake-project-files.html#configuration-features" rel="noreferrer">qmake documentation</a> for that:</p>
<blockquote>
<p>
qmake can be set up with extra configuration features that are specified in feature (.prf) files. These extra features often provide support for custom tools that are used during the build process. To add a feature to the build process, append the feature name (the stem of the feature filename) to the CONFIG variable.
</p>
</blockquote>
<p>You can <a href="http://doc.qt.io/qt-4.8/qmake-advanced-usage.html#adding-new-configuration-features" rel="noreferrer">add your own features</a>.</p>
<p>Here is what I found on my system. CONFIG += <em>name</em> will enable the feature:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb266-1"><a href="#cb266-1"></a>./android/android_deployment_settings.prf</span>
<span id="cb266-2"><a href="#cb266-2"></a>./android/android.prf</span>
<span id="cb266-3"><a href="#cb266-3"></a>./build_pass.prf</span>
<span id="cb266-4"><a href="#cb266-4"></a>./c++<span class="fl">11.</span><span class="er">prf</span></span>
<span id="cb266-5"><a href="#cb266-5"></a>./c++<span class="fl">14.</span><span class="er">prf</span></span>
<span id="cb266-6"><a href="#cb266-6"></a>./cmake_functions.prf</span>
<span id="cb266-7"><a href="#cb266-7"></a>./configure.prf</span>
<span id="cb266-8"><a href="#cb266-8"></a>./create_cmake.prf</span>
<span id="cb266-9"><a href="#cb266-9"></a>./ctest_testcase_common.prf</span>
<span id="cb266-10"><a href="#cb266-10"></a>./ctest_testcase_installed.prf</span>
<span id="cb266-11"><a href="#cb266-11"></a>./ctest_testcase.prf</span>
<span id="cb266-12"><a href="#cb266-12"></a>./dbusadaptors.prf</span>
<span id="cb266-13"><a href="#cb266-13"></a>./dbusinterfaces.prf</span>
<span id="cb266-14"><a href="#cb266-14"></a>./declarative_debug.prf</span>
<span id="cb266-15"><a href="#cb266-15"></a>./default_post.prf</span>
<span id="cb266-16"><a href="#cb266-16"></a>./default_pre.prf</span>
<span id="cb266-17"><a href="#cb266-17"></a>./designer_defines.prf</span>
<span id="cb266-18"><a href="#cb266-18"></a>./device_config.prf</span>
<span id="cb266-19"><a href="#cb266-19"></a>./egl.prf</span>
<span id="cb266-20"><a href="#cb266-20"></a>./exceptions_off.prf</span>
<span id="cb266-21"><a href="#cb266-21"></a>./exceptions.prf</span>
<span id="cb266-22"><a href="#cb266-22"></a>./exclusive_builds_post.prf</span>
<span id="cb266-23"><a href="#cb266-23"></a>./exclusive_builds.prf</span>
<span id="cb266-24"><a href="#cb266-24"></a>./gcov.prf</span>
<span id="cb266-25"><a href="#cb266-25"></a>./include_source_dir.prf</span>
<span id="cb266-26"><a href="#cb266-26"></a>./incredibuild_xge.prf</span>
<span id="cb266-27"><a href="#cb266-27"></a>./java.prf</span>
<span id="cb266-28"><a href="#cb266-28"></a>./lex.prf</span>
<span id="cb266-29"><a href="#cb266-29"></a>./link_ltcg.prf</span>
<span id="cb266-30"><a href="#cb266-30"></a>./link_pkgconfig.prf</span>
<span id="cb266-31"><a href="#cb266-31"></a>./ltcg.prf</span>
<span id="cb266-32"><a href="#cb266-32"></a>./mac/default_post.prf</span>
<span id="cb266-33"><a href="#cb266-33"></a>./mac/default_pre.prf</span>
<span id="cb266-34"><a href="#cb266-34"></a>./mac/objective_c.prf</span>
<span id="cb266-35"><a href="#cb266-35"></a>./mac/rez.prf</span>
<span id="cb266-36"><a href="#cb266-36"></a>./mac/sdk.prf</span>
<span id="cb266-37"><a href="#cb266-37"></a>./moc.prf</span>
<span id="cb266-38"><a href="#cb266-38"></a>./no_debug_info.prf</span>
<span id="cb266-39"><a href="#cb266-39"></a>./precompile_header.prf</span>
<span id="cb266-40"><a href="#cb266-40"></a>./qfeatures.prf</span>
<span id="cb266-41"><a href="#cb266-41"></a>./qlalr.prf</span>
<span id="cb266-42"><a href="#cb266-42"></a>./qml1_module.prf</span>
<span id="cb266-43"><a href="#cb266-43"></a>./qml1_plugin.prf</span>
<span id="cb266-44"><a href="#cb266-44"></a>./qml_debug.prf</span>
<span id="cb266-45"><a href="#cb266-45"></a>./qml_module.prf</span>
<span id="cb266-46"><a href="#cb266-46"></a>./qml_plugin.prf</span>
<span id="cb266-47"><a href="#cb266-47"></a>./qmltestcase.prf</span>
<span id="cb266-48"><a href="#cb266-48"></a>./qpa/basicunixfontdatabase.prf</span>
<span id="cb266-49"><a href="#cb266-49"></a>./qpa/genericunixfontdatabase.prf</span>
<span id="cb266-50"><a href="#cb266-50"></a>./qt_android_deps.prf</span>
<span id="cb266-51"><a href="#cb266-51"></a>./qt_app.prf</span>
<span id="cb266-52"><a href="#cb266-52"></a>./qt_build_config.prf</span>
<span id="cb266-53"><a href="#cb266-53"></a>./qt_build_paths.prf</span>
<span id="cb266-54"><a href="#cb266-54"></a>./qt_common.prf</span>
<span id="cb266-55"><a href="#cb266-55"></a>./qt_config.prf</span>
<span id="cb266-56"><a href="#cb266-56"></a>./qt_docs.prf</span>
<span id="cb266-57"><a href="#cb266-57"></a>./qt_docs_targets.prf</span>
<span id="cb266-58"><a href="#cb266-58"></a>./qt_example_installs.prf</span>
<span id="cb266-59"><a href="#cb266-59"></a>./qt_functions.prf</span>
<span id="cb266-60"><a href="#cb266-60"></a>./qt_headersclean.prf</span>
<span id="cb266-61"><a href="#cb266-61"></a>./qt_helper_lib.prf</span>
<span id="cb266-62"><a href="#cb266-62"></a>./qt_installs.prf</span>
<span id="cb266-63"><a href="#cb266-63"></a>./qt_module_headers.prf</span>
<span id="cb266-64"><a href="#cb266-64"></a>./qt_module.prf</span>
<span id="cb266-65"><a href="#cb266-65"></a>./qt_module_pris.prf</span>
<span id="cb266-66"><a href="#cb266-66"></a>./qt_parts.prf</span>
<span id="cb266-67"><a href="#cb266-67"></a>./qt_plugin.prf</span>
<span id="cb266-68"><a href="#cb266-68"></a>./qt.prf</span>
<span id="cb266-69"><a href="#cb266-69"></a>./qt_targets.prf</span>
<span id="cb266-70"><a href="#cb266-70"></a>./qt_tool.prf</span>
<span id="cb266-71"><a href="#cb266-71"></a>./resolve_config.prf</span>
<span id="cb266-72"><a href="#cb266-72"></a>./resolve_target.prf</span>
<span id="cb266-73"><a href="#cb266-73"></a>./resources.prf</span>
<span id="cb266-74"><a href="#cb266-74"></a>./silent.prf</span>
<span id="cb266-75"><a href="#cb266-75"></a>./simd.prf</span>
<span id="cb266-76"><a href="#cb266-76"></a>./spec_post.prf</span>
<span id="cb266-77"><a href="#cb266-77"></a>./spec_pre.prf</span>
<span id="cb266-78"><a href="#cb266-78"></a>./testcase.prf</span>
<span id="cb266-79"><a href="#cb266-79"></a>./testcase_targets.prf</span>
<span id="cb266-80"><a href="#cb266-80"></a>./testcocoon.prf</span>
<span id="cb266-81"><a href="#cb266-81"></a>./testlib_defines.prf</span>
<span id="cb266-82"><a href="#cb266-82"></a>./uic.prf</span>
<span id="cb266-83"><a href="#cb266-83"></a>./unix/bsymbolic_functions.prf</span>
<span id="cb266-84"><a href="#cb266-84"></a>./unix/dylib.prf</span>
<span id="cb266-85"><a href="#cb266-85"></a>./unix/hide_symbols.prf</span>
<span id="cb266-86"><a href="#cb266-86"></a>./unix/largefile.prf</span>
<span id="cb266-87"><a href="#cb266-87"></a>./unix/opengl.prf</span>
<span id="cb266-88"><a href="#cb266-88"></a>./unix/openvg.prf</span>
<span id="cb266-89"><a href="#cb266-89"></a>./unix/separate_debug_info.prf</span>
<span id="cb266-90"><a href="#cb266-90"></a>./unix/thread.prf</span>
<span id="cb266-91"><a href="#cb266-91"></a>./unix/x11inc.prf</span>
<span id="cb266-92"><a href="#cb266-92"></a>./unix/x11lib.prf</span>
<span id="cb266-93"><a href="#cb266-93"></a>./unix/x11.prf</span>
<span id="cb266-94"><a href="#cb266-94"></a>./unix/x11sm.prf</span>
<span id="cb266-95"><a href="#cb266-95"></a>./use_c_linker.prf</span>
<span id="cb266-96"><a href="#cb266-96"></a>./vxworks.prf</span>
<span id="cb266-97"><a href="#cb266-97"></a>./warn_off.prf</span>
<span id="cb266-98"><a href="#cb266-98"></a>./warn_on.prf</span>
<span id="cb266-99"><a href="#cb266-99"></a>./wayland-scanner.prf</span>
<span id="cb266-100"><a href="#cb266-100"></a>./win32/console.prf</span>
<span id="cb266-101"><a href="#cb266-101"></a>./win32/default_pre.prf</span>
<span id="cb266-102"><a href="#cb266-102"></a>./win32/dumpcpp.prf</span>
<span id="cb266-103"><a href="#cb266-103"></a>./win32/idcidl.prf</span>
<span id="cb266-104"><a href="#cb266-104"></a>./win32/msvc_mp.prf</span>
<span id="cb266-105"><a href="#cb266-105"></a>./win32/opengl.prf</span>
<span id="cb266-106"><a href="#cb266-106"></a>./win32/openvg.prf</span>
<span id="cb266-107"><a href="#cb266-107"></a>./win32/qt_config.prf</span>
<span id="cb266-108"><a href="#cb266-108"></a>./win32/qt_dll.prf</span>
<span id="cb266-109"><a href="#cb266-109"></a>./win32/rtti_off.prf</span>
<span id="cb266-110"><a href="#cb266-110"></a>./win32/rtti.prf</span>
<span id="cb266-111"><a href="#cb266-111"></a>./win32/stl_off.prf</span>
<span id="cb266-112"><a href="#cb266-112"></a>./win32/stl.prf</span>
<span id="cb266-113"><a href="#cb266-113"></a>./win32/windeployqt.prf</span>
<span id="cb266-114"><a href="#cb266-114"></a>./win32/windows.prf</span>
<span id="cb266-115"><a href="#cb266-115"></a>./winrt/console.prf</span>
<span id="cb266-116"><a href="#cb266-116"></a>./winrt/font_deployment.prf</span>
<span id="cb266-117"><a href="#cb266-117"></a>./winrt/package_manifest.prf</span>
<span id="cb266-118"><a href="#cb266-118"></a>./yacc.prf</span></code></pre></div>
</section>
<section id="answer-3-score-3-1" class="level4">
<h4>Answer 3 (score 3)</h4>
<p>The only way that really works for me is to <em>add it to</em> <code>QMAKE_CXXFLAGS</code>.</p>
<p>The <code>CONFIG += c++11</code> <strong>does not add</strong> <code>-std=c++11</code> to the compile command.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qdialog-exec-and-getting-result-value-score-71773-in-2019" class="level3">
<h3>75: QDialog exec() and getting result value (score <a href="https://stackoverflow.com/q/12470806.html">71773</a> in 2019)</h3>
<section id="question-74" class="level4">
<h4>Question</h4>
<p>I have subclassed <code>QDialog</code> to implement functionality similar to <code>QMessageBox</code> ( I needed this to allow for customization). It has a text message and OK, Cancel buttons. I am showing the dialog using <code>exec()</code> to make it blocking. Now, how do I return values of true/false when the user clicks on OK/Cancel?</p>
<p>I tried connecting the buttons to <code>setResult()</code> and then, return the result value when clicked, but</p>
<ol>
<li>
Clicking the buttons does not close the dialog box
</li>
<li>
the return value is incorrect. Following is the code I have written. I think I am wrong in the exec/result part - but I am not sure how to fix it.
</li>
</ol>
<div class="sourceCode" id="cb267"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb267-1"><a href="#cb267-1"></a>class MyMessageBox : public QDialog {</span>
<span id="cb267-2"><a href="#cb267-2"></a>    Q_OBJECT</span>
<span id="cb267-3"><a href="#cb267-3"></a></span>
<span id="cb267-4"><a href="#cb267-4"></a>private slots:</span>
<span id="cb267-5"><a href="#cb267-5"></a></span>
<span id="cb267-6"><a href="#cb267-6"></a>    <span class="dt">void</span> onOKButtonClicked() { this-&gt;setResult(QDialog::Accepted); }</span>
<span id="cb267-7"><a href="#cb267-7"></a>    <span class="dt">void</span> onCancelButtonClicked() { this-&gt;setResult(QDialog::Rejected); }</span>
<span id="cb267-8"><a href="#cb267-8"></a></span>
<span id="cb267-9"><a href="#cb267-9"></a>public:</span>
<span id="cb267-10"><a href="#cb267-10"></a>    MyMessageBox(QMessageBox::Icon icon, <span class="dt">const</span> QString&amp; title,</span>
<span id="cb267-11"><a href="#cb267-11"></a>        <span class="dt">const</span> QString&amp; text, <span class="dt">bool</span> showCancelButton = true,</span>
<span id="cb267-12"><a href="#cb267-12"></a>        QWidget* parent = <span class="dv">0</span>);</span>
<span id="cb267-13"><a href="#cb267-13"></a></span>
<span id="cb267-14"><a href="#cb267-14"></a>    virtual <span class="dt">void</span> resizeEvent(QResizeEvent* e);</span>
<span id="cb267-15"><a href="#cb267-15"></a></span>
<span id="cb267-16"><a href="#cb267-16"></a>    QDialog::DialogCode showYourself()</span>
<span id="cb267-17"><a href="#cb267-17"></a>    {</span>
<span id="cb267-18"><a href="#cb267-18"></a>        this-&gt;setWindowModality(Qt::ApplicationModal);</span>
<span id="cb267-19"><a href="#cb267-19"></a>        this-&gt;exec();</span>
<span id="cb267-20"><a href="#cb267-20"></a>        <span class="cf">return</span> static_cast&lt;QDialog::DialogCode&gt;(this-&gt;result());</span>
<span id="cb267-21"><a href="#cb267-21"></a>    }</span>
<span id="cb267-22"><a href="#cb267-22"></a>};</span></code></pre></div>
<p>The user will instantiate the class and call <code>showYourself()</code> which is expected to return the value and also close(and delete) the dialog.</p>
<p>I have posted partial code. Let me know if you need more and I will post the complete version.</p>
</section>
<section id="answer-accepted-score-26-1" class="level4">
<h4>Answer accepted (score 26)</h4>
<p>Some points :</p>
<ol>
<li>
Rather than using <code>setResult()</code> yourself, use <a href="http://qt-project.org/doc/qt-4.8/qdialog.html#accept">QDialog::accept()</a> and <a href="http://qt-project.org/doc/qt-4.8/qdialog.html#reject">QDialog::reject()</a>.
</li>
<li>
It seems you are not taking full advantage of the signals and slots. You need the object which create the dialog (or another one) to listen to the signals of the dialog.
</li>
<li>
In your code you are not connecting signals to slots either.
</li>
<li>
With my fix <code>onOKButtonClicked</code> and <code>onCancelButtonClicked</code> are unnecessary.
</li>
<li>
With my fix you don’t need <code>showYourself()</code>. Just call <code>exec</code> and with the events information will flow.
</li>
</ol>
<p>You need to add this code before showing the dialog (<code>this</code> assume it is in a dialog method):</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb268-1"><a href="#cb268-1"></a>QObject::connect(acceptButton, SIGNAL(clicked()), this, SLOT(accept()));</span>
<span id="cb268-2"><a href="#cb268-2"></a>QObject::connect(rejectButton, SIGNAL(clicked()), this, SLOT(reject()));</span></code></pre></div>
<p>In the caller object you have</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb269-1"><a href="#cb269-1"></a><span class="dt">void</span> someInitFunctionOrConstructor(){</span>
<span id="cb269-2"><a href="#cb269-2"></a>   QObject::connect(mydialog, SIGNAL(finished (<span class="dt">int</span>)), this, SLOT(dialogIsFinished(<span class="dt">int</span>)));</span>
<span id="cb269-3"><a href="#cb269-3"></a>}</span>
<span id="cb269-4"><a href="#cb269-4"></a></span>
<span id="cb269-5"><a href="#cb269-5"></a><span class="dt">void</span> dialogIsFinished(<span class="dt">int</span>){ <span class="co">//this is a slot</span></span>
<span id="cb269-6"><a href="#cb269-6"></a>   <span class="cf">if</span>(result == QDialog::Accepted){</span>
<span id="cb269-7"><a href="#cb269-7"></a>       <span class="co">//do something</span></span>
<span id="cb269-8"><a href="#cb269-8"></a>       <span class="cf">return</span></span>
<span id="cb269-9"><a href="#cb269-9"></a>   }</span>
<span id="cb269-10"><a href="#cb269-10"></a>   <span class="co">//do another thing</span></span>
<span id="cb269-11"><a href="#cb269-11"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-18-1" class="level4">
<h4>Answer 2 (score 18)</h4>
<p>Another solution:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb270-1"><a href="#cb270-1"></a>    <span class="co">// set signal and slot for &quot;Buttons&quot;</span></span>
<span id="cb270-2"><a href="#cb270-2"></a>    connect(YesButton, SIGNAL(clicked()), dlg, SLOT(accept()));</span>
<span id="cb270-3"><a href="#cb270-3"></a>    connect(NoButton, SIGNAL(clicked()), dlg, SLOT(reject()));</span>
<span id="cb270-4"><a href="#cb270-4"></a></span>
<span id="cb270-5"><a href="#cb270-5"></a>    <span class="co">// show modal window event loop and wait for button clicks</span></span>
<span id="cb270-6"><a href="#cb270-6"></a>    <span class="dt">int</span> dialogCode = dlg-&gt;exec();</span>
<span id="cb270-7"><a href="#cb270-7"></a></span>
<span id="cb270-8"><a href="#cb270-8"></a>    <span class="co">// act on dialog return code</span></span>
<span id="cb270-9"><a href="#cb270-9"></a>    <span class="cf">if</span>(dialogCode == QDialog::Accepted) { <span class="co">// YesButton clicked }</span></span>
<span id="cb270-10"><a href="#cb270-10"></a>    <span class="cf">if</span>(dialogCode == QDialog::Rejected) { <span class="co">// NoButton clicked }</span></span></code></pre></div>
</section>
<section id="answer-3-score-9-2" class="level4">
<h4>Answer 3 (score 9)</h4>
<p><strong>Case 1</strong> Clicking the buttons does not close the dialog box.</p>
<p>For this you have to close the dialog on respective <code>SLOTS</code>, so Use</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb271-1"><a href="#cb271-1"></a><span class="dt">void</span> onOKButtonClicked(){ this-&gt;setResult(QDialog::Accepted); this-&gt;close();}</span>
<span id="cb271-2"><a href="#cb271-2"></a><span class="dt">void</span> onCancelButtonClicked(){ this-&gt;setResult(QDialog::Rejected);this-&gt;close();}  </span></code></pre></div>
<p><em>Note: Only after you have clicked the Ok button or Cancel button in a standard QMessageBox, setResult() function is triggered and the status is changed. It’s not the same effect when done vice versa.</em></p>
<p><strong>Case 2</strong> The return value is incorrect.</p>
<p>I think only after your dialog gets closed, you will have the result available in <code>result()</code> function. So I guess it will be solved, after you have made the changes specified in Case 1.</p>
<p>If it still persists, use your own private member function to resolve it.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="unresolved-external-symbol-public-virtual-struct-qmetaobject-const-__thiscall-parent-score-71464-in-2016" class="level3">
<h3>76: Unresolved external symbol "public: virtual struct QMetaObject const * __thiscall Parent (score <a href="https://stackoverflow.com/q/14170770.html">71464</a> in 2016)</h3>
<section id="question-75" class="level4">
<h4>Question</h4>
<p>I inherited a class from QObject :</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb272-1"><a href="#cb272-1"></a>class Parent: public QObject</span>
<span id="cb272-2"><a href="#cb272-2"></a>{</span>
<span id="cb272-3"><a href="#cb272-3"></a>    Q_OBJECT</span>
<span id="cb272-4"><a href="#cb272-4"></a>    QObject* cl;</span>
<span id="cb272-5"><a href="#cb272-5"></a></span>
<span id="cb272-6"><a href="#cb272-6"></a>public:</span>
<span id="cb272-7"><a href="#cb272-7"></a>    Parent(QObject *parent=<span class="dv">0</span>):QObject(parent) {</span>
<span id="cb272-8"><a href="#cb272-8"></a>        cl = NULL;</span>
<span id="cb272-9"><a href="#cb272-9"></a>    }</span>
<span id="cb272-10"><a href="#cb272-10"></a></span>
<span id="cb272-11"><a href="#cb272-11"></a>    QObject* getCl() <span class="dt">const</span> {</span>
<span id="cb272-12"><a href="#cb272-12"></a>        <span class="cf">return</span> cl;</span>
<span id="cb272-13"><a href="#cb272-13"></a>    }</span>
<span id="cb272-14"><a href="#cb272-14"></a>    <span class="dt">void</span> setCl(QObject *obj) {</span>
<span id="cb272-15"><a href="#cb272-15"></a>        cl = obj;</span>
<span id="cb272-16"><a href="#cb272-16"></a>    }</span>
<span id="cb272-17"><a href="#cb272-17"></a>};</span></code></pre></div>
<p>But when I write :</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb273-1"><a href="#cb273-1"></a>Parent ev;</span></code></pre></div>
<p>I get the following error:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb274-1"><a href="#cb274-1"></a>main.obj:-<span class="dv">1</span>: error: LNK2001: unresolved external symbol <span class="st">&quot;public: virtual struct QMetaObject const * __thiscall Parent::metaObject(void)const &quot;</span> (?metaObject@Parent@@UBEPBUQMetaObject@@XZ)</span>
<span id="cb274-2"><a href="#cb274-2"></a></span>
<span id="cb274-3"><a href="#cb274-3"></a>main.obj:-<span class="dv">1</span>: error: LNK2001: unresolved external symbol <span class="st">&quot;public: virtual void * __thiscall Parent::qt_metacast(char const *)&quot;</span> (?qt_metacast@Parent@@UAEPAXPBD@Z)</span>
<span id="cb274-4"><a href="#cb274-4"></a></span>
<span id="cb274-5"><a href="#cb274-5"></a>main.obj:-<span class="dv">1</span>: error: LNK2001: unresolved external symbol <span class="st">&quot;public: virtual int __thiscall Parent::qt_metacall(enum QMetaObject::Call,int,void * *)&quot;</span> (?qt_metacall@Parent@@UAEHW4Call@QMetaObject@@HPAPAX@Z)</span></code></pre></div>
</section>
<section id="answer-accepted-score-67" class="level4">
<h4>Answer accepted (score 67)</h4>
<p>You should delete the <code>debug</code> folder of your application and run it again to correct this problem.</p>
</section>
<section id="answer-2-score-58" class="level4">
<h4>Answer 2 (score 58)</h4>
<p>If you’re using Visual Studio, delete the line <code>Q_OBJECT</code> from the header file, save the file, put <code>Q_OBJECT</code> back into the header file, save the file again. This should generate the <code>moc_*</code> file and should build and link correctly.</p>
</section>
<section id="answer-3-score-30" class="level4">
<h4>Answer 3 (score 30)</h4>
<p>I noticed some answers are based on Visual Studio.</p>
<p>This answer is based on Qt Creator.</p>
<p>Unlike the name suggest, <code>Rebuild Project</code> will not wipe out everything and build from scratch. If you recently added <code>QObject</code> (and/or Q_OBJECT) to your class, you’ll have to run <code>qmake</code> again, e.g. </p>
<ol>
<li>
Clean Project
</li>
<li>
Run qmake
</li>
<li>
Build Project
</li>
</ol>
<p>This is because, by default, <code>qmake</code> only runs when you do significant changes to your solution like adding new source files or modify the <code>.pro</code> file. If you make edits to an existing file, it doesn’t know it needs to run <code>qmake</code>.</p>
<p>As a fall back, to brute force Qt to build everything from scratch, delete the <code>Debug</code> or <code>Release</code> folder.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="non-resizeable-qdialog-with-fixed-size-in-qt-score-70946-in-2014" class="level3">
<h3>77: Non-resizeable QDialog with fixed size in Qt? (score <a href="https://stackoverflow.com/q/696209.html">70946</a> in 2014)</h3>
<section id="question-76" class="level4">
<h4>Question</h4>
<p>I have a Qt dialog application. Now I dont want that dialog to be resizeable. I am not sure how to achieve this. I tried a bunch of things but still when the dialog launches this dialog can be resized.</p>
<p>What is the property that i should set to disable the dialog/Widget resize.</p>
<p>I also tried</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb275-1"><a href="#cb275-1"></a>setSizePolicy(QSizePolicy::Fixed);</span></code></pre></div>
<p>But i get an error saying..</p>
<pre>
source\nimcac_settingsMain.cpp(36) : error C2248:
**'QSizePolicy::QSizePolicy' : cannot access private member declared in class 'QSizePolicy'**
        p:\ThirdPartyExports\Qt\export\4.3\4.3.1f14\include\QtGui\../../src\gui\
kernel\qsizepolicy.h(177) : see declaration of 'QSizePolicy::QSizePolicy'
        p:\ThirdPartyExports\Qt\export\4.3\4.3.1f14\include\QtGui\../../src\gui\
kernel\qsizepolicy.h(34) : see declaration of 'QSizePolicy'
</pre>
<p>Kindly help me out with this.</p>
</section>
<section id="answer-accepted-score-52" class="level4">
<h4>Answer accepted (score 52)</h4>
<p>I don’t know if you already tried it, but <code>QWidget::setFixedSize</code> should do what you want</p>
</section>
<section id="answer-2-score-105" class="level4">
<h4>Answer 2 (score 105)</h4>
<p>The compile error you get is because you try to pass a <code>QSizePolicy::Policy</code> to <code>setSizePolicy(QSizePolicy)</code>, but there’s no implicit conversion from <code>QSizePolicy::Policy</code> (which is the policy for one dimension) to <code>QSizePolicy</code> (which is a class containing, among other things, one <code>Policy</code> per dimension (height, width)). <code>QSizePolicy</code> doesn’t work on top-level widgets (windows) anyway, though.</p>
<p><code>setFixedSize()</code> only works if you know the size of the dialog in advance (and usually you don’t, what with changing font sizes and languages). You can do</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb276-1"><a href="#cb276-1"></a>window()-&gt;setFixedSize( window()-&gt;sizeHint() );</span></code></pre></div>
<p>but it’s much better to use</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb277-1"><a href="#cb277-1"></a>window-&gt;layout()-&gt;setSizeConstraint( QLayout::SetFixedSize );</span></code></pre></div>
<p>That lets the layout determine the size of the dialog, but doesn’t allow resizing, which I assume is what you were asking for.</p>
</section>
<section id="answer-3-score-23" class="level4">
<h4>Answer 3 (score 23)</h4>
<div class="sourceCode" id="cb278"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb278-1"><a href="#cb278-1"></a>this-&gt;setFixedSize(this-&gt;width(),this-&gt;height());</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-compare-two-qstrings-score-70623-in-2013" class="level3">
<h3>78: How to Compare two Qstrings? (score <a href="https://stackoverflow.com/q/19264712.html">70623</a> in 2013)</h3>
<section id="question-77" class="level4">
<h4>Question</h4>
<p>I have to compare two Qstrings in qt,</p>
<p>say,</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb279-1"><a href="#cb279-1"></a>Qstring str1=<span class="st">&quot;1005&quot;</span>,str2=<span class="st">&quot;1006&quot;</span>;</span></code></pre></div>
<p>I have tried using ,</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb280-1"><a href="#cb280-1"></a><span class="cf">if</span>(str1==str2){</span>
<span id="cb280-2"><a href="#cb280-2"></a>   <span class="cf">return</span> true;</span>
<span id="cb280-3"><a href="#cb280-3"></a>}</span></code></pre></div>
<p>&amp;</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb281-1"><a href="#cb281-1"></a><span class="cf">if</span>(str1.compare(str2)==<span class="dv">0</span>)</span>
<span id="cb281-2"><a href="#cb281-2"></a>{</span>
<span id="cb281-3"><a href="#cb281-3"></a>    <span class="cf">return</span> true;</span>
<span id="cb281-4"><a href="#cb281-4"></a>}</span></code></pre></div>
<p>still both methods goes inside if condition &amp; returns true.</p>
</section>
<section id="answer-accepted-score-2" class="level4">
<h4>Answer accepted (score 2)</h4>
<p>It worked after Rebuilding the Project , I think this is the problem with QT CREATOR</p>
</section>
<section id="answer-2-score-33-1" class="level4">
<h4>Answer 2 (score 33)</h4>
<p>You can use :</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb282-1"><a href="#cb282-1"></a><span class="dt">int</span> x = QString::compare(str1, str2, Qt::CaseInsensitive);  <span class="co">// if strings are equal x should return 0</span></span></code></pre></div>
</section>
<section id="answer-3-score-12-5" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>The code below works fine for me.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb283-1"><a href="#cb283-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argv, <span class="dt">char</span> **args)</span>
<span id="cb283-2"><a href="#cb283-2"></a> {</span>
<span id="cb283-3"><a href="#cb283-3"></a>    QString str1=<span class="st">&quot;1005&quot;</span>,str2=<span class="st">&quot;1006&quot;</span>;</span>
<span id="cb283-4"><a href="#cb283-4"></a>    <span class="cf">if</span>(str1 == str2)</span>
<span id="cb283-5"><a href="#cb283-5"></a>        qDebug()&lt;&lt;<span class="st">&quot;This should not print&quot;</span>;</span>
<span id="cb283-6"><a href="#cb283-6"></a>    qDebug()&lt;&lt;<span class="st">&quot;Everything Ok&quot;</span>;</span>
<span id="cb283-7"><a href="#cb283-7"></a></span>
<span id="cb283-8"><a href="#cb283-8"></a>}</span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb284-1"><a href="#cb284-1"></a>Everything Ok</span></code></pre></div>
<p>I don’t know, why your code is not working, when is should have been fine. Recheck other parts of your code.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="error-c2228-left-of-must-have-classstructunion-score-70493-in" class="level3">
<h3>79: Error: C2228: left of ’’ must have class/struct/union (score <a href="https://stackoverflow.com/q/20871225.html">70493</a> in )</h3>
<section id="question-78" class="level4">
<h4>Question</h4>
<p>I’m a long time Java user learning C++ with Qt and I’m having a lot of trouble understanding how methods work. Right now, I’m trying to figure out databases, and tried to simplify my code with a header. Normally in Java I would just have a class called DatabaseControl with a void method that would execute whatever I wanted. For example, adding an employee to a database, as I’m doing now. I’d instantiate the class, by doing something like</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb285-1"><a href="#cb285-1"></a>DatabaseControl myDBControl = new DatabaseControl();</span></code></pre></div>
<p>and then execute the method with</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb286-1"><a href="#cb286-1"></a>myDBControl.addEmploye();</span></code></pre></div>
<p>which would bring up the series of input boxes for the user to input the information on the employee - name, department, etc.</p>
<p>So, now over to C++. I have my header</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb287-1"><a href="#cb287-1"></a>class DatabaseControl</span>
<span id="cb287-2"><a href="#cb287-2"></a>{</span>
<span id="cb287-3"><a href="#cb287-3"></a>public:</span>
<span id="cb287-4"><a href="#cb287-4"></a>    DatabaseControl();</span>
<span id="cb287-5"><a href="#cb287-5"></a>    ~DatabaseControl();</span>
<span id="cb287-6"><a href="#cb287-6"></a></span>
<span id="cb287-7"><a href="#cb287-7"></a>    <span class="co">//Methods</span></span>
<span id="cb287-8"><a href="#cb287-8"></a>    <span class="dt">void</span> addEmployee();</span>
<span id="cb287-9"><a href="#cb287-9"></a>};</span></code></pre></div>
<p>I don’t have any parameters in my constructors because all I want to do is call the “addEmployee” method in my main as I’ve shown above. In the same header file I have this below my class declaration</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb288-1"><a href="#cb288-1"></a><span class="dt">void</span> DatabaseControl::addEmployee(){</span>
<span id="cb288-2"><a href="#cb288-2"></a>QSqlQuery qry;</span>
<span id="cb288-3"><a href="#cb288-3"></a><span class="dt">bool</span> ok;</span>
<span id="cb288-4"><a href="#cb288-4"></a>QString firstName = QInputDialog::getText(NULL, <span class="st">&quot;QInputDialog::getText()&quot;</span>,</span>
<span id="cb288-5"><a href="#cb288-5"></a>                                     <span class="st">&quot;Employee first name:&quot;</span>, QLineEdit::Normal,</span>
<span id="cb288-6"><a href="#cb288-6"></a>                                     NULL, &amp;ok);</span>
<span id="cb288-7"><a href="#cb288-7"></a><span class="cf">if</span> (ok &amp;&amp; !firstName.isEmpty()){}</span>
<span id="cb288-8"><a href="#cb288-8"></a><span class="cf">else</span>{</span>
<span id="cb288-9"><a href="#cb288-9"></a>    QMessageBox msgBox;</span>
<span id="cb288-10"><a href="#cb288-10"></a>    msgBox.setWindowTitle(<span class="st">&quot;Error&quot;</span>);</span>
<span id="cb288-11"><a href="#cb288-11"></a>    msgBox.setText(<span class="st">&quot;Failed to add employee.</span><span class="sc">\n</span><span class="st">Reason: No employee name given.&quot;</span>);</span>
<span id="cb288-12"><a href="#cb288-12"></a>    msgBox.exec();</span>
<span id="cb288-13"><a href="#cb288-13"></a>}</span>
<span id="cb288-14"><a href="#cb288-14"></a>QString lastName = QInputDialog::getText(NULL, <span class="st">&quot;QInputDialog::getText()&quot;</span>,</span>
<span id="cb288-15"><a href="#cb288-15"></a>                                     <span class="st">&quot;Employee last name:&quot;</span>, QLineEdit::Normal,</span>
<span id="cb288-16"><a href="#cb288-16"></a>                                     NULL, &amp;ok);</span>
<span id="cb288-17"><a href="#cb288-17"></a>     <span class="cf">if</span> (ok &amp;&amp; !lastName.isEmpty()){</span>
<span id="cb288-18"><a href="#cb288-18"></a>         qry.prepare(<span class="st">&quot;INSERT INTO employees (firstname, lastname)&quot;</span> <span class="st">&quot;VALUES (:f1, :f2)&quot;</span>);</span>
<span id="cb288-19"><a href="#cb288-19"></a>         qry.bindValue(<span class="st">&quot;:f1&quot;</span>, firstName);</span>
<span id="cb288-20"><a href="#cb288-20"></a>         qry.bindValue(<span class="st">&quot;:f2&quot;</span>, lastName);</span>
<span id="cb288-21"><a href="#cb288-21"></a>         qry.exec();</span>
<span id="cb288-22"><a href="#cb288-22"></a>     }</span>
<span id="cb288-23"><a href="#cb288-23"></a>     <span class="cf">else</span>{</span>
<span id="cb288-24"><a href="#cb288-24"></a>         QMessageBox msgBox;</span>
<span id="cb288-25"><a href="#cb288-25"></a>         msgBox.setWindowTitle(<span class="st">&quot;Error&quot;</span>);</span>
<span id="cb288-26"><a href="#cb288-26"></a>         msgBox.setText(<span class="st">&quot;Failed to add employee.</span><span class="sc">\n</span><span class="st">Reason: No employee name given.&quot;</span>);</span>
<span id="cb288-27"><a href="#cb288-27"></a>         msgBox.exec();</span>
<span id="cb288-28"><a href="#cb288-28"></a>     }</span></code></pre></div>
<p>}</p>
<p>and then in my main I have this:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb289-1"><a href="#cb289-1"></a><span class="dt">void</span> MainWindow::on_addEmployee_clicked()</span>
<span id="cb289-2"><a href="#cb289-2"></a>{</span>
<span id="cb289-3"><a href="#cb289-3"></a>    DatabaseControl myDBControl();</span>
<span id="cb289-4"><a href="#cb289-4"></a>    myDBControl.addEmployee();</span>
<span id="cb289-5"><a href="#cb289-5"></a>}</span></code></pre></div>
<p>which I expected to just run the addEmployee method I wrote in the header file. However, when I compile, I get the error Error: C2228: left of ‘.addEmployee’ must have class/struct/union</p>
<p>I’ve looked at other instances of this error and don’t really understand exactly what’s wrong, and I feel it comes from my misunderstanding of methods in C++, because I know in Java something like this would work without issue (assuming the code in the header is correct which it very well may not be)</p>
</section>
<section id="answer-accepted-score-34" class="level4">
<h4>Answer accepted (score 34)</h4>
<p>You made an error here:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb290-1"><a href="#cb290-1"></a>DatabaseControl myDBControl();</span></code></pre></div>
<p>You declared a function called <code>myDBControl</code> taking no arguments and returning a <code>DatabaseControl</code>.</p>
<p>Object declarations without any constructor arguments must omit the <code>()</code>:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb291-1"><a href="#cb291-1"></a>DatabaseControl myDBControl;</span></code></pre></div>
<p>This is related to (but is not precisely) the “<a href="http://en.wikipedia.org/wiki/Most_vexing_parse">most vexing parse</a>”, in that it’s caused by the same language rule that <em>statements are function declarations if they can be so parsed</em>.</p>
</section>
<section id="answer-2-score-1" class="level4">
<h4>Answer 2 (score 1)</h4>
<p>You need to say this:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb292-1"><a href="#cb292-1"></a> DatabaseControl myDBControl;</span>
<span id="cb292-2"><a href="#cb292-2"></a> myDBControl.addEmployee();</span></code></pre></div>
</section>
<section id="answer-3-score-1-2" class="level4">
<h4>Answer 3 (score 1)</h4>
<p>You need to say this:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb293-1"><a href="#cb293-1"></a> DatabaseControl myDBControl;</span>
<span id="cb293-2"><a href="#cb293-2"></a> myDBControl.addEmployee();</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="converting-qstring-to-char-score-70483-in-2017" class="level3">
<h3>80: Converting QString to char* (score <a href="https://stackoverflow.com/q/5505221.html">70483</a> in 2017)</h3>
<section id="question-79" class="level4">
<h4>Question</h4>
<blockquote>
<p>
<strong>Possible Duplicate:</strong><br> <a href="https://stackoverflow.com/questions/2523765/qstring-to-char-conversion">QString to char conversion</a>
</p>
</blockquote>
<p>I have a function (fopen in STL) that gives a char* argument as a path in my computer, but I must use QString in that place so it doesn’t work.</p>
<p>How can I convert QString to char* to solve this problem?</p>
</section>
<section id="answer-accepted-score-47" class="level4">
<h4>Answer accepted (score 47)</h4>
<p>See <a href="http://developer.qt.nokia.com/faq/answer/how_can_i_convert_a_qstring_to_char_and_vice_versa" rel="nofollow noreferrer">here at How can I convert a QString to char* and vice versa?</a></p>
<blockquote>
<p>
In order to convert a QString to a char*, then you first need to get a latin1 representation of the string by calling toLatin1() on it which will return a QByteArray. Then call data() on the QByteArray to get a pointer to the data stored in the byte array. See the documentation:
</p>
<p>
<a href="https://doc.qt.io/qt-5/qstring.html#toLatin1" rel="nofollow noreferrer">https://doc.qt.io/qt-5/qstring.html#toLatin1</a> <a href="https://doc.qt.io/qt-5/qbytearray.html#data" rel="nofollow noreferrer">https://doc.qt.io/qt-5/qbytearray.html#data</a>
</p>
<p>
See the following example for a demonstration:
</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb294-1"><a href="#cb294-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> **argv)</span>
<span id="cb294-2"><a href="#cb294-2"></a>{</span>
<span id="cb294-3"><a href="#cb294-3"></a> QApplication app(argc, argv);</span>
<span id="cb294-4"><a href="#cb294-4"></a>  QString str1 = <span class="st">&quot;Test&quot;</span>;</span>
<span id="cb294-5"><a href="#cb294-5"></a>  QByteArray ba = str1.toLatin1();</span>
<span id="cb294-6"><a href="#cb294-6"></a>  <span class="dt">const</span> <span class="dt">char</span> *c_str2 = ba.data();</span>
<span id="cb294-7"><a href="#cb294-7"></a>  printf(<span class="st">&quot;str2: %s&quot;</span>, c_str2);</span>
<span id="cb294-8"><a href="#cb294-8"></a>  <span class="cf">return</span> app.exec();</span>
<span id="cb294-9"><a href="#cb294-9"></a>}</span></code></pre></div>
<p>
Note that it is necessary to store the bytearray before you call data() on it, a call like the following
</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb295-1"><a href="#cb295-1"></a><span class="dt">const</span> <span class="dt">char</span> *c_str2 = str2.toLatin1().data();</span></code></pre></div>
<p>
will make the application crash as the QByteArray has not been stored and hence no longer exists
</p>
<p>
To convert a char* to a QString you can use the QString constructor that takes a QLatin1String, e.g:
</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb296-1"><a href="#cb296-1"></a>QString string = QString(QLatin1String(c_str2)) ;</span></code></pre></div>
<p>See the documentation:</p>
<a href="https://doc.qt.io/qt-5/qlatin1string.html" rel="nofollow noreferrer">https://doc.qt.io/qt-5/qlatin1string.html</a>
</blockquote>
<p>Of course, I discovered there is another way from this <a href="https://stackoverflow.com/questions/4214369/how-to-convert-qstring-to-stdstring/4644922#4644922">previous SO answer</a>:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb297-1"><a href="#cb297-1"></a>QString qs;</span>
<span id="cb297-2"><a href="#cb297-2"></a></span>
<span id="cb297-3"><a href="#cb297-3"></a><span class="co">// Either this if you use UTF-8 anywhere</span></span>
<span id="cb297-4"><a href="#cb297-4"></a>std::string utf8_text = qs.toUtf8().constData();</span>
<span id="cb297-5"><a href="#cb297-5"></a></span>
<span id="cb297-6"><a href="#cb297-6"></a><span class="co">// or this if you on Windows :-)</span></span>
<span id="cb297-7"><a href="#cb297-7"></a>std::string current_locale_text = qs.toLocal8Bit().constData();</span></code></pre></div>
</section>
<section id="answer-2-score-2-3" class="level4">
<h4>Answer 2 (score 2)</h4>
<p>You could use <a href="http://doc.qt.nokia.com/4.7/qfile.html" rel="nofollow">QFile</a> rather than std::fstream.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb298-1"><a href="#cb298-1"></a>QFile           file(qString);</span></code></pre></div>
<p>Alternatively convert the QString into a char* as follows:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb299-1"><a href="#cb299-1"></a>std::ifstream   file(qString.toLatin1().data());</span></code></pre></div>
<p>The <a href="http://doc.qt.nokia.com/latest/qstring.html" rel="nofollow">QString</a> is in UTF-16 so it is converted toLatin1() here but QString has a couple of different conversions including toUtf8() (check your file-system it may use UTF-8).</p>
<p>As noted by <span class="citation" data-cites="0A0D">@0A0D</span> above: <strong>don’t</strong> store the char* in a variable without also getting a local copy of the QByteArray.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb300-1"><a href="#cb300-1"></a><span class="dt">char</span> <span class="dt">const</span>*      fileName = qString.toLatin1().data();</span>
<span id="cb300-2"><a href="#cb300-2"></a>std::ifstream    file(fileName);  <span class="co">// fileName not valid here.</span></span></code></pre></div>
<p>This is because toLatin1() returns an object of QByteArray. As it is not actually bound to a variable it is a temporary that is destroyed at the end of the expression. Thus the call to data() here returns a pointer to an internal structure that no longer exists after the ‘;’.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-configure-qt-for-cross-compilation-from-linux-to-windows-target-score-69935-in-2013" class="level3">
<h3>81: How do I configure Qt for cross-compilation from Linux to Windows target? (score <a href="https://stackoverflow.com/q/10934683.html">69935</a> in 2013)</h3>
<section id="question-80" class="level4">
<h4>Question</h4>
<p>I want to cross compile the Qt libraries (and eventually my application) for a Windows x86_64 target using a Linux x86_64 host machine. I feel like I am close, but I may have a fundamental misunderstanding of some parts of this process.</p>
<p>I began by installing all the mingw packages on my Fedora machine and then modifying the <code>win32-g++</code> qmake.conf file to fit my environment. However, I seem to be getting stuck with some seemingly obvious configure options for Qt: <code>-platform</code> and <code>-xplatform</code>. Qt documentation says that <code>-platform</code> should be the host machine architecture (where you are compiling) and <code>-xplatform</code> should be the target platform for which you wish to deploy. In my case, I set <code>-platform linux-g++-64</code> and <code>-xplatform linux-win32-g++</code> where linux-win32-g++ is my modified win32-g++ configuration.</p>
<p>My problem is that, after executing configure with these options, I see that it invokes my system’s compiler instead of the cross compiler (x86_64-w64-mingw32-gcc). If I omit the <code>-xplatform</code> option and set <code>-platform</code> to my target spec (linux-win32-g++), it invokes the cross compiler but then errors when it finds some Unix related functions aren’t defined.</p>
<p>Here is some output from my latest attempt: <a href="http://pastebin.com/QCpKSNev" rel="noreferrer">http://pastebin.com/QCpKSNev</a>.</p>
<p>Questions:</p>
<ol>
<li>
<p>
When cross-compiling something like Qt for Windows from a Linux host, should the native compiler <em>ever</em> be invoked? That is, during a cross compilation process, shouldn’t we use <em>only</em> the cross compiler? I don’t see why Qt’s configure script tries to invoke my system’s native compiler when I specify the <code>-xplatform</code> option.
</p>
</li>
<li>
<p>
If I’m using a mingw cross-compiler, when will I have to deal with a specs file? Spec files for GCC are still sort of a mystery to me, so I am wondering if some background here will help me.
</p>
</li>
<li>
<p>
In general, beyond specifying a cross compiler in my qmake.conf, what else might I need to consider?
</p>
</li>
</ol>
</section>
<section id="answer-accepted-score-65" class="level4">
<h4>Answer accepted (score 65)</h4>
<p>Just use <a href="http://mxe.cc/" rel="noreferrer">M cross environment (MXE)</a>. It takes the pain out of the whole process:</p>
<ul>
<li>
<p>
Get it:
</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb301-1"><a href="#cb301-1"></a>$ git clone https:<span class="co">//github.com/mxe/mxe.git</span></span>
<span id="cb301-2"><a href="#cb301-2"></a>```&lt;/li&gt;</span>
<span id="cb301-3"><a href="#cb301-3"></a>&lt;li&gt;&lt;p&gt;Install &lt;a href=<span class="st">&quot;http://mxe.cc/#requirements&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;build dependencies&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;</span>
<span id="cb301-4"><a href="#cb301-4"></a>&lt;li&gt;&lt;p&gt;Build Qt <span class="cf">for</span> Windows, its dependencies, and the cross-build tools;</span>
<span id="cb301-5"><a href="#cb301-5"></a>this will take about an hour on a fast machine with decent internet access;</span>
<span id="cb301-6"><a href="#cb301-6"></a>the download is about <span class="dv">500</span><span class="er">MB</span>:&lt;/p&gt;</span>
<span id="cb301-7"><a href="#cb301-7"></a></span>
<span id="cb301-8"><a href="#cb301-8"></a>```c</span>
<span id="cb301-9"><a href="#cb301-9"></a>$ cd mxe &amp;&amp; make qt</span>
<span id="cb301-10"><a href="#cb301-10"></a>```&lt;/li&gt;</span>
<span id="cb301-11"><a href="#cb301-11"></a>&lt;li&gt;&lt;p&gt;Go to the directory of your app and add the cross-build tools to the &lt;strong&gt;PATH&lt;/strong&gt; environment variable:&lt;/p&gt;</span>
<span id="cb301-12"><a href="#cb301-12"></a></span>
<span id="cb301-13"><a href="#cb301-13"></a>```c</span>
<span id="cb301-14"><a href="#cb301-14"></a>$ export PATH=&lt;mxe root&gt;/usr/bin:$PATH</span>
<span id="cb301-15"><a href="#cb301-15"></a>```&lt;/li&gt;</span>
<span id="cb301-16"><a href="#cb301-16"></a>&lt;li&gt;&lt;p&gt;Run the Qt Makefile generator tool then build:&lt;/p&gt;</span>
<span id="cb301-17"><a href="#cb301-17"></a></span>
<span id="cb301-18"><a href="#cb301-18"></a>```c</span>
<span id="cb301-19"><a href="#cb301-19"></a>$ &lt;mxe root&gt;/usr/i686-pc-mingw32/qt/bin/qmake &amp;&amp; make</span>
<span id="cb301-20"><a href="#cb301-20"></a>```&lt;/li&gt;</span>
<span id="cb301-21"><a href="#cb301-21"></a>&lt;li&gt;&lt;p&gt;You should find the binary in the ./release directory:&lt;/p&gt;</span>
<span id="cb301-22"><a href="#cb301-22"></a></span>
<span id="cb301-23"><a href="#cb301-23"></a>```c</span>
<span id="cb301-24"><a href="#cb301-24"></a>$ wine release/foo.exe</span>
<span id="cb301-25"><a href="#cb301-25"></a>```&lt;/li&gt;</span>
<span id="cb301-26"><a href="#cb301-26"></a>&lt;/ul&gt;</span>
<span id="cb301-27"><a href="#cb301-27"></a></span>
<span id="cb301-28"><a href="#cb301-28"></a>&lt;strong&gt;Some notes&lt;/strong&gt;:  </span>
<span id="cb301-29"><a href="#cb301-29"></a></span>
<span id="cb301-30"><a href="#cb301-30"></a>&lt;ul&gt;</span>
<span id="cb301-31"><a href="#cb301-31"></a>&lt;li&gt;&lt;p&gt;Use the master branch of the MXE repository; it appears to get a lot more love from the development team.&lt;/p&gt;&lt;/li&gt;</span>
<span id="cb301-32"><a href="#cb301-32"></a>&lt;li&gt;&lt;p&gt;The output is a <span class="dv">32</span>-bit <span class="dt">static</span> binary, which will work well on <span class="dv">64</span>-bit Windows.&lt;/p&gt;&lt;/li&gt;</span>
<span id="cb301-33"><a href="#cb301-33"></a>&lt;/ul&gt;</span>
<span id="cb301-34"><a href="#cb301-34"></a></span>
<span id="cb301-35"><a href="#cb301-35"></a><span class="er">#### Answer 2 (score 16)</span></span>
<span id="cb301-36"><a href="#cb301-36"></a>(This is an update of @Tshepang&#39;s answer, as MXE has evolved since his answer)  </span>
<span id="cb301-37"><a href="#cb301-37"></a></span>
<span id="cb301-38"><a href="#cb301-38"></a>&lt;h5&gt;Building Qt&lt;/h1&gt;</span>
<span id="cb301-39"><a href="#cb301-39"></a></span>
<span id="cb301-40"><a href="#cb301-40"></a>Rather than using `make qt` to build Qt, you can use `MXE_TARGETS` to control your target machine and toolchain (<span class="dv">32</span>- or <span class="dv">64</span>-bit). MXE started using `.static` and `.shared` as a part of the target name to show which type of lib you want to build.  </span>
<span id="cb301-41"><a href="#cb301-41"></a></span>
<span id="cb301-42"><a href="#cb301-42"></a>```c</span>
<span id="cb301-43"><a href="#cb301-43"></a><span class="er"># The following is the same as `make qt`, see explanation on default settings after the code block.</span></span>
<span id="cb301-44"><a href="#cb301-44"></a>make qt MXE_TARGETS=i686-w64-mingw32.<span class="dt">static</span>   # MinGW-w64, <span class="dv">32</span>-bit, <span class="dt">static</span> libs</span>
<span id="cb301-45"><a href="#cb301-45"></a></span>
<span id="cb301-46"><a href="#cb301-46"></a><span class="er"># Other targets you can use:</span></span>
<span id="cb301-47"><a href="#cb301-47"></a>make qt MXE_TARGETS=x86_64-w64-mingw32.<span class="dt">static</span> # MinGW-w64, <span class="dv">64</span>-bit, <span class="dt">static</span> libs</span>
<span id="cb301-48"><a href="#cb301-48"></a>make qt MXE_TARGETS=i686-w64-mingw32.shared   # MinGW-w64, <span class="dv">32</span>-bit, shared libs</span>
<span id="cb301-49"><a href="#cb301-49"></a></span>
<span id="cb301-50"><a href="#cb301-50"></a><span class="er"># You can even specify two targets, and they are built in one run:</span></span>
<span id="cb301-51"><a href="#cb301-51"></a><span class="er"># (And that&#39;s why it is MXE_TARGET**S**, not MXE_TARGET ;)</span></span>
<span id="cb301-52"><a href="#cb301-52"></a><span class="er"># MinGW-w64, both 32- and 64-bit, static libs</span></span>
<span id="cb301-53"><a href="#cb301-53"></a>make qt MXE_TARGETS=&#39;i686-w64-mingw32.<span class="dt">static</span> x86_64-w64-mingw32.<span class="dt">static</span>&#39;</span></code></pre></div>
<p>In <span class="citation" data-cites="Tshepang">@Tshepang</span>’s original answer, he did not specify an <code>MXE_TARGETS</code>, and the default is used. At the time he wrote his answer, the default was <code>i686-pc-mingw32</code>, now it’s <code>i686-w64-mingw32.static</code>. If you explicitly set <code>MXE_TARGETS</code> to <code>i686-w64-mingw32</code>, omitting <code>.static</code>, a warning is printed because this syntax is now deprecated. If you try to set the target to <code>i686-pc-mingw32</code>, it will show an error as MXE has removed support for MinGW.org (i.e. i686-pc-mingw32).</p>
<h5>
Running <code>qmake</code>
</h1>
<p>As we changed the <code>MXE_TARGETS</code>, the <code>&amp;lt;mxe root&amp;gt;/usr/i686-pc-mingw32/qt/bin/qmake</code> command will no longer work. Now, what you need to do is:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb302-1"><a href="#cb302-1"></a>&lt;mxe root&gt;/usr/&lt;TARGET&gt;/qt/bin/qmake</span></code></pre></div>
<p>If you didn’t specify <code>MXE_TARGETS</code>, do this:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb303-1"><a href="#cb303-1"></a>&lt;mxe root&gt;/usr/i686-w64-mingw32.<span class="dt">static</span>/qt/bin/qmake</span></code></pre></div>
<p><strong>Update:</strong> The new default is now <code>i686-w64-mingw32.static</code></p>
</section>
<section id="answer-3-score-4-3" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>Ok I think I’ve got it figured out.</p>
<p>Based in part on <a href="https://github.com/mxe/mxe/blob/master/src/qt.mk" rel="nofollow noreferrer">https://github.com/mxe/mxe/blob/master/src/qt.mk</a> and <a href="https://www.videolan.org/developers/vlc/contrib/src/qt4/rules.mak" rel="nofollow noreferrer">https://www.videolan.org/developers/vlc/contrib/src/qt4/rules.mak</a></p>
<p>It appears that “initially” when you run configure (with -xtarget, etc.), it configures then runs your “hosts” gcc to build the local binary file ./bin/qmake</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb304-1"><a href="#cb304-1"></a> ./configure -xplatform win32-g++ -device-option CROSS_COMPILE=$cross_prefix_here -nomake examples ...</span></code></pre></div>
<p>then you run normal “make” and it builds it for mingw</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb305-1"><a href="#cb305-1"></a>  make</span>
<span id="cb305-2"><a href="#cb305-2"></a>  make install</span></code></pre></div>
<p>so</p>
<ol>
<li>
<p>
yes
</p>
</li>
<li>
<p>
only if you need to use something other than msvcrt.dll (its default). Though I have never used anything else so I don’t know for certain.
</p>
</li>
<li>
<p>
<a href="https://stackoverflow.com/a/18792925/32453">https://stackoverflow.com/a/18792925/32453</a> lists some configure params.
</p>
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-the-q_object-macro-do-why-do-all-qt-objects-need-this-macro-score-69320-in-2016" class="level3">
<h3>82: What does the Q_OBJECT macro do? Why do all Qt objects need this macro? (score <a href="https://stackoverflow.com/q/1368584.html">69320</a> in 2016)</h3>
<section id="question-81" class="level4">
<h4>Question</h4>
<p>I just started using Qt and noticed that all the example class definitions have the macro <code>Q_OBJECT</code> as the first line. What is the purpose of this preprocessor macro?</p>
</section>
<section id="answer-accepted-score-129-1" class="level4">
<h4>Answer accepted (score 129)</h4>
<p>From the <a href="http://doc.qt.io/qt-4.8/moc.html" rel="noreferrer">Qt documentation</a>:</p>
<blockquote>
<p>
The Meta-Object Compiler, moc, is the program that handles Qt’s C++ extensions.
</p>
<p>
The moc tool reads a C++ header file. If it finds one or more class declarations that contain the Q_OBJECT macro, it produces a C++ source file containing the meta-object code for those classes. Among other things, meta-object code is required for the signals and slots mechanism, the run-time type information, and the dynamic property system.
</p>
</blockquote>
</section>
<section id="answer-2-score-17" class="level4">
<h4>Answer 2 (score 17)</h4>
<p>
It simply tells the pre-compiler that this class has gui elements and needs to be run through the ‘moc’ you only need to add this to classes that use the signal/slot mechanism.<br> But it will be quietly ignored in any other classes - it just adds to the build time.
</p>
</section>
<section id="answer-3-score-8-6" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>
The MOC (meta object compiler) converts the Q_OBJECT macro included header files in to C++ equivalent source code. It basically controls the signal-slot mechanism, and makes it understandable to the C++ compiler
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-parsing-json-using-qjsondocument-qjsonobject-qjsonarray-score-69072-in-2019" class="level3">
<h3>83: Qt parsing JSON using QJsonDocument, QJsonObject, QJsonArray (score <a href="https://stackoverflow.com/q/19822211.html">69072</a> in 2019)</h3>
<section id="question-82" class="level4">
<h4>Question</h4>
<p>I’m using Qt5. I am trying to obtain values from a json object. Here is what the json object looks like that I am trying to get data from:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb306-1"><a href="#cb306-1"></a>{</span>
<span id="cb306-2"><a href="#cb306-2"></a>    <span class="st">&quot;success&quot;</span>: true,</span>
<span id="cb306-3"><a href="#cb306-3"></a>    <span class="st">&quot;properties&quot;</span>: [</span>
<span id="cb306-4"><a href="#cb306-4"></a>        {</span>
<span id="cb306-5"><a href="#cb306-5"></a>            <span class="st">&quot;ID&quot;</span>: <span class="dv">1001</span>,</span>
<span id="cb306-6"><a href="#cb306-6"></a>            <span class="st">&quot;PropertyName&quot;</span>: <span class="st">&quot;McDonalds&quot;</span>,</span>
<span id="cb306-7"><a href="#cb306-7"></a>            <span class="st">&quot;key&quot;</span>: <span class="st">&quot;00112233445566778899aabbccddeeff&quot;</span></span>
<span id="cb306-8"><a href="#cb306-8"></a>        },</span>
<span id="cb306-9"><a href="#cb306-9"></a>        {</span>
<span id="cb306-10"><a href="#cb306-10"></a>            <span class="st">&quot;ID&quot;</span>: <span class="dv">1002</span>,</span>
<span id="cb306-11"><a href="#cb306-11"></a>            <span class="st">&quot;PropertyName&quot;</span>: <span class="st">&quot;Burger King&quot;</span>,</span>
<span id="cb306-12"><a href="#cb306-12"></a>            <span class="st">&quot;key&quot;</span>: <span class="st">&quot;10112233445566778899aabbccddeeff&quot;</span></span>
<span id="cb306-13"><a href="#cb306-13"></a>        },</span>
<span id="cb306-14"><a href="#cb306-14"></a>        {</span>
<span id="cb306-15"><a href="#cb306-15"></a>            <span class="st">&quot;ID&quot;</span>: <span class="dv">1003</span>,</span>
<span id="cb306-16"><a href="#cb306-16"></a>            <span class="st">&quot;PropertyName&quot;</span>: <span class="st">&quot;Taco Bell&quot;</span>,</span>
<span id="cb306-17"><a href="#cb306-17"></a>            <span class="st">&quot;key&quot;</span>: <span class="st">&quot;20112233445566778899aabbccddeeff&quot;</span></span>
<span id="cb306-18"><a href="#cb306-18"></a>        }</span>
<span id="cb306-19"><a href="#cb306-19"></a>    ]</span>
<span id="cb306-20"><a href="#cb306-20"></a>}</span></code></pre></div>
<p>How can I create three arrays that contain <code>properties[x].ID</code>, <code>properties[x].PropertyName</code>, and <code>properties[x].key</code> in Qt?</p>
<p>Edit:</p>
<p>Using <code>QScriptEngine</code> I tried this:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb307-1"><a href="#cb307-1"></a>QString data = (QString)reply-&gt;readAll();</span>
<span id="cb307-2"><a href="#cb307-2"></a></span>
<span id="cb307-3"><a href="#cb307-3"></a>QScriptEngine engine;</span>
<span id="cb307-4"><a href="#cb307-4"></a></span>
<span id="cb307-5"><a href="#cb307-5"></a>QScriptValue result = engine.evaluate(data);</span>
<span id="cb307-6"><a href="#cb307-6"></a></span>
<span id="cb307-7"><a href="#cb307-7"></a>qDebug() &lt;&lt; result.toString();</span></code></pre></div>
<p>Debug is saying “SyntaxError: Parse error”</p>
</section>
<section id="answer-accepted-score-55" class="level4">
<h4>Answer accepted (score 55)</h4>
<p>I figured it out:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb308-1"><a href="#cb308-1"></a>QStringList propertyNames;</span>
<span id="cb308-2"><a href="#cb308-2"></a>QStringList propertyKeys;</span>
<span id="cb308-3"><a href="#cb308-3"></a>QString strReply = (QString)reply-&gt;readAll();</span>
<span id="cb308-4"><a href="#cb308-4"></a>QJsonDocument jsonResponse = QJsonDocument::fromJson(strReply.toUtf8());</span>
<span id="cb308-5"><a href="#cb308-5"></a>QJsonObject jsonObject = jsonResponse.object();</span>
<span id="cb308-6"><a href="#cb308-6"></a>QJsonArray jsonArray = jsonObject[<span class="st">&quot;properties&quot;</span>].toArray();</span>
<span id="cb308-7"><a href="#cb308-7"></a></span>
<span id="cb308-8"><a href="#cb308-8"></a>foreach (<span class="dt">const</span> QJsonValue &amp; value, jsonArray) {</span>
<span id="cb308-9"><a href="#cb308-9"></a>    QJsonObject obj = value.toObject();</span>
<span id="cb308-10"><a href="#cb308-10"></a>    propertyNames.append(obj[<span class="st">&quot;PropertyName&quot;</span>].toString());</span>
<span id="cb308-11"><a href="#cb308-11"></a>    propertyKeys.append(obj[<span class="st">&quot;key&quot;</span>].toString());</span>
<span id="cb308-12"><a href="#cb308-12"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-3-2" class="level4">
<h4>Answer 2 (score 3)</h4>
<p>
Here is an example from <a href="http://erickveil.github.io/2016/04/06/How-To-Manipulate-JSON-With-C++-and-Qt.html" rel="nofollow noreferrer">How To Manipulate JSON With C++ and Qt</a>.
</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb309-1"><a href="#cb309-1"></a><span class="co">// reads a json file from disk to QVariantMap</span></span>
<span id="cb309-2"><a href="#cb309-2"></a><span class="co">// originally from http://erickveil.github.io/2016/04/06/How-To-Manipulate-JSON-With-C++-and-Qt.html</span></span>
<span id="cb309-3"><a href="#cb309-3"></a><span class="dt">bool</span> readJsonFile(std::string file_path, QVariantMap&amp; result)</span>
<span id="cb309-4"><a href="#cb309-4"></a>{</span>
<span id="cb309-5"><a href="#cb309-5"></a>    <span class="co">// step 1</span></span>
<span id="cb309-6"><a href="#cb309-6"></a>    QFile file_obj(QString::fromStdString(file_path));</span>
<span id="cb309-7"><a href="#cb309-7"></a>    <span class="cf">if</span> (!file_obj.open(QIODevice::ReadOnly)) {</span>
<span id="cb309-8"><a href="#cb309-8"></a>    std::cout &lt;&lt; <span class="st">&quot;Failed to open &quot;</span> &lt;&lt; file_path &lt;&lt; std::endl;</span>
<span id="cb309-9"><a href="#cb309-9"></a>    exit(<span class="dv">1</span>);</span>
<span id="cb309-10"><a href="#cb309-10"></a>    }</span>
<span id="cb309-11"><a href="#cb309-11"></a></span>
<span id="cb309-12"><a href="#cb309-12"></a>    <span class="co">// step 2</span></span>
<span id="cb309-13"><a href="#cb309-13"></a>    QTextStream file_text(&amp;file_obj);</span>
<span id="cb309-14"><a href="#cb309-14"></a>    QString json_string;</span>
<span id="cb309-15"><a href="#cb309-15"></a>    json_string = file_text.readAll();</span>
<span id="cb309-16"><a href="#cb309-16"></a>    file_obj.close();</span>
<span id="cb309-17"><a href="#cb309-17"></a>    QByteArray json_bytes = json_string.toLocal8Bit();</span>
<span id="cb309-18"><a href="#cb309-18"></a></span>
<span id="cb309-19"><a href="#cb309-19"></a>    <span class="co">// step 3</span></span>
<span id="cb309-20"><a href="#cb309-20"></a>    <span class="dt">auto</span> json_doc = QJsonDocument::fromJson(json_bytes);</span>
<span id="cb309-21"><a href="#cb309-21"></a></span>
<span id="cb309-22"><a href="#cb309-22"></a>    <span class="cf">if</span> (json_doc.isNull()) {</span>
<span id="cb309-23"><a href="#cb309-23"></a>        std::cout &lt;&lt; <span class="st">&quot;Failed to create JSON doc.&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb309-24"><a href="#cb309-24"></a>        <span class="cf">return</span> false;</span>
<span id="cb309-25"><a href="#cb309-25"></a>    }</span>
<span id="cb309-26"><a href="#cb309-26"></a>    <span class="cf">if</span> (!json_doc.isObject()) {</span>
<span id="cb309-27"><a href="#cb309-27"></a>        std::cout &lt;&lt; <span class="st">&quot;JSON is not an object.&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb309-28"><a href="#cb309-28"></a>        <span class="cf">return</span> false;</span>
<span id="cb309-29"><a href="#cb309-29"></a>    }</span>
<span id="cb309-30"><a href="#cb309-30"></a></span>
<span id="cb309-31"><a href="#cb309-31"></a>    QJsonObject json_obj = json_doc.object();</span>
<span id="cb309-32"><a href="#cb309-32"></a></span>
<span id="cb309-33"><a href="#cb309-33"></a>    <span class="cf">if</span> (json_obj.isEmpty()) {</span>
<span id="cb309-34"><a href="#cb309-34"></a>        std::cout &lt;&lt; <span class="st">&quot;JSON object is empty.&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb309-35"><a href="#cb309-35"></a>        <span class="cf">return</span> false;</span>
<span id="cb309-36"><a href="#cb309-36"></a>    }</span>
<span id="cb309-37"><a href="#cb309-37"></a></span>
<span id="cb309-38"><a href="#cb309-38"></a>    <span class="co">// step 4</span></span>
<span id="cb309-39"><a href="#cb309-39"></a>    result = json_obj.toVariantMap();</span>
<span id="cb309-40"><a href="#cb309-40"></a>    <span class="cf">return</span> true;</span>
<span id="cb309-41"><a href="#cb309-41"></a>}</span>
<span id="cb309-42"><a href="#cb309-42"></a></span>
<span id="cb309-43"><a href="#cb309-43"></a><span class="co">// writes a QVariantMap to disk</span></span>
<span id="cb309-44"><a href="#cb309-44"></a><span class="dt">bool</span> writeJsonFile(QVariantMap point_map, std::string file_path)</span>
<span id="cb309-45"><a href="#cb309-45"></a>{</span>
<span id="cb309-46"><a href="#cb309-46"></a>    QJsonObject json_obj = QJsonObject::fromVariantMap(point_map);</span>
<span id="cb309-47"><a href="#cb309-47"></a>    QJsonDocument json_doc(json_obj);</span>
<span id="cb309-48"><a href="#cb309-48"></a>    QString json_string = json_doc.toJson();</span>
<span id="cb309-49"><a href="#cb309-49"></a></span>
<span id="cb309-50"><a href="#cb309-50"></a>    QFile save_file(QString::fromStdString(file_path));</span>
<span id="cb309-51"><a href="#cb309-51"></a>    <span class="cf">if</span> (!save_file.open(QIODevice::WriteOnly)) {</span>
<span id="cb309-52"><a href="#cb309-52"></a>        std::cout &lt;&lt; <span class="st">&quot;failed to open save file&quot;</span> &lt;&lt; std::endl;</span>
<span id="cb309-53"><a href="#cb309-53"></a>        <span class="cf">return</span> false;</span>
<span id="cb309-54"><a href="#cb309-54"></a>    }</span>
<span id="cb309-55"><a href="#cb309-55"></a>    save_file.write(json_string.toLocal8Bit());</span>
<span id="cb309-56"><a href="#cb309-56"></a>    save_file.close();</span>
<span id="cb309-57"><a href="#cb309-57"></a>    <span class="cf">return</span> true;</span>
<span id="cb309-58"><a href="#cb309-58"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-correct-way-to-implement-a-qthread-example-please-score-68687-in-2018" class="level3">
<h3>84: what is the correct way to implement a QThread… (example please…) (score <a href="https://stackoverflow.com/q/4093159.html">68687</a> in 2018)</h3>
<section id="question-83" class="level4">
<h4>Question</h4>
<p>The Qt documentation for QThread says to create a class from QThread, and to implement the run method.</p>
<p>Below is taken from the 4.7 Qthread documentation…</p>
<blockquote>
To create your own threads, subclass QThread and reimplement run(). For example:
</blockquote>
<div class="sourceCode" id="cb310"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb310-1"><a href="#cb310-1"></a> class MyThread : public QThread</span>
<span id="cb310-2"><a href="#cb310-2"></a> {</span>
<span id="cb310-3"><a href="#cb310-3"></a> public:</span>
<span id="cb310-4"><a href="#cb310-4"></a>     <span class="dt">void</span> run();</span>
<span id="cb310-5"><a href="#cb310-5"></a> };</span>
<span id="cb310-6"><a href="#cb310-6"></a></span>
<span id="cb310-7"><a href="#cb310-7"></a> <span class="dt">void</span> MyThread::run()</span>
<span id="cb310-8"><a href="#cb310-8"></a> {</span>
<span id="cb310-9"><a href="#cb310-9"></a>     QTcpSocket socket;</span>
<span id="cb310-10"><a href="#cb310-10"></a>     <span class="co">// connect QTcpSocket&#39;s signals somewhere meaningful</span></span>
<span id="cb310-11"><a href="#cb310-11"></a>     ...</span>
<span id="cb310-12"><a href="#cb310-12"></a>     socket.connectToHost(hostName, portNumber);</span>
<span id="cb310-13"><a href="#cb310-13"></a>     exec();</span>
<span id="cb310-14"><a href="#cb310-14"></a> }</span></code></pre></div>
<p>So in every single thread I’ve created, I’ve done just that and for most things it works just fine (I do not implement moveToThread(this) in any of my objects and it works great).</p>
<p>I hit a snag last week (managed to get through it by working around where I created my objects) and found the <a href="http://blog.qt.io/blog/2010/06/17/youre-doing-it-wrong/" rel="noreferrer">following blog post</a>. Here is basically says that subclassing QThread really isn’t the correct way to do it (and that the documentation is incorrect).</p>
<p>This is coming from a Qt developer so at first glance I was interested and upon further reflection, agree with him. Following OO principles, you really only want to subclass a class to further enhance that class… not to just use the classes methods directly… thats why you instantiate…</p>
<p>Lets say I wanted to move a custom QObject class to a thread… what would be the ‘correct’ way of doing it? In that blog post, he ‘says’ he has an example somewhere… but if someone could further explain it to me it’d be greatly appreciated!</p>
<p><strong>Update:</strong></p>
<p>Since this question gets so much attention, here is a copy and paste of the 4.8 documentation with the ‘proper’ way to implement a QThread.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb311-1"><a href="#cb311-1"></a>class Worker : public QObject</span>
<span id="cb311-2"><a href="#cb311-2"></a> {</span>
<span id="cb311-3"><a href="#cb311-3"></a>     Q_OBJECT</span>
<span id="cb311-4"><a href="#cb311-4"></a>     QThread workerThread;</span>
<span id="cb311-5"><a href="#cb311-5"></a></span>
<span id="cb311-6"><a href="#cb311-6"></a> public slots:</span>
<span id="cb311-7"><a href="#cb311-7"></a>     <span class="dt">void</span> doWork(<span class="dt">const</span> QString &amp;parameter) {</span>
<span id="cb311-8"><a href="#cb311-8"></a>         <span class="co">// ...</span></span>
<span id="cb311-9"><a href="#cb311-9"></a>         emit resultReady(result);</span>
<span id="cb311-10"><a href="#cb311-10"></a>     }</span>
<span id="cb311-11"><a href="#cb311-11"></a></span>
<span id="cb311-12"><a href="#cb311-12"></a> signals:</span>
<span id="cb311-13"><a href="#cb311-13"></a>     <span class="dt">void</span> resultReady(<span class="dt">const</span> QString &amp;result);</span>
<span id="cb311-14"><a href="#cb311-14"></a> };</span>
<span id="cb311-15"><a href="#cb311-15"></a></span>
<span id="cb311-16"><a href="#cb311-16"></a> class Controller : public QObject</span>
<span id="cb311-17"><a href="#cb311-17"></a> {</span>
<span id="cb311-18"><a href="#cb311-18"></a>     Q_OBJECT</span>
<span id="cb311-19"><a href="#cb311-19"></a>     QThread workerThread;</span>
<span id="cb311-20"><a href="#cb311-20"></a> public:</span>
<span id="cb311-21"><a href="#cb311-21"></a>     Controller() {</span>
<span id="cb311-22"><a href="#cb311-22"></a>         Worker *worker = new Worker;</span>
<span id="cb311-23"><a href="#cb311-23"></a>         worker-&gt;moveToThread(&amp;workerThread);</span>
<span id="cb311-24"><a href="#cb311-24"></a>         connect(workerThread, SIGNAL(finished()), worker, SLOT(deleteLater()));</span>
<span id="cb311-25"><a href="#cb311-25"></a>         connect(this, SIGNAL(operate(QString)), worker, SLOT(doWork(QString)));</span>
<span id="cb311-26"><a href="#cb311-26"></a>         connect(worker, SIGNAL(resultReady(QString)), this, SLOT(handleResults(QString)));</span>
<span id="cb311-27"><a href="#cb311-27"></a>         workerThread.start();</span>
<span id="cb311-28"><a href="#cb311-28"></a>     }</span>
<span id="cb311-29"><a href="#cb311-29"></a>     ~Controller() {</span>
<span id="cb311-30"><a href="#cb311-30"></a>         workerThread.quit();</span>
<span id="cb311-31"><a href="#cb311-31"></a>         workerThread.wait();</span>
<span id="cb311-32"><a href="#cb311-32"></a>     }</span>
<span id="cb311-33"><a href="#cb311-33"></a> public slots:</span>
<span id="cb311-34"><a href="#cb311-34"></a>     <span class="dt">void</span> handleResults(<span class="dt">const</span> QString &amp;);</span>
<span id="cb311-35"><a href="#cb311-35"></a> signals:</span>
<span id="cb311-36"><a href="#cb311-36"></a>     <span class="dt">void</span> operate(<span class="dt">const</span> QString &amp;);</span>
<span id="cb311-37"><a href="#cb311-37"></a> };</span></code></pre></div>
<p>I still believe that it is worthwhile to point out that they include an extra <code>Worker::workerThread</code> member that is unnecessary and is never used in their example. Remove that piece and it is a proper example of how to do threading in Qt.</p>
</section>
<section id="answer-accepted-score-31" class="level4">
<h4>Answer accepted (score 31)</h4>
<p>About the only thing I can think of to add is to further state that <code>QObject</code>s have an affinity with a single thread. This is usually the thread that creates the <code>QObject</code>. So if you create a <code>QObject</code> in the app’s main thread and want to use it in another thread, you need to use <code>moveToThread()</code> to change the affinity.</p>
<p>This saves having to subclass <code>QThread</code> and creating your objects in the <code>run()</code> method, thus keeping your stuff nicely encapsulated.</p>
<p>That blog post does include a link to an <a href="http://blog.qt.io/blog/2006/12/04/threading-without-the-headache/" rel="noreferrer">example</a>. It is pretty short but it shows the basic idea. Create your <code>QObject</code>s, connect your signals, create your <code>QThread</code>, move your <code>QObjects</code> to the <code>QThread</code> and start the thread. The signal/slot mechanisms will ensure that thread boundaries are crossed properly and safely.</p>
<p>You may have to introduce synchronization if you have to call methods on your object outside of that mechanism.</p>
<p>I know Qt has some other nice <a href="http://qt-project.org/doc/qt-4.8/threads-qtconcurrent.html" rel="noreferrer">threading facilities</a> beyond threads that are probably worth getting familiar with but I have yet to do so :)</p>
</section>
<section id="answer-2-score-9" class="level4">
<h4>Answer 2 (score 9)</h4>
<p>Here’s <a href="http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/" rel="noreferrer">one example of how to use QThread correctly</a>, but it has some issues with it, which are reflected in the comments. In particular, since the order in which the slots are executed isn’t strictly defined, it could lead to various problems. The comment posted on August 6, 2013 gives a nice idea how to deal with this issue. I use something like that in my program, and here’s some example code to clarify.</p>
<p>The basic idea is the same: I create a QThread instance that lives in my main thread, a worker class instance that lives in the new thread I created, and then I connect all the signals.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb312-1"><a href="#cb312-1"></a><span class="dt">void</span> ChildProcesses::start()</span>
<span id="cb312-2"><a href="#cb312-2"></a>{</span>
<span id="cb312-3"><a href="#cb312-3"></a>    QThread *childrenWatcherThread = new QThread();</span>
<span id="cb312-4"><a href="#cb312-4"></a>    ChildrenWatcher *childrenWatcher = new ChildrenWatcher();</span>
<span id="cb312-5"><a href="#cb312-5"></a>    childrenWatcher-&gt;moveToThread(childrenWatcherThread);</span>
<span id="cb312-6"><a href="#cb312-6"></a>    <span class="co">// These three signals carry the &quot;outcome&quot; of the worker job.</span></span>
<span id="cb312-7"><a href="#cb312-7"></a>    connect(childrenWatcher, SIGNAL(exited(<span class="dt">int</span>, <span class="dt">int</span>)),</span>
<span id="cb312-8"><a href="#cb312-8"></a>            SLOT(onChildExited(<span class="dt">int</span>, <span class="dt">int</span>)));</span>
<span id="cb312-9"><a href="#cb312-9"></a>    connect(childrenWatcher, SIGNAL(signalled(<span class="dt">int</span>, <span class="dt">int</span>)),</span>
<span id="cb312-10"><a href="#cb312-10"></a>            SLOT(onChildSignalled(<span class="dt">int</span>, <span class="dt">int</span>)));</span>
<span id="cb312-11"><a href="#cb312-11"></a>    connect(childrenWatcher, SIGNAL(stateChanged(<span class="dt">int</span>)),</span>
<span id="cb312-12"><a href="#cb312-12"></a>            SLOT(onChildStateChanged(<span class="dt">int</span>)));</span>
<span id="cb312-13"><a href="#cb312-13"></a>    <span class="co">// Make the watcher watch when the thread starts:</span></span>
<span id="cb312-14"><a href="#cb312-14"></a>    connect(childrenWatcherThread, SIGNAL(started()),</span>
<span id="cb312-15"><a href="#cb312-15"></a>            childrenWatcher, SLOT(watch()));</span>
<span id="cb312-16"><a href="#cb312-16"></a>    <span class="co">// Make the watcher set its &#39;stop&#39; flag when we&#39;re done.</span></span>
<span id="cb312-17"><a href="#cb312-17"></a>    <span class="co">// This is performed while the watch() method is still running,</span></span>
<span id="cb312-18"><a href="#cb312-18"></a>    <span class="co">// so we need to execute it concurrently from this thread,</span></span>
<span id="cb312-19"><a href="#cb312-19"></a>    <span class="co">// hence the Qt::DirectConnection. The stop() method is thread-safe</span></span>
<span id="cb312-20"><a href="#cb312-20"></a>    <span class="co">// (uses a mutex to set the flag).</span></span>
<span id="cb312-21"><a href="#cb312-21"></a>    connect(this, SIGNAL(stopped()),</span>
<span id="cb312-22"><a href="#cb312-22"></a>            childrenWatcher, SLOT(stop()), Qt::DirectConnection);</span>
<span id="cb312-23"><a href="#cb312-23"></a>    <span class="co">// Make the thread quit when the watcher self-destructs:</span></span>
<span id="cb312-24"><a href="#cb312-24"></a>    connect(childrenWatcher, SIGNAL(destroyed()),</span>
<span id="cb312-25"><a href="#cb312-25"></a>            childrenWatcherThread, SLOT(quit()));</span>
<span id="cb312-26"><a href="#cb312-26"></a>    <span class="co">// Make the thread self-destruct when it finishes,</span></span>
<span id="cb312-27"><a href="#cb312-27"></a>    <span class="co">// or rather, make the main thread delete it:</span></span>
<span id="cb312-28"><a href="#cb312-28"></a>    connect(childrenWatcherThread, SIGNAL(finished()),</span>
<span id="cb312-29"><a href="#cb312-29"></a>            childrenWatcherThread, SLOT(deleteLater()));</span>
<span id="cb312-30"><a href="#cb312-30"></a>    childrenWatcherThread-&gt;start();</span>
<span id="cb312-31"><a href="#cb312-31"></a>}</span></code></pre></div>
<p>Some background:</p>
<p>The ChildProcesses class is a child process manager that starts new child processes with spawn() calls, keeps the list of the processes currently running and so on. However, it needs to keep track of the children states, which means using waitpid() call on Linux or WaitForMultipleObjects on Windows. I used to call these in non-blocking mode using a timer, but now I want more prompt reaction, which means blocking mode. That’s where the thread comes in.</p>
<p>The ChildrenWatcher class is defined as follows:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb313-1"><a href="#cb313-1"></a>class ChildrenWatcher: public QObject {</span>
<span id="cb313-2"><a href="#cb313-2"></a>    Q_OBJECT</span>
<span id="cb313-3"><a href="#cb313-3"></a>private:</span>
<span id="cb313-4"><a href="#cb313-4"></a>    QMutex mutex;</span>
<span id="cb313-5"><a href="#cb313-5"></a>    <span class="dt">bool</span> stopped;</span>
<span id="cb313-6"><a href="#cb313-6"></a>    <span class="dt">bool</span> isStopped();</span>
<span id="cb313-7"><a href="#cb313-7"></a>public:</span>
<span id="cb313-8"><a href="#cb313-8"></a>    ChildrenWatcher();</span>
<span id="cb313-9"><a href="#cb313-9"></a>public slots:</span>
<span id="cb313-10"><a href="#cb313-10"></a>    <span class="co">/// This is the method which runs in the thread.</span></span>
<span id="cb313-11"><a href="#cb313-11"></a>    <span class="dt">void</span> watch();</span>
<span id="cb313-12"><a href="#cb313-12"></a>    <span class="co">/// Sets the stop flag.</span></span>
<span id="cb313-13"><a href="#cb313-13"></a>    <span class="dt">void</span> stop();</span>
<span id="cb313-14"><a href="#cb313-14"></a>signals:</span>
<span id="cb313-15"><a href="#cb313-15"></a>    <span class="co">/// A child process exited normally.</span></span>
<span id="cb313-16"><a href="#cb313-16"></a>    <span class="dt">void</span> exited(<span class="dt">int</span> ospid, <span class="dt">int</span> code);</span>
<span id="cb313-17"><a href="#cb313-17"></a>    <span class="co">/// A child process crashed (Unix only).</span></span>
<span id="cb313-18"><a href="#cb313-18"></a>    <span class="dt">void</span> signalled(<span class="dt">int</span> ospid, <span class="dt">int</span> signal);</span>
<span id="cb313-19"><a href="#cb313-19"></a>    <span class="co">/// Something happened to a child (Unix only).</span></span>
<span id="cb313-20"><a href="#cb313-20"></a>    <span class="dt">void</span> stateChanged(<span class="dt">int</span> ospid);</span>
<span id="cb313-21"><a href="#cb313-21"></a>};</span></code></pre></div>
<p>Here how it works. When all this stuff is started, the ChildProcess::start() method is called (see above). It creates a new QThread and a new ChildrenWatcher, which is then moved to the new thread. Then I connect three signals which inform my manager about the fate of its child processes (exited/signalled/god-knows-what-happened). Then starts the main fun.</p>
<p>I connect QThread::started() to the ChildrenWatcher::watch() method so it is started as soon as the thread is ready. Since the watcher lives in the new thread, that’s where the watch() method is executed (queued connection is used to call the slot).</p>
<p>Then I connect the ChildProcesses::stopped() signal to the ChildrenWatcher::stop() slot using Qt::DirectConnection because I need to do it asynchronously. This is needed so my thread stops when the ChildProcesses manager is no longer needed. The stop() method looks like this:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb314-1"><a href="#cb314-1"></a><span class="dt">void</span> ChildrenWatcher::stop()</span>
<span id="cb314-2"><a href="#cb314-2"></a>{</span>
<span id="cb314-3"><a href="#cb314-3"></a>    mutex.lock();</span>
<span id="cb314-4"><a href="#cb314-4"></a>    stopped = true;</span>
<span id="cb314-5"><a href="#cb314-5"></a>    mutex.unlock();</span>
<span id="cb314-6"><a href="#cb314-6"></a>}</span></code></pre></div>
<p>And then ChildrenWatcher::watch():</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb315-1"><a href="#cb315-1"></a><span class="dt">void</span> ChildrenWatcher::watch()</span>
<span id="cb315-2"><a href="#cb315-2"></a>{</span>
<span id="cb315-3"><a href="#cb315-3"></a>  <span class="cf">while</span> (!isStopped()) {</span>
<span id="cb315-4"><a href="#cb315-4"></a>    <span class="co">// Blocking waitpid() call here.</span></span>
<span id="cb315-5"><a href="#cb315-5"></a>    <span class="co">// Maybe emit one of the three informational signals here too.</span></span>
<span id="cb315-6"><a href="#cb315-6"></a>  }</span>
<span id="cb315-7"><a href="#cb315-7"></a>  <span class="co">// Self-destruct now!</span></span>
<span id="cb315-8"><a href="#cb315-8"></a>  deleteLater();</span>
<span id="cb315-9"><a href="#cb315-9"></a>}</span></code></pre></div>
<p>Oh, and the isStopped() method is just a convenient way to use a mutex in the while() condition:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb316-1"><a href="#cb316-1"></a><span class="dt">bool</span> ChildrenWatcher::isStopped()</span>
<span id="cb316-2"><a href="#cb316-2"></a>{</span>
<span id="cb316-3"><a href="#cb316-3"></a>    <span class="dt">bool</span> stopped;</span>
<span id="cb316-4"><a href="#cb316-4"></a>    mutex.lock();</span>
<span id="cb316-5"><a href="#cb316-5"></a>    stopped = this-&gt;stopped;</span>
<span id="cb316-6"><a href="#cb316-6"></a>    mutex.unlock();</span>
<span id="cb316-7"><a href="#cb316-7"></a>    <span class="cf">return</span> stopped;</span>
<span id="cb316-8"><a href="#cb316-8"></a>}</span></code></pre></div>
<p>So what happens here is that I set the stopped flag when I need to finish, and then the next time isStopped() is called it returns false and the thread ends.</p>
<p>So what happens when the watch() loop ends? It calls deleteLater() so the object self-destructs as soon as control is returned to the thread event loop which happens just right after the deleteLater() call (when watch() returns). Going back to ChildProcesses::start(), you can see that there is a connection from the destroyed() signal of the watcher to the quit() slot of the thread. This means that the thread automatically finishes when the watcher is done. And when it’s finished, it self-destructs too because its own finished() signal is connected to its deleteLater() slot.</p>
<p>This is pretty much the same idea as Maya posted, but because I use the self-destruct idiom, I don’t need to depend on the sequence in which the slots are called. It’s always self-destruct first, stop thread later, then it self-destructs too. I could define a finished() signal in the worker, and then connect it to its own deleteLater(), but that would only mean one connection more. Since I don’t need a finished() signal for any other purpose, I chose to just call deleteLater() from the worker itself.</p>
<p>Maya also mentions that you shouldn’t allocate new QObjects in the worker’s constructor because they won’t live in the thread you move the worker to. I’d say do it anyway because that’s the way OOP works. Just make sure all those QObjects are children of the worker (that is, use the QObject(QObject*) constructor) - moveToThread() moves all the children along with the object being moved. If you really need to have QObjects that aren’t children of your object, then override moveToThread() in your worker so it moves all the necessary stuff too.</p>
</section>
<section id="answer-3-score-3-2" class="level4">
<h4>Answer 3 (score 3)</h4>
<p>Not to detract from <span class="citation" data-cites="sergey-tachenov">@sergey-tachenov</span>’s excellent answer, but in Qt5 you can stop using SIGNAL and SLOT, simplify your code and have the advantage of compile time checking:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb317-1"><a href="#cb317-1"></a><span class="dt">void</span> ChildProcesses::start()</span>
<span id="cb317-2"><a href="#cb317-2"></a>{</span>
<span id="cb317-3"><a href="#cb317-3"></a>    QThread *childrenWatcherThread = new QThread();</span>
<span id="cb317-4"><a href="#cb317-4"></a>    ChildrenWatcher *childrenWatcher = new ChildrenWatcher();</span>
<span id="cb317-5"><a href="#cb317-5"></a>    childrenWatcher-&gt;moveToThread(childrenWatcherThread);</span>
<span id="cb317-6"><a href="#cb317-6"></a>    <span class="co">// These three signals carry the &quot;outcome&quot; of the worker job.</span></span>
<span id="cb317-7"><a href="#cb317-7"></a>    connect(childrenWatcher, ChildrenWatcher::exited,</span>
<span id="cb317-8"><a href="#cb317-8"></a>            ChildProcesses::onChildExited);</span>
<span id="cb317-9"><a href="#cb317-9"></a>    connect(childrenWatcher, ChildrenWatcher::signalled,</span>
<span id="cb317-10"><a href="#cb317-10"></a>            ChildProcesses::onChildSignalled);</span>
<span id="cb317-11"><a href="#cb317-11"></a>    connect(childrenWatcher, ChildrenWatcher::stateChanged,</span>
<span id="cb317-12"><a href="#cb317-12"></a>            ChildProcesses::onChildStateChanged);</span>
<span id="cb317-13"><a href="#cb317-13"></a>    <span class="co">// Make the watcher watch when the thread starts:</span></span>
<span id="cb317-14"><a href="#cb317-14"></a>    connect(childrenWatcherThread, QThread::started,</span>
<span id="cb317-15"><a href="#cb317-15"></a>            childrenWatcher, ChildrenWatcher::watch);</span>
<span id="cb317-16"><a href="#cb317-16"></a>    <span class="co">// Make the watcher set its &#39;stop&#39; flag when we&#39;re done.</span></span>
<span id="cb317-17"><a href="#cb317-17"></a>    <span class="co">// This is performed while the watch() method is still running,</span></span>
<span id="cb317-18"><a href="#cb317-18"></a>    <span class="co">// so we need to execute it concurrently from this thread,</span></span>
<span id="cb317-19"><a href="#cb317-19"></a>    <span class="co">// hence the Qt::DirectConnection. The stop() method is thread-safe</span></span>
<span id="cb317-20"><a href="#cb317-20"></a>    <span class="co">// (uses a mutex to set the flag).</span></span>
<span id="cb317-21"><a href="#cb317-21"></a>    connect(this, ChildProcesses::stopped,</span>
<span id="cb317-22"><a href="#cb317-22"></a>            childrenWatcher, ChildrenWatcher::stop, Qt::DirectConnection);</span>
<span id="cb317-23"><a href="#cb317-23"></a>    <span class="co">// Make the thread quit when the watcher self-destructs:</span></span>
<span id="cb317-24"><a href="#cb317-24"></a>    connect(childrenWatcher, ChildrenWatcher::destroyed,</span>
<span id="cb317-25"><a href="#cb317-25"></a>            childrenWatcherThread, QThread::quit);</span>
<span id="cb317-26"><a href="#cb317-26"></a>    <span class="co">// Make the thread self-destruct when it finishes,</span></span>
<span id="cb317-27"><a href="#cb317-27"></a>    <span class="co">// or rather, make the main thread delete it:</span></span>
<span id="cb317-28"><a href="#cb317-28"></a>    connect(childrenWatcherThread, QThread::finished,</span>
<span id="cb317-29"><a href="#cb317-29"></a>            childrenWatcherThread, QThread::deleteLater);</span>
<span id="cb317-30"><a href="#cb317-30"></a>    childrenWatcherThread-&gt;start();</span>
<span id="cb317-31"><a href="#cb317-31"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-build-a-full-path-string-safely-from-separate-strings-score-68494-in-2011" class="level3">
<h3>85: How to build a full path string (safely) from separate strings? (score <a href="https://stackoverflow.com/q/6297738.html">68494</a> in 2011)</h3>
<section id="question-84" class="level4">
<h4>Question</h4>
<p>Does C++ have any equivalent to python’s function <code>os.path.join</code>? Basically, I’m looking for something that combines two (or more) parts of a file path so that you don’t have to worry about making sure the two parts fit together perfectly. If it’s in Qt, that would be cool too.</p>
<p>Basically I spent an hour debugging some code and at least part of it was because <code>root + filename</code> had to be <code>root/ + filename</code>, and I’m looking to avoid that in the future.</p>
</section>
<section id="answer-accepted-score-38" class="level4">
<h4>Answer accepted (score 38)</h4>
<p>Check out <a href="http://qt-project.org/doc/qt-5/qdir.html#filePath">QDir</a> for that:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb318-1"><a href="#cb318-1"></a>QString path = QDir(dirPath).filePath(fileName);</span></code></pre></div>
</section>
<section id="answer-2-score-94" class="level4">
<h4>Answer 2 (score 94)</h4>
<p>Only as part of <a href="http://www.boost.org/doc/libs/release/libs/filesystem/index.html" rel="noreferrer">Boost.Filesystem</a> library. Here is an example:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb319-1"><a href="#cb319-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb319-2"><a href="#cb319-2"></a><span class="pp">#include </span><span class="im">&lt;boost/filesystem.hpp&gt;</span></span>
<span id="cb319-3"><a href="#cb319-3"></a></span>
<span id="cb319-4"><a href="#cb319-4"></a>namespace fs = boost::filesystem;</span>
<span id="cb319-5"><a href="#cb319-5"></a></span>
<span id="cb319-6"><a href="#cb319-6"></a><span class="dt">int</span> main ()</span>
<span id="cb319-7"><a href="#cb319-7"></a>{</span>
<span id="cb319-8"><a href="#cb319-8"></a>    fs::path dir (<span class="st">&quot;/tmp&quot;</span>);</span>
<span id="cb319-9"><a href="#cb319-9"></a>    fs::path file (<span class="st">&quot;foo.txt&quot;</span>);</span>
<span id="cb319-10"><a href="#cb319-10"></a>    fs::path full_path = dir / file;</span>
<span id="cb319-11"><a href="#cb319-11"></a>    std::cout &lt;&lt; full_path &lt;&lt; std::endl;</span>
<span id="cb319-12"><a href="#cb319-12"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb319-13"><a href="#cb319-13"></a>}</span></code></pre></div>
<p>Here is an example of compiling and running (platform specific):</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb320-1"><a href="#cb320-1"></a>$ g++ ./test.cpp -o test -lboost_filesystem -lboost_system</span>
<span id="cb320-2"><a href="#cb320-2"></a>$ ./test </span>
<span id="cb320-3"><a href="#cb320-3"></a>/tmp/foo.txt</span></code></pre></div>
</section>
<section id="answer-3-score-19-2" class="level4">
<h4>Answer 3 (score 19)</h4>
<p>Similar to <strong><span class="citation" data-cites="user405725">@user405725</span></strong>’s answer (but not using boost), and mentioned by <strong><span class="citation" data-cites="ildjarn">@ildjarn</span></strong> in a comment, this functionality is available as part of <a href="http://en.cppreference.com/w/cpp/experimental/fs/path/append" rel="noreferrer">std::experimental::filesystem</a>. The following code compiles using Microsoft Visual Studio 2015 Community Edition:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb321-1"><a href="#cb321-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb321-2"><a href="#cb321-2"></a><span class="pp">#include </span><span class="im">&lt;filesystem&gt;</span></span>
<span id="cb321-3"><a href="#cb321-3"></a>namespace fs = std::experimental::filesystem;</span>
<span id="cb321-4"><a href="#cb321-4"></a></span>
<span id="cb321-5"><a href="#cb321-5"></a><span class="dt">int</span> main() </span>
<span id="cb321-6"><a href="#cb321-6"></a>{</span>
<span id="cb321-7"><a href="#cb321-7"></a>    fs::path dir (<span class="st">&quot;/tmp&quot;</span>);</span>
<span id="cb321-8"><a href="#cb321-8"></a>    fs::path file (<span class="st">&quot;foo.txt&quot;</span>);</span>
<span id="cb321-9"><a href="#cb321-9"></a>    fs::path full_path = dir / file;</span>
<span id="cb321-10"><a href="#cb321-10"></a>    std::cout &lt;&lt; full_path &lt;&lt; std::endl;</span>
<span id="cb321-11"><a href="#cb321-11"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb321-12"><a href="#cb321-12"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="c-signal-to-qml-slot-in-qt-score-68457-in-2017" class="level3">
<h3>86: C++ signal to QML slot in Qt (score <a href="https://stackoverflow.com/q/8834147.html">68457</a> in 2017)</h3>
<section id="question-85" class="level4">
<h4>Question</h4>
<p>
I want to send a Signal from C++ to a Slot in my QML File. I already got it working without and primitive type parameters, although if I want to send a <code>QString</code> to my QML Slot I get an error whilst connecting.
</p>
<p>I connect in main.cpp</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb322-1"><a href="#cb322-1"></a>QObject *contentView = rootObject-&gt;findChild&lt;QObject*&gt;(QString(<span class="st">&quot;contentView&quot;</span>));</span>
<span id="cb322-2"><a href="#cb322-2"></a>QObject::connect(&amp;myObj,      SIGNAL(finishedGatheringDataForItem(QString)), </span>
<span id="cb322-3"><a href="#cb322-3"></a>                 contentView, SLOT(updateViewWithItem(QString)));</span></code></pre></div>
<p>the relavant part of my qml File</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb323-1"><a href="#cb323-1"></a>Rectangle {</span>
<span id="cb323-2"><a href="#cb323-2"></a>        objectName: <span class="st">&quot;contentView&quot;</span></span>
<span id="cb323-3"><a href="#cb323-3"></a>        function updateViewWithItem(string) { console.log(&#39;got some Items&#39;); }  <span class="co">// slot</span></span>
<span id="cb323-4"><a href="#cb323-4"></a>}</span></code></pre></div>
<p>Error:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb324-1"><a href="#cb324-1"></a>Object::connect: No such slot QDeclarativeRectangle_QML_2::updateViewWithItem(QString)</span></code></pre></div>
</section>
<section id="answer-accepted-score-35-1" class="level4">
<h4>Answer accepted (score 35)</h4>
<p>I think it would be best if you check this tutorial:</p>
<p><a href="http://doc.qt.io/qt-4.8/qtbinding.html" rel="noreferrer">http://doc.qt.io/qt-4.8/qtbinding.html</a></p>
<p>especially this section:</p>
<p><a href="http://doc.qt.io/qt-4.8/qtbinding.html#receiving-signals" rel="noreferrer">http://doc.qt.io/qt-4.8/qtbinding.html#receiving-signals</a></p>
<p>I think your mistake in this case might either be that you didn’t declare it as a slot or you didn’t make it invocable. Both options are explained in the Qt Tutorial.</p>
<p>
Also, you need to use a QVariant in order to exchange data between C++ and QML. You can also register types, e.g. Widgets and stuff, so that you can use them in QML as a “native” type like a rectangle. In most cases this is not recommended, except if you need some certain extern class or some data that you cannot display otherwise in your QML Interface.
</p>
<p>The reason for the QVariant is the Script based approach of QML. The QVariant basically contains your data and a desription of the data type, so that the QML knows how to handle it properly. That’s why you have to specify the parameter in QML with String, int etc.. But the original data exchange with C++ remains a QVariant</p>
<p>I have used the qmlRegisterType before, but it is a very inconvenient Solution for simple data types. It is rather used for more complex data, such as custom Widgets, Canvas or Video elements that QML does not natively support or extended <code>QStandardItemModels</code> . It is a more convenient way to exchange data between QML and C++ and does not need Signals or Slots in first instance, because the QStandardItemModel updates the GUI automatically. For using the QStandardItemModel you need to register the Type with qmlRegisterType.. . The Model can then be used in Model based Views such as the ListView etc.</p>
<p>I attached a tutorial for this topic, it describes how to use the QListModel.</p>
<p><a href="http://doc.qt.io/qt-4.8/qdeclarativemodels.html" rel="noreferrer">http://doc.qt.io/qt-4.8/qdeclarativemodels.html</a></p>
</section>
<section id="answer-2-score-36-1" class="level4">
<h4>Answer 2 (score 36)</h4>
<p>You should use <a href="http://doc.qt.io/qt-5/qml-qtqml-connections.html" rel="nofollow noreferrer"><strong>Connections</strong></a> in this case (maybe it’s the only way to connect).</p>
<ol>
<li>
<p>
Put your object <strong>myObj</strong> to QML file by <code>setContextProperty</code>
</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb325-1"><a href="#cb325-1"></a>qmlVectorForm-&gt;rootContext()-&gt;setContextProperty(<span class="st">&quot;YourObject&quot;</span>, myOb);</span>
<span id="cb325-2"><a href="#cb325-2"></a>```&lt;/li&gt;</span>
<span id="cb325-3"><a href="#cb325-3"></a>&lt;li&gt;&lt;p&gt;Your signal is&lt;/p&gt;</span>
<span id="cb325-4"><a href="#cb325-4"></a></span>
<span id="cb325-5"><a href="#cb325-5"></a>```c</span>
<span id="cb325-6"><a href="#cb325-6"></a>finishedGatheringDataForItem(QString signalString)</span>
<span id="cb325-7"><a href="#cb325-7"></a>```&lt;/li&gt;</span>
<span id="cb325-8"><a href="#cb325-8"></a>&lt;li&gt;&lt;p&gt;In QML file, add Connectios likes below:&lt;/p&gt;</span>
<span id="cb325-9"><a href="#cb325-9"></a></span>
<span id="cb325-10"><a href="#cb325-10"></a>```c</span>
<span id="cb325-11"><a href="#cb325-11"></a>Connections {</span>
<span id="cb325-12"><a href="#cb325-12"></a>    target: YourObject </span>
<span id="cb325-13"><a href="#cb325-13"></a>    onFinishedGatheringDataForItem: {</span>
<span id="cb325-14"><a href="#cb325-14"></a>        qmlString = signalString</span>
<span id="cb325-15"><a href="#cb325-15"></a>    }</span>
<span id="cb325-16"><a href="#cb325-16"></a>}</span>
<span id="cb325-17"><a href="#cb325-17"></a>```&lt;/li&gt;</span>
<span id="cb325-18"><a href="#cb325-18"></a>&lt;/ol&gt;</span>
<span id="cb325-19"><a href="#cb325-19"></a></span>
<span id="cb325-20"><a href="#cb325-20"></a>&lt;/b&gt; &lt;/em&gt; &lt;/i&gt; &lt;/small&gt; &lt;/strong&gt; &lt;/sub&gt; &lt;/sup&gt;</span>
<span id="cb325-21"><a href="#cb325-21"></a></span>
<span id="cb325-22"><a href="#cb325-22"></a><span class="er">### 87: switch/case statement in C++ with a QString type (score [68450](https://stackoverflow.com/q/5452188.html) in 2019)</span></span>
<span id="cb325-23"><a href="#cb325-23"></a></span>
<span id="cb325-24"><a href="#cb325-24"></a><span class="er">#### Question</span></span>
<span id="cb325-25"><a href="#cb325-25"></a>I want to use <span class="cf">switch</span>-<span class="cf">case</span> in my program but the compiler gives me this error:  </span>
<span id="cb325-26"><a href="#cb325-26"></a></span>
<span id="cb325-27"><a href="#cb325-27"></a>```c</span>
<span id="cb325-28"><a href="#cb325-28"></a><span class="cf">switch</span> expression of type &#39;QString&#39; is illegal</span></code></pre></div>
<p>How can I use the <code>switch</code> statement with a <code>QString</code>?</p>
<p>My code is as follows:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb326-1"><a href="#cb326-1"></a><span class="dt">bool</span> isStopWord( QString word )</span>
<span id="cb326-2"><a href="#cb326-2"></a>{</span>
<span id="cb326-3"><a href="#cb326-3"></a><span class="dt">bool</span> flag = false ;</span>
<span id="cb326-4"><a href="#cb326-4"></a></span>
<span id="cb326-5"><a href="#cb326-5"></a><span class="cf">switch</span>( word )</span>
<span id="cb326-6"><a href="#cb326-6"></a>{</span>
<span id="cb326-7"><a href="#cb326-7"></a><span class="cf">case</span> <span class="st">&quot;the&quot;</span>:</span>
<span id="cb326-8"><a href="#cb326-8"></a>    flag = true ;</span>
<span id="cb326-9"><a href="#cb326-9"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-10"><a href="#cb326-10"></a><span class="cf">case</span> <span class="st">&quot;at&quot;</span> :</span>
<span id="cb326-11"><a href="#cb326-11"></a>    flag = true ;</span>
<span id="cb326-12"><a href="#cb326-12"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-13"><a href="#cb326-13"></a><span class="cf">case</span> <span class="st">&quot;in&quot;</span> :</span>
<span id="cb326-14"><a href="#cb326-14"></a>    flag = true ;</span>
<span id="cb326-15"><a href="#cb326-15"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-16"><a href="#cb326-16"></a><span class="cf">case</span> <span class="st">&quot;your&quot;</span>:</span>
<span id="cb326-17"><a href="#cb326-17"></a>    flag = true ;</span>
<span id="cb326-18"><a href="#cb326-18"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-19"><a href="#cb326-19"></a><span class="cf">case</span> <span class="st">&quot;near&quot;</span>:</span>
<span id="cb326-20"><a href="#cb326-20"></a>    flag = true ;</span>
<span id="cb326-21"><a href="#cb326-21"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-22"><a href="#cb326-22"></a><span class="cf">case</span> <span class="st">&quot;all&quot;</span>:</span>
<span id="cb326-23"><a href="#cb326-23"></a>    flag = true ;</span>
<span id="cb326-24"><a href="#cb326-24"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-25"><a href="#cb326-25"></a><span class="cf">case</span> <span class="st">&quot;this&quot;</span>:</span>
<span id="cb326-26"><a href="#cb326-26"></a>    flag = true ;</span>
<span id="cb326-27"><a href="#cb326-27"></a>    <span class="cf">break</span> ;</span>
<span id="cb326-28"><a href="#cb326-28"></a>}</span>
<span id="cb326-29"><a href="#cb326-29"></a></span>
<span id="cb326-30"><a href="#cb326-30"></a><span class="cf">return</span> flag ;</span>
<span id="cb326-31"><a href="#cb326-31"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-29" class="level4">
<h4>Answer accepted (score 29)</h4>
<blockquote>
How can I use the switch statement with a QString?
</blockquote>
<p>You can’t. In C++ language <code>switch</code> statement can only be used with integral or enum types. You can formally put an object of class type into a <code>switch</code> statement, but that simply means that the compiler will look for a user-defined conversion to convert it to integral or enum type.</p>
</section>
<section id="answer-2-score-25-2" class="level4">
<h4>Answer 2 (score 25)</h4>
<p>You can, creating an QStringList before iteration, like this:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb327-1"><a href="#cb327-1"></a>QStringList myOptions;</span>
<span id="cb327-2"><a href="#cb327-2"></a>myOptions &lt;&lt; <span class="st">&quot;goLogin&quot;</span> &lt;&lt; <span class="st">&quot;goAway&quot;</span> &lt;&lt; <span class="st">&quot;goRegister&quot;</span>;</span>
<span id="cb327-3"><a href="#cb327-3"></a></span>
<span id="cb327-4"><a href="#cb327-4"></a><span class="co">/*</span></span>
<span id="cb327-5"><a href="#cb327-5"></a><span class="co">goLogin = 0</span></span>
<span id="cb327-6"><a href="#cb327-6"></a><span class="co">goAway = 1</span></span>
<span id="cb327-7"><a href="#cb327-7"></a><span class="co">goRegister = 2</span></span>
<span id="cb327-8"><a href="#cb327-8"></a><span class="co">*/</span></span></code></pre></div>
<p>Then:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb328-1"><a href="#cb328-1"></a><span class="cf">switch</span>(myOptions.indexOf(<span class="st">&quot;goRegister&quot;</span>)){</span>
<span id="cb328-2"><a href="#cb328-2"></a>  <span class="cf">case</span> <span class="dv">0</span>:</span>
<span id="cb328-3"><a href="#cb328-3"></a>    <span class="co">// go to login...</span></span>
<span id="cb328-4"><a href="#cb328-4"></a>    <span class="cf">break</span>;</span>
<span id="cb328-5"><a href="#cb328-5"></a></span>
<span id="cb328-6"><a href="#cb328-6"></a>  <span class="cf">case</span> <span class="dv">1</span>:</span>
<span id="cb328-7"><a href="#cb328-7"></a>    <span class="co">// go away...</span></span>
<span id="cb328-8"><a href="#cb328-8"></a>    <span class="cf">break</span>;</span>
<span id="cb328-9"><a href="#cb328-9"></a></span>
<span id="cb328-10"><a href="#cb328-10"></a>  <span class="cf">case</span> <span class="dv">2</span>:</span>
<span id="cb328-11"><a href="#cb328-11"></a>    <span class="co">//Go to Register...</span></span>
<span id="cb328-12"><a href="#cb328-12"></a>    <span class="cf">break</span>;</span>
<span id="cb328-13"><a href="#cb328-13"></a></span>
<span id="cb328-14"><a href="#cb328-14"></a>  <span class="cf">default</span>:</span>
<span id="cb328-15"><a href="#cb328-15"></a>    ...</span>
<span id="cb328-16"><a href="#cb328-16"></a>    <span class="cf">break</span>;</span>
<span id="cb328-17"><a href="#cb328-17"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-4-4" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>It’s not possible to switch directly on strings in C++. However it’s possible in Qt using <a href="http://doc.qt.io/qt-4.8/qmetaenum.html" rel="nofollow noreferrer"><code>QMetaEnum</code></a> as shown here: <a href="https://www.youtube.com/watch?v=Fr6BDQD68ZE" rel="nofollow noreferrer"><code>Q_ENUM</code> and how to switch on a string</a></p>
<p>To do that, first <strong>declare an enum</strong> with the <em>strings to be used in switch cases</em> as enumerator name in your class declaration. Then add the enum to the metadata with <code>Q_ENUMS</code> in order for the program to search later.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb329-1"><a href="#cb329-1"></a><span class="pp">#include </span><span class="im">&lt;QMetaEnum&gt;</span></span>
<span id="cb329-2"><a href="#cb329-2"></a></span>
<span id="cb329-3"><a href="#cb329-3"></a>class TestCase : public QObject</span>
<span id="cb329-4"><a href="#cb329-4"></a>{</span>
<span id="cb329-5"><a href="#cb329-5"></a>    Q_OBJECT</span>
<span id="cb329-6"><a href="#cb329-6"></a>    Q_ENUMS(Cases)        <span class="co">// metadata declaration</span></span>
<span id="cb329-7"><a href="#cb329-7"></a></span>
<span id="cb329-8"><a href="#cb329-8"></a>public:</span>
<span id="cb329-9"><a href="#cb329-9"></a>    explicit Test(QObject *parent = <span class="dv">0</span>);</span>
<span id="cb329-10"><a href="#cb329-10"></a></span>
<span id="cb329-11"><a href="#cb329-11"></a>    <span class="kw">enum</span> Cases</span>
<span id="cb329-12"><a href="#cb329-12"></a>    {</span>
<span id="cb329-13"><a href="#cb329-13"></a>        THE, AT, IN, THIS <span class="co">// ... ==&gt; strings to search, case sensitive</span></span>
<span id="cb329-14"><a href="#cb329-14"></a>    };</span>
<span id="cb329-15"><a href="#cb329-15"></a></span>
<span id="cb329-16"><a href="#cb329-16"></a>public slots:</span>
<span id="cb329-17"><a href="#cb329-17"></a>    <span class="dt">void</span> SwitchString(QString word);</span>
<span id="cb329-18"><a href="#cb329-18"></a>};</span></code></pre></div>
<p>Then in the <code>.cpp</code> file implement the needed switch after converting the string to the corresponding value with <a href="http://doc.qt.io/qt-4.8/qmetaenum.html#keyToValue" rel="nofollow noreferrer"></a>.</p>
<p>The comparison is case sensitive so if you want a case insensitive search, convert the input string to upper/lower case first. You can also do other transformations needed to the string. For example in case you need to switch strings with blank spaces or unallowed characters in C/C++ identifiers, you may convert/remove/replace those characters to make the string a valid identifier.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb330-1"><a href="#cb330-1"></a><span class="dt">void</span> TestCase::SwitchString(QString word)</span>
<span id="cb330-2"><a href="#cb330-2"></a>{</span>
<span id="cb330-3"><a href="#cb330-3"></a>    <span class="co">// get information about the enum named &quot;Cases&quot;</span></span>
<span id="cb330-4"><a href="#cb330-4"></a>    QMetaObject MetaObject = this-&gt;staticMetaObject;</span>
<span id="cb330-5"><a href="#cb330-5"></a>    QMetaEnum MetaEnum = MetaObject.enumerator(MetaObject.indexOfEnumerator(<span class="st">&quot;Cases&quot;</span>));</span>
<span id="cb330-6"><a href="#cb330-6"></a></span>
<span id="cb330-7"><a href="#cb330-7"></a>    <span class="cf">switch</span> (MetaEnum.keyToValue(word.toUpper().toLatin1()))</span>
<span id="cb330-8"><a href="#cb330-8"></a>    <span class="co">// or simply switch (MetaEnum.keyToValue(word)) if no string modification is needed</span></span>
<span id="cb330-9"><a href="#cb330-9"></a>    {</span>
<span id="cb330-10"><a href="#cb330-10"></a>        <span class="cf">case</span> THE:  <span class="co">/* do something */</span> <span class="cf">break</span>;</span>
<span id="cb330-11"><a href="#cb330-11"></a>        <span class="cf">case</span> AT:   <span class="co">/* do something */</span> <span class="cf">break</span>;</span>
<span id="cb330-12"><a href="#cb330-12"></a>        <span class="cf">case</span> IN:   <span class="co">/* do something */</span> <span class="cf">break</span>;</span>
<span id="cb330-13"><a href="#cb330-13"></a>        <span class="cf">case</span> THIS: <span class="co">/* do something */</span> <span class="cf">break</span>;</span>
<span id="cb330-14"><a href="#cb330-14"></a>        <span class="cf">default</span>:   <span class="co">/* do something */</span> <span class="cf">break</span>;</span>
<span id="cb330-15"><a href="#cb330-15"></a>    }</span>
<span id="cb330-16"><a href="#cb330-16"></a>}</span></code></pre></div>
<p>Then just use the class for switching the strings. For example:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb331-1"><a href="#cb331-1"></a>TestCase test;</span>
<span id="cb331-2"><a href="#cb331-2"></a>test.SwitchString(<span class="st">&quot;At&quot;</span>);</span>
<span id="cb331-3"><a href="#cb331-3"></a>test.SwitchString(<span class="st">&quot;the&quot;</span>);</span>
<span id="cb331-4"><a href="#cb331-4"></a>test.SwitchString(<span class="st">&quot;aBCdxx&quot;</span>);</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-set-a-background-color-for-the-whole-window-of-a-qt-application-score-68078-in-2017" class="level3">
<h3>88: How do I set a background color for the whole window of a Qt application? (score <a href="https://stackoverflow.com/q/1675992.html">68078</a> in 2017)</h3>
<section id="question-86" class="level4">
<h4>Question</h4>
<p>Does anyone know how one would be able to set a background color for the whole window of a Qt application?</p>
<p>So far I am using stylesheets but can only figure out how to assign a background color to a widget such as <code>QGroupBox</code> or <code>QPushButton</code>. Basically, if I want a black background how would I make it seamless without any borders of the original background?</p>
</section>
<section id="answer-accepted-score-26-2" class="level4">
<h4>Answer accepted (score 26)</h4>
<p>I would simply use a Style Sheet for the whole window.</p>
<p>For instance, if your window is inheriting from QWidget, here is what I’m doing :</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb332-1"><a href="#cb332-1"></a>MainWindow::MainWindow(QWidget *parent) : QWidget(parent), ui(new Ui::MainWindow)</span>
<span id="cb332-2"><a href="#cb332-2"></a>{</span>
<span id="cb332-3"><a href="#cb332-3"></a>    ui-&gt;setupUi(this);</span>
<span id="cb332-4"><a href="#cb332-4"></a>    this-&gt;setStyleSheet(<span class="st">&quot;background-color: black;&quot;</span>);</span>
<span id="cb332-5"><a href="#cb332-5"></a>}</span></code></pre></div>
<p>On my Mac, my whole application window is black (except the title bar).</p>
<p>EDIT : according to comment, here is a solution without using ui files and loading an external style sheet</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb333-1"><a href="#cb333-1"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QApplication&gt;</span></span>
<span id="cb333-2"><a href="#cb333-2"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QMainWindow&gt;</span></span>
<span id="cb333-3"><a href="#cb333-3"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QVBoxLayout&gt;</span></span>
<span id="cb333-4"><a href="#cb333-4"></a><span class="pp">#include </span><span class="im">&lt;QtGui/QPushButton&gt;</span></span>
<span id="cb333-5"><a href="#cb333-5"></a><span class="pp">#include </span><span class="im">&lt;QtCore/QFile&gt;</span></span>
<span id="cb333-6"><a href="#cb333-6"></a></span>
<span id="cb333-7"><a href="#cb333-7"></a><span class="dt">int</span> main(<span class="dt">int</span> ArgC, <span class="dt">char</span>* ArgV[])</span>
<span id="cb333-8"><a href="#cb333-8"></a>{</span>
<span id="cb333-9"><a href="#cb333-9"></a>QApplication MyApp(ArgC, ArgV);</span>
<span id="cb333-10"><a href="#cb333-10"></a></span>
<span id="cb333-11"><a href="#cb333-11"></a>QMainWindow* pWindow = new QMainWindow;</span>
<span id="cb333-12"><a href="#cb333-12"></a>QVBoxLayout* pLayout = new QVBoxLayout(pWindow);</span>
<span id="cb333-13"><a href="#cb333-13"></a>pWindow-&gt;setLayout(pLayout);</span>
<span id="cb333-14"><a href="#cb333-14"></a></span>
<span id="cb333-15"><a href="#cb333-15"></a>QPushButton* pButton = new QPushButton(<span class="st">&quot;Test&quot;</span>, pWindow);</span>
<span id="cb333-16"><a href="#cb333-16"></a>pLayout-&gt;addWidget(pButton);</span>
<span id="cb333-17"><a href="#cb333-17"></a></span>
<span id="cb333-18"><a href="#cb333-18"></a>QFile file(<span class="st">&quot;:/qss/default.qss&quot;</span>);</span>
<span id="cb333-19"><a href="#cb333-19"></a>file.open(QFile::ReadOnly);</span>
<span id="cb333-20"><a href="#cb333-20"></a>QString styleSheet = QLatin1String(file.readAll());</span>
<span id="cb333-21"><a href="#cb333-21"></a></span>
<span id="cb333-22"><a href="#cb333-22"></a>qApp-&gt;setStyleSheet(styleSheet);</span>
<span id="cb333-23"><a href="#cb333-23"></a></span>
<span id="cb333-24"><a href="#cb333-24"></a>pWindow-&gt;setVisible(true);</span>
<span id="cb333-25"><a href="#cb333-25"></a>MyApp.exec();</span>
<span id="cb333-26"><a href="#cb333-26"></a>}</span></code></pre></div>
<p>The style sheet file (default.qss) is as follow :</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb334-1"><a href="#cb334-1"></a>QWidget {</span>
<span id="cb334-2"><a href="#cb334-2"></a>  background-color: black;</span>
<span id="cb334-3"><a href="#cb334-3"></a>}</span></code></pre></div>
<p>This file is part of a resource file (stylesheet.qrc) :</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb335-1"><a href="#cb335-1"></a>&lt;RCC&gt;</span>
<span id="cb335-2"><a href="#cb335-2"></a>  &lt;qresource prefix=<span class="st">&quot;/qss&quot;</span>&gt;</span>
<span id="cb335-3"><a href="#cb335-3"></a>    &lt;file&gt;<span class="cf">default</span>.qss&lt;/file&gt;</span>
<span id="cb335-4"><a href="#cb335-4"></a>  &lt;/qresource&gt;</span>
<span id="cb335-5"><a href="#cb335-5"></a>&lt;/RCC&gt;</span></code></pre></div>
<p>And here is my project file :</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb336-1"><a href="#cb336-1"></a>TARGET = StyleSheet</span>
<span id="cb336-2"><a href="#cb336-2"></a>TEMPLATE = app</span>
<span id="cb336-3"><a href="#cb336-3"></a>SOURCES += main.cpp</span>
<span id="cb336-4"><a href="#cb336-4"></a>RESOURCES += stylesheet.qrc</span></code></pre></div>
</section>
<section id="answer-2-score-13-2" class="level4">
<h4>Answer 2 (score 13)</h4>
<p>This has worked for me:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb337-1"><a href="#cb337-1"></a>a = new QApplication(argc, argv);</span>
<span id="cb337-2"><a href="#cb337-2"></a>QPalette pal = a-&gt;palette();</span>
<span id="cb337-3"><a href="#cb337-3"></a>pal.setColor(QPalette::Window, Qt::white);</span>
<span id="cb337-4"><a href="#cb337-4"></a>a-&gt;setPalette(pal);</span></code></pre></div>
</section>
<section id="answer-3-score-4-5" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>Simply just add</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb338-1"><a href="#cb338-1"></a>setStyleSheet(<span class="st">&quot;background-color: white;&quot;</span>);</span></code></pre></div>
<p>to your code, you can give any color directly.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="iterating-over-a-qmap-with-for-score-67619-in-2015" class="level3">
<h3>89: Iterating over a QMap with for (score <a href="https://stackoverflow.com/q/8517853.html">67619</a> in 2015)</h3>
<section id="question-87" class="level4">
<h4>Question</h4>
<p>I’ve a <code>QMap</code> object and I am trying to write its content to a file.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb339-1"><a href="#cb339-1"></a>QMap&lt;QString, QString&gt; extensions;</span>
<span id="cb339-2"><a href="#cb339-2"></a><span class="co">//.. </span></span>
<span id="cb339-3"><a href="#cb339-3"></a></span>
<span id="cb339-4"><a href="#cb339-4"></a><span class="cf">for</span>(<span class="dt">auto</span> e : extensions)</span>
<span id="cb339-5"><a href="#cb339-5"></a>{</span>
<span id="cb339-6"><a href="#cb339-6"></a>  fout &lt;&lt; e.first &lt;&lt; <span class="st">&quot;,&quot;</span> &lt;&lt; e.second &lt;&lt; <span class="ch">&#39;\n&#39;</span>;</span>
<span id="cb339-7"><a href="#cb339-7"></a>}  </span></code></pre></div>
<p>Why do I get: <code>error: 'class QString' has no member named 'first' nor 'second'</code></p>
<p>Is <code>e</code> not of type <code>QPair</code>?</p>
</section>
<section id="answer-accepted-score-47-1" class="level4">
<h4>Answer accepted (score 47)</h4>
<p>If you want the STL style with <code>first</code> and <code>second</code>, do this:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb340-1"><a href="#cb340-1"></a><span class="cf">for</span>(<span class="dt">auto</span> e : extensions.toStdMap())</span>
<span id="cb340-2"><a href="#cb340-2"></a>{</span>
<span id="cb340-3"><a href="#cb340-3"></a>  fout &lt;&lt; e.first &lt;&lt; <span class="st">&quot;,&quot;</span> &lt;&lt; e.second &lt;&lt; <span class="ch">&#39;\n&#39;</span>;</span>
<span id="cb340-4"><a href="#cb340-4"></a>}</span></code></pre></div>
<p>If you want to use what Qt offers, do this:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb341-1"><a href="#cb341-1"></a><span class="cf">for</span>(<span class="dt">auto</span> e : extensions.keys())</span>
<span id="cb341-2"><a href="#cb341-2"></a>{</span>
<span id="cb341-3"><a href="#cb341-3"></a>  fout &lt;&lt; e &lt;&lt; <span class="st">&quot;,&quot;</span> &lt;&lt; extensions.value(e) &lt;&lt; <span class="ch">&#39;\n&#39;</span>;</span>
<span id="cb341-4"><a href="#cb341-4"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-46-2" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>
C++11 range-based-for uses the type of the dereferenced iterator as the automatically deduced “cursor” type. Here, it is the type of the expression <code>*map.begin()</code>. <br>And since <code>QMap::iterator::operator*()</code> returns a reference to the value (of type <code>QString &amp;amp;</code>), the key isn’t accessible using that method.
</p>
<p>You should use one of the iterator methods described in the documentation but you should avoid using</p>
<ul>
<li>
<code>keys()</code> because it involves creating a list of keys and then searching the value for each key, or,
</li>
<li>
<code>toStdMap()</code> because it copies all the map elements to another one,
</li>
</ul>
<p>
and that wouldn’t be very optimal.
<hr>
You could also use a wrapper to get <code>QMap::iterator</code> as the <code>auto</code> type:
</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb342-1"><a href="#cb342-1"></a>template&lt;class Map&gt;</span>
<span id="cb342-2"><a href="#cb342-2"></a><span class="kw">struct</span> RangeWrapper {</span>
<span id="cb342-3"><a href="#cb342-3"></a>    <span class="kw">typedef</span> typename Map::iterator MapIterator;</span>
<span id="cb342-4"><a href="#cb342-4"></a>    Map &amp;map;</span>
<span id="cb342-5"><a href="#cb342-5"></a></span>
<span id="cb342-6"><a href="#cb342-6"></a>    RangeWrapper(Map &amp; map_) : map(map_) {}</span>
<span id="cb342-7"><a href="#cb342-7"></a></span>
<span id="cb342-8"><a href="#cb342-8"></a>    <span class="kw">struct</span> iterator {</span>
<span id="cb342-9"><a href="#cb342-9"></a>        MapIterator mapIterator;</span>
<span id="cb342-10"><a href="#cb342-10"></a>        iterator(<span class="dt">const</span> MapIterator &amp;mapIterator_): mapIterator(mapIterator_) {}</span>
<span id="cb342-11"><a href="#cb342-11"></a>        MapIterator operator*() {</span>
<span id="cb342-12"><a href="#cb342-12"></a>            <span class="cf">return</span> mapIterator;</span>
<span id="cb342-13"><a href="#cb342-13"></a>        }</span>
<span id="cb342-14"><a href="#cb342-14"></a>        iterator &amp; operator++() {</span>
<span id="cb342-15"><a href="#cb342-15"></a>            ++mapIterator;</span>
<span id="cb342-16"><a href="#cb342-16"></a>            <span class="cf">return</span> *this;</span>
<span id="cb342-17"><a href="#cb342-17"></a>        }</span>
<span id="cb342-18"><a href="#cb342-18"></a>        <span class="dt">bool</span> operator!=(<span class="dt">const</span> iterator &amp; other) {</span>
<span id="cb342-19"><a href="#cb342-19"></a>            <span class="cf">return</span> this-&gt;mapIterator != other.mapIterator;</span>
<span id="cb342-20"><a href="#cb342-20"></a>        }</span>
<span id="cb342-21"><a href="#cb342-21"></a>    };</span>
<span id="cb342-22"><a href="#cb342-22"></a>    iterator begin() {</span>
<span id="cb342-23"><a href="#cb342-23"></a>        <span class="cf">return</span> map.begin();</span>
<span id="cb342-24"><a href="#cb342-24"></a>    }</span>
<span id="cb342-25"><a href="#cb342-25"></a>    iterator end() {</span>
<span id="cb342-26"><a href="#cb342-26"></a>        <span class="cf">return</span> map.end();</span>
<span id="cb342-27"><a href="#cb342-27"></a>    }</span>
<span id="cb342-28"><a href="#cb342-28"></a>};</span>
<span id="cb342-29"><a href="#cb342-29"></a></span>
<span id="cb342-30"><a href="#cb342-30"></a><span class="co">// Function to be able to use automatic template type deduction</span></span>
<span id="cb342-31"><a href="#cb342-31"></a>template&lt;class Map&gt;</span>
<span id="cb342-32"><a href="#cb342-32"></a>RangeWrapper&lt;Map&gt; toRange(Map &amp; map)</span>
<span id="cb342-33"><a href="#cb342-33"></a>{</span>
<span id="cb342-34"><a href="#cb342-34"></a>    <span class="cf">return</span> RangeWrapper&lt;Map&gt;(map);</span>
<span id="cb342-35"><a href="#cb342-35"></a>}</span>
<span id="cb342-36"><a href="#cb342-36"></a></span>
<span id="cb342-37"><a href="#cb342-37"></a><span class="co">// Usage code</span></span>
<span id="cb342-38"><a href="#cb342-38"></a>QMap&lt;QString, QString&gt; extensions;</span>
<span id="cb342-39"><a href="#cb342-39"></a>...</span>
<span id="cb342-40"><a href="#cb342-40"></a><span class="cf">for</span>(<span class="dt">auto</span> e : toRange(extensions)) {</span>
<span id="cb342-41"><a href="#cb342-41"></a>    fout &lt;&lt; e.key() &lt;&lt; <span class="st">&quot;,&quot;</span> &lt;&lt; e.value() &lt;&lt; <span class="ch">&#39;\n&#39;</span>;</span>
<span id="cb342-42"><a href="#cb342-42"></a>}</span></code></pre></div>
<p>There is another wrapper <a href="https://stackoverflow.com/q/6953128/894321">here</a>.</p>
</section>
<section id="answer-3-score-23-1" class="level4">
<h4>Answer 3 (score 23)</h4>
<p>For people interested in optimizations, I have tried several approaches, did some micro benchmarks, and I can conclude that <strong>STL style approach is significantly faster</strong>.</p>
<p>I have tried adding integers with these methods :</p>
<ul>
<li>
QMap::values()
</li>
<li>
Java style iterator (as advised in the documentation)
</li>
<li>
STL style iterator (as advised in the documentation too)
</li>
</ul>
<p>And I have compared it with summing integers of a QList/QVector</p>
<p>Results :</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb343-1"><a href="#cb343-1"></a>Reference vector :   <span class="dv">244</span>  ms</span>
<span id="cb343-2"><a href="#cb343-2"></a>Reference list :     <span class="dv">1239</span>  ms</span>
<span id="cb343-3"><a href="#cb343-3"></a></span>
<span id="cb343-4"><a href="#cb343-4"></a>QMap::values() :     <span class="dv">6504</span>  ms</span>
<span id="cb343-5"><a href="#cb343-5"></a>Java style iterator :    <span class="dv">6199</span>  ms</span>
<span id="cb343-6"><a href="#cb343-6"></a>STL style iterator :     <span class="dv">2343</span>  ms</span></code></pre></div>
<p>Code for those interested :</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb344-1"><a href="#cb344-1"></a><span class="pp">#include </span><span class="im">&lt;QDateTime&gt;</span></span>
<span id="cb344-2"><a href="#cb344-2"></a><span class="pp">#include </span><span class="im">&lt;QMap&gt;</span></span>
<span id="cb344-3"><a href="#cb344-3"></a><span class="pp">#include </span><span class="im">&lt;QVector&gt;</span></span>
<span id="cb344-4"><a href="#cb344-4"></a><span class="pp">#include </span><span class="im">&lt;QList&gt;</span></span>
<span id="cb344-5"><a href="#cb344-5"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb344-6"><a href="#cb344-6"></a></span>
<span id="cb344-7"><a href="#cb344-7"></a><span class="dt">void</span> testQMap(){</span>
<span id="cb344-8"><a href="#cb344-8"></a>    QMap&lt;<span class="dt">int</span>, <span class="dt">int</span>&gt; map;</span>
<span id="cb344-9"><a href="#cb344-9"></a>    QVector&lt;<span class="dt">int</span>&gt; vec;</span>
<span id="cb344-10"><a href="#cb344-10"></a>    QList&lt;<span class="dt">int</span>&gt; list;</span>
<span id="cb344-11"><a href="#cb344-11"></a></span>
<span id="cb344-12"><a href="#cb344-12"></a>    <span class="dt">int</span> nbIterations = <span class="dv">100</span>;</span>
<span id="cb344-13"><a href="#cb344-13"></a>    <span class="dt">int</span> size = <span class="dv">1000000</span>;</span>
<span id="cb344-14"><a href="#cb344-14"></a>    <span class="dt">volatile</span> <span class="dt">int</span> sum = <span class="dv">0</span>;</span>
<span id="cb344-15"><a href="#cb344-15"></a></span>
<span id="cb344-16"><a href="#cb344-16"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;size; ++i){</span>
<span id="cb344-17"><a href="#cb344-17"></a>        <span class="dt">int</span> randomInt = qrand()%<span class="dv">128</span>;</span>
<span id="cb344-18"><a href="#cb344-18"></a>        map[i] = randomInt;</span>
<span id="cb344-19"><a href="#cb344-19"></a>        vec.append(randomInt);</span>
<span id="cb344-20"><a href="#cb344-20"></a>        list.append(randomInt);</span>
<span id="cb344-21"><a href="#cb344-21"></a>    }</span>
<span id="cb344-22"><a href="#cb344-22"></a></span>
<span id="cb344-23"><a href="#cb344-23"></a></span>
<span id="cb344-24"><a href="#cb344-24"></a>    <span class="co">// Rererence vector/list</span></span>
<span id="cb344-25"><a href="#cb344-25"></a>    qint64 start = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-26"><a href="#cb344-26"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;nbIterations; ++i){</span>
<span id="cb344-27"><a href="#cb344-27"></a>        sum = <span class="dv">0</span>;</span>
<span id="cb344-28"><a href="#cb344-28"></a>        <span class="cf">for</span>(<span class="dt">int</span> j : vec){</span>
<span id="cb344-29"><a href="#cb344-29"></a>            sum += j;</span>
<span id="cb344-30"><a href="#cb344-30"></a>        }</span>
<span id="cb344-31"><a href="#cb344-31"></a>    }</span>
<span id="cb344-32"><a href="#cb344-32"></a>    qint64 end = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-33"><a href="#cb344-33"></a>    qDebug() &lt;&lt; <span class="st">&quot;Reference vector : </span><span class="sc">\t</span><span class="st">&quot;</span> &lt;&lt; (end-start) &lt;&lt; <span class="st">&quot; ms&quot;</span>;</span>
<span id="cb344-34"><a href="#cb344-34"></a></span>
<span id="cb344-35"><a href="#cb344-35"></a>    qint64 startList = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-36"><a href="#cb344-36"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;nbIterations; ++i){</span>
<span id="cb344-37"><a href="#cb344-37"></a>        sum = <span class="dv">0</span>;</span>
<span id="cb344-38"><a href="#cb344-38"></a>        <span class="cf">for</span>(<span class="dt">int</span> j : list){</span>
<span id="cb344-39"><a href="#cb344-39"></a>            sum += j;</span>
<span id="cb344-40"><a href="#cb344-40"></a>        }</span>
<span id="cb344-41"><a href="#cb344-41"></a>    }</span>
<span id="cb344-42"><a href="#cb344-42"></a>    qint64 endList = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-43"><a href="#cb344-43"></a>    qDebug() &lt;&lt; <span class="st">&quot;Reference list : </span><span class="sc">\t</span><span class="st">&quot;</span> &lt;&lt; (endList-startList) &lt;&lt; <span class="st">&quot; ms&quot;</span>;</span>
<span id="cb344-44"><a href="#cb344-44"></a></span>
<span id="cb344-45"><a href="#cb344-45"></a>    <span class="co">// QMap::values()</span></span>
<span id="cb344-46"><a href="#cb344-46"></a>    qint64 start0 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-47"><a href="#cb344-47"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;nbIterations; ++i){</span>
<span id="cb344-48"><a href="#cb344-48"></a>        sum = <span class="dv">0</span>;</span>
<span id="cb344-49"><a href="#cb344-49"></a>        QList&lt;<span class="dt">int</span>&gt; values = map.values();</span>
<span id="cb344-50"><a href="#cb344-50"></a>        <span class="cf">for</span>(<span class="dt">int</span> k : values){</span>
<span id="cb344-51"><a href="#cb344-51"></a>            sum += k;</span>
<span id="cb344-52"><a href="#cb344-52"></a>        }</span>
<span id="cb344-53"><a href="#cb344-53"></a>    }</span>
<span id="cb344-54"><a href="#cb344-54"></a>    qint64 end0 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-55"><a href="#cb344-55"></a>    qDebug() &lt;&lt; <span class="st">&quot;QMap::values() : </span><span class="sc">\t</span><span class="st">&quot;</span> &lt;&lt; (end0-start0) &lt;&lt; <span class="st">&quot; ms&quot;</span>;</span>
<span id="cb344-56"><a href="#cb344-56"></a></span>
<span id="cb344-57"><a href="#cb344-57"></a></span>
<span id="cb344-58"><a href="#cb344-58"></a>    <span class="co">// Java style iterator</span></span>
<span id="cb344-59"><a href="#cb344-59"></a>    qint64 start1 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-60"><a href="#cb344-60"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;nbIterations; ++i){</span>
<span id="cb344-61"><a href="#cb344-61"></a>        sum = <span class="dv">0</span>;</span>
<span id="cb344-62"><a href="#cb344-62"></a>        QMapIterator&lt;<span class="dt">int</span>, <span class="dt">int</span>&gt; it(map);</span>
<span id="cb344-63"><a href="#cb344-63"></a>        <span class="cf">while</span> (it.hasNext()) {</span>
<span id="cb344-64"><a href="#cb344-64"></a>            it.next();</span>
<span id="cb344-65"><a href="#cb344-65"></a>            sum += it.value();</span>
<span id="cb344-66"><a href="#cb344-66"></a>        }</span>
<span id="cb344-67"><a href="#cb344-67"></a>    }</span>
<span id="cb344-68"><a href="#cb344-68"></a>    qint64 end1 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-69"><a href="#cb344-69"></a>    qDebug() &lt;&lt; <span class="st">&quot;Java style iterator : </span><span class="sc">\t</span><span class="st">&quot;</span> &lt;&lt; (end1-start1) &lt;&lt; <span class="st">&quot; ms&quot;</span>;</span>
<span id="cb344-70"><a href="#cb344-70"></a></span>
<span id="cb344-71"><a href="#cb344-71"></a></span>
<span id="cb344-72"><a href="#cb344-72"></a>    <span class="co">// STL style iterator</span></span>
<span id="cb344-73"><a href="#cb344-73"></a>    qint64 start2 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-74"><a href="#cb344-74"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;nbIterations; ++i){</span>
<span id="cb344-75"><a href="#cb344-75"></a>        sum = <span class="dv">0</span>;</span>
<span id="cb344-76"><a href="#cb344-76"></a>        QMap&lt;<span class="dt">int</span>, <span class="dt">int</span>&gt;::const_iterator it = map.constBegin();</span>
<span id="cb344-77"><a href="#cb344-77"></a>        <span class="dt">auto</span> end = map.constEnd();</span>
<span id="cb344-78"><a href="#cb344-78"></a>        <span class="cf">while</span> (it != end) {</span>
<span id="cb344-79"><a href="#cb344-79"></a>            sum += it.value();</span>
<span id="cb344-80"><a href="#cb344-80"></a>            ++it;</span>
<span id="cb344-81"><a href="#cb344-81"></a>        }</span>
<span id="cb344-82"><a href="#cb344-82"></a>    }</span>
<span id="cb344-83"><a href="#cb344-83"></a>    qint64 end2 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-84"><a href="#cb344-84"></a>    qDebug() &lt;&lt; <span class="st">&quot;STL style iterator : </span><span class="sc">\t</span><span class="st">&quot;</span> &lt;&lt; (end2-start2) &lt;&lt; <span class="st">&quot; ms&quot;</span>;</span>
<span id="cb344-85"><a href="#cb344-85"></a></span>
<span id="cb344-86"><a href="#cb344-86"></a></span>
<span id="cb344-87"><a href="#cb344-87"></a>    qint64 start3 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-88"><a href="#cb344-88"></a>    <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;nbIterations; ++i){</span>
<span id="cb344-89"><a href="#cb344-89"></a>        sum = <span class="dv">0</span>;</span>
<span id="cb344-90"><a href="#cb344-90"></a>        <span class="dt">auto</span> end = map.cend();</span>
<span id="cb344-91"><a href="#cb344-91"></a>        <span class="cf">for</span> (<span class="dt">auto</span> it = map.cbegin(); it != end; ++it)</span>
<span id="cb344-92"><a href="#cb344-92"></a>        {</span>
<span id="cb344-93"><a href="#cb344-93"></a>            sum += it.value();</span>
<span id="cb344-94"><a href="#cb344-94"></a>        }</span>
<span id="cb344-95"><a href="#cb344-95"></a>    }</span>
<span id="cb344-96"><a href="#cb344-96"></a>    qint64 end3 = QDateTime::currentMSecsSinceEpoch();</span>
<span id="cb344-97"><a href="#cb344-97"></a></span>
<span id="cb344-98"><a href="#cb344-98"></a>    qDebug() &lt;&lt; <span class="st">&quot;STL style iterator v2 : </span><span class="sc">\t</span><span class="st">&quot;</span> &lt;&lt; (end3-start3) &lt;&lt; <span class="st">&quot; ms&quot;</span>;</span>
<span id="cb344-99"><a href="#cb344-99"></a>}</span></code></pre></div>
<p>Edit July 2017 : I ran this code again on my new laptop (Qt 5.9, i7-7560U) and got some interesting changes</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb345-1"><a href="#cb345-1"></a>Reference vector :   <span class="dv">155</span>  ms </span>
<span id="cb345-2"><a href="#cb345-2"></a>Reference list :     <span class="dv">157</span>  ms</span>
<span id="cb345-3"><a href="#cb345-3"></a>QMap::values():      <span class="dv">1874</span>  ms </span>
<span id="cb345-4"><a href="#cb345-4"></a>Java style iterator: <span class="dv">1156</span>  ms </span>
<span id="cb345-5"><a href="#cb345-5"></a>STL style iterator:  <span class="dv">1143</span>  ms</span></code></pre></div>
<p>STL style and Java style have very similar performances in this benchmark</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-print-string-literal-and-qstring-with-qdebug-score-67586-in" class="level3">
<h3>90: How to print string literal and QString with qDebug? (score <a href="https://stackoverflow.com/q/18427191.html">67586</a> in )</h3>
<section id="question-88" class="level4">
<h4>Question</h4>
<p>Is there any easy way to get the following work? I mean is there any helper class in <code>Qt</code> which prepares the string for <code>qDebug</code>?</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb346-1"><a href="#cb346-1"></a>QString s = <span class="st">&quot;value&quot;</span>;</span>
<span id="cb346-2"><a href="#cb346-2"></a>qDebug(<span class="st">&quot;abc&quot;</span> + s + <span class="st">&quot;def&quot;</span>);</span></code></pre></div>
</section>
<section id="answer-accepted-score-21" class="level4">
<h4>Answer accepted (score 21)</h4>
<p>No really easy way I am aware of. You can do:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb347-1"><a href="#cb347-1"></a>QByteArray s = <span class="st">&quot;value&quot;</span>;</span>
<span id="cb347-2"><a href="#cb347-2"></a>qDebug(<span class="st">&quot;abc&quot;</span> + s + <span class="st">&quot;def&quot;</span>);</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb348-1"><a href="#cb348-1"></a>QString s = <span class="st">&quot;value&quot;</span>;</span>
<span id="cb348-2"><a href="#cb348-2"></a>qDebug(<span class="st">&quot;abc&quot;</span> + s.toLatin1() + <span class="st">&quot;def&quot;</span>);</span></code></pre></div>
</section>
<section id="answer-2-score-24-2" class="level4">
<h4>Answer 2 (score 24)</h4>
<p>You can use the following:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb349-1"><a href="#cb349-1"></a>qDebug().nospace() &lt;&lt; <span class="st">&quot;abc&quot;</span> &lt;&lt; qPrintable(s) &lt;&lt; <span class="st">&quot;def&quot;</span>;</span></code></pre></div>
<p>The <code>nospace()</code> is to avoid printing out spaces after every argument (which is default for <code>qDebug()</code>).</p>
</section>
<section id="answer-3-score-11-3" class="level4">
<h4>Answer 3 (score 11)</h4>
<p>According to <a href="http://doc.qt.io/qt-5/qtglobal.html#qUtf8Printable" rel="noreferrer">Qt Core 5.6 documentation</a> you should use <code>qUtf8Printable()</code> from <code>&amp;lt;QtGlobal&amp;gt;</code> header to print <code>QString</code> with <code>qDebug</code>.</p>
<p>You should do as follows:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb350-1"><a href="#cb350-1"></a>QString s = <span class="st">&quot;some text&quot;</span>;</span>
<span id="cb350-2"><a href="#cb350-2"></a>qDebug(<span class="st">&quot;%s&quot;</span>, qUtf8Printable(s));</span></code></pre></div>
<p>or shorter:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb351-1"><a href="#cb351-1"></a>QString s = <span class="st">&quot;some text&quot;</span>;</span>
<span id="cb351-2"><a href="#cb351-2"></a>qDebug(qUtf8Printable(s));</span></code></pre></div>
<p>See:</p>
<ul>
<li>
<p>
<a href="http://doc.qt.io/qt-5/qtglobal.html#qPrintable" rel="noreferrer">http://doc.qt.io/qt-5/qtglobal.html#qPrintable</a>
</p>
</li>
<li>
<p>
<a href="http://doc.qt.io/qt-5/qtglobal.html#qUtf8Printable" rel="noreferrer">http://doc.qt.io/qt-5/qtglobal.html#qUtf8Printable</a>
</p>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="fatal-error-qtguiqapplication-no-such-file-or-directory-score-67138-in-2019" class="level3">
<h3>91: fatal error: QtGui/QApplication: No such file or directory (score <a href="https://stackoverflow.com/q/5535661.html">67138</a> in 2019)</h3>
<section id="question-89" class="level4">
<h4>Question</h4>
<p>I’m using Qt Creator, and this line is generated automatically by the Qt Creator:</p>
<p><code>#include &amp;lt;QtGui/QApplication&amp;gt;</code></p>
<p>But, why am I getting this message?</p>
<p><code>QtGui/QApplication:  No such file or directory</code></p>
</section>
<section id="answer-2-score-17-1" class="level4">
<h4>Answer 2 (score 17)</h4>
<p>Depending on the Qt-version (5) QtGui was moved to QtWidgets; so it becomes</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb352-1"><a href="#cb352-1"></a><span class="pp">#include </span><span class="im">&lt;QtWidgets/QApplication&gt;</span></span></code></pre></div>
</section>
<section id="answer-3-score-14-1" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>You can try to add ‘declarative’ to the Project file:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb353-1"><a href="#cb353-1"></a>QT += gui declarative</span></code></pre></div>
<p>then</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb354-1"><a href="#cb354-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span></span></code></pre></div>
<p>It helps me</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-use-qt-in-my-visual-studio-2015-projects-score-66140-in" class="level3">
<h3>92: How do i use Qt in my Visual Studio 2015 projects? (score <a href="https://stackoverflow.com/q/32894097.html">66140</a> in )</h3>
<section id="question-90" class="level4">
<h4>Question</h4>
<p>We have large project that used .NET Framework for showing forms/windows. Recently i decided to deprecate CLR dependency and move to Qt.</p>
<p>While learning Qt, we’ve migrated from Visual studio 2013 to 2015 and then i noticed that there is no qt support for MSVC 14 version which vs2015 use.</p>
<p>Additionally, Qt vs addin was not working jn visual studio express/community edition we use. Is there any chance for me to use Qt and qt addin in our projects?</p>
<p>Searching web did not help, and it looks like no one use Qt with latest Visual Studio?</p>
</section>
<section id="answer-accepted-score-12-2" class="level4">
<h4>Answer accepted (score 12)</h4>
<p>As of now, you can just download Qt for Visual Studio 2015. <a href="https://marketplace.visualstudio.com/items?itemName=TheQtCompany.QtVisualStudioTools2015#overview" rel="nofollow noreferrer">Here</a>.</p>
</section>
<section id="answer-2-score-44" class="level4">
<h4>Answer 2 (score 44)</h4>
<h5>
Building
</h3>
<p>You can use Qt in Visual Studio 2015 without any problems. As already stated in the comments, you have to build it from source but Qt is pretty straightforward to build. You can download the current (5.5) sources <a href="http://download.qt.io/official_releases/qt/5.5/5.5.0/single/qt-everywhere-opensource-src-5.5.0.zip" rel="noreferrer">here</a> and then follow <a href="http://doc.qt.io/qt-5/windows-building.html" rel="noreferrer">this</a> step by step example on building it.</p>
<p>I would also suggest reading <a href="http://doc.qt.io/qt-5/configure-options.html" rel="noreferrer">more about the configure options</a>, this might save you a lot of time. It might possibly save you some external dependencies as well if you skip components you do not need. My configuration for instance contains <code>-skip qtwebkit -skip qtwebchannel</code> so I do not need ruby or python.</p>
<p>I could totally omit step 3 from the link. Just be sure to open the Visual Studio Command Prompt (32/64 is important here) for <code>configure</code> and <code>nmake</code>.</p>
<h5>
Usage
</h3>
<p>For Visual Studio 2015, <a href="https://forum.qt.io/topic/56108/how-to-install-qt-vs-add-in-for-vs-2015-rc/6" rel="noreferrer">the Qt Add-In is not available anymore</a>. But there is an Extension (<code>Tools &amp;gt; Extensions &amp;amp; Updates</code>) called <strong>Qt5Package</strong> or <strong>QtPackage</strong> which has the same functionality. After installing it, you have the Qt entry on your main toolbar where you have to specify a version and the path to the directory where you built it. This version will also be associated with the current project via the same menu.</p>
<p>If you load an existing project, you also have to convert it so the whole Qt functionality is used automatically. You can do this by opening the solution and right click on it; there should be an entry for the conversion to a <strong>QtAddin</strong> generated project.</p>
<p>I am using Qt 5.5 on Visual Studio 2015 with an old project and it is working without any issues.</p>
</section>
<section id="answer-3-score-0-4" class="level4">
<h4>Answer 3 (score 0)</h4>
<p>Qt have finally added support for Visual Studio 2013 and 2015 although it’s only in beta right now. See <a href="https://bugreports.qt.io/browse/QTVSADDINBUG-404" rel="nofollow">QTVSADDINBUG-404</a> for progress and read the blog post <a href="https://blog.qt.io/blog/2016/08/11/from-visual-studio-add-in-to-qt-vs-tools-beta/" rel="nofollow">From Visual Studio Add-In To Qt VS Tools (Beta)</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-create-a-bold-red-text-label-in-qt-score-66101-in" class="level3">
<h3>93: How to create a bold, red text label in Qt? (score <a href="https://stackoverflow.com/q/1464591.html">66101</a> in )</h3>
<section id="question-91" class="level4">
<h4>Question</h4>
<p>I want to write a single, bold red line in my application using Qt.</p>
<p>As far as I understand, I would create a QLabel, set its textFormat to rich text and give it a rich text string to display:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb355-1"><a href="#cb355-1"></a>QLabel *warning = new QLabel;</span>
<span id="cb355-2"><a href="#cb355-2"></a>warning-&gt;setTextFormat(Qt::RichText);</span>
<span id="cb355-3"><a href="#cb355-3"></a>warning-&gt;setText(<span class="st">&quot;{</span><span class="sc">\\</span><span class="st">rtf1</span><span class="sc">\\</span><span class="st">ansi</span><span class="sc">\\</span><span class="st">ansicpg1252 {</span><span class="sc">\\</span><span class="st">fonttbl</span><span class="sc">\\</span><span class="st">f0</span><span class="sc">\\</span><span class="st">fswiss</span><span class="sc">\\</span><span class="st">fcharset0 Helvetica;} {</span><span class="sc">\\</span><span class="st">colortbl;</span><span class="sc">\\</span><span class="st">red255</span><span class="sc">\\</span><span class="st">green0</span><span class="sc">\\</span><span class="st">blue0;} </span><span class="sc">\\</span><span class="st">f0 </span><span class="sc">\\</span><span class="st">cf0 this is bold red text}&quot;</span>);</span></code></pre></div>
<p>I tested this rich text string in a rich text editor and it displays fine.</p>
<p>But Qt displays the whole string with all braces, keywords and backslashes instead of “this is bold red text”. What am I doing wrong?</p>
<p>Thank you for your help.</p>
</section>
<section id="answer-accepted-score-59" class="level4">
<h4>Answer accepted (score 59)</h4>
<p>Try using HTML formatting: <code>&amp;lt;b&amp;gt;&amp;lt;font... etc &amp;lt;/b&amp;gt;</code>.</p>
<p>Qt Designer does it like this: <code>&amp;lt;span style=" font-size:8pt; font-weight:600; color:#aa0000;"&amp;gt;TextLabel&amp;lt;/span&amp;gt;</code></p>
</section>
<section id="answer-2-score-22-4" class="level4">
<h4>Answer 2 (score 22)</h4>
<p>You can use <a href="http://doc.qt.io/qt-4.8/stylesheet.html" rel="noreferrer">Qt StyleSheets</a> and set the <code>styleSheet</code> property of <code>QLabel</code></p>
<div class="sourceCode" id="cb356"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb356-1"><a href="#cb356-1"></a>warning-&gt;setStyleSheet(<span class="st">&quot;font-weight: bold; color: red&quot;</span>);</span></code></pre></div>
<p>Qt supports most CSS styles on its <code>QWidget</code>-derived classes. You don’t need to set the text format to <code>Qt::RichText</code> for this to work.</p>
</section>
<section id="answer-3-score-13-1" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>Qt uses a simple <a href="http://qt-project.org/doc/qt-5/richtext-html-subset.html" rel="nofollow noreferrer">HTML subset</a> for formatting.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-concatenate-qstrings-score-65515-in-2013" class="level3">
<h3>94: How can I concatenate QStrings? (score <a href="https://stackoverflow.com/q/18826007.html">65515</a> in 2013)</h3>
<section id="question-92" class="level4">
<h4>Question</h4>
<p>I have a problem with printing in Qt.</p>
<p>I have HTML code in QString variables. In this code I want to insert data from a database.</p>
<p>I get an error:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb357-1"><a href="#cb357-1"></a>E:\apprendreQt\gestionstock6\vente.cpp:<span class="dv">117</span>: error: invalid operands of types </span>
<span id="cb357-2"><a href="#cb357-2"></a>  &#39;<span class="dt">const</span> <span class="dt">char</span>*&#39; and &#39;<span class="dt">const</span> <span class="dt">char</span> [<span class="dv">27</span>]&#39; to binary &#39;operator+&#39;</span></code></pre></div>
<p>How can I fix this?</p>
<p>Here is my code:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb358-1"><a href="#cb358-1"></a><span class="dt">int</span> num_bl = ui-&gt;numeroBLlineEdit-&gt;text().toInt() ;</span>
<span id="cb358-2"><a href="#cb358-2"></a>QString html;</span>
<span id="cb358-3"><a href="#cb358-3"></a>QString requette = <span class="st">&quot;select num_facture,date,nom,prenom,code_fiscale,designation,qte_out, prix,(qte_out * prix ) as Montant, sum(qte_out * prix) as Total from ventes join produits_en_ventes join clients  join produits on ventes.vente_id = produits_en_ventes.vente_id and ventes.client_id = clients.client_id and produits_en_ventes.produit_id = produits.produit_id where ventes.client_id = :client_id &quot;</span>;</span>
<span id="cb358-4"><a href="#cb358-4"></a></span>
<span id="cb358-5"><a href="#cb358-5"></a><span class="cf">if</span>(!m_db-&gt;isOpen())</span>
<span id="cb358-6"><a href="#cb358-6"></a>    QMessageBox::critical(this,tr(<span class="st">&quot;Inventoria Solution&quot;</span>),m_db-&gt;lastError().text()) ;</span>
<span id="cb358-7"><a href="#cb358-7"></a><span class="cf">else</span>{</span>
<span id="cb358-8"><a href="#cb358-8"></a>    m_query-&gt;clear();</span>
<span id="cb358-9"><a href="#cb358-9"></a>    m_query-&gt;prepare(requette);</span>
<span id="cb358-10"><a href="#cb358-10"></a>    m_query-&gt;bindValue(<span class="st">&quot;:client_id &quot;</span>, num_bl);</span>
<span id="cb358-11"><a href="#cb358-11"></a></span>
<span id="cb358-12"><a href="#cb358-12"></a>    <span class="cf">if</span>(!m_query-&gt;exec())</span>
<span id="cb358-13"><a href="#cb358-13"></a>        QMessageBox::critical(this,tr(<span class="st">&quot;Inventoria Solution&quot;</span>),m_query-&gt;lastError().text()) ;</span>
<span id="cb358-14"><a href="#cb358-14"></a>    <span class="cf">else</span>{</span>
<span id="cb358-15"><a href="#cb358-15"></a>        html += <span class="st">&quot;       &lt;table&gt;&quot;</span></span>
<span id="cb358-16"><a href="#cb358-16"></a>                <span class="st">&quot;&lt;thead&gt;&quot;</span></span>
<span id="cb358-17"><a href="#cb358-17"></a>                <span class="st">&quot;&lt;tr&gt;&quot;</span></span>
<span id="cb358-18"><a href="#cb358-18"></a>                <span class="st">&quot;&lt;th&gt;N°&lt;/th&gt;&quot;</span></span>
<span id="cb358-19"><a href="#cb358-19"></a>                <span class="st">&quot;&lt;th&gt;Désignation&lt;/th&gt;&quot;</span></span>
<span id="cb358-20"><a href="#cb358-20"></a>                <span class="st">&quot;&lt;th&gt;Qte&lt;/th&gt;&quot;</span></span>
<span id="cb358-21"><a href="#cb358-21"></a>                <span class="st">&quot;&lt;th&gt;Prix Unitaire&lt;/th&gt;&quot;</span></span>
<span id="cb358-22"><a href="#cb358-22"></a>                <span class="st">&quot;&lt;th&gt;Montant&lt;/th&gt;&quot;</span></span>
<span id="cb358-23"><a href="#cb358-23"></a>                <span class="st">&quot;   &lt;/tr&gt;&quot;</span></span>
<span id="cb358-24"><a href="#cb358-24"></a>                <span class="st">&quot;&lt;/thead&gt;&quot;</span>;</span>
<span id="cb358-25"><a href="#cb358-25"></a>        <span class="cf">while</span>(m_query-&gt;next())</span>
<span id="cb358-26"><a href="#cb358-26"></a>        {</span>
<span id="cb358-27"><a href="#cb358-27"></a>            <span class="dt">int</span> num_article = <span class="dv">1</span>;</span>
<span id="cb358-28"><a href="#cb358-28"></a></span>
<span id="cb358-29"><a href="#cb358-29"></a>            html += <span class="st">&quot;&lt;tr&gt; &lt;td&gt;&quot;</span> + num_article + <span class="st">&quot;&lt;/td&gt; &lt;td&gt;&quot;</span>+m_query-&gt;value(<span class="dv">5</span>).toString()+<span class="st">&quot;&lt;/td&gt; &lt;td&gt;&quot;</span>+m_query-&gt;value(<span class="dv">6</span>).toInt() + <span class="st">&quot;&lt;/td&gt; &lt;td&gt;&quot;</span>+m_query-&gt;value(<span class="dv">7</span>).toInt() + <span class="st">&quot;&lt;/td&gt; &lt;td&gt;&quot;</span> + m_query-&gt;value(<span class="dv">8</span>).toInt() + <span class="st">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>;</span>
<span id="cb358-30"><a href="#cb358-30"></a>            num_article++;</span>
<span id="cb358-31"><a href="#cb358-31"></a></span>
<span id="cb358-32"><a href="#cb358-32"></a>        }</span>
<span id="cb358-33"><a href="#cb358-33"></a>            html += <span class="st">&quot;&lt;tfoot&gt;&quot;</span></span>
<span id="cb358-34"><a href="#cb358-34"></a>                <span class="st">&quot;&lt;tr&gt;&quot;</span></span>
<span id="cb358-35"><a href="#cb358-35"></a>                <span class="st">&quot;&lt;td&gt;Total:&quot;</span>+ m_query-&gt;value(<span class="dv">9</span>).toInt()+<span class="st">&quot;&lt;/td&gt;&quot;</span></span>
<span id="cb358-36"><a href="#cb358-36"></a>                <span class="st">&quot;&lt;/tr&gt;&quot;</span></span>
<span id="cb358-37"><a href="#cb358-37"></a>                <span class="st">&quot;&lt;/tfoot&gt;&quot;</span></span>
<span id="cb358-38"><a href="#cb358-38"></a>                <span class="st">&quot;&lt;/table&gt;&quot;</span>;</span>
<span id="cb358-39"><a href="#cb358-39"></a>    }</span>
<span id="cb358-40"><a href="#cb358-40"></a>    print_Html(html);</span>
<span id="cb358-41"><a href="#cb358-41"></a></span>
<span id="cb358-42"><a href="#cb358-42"></a></span>
<span id="cb358-43"><a href="#cb358-43"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-11" class="level4">
<h4>Answer accepted (score 11)</h4>
<p>If you use <code>operator+</code>, you need to provide QString as an argument, but you use integer values instead: <code>html += "&amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;" + num_article</code>, where <code>num_article</code> is declared as integer. You can replace it with, for example: <code>QString::number(num_article)</code>. The same in this line:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb359-1"><a href="#cb359-1"></a><span class="st">&quot;&lt;td&gt;Total:&quot;</span>+ m_query-&gt;value(<span class="dv">9</span>).toInt()+<span class="st">&quot;&lt;/td&gt;&quot;</span></span></code></pre></div>
<p>should be replaced with</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb360-1"><a href="#cb360-1"></a><span class="st">&quot;&lt;td&gt;Total:&quot;</span>+ m_query-&gt;value(<span class="dv">9</span>).toString()+<span class="st">&quot;&lt;/td&gt;&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-23-1" class="level4">
<h4>Answer 2 (score 23)</h4>
<p>I’m not sure about your error. However, AFAIK a Qstring cannot be concatenated with an int as such.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb361-1"><a href="#cb361-1"></a><span class="dt">int</span> myInt = <span class="dv">0</span>;</span>
<span id="cb361-2"><a href="#cb361-2"></a>QString text = <span class="st">&quot;someString&quot;</span> + myInt; <span class="co">// WRONG</span></span>
<span id="cb361-3"><a href="#cb361-3"></a></span>
<span id="cb361-4"><a href="#cb361-4"></a><span class="dt">int</span> myInt = <span class="dv">0</span>;</span>
<span id="cb361-5"><a href="#cb361-5"></a>QString text = <span class="st">&quot;someString&quot;</span> + QString::number( myInt ); <span class="co">// CORRECT</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb362-1"><a href="#cb362-1"></a><span class="dt">int</span> myInt = <span class="dv">0</span>;</span>
<span id="cb362-2"><a href="#cb362-2"></a>QString text = <span class="st">&quot;someString&quot;</span> % QString::number( myInt ); <span class="co">// CORRECT</span></span></code></pre></div>
</section>
<section id="answer-3-score-3-3" class="level4">
<h4>Answer 3 (score 3)</h4>
<p>in Qt5 you can use the <a href="http://qt-project.org/doc/qt-5.0/qtcore/qstring.html#QStringLiteral" rel="nofollow"><code>QStringLiteral</code> macro</a> for each string that doesn’t need to be localized to transform all the string literals from <code>const char*</code> (the C++ default) into QString, this will also make creation of those <code>QStrings</code> cheaper (on compilers that support it)</p>
<p>for Qt4 you can use the <code>QString(const char*)</code> constructor or <code>QString::fromAscii(const char*)</code> static function</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-layout-on-qmainwindow-score-64119-in-2017" class="level3">
<h3>95: Qt Layout on QMainWindow (score <a href="https://stackoverflow.com/q/1508939.html">64119</a> in 2017)</h3>
<section id="question-93" class="level4">
<h4>Question</h4>
<p>I designed a <code>QMainWindow</code> with <code>QtCreator's</code> designer. It consists of the default central widget (a <code>QWidget</code>) which contains a <code>QVBoxLayout</code> with all the other widgets in it. Now everything I want, is that the <code>QVBoxLayout</code> automatically occupies the whole central widgets rectangle space.</p>
<p>How can I do this? I didn’t find any usable property neither in the central widgets properties nor the <code>QVBoxLayout's</code> ones.</p>
</section>
<section id="answer-accepted-score-41-1" class="level4">
<h4>Answer accepted (score 41)</h4>
<p>You don’t have to create a <code>QVBoxLayout</code> manually. Just select your central <code>QWidget</code> and press a make-layout button.</p>
<p><img src="https://i.stack.imgur.com/XT9N7.png" alt="alt text"></p>
</section>
<section id="answer-2-score-68-1" class="level4">
<h4>Answer 2 (score 68)</h4>
<p>If you want to do it with code instead of using <code>QtCreator</code>, you could set the layout in a <code>QWidget</code> and then set the <code>QWidget</code> as the central widget of the main window like this:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb363-1"><a href="#cb363-1"></a><span class="pp">#include </span><span class="im">&lt;QtGui&gt;</span></span>
<span id="cb363-2"><a href="#cb363-2"></a><span class="pp">#include </span><span class="im">&lt;QWidget&gt;</span></span>
<span id="cb363-3"><a href="#cb363-3"></a><span class="pp">#include </span><span class="im">&lt;QHBoxLayout&gt;</span></span>
<span id="cb363-4"><a href="#cb363-4"></a><span class="pp">#include </span><span class="im">&quot;mainwindow.h&quot;</span></span>
<span id="cb363-5"><a href="#cb363-5"></a></span>
<span id="cb363-6"><a href="#cb363-6"></a>MainWindow::MainWindow() {  </span>
<span id="cb363-7"><a href="#cb363-7"></a></span>
<span id="cb363-8"><a href="#cb363-8"></a>        <span class="co">// Set layout</span></span>
<span id="cb363-9"><a href="#cb363-9"></a>        QHBoxLayout *layout = new QHBoxLayout;</span>
<span id="cb363-10"><a href="#cb363-10"></a>        layout-&gt;addWidget(myWidget1);</span>
<span id="cb363-11"><a href="#cb363-11"></a>        layout-&gt;addWidget(myWidget2);</span>
<span id="cb363-12"><a href="#cb363-12"></a></span>
<span id="cb363-13"><a href="#cb363-13"></a>        <span class="co">// Set layout in QWidget</span></span>
<span id="cb363-14"><a href="#cb363-14"></a>        QWidget *window = new QWidget();</span>
<span id="cb363-15"><a href="#cb363-15"></a>        window-&gt;setLayout(layout);</span>
<span id="cb363-16"><a href="#cb363-16"></a></span>
<span id="cb363-17"><a href="#cb363-17"></a>        <span class="co">// Set QWidget as the central layout of the main window</span></span>
<span id="cb363-18"><a href="#cb363-18"></a>        setCentralWidget(window);</span>
<span id="cb363-19"><a href="#cb363-19"></a></span>
<span id="cb363-20"><a href="#cb363-20"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-13-2" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>Add at least one widget on your <code>MainWindow</code>. Then select your window by clicking on it and click on the <code>VerticalLayout</code> Button at the top of <code>QTCreator</code>. You Vertical Layout is automatically added to the central widget and fills all the surface.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="convert-stdstring-to-qstring-score-64084-in-2016" class="level3">
<h3>96: Convert std::string to QString (score <a href="https://stackoverflow.com/q/4338067.html">64084</a> in 2016)</h3>
<section id="question-94" class="level4">
<h4>Question</h4>
<p>I’ve got an <code>std::string content</code> that I know contains UTF-8 data. I want to convert it to a <a href="http://doc.qt.io/qt-4.8/qstring.html" rel="noreferrer"><code>QString</code></a>. How do I do that, avoiding the from-ASCII conversion in Qt?</p>
</section>
<section id="answer-accepted-score-82-1" class="level4">
<h4>Answer accepted (score 82)</h4>
<p>There’s a <code>QString</code> function called <a href="http://doc.qt.io/qt-4.8/qstring.html#fromUtf8"><code>fromUtf8</code></a> that takes a <code>const char*</code>:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb364-1"><a href="#cb364-1"></a>QString str = QString::fromUtf8(content.c_str());</span></code></pre></div>
</section>
<section id="answer-2-score-77-1" class="level4">
<h4>Answer 2 (score 77)</h4>
<p><code>QString::fromStdString(content)</code> is better since it is more robust. Also note, that if <code>std::string</code> is encoded in UTF-8, then it should give exactly the same result as <code>QString::fromUtf8(content.data(), int(content.size()))</code>.</p>
</section>
<section id="answer-3-score-6-1" class="level4">
<h4>Answer 3 (score 6)</h4>
<p>Usually, the best way of doing the conversion is using the method <a href="http://doc.qt.io/qt-5/qstring.html#fromUtf8" rel="noreferrer">fromUtf8</a>, but the problem is when you have strings locale-dependent.</p>
<p>In these cases, it’s preferable to use <a href="http://doc.qt.io/qt-5/qstring.html#fromLocal8Bit" rel="noreferrer">fromLocal8Bit</a>. Example:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb365-1"><a href="#cb365-1"></a>std::string str = <span class="st">&quot;ëxample&quot;</span>;</span>
<span id="cb365-2"><a href="#cb365-2"></a>QString qs = QString::fromLocal8Bit(str.c_str());</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-selected-rows-in-qtableview-score-63806-in-2016" class="level3">
<h3>97: how to get selected rows in QTableView (score <a href="https://stackoverflow.com/q/5927499.html">63806</a> in 2016)</h3>
<section id="question-95" class="level4">
<h4>Question</h4>
<p>After watching many threads about getting selected rows numbers, I am really confused.</p>
<p>How do you get ROW numbers in <code>QTableView</code> using <code>QStandardItemModel</code> I used below selection model and behavior as</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb366-1"><a href="#cb366-1"></a>setSelectionBehavior(QAbstractItemView::SelectRows);</span>
<span id="cb366-2"><a href="#cb366-2"></a>setSelectionMode(QAbstractItemView::SingleSelection);</span></code></pre></div>
<p>
and if you have your own way of selecting can you explain how it works. Thanks for the help!
</p>
</section>
<section id="answer-2-score-58-1" class="level4">
<h4>Answer 2 (score 58)</h4>
<p>The method <code>selectionModel()</code> return a <code>QItemSelectionModel</code>.</p>
<p>You can use <code>QItemSelectionModel</code> class to check/change/other selection(s)</p>
<p>Example:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb367-1"><a href="#cb367-1"></a>QItemSelectionModel *select = table-&gt;selectionModel();</span>
<span id="cb367-2"><a href="#cb367-2"></a></span>
<span id="cb367-3"><a href="#cb367-3"></a>select-&gt;hasSelection() <span class="co">//check if has selection</span></span>
<span id="cb367-4"><a href="#cb367-4"></a>select-&gt;selectedRows() <span class="co">// return selected row(s)</span></span>
<span id="cb367-5"><a href="#cb367-5"></a>select-&gt;selectedColumns() <span class="co">// return selected column(s)</span></span>
<span id="cb367-6"><a href="#cb367-6"></a>...</span></code></pre></div>
</section>
<section id="answer-3-score-13-3" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>Check <a href="http://doc.qt.io/qt-5/qitemselectionmodel.html#selectedRows" rel="noreferrer"><code>selectedRows</code></a> method of the <a href="http://doc.qt.io/qt-5/qitemselectionmodel.html" rel="noreferrer"><code>QItemSelectionModel</code></a> Class .</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb368-1"><a href="#cb368-1"></a>QModelIndexList selection = yourTableView-&gt;selectionModel()-&gt;selectedRows();</span>
<span id="cb368-2"><a href="#cb368-2"></a></span>
<span id="cb368-3"><a href="#cb368-3"></a><span class="co">// Multiple rows can be selected</span></span>
<span id="cb368-4"><a href="#cb368-4"></a><span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt; selection.count(); i++)</span>
<span id="cb368-5"><a href="#cb368-5"></a>{</span>
<span id="cb368-6"><a href="#cb368-6"></a>    QModelIndex index = selection.at(i);</span>
<span id="cb368-7"><a href="#cb368-7"></a>    qDebug() &lt;&lt; index.row();</span>
<span id="cb368-8"><a href="#cb368-8"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qvboxlayout-how-to-vertically-align-widgets-to-the-top-instead-of-the-center-score-63577-in" class="level3">
<h3>98: QVBoxLayout: How to vertically align widgets to the top instead of the center (score <a href="https://stackoverflow.com/q/10082299.html">63577</a> in )</h3>
<section id="question-96" class="level4">
<h4>Question</h4>
<p>In Qt, When I add widgets to my layout, they are vertically centered by default. Is there a way to “List” the widgets from top to bottom instead of centering them vertically?</p>
</section>
<section id="answer-accepted-score-39-1" class="level4">
<h4>Answer accepted (score 39)</h4>
<p>use <code>void QLayout::setAlignment ( Qt::Alignment alignment )</code> method to set alignment according to your choice.</p>
</section>
<section id="answer-2-score-21" class="level4">
<h4>Answer 2 (score 21)</h4>
<p>I find this a little more complicated than just using <code>layout.setAlignment()</code>. It kept not working for me until just now, when I figured out that if you have expanding widgets that you set a maximum height for, then that widget will not be aligned the way you want.</p>
<p>Here is example code that does <em>not</em> top align the <code>QTextBrowser()</code> widget even though I call <code>layout.setAlignment(Qt.AlignTop)</code>. Sorry that it is in Python, but it is pretty easy to translate to C++ (I have gone the other way many times).</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb369-1"><a href="#cb369-1"></a>from PyQt4.QtCore import *</span>
<span id="cb369-2"><a href="#cb369-2"></a>from PyQt4.QtGui import *</span>
<span id="cb369-3"><a href="#cb369-3"></a></span>
<span id="cb369-4"><a href="#cb369-4"></a>class MyWidget(QWidget):</span>
<span id="cb369-5"><a href="#cb369-5"></a>    <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb369-6"><a href="#cb369-6"></a>    Create a widget that aligns its contents to the top.</span>
<span id="cb369-7"><a href="#cb369-7"></a>    <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb369-8"><a href="#cb369-8"></a></span>
<span id="cb369-9"><a href="#cb369-9"></a>    def __init__(self, parent=None):</span>
<span id="cb369-10"><a href="#cb369-10"></a></span>
<span id="cb369-11"><a href="#cb369-11"></a>        QWidget.__init__(self, parent)</span>
<span id="cb369-12"><a href="#cb369-12"></a></span>
<span id="cb369-13"><a href="#cb369-13"></a>        layout = QVBoxLayout()</span>
<span id="cb369-14"><a href="#cb369-14"></a></span>
<span id="cb369-15"><a href="#cb369-15"></a>        label = QLabel(&#39;label:&#39;)</span>
<span id="cb369-16"><a href="#cb369-16"></a>        layout.addWidget(label)</span>
<span id="cb369-17"><a href="#cb369-17"></a></span>
<span id="cb369-18"><a href="#cb369-18"></a>        info = QTextBrowser(self)</span>
<span id="cb369-19"><a href="#cb369-19"></a>        info.setMinimumHeight(<span class="dv">100</span>)</span>
<span id="cb369-20"><a href="#cb369-20"></a>        info.setMaximumHeight(<span class="dv">200</span>)</span>
<span id="cb369-21"><a href="#cb369-21"></a>        layout.addWidget(info)        </span>
<span id="cb369-22"><a href="#cb369-22"></a>        <span class="er"># Uncomment the next line to get this to align top.</span></span>
<span id="cb369-23"><a href="#cb369-23"></a><span class="er">#         layout.setAlignment(info, Qt.AlignTop)</span></span>
<span id="cb369-24"><a href="#cb369-24"></a></span>
<span id="cb369-25"><a href="#cb369-25"></a>        <span class="er"># Create a progress bar layout.</span></span>
<span id="cb369-26"><a href="#cb369-26"></a>        button = QPushButton(&#39;Button <span class="dv">1</span><span class="er">&#39;</span>)        </span>
<span id="cb369-27"><a href="#cb369-27"></a>        layout.addWidget(button)        </span>
<span id="cb369-28"><a href="#cb369-28"></a></span>
<span id="cb369-29"><a href="#cb369-29"></a>        <span class="er"># This will align all the widgets to the top except</span></span>
<span id="cb369-30"><a href="#cb369-30"></a>        <span class="er"># for the QTextBrowser() since it has a maximum size set.</span></span>
<span id="cb369-31"><a href="#cb369-31"></a>        layout.setAlignment(Qt.AlignTop)</span>
<span id="cb369-32"><a href="#cb369-32"></a></span>
<span id="cb369-33"><a href="#cb369-33"></a>        self.setLayout(layout)</span>
<span id="cb369-34"><a href="#cb369-34"></a></span>
<span id="cb369-35"><a href="#cb369-35"></a></span>
<span id="cb369-36"><a href="#cb369-36"></a><span class="cf">if</span> __name__ == &#39;__main__&#39;:</span>
<span id="cb369-37"><a href="#cb369-37"></a></span>
<span id="cb369-38"><a href="#cb369-38"></a>    import sys</span>
<span id="cb369-39"><a href="#cb369-39"></a></span>
<span id="cb369-40"><a href="#cb369-40"></a>    app = QApplication(sys.argv)</span>
<span id="cb369-41"><a href="#cb369-41"></a></span>
<span id="cb369-42"><a href="#cb369-42"></a>    widget = MyWidget()</span>
<span id="cb369-43"><a href="#cb369-43"></a>    widget.show()</span>
<span id="cb369-44"><a href="#cb369-44"></a>    widget.resize(QSize(<span class="dv">900</span>, <span class="dv">400</span>))</span>
<span id="cb369-45"><a href="#cb369-45"></a></span>
<span id="cb369-46"><a href="#cb369-46"></a>    app.exec_()</span></code></pre></div>
<p>The following explicitly calls <code>layout.setAlignment(info, Qt.AlignTop)</code> to get the expending text widget to work.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb370-1"><a href="#cb370-1"></a>from PyQt4.QtCore import *</span>
<span id="cb370-2"><a href="#cb370-2"></a>from PyQt4.QtGui import *</span>
<span id="cb370-3"><a href="#cb370-3"></a></span>
<span id="cb370-4"><a href="#cb370-4"></a>class MyWidget(QWidget):</span>
<span id="cb370-5"><a href="#cb370-5"></a>    <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb370-6"><a href="#cb370-6"></a>    Create a widget that aligns its contents to the top.</span>
<span id="cb370-7"><a href="#cb370-7"></a>    <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb370-8"><a href="#cb370-8"></a></span>
<span id="cb370-9"><a href="#cb370-9"></a>    def __init__(self, parent=None):</span>
<span id="cb370-10"><a href="#cb370-10"></a></span>
<span id="cb370-11"><a href="#cb370-11"></a>        QWidget.__init__(self, parent)</span>
<span id="cb370-12"><a href="#cb370-12"></a></span>
<span id="cb370-13"><a href="#cb370-13"></a>        layout = QVBoxLayout()</span>
<span id="cb370-14"><a href="#cb370-14"></a></span>
<span id="cb370-15"><a href="#cb370-15"></a>        label = QLabel(&#39;label:&#39;)</span>
<span id="cb370-16"><a href="#cb370-16"></a>        layout.addWidget(label)</span>
<span id="cb370-17"><a href="#cb370-17"></a></span>
<span id="cb370-18"><a href="#cb370-18"></a>        info = QTextBrowser(self)</span>
<span id="cb370-19"><a href="#cb370-19"></a>        info.setMinimumHeight(<span class="dv">100</span>)</span>
<span id="cb370-20"><a href="#cb370-20"></a>        info.setMaximumHeight(<span class="dv">200</span>)</span>
<span id="cb370-21"><a href="#cb370-21"></a>        layout.addWidget(info)        </span>
<span id="cb370-22"><a href="#cb370-22"></a>        <span class="er"># Uncomment the next line to get this to align top.</span></span>
<span id="cb370-23"><a href="#cb370-23"></a>        layout.setAlignment(info, Qt.AlignTop)</span>
<span id="cb370-24"><a href="#cb370-24"></a></span>
<span id="cb370-25"><a href="#cb370-25"></a>        <span class="er"># Create a progress bar layout.</span></span>
<span id="cb370-26"><a href="#cb370-26"></a>        button = QPushButton(&#39;Button <span class="dv">1</span><span class="er">&#39;</span>)        </span>
<span id="cb370-27"><a href="#cb370-27"></a>        layout.addWidget(button)        </span>
<span id="cb370-28"><a href="#cb370-28"></a></span>
<span id="cb370-29"><a href="#cb370-29"></a>        <span class="er"># This will align all the widgets to the top except</span></span>
<span id="cb370-30"><a href="#cb370-30"></a>        <span class="er"># for the QTextBrowser() since it has a maximum size set.</span></span>
<span id="cb370-31"><a href="#cb370-31"></a>        layout.setAlignment(Qt.AlignTop)</span>
<span id="cb370-32"><a href="#cb370-32"></a></span>
<span id="cb370-33"><a href="#cb370-33"></a>        self.setLayout(layout)</span>
<span id="cb370-34"><a href="#cb370-34"></a></span>
<span id="cb370-35"><a href="#cb370-35"></a></span>
<span id="cb370-36"><a href="#cb370-36"></a><span class="cf">if</span> __name__ == &#39;__main__&#39;:</span>
<span id="cb370-37"><a href="#cb370-37"></a></span>
<span id="cb370-38"><a href="#cb370-38"></a>    import sys</span>
<span id="cb370-39"><a href="#cb370-39"></a></span>
<span id="cb370-40"><a href="#cb370-40"></a>    app = QApplication(sys.argv)</span>
<span id="cb370-41"><a href="#cb370-41"></a></span>
<span id="cb370-42"><a href="#cb370-42"></a>    widget = MyWidget()</span>
<span id="cb370-43"><a href="#cb370-43"></a>    widget.show()</span>
<span id="cb370-44"><a href="#cb370-44"></a>    widget.resize(QSize(<span class="dv">900</span>, <span class="dv">400</span>))</span>
<span id="cb370-45"><a href="#cb370-45"></a></span>
<span id="cb370-46"><a href="#cb370-46"></a>    app.exec_()</span></code></pre></div>
</section>
<section id="answer-3-score-20-1" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>If you have a <code>QVBoxLayout</code> and want your fixed size widgets to be stacked at the top, you can simply append a vertical stretch add the end:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb371-1"><a href="#cb371-1"></a>layout.addStretch()</span></code></pre></div>
<p>If you have multiple stretchers or other stretch items, you can specify an integer stretch factor argument that defines their size ratio.</p>
<p>See also <a href="http://doc.qt.io/qt-4.8/qboxlayout.html#addStretch" rel="noreferrer">addStretch</a> and <a href="http://doc.qt.io/qt-4.8/qboxlayout.html#addSpacerItem" rel="noreferrer">addSpacerItem</a>.</p>
<p>Not sure whether this answers your original question, but it is the answer to the one that I had when googling and being led to this page - so it might be useful for others too.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt5-static-build-yields-failed-to-load-platform-plugin-windows-score-63348-in-2013" class="level3">
<h3>99: Qt5 Static Build yields Failed to load platform plugin “windows” (score <a href="https://stackoverflow.com/q/16773789.html">63348</a> in 2013)</h3>
<section id="question-97" class="level4">
<h4>Question</h4>
<p>
I am writing a Qt application on Windows using <strong>Visual Studio 2012</strong>. Using the Qt Add-in and a custom built <strong>static</strong> distribution of <strong>Qt 5.0.2</strong>. I am running into the dreaded <code>"Failed to load platform plugin windows"</code> error whenever I run the application. I have added the following to the linker input:
</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb372-1"><a href="#cb372-1"></a>imm32.lib</span>
<span id="cb372-2"><a href="#cb372-2"></a>winmm.lib</span>
<span id="cb372-3"><a href="#cb372-3"></a>Ws2_32.lib</span>
<span id="cb372-4"><a href="#cb372-4"></a>qtmaind.lib</span>
<span id="cb372-5"><a href="#cb372-5"></a>Qt5Cored.lib</span>
<span id="cb372-6"><a href="#cb372-6"></a>Qt5Guid.lib</span>
<span id="cb372-7"><a href="#cb372-7"></a>Qt5Widgetsd.lib</span></code></pre></div>
<p>At first I thought that maybe I should add “qwindowsd.lib” to that list as well however that did not fix the problem. What do I need to do in order to make my application run?</p>
</section>
<section id="answer-accepted-score-25" class="level4">
<h4>Answer accepted (score 25)</h4>
<p>I solved it. Thanks to <a href="http://qt-project.org/forums/viewthread/27037">this</a> I was able to get everything to work. I added the following libraries:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb373-1"><a href="#cb373-1"></a>opengl32.lib</span>
<span id="cb373-2"><a href="#cb373-2"></a>Qt5PlatformSupport.lib</span>
<span id="cb373-3"><a href="#cb373-3"></a>qwindows.lib</span></code></pre></div>
<p>I also added the following to my code:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb374-1"><a href="#cb374-1"></a><span class="pp">#include </span><span class="im">&lt;QtPlugin&gt;</span></span>
<span id="cb374-2"><a href="#cb374-2"></a>Q_IMPORT_PLUGIN (QWindowsIntegrationPlugin);</span></code></pre></div>
</section>
<section id="answer-2-score-28" class="level4">
<h4>Answer 2 (score 28)</h4>
<p>For dynamic build only: Make sure you move the qwindows.dll to the following directory:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb375-1"><a href="#cb375-1"></a>yourapp.exe</span>
<span id="cb375-2"><a href="#cb375-2"></a>Qt5Core.dll</span>
<span id="cb375-3"><a href="#cb375-3"></a>...</span>
<span id="cb375-4"><a href="#cb375-4"></a>platforms/qwindows.dll</span>
<span id="cb375-5"><a href="#cb375-5"></a>...</span></code></pre></div>
<p>
Note that the plugins directory is missing! You put all the needed folders from QT_BASE/…/plugins/* directly together with your binaries. BTW: I did not need libEGL.dll, but my application almost has no GUI.
</p>
<p>My source: <a href="http://qt-project.org/forums/viewthread/27056/#122588" rel="noreferrer">http://qt-project.org/forums/viewthread/27056/#122588</a></p>
</section>
<section id="answer-3-score-12-6" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>I had the same error with MinGW version of Qt (not static): “Failed to load platform plugin windows”.</p>
<p>The solution for me was to add the DLLs <code>libEGL.dll</code> and <code>libEGLd.dll</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="qt-set-size-of-qmainwindow-score-63091-in-2016" class="level3">
<h3>100: Qt: Set size of QMainWindow (score <a href="https://stackoverflow.com/q/16280323.html">63091</a> in 2016)</h3>
<section id="question-98" class="level4">
<h4>Question</h4>
<p>I’m new to Qt, so I wonder whether there is a way to set the size of a <code>QMainWindow</code> to (for example) 70% of the user’s desktop.<br>I tried the stretch factor but it didn’t work. <code>QWidget::setFixedSize</code> worked but only with a pixel number, I think.</p>
</section>
<section id="answer-accepted-score-27" class="level4">
<h4>Answer accepted (score 27)</h4>
<p>Thanks to Amir eas. The problem is solved. Here’s the code for it:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb376-1"><a href="#cb376-1"></a><span class="pp">#include </span><span class="im">&lt;QDesktopWidget&gt;</span></span>
<span id="cb376-2"><a href="#cb376-2"></a><span class="pp">#include </span><span class="im">&lt;QMainWindow&gt;</span></span>
<span id="cb376-3"><a href="#cb376-3"></a>...</span>
<span id="cb376-4"><a href="#cb376-4"></a>QDesktopWidget dw;</span>
<span id="cb376-5"><a href="#cb376-5"></a>MainWindow w;</span>
<span id="cb376-6"><a href="#cb376-6"></a>...</span>
<span id="cb376-7"><a href="#cb376-7"></a><span class="dt">int</span> x=dw.width()*<span class="fl">0.7</span>;</span>
<span id="cb376-8"><a href="#cb376-8"></a><span class="dt">int</span> y=dw.height()*<span class="fl">0.7</span>;</span>
<span id="cb376-9"><a href="#cb376-9"></a>w.setFixedSize(x,y);</span></code></pre></div>
</section>
<section id="answer-2-score-39" class="level4">
<h4>Answer 2 (score 39)</h4>
<p>Somewhere in your QMainWindow constructor, do this:</p>
<p><code>resize(QDesktopWidget().availableGeometry(this).size() * 0.7);</code></p>
<p>This will resize the window to 70% of the available screen space.</p>
</section>
<section id="answer-3-score-4-6" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>You can use the <code>availableGeometry(QWidget*)</code> method in <code>QDesktopWidget</code>, this will give you the geometry of the screen that this widget is currently on. <br>For example:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb377-1"><a href="#cb377-1"></a>QRect screenSize = desktop.availableGeometry(this);</span>
<span id="cb377-2"><a href="#cb377-2"></a>this-&gt;setFixedSize(QSize(screenSize.width * <span class="fl">0.7</span><span class="bu">f</span>, screenSize.height * <span class="fl">0.7</span><span class="bu">f</span>));</span></code></pre></div>
<p>
Where <code>this</code> is the MainWindow pointer. This will work when using multiple screens.
</p>
</section>
</section>
</section>
</body>
</html>
