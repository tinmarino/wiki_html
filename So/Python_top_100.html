<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Python_top_100.md – Python &lt;- StackOverflow top 100</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #232629;
    color: #7a7c7d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
div.sourceCode
  { color: #cfcfc2; background-color: #232629; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #cfcfc2; } /* Normal */
code span.al { color: #95da4c; } /* Alert */
code span.an { color: #3f8058; } /* Annotation */
code span.at { color: #2980b9; } /* Attribute */
code span.bn { color: #f67400; } /* BaseN */
code span.bu { color: #7f8c8d; } /* BuiltIn */
code span.cf { color: #fdbc4b; } /* ControlFlow */
code span.ch { color: #3daee9; } /* Char */
code span.cn { color: #27aeae; } /* Constant */
code span.co { color: #7a7c7d; } /* Comment */
code span.cv { color: #7f8c8d; } /* CommentVar */
code span.do { color: #a43340; } /* Documentation */
code span.dt { color: #2980b9; } /* DataType */
code span.dv { color: #f67400; } /* DecVal */
code span.er { color: #da4453; } /* Error */
code span.ex { color: #0099ff; } /* Extension */
code span.fl { color: #f67400; } /* Float */
code span.fu { color: #8e44ad; } /* Function */
code span.im { color: #27ae60; } /* Import */
code span.in { color: #c45b00; } /* Information */
code span.kw { color: #cfcfc2; } /* Keyword */
code span.op { color: #cfcfc2; } /* Operator */
code span.ot { color: #27ae60; } /* Other */
code span.pp { color: #27ae60; } /* Preprocessor */
code span.re { color: #2980b9; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #da4453; } /* SpecialString */
code span.st { color: #f44f4f; } /* String */
code span.va { color: #27aeae; } /* Variable */
code span.vs { color: #da4453; } /* VerbatimString */
code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../Css/color_dark_solarized.css" />
  <link rel="stylesheet" href="../Css/layout_toc.css" />
  <script type="text/javascript" src="../Css/js_masonry_desandro.js"></script>
</head>
<body>
<header>
<h1 class="title">Python &lt;- StackOverflow top 100</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#iterating-over-dictionaries-using-for-loops-score-4065148-in-2017">1: Iterating over dictionaries using ‘for’ loops (score <span>4065148</span> in 2017)</a></li>
<li><a href="#does-python-have-a-string-contains-substring-method-score-3792442-in-2017">2: Does Python have a string ‘contains’ substring method? (score <span>3792442</span> in 2017)</a></li>
<li><a href="#how-do-i-check-whether-a-file-exists-without-exceptions-score-3681360-in-2018">3: How do I check whether a file exists without exceptions? (score <span>3681360</span> in 2018)</a></li>
<li><a href="#how-do-i-parse-a-string-to-a-float-or-int-score-3665519-in-2019">4: How do I parse a string to a float or int? (score <span>3665519</span> in 2019)</a></li>
<li><a href="#how-do-i-list-all-files-of-a-directory-score-3621699-in-2017">5: How do I list all files of a directory? (score <span>3621699</span> in 2017)</a></li>
<li><a href="#finding-the-index-of-an-item-given-a-list-containing-it-in-python-score-3448930-in-2019">6: Finding the index of an item given a list containing it in Python (score <span>3448930</span> in 2019)</a></li>
<li><a href="#how-to-read-a-file-line-by-line-into-a-list-score-3366083-in-2018">7: How to read a file line-by-line into a list? (score <span>3366083</span> in 2018)</a></li>
<li><a href="#calling-an-external-command-in-python-score-3202147-in-2019">8: Calling an external command in Python (score <span>3202147</span> in 2019)</a></li>
<li><a href="#converting-integer-to-string-score-3197810-in-2019">9: Converting integer to string? (score <span>3197810</span> in 2019)</a></li>
<li><a href="#add-new-keys-to-a-dictionary-score-3143556-in-2019">10: Add new keys to a dictionary? (score <span>3143556</span> in 2019)</a></li>
<li><a href="#check-if-a-given-key-already-exists-in-a-dictionary-score-3139063-in-2013">11: Check if a given key already exists in a dictionary (score <span>3139063</span> in 2013)</a></li>
<li><a href="#how-do-i-get-the-number-of-elements-in-a-list-score-3134575-in-2019">12: How do I get the number of elements in a list? (score <span>3134575</span> in 2019)</a></li>
<li><a href="#using-global-variables-in-a-function-score-3043289-in-2018">13: Using global variables in a function (score <span>3043289</span> in 2018)</a></li>
<li><a href="#how-to-get-the-current-time-in-python-score-3001470-in-2018">14: How to get the current time in Python (score <span>3001470</span> in 2018)</a></li>
<li><a href="#how-do-i-install-pip-on-windows-score-2887828-in-2017">15: How do I install pip on Windows? (score <span>2887828</span> in 2017)</a></li>
<li><a href="#how-can-i-make-a-time-delay-in-python-score-2839107-in-2018">16: How can I make a time delay in Python? (score <span>2839107</span> in 2018)</a></li>
<li><a href="#what-is-the-difference-between-pythons-list-methods-append-and-extend-score-2798324-in-2019">17: What is the difference between Python’s list methods append and extend? (score <span>2798324</span> in 2019)</a></li>
<li><a href="#limiting-floats-to-two-decimal-points-score-2780835-in-2017">18: Limiting floats to two decimal points (score <span>2780835</span> in 2017)</a></li>
<li><a href="#converting-string-into-datetime-score-2674955-in-2019">19: Converting string into datetime (score <span>2674955</span> in 2019)</a></li>
<li><a href="#how-do-i-get-a-substring-of-a-string-in-python-score-2671603-in-2019">20: How do I get a substring of a string in Python? (score <span>2671603</span> in 2019)</a></li>
<li><a href="#find-current-directory-and-files-directory-score-2648748-in-2016">21: Find current directory and file’s directory (score <span>2648748</span> in 2016)</a></li>
<li><a href="#why-cant-python-parse-this-json-data-score-2591542-in-2019">22: Why can’t Python parse this JSON data? (score <span>2591542</span> in 2019)</a></li>
<li><a href="#what-does-if-name-main-do-score-2531456-in-2018">23: What does if <strong>name</strong> == “<strong>main</strong>”: do? (score <span>2531456</span> in 2018)</a></li>
<li><a href="#how-do-i-check-if-a-list-is-empty-score-2462573-in-2018">24: How do I check if a list is empty? (score <span>2462573</span> in 2018)</a></li>
<li><a href="#how-do-i-sort-a-dictionary-by-value-score-2415416-in-2019">25: How do I sort a dictionary by value? (score <span>2415416</span> in 2019)</a></li>
<li><a href="#how-can-i-safely-create-a-nested-directory-score-2407666-in-2019">26: How can I safely create a nested directory? (score <span>2407666</span> in 2019)</a></li>
<li><a href="#how-to-remove-an-element-from-a-list-by-index-score-2347506-in-2019">27: How to remove an element from a list by index? (score <span>2347506</span> in 2019)</a></li>
<li><a href="#renaming-columns-in-pandas-score-2283204-in-2017">28: Renaming columns in pandas (score <span>2283204</span> in 2017)</a></li>
<li><a href="#how-to-determine-a-python-variables-type-score-2254676-in-2017">29: How to determine a Python variable’s type? (score <span>2254676</span> in 2017)</a></li>
<li><a href="#how-do-i-lowercase-a-string-in-python-score-2241046-in-2019">30: How do I lowercase a string in Python? (score <span>2241046</span> in 2019)</a></li>
<li><a href="#how-to-convert-list-to-string-score-2197422-in-2019">31: How to convert list to string (score <span>2197422</span> in 2019)</a></li>
<li><a href="#select-rows-from-a-dataframe-based-on-values-in-a-column-in-pandas-score-2183835-in-2019">32: Select rows from a DataFrame based on values in a column in pandas (score <span>2183835</span> in 2019)</a></li>
<li><a href="#how-do-you-change-the-size-of-figures-drawn-with-matplotlib-score-2126797-in">33: How do you change the size of figures drawn with matplotlib? (score <span>2126797</span> in )</a></li>
<li><a href="#how-do-i-concatenate-two-lists-in-python-score-2112225-in-2019">34: How do I concatenate two lists in Python? (score <span>2112225</span> in 2019)</a></li>
<li><a href="#what-does-the-yield-keyword-do-score-2091736-in-2019">35: What does the “yield” keyword do? (score <span>2091736</span> in 2019)</a></li>
<li><a href="#how-to-define-a-two-dimensional-array-in-python-score-2033452-in-2017">36: How to define a two-dimensional array in Python (score <span>2033452</span> in 2017)</a></li>
<li><a href="#how-do-i-install-pip-on-macos-or-os-x-score-1952317-in-2017">37: How do I install pip on macOS or OS X? (score <span>1952317</span> in 2017)</a></li>
<li><a href="#convert-bytes-to-a-string-score-1932306-in-2019">38: Convert bytes to a string (score <span>1932306</span> in 2019)</a></li>
<li><a href="#correct-way-to-write-line-to-file-score-1928059-in-2017">39: Correct way to write line to file? (score <span>1928059</span> in 2017)</a></li>
<li><a href="#accessing-the-index-in-for-loops-score-1900009-in-2019">40: Accessing the index in ‘for’ loops? (score <span>1900009</span> in 2019)</a></li>
<li><a href="#how-to-iterate-over-rows-in-a-dataframe-in-pandas-score-1869294-in-2018">41: How to iterate over rows in a DataFrame in Pandas? (score <span>1869294</span> in 2018)</a></li>
<li><a href="#selecting-multiple-columns-in-a-pandas-dataframe-score-1863876-in-2018">42: Selecting multiple columns in a pandas dataframe (score <span>1863876</span> in 2018)</a></li>
<li><a href="#pythons-equivalent-of-logical-and-in-an-if-statement-score-1813435-in-2018">43: Python’s equivalent of &amp;&amp; (logical-and) in an if-statement (score <span>1813435</span> in 2018)</a></li>
<li><a href="#getting-the-last-element-of-a-list-score-1789328-in-2019">44: Getting the last element of a list (score <span>1789328</span> in 2019)</a></li>
<li><a href="#adding-new-column-to-existing-dataframe-in-python-pandas-score-1789112-in-2017">45: Adding new column to existing DataFrame in Python pandas (score <span>1789112</span> in 2017)</a></li>
<li><a href="#delete-a-file-or-folder-score-1779349-in-2018">46: Delete a file or folder (score <span>1779349</span> in 2018)</a></li>
<li><a href="#does-python-have-a-ternary-conditional-operator-score-1772957-in-2019">47: Does Python have a ternary conditional operator? (score <span>1772957</span> in 2019)</a></li>
<li><a href="#how-to-make-a-flat-list-out-of-list-of-lists-score-1764924-in-2019">48: How to make a flat list out of list of lists? (score <span>1764924</span> in 2019)</a></li>
<li><a href="#how-to-print-without-newline-or-space-score-1755449-in-2019">49: How to print without newline or space? (score <span>1755449</span> in 2019)</a></li>
<li><a href="#generate-random-integers-between-0-and-9-score-1740843-in-2018">50: Generate random integers between 0 and 9 (score <span>1740843</span> in 2018)</a></li>
<li><a href="#how-do-i-copy-a-file-in-python-score-1692227-in-2018">51: How do I copy a file in Python? (score <span>1692227</span> in 2018)</a></li>
<li><a href="#how-to-declare-an-array-in-python-score-1679894-in-2014">52: How to declare an array in Python? (score <span>1679894</span> in 2014)</a></li>
<li><a href="#how-to-split-a-string-into-a-list-score-1677830-in-2019">53: How to split a string into a list? (score <span>1677830</span> in 2019)</a></li>
<li><a href="#fastest-way-to-check-if-a-value-exists-in-a-list-score-1650273-in-2019">54: Fastest way to check if a value exists in a list (score <span>1650273</span> in 2019)</a></li>
<li><a href="#how-do-i-merge-two-dictionaries-in-a-single-expression-score-1648573-in-2019">55: How do I merge two dictionaries in a single expression? (score <span>1648573</span> in 2019)</a></li>
<li><a href="#determine-the-type-of-an-object-score-1647494-in-2017">56: Determine the type of an object? (score <span>1647494</span> in 2017)</a></li>
<li><a href="#is-arr.__len__-the-preferred-way-to-get-the-length-of-an-array-in-python-score-1645889-in-2018">57: Is arr.__len__() the preferred way to get the length of an array in Python? (score <span>1645889</span> in 2018)</a></li>
<li><a href="#what-ide-to-use-for-python-score-1633282-in-2014">58: What IDE to use for Python? (score <span>1633282</span> in 2014)</a></li>
<li><a href="#how-can-i-remove-a-trailing-newline-score-1623884-in-2019">59: How can I remove a trailing newline? (score <span>1623884</span> in 2019)</a></li>
<li><a href="#how-to-convert-strings-into-integers-in-python-score-1618410-in-2017">60: How to convert strings into integers in Python? (score <span>1618410</span> in 2017)</a></li>
<li><a href="#is-there-a-simple-way-to-delete-a-list-element-by-value-score-1596938-in-2019">61: Is there a simple way to delete a list element by value? (score <span>1596938</span> in 2019)</a></li>
<li><a href="#python-find-in-list-score-1578399-in-2018">62: Python: Find in list (score <span>1578399</span> in 2018)</a></li>
<li><a href="#manually-raising-throwing-an-exception-in-python-score-1572164-in-2019">63: Manually raising (throwing) an exception in Python (score <span>1572164</span> in 2019)</a></li>
<li><a href="#how-to-access-environment-variable-values-score-1565338-in-2019">64: How to access environment variable values? (score <span>1565338</span> in 2019)</a></li>
<li><a href="#understanding-python-super-with-init-methods-score-1561073-in-2018">65: Understanding Python super() with <strong>init</strong>() methods (score <span>1561073</span> in 2018)</a></li>
<li><a href="#understanding-slice-notation-score-1550739-in-2019">66: Understanding slice notation (score <span>1550739</span> in 2019)</a></li>
<li><a href="#get-list-from-pandas-dataframe-column-headers-score-1535570-in-2019">67: Get list from pandas DataFrame column headers (score <span>1535570</span> in 2019)</a></li>
<li><a href="#find-all-files-in-a-directory-with-extension-.txt-in-python-score-1534437-in-2017">68: Find all files in a directory with extension .txt in Python (score <span>1534437</span> in 2017)</a></li>
<li><a href="#unicodeencodeerror-ascii-codec-cant-encode-character-u0-in-position-20-ordinal-not-in-range128-score-1532253-in-2016">69: UnicodeEncodeError: ‘ascii’ codec can’t encode character u’0’ in position 20: ordinal not in range(128) (score <span>1532253</span> in 2016)</a></li>
</ul>
</nav>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="iterating-over-dictionaries-using-for-loops-score-4065148-in-2017" class="level3">
<h3>1: Iterating over dictionaries using ‘for’ loops (score <a href="https://stackoverflow.com/q/3294889.html">4065148</a> in 2017)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>I am a bit puzzled by the following code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1">d <span class="op">=</span> {<span class="st">&#39;x&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;y&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;z&#39;</span>: <span class="dv">3</span>} </a>
<a class="sourceLine" id="cb1-2" title="2"><span class="cf">for</span> key <span class="kw">in</span> d:</a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="bu">print</span> key, <span class="st">&#39;corresponds to&#39;</span>, d[key]</a></code></pre></div>
<p>What I don’t understand is the <code>key</code> portion. How does Python recognize that it needs only to read the key from the dictionary? Is <code>key</code> a special word in Python? Or is it simply a variable?</p>
</section>
<section id="answer-accepted-score-5011" class="level4">
<h4>Answer accepted (score 5011)</h4>
<p><code>key</code> is just a variable name.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1"><span class="cf">for</span> key <span class="kw">in</span> d:</a></code></pre></div>
<p>will simply loop over the keys in the dictionary, rather than the keys and values. To loop over both key and value you can use the following:</p>
<p>For Python 2.x:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="cf">for</span> key, value <span class="kw">in</span> d.iteritems():</a></code></pre></div>
<p>For Python 3.x:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1"><span class="cf">for</span> key, value <span class="kw">in</span> d.items():</a></code></pre></div>
<p>To test for yourself, change the word <code>key</code> to <code>poop</code>.</p>
<p>
For Python 3.x, <code>iteritems()</code> has been replaced with simply <code>items()</code>, which returns a set-like view backed by the dict, like <code>iteritems()</code> but even better. This is also available in 2.7 as <code>viewitems()</code>.
</p>
<p>The operation <code>items()</code> will work for both 2 and 3, but in 2 it will return a list of the dictionary’s <code>(key, value)</code> pairs, which will not reflect changes to the dict that happen after the <code>items()</code> call. If you want the 2.x behavior in 3.x, you can call <code>list(d.items())</code>.</p>
</section>
<section id="answer-2-score-401" class="level4">
<h4>Answer 2 (score 401)</h4>
<p>It’s not that key is a special word, but that dictionaries implement the iterator protocol. You could do this in your class, e.g. see <a href="https://stackoverflow.com/questions/19151/build-a-basic-python-iterator/24377#24377">this question</a> for how to build class iterators.</p>
<p>In the case of dictionaries, it’s implemented at the C level. The details are available in <a href="http://www.python.org/dev/peps/pep-0234/" rel="noreferrer">PEP 234</a>. In particular, the section titled “Dictionary Iterators”:</p>
<blockquote>
<ul>
<li>
<p>
Dictionaries implement a tp_iter slot that returns an efficient iterator that iterates over the keys of the dictionary. […] This means that we can write
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1"><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">dict</span>: ...</a></code></pre></div>
<p>which is equivalent to, but much faster than</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1"><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">dict</span>.keys(): ...</a></code></pre></div>
<p>
as long as the restriction on modifications to the dictionary (either by the loop or by another thread) are not violated.
</p>
</li>
<li>
<p>
Add methods to dictionaries that return different kinds of iterators explicitly:
</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1"><span class="cf">for</span> key <span class="kw">in</span> <span class="bu">dict</span>.iterkeys(): ...</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="cf">for</span> value <span class="kw">in</span> <span class="bu">dict</span>.itervalues(): ...</a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="cf">for</span> key, value <span class="kw">in</span> <span class="bu">dict</span>.iteritems(): ...</a></code></pre></div>
<p>
This means that <code>for x in dict</code> is shorthand for <code>for x in dict.iterkeys()</code>.
</p>
</li>
</ul>
</blockquote>
<p>In Python 3, <code>dict.iterkeys()</code>, <code>dict.itervalues()</code> and <code>dict.iteritems()</code> are no longer supported. Use <code>dict.keys()</code>, <code>dict.values()</code> and <code>dict.items()</code> instead.</p>
</section>
<section id="answer-3-score-189" class="level4">
<h4>Answer 3 (score 189)</h4>
<p>Iterating over a <code>dict</code> iterates through its keys in no particular order, as you can see here:</p>
<p>Edit: (This is <strong>no longer the case in <a href="https://stackoverflow.com/questions/39980323/dictionaries-are-ordered-in-python-3-6">Python3.6</a></strong>, but note that it’s <strong>not guaranteed</strong> behaviour yet)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> d <span class="op">=</span> {<span class="st">&#39;x&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;y&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;z&#39;</span>: <span class="dv">3</span>} </a>
<a class="sourceLine" id="cb8-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">list</span>(d)</a>
<a class="sourceLine" id="cb8-3" title="3">[<span class="st">&#39;y&#39;</span>, <span class="st">&#39;x&#39;</span>, <span class="st">&#39;z&#39;</span>]</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> d.keys()</a>
<a class="sourceLine" id="cb8-5" title="5">[<span class="st">&#39;y&#39;</span>, <span class="st">&#39;x&#39;</span>, <span class="st">&#39;z&#39;</span>]</a></code></pre></div>
<p>For your example, it is a better idea to use <code>dict.items()</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> d.items()</a>
<a class="sourceLine" id="cb9-2" title="2">[(<span class="st">&#39;y&#39;</span>, <span class="dv">2</span>), (<span class="st">&#39;x&#39;</span>, <span class="dv">1</span>), (<span class="st">&#39;z&#39;</span>, <span class="dv">3</span>)]</a></code></pre></div>
<p>This gives you a list of tuples. When you loop over them like this, each tuple is unpacked into <code>k</code> and <code>v</code> automatically:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1"><span class="cf">for</span> k,v <span class="kw">in</span> d.items():</a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="bu">print</span>(k, <span class="st">&#39;corresponds to&#39;</span>, v)</a></code></pre></div>
<p>Using <code>k</code> and <code>v</code> as variable names when looping over a <code>dict</code> is quite common if the body of the loop is only a few lines. For more complicated loops it may be a good idea to use more descriptive names:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" title="1"><span class="cf">for</span> letter, number <span class="kw">in</span> d.items():</a>
<a class="sourceLine" id="cb11-2" title="2">    <span class="bu">print</span>(letter, <span class="st">&#39;corresponds to&#39;</span>, number)</a></code></pre></div>
<p>It’s a good idea to get into the habit of using format strings:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" title="1"><span class="cf">for</span> letter, number <span class="kw">in</span> d.items():</a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{0}</span><span class="st"> corresponds to </span><span class="sc">{1}</span><span class="st">&#39;</span>.<span class="bu">format</span>(letter, number))</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="does-python-have-a-string-contains-substring-method-score-3792442-in-2017" class="level3">
<h3>2: Does Python have a string ‘contains’ substring method? (score <a href="https://stackoverflow.com/q/3437059.html">3792442</a> in 2017)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>I’m looking for a <code>string.contains</code> or <code>string.indexof</code> method in Python.</p>
<p>I want to do:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" title="1"><span class="cf">if</span> <span class="kw">not</span> somestring.contains(<span class="st">&quot;blah&quot;</span>):</a>
<a class="sourceLine" id="cb13-2" title="2">   <span class="cf">continue</span></a></code></pre></div>
</section>
<section id="answer-accepted-score-5757" class="level4">
<h4>Answer accepted (score 5757)</h4>
<p>You can use the <a href="https://docs.python.org/reference/expressions.html#membership-test-details" rel="noreferrer"><code>in</code> operator</a>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" title="1"><span class="cf">if</span> <span class="st">&quot;blah&quot;</span> <span class="kw">not</span> <span class="kw">in</span> somestring: </a>
<a class="sourceLine" id="cb14-2" title="2">    <span class="cf">continue</span></a></code></pre></div>
</section>
<section id="answer-2-score-601" class="level4">
<h4>Answer 2 (score 601)</h4>
<p>If it’s just a substring search you can use <code>string.find(&quot;substring&quot;)</code>.</p>
<p>You do have to be a little careful with <a href="https://docs.python.org/library/stdtypes.html#str.find" rel="noreferrer"><code>find</code></a>, <a href="https://docs.python.org/library/stdtypes.html#str.index" rel="noreferrer"><code>index</code></a>, and <a href="https://docs.python.org/reference/expressions.html#membership-test-operations" rel="noreferrer"><code>in</code></a> though, as they are substring searches. In other words, this:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" title="1">s <span class="op">=</span> <span class="st">&quot;This be a string&quot;</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="cf">if</span> s.find(<span class="st">&quot;is&quot;</span>) <span class="op">==</span> <span class="dv">-1</span>:</a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="bu">print</span> <span class="st">&quot;No &#39;is&#39; here!&quot;</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb15-5" title="5">    <span class="bu">print</span> <span class="st">&quot;Found &#39;is&#39; in the string.&quot;</span></a></code></pre></div>
<p>It would print <code>Found 'is' in the string.</code> Similarly, <code>if &quot;is&quot; in s:</code> would evaluate to <code>True</code>. This may or may not be what you want.</p>
</section>
<section id="answer-3-score-161" class="level4">
<h4>Answer 3 (score 161)</h4>
<p><code>if needle in haystack:</code> is the normal use, as <span class="citation" data-cites="Michael">@Michael</span> says – it relies on the <a href="https://docs.python.org/reference/expressions.html#membership-test-details" rel="noreferrer"><code>in</code></a> operator, more readable and faster than a method call.</p>
<p>If you truly need a method instead of an operator (e.g. to do some weird <code>key=</code> for a very peculiar sort…?), that would be <a href="https://docs.python.org/reference/datamodel.html#object.__contains__" rel="noreferrer"><code>'haystack'.__contains__</code></a>. But since your example is for use in an <code>if</code>, I guess you don’t really mean what you say;-). It’s not good form (nor readable, nor efficient) to use special methods directly – they’re meant to be used, instead, through the operators and builtins that delegate to them.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-check-whether-a-file-exists-without-exceptions-score-3681360-in-2018" class="level3">
<h3>3: How do I check whether a file exists without exceptions? (score <a href="https://stackoverflow.com/q/82831.html">3681360</a> in 2018)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>How do I see if a file exists or not, without using the <a href="https://docs.python.org/3.6/reference/compound_stmts.html#try" rel="noreferrer"><code>try</code></a> statement?</p>
</section>
<section id="answer-2-score-4830" class="level4">
<h4>Answer 2 (score 4830)</h4>
<p>If the reason you’re checking is so you can do something like <code>if file_exists: open_it()</code>, it’s safer to use a <code>try</code> around the attempt to open it. Checking and then opening risks the file being deleted or moved or something between when you check and when you try to open it.</p>
<p>If you’re not planning to open the file immediately, you can use <a href="https://docs.python.org/library/os.path.html#os.path.isfile" rel="noreferrer"><code>os.path.isfile</code></a></p>
<blockquote>
Return <code>True</code> if path is an existing regular file. This follows symbolic links, so both <a href="https://docs.python.org/library/os.path.html#os.path.islink" rel="noreferrer">islink()</a> and <a href="https://docs.python.org/library/os.path.html#os.path.isfile" rel="noreferrer">isfile()</a> can be true for the same path.
</blockquote>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" title="1"><span class="im">import</span> os.path</a>
<a class="sourceLine" id="cb16-2" title="2">os.path.isfile(fname) </a></code></pre></div>
<p>if you need to be sure it’s a file.</p>
<p>Starting with Python 3.4, the <a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.is_file" rel="noreferrer"><code>pathlib</code> module</a> offers an object-oriented approach (backported to <code>pathlib2</code> in Python 2.7):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" title="1"><span class="im">from</span> pathlib <span class="im">import</span> Path</a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3">my_file <span class="op">=</span> Path(<span class="st">&quot;/path/to/file&quot;</span>)</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="cf">if</span> my_file.is_file():</a>
<a class="sourceLine" id="cb17-5" title="5">    <span class="co"># file exists</span></a></code></pre></div>
<p>To check a directory, do:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb18-1" title="1"><span class="cf">if</span> my_file.is_dir():</a>
<a class="sourceLine" id="cb18-2" title="2">    <span class="co"># directory exists</span></a></code></pre></div>
<p>To check whether a <code>Path</code> object exists independently of whether is it a file or directory, use <code>exists()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb19-1" title="1"><span class="cf">if</span> my_file.exists():</a>
<a class="sourceLine" id="cb19-2" title="2">    <span class="co"># path exists</span></a></code></pre></div>
<p>You can also use <code>resolve(strict=True)</code> in a <code>try</code> block:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb20-1" title="1"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb20-2" title="2">    my_abs_path <span class="op">=</span> my_file.resolve(strict<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb20-3" title="3"><span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</a>
<a class="sourceLine" id="cb20-4" title="4">    <span class="co"># doesn&#39;t exist</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb20-6" title="6">    <span class="co"># exists</span></a></code></pre></div>
</section>
<section id="answer-3-score-1993" class="level4">
<h4>Answer 3 (score 1993)</h4>
<p>You have the <a href="https://docs.python.org/2/library/os.path.html#os.path.exists" rel="noreferrer"><code>os.path.exists</code></a> function:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb21-1" title="1"><span class="im">import</span> os.path</a>
<a class="sourceLine" id="cb21-2" title="2">os.path.exists(file_path)</a></code></pre></div>
<p>This returns <code>True</code> for both files and directories but you can instead use</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb22-1" title="1">os.path.isfile(file_path)</a></code></pre></div>
<p>to test if it’s a file specifically. It follows symlinks.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-parse-a-string-to-a-float-or-int-score-3665519-in-2019" class="level3">
<h3>4: How do I parse a string to a float or int? (score <a href="https://stackoverflow.com/q/379906.html">3665519</a> in 2019)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>In Python, how can I parse a numeric string like <code>&quot;545.2222&quot;</code> to its corresponding float value, <code>545.2222</code>? Or parse the string <code>&quot;31&quot;</code> to an integer, <code>31</code>?</p>
<p>I just want to know how to parse a <em>float</em> <code>str</code> to a <code>float</code>, and (separately) an <em>int</em> <code>str</code> to an <code>int</code>.</p>
</section>
<section id="answer-accepted-score-2443" class="level4">
<h4>Answer accepted (score 2443)</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb23-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> <span class="st">&quot;545.2222&quot;</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">float</span>(a)</a>
<a class="sourceLine" id="cb23-3" title="3"><span class="fl">545.22220000000004</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">int</span>(<span class="bu">float</span>(a))</a>
<a class="sourceLine" id="cb23-5" title="5"><span class="dv">545</span></a></code></pre></div>
</section>
<section id="answer-2-score-487" class="level4">
<h4>Answer 2 (score 487)</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">def</span> num(s):</a>
<a class="sourceLine" id="cb24-2" title="2">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb24-3" title="3">        <span class="cf">return</span> <span class="bu">int</span>(s)</a>
<a class="sourceLine" id="cb24-4" title="4">    <span class="cf">except</span> <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb24-5" title="5">        <span class="cf">return</span> <span class="bu">float</span>(s)</a></code></pre></div>
</section>
<section id="answer-3-score-477" class="level4">
<h4>Answer 3 (score 477)</h4>
<h5>
Python method to check if a string is a float:
</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">def</span> is_float(value):</a>
<a class="sourceLine" id="cb25-2" title="2">  <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb25-3" title="3">    <span class="bu">float</span>(value)</a>
<a class="sourceLine" id="cb25-4" title="4">    <span class="cf">return</span> <span class="va">True</span></a>
<a class="sourceLine" id="cb25-5" title="5">  <span class="cf">except</span>:</a>
<a class="sourceLine" id="cb25-6" title="6">    <span class="cf">return</span> <span class="va">False</span></a></code></pre></div>
<p>A longer and more accurate name for this function could be: <code>is_convertible_to_float(value)</code></p>
<h5>
What is, and is not a float in <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a> may surprise you:
</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb26-1" title="1">val                   is_float(val) Note</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="op">--------------------</span>  <span class="op">----------</span>   <span class="op">--------------------------------</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="co">&quot;&quot;</span>                    <span class="va">False</span>        Blank string</a>
<a class="sourceLine" id="cb26-4" title="4"><span class="co">&quot;127&quot;</span>                 <span class="va">True</span>         Passed string</a>
<a class="sourceLine" id="cb26-5" title="5"><span class="va">True</span>                  <span class="va">True</span>         Pure sweet Truth</a>
<a class="sourceLine" id="cb26-6" title="6"><span class="co">&quot;True&quot;</span>                <span class="va">False</span>        Vile contemptible lie</a>
<a class="sourceLine" id="cb26-7" title="7"><span class="va">False</span>                 <span class="va">True</span>         So false it becomes true</a>
<a class="sourceLine" id="cb26-8" title="8"><span class="co">&quot;123.456&quot;</span>             <span class="va">True</span>         Decimal</a>
<a class="sourceLine" id="cb26-9" title="9"><span class="co">&quot;      -127    &quot;</span>      <span class="va">True</span>         Spaces trimmed</a>
<a class="sourceLine" id="cb26-10" title="10"><span class="co">&quot;</span><span class="ch">\t\n</span><span class="co">12</span><span class="ch">\r\n</span><span class="co">&quot;</span>          <span class="va">True</span>         whitespace ignored</a>
<a class="sourceLine" id="cb26-11" title="11"><span class="co">&quot;NaN&quot;</span>                 <span class="va">True</span>         Not a number</a>
<a class="sourceLine" id="cb26-12" title="12"><span class="co">&quot;NaNanananaBATMAN&quot;</span>    <span class="va">False</span>        I am Batman</a>
<a class="sourceLine" id="cb26-13" title="13"><span class="co">&quot;-iNF&quot;</span>                <span class="va">True</span>         Negative infinity</a>
<a class="sourceLine" id="cb26-14" title="14"><span class="co">&quot;123.E4&quot;</span>              <span class="va">True</span>         Exponential notation</a>
<a class="sourceLine" id="cb26-15" title="15"><span class="co">&quot;.1&quot;</span>                  <span class="va">True</span>         mantissa only</a>
<a class="sourceLine" id="cb26-16" title="16"><span class="co">&quot;1,234&quot;</span>               <span class="va">False</span>        Commas gtfo</a>
<a class="sourceLine" id="cb26-17" title="17"><span class="co">u&#39;</span><span class="ch">\x30</span><span class="co">&#39;</span>               <span class="va">True</span>         Unicode <span class="kw">is</span> fine.</a>
<a class="sourceLine" id="cb26-18" title="18"><span class="co">&quot;NULL&quot;</span>                <span class="va">False</span>        Null <span class="kw">is</span> <span class="kw">not</span> special</a>
<a class="sourceLine" id="cb26-19" title="19"><span class="bn">0x3fade</span>               <span class="va">True</span>         Hexadecimal</a>
<a class="sourceLine" id="cb26-20" title="20"><span class="co">&quot;6e7777777777777&quot;</span>     <span class="va">True</span>         Shrunk to infinity</a>
<a class="sourceLine" id="cb26-21" title="21"><span class="co">&quot;1.797693e+308&quot;</span>       <span class="va">True</span>         This <span class="kw">is</span> <span class="bu">max</span> value</a>
<a class="sourceLine" id="cb26-22" title="22"><span class="co">&quot;infinity&quot;</span>            <span class="va">True</span>         Same <span class="im">as</span> inf</a>
<a class="sourceLine" id="cb26-23" title="23"><span class="co">&quot;infinityandBEYOND&quot;</span>   <span class="va">False</span>        Extra characters wreck it</a>
<a class="sourceLine" id="cb26-24" title="24"><span class="co">&quot;12.34.56&quot;</span>            <span class="va">False</span>        Only one dot allowed</a>
<a class="sourceLine" id="cb26-25" title="25"><span class="co">u&#39;四&#39;</span>                 <span class="va">False</span>        Japanese <span class="st">&#39;4&#39;</span> <span class="kw">is</span> <span class="kw">not</span> a <span class="bu">float</span>.</a>
<a class="sourceLine" id="cb26-26" title="26"><span class="co">&quot;#56&quot;</span>                 <span class="va">False</span>        Pound sign</a>
<a class="sourceLine" id="cb26-27" title="27"><span class="co">&quot;56%&quot;</span>                 <span class="va">False</span>        Percent of what?</a>
<a class="sourceLine" id="cb26-28" title="28"><span class="co">&quot;0E0&quot;</span>                 <span class="va">True</span>         Exponential, move dot <span class="dv">0</span> places</a>
<a class="sourceLine" id="cb26-29" title="29"><span class="dv">0</span><span class="op">**</span><span class="dv">0</span>                  <span class="va">True</span>         <span class="dv">0</span>___0  Exponentiation</a>
<a class="sourceLine" id="cb26-30" title="30"><span class="co">&quot;-5e-5&quot;</span>               <span class="va">True</span>         Raise to a negative number</a>
<a class="sourceLine" id="cb26-31" title="31"><span class="co">&quot;+1e1&quot;</span>                <span class="va">True</span>         Plus <span class="kw">is</span> OK <span class="cf">with</span> exponent</a>
<a class="sourceLine" id="cb26-32" title="32"><span class="co">&quot;+1e1^5&quot;</span>              <span class="va">False</span>        Fancy exponent <span class="kw">not</span> interpreted</a>
<a class="sourceLine" id="cb26-33" title="33"><span class="co">&quot;+1e1.3&quot;</span>              <span class="va">False</span>        No decimals <span class="kw">in</span> exponent</a>
<a class="sourceLine" id="cb26-34" title="34"><span class="co">&quot;-+1&quot;</span>                 <span class="va">False</span>        Make up your mind</a>
<a class="sourceLine" id="cb26-35" title="35"><span class="co">&quot;(1)&quot;</span>                 <span class="va">False</span>        Parenthesis <span class="kw">is</span> bad</a></code></pre></div>
<p>You think you know what numbers are? You are not so good as you think! Not big surprise.</p>
<h5>
Don’t use this code on life-critical software!
</h2>
<p>Catching broad exceptions this way, killing canaries and gobbling the exception creates a tiny chance that a valid float as string will return false. The <code>float(...)</code> line of code can failed for any of a thousand reasons that have nothing to do with the contents of the string. But if you’re writing life-critical software in a duck-typing prototype language like Python, then you’ve got much larger problems.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-list-all-files-of-a-directory-score-3621699-in-2017" class="level3">
<h3>5: How do I list all files of a directory? (score <a href="https://stackoverflow.com/q/3207219.html">3621699</a> in 2017)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<p>How can I list all files of a directory in Python and add them to a <code>list</code>?</p>
</section>
<section id="answer-2-score-3664" class="level4">
<h4>Answer 2 (score 3664)</h4>
<p><a href="https://docs.python.org/2/library/os.html#os.listdir" rel="noreferrer" title="os.listdir"><code>os.listdir()</code></a> will get you everything that’s in a directory - files and directories.</p>
<p>If you want <em>just</em> files, you could either filter this down using <a href="https://docs.python.org/2/library/os.path.html#module-os.path" rel="noreferrer"><code>os.path</code></a>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb27-1" title="1"><span class="im">from</span> os <span class="im">import</span> listdir</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="im">from</span> os.path <span class="im">import</span> isfile, join</a>
<a class="sourceLine" id="cb27-3" title="3">onlyfiles <span class="op">=</span> [f <span class="cf">for</span> f <span class="kw">in</span> listdir(mypath) <span class="cf">if</span> isfile(join(mypath, f))]</a></code></pre></div>
<p>or you could use <a href="https://docs.python.org/2/library/os.html#os.walk" rel="noreferrer" title="os.walk"><code>os.walk()</code></a> which will yield two lists for each directory it visits - splitting into files and dirs for you. If you only want the top directory you can just break the first time it yields</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb28-1" title="1"><span class="im">from</span> os <span class="im">import</span> walk</a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3">f <span class="op">=</span> []</a>
<a class="sourceLine" id="cb28-4" title="4"><span class="cf">for</span> (dirpath, dirnames, filenames) <span class="kw">in</span> walk(mypath):</a>
<a class="sourceLine" id="cb28-5" title="5">    f.extend(filenames)</a>
<a class="sourceLine" id="cb28-6" title="6">    <span class="cf">break</span></a></code></pre></div>
</section>
<section id="answer-3-score-1475" class="level4">
<h4>Answer 3 (score 1475)</h4>
<p>I prefer using the <a href="https://docs.python.org/library/glob.html" rel="noreferrer"><code>glob</code></a> module, as it does pattern matching and expansion.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb29-1" title="1"><span class="im">import</span> glob</a>
<a class="sourceLine" id="cb29-2" title="2"><span class="bu">print</span>(glob.glob(<span class="st">&quot;/home/adam/*.txt&quot;</span>))</a></code></pre></div>
<p>It will return a list with the queried files:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb30-1" title="1">[<span class="st">&#39;/home/adam/file1.txt&#39;</span>, <span class="st">&#39;/home/adam/file2.txt&#39;</span>, .... ]</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="finding-the-index-of-an-item-given-a-list-containing-it-in-python-score-3448930-in-2019" class="level3">
<h3>6: Finding the index of an item given a list containing it in Python (score <a href="https://stackoverflow.com/q/176918.html">3448930</a> in 2019)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p>For a list <code>[&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]</code> and an item in the list <code>&quot;bar&quot;</code>, how do I get its index (1) in Python?</p>
</section>
<section id="answer-accepted-score-4050" class="level4">
<h4>Answer accepted (score 4050)</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb31-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> [<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>].index(<span class="st">&quot;bar&quot;</span>)</a>
<a class="sourceLine" id="cb31-2" title="2"><span class="dv">1</span></a></code></pre></div>
<p>Reference: <a href="http://docs.python.org/2/tutorial/datastructures.html#more-on-lists" rel="noreferrer">Data Structures &gt; More on Lists</a></p>
<h5>
Caveats follow
</h1>
<p>Note that while this is perhaps the cleanest way to answer the question <em>as asked</em>, <code>index</code> is a rather weak component of the <code>list</code> API, and I can’t remember the last time I used it in anger. It’s been pointed out to me in the comments that because this answer is heavily referenced, it should be made more complete. Some caveats about <code>list.index</code> follow. It is probably worth initially taking a look at the docstring for it:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb32-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="bu">list</span>.index.__doc__)</a>
<a class="sourceLine" id="cb32-2" title="2">L.index(value, [start, [stop]]) <span class="op">-&amp;</span>gt<span class="op">;</span> integer <span class="op">--</span> <span class="cf">return</span> first index of value.</a>
<a class="sourceLine" id="cb32-3" title="3">Raises <span class="pp">ValueError</span> <span class="cf">if</span> the value <span class="kw">is</span> <span class="kw">not</span> present.</a></code></pre></div>
<h5>
Linear time-complexity in list length
</h2>
<p>An <code>index</code> call checks every element of the list in order, until it finds a match. If your list is long, and you don’t know roughly where in the list it occurs, this search could become a bottleneck. In that case, you should consider a different data structure. Note that if you know roughly where to find the match, you can give <code>index</code> a hint. For instance, in this snippet, <code>l.index(999_999, 999_990, 1_000_000)</code> is roughly five orders of magnitude faster than straight <code>l.index(999_999)</code>, because the former only has to search 10 entries, while the latter searches a million:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb33-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> timeit</a>
<a class="sourceLine" id="cb33-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> timeit.timeit(<span class="st">&#39;l.index(999_999)&#39;</span>, setup<span class="op">=</span><span class="st">&#39;l = list(range(0, 1_000_000))&#39;</span>, number<span class="op">=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb33-3" title="3"><span class="fl">9.356267921015387</span></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> timeit.timeit(<span class="st">&#39;l.index(999_999, 999_990, 1_000_000)&#39;</span>, setup<span class="op">=</span><span class="st">&#39;l = list(range(0, 1_000_000))&#39;</span>, number<span class="op">=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb33-5" title="5"><span class="fl">0.0004404920036904514</span></a></code></pre></div>
<h5>
Only returns the index of the <em>first match</em> to its argument
</h2>
<p>A call to <code>index</code> searches through the list in order until it finds a match, and <em>stops there.</em> If you expect to need indices of more matches, you should use a list comprehension, or generator expression.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb34-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> [<span class="dv">1</span>, <span class="dv">1</span>].index(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="dv">0</span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> [i <span class="cf">for</span> i, e <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>]) <span class="cf">if</span> e <span class="op">==</span> <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb34-4" title="4">[<span class="dv">0</span>, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb34-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> g <span class="op">=</span> (i <span class="cf">for</span> i, e <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>]) <span class="cf">if</span> e <span class="op">==</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb34-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">next</span>(g)</a>
<a class="sourceLine" id="cb34-7" title="7"><span class="dv">0</span></a>
<a class="sourceLine" id="cb34-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">next</span>(g)</a>
<a class="sourceLine" id="cb34-9" title="9"><span class="dv">2</span></a></code></pre></div>
<p>Most places where I once would have used <code>index</code>, I now use a list comprehension or generator expression because they’re more generalizable. So if you’re considering reaching for <code>index</code>, take a look at these excellent python features.</p>
<h5>
Throws if element not present in list
</h2>
<p>A call to <code>index</code> results in a <code>ValueError</code> if the item’s not present.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb35-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> [<span class="dv">1</span>, <span class="dv">1</span>].index(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb35-2" title="2">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb35-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="pp">ValueError</span>: <span class="dv">2</span> <span class="kw">is</span> <span class="kw">not</span> <span class="kw">in</span> <span class="bu">list</span></a></code></pre></div>
<p>If the item might not be present in the list, you should either</p>
<ol>
<li>
Check for it first with <code>item in my_list</code> (clean, readable approach), or
</li>
<li>
Wrap the <code>index</code> call in a <code>try/except</code> block which catches <code>ValueError</code> (probably faster, at least when the list to search is long, and the item is usually present.)
</li>
</ol>
</section>
<section id="answer-2-score-861" class="level4">
<h4>Answer 2 (score 861)</h4>
<p>One thing that is really helpful in learning Python is to use the interactive help function:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb36-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">help</span>([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>])</a>
<a class="sourceLine" id="cb36-2" title="2">Help on <span class="bu">list</span> <span class="bu">object</span>:</a>
<a class="sourceLine" id="cb36-3" title="3"></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="kw">class</span> <span class="bu">list</span>(<span class="bu">object</span>)</a>
<a class="sourceLine" id="cb36-5" title="5"> ...</a>
<a class="sourceLine" id="cb36-6" title="6"></a>
<a class="sourceLine" id="cb36-7" title="7"> <span class="op">|</span></a>
<a class="sourceLine" id="cb36-8" title="8"> <span class="op">|</span>  index(...)</a>
<a class="sourceLine" id="cb36-9" title="9"> <span class="op">|</span>      L.index(value, [start, [stop]]) <span class="op">-&amp;</span>gt<span class="op">;</span> integer <span class="op">--</span> <span class="cf">return</span> first index of value</a>
<a class="sourceLine" id="cb36-10" title="10"> <span class="op">|</span></a></code></pre></div>
<p>which will often lead you to the method you are looking for.</p>
</section>
<section id="answer-3-score-511" class="level4">
<h4>Answer 3 (score 511)</h4>
<p>The majority of answers explain how to find <strong>a single index</strong>, but their methods do not return multiple indexes if the item is in the list multiple times. Use <a href="https://docs.python.org/3.6/library/functions.html#enumerate" rel="noreferrer"><code>enumerate()</code></a>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb37-1" title="1"><span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]):</a>
<a class="sourceLine" id="cb37-2" title="2">    <span class="cf">if</span> j <span class="op">==</span> <span class="st">&#39;bar&#39;</span>:</a>
<a class="sourceLine" id="cb37-3" title="3">        <span class="bu">print</span>(i)</a></code></pre></div>
<p>The <code>index()</code> function only returns the first occurrence, while <code>enumerate()</code> returns all occurrences.</p>
<p>As a list comprehension:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb38-1" title="1">[i <span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]) <span class="cf">if</span> j <span class="op">==</span> <span class="st">&#39;bar&#39;</span>]</a></code></pre></div>
<hr>
<p>Here’s also another small solution with <a href="http://docs.python.org/2/library/itertools.html#itertools.count" rel="noreferrer"><code>itertools.count()</code></a> (which is pretty much the same approach as enumerate):</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb39-1" title="1"><span class="im">from</span> itertools <span class="im">import</span> izip <span class="im">as</span> <span class="bu">zip</span>, count <span class="co"># izip for maximum efficiency</span></a>
<a class="sourceLine" id="cb39-2" title="2">[i <span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">zip</span>(count(), [<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]) <span class="cf">if</span> j <span class="op">==</span> <span class="st">&#39;bar&#39;</span>]</a></code></pre></div>
<p>This is more efficient for larger lists than using <code>enumerate()</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb40-1" title="1">$ python <span class="op">-</span>m timeit <span class="op">-</span>s <span class="st">&quot;from itertools import izip as zip, count&quot;</span> <span class="st">&quot;[i for i, j in zip(count(), [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]*500) if j == &#39;bar&#39;]&quot;</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">174</span> usec per loop</a>
<a class="sourceLine" id="cb40-3" title="3">$ python <span class="op">-</span>m timeit <span class="st">&quot;[i for i, j in enumerate([&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]*500) if j == &#39;bar&#39;]&quot;</span></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">196</span> usec per loop</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-read-a-file-line-by-line-into-a-list-score-3366083-in-2018" class="level3">
<h3>7: How to read a file line-by-line into a list? (score <a href="https://stackoverflow.com/q/3277503.html">3366083</a> in 2018)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>How do I read every line of a file in Python and store each line as an element in a list?</p>
<p>I want to read the file line by line and append each line to the end of the list.</p>
</section>
<section id="answer-2-score-2035" class="level4">
<h4>Answer 2 (score 2035)</h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb41-1" title="1"><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> f:</a>
<a class="sourceLine" id="cb41-2" title="2">    content <span class="op">=</span> f.readlines()</a>
<a class="sourceLine" id="cb41-3" title="3"><span class="co"># you may also want to remove whitespace characters like `\n` at the end of each line</span></a>
<a class="sourceLine" id="cb41-4" title="4">content <span class="op">=</span> [x.strip() <span class="cf">for</span> x <span class="kw">in</span> content] </a></code></pre></div>
</section>
<section id="answer-3-score-915" class="level4">
<h4>Answer 3 (score 915)</h4>
<p>See <a href="http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files" rel="noreferrer">Input and Ouput</a>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb42-1" title="1"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;filename&#39;</span>) <span class="im">as</span> f:</a>
<a class="sourceLine" id="cb42-2" title="2">    lines <span class="op">=</span> f.readlines()</a></code></pre></div>
<p>or with stripping the newline character:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb43-1" title="1">lines <span class="op">=</span> [line.rstrip(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>) <span class="cf">for</span> line <span class="kw">in</span> <span class="bu">open</span>(<span class="st">&#39;filename&#39;</span>)]</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="calling-an-external-command-in-python-score-3202147-in-2019" class="level3">
<h3>8: Calling an external command in Python (score <a href="https://stackoverflow.com/q/89228.html">3202147</a> in 2019)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>How do you call an external command (as if I’d typed it at the Unix shell or Windows command prompt) from within a Python script?</p>
</section>
<section id="answer-accepted-score-4312" class="level4">
<h4>Answer accepted (score 4312)</h4>
<p>Look at the <a href="https://docs.python.org/library/subprocess.html" rel="noreferrer">subprocess</a> module in the standard library:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb44-1" title="1"><span class="im">import</span> subprocess</a>
<a class="sourceLine" id="cb44-2" title="2">subprocess.run([<span class="st">&quot;ls&quot;</span>, <span class="st">&quot;-l&quot;</span>])</a></code></pre></div>
<p>The advantage of <code>subprocess</code> vs. <code>system</code> is that it is more flexible (you can get the <code>stdout</code>, <code>stderr</code>, the “real” status code, better error handling, etc…).</p>
<p>The <a href="https://docs.python.org/library/os.html#os.system" rel="noreferrer">official documentation</a> recommends the <code>subprocess</code> module over the alternative <code>os.system()</code>:</p>
<blockquote>
The <code>subprocess</code> module provides more powerful facilities for spawning new processes and retrieving their results; using that module is preferable to using this function [<a href="https://docs.python.org/library/os.html#os.system" rel="noreferrer"><code>os.system()</code></a>].
</blockquote>
<p>The <a href="https://docs.python.org/library/subprocess.html#replacing-older-functions-with-the-subprocess-module" rel="noreferrer">Replacing Older Functions with the subprocess Module</a> section in the <code>subprocess</code> documentation may have some helpful recipes.</p>
<p>For versions of Python before 3.5, use <code>call</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb45-1" title="1"><span class="im">import</span> subprocess</a>
<a class="sourceLine" id="cb45-2" title="2">subprocess.call([<span class="st">&quot;ls&quot;</span>, <span class="st">&quot;-l&quot;</span>])</a></code></pre></div>
</section>
<section id="answer-2-score-2852" class="level4">
<h4>Answer 2 (score 2852)</h4>
<p>Here’s a summary of the ways to call external programs and the advantages and disadvantages of each:</p>
<ol>
<li>
<p>
<code>os.system(&quot;some_command with args&quot;)</code> passes the command and arguments to your system’s shell. This is nice because you can actually run multiple commands at once in this manner and set up pipes and input/output redirection. For example:
</p>
<code>python os.system(&quot;some_command &amp;lt; input_file | another_command &amp;gt; output_file&quot;)</code>
</li>
</ol>
<p>However, while this is convenient, you have to manually handle the escaping of shell characters such as spaces, etc. On the other hand, this also lets you run commands which are simply shell commands and not actually external programs. See <a href="https://docs.python.org/2/library/os.html#os.system" rel="noreferrer">the documentation</a>.</p>
<ol start="2">
<li>
<p>
<code>stream = os.popen(&quot;some_command with args&quot;)</code> will do the same thing as <code>os.system</code> except that it gives you a file-like object that you can use to access standard input/output for that process. There are 3 other variants of popen that all handle the i/o slightly differently. If you pass everything as a string, then your command is passed to the shell; if you pass them as a list then you don’t need to worry about escaping anything. See <a href="https://docs.python.org/2/library/os.html#os.popen" rel="noreferrer">the documentation</a>.
</p>
</li>
<li>
<p>
The <code>Popen</code> class of the <code>subprocess</code> module. This is intended as a replacement for <code>os.popen</code> but has the downside of being slightly more complicated by virtue of being so comprehensive. For example, you’d say:
</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb46-1" title="1"><span class="bu">print</span> subprocess.Popen(<span class="st">&quot;echo Hello World&quot;</span>, shell<span class="op">=</span><span class="va">True</span>, stdout<span class="op">=</span>subprocess.PIPE).stdout.read()</a></code></pre></div>
<p>instead of:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb47-1" title="1"><span class="bu">print</span> os.popen(<span class="st">&quot;echo Hello World&quot;</span>).read()</a></code></pre></div>
but it is nice to have all of the options there in one unified class instead of 4 different popen functions. See <a href="https://docs.python.org/2/library/subprocess.html#popen-constructor" rel="noreferrer">the documentation</a>.
</li>
<li>
<p>
The <code>call</code> function from the <code>subprocess</code> module. This is basically just like the <code>Popen</code> class and takes all of the same arguments, but it simply waits until the command completes and gives you the return code. For example:
</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb48-1" title="1">return_code <span class="op">=</span> subprocess.call(<span class="st">&quot;echo Hello World&quot;</span>, shell<span class="op">=</span><span class="va">True</span>)  </a></code></pre></div>
See <a href="https://docs.python.org/2/library/subprocess.html#subprocess.call" rel="noreferrer">the documentation</a>.
</li>
<li>
<p>
If you’re on Python 3.5 or later, you can use the new <a href="https://docs.python.org/3.5/library/subprocess.html#subprocess.run" rel="noreferrer"><code>subprocess.run</code></a> function, which is a lot like the above but even more flexible and returns a <a href="https://docs.python.org/3.5/library/subprocess.html#subprocess.CompletedProcess" rel="noreferrer"><code>CompletedProcess</code></a> object when the command finishes executing.
</p>
</li>
<li>
<p>
The os module also has all of the fork/exec/spawn functions that you’d have in a C program, but I don’t recommend using them directly.
</p>
</li>
</ol>
<p>The <code>subprocess</code> module should probably be what you use.</p>
<p>Finally please be aware that for all methods where you pass the final command to be executed by the shell as a string and you are responsible for escaping it. <strong>There are serious security implications</strong> if any part of the string that you pass can not be fully trusted. For example, if a user is entering some/any part of the string. If you are unsure, only use these methods with constants. To give you a hint of the implications consider this code:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb49-1" title="1"><span class="bu">print</span> subprocess.Popen(<span class="st">&quot;echo </span><span class="sc">%s</span><span class="st"> &quot;</span> <span class="op">%</span> user_input, stdout<span class="op">=</span>PIPE).stdout.read()</a></code></pre></div>
<p>and imagine that the user enters something “my mama didnt love me &amp;&amp; rm -rf /” which could erase the whole filesystem.</p>
</section>
<section id="answer-3-score-318" class="level4">
<h4>Answer 3 (score 318)</h4>
<p>Typical implementation:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb50-1" title="1"><span class="im">import</span> subprocess</a>
<a class="sourceLine" id="cb50-2" title="2"></a>
<a class="sourceLine" id="cb50-3" title="3">p <span class="op">=</span> subprocess.Popen(<span class="st">&#39;ls&#39;</span>, shell<span class="op">=</span><span class="va">True</span>, stdout<span class="op">=</span>subprocess.PIPE, stderr<span class="op">=</span>subprocess.STDOUT)</a>
<a class="sourceLine" id="cb50-4" title="4"><span class="cf">for</span> line <span class="kw">in</span> p.stdout.readlines():</a>
<a class="sourceLine" id="cb50-5" title="5">    <span class="bu">print</span> line,</a>
<a class="sourceLine" id="cb50-6" title="6">retval <span class="op">=</span> p.wait()</a></code></pre></div>
<p>You are free to do what you want with the <code>stdout</code> data in the pipe. In fact, you can simply omit those parameters (<code>stdout=</code> and <code>stderr=</code>) and it’ll behave like <code>os.system()</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="converting-integer-to-string-score-3197810-in-2019" class="level3">
<h3>9: Converting integer to string? (score <a href="https://stackoverflow.com/q/961632.html">3197810</a> in 2019)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>I want to convert an integer to a string in Python. I am typecasting it in vain:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb51-1" title="1">d <span class="op">=</span> <span class="dv">15</span></a>
<a class="sourceLine" id="cb51-2" title="2">d.<span class="bu">str</span>()</a></code></pre></div>
<p>When I try to convert it to string, it’s showing an error like <code>int</code> doesn’t have any attribute called <code>str</code>.</p>
</section>
<section id="answer-accepted-score-1966" class="level4">
<h4>Answer accepted (score 1966)</h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb52-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">str</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb52-2" title="2"><span class="co">&#39;10&#39;</span></a>
<a class="sourceLine" id="cb52-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">int</span>(<span class="st">&#39;10&#39;</span>)</a>
<a class="sourceLine" id="cb52-4" title="4"><span class="dv">10</span></a></code></pre></div>
<p>Links to the documentation:</p>
<ul>
<li>
<a href="https://docs.python.org/2/library/functions.html#int" rel="noreferrer"><code>int()</code></a>
</li>
<li>
<a href="https://docs.python.org/2/library/functions.html#str" rel="noreferrer"><code>str()</code></a>
</li>
</ul>
<p>Conversion to a string is done with the builtin <code>str()</code> function, which basically calls the <a href="https://docs.python.org/3/reference/datamodel.html#object.__str__" rel="noreferrer"><code>__str__()</code></a> method of its parameter.</p>
</section>
<section id="answer-2-score-112" class="level4">
<h4>Answer 2 (score 112)</h4>
<p>Try this:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb53-1" title="1"><span class="bu">str</span>(i)</a></code></pre></div>
</section>
<section id="answer-3-score-54" class="level4">
<h4>Answer 3 (score 54)</h4>
<p>There is not typecast and no type coercion in Python. You have to convert your variable in an explicit way.</p>
<p>To convert an object in string you use the <code>str()</code> function. It works with any object that has a method called <code>__str__()</code> defined. In fact</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb54-1" title="1"><span class="bu">str</span>(a)</a></code></pre></div>
<p>is equivalent to</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb55-1" title="1">a.<span class="fu">__str__</span>()</a></code></pre></div>
<p>The same if you want to convert something to int, float, etc.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="add-new-keys-to-a-dictionary-score-3143556-in-2019" class="level3">
<h3>10: Add new keys to a dictionary? (score <a href="https://stackoverflow.com/q/1024847.html">3143556</a> in 2019)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>Is it possible to add a key to a Python dictionary after it has been created? It doesn’t seem to have an <code>.add()</code> method.</p>
</section>
<section id="answer-accepted-score-3128" class="level4">
<h4>Answer accepted (score 3128)</h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb56-1" title="1">d <span class="op">=</span> {<span class="st">&#39;key&#39;</span>:<span class="st">&#39;value&#39;</span>}</a>
<a class="sourceLine" id="cb56-2" title="2"><span class="bu">print</span>(d)</a>
<a class="sourceLine" id="cb56-3" title="3"><span class="co"># {&#39;key&#39;: &#39;value&#39;}</span></a>
<a class="sourceLine" id="cb56-4" title="4">d[<span class="st">&#39;mynewkey&#39;</span>] <span class="op">=</span> <span class="st">&#39;mynewvalue&#39;</span></a>
<a class="sourceLine" id="cb56-5" title="5"><span class="bu">print</span>(d)</a>
<a class="sourceLine" id="cb56-6" title="6"><span class="co"># {&#39;mynewkey&#39;: &#39;mynewvalue&#39;, &#39;key&#39;: &#39;value&#39;}</span></a></code></pre></div>
</section>
<section id="answer-2-score-975" class="level4">
<h4>Answer 2 (score 975)</h4>
<p>To add multiple keys simultaneously:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb57-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> {<span class="dv">1</span>:<span class="dv">2</span>}</a>
<a class="sourceLine" id="cb57-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> x</a>
<a class="sourceLine" id="cb57-3" title="3">{<span class="dv">1</span>: <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb57-4" title="4"></a>
<a class="sourceLine" id="cb57-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> d <span class="op">=</span> {<span class="dv">3</span>:<span class="dv">4</span>, <span class="dv">5</span>:<span class="dv">6</span>, <span class="dv">7</span>:<span class="dv">8</span>}</a>
<a class="sourceLine" id="cb57-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x.update(d)</a>
<a class="sourceLine" id="cb57-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> x</a>
<a class="sourceLine" id="cb57-8" title="8">{<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">5</span>: <span class="dv">6</span>, <span class="dv">7</span>: <span class="dv">8</span>}</a></code></pre></div>
<p>For adding a single key, the accepted answer has less computational overhead.</p>
</section>
<section id="answer-3-score-838" class="level4">
<h4>Answer 3 (score 838)</h4>
<p>I feel like consolidating info about Python dictionaries:</p>
<h5>
Creating an empty dictionary
</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb58-1" title="1">data <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb58-2" title="2"><span class="co"># OR</span></a>
<a class="sourceLine" id="cb58-3" title="3">data <span class="op">=</span> <span class="bu">dict</span>()</a></code></pre></div>
<h5>
Creating a dictionary with initial values
</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb59-1" title="1">data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>:<span class="dv">1</span>,<span class="st">&#39;b&#39;</span>:<span class="dv">2</span>,<span class="st">&#39;c&#39;</span>:<span class="dv">3</span>}</a>
<a class="sourceLine" id="cb59-2" title="2"><span class="co"># OR</span></a>
<a class="sourceLine" id="cb59-3" title="3">data <span class="op">=</span> <span class="bu">dict</span>(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>, c<span class="op">=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb59-4" title="4"><span class="co"># OR</span></a>
<a class="sourceLine" id="cb59-5" title="5">data <span class="op">=</span> {k: v <span class="cf">for</span> k, v <span class="kw">in</span> ((<span class="st">&#39;a&#39;</span>, <span class="dv">1</span>),(<span class="st">&#39;b&#39;</span>,<span class="dv">2</span>),(<span class="st">&#39;c&#39;</span>,<span class="dv">3</span>))}</a></code></pre></div>
<h5>
Inserting/Updating a single value
</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb60-1" title="1">data[<span class="st">&#39;a&#39;</span>]<span class="op">=</span><span class="dv">1</span>  <span class="co"># Updates if &#39;a&#39; exists, else adds &#39;a&#39;</span></a>
<a class="sourceLine" id="cb60-2" title="2"><span class="co"># OR</span></a>
<a class="sourceLine" id="cb60-3" title="3">data.update({<span class="st">&#39;a&#39;</span>:<span class="dv">1</span>})</a>
<a class="sourceLine" id="cb60-4" title="4"><span class="co"># OR</span></a>
<a class="sourceLine" id="cb60-5" title="5">data.update(<span class="bu">dict</span>(a<span class="op">=</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb60-6" title="6"><span class="co"># OR</span></a>
<a class="sourceLine" id="cb60-7" title="7">data.update(a<span class="op">=</span><span class="dv">1</span>)</a></code></pre></div>
<h5>
Inserting/Updating multiple values
</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb61-1" title="1">data.update({<span class="st">&#39;c&#39;</span>:<span class="dv">3</span>,<span class="st">&#39;d&#39;</span>:<span class="dv">4</span>})  <span class="co"># Updates &#39;c&#39; and adds &#39;d&#39;</span></a></code></pre></div>
<h5>
Creating a merged dictionary without modifying originals
</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb62-1" title="1">data3 <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb62-2" title="2">data3.update(data)  <span class="co"># Modifies data3, not data</span></a>
<a class="sourceLine" id="cb62-3" title="3">data3.update(data2)  <span class="co"># Modifies data3, not data2</span></a></code></pre></div>
<h5>
Deleting items in dictionary
</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">del</span> data[key]  <span class="co"># Removes specific element in a dictionary</span></a>
<a class="sourceLine" id="cb63-2" title="2">data.pop(key)  <span class="co"># Removes the key &amp;amp; returns the value</span></a>
<a class="sourceLine" id="cb63-3" title="3">data.clear()  <span class="co"># Clears entire dictionary</span></a></code></pre></div>
<h5>
Check if a key is already in dictionary
</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb64-1" title="1">key <span class="kw">in</span> data</a></code></pre></div>
<h5>
Iterate through pairs in a dictionary
</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb65-1" title="1"><span class="cf">for</span> key <span class="kw">in</span> data: <span class="co"># Iterates just through the keys, ignoring the values</span></a>
<a class="sourceLine" id="cb65-2" title="2"><span class="cf">for</span> key, value <span class="kw">in</span> d.items(): <span class="co"># Iterates through the pairs</span></a>
<a class="sourceLine" id="cb65-3" title="3"><span class="cf">for</span> key <span class="kw">in</span> d.keys(): <span class="co"># Iterates just through key, ignoring the values</span></a>
<a class="sourceLine" id="cb65-4" title="4"><span class="cf">for</span> value <span class="kw">in</span> d.values(): <span class="co"># Iterates just through value, ignoring the keys</span></a></code></pre></div>
<h5>
Create a dictionary from 2 lists
</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb66-1" title="1">data <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(list_with_keys, list_with_values))</a></code></pre></div>
<hr>
<h5>
New to Python3
</h1>
<h5>
Creating a merged dictionary without modifying originals
</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb67-1" title="1">data <span class="op">=</span> {<span class="op">**</span>data1, <span class="op">**</span>data2, <span class="op">**</span>data3}</a></code></pre></div>
<hr>
<p>Feel free to add more!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-if-a-given-key-already-exists-in-a-dictionary-score-3139063-in-2013" class="level3">
<h3>11: Check if a given key already exists in a dictionary (score <a href="https://stackoverflow.com/q/1602934.html">3139063</a> in 2013)</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>
I wanted to test if a key exists in a dictionary before updating the value for the key. I wrote the following code:
</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb68-1" title="1"><span class="cf">if</span> <span class="st">&#39;key1&#39;</span> <span class="kw">in</span> <span class="bu">dict</span>.keys():</a>
<a class="sourceLine" id="cb68-2" title="2">  <span class="bu">print</span> <span class="st">&quot;blah&quot;</span></a>
<a class="sourceLine" id="cb68-3" title="3"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb68-4" title="4">  <span class="bu">print</span> <span class="st">&quot;boo&quot;</span></a></code></pre></div>
<p>I think this is not the best way to accomplish this task. Is there a better way to test for a key in the dictionary?</p>
</section>
<section id="answer-accepted-score-2923" class="level4">
<h4>Answer accepted (score 2923)</h4>
<p><code>in</code> is the intended way to test for the existence of a key in a <code>dict</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb69-1" title="1">d <span class="op">=</span> <span class="bu">dict</span>()</a>
<a class="sourceLine" id="cb69-2" title="2"></a>
<a class="sourceLine" id="cb69-3" title="3"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</a>
<a class="sourceLine" id="cb69-4" title="4">    key <span class="op">=</span> i <span class="op">%</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb69-5" title="5">    <span class="cf">if</span> key <span class="kw">in</span> d:</a>
<a class="sourceLine" id="cb69-6" title="6">        d[key] <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb69-7" title="7">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb69-8" title="8">        d[key] <span class="op">=</span> <span class="dv">1</span></a></code></pre></div>
<p>If you wanted a default, you can always use <code>dict.get()</code>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb70-1" title="1">d <span class="op">=</span> <span class="bu">dict</span>()</a>
<a class="sourceLine" id="cb70-2" title="2"></a>
<a class="sourceLine" id="cb70-3" title="3"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</a>
<a class="sourceLine" id="cb70-4" title="4">    key <span class="op">=</span> i <span class="op">%</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb70-5" title="5">    d[key] <span class="op">=</span> d.get(key, <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span></a></code></pre></div>
<p>… and if you wanted to always ensure a default value for any key you can use <code>defaultdict</code> from the <code>collections</code> module, like so:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb71-1" title="1"><span class="im">from</span> collections <span class="im">import</span> defaultdict</a>
<a class="sourceLine" id="cb71-2" title="2"></a>
<a class="sourceLine" id="cb71-3" title="3">d <span class="op">=</span> defaultdict(<span class="bu">int</span>)</a>
<a class="sourceLine" id="cb71-4" title="4"></a>
<a class="sourceLine" id="cb71-5" title="5"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</a>
<a class="sourceLine" id="cb71-6" title="6">    d[i <span class="op">%</span> <span class="dv">10</span>] <span class="op">+=</span> <span class="dv">1</span></a></code></pre></div>
<p>… but in general, the <code>in</code> keyword is the best way to do it.</p>
</section>
<section id="answer-2-score-1454" class="level4">
<h4>Answer 2 (score 1454)</h4>
<p>You don’t have to call keys:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb72-1" title="1"><span class="cf">if</span> <span class="st">&#39;key1&#39;</span> <span class="kw">in</span> <span class="bu">dict</span>:</a>
<a class="sourceLine" id="cb72-2" title="2">  <span class="bu">print</span> <span class="st">&quot;blah&quot;</span></a>
<a class="sourceLine" id="cb72-3" title="3"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb72-4" title="4">  <span class="bu">print</span> <span class="st">&quot;boo&quot;</span></a></code></pre></div>
<p>That will be much <a href="https://stackoverflow.com/a/30527984/452708">faster</a> as it uses the dictionary’s hashing as opposed to doing a linear search, which calling keys would do.</p>
</section>
<section id="answer-3-score-258" class="level4">
<h4>Answer 3 (score 258)</h4>
<p>You can test for the presence of a key in a dictionary, using the <b>in</b> keyword:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb73-1" title="1">d <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb73-2" title="2"><span class="co">&#39;a&#39;</span> <span class="kw">in</span> d <span class="co"># &amp;lt;== evaluates to True</span></a>
<a class="sourceLine" id="cb73-3" title="3"><span class="co">&#39;c&#39;</span> <span class="kw">in</span> d <span class="co"># &amp;lt;== evaluates to False</span></a></code></pre></div>
<p>A common use for checking the existence of a key in a dictionary before mutating it is to default-initialize the value (e.g. if your values are lists, for example, and you want to ensure that there is an empty list to which you can append when inserting the first value for a key). In cases such as those, you may find the <a href="https://docs.python.org/2/library/collections.html#collections.defaultdict" rel="noreferrer"><code>collections.defaultdict()</code></a> type to be of interest.</p>
<p>In older code, you may also find some uses of <code>has_key()</code>, a deprecated method for checking the existence of keys in dictionaries (just use <code>key_name in dict_name</code>, instead).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-the-number-of-elements-in-a-list-score-3134575-in-2019" class="level3">
<h3>12: How do I get the number of elements in a list? (score <a href="https://stackoverflow.com/q/1712227.html">3134575</a> in 2019)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>Consider the following:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb74-1" title="1">items <span class="op">=</span> []</a>
<a class="sourceLine" id="cb74-2" title="2">items.append(<span class="st">&quot;apple&quot;</span>)</a>
<a class="sourceLine" id="cb74-3" title="3">items.append(<span class="st">&quot;orange&quot;</span>)</a>
<a class="sourceLine" id="cb74-4" title="4">items.append(<span class="st">&quot;banana&quot;</span>)</a>
<a class="sourceLine" id="cb74-5" title="5"></a>
<a class="sourceLine" id="cb74-6" title="6"><span class="co"># FAKE METHOD:</span></a>
<a class="sourceLine" id="cb74-7" title="7">items.amount()  <span class="co"># Should return 3</span></a></code></pre></div>
<p>How do I get the number of elements in the list <code>items</code>?</p>
</section>
<section id="answer-accepted-score-2526" class="level4">
<h4>Answer accepted (score 2526)</h4>
<p>The <code>len()</code> function can be used with several different types in Python - both built-in types and library types. For example:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb75-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">len</span>([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb75-2" title="2"><span class="dv">3</span></a></code></pre></div>
<p>
Official 2.x documentation is here: <a href="https://docs.python.org/2/library/functions.html#len" rel="noreferrer" title="len()"><code>len()</code></a><br> Official 3.x documentation is here: <a href="https://docs.python.org/3/library/functions.html#len" rel="noreferrer" title="len()"><code>len()</code></a>
</p>
</section>
<section id="answer-2-score-216" class="level4">
<h4>Answer 2 (score 216)</h4>
<blockquote>
<h5>
How to get the size of a list?
</h1>
</blockquote>
<p>To find the size of a list, use the builtin function, <code>len</code>:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb76-1" title="1">items <span class="op">=</span> []</a>
<a class="sourceLine" id="cb76-2" title="2">items.append(<span class="st">&quot;apple&quot;</span>)</a>
<a class="sourceLine" id="cb76-3" title="3">items.append(<span class="st">&quot;orange&quot;</span>)</a>
<a class="sourceLine" id="cb76-4" title="4">items.append(<span class="st">&quot;banana&quot;</span>)</a></code></pre></div>
<p>And now:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb77-1" title="1"><span class="bu">len</span>(items)</a></code></pre></div>
<p>returns 3.</p>
<h5>
Explanation
</h2>
<p>Everything in Python is an object, including lists. All objects have a header of some sort in the C implementation.</p>
<p>Lists and other similar builtin objects with a “size” in Python, in particular, have an attribute called <code>ob_size</code>, where the number of elements in the object is cached. So checking the number of objects in a list is very fast.</p>
<p>But if you’re checking if list size is zero or not, don’t use <code>len</code> - instead, <a href="https://stackoverflow.com/a/45778282/541136">put the list in a boolean context - it treated as False if empty, True otherwise</a>.</p>
<h5>
From the <a href="https://docs.python.org/library/functions.html#len" rel="noreferrer">docs</a>
</h2>
<p><strong><code>len(s)</code></strong></p>
<blockquote>
<p>
Return the length (the number of items) of an object. The argument may be a sequence (such as a string, bytes, tuple, list, or range) or a collection (such as a dictionary, set, or frozen set).
</p>
</blockquote>
<p><code>len</code> is implemented with <code>__len__</code>, from the data model <a href="https://docs.python.org/reference/datamodel.html#object.__len__" rel="noreferrer">docs</a>:</p>
<p><strong><code>object.__len__(self)</code></strong></p>
<blockquote>
<p>
Called to implement the built-in function <code>len()</code>. Should return the length of the object, an integer &gt;= 0. Also, an object that doesn’t define a <code>__nonzero__()</code> [in Python 2 or <code>__bool__()</code> in Python 3] method and whose <code>__len__()</code> method returns zero is considered to be false in a Boolean context.
</p>
</blockquote>
<p>And we can also see that <code>__len__</code> is a method of lists:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb78-1" title="1">items.<span class="fu">__len__</span>()</a></code></pre></div>
<p>returns 3.</p>
<h5>
Builtin types you can get the <code>len</code> (length) of
</h2>
<p>And in fact we see we can get this information for all of the described types:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb79-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">all</span>(<span class="bu">hasattr</span>(cls, <span class="st">&#39;__len__&#39;</span>) <span class="cf">for</span> cls <span class="kw">in</span> (<span class="bu">str</span>, <span class="bu">bytes</span>, <span class="bu">tuple</span>, <span class="bu">list</span>, </a>
<a class="sourceLine" id="cb79-2" title="2">                                            <span class="bu">xrange</span>, <span class="bu">dict</span>, <span class="bu">set</span>, <span class="bu">frozenset</span>))</a>
<a class="sourceLine" id="cb79-3" title="3"><span class="va">True</span></a></code></pre></div>
<h5>
Do not use <code>len</code> to test for an empty or nonempty list
</h2>
<p>To test for a specific length, of course, simply test for equality:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb80-1" title="1"><span class="cf">if</span> <span class="bu">len</span>(items) <span class="op">==</span> required_length:</a>
<a class="sourceLine" id="cb80-2" title="2">    ...</a></code></pre></div>
<p>But there’s a special case for testing for a zero length list or the inverse. In that case, do not test for equality.</p>
<p>Also, do not do:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb81-1" title="1"><span class="cf">if</span> <span class="bu">len</span>(items): </a>
<a class="sourceLine" id="cb81-2" title="2">    ...</a></code></pre></div>
<p>Instead, simply do:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb82-1" title="1"><span class="cf">if</span> items:     <span class="co"># Then we have some items, not empty!</span></a>
<a class="sourceLine" id="cb82-2" title="2">    ...</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb83-1" title="1"><span class="cf">if</span> <span class="kw">not</span> items: <span class="co"># Then we have an empty list!</span></a>
<a class="sourceLine" id="cb83-2" title="2">    ...</a></code></pre></div>
<p>I <a href="https://stackoverflow.com/questions/53513/best-way-to-check-if-a-list-is-empty/45778282#45778282">explain why here</a> but in short, <code>if items</code> or <code>if not items</code> is both more readable and more performant.</p>
</section>
<section id="answer-3-score-72" class="level4">
<h4>Answer 3 (score 72)</h4>
<p>While this may not be useful due to the fact that it’d make a lot more sense as being “out of the box” functionality, a fairly simple hack would be to build a class with a <code>length</code> property:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb84-1" title="1"><span class="kw">class</span> slist(<span class="bu">list</span>):</a>
<a class="sourceLine" id="cb84-2" title="2">    <span class="at">@property</span></a>
<a class="sourceLine" id="cb84-3" title="3">    <span class="kw">def</span> length(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb84-4" title="4">        <span class="cf">return</span> <span class="bu">len</span>(<span class="va">self</span>)</a></code></pre></div>
<p>You can use it like so:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb85-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> l <span class="op">=</span> slist(<span class="bu">range</span>(<span class="dv">10</span>))</a>
<a class="sourceLine" id="cb85-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> l.length</a>
<a class="sourceLine" id="cb85-3" title="3"><span class="dv">10</span></a>
<a class="sourceLine" id="cb85-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> l</a>
<a class="sourceLine" id="cb85-5" title="5">[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</a></code></pre></div>
<p>Essentially, it’s exactly identical to a list object, with the added benefit of having an OOP-friendly <code>length</code> property.</p>
<p>As always, your mileage may vary.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="using-global-variables-in-a-function-score-3043289-in-2018" class="level3">
<h3>13: Using global variables in a function (score <a href="https://stackoverflow.com/q/423379.html">3043289</a> in 2018)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>How can I create or use a global variable in a function?</p>
<p>If I create a global variable in one function, how can I use that global variable in another function? Do I need to store the global variable in a local variable of the function which needs its access?</p>
</section>
<section id="answer-accepted-score-4017" class="level4">
<h4>Answer accepted (score 4017)</h4>
<p>You can use a global variable in other functions by declaring it as <code>global</code> in each function that assigns to it:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb86-1" title="1">globvar <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb86-2" title="2"></a>
<a class="sourceLine" id="cb86-3" title="3"><span class="kw">def</span> set_globvar_to_one():</a>
<a class="sourceLine" id="cb86-4" title="4">    <span class="kw">global</span> globvar    <span class="co"># Needed to modify global copy of globvar</span></a>
<a class="sourceLine" id="cb86-5" title="5">    globvar <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb86-6" title="6"></a>
<a class="sourceLine" id="cb86-7" title="7"><span class="kw">def</span> print_globvar():</a>
<a class="sourceLine" id="cb86-8" title="8">    <span class="bu">print</span>(globvar)     <span class="co"># No need for global declaration to read value of globvar</span></a>
<a class="sourceLine" id="cb86-9" title="9"></a>
<a class="sourceLine" id="cb86-10" title="10">set_globvar_to_one()</a>
<a class="sourceLine" id="cb86-11" title="11">print_globvar()       <span class="co"># Prints 1</span></a></code></pre></div>
<p>I imagine the reason for it is that, since global variables are so dangerous, Python wants to make sure that you really know that’s what you’re playing with by explicitly requiring the <code>global</code> keyword.</p>
<p>See other answers if you want to share a global variable across modules.</p>
</section>
<section id="answer-2-score-736" class="level4">
<h4>Answer 2 (score 736)</h4>
<p>If I’m understanding your situation correctly, what you’re seeing is the result of how Python handles local (function) and global (module) namespaces.</p>
<p>Say you’ve got a module like this:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb87-1" title="1"><span class="co"># sample.py</span></a>
<a class="sourceLine" id="cb87-2" title="2">myGlobal <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb87-3" title="3"></a>
<a class="sourceLine" id="cb87-4" title="4"><span class="kw">def</span> func1():</a>
<a class="sourceLine" id="cb87-5" title="5">    myGlobal <span class="op">=</span> <span class="dv">42</span></a>
<a class="sourceLine" id="cb87-6" title="6"></a>
<a class="sourceLine" id="cb87-7" title="7"><span class="kw">def</span> func2():</a>
<a class="sourceLine" id="cb87-8" title="8">    <span class="bu">print</span> myGlobal</a>
<a class="sourceLine" id="cb87-9" title="9"></a>
<a class="sourceLine" id="cb87-10" title="10">func1()</a>
<a class="sourceLine" id="cb87-11" title="11">func2()</a></code></pre></div>
<p>You might expecting this to print 42, but instead it prints 5. As has already been mentioned, if you add a ‘<code>global</code>’ declaration to <code>func1()</code>, then <code>func2()</code> will print 42.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb88-1" title="1"><span class="kw">def</span> func1():</a>
<a class="sourceLine" id="cb88-2" title="2">    <span class="kw">global</span> myGlobal</a>
<a class="sourceLine" id="cb88-3" title="3">    myGlobal <span class="op">=</span> <span class="dv">42</span></a></code></pre></div>
<p>What’s going on here is that Python assumes that any name that is <em>assigned to</em>, anywhere within a function, is local to that function unless explicitly told otherwise. If it is only <em>reading</em> from a name, and the name doesn’t exist locally, it will try to look up the name in any containing scopes (e.g. the module’s global scope).</p>
<p>When you assign 42 to the name <code>myGlobal</code>, therefore, Python creates a local variable that shadows the global variable of the same name. That local goes out of scope and is <a href="http://www.digi.com/wiki/developer/index.php/Python_Garbage_Collection" rel="noreferrer">garbage-collected</a> when <code>func1()</code> returns; meanwhile, <code>func2()</code> can never see anything other than the (unmodified) global name. Note that this namespace decision happens at compile time, not at runtime – if you were to read the value of <code>myGlobal</code> inside <code>func1()</code> before you assign to it, you’d get an <code>UnboundLocalError</code>, because Python has already decided that it must be a local variable but it has not had any value associated with it yet. But by using the ‘<code>global</code>’ statement, you tell Python that it should look elsewhere for the name instead of assigning to it locally.</p>
<p>(I believe that this behavior originated largely through an optimization of local namespaces – without this behavior, Python’s VM would need to perform at least three name lookups each time a new name is assigned to inside a function (to ensure that the name didn’t already exist at module/builtin level), which would significantly slow down a very common operation.)</p>
</section>
<section id="answer-3-score-201" class="level4">
<h4>Answer 3 (score 201)</h4>
<p>You may want to explore the notion of <a href="http://docs.python.org/reference/datamodel.html" rel="noreferrer">namespaces</a>. In Python, the <a href="http://docs.python.org/tutorial/modules.html" rel="noreferrer">module</a> is the natural place for <em>global</em> data:</p>
<blockquote>
Each module has its own private symbol table, which is used as the global symbol table by all functions defined in the module. Thus, the author of a module can use global variables in the module without worrying about accidental clashes with a user’s global variables. On the other hand, if you know what you are doing you can touch a module’s global variables with the same notation used to refer to its functions, <code>modname.itemname</code>.
</blockquote>
<p>A specific use of global-in-a-module is described here - <a href="http://effbot.org/pyfaq/how-do-i-share-global-variables-across-modules.htm" rel="noreferrer">How do I share global variables across modules?</a>, and for completeness the contents are shared here:</p>
<blockquote>
<p>The canonical way to share information across modules within a single program is to create a special configuration module (often called <strong>config</strong> or <strong>cfg</strong>). Just import the configuration module in all modules of your application; the module then becomes available as a global name. Because there is only one instance of each module, any changes made to the module object get reflected everywhere. For example:</p>
<p>File: config.py</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb89-1" title="1">x <span class="op">=</span> <span class="dv">0</span>   <span class="co"># Default value of the &#39;x&#39; configuration setting</span></a></code></pre></div>
<p>File: mod.py</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb90-1" title="1"><span class="im">import</span> config</a>
<a class="sourceLine" id="cb90-2" title="2">config.x <span class="op">=</span> <span class="dv">1</span></a></code></pre></div>
<p>File: main.py</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb91-1" title="1"><span class="im">import</span> config</a>
<a class="sourceLine" id="cb91-2" title="2"><span class="im">import</span> mod</a>
<a class="sourceLine" id="cb91-3" title="3"><span class="bu">print</span> config.x</a></code></pre></div>
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-the-current-time-in-python-score-3001470-in-2018" class="level3">
<h3>14: How to get the current time in Python (score <a href="https://stackoverflow.com/q/415511.html">3001470</a> in 2018)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>What is the module/method used to get the current time?</p>
</section>
<section id="answer-accepted-score-2718" class="level4">
<h4>Answer accepted (score 2718)</h4>
<p>Use:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb92-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> datetime</a>
<a class="sourceLine" id="cb92-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> datetime.datetime.now()</a>
<a class="sourceLine" id="cb92-3" title="3">datetime.datetime(<span class="dv">2009</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">24</span>, <span class="dv">78915</span>)</a>
<a class="sourceLine" id="cb92-4" title="4"></a>
<a class="sourceLine" id="cb92-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(datetime.datetime.now())</a>
<a class="sourceLine" id="cb92-6" title="6"><span class="dv">2018-07-29</span> <span class="dv">09</span>:<span class="dv">17</span>:<span class="fl">13.812189</span></a></code></pre></div>
<p>And just the time:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb93-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> datetime.datetime.now().time()</a>
<a class="sourceLine" id="cb93-2" title="2">datetime.time(<span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">24</span>, <span class="dv">78915</span>)</a>
<a class="sourceLine" id="cb93-3" title="3"></a>
<a class="sourceLine" id="cb93-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(datetime.datetime.now().time())</a>
<a class="sourceLine" id="cb93-5" title="5"><span class="dv">09</span>:<span class="dv">17</span>:<span class="fl">51.914526</span></a></code></pre></div>
<p>See <a href="https://docs.python.org/3/library/datetime.html" rel="noreferrer"><strong>the documentation</strong></a> for more information.</p>
<p>To save typing, you can import the <code>datetime</code> object from the <code>datetime</code> module:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb94-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">from</span> datetime <span class="im">import</span> datetime</a></code></pre></div>
<p>Then remove the leading <code>datetime.</code> from all of the above.</p>
</section>
<section id="answer-2-score-891" class="level4">
<h4>Answer 2 (score 891)</h4>
<p>You can use <a href="http://docs.python.org/3.3/library/time.html?highlight=time.strftime#time.strftime" rel="noreferrer"><code>time.strftime()</code></a>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb95-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">from</span> time <span class="im">import</span> gmtime, strftime</a>
<a class="sourceLine" id="cb95-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> strftime(<span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&quot;</span>, gmtime())</a>
<a class="sourceLine" id="cb95-3" title="3"><span class="co">&#39;2009-01-05 22:14:39&#39;</span></a></code></pre></div>
</section>
<section id="answer-3-score-531" class="level4">
<h4>Answer 3 (score 531)</h4>
<div class="sourceCode" id="cb96"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb96-1" title="1"><span class="im">from</span> datetime <span class="im">import</span> datetime</a>
<a class="sourceLine" id="cb96-2" title="2">datetime.now().strftime(<span class="st">&#39;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&#39;</span>)</a></code></pre></div>
<p>For this example, the output will be like this: <code>'2013-09-18 11:16:32'</code></p>
<p>Here is the list of <a href="https://docs.python.org/3/library/time.html#time.strftime" rel="noreferrer"><code>strftime</code> directives</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-install-pip-on-windows-score-2887828-in-2017" class="level3">
<h3>15: How do I install pip on Windows? (score <a href="https://stackoverflow.com/q/4750806.html">2887828</a> in 2017)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p><a href="https://pip.pypa.io/en/stable/" rel="noreferrer"><code>pip</code></a> is a replacement for <a href="http://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer"><code>easy_install</code></a>. But should I install <code>pip</code> using <code>easy_install</code> on Windows? Is there a better way?</p>
</section>
<section id="answer-accepted-score-1779" class="level4">
<h4>Answer accepted (score 1779)</h4>
<h5>
Python 2.7.9+ and 3.4+
</h2>
<p>Good news! <a href="https://docs.python.org/3/whatsnew/3.4.html" rel="noreferrer">Python 3.4</a> (released March 2014) and <a href="https://docs.python.org/2/whatsnew/2.7.html#pep-477-backport-ensurepip-pep-453-to-python-2-7" rel="noreferrer">Python 2.7.9</a> (released December 2014) ship with Pip. This is the best feature of any Python release. It makes the community’s wealth of libraries accessible to everyone. Newbies are no longer excluded from using community libraries by the prohibitive difficulty of setup. In shipping with a package manager, Python joins <a href="http://en.wikipedia.org/wiki/Ruby_%28programming_language%29" rel="noreferrer">Ruby</a>, <a href="http://en.wikipedia.org/wiki/Node.js" rel="noreferrer">Node.js</a>, <a href="http://en.wikipedia.org/wiki/Haskell_%28programming_language%29" rel="noreferrer">Haskell</a>, <a href="http://en.wikipedia.org/wiki/Perl" rel="noreferrer">Perl</a>, <a href="http://en.wikipedia.org/wiki/Go_%28programming_language%29" rel="noreferrer">Go</a>—almost every other contemporary language with a majority open-source community. Thank you, Python.</p>
<p>If you do find that pip is not available when using Python 3.4+ or Python 2.7.9+, simply execute e.g.:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb97-1" title="1">py <span class="dv">-3</span> <span class="op">-</span>m ensurepip</a></code></pre></div>
<p>Of course, that doesn’t mean Python packaging is problem solved. The experience remains frustrating. I discuss this <a href="https://stackoverflow.com/questions/2436731/does-python-have-a-package-module-management-system/13445719#13445719">in the Stack Overflow question <em>Does Python have a package/module management system?</em></a>.</p>
<p>And, alas for everyone using Python 2.7.8 or earlier (a sizable portion of the community). There’s no plan to ship Pip to you. Manual instructions follow.</p>
<h5>
Python 2 ≤ 2.7.8 and Python 3 ≤ 3.3
</h2>
<p>Flying in the face of its <a href="http://www.python.org/about/" rel="noreferrer">‘batteries included’</a> motto, Python ships without a package manager. To make matters worse, Pip was—until recently—ironically difficult to install.</p>
<h5>
Official instructions
</h3>
<p>Per <a href="https://pip.pypa.io/en/stable/installing/#do-i-need-to-install-pip" rel="noreferrer">https://pip.pypa.io/en/stable/installing/#do-i-need-to-install-pip</a>:</p>
<p>Download <a href="https://bootstrap.pypa.io/get-pip.py" rel="noreferrer"><code>get-pip.py</code></a>, being careful to save it as a <code>.py</code> file rather than <code>.txt</code>. Then, run it from the command prompt:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb98-1" title="1">python get<span class="op">-</span>pip.py</a></code></pre></div>
<p>You possibly need an administrator command prompt to do this. Follow <em><a href="http://technet.microsoft.com/en-us/library/cc947813(v=ws.10).aspx" rel="noreferrer">Start a Command Prompt as an Administrator</a></em> (Microsoft TechNet).</p>
<p>This installs the pip package, which (in Windows) contains ….exe that path must be in PATH environment variable to use pip from the command line (see the second part of ‘Alternative Instructions’ for adding it to your PATH,</p>
<h5>
Alternative instructions
</h3>
<p>The official documentation tells users to install Pip and each of its dependencies from source. That’s tedious for the experienced and prohibitively difficult for newbies.</p>
<p>For our sake, Christoph Gohlke prepares Windows installers (<code>.msi</code>) for popular Python packages. He builds installers for all Python versions, both 32 and 64 bit. You need to:</p>
<ol>
<li>
<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#setuptools" rel="noreferrer">Install setuptools</a>
</li>
<li>
<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip" rel="noreferrer">Install pip</a>
</li>
</ol>
<p>For me, this installed Pip at <code>C:\Python27\Scripts\pip.exe</code>. Find <code>pip.exe</code> on your computer, then add its folder (for example, <code>C:\Python27\Scripts</code>) to your path (Start / Edit environment variables). Now you should be able to run <code>pip</code> from the command line. Try installing a package:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb99-1" title="1">pip install httpie</a></code></pre></div>
<p>There you go (hopefully)! Solutions for common problems are given below:</p>
<h5>
Proxy problems
</h3>
<p>If you work in an office, you might be behind an HTTP proxy. If so, set the environment variables <a href="http://docs.python.org/2/library/urllib.html" rel="noreferrer"><code>http_proxy</code> and <code>https_proxy</code></a>. Most Python applications (and other free software) respect these. Example syntax:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb100-1" title="1">http:<span class="op">//</span>proxy_url:port</a>
<a class="sourceLine" id="cb100-2" title="2">http:<span class="op">//</span>username:password<span class="op">@</span>proxy_url:port</a></code></pre></div>
<p>If you’re really unlucky, your proxy might be a Microsoft <a href="https://en.wikipedia.org/wiki/NT_LAN_Manager" rel="noreferrer">NTLM</a> proxy. Free software can’t cope. The only solution is to install a free software friendly proxy that forwards to the nasty proxy. <a href="http://cntlm.sourceforge.net/" rel="noreferrer">http://cntlm.sourceforge.net/</a></p>
<h5>
Unable to find vcvarsall.bat
</h3>
<p>Python modules can be partly written in C or C++. Pip tries to compile from source. If you don’t have a C/C++ compiler installed and configured, you’ll see this cryptic error message.</p>
<blockquote>
Error: Unable to find vcvarsall.bat
</blockquote>
<p>You can fix that by <a href="https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat">installing a C++ compiler</a> such as <a href="http://en.wikipedia.org/wiki/MinGW" rel="noreferrer">MinGW</a> or <a href="http://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_versions" rel="noreferrer">Visual C++</a>. Microsoft actually ships one specifically for use with Python. Or try <em><a href="http://aka.ms/vcpython27" rel="noreferrer">Microsoft Visual C++ Compiler for Python 2.7</a></em>.</p>
<p>Often though it’s easier to check <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" rel="noreferrer">Christoph’s site</a> for your package.</p>
</section>
<section id="answer-2-score-296" class="level4">
<h4>Answer 2 (score 296)</h4>
<p>
<s>– <strong>Outdated</strong> – use distribute, not setuptools as described here. –</s><br> – <strong>Outdated #2</strong> – use setuptools as distribute is deprecated.
</p>
<p>As you mentioned pip doesn’t include an independent installer, but you can install it with its predecessor easy_install.</p>
<p>So:</p>
<ol>
<li>
Download the last pip version from here: <a href="http://pypi.python.org/pypi/pip#downloads" rel="noreferrer">http://pypi.python.org/pypi/pip#downloads</a>
</li>
<li>
Uncompress it
</li>
<li>
Download the last easy installer for Windows: (<strong>download the .exe at the bottom of <a href="http://pypi.python.org/pypi/setuptools" rel="noreferrer">http://pypi.python.org/pypi/setuptools</a></strong> ). Install it.
</li>
<li>
copy the uncompressed pip folder <strong>content</strong> into <code>C:\Python2x\</code> folder (don’t copy the whole folder into it, just the content), because python command doesn’t work outside <code>C:\Python2x</code> folder and then run: <code>python setup.py install</code>
</li>
<li>
Add your python <code>C:\Python2x\Scripts</code> to the path
</li>
</ol>
<p>You are done.</p>
<p>Now you can use <code>pip install package</code> to easily install packages as in Linux :)</p>
</section>
<section id="answer-3-score-215" class="level4">
<h4>Answer 3 (score 215)</h4>
<p><strong>2014 UPDATE:</strong></p>
<ol type="1">
<li><p>If you have installed Python 3.4 or later, pip is included with Python and should already be working on your system.</p></li>
<li><p>If you are running a version below Python 3.4 or if pip was not installed with Python 3.4 for some reason, then you’d probably use pip’s official installation script <code>get-pip.py</code>. The pip installer now grabs setuptools for you, and works regardless of architecture (32-bit or 64-bit).</p></li>
</ol>
<p>The installation <a href="http://www.pip-installer.org/en/latest/installing.html" rel="noreferrer">instructions are detailed here</a> and involve:</p>
<blockquote>
<p>To install or upgrade pip, securely download <a href="https://raw.github.com/pypa/pip/master/contrib/get-pip.py" rel="noreferrer">get-pip.py</a>.</p>
Then run the following (which may require administrator access):
</blockquote>
<div class="sourceCode" id="cb101"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb101-1" title="1">python get<span class="op">-</span>pip.py</a></code></pre></div>
<blockquote>
To upgrade an existing setuptools (or distribute), run <code>pip install -U setuptools</code>
</blockquote>
<p>I’ll leave the two sets of old instructions below for posterity.</p>
<p><strong>OLD Answers:</strong></p>
<p>For Windows editions of the <strong>64 bit</strong> variety - 64-bit Windows + Python used to require a separate installation method due to ez_setup, but I’ve tested the new distribute method on 64-bit Windows running 32-bit Python and 64-bit Python, and you can now use the same method for all versions of Windows/Python 2.7X:</p>
<p><strong>OLD Method 2</strong> using <a href="https://pypi.python.org/pypi/distribute" rel="noreferrer">distribute</a>:</p>
<ol>
<li>
Download <a href="http://python-distribute.org/distribute_setup.py" rel="noreferrer">distribute</a> - I threw mine in <code>C:\Python27\Scripts</code> (feel free to create a <code>Scripts</code> directory if it doesn’t exist.
</li>
<li>
Open up a command prompt (on Windows you should check out <a href="http://code.google.com/p/conemu-maximus5/" rel="noreferrer">conemu2</a> if you don’t use <a href="http://en.wikipedia.org/wiki/Windows_PowerShell" rel="noreferrer">PowerShell</a>) and change (<code>cd</code>) to the directory you’ve downloaded <code>distribute_setup.py</code> to.
</li>
<li>
Run distribute_setup: <code>python distribute_setup.py</code> (This will not work if your python installation directory is not added to your path - <a href="https://stackoverflow.com/a/6318188/705198">go here for help</a>)
</li>
<li>
Change the current directory to the <code>Scripts</code> directory for your Python installation (<code>C:\Python27\Scripts</code>) or add that directory, as well as the Python base installation directory to your %PATH% environment variable.
</li>
<li>
Install pip using the newly installed setuptools: <code>easy_install pip</code>
</li>
</ol>
<p>The last step will not work unless you’re either in the directory <code>easy_install.exe</code> is located in (C:27would be the default for Python 2.7), or you have that directory added to your path.</p>
<p><strong>OLD Method 1</strong> using ez_setup:</p>
<p><a href="http://pypi.python.org/pypi/setuptools#windows" rel="noreferrer">from the setuptools page</a> –</p>
<blockquote>
Download <a href="http://peak.telecommunity.com/dist/ez_setup.py" rel="noreferrer">ez_setup.py</a> and run it; it will download the appropriate .egg file and install it for you. (Currently, the provided .exe installer does not support 64-bit versions of Python for Windows, due to a distutils installer compatibility issue.
</blockquote>
<p>After this, you may continue with:</p>
<ol start="2">
<li>
Add <code>c:\Python2x\Scripts</code> to the Windows path (replace the <code>x</code> in <code>Python2x</code> with the actual version number you have installed)
</li>
<li>
Open a new (!) DOS prompt. From there run <code>easy_install pip</code>
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-make-a-time-delay-in-python-score-2839107-in-2018" class="level3">
<h3>16: How can I make a time delay in Python? (score <a href="https://stackoverflow.com/q/510348.html">2839107</a> in 2018)</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>I would like to know how to put a time delay in a Python script.</p>
</section>
<section id="answer-2-score-2835" class="level4">
<h4>Answer 2 (score 2835)</h4>
<div class="sourceCode" id="cb102"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb102-1" title="1"><span class="im">import</span> time</a>
<a class="sourceLine" id="cb102-2" title="2">time.sleep(<span class="dv">5</span>)   <span class="co"># Delays for 5 seconds. You can also use a float value.</span></a></code></pre></div>
<p>Here is another example where something is run approximately once a minute:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb103-1" title="1"><span class="im">import</span> time</a>
<a class="sourceLine" id="cb103-2" title="2"><span class="cf">while</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb103-3" title="3">    <span class="bu">print</span>(<span class="st">&quot;This prints once a minute.&quot;</span>)</a>
<a class="sourceLine" id="cb103-4" title="4">    time.sleep(<span class="dv">60</span>) <span class="co"># Delay for 1 minute (60 seconds).</span></a></code></pre></div>
</section>
<section id="answer-3-score-736" class="level4">
<h4>Answer 3 (score 736)</h4>
<p>You can use the <a href="https://docs.python.org/library/time.html#time.sleep" rel="noreferrer"><code>sleep()</code> function in the <code>time</code> module</a>. It can take a float argument for sub-second resolution.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb104-1" title="1"><span class="im">from</span> time <span class="im">import</span> sleep</a>
<a class="sourceLine" id="cb104-2" title="2">sleep(<span class="fl">0.1</span>) <span class="co"># Time in seconds</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-pythons-list-methods-append-and-extend-score-2798324-in-2019" class="level3">
<h3>17: What is the difference between Python’s list methods append and extend? (score <a href="https://stackoverflow.com/q/252703.html">2798324</a> in 2019)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>What’s the difference between the list methods <code>append()</code> and <code>extend()</code>?</p>
</section>
<section id="answer-accepted-score-4958" class="level4">
<h4>Answer accepted (score 4958)</h4>
<p><a href="https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types" rel="noreferrer"><code>append</code></a>: Appends object at the end.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb105-1" title="1">x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb105-2" title="2">x.append([<span class="dv">4</span>, <span class="dv">5</span>])</a>
<a class="sourceLine" id="cb105-3" title="3"><span class="bu">print</span> (x)</a></code></pre></div>
<p>gives you: <code>[1, 2, 3, [4, 5]]</code></p>
<hr>
<p><a href="https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types" rel="noreferrer"><code>extend</code></a>: Extends list by appending elements from the iterable.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb106-1" title="1">x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb106-2" title="2">x.extend([<span class="dv">4</span>, <span class="dv">5</span>])</a>
<a class="sourceLine" id="cb106-3" title="3"><span class="bu">print</span> (x)</a></code></pre></div>
<p>gives you: <code>[1, 2, 3, 4, 5]</code></p>
</section>
<section id="answer-2-score-606" class="level4">
<h4>Answer 2 (score 606)</h4>
<p><code>append</code> adds an element to a list, and <code>extend</code> concatenates the first list with another list (or another iterable, not necessarily a list.)</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb107-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>]</a>
<a class="sourceLine" id="cb107-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li</a>
<a class="sourceLine" id="cb107-3" title="3">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>]</a>
<a class="sourceLine" id="cb107-4" title="4"></a>
<a class="sourceLine" id="cb107-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li.append(<span class="st">&quot;new&quot;</span>)</a>
<a class="sourceLine" id="cb107-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li</a>
<a class="sourceLine" id="cb107-7" title="7">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>]</a>
<a class="sourceLine" id="cb107-8" title="8"></a>
<a class="sourceLine" id="cb107-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li.append([<span class="st">&quot;new&quot;</span>, <span class="dv">2</span>])</a>
<a class="sourceLine" id="cb107-10" title="10"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li</a>
<a class="sourceLine" id="cb107-11" title="11">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>, [<span class="st">&#39;new&#39;</span>, <span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb107-12" title="12"></a>
<a class="sourceLine" id="cb107-13" title="13"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li.insert(<span class="dv">2</span>, <span class="st">&quot;new&quot;</span>)</a>
<a class="sourceLine" id="cb107-14" title="14"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li</a>
<a class="sourceLine" id="cb107-15" title="15">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;new&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>, [<span class="st">&#39;new&#39;</span>, <span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb107-16" title="16"></a>
<a class="sourceLine" id="cb107-17" title="17"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li.extend([<span class="st">&quot;two&quot;</span>, <span class="st">&quot;elements&quot;</span>])</a>
<a class="sourceLine" id="cb107-18" title="18"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> li</a>
<a class="sourceLine" id="cb107-19" title="19">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;new&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>, [<span class="st">&#39;new&#39;</span>, <span class="dv">2</span>], <span class="st">&#39;two&#39;</span>, <span class="st">&#39;elements&#39;</span>]</a></code></pre></div>
</section>
<section id="answer-3-score-437" class="level4">
<h4>Answer 3 (score 437)</h4>
<blockquote>
<h5>
What is the difference between the list methods append and extend?
</h2>
</blockquote>
<ul>
<li>
<code>append</code> adds its argument as a single element to the end of a list. The length of the list itself will increase by one.
</li>
<li>
<code>extend</code> iterates over its argument adding each element to the list, extending the list. The length of the list will increase by however many elements were in the iterable argument.
</li>
</ul>
<h5>
<code>append</code>
</h2>
<p>The <code>list.append</code> method appends an object to the end of the list.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb108-1" title="1">my_list.append(<span class="bu">object</span>) </a></code></pre></div>
<p>Whatever the object is, whether a number, a string, another list, or something else, it gets added onto the end of <code>my_list</code> as a single entry on the list.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb109-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list</a>
<a class="sourceLine" id="cb109-2" title="2">[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>]</a>
<a class="sourceLine" id="cb109-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list.append(<span class="st">&#39;baz&#39;</span>)</a>
<a class="sourceLine" id="cb109-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list</a>
<a class="sourceLine" id="cb109-5" title="5">[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]</a></code></pre></div>
<p>So keep in mind that a list is an object. If you append another list onto a list, the first list will be a single object at the end of the list (which may not be what you want):</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb110-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> another_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb110-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list.append(another_list)</a>
<a class="sourceLine" id="cb110-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list</a>
<a class="sourceLine" id="cb110-4" title="4">[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb110-5" title="5">                     <span class="co">#^^^^^^^^^--- single item at the end of the list.</span></a></code></pre></div>
<h5>
<code>extend</code>
</h2>
<p>The <code>list.extend</code> method extends a list by appending elements from an iterable:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb111-1" title="1">my_list.extend(iterable)</a></code></pre></div>
<p>So with extend, each element of the iterable gets appended onto the list. For example:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb112-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list</a>
<a class="sourceLine" id="cb112-2" title="2">[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>]</a>
<a class="sourceLine" id="cb112-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> another_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb112-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list.extend(another_list)</a>
<a class="sourceLine" id="cb112-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list</a>
<a class="sourceLine" id="cb112-6" title="6">[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a></code></pre></div>
<p>Keep in mind that a string is an iterable, so if you extend a list with a string, you’ll append each character as you iterate over the string (which may not be what you want):</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb113-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list.extend(<span class="st">&#39;baz&#39;</span>)</a>
<a class="sourceLine" id="cb113-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_list</a>
<a class="sourceLine" id="cb113-3" title="3">[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;z&#39;</span>]</a></code></pre></div>
<h5>
Operator Overload, <code>__add__</code> (<code>+</code>) and <code>__iadd__</code> (<code>+=</code>)
</h2>
<p>Both <code>+</code> and <code>+=</code> operators are defined for <code>list</code>. They are semantically similar to extend.</p>
<p><code>my_list + another_list</code> creates a third list in memory, so you can return the result of it, but it requires that the second iterable be a list.</p>
<p><code>my_list += another_list</code> modifies the list in-place (it <em>is</em> the in-place operator, and lists are mutable objects, as we’ve seen) so it does not create a new list. It also works like extend, in that the second iterable can be any kind of iterable.</p>
<p>Don’t get confused - <code>my_list = my_list + another_list</code> is not equivalent to <code>+=</code> - it gives you a brand new list assigned to my_list.</p>
<h5>
Time Complexity
</h2>
<p>Append has <a href="https://wiki.python.org/moin/TimeComplexity" rel="noreferrer">constant time complexity</a>, O(1).</p>
<p>Extend has time complexity, O(k).</p>
<p>Iterating through the multiple calls to <code>append</code> adds to the complexity, making it equivalent to that of extend, and since extend’s iteration is implemented in C, it will always be faster if you intend to append successive items from an iterable onto a list.</p>
<h5>
Performance
</h2>
<p>You may wonder what is more performant, since append can be used to achieve the same outcome as extend. The following functions do the same thing:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb114-1" title="1"><span class="kw">def</span> append(alist, iterable):</a>
<a class="sourceLine" id="cb114-2" title="2">    <span class="cf">for</span> item <span class="kw">in</span> iterable:</a>
<a class="sourceLine" id="cb114-3" title="3">        alist.append(item)</a>
<a class="sourceLine" id="cb114-4" title="4"></a>
<a class="sourceLine" id="cb114-5" title="5"><span class="kw">def</span> extend(alist, iterable):</a>
<a class="sourceLine" id="cb114-6" title="6">    alist.extend(iterable)</a></code></pre></div>
<p>So let’s time them:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb115-1" title="1"><span class="im">import</span> timeit</a>
<a class="sourceLine" id="cb115-2" title="2"></a>
<a class="sourceLine" id="cb115-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: append([], <span class="st">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>)))</a>
<a class="sourceLine" id="cb115-4" title="4"><span class="fl">2.867846965789795</span></a>
<a class="sourceLine" id="cb115-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: extend([], <span class="st">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>)))</a>
<a class="sourceLine" id="cb115-6" title="6"><span class="fl">0.8060121536254883</span></a></code></pre></div>
<h5>
Addressing a comment on timings
</h3>
<p>A commenter said:</p>
<blockquote>
Perfect answer, I just miss the timing of comparing adding only one element
</blockquote>
<p>Do the semantically correct thing. If you want to append all elements in an iterable, use <code>extend</code>. If you’re just adding one element, use <code>append</code>.</p>
<p>Ok, so let’s create an experiment to see how this works out in time:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb116-1" title="1"><span class="kw">def</span> append_one(a_list, element):</a>
<a class="sourceLine" id="cb116-2" title="2">    a_list.append(element)</a>
<a class="sourceLine" id="cb116-3" title="3"></a>
<a class="sourceLine" id="cb116-4" title="4"><span class="kw">def</span> extend_one(a_list, element):</a>
<a class="sourceLine" id="cb116-5" title="5">    <span class="co">&quot;&quot;&quot;creating a new list is semantically the most direct</span></a>
<a class="sourceLine" id="cb116-6" title="6"><span class="co">    way to create an iterable to give to extend&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb116-7" title="7">    a_list.extend([element])</a>
<a class="sourceLine" id="cb116-8" title="8"></a>
<a class="sourceLine" id="cb116-9" title="9"><span class="im">import</span> timeit</a></code></pre></div>
<p>And we see that going out of our way to create an iterable just to use extend is a (minor) waste of time:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb117-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: append_one([], <span class="dv">0</span>)))</a>
<a class="sourceLine" id="cb117-2" title="2"><span class="fl">0.2082819009956438</span></a>
<a class="sourceLine" id="cb117-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: extend_one([], <span class="dv">0</span>)))</a>
<a class="sourceLine" id="cb117-4" title="4"><span class="fl">0.2397019260097295</span></a></code></pre></div>
<p>We learn from this that there’s nothing gained from using <code>extend</code> when we have only <em>one</em> element to append.</p>
<p>Also, these timings are not that important. I am just showing them to make the point that, in Python, doing the semantically correct thing is doing things the <em>Right</em> Way™.</p>
<p>It’s conceivable that you might test timings on two comparable operations and get an ambiguous or inverse result. Just focus on doing the semantically correct thing.</p>
<h5>
Conclusion
</h2>
<p>We see that <code>extend</code> is semantically clearer, and that it can run much faster than <code>append</code>, <em>when you intend to append each element in an iterable to a list.</em></p>
<p>If you only have a single element (not in an iterable) to add to the list, use <code>append</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="limiting-floats-to-two-decimal-points-score-2780835-in-2017" class="level3">
<h3>18: Limiting floats to two decimal points (score <a href="https://stackoverflow.com/q/455612.html">2780835</a> in 2017)</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>I want <code>a</code> to be rounded to <em>13.95</em>.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb118-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a</a>
<a class="sourceLine" id="cb118-2" title="2"><span class="fl">13.949999999999999</span></a>
<a class="sourceLine" id="cb118-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">round</span>(a, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb118-4" title="4"><span class="fl">13.949999999999999</span></a></code></pre></div>
<p>The <a href="https://docs.python.org/2/library/functions.html#round" rel="noreferrer"><code>round</code></a> function does not work the way I expected.</p>
</section>
<section id="answer-2-score-1484" class="level4">
<h4>Answer 2 (score 1484)</h4>
<p>You are running into the <a href="https://en.wikipedia.org/wiki/IEEE_754" rel="noreferrer">old problem</a> with floating point numbers that not all numbers can be represented exactly. The command line is just showing you the full floating point form from memory.</p>
<p>With floating point representation, your rounded version is the same number. Since computers are binary, they store floating point numbers as an integer and then divide it by a power of two so 13.95 will be represented in a similar fashion to 125650429603636838/(2**53).</p>
<p>Double precision numbers have 53 bits (16 digits) of precision and regular floats have 24 bits (8 digits) of precision. The <a href="http://docs.python.org/tutorial/floatingpoint.html" rel="noreferrer">floating point type in Python uses double precision</a> to store the values.</p>
<p>For example,</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb119-1" title="1">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="dv">125650429603636838</span><span class="op">/</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">53</span>)</a>
<a class="sourceLine" id="cb119-2" title="2">  <span class="fl">13.949999999999999</span></a>
<a class="sourceLine" id="cb119-3" title="3"></a>
<a class="sourceLine" id="cb119-4" title="4">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="dv">234042163</span><span class="op">/</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">24</span>)</a>
<a class="sourceLine" id="cb119-5" title="5">  <span class="fl">13.949999988079071</span></a>
<a class="sourceLine" id="cb119-6" title="6"></a>
<a class="sourceLine" id="cb119-7" title="7">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a<span class="op">=</span><span class="fl">13.946</span></a>
<a class="sourceLine" id="cb119-8" title="8">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(a)</a>
<a class="sourceLine" id="cb119-9" title="9">  <span class="fl">13.946</span></a>
<a class="sourceLine" id="cb119-10" title="10">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">%.2f</span><span class="st">&quot;</span> <span class="op">%</span> a)</a>
<a class="sourceLine" id="cb119-11" title="11">  <span class="fl">13.95</span></a>
<a class="sourceLine" id="cb119-12" title="12">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">round</span>(a,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb119-13" title="13">  <span class="fl">13.949999999999999</span></a>
<a class="sourceLine" id="cb119-14" title="14">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">%.2f</span><span class="st">&quot;</span> <span class="op">%</span> <span class="bu">round</span>(a,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb119-15" title="15">  <span class="fl">13.95</span></a>
<a class="sourceLine" id="cb119-16" title="16">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(a))</a>
<a class="sourceLine" id="cb119-17" title="17">  <span class="fl">13.95</span></a>
<a class="sourceLine" id="cb119-18" title="18">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="bu">round</span>(a,<span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb119-19" title="19">  <span class="fl">13.95</span></a>
<a class="sourceLine" id="cb119-20" title="20">  <span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">{0:.15f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="bu">round</span>(a,<span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb119-21" title="21">  <span class="fl">13.949999999999999</span></a></code></pre></div>
<p>If you are after only two decimal places (to display a currency value, for example), then you have a couple of better choices:</p>
<ol>
<li>
Use integers and store values in cents, not dollars and then divide by 100 to convert to dollars.
</li>
<li>
Or use a fixed point number like <a href="https://docs.python.org/library/decimal.html" rel="noreferrer">decimal</a>.
</li>
</ol>
</section>
<section id="answer-3-score-525" class="level4">
<h4>Answer 3 (score 525)</h4>
<p>There are new format specifications, <a href="http://docs.python.org/library/string.html#format-specification-mini-language" rel="noreferrer"><strong>String Format Specification Mini-Language</strong></a>:</p>
<p>You can do the same as:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb120-1" title="1"><span class="co">&quot;{0:.2f}&quot;</span>.<span class="bu">format</span>(<span class="fl">13.949999999999999</span>)</a></code></pre></div>
<p><strong>Note</strong> that the above returns a string. In order to get as float, simply wrap with <code>float(...)</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb121-1" title="1"><span class="bu">float</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="fl">13.949999999999999</span>))</a></code></pre></div>
<p><strong>Note</strong> that wrapping with <code>float()</code> doesn’t change anything:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb122-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> <span class="fl">13.949999999999999999</span></a>
<a class="sourceLine" id="cb122-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x</a>
<a class="sourceLine" id="cb122-3" title="3"><span class="fl">13.95</span></a>
<a class="sourceLine" id="cb122-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> g <span class="op">=</span> <span class="bu">float</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(x))</a>
<a class="sourceLine" id="cb122-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> g</a>
<a class="sourceLine" id="cb122-6" title="6"><span class="fl">13.95</span></a>
<a class="sourceLine" id="cb122-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">==</span> g</a>
<a class="sourceLine" id="cb122-8" title="8"><span class="va">True</span></a>
<a class="sourceLine" id="cb122-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> h <span class="op">=</span> <span class="bu">round</span>(x, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb122-10" title="10"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> h</a>
<a class="sourceLine" id="cb122-11" title="11"><span class="fl">13.95</span></a>
<a class="sourceLine" id="cb122-12" title="12"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">==</span> h</a>
<a class="sourceLine" id="cb122-13" title="13"><span class="va">True</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="converting-string-into-datetime-score-2674955-in-2019" class="level3">
<h3>19: Converting string into datetime (score <a href="https://stackoverflow.com/q/466345.html">2674955</a> in 2019)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>I’ve got a huge list of date-times like this as strings:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb123-1" title="1">Jun <span class="dv">1</span> <span class="dv">2005</span>  <span class="dv">1</span>:33PM</a>
<a class="sourceLine" id="cb123-2" title="2">Aug <span class="dv">28</span> <span class="dv">1999</span> <span class="dv">12</span>:00AM</a></code></pre></div>
<p>I’m going to be shoving these back into proper datetime fields in a database so I need to magic them into real datetime objects.</p>
<p>This is going through Django’s ORM so I can’t use SQL to do the conversion on insert.</p>
</section>
<section id="answer-accepted-score-3174" class="level4">
<h4>Answer accepted (score 3174)</h4>
<p><code>datetime.strptime</code> is the main routine for parsing strings into datetimes. It can handle all sorts of formats, with the format determined by a format string you give it:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb124-1" title="1"><span class="im">from</span> datetime <span class="im">import</span> datetime</a>
<a class="sourceLine" id="cb124-2" title="2"></a>
<a class="sourceLine" id="cb124-3" title="3">datetime_object <span class="op">=</span> datetime.strptime(<span class="st">&#39;Jun 1 2005  1:33PM&#39;</span>, <span class="st">&#39;%b </span><span class="sc">%d</span><span class="st"> %Y %I:%M%p&#39;</span>)</a></code></pre></div>
<p>The resulting <code>datetime</code> object is timezone-naive.</p>
<p>Links:</p>
<ul>
<li>
<p>
Python documentation for <code>strptime</code>: <a href="https://docs.python.org/2/library/datetime.html#datetime.datetime.strptime" rel="noreferrer" title="datetime.datetime.strptime">Python 2</a>, <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime" rel="noreferrer">Python 3</a>
</p>
</li>
<li>
<p>
Python documentation for <code>strptime</code>/<code>strftime</code> format strings: <a href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" rel="noreferrer" title="strftime-and-strptime-behavior">Python 2</a>, <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="noreferrer">Python 3</a>
</p>
</li>
<li>
<p>
<a href="http://strftime.org/" rel="noreferrer">strftime.org</a> is also a really nice reference for strftime
</p>
</li>
</ul>
<p>Notes:</p>
<ul>
<li>
<code>strptime</code> = “string parse time”
</li>
<li>
<code>strftime</code> = “string format time”
</li>
<li>
Pronounce it out loud today &amp; you won’t have to search for it again in 6 months.
</li>
</ul>
</section>
<section id="answer-2-score-757" class="level4">
<h4>Answer 2 (score 757)</h4>
<p>Use the third party <a href="https://dateutil.readthedocs.io" rel="nofollow noreferrer">dateutil</a> library:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb125-1" title="1"><span class="im">from</span> dateutil <span class="im">import</span> parser</a>
<a class="sourceLine" id="cb125-2" title="2">parser.parse(<span class="st">&quot;Aug 28 1999 12:00AM&quot;</span>)  <span class="co"># datetime.datetime(1999, 8, 28, 0, 0)</span></a></code></pre></div>
<p>It can handle most date formats, including the one you need to parse. It’s more convenient than <code>strptime</code> as it can guess the correct format most of the time.</p>
<p>It’s very useful for writing tests, where readability is more important than performance.</p>
<p>You can install it with:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb126-1" title="1">pip install python<span class="op">-</span>dateutil</a></code></pre></div>
</section>
<section id="answer-3-score-477-1" class="level4">
<h4>Answer 3 (score 477)</h4>
<p>Check out <a href="http://docs.python.org/3/library/time.html#time.strptime" rel="noreferrer">strptime</a> in the <a href="http://docs.python.org/3/library/time.html" rel="noreferrer">time</a> module. It is the inverse of <a href="http://docs.python.org/3/library/time.html#time.strftime" rel="noreferrer">strftime</a>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb127-1" title="1">$ python</a>
<a class="sourceLine" id="cb127-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> time</a>
<a class="sourceLine" id="cb127-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> time.strptime(<span class="st">&#39;Jun 1 2005  1:33PM&#39;</span>, <span class="st">&#39;%b </span><span class="sc">%d</span><span class="st"> %Y %I:%M%p&#39;</span>)</a>
<a class="sourceLine" id="cb127-4" title="4">time.struct_time(tm_year<span class="op">=</span><span class="dv">2005</span>, tm_mon<span class="op">=</span><span class="dv">6</span>, tm_mday<span class="op">=</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb127-5" title="5">                 tm_hour<span class="op">=</span><span class="dv">13</span>, tm_min<span class="op">=</span><span class="dv">33</span>, tm_sec<span class="op">=</span><span class="dv">0</span>,</a>
<a class="sourceLine" id="cb127-6" title="6">                 tm_wday<span class="op">=</span><span class="dv">2</span>, tm_yday<span class="op">=</span><span class="dv">152</span>, tm_isdst<span class="op">=-</span><span class="dv">1</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-a-substring-of-a-string-in-python-score-2671603-in-2019" class="level3">
<h3>20: How do I get a substring of a string in Python? (score <a href="https://stackoverflow.com/q/663171.html">2671603</a> in 2019)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>Is there a way to substring a string in Python, to get a new string from the third character to the end of the string?</p>
<p>Maybe like <code>myString[2:end]</code>?</p>
<p>If leaving the second part means ‘till the end’, and if you leave the first part, does it start from the start?</p>
</section>
<section id="answer-accepted-score-2939" class="level4">
<h4>Answer accepted (score 2939)</h4>
<div class="sourceCode" id="cb128"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb128-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> <span class="st">&quot;Hello World!&quot;</span></a>
<a class="sourceLine" id="cb128-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x[<span class="dv">2</span>:]</a>
<a class="sourceLine" id="cb128-3" title="3"><span class="co">&#39;llo World!&#39;</span></a>
<a class="sourceLine" id="cb128-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x[:<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb128-5" title="5"><span class="co">&#39;He&#39;</span></a>
<a class="sourceLine" id="cb128-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x[:<span class="op">-</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb128-7" title="7"><span class="co">&#39;Hello Worl&#39;</span></a>
<a class="sourceLine" id="cb128-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x[<span class="op">-</span><span class="dv">2</span>:]</a>
<a class="sourceLine" id="cb128-9" title="9"><span class="co">&#39;d!&#39;</span></a>
<a class="sourceLine" id="cb128-10" title="10"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x[<span class="dv">2</span>:<span class="op">-</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb128-11" title="11"><span class="co">&#39;llo Worl&#39;</span></a></code></pre></div>
<p>Python calls this concept “slicing” and it works on more than just strings. Take a look <a href="https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation">here</a> for a comprehensive introduction.</p>
</section>
<section id="answer-2-score-361" class="level4">
<h4>Answer 2 (score 361)</h4>
<p>Just for completeness as nobody else has mentioned it. The third parameter to an array slice is a step. So reversing a string is as simple as:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb129-1" title="1">some_string[::<span class="op">-</span><span class="dv">1</span>]</a></code></pre></div>
<p>Or selecting alternate characters would be:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb130-1" title="1"><span class="co">&quot;H-e-l-l-o- -W-o-r-l-d&quot;</span>[::<span class="dv">2</span>] <span class="co"># outputs &quot;Hello World&quot;</span></a></code></pre></div>
<p>The ability to step forwards and backwards through the string maintains consistency with being able to array slice from the start or end.</p>
</section>
<section id="answer-3-score-108" class="level4">
<h4>Answer 3 (score 108)</h4>
<p>Substr() normally (i.e. PHP and Perl) works this way:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb131-1" title="1">s <span class="op">=</span> Substr(s, beginning, LENGTH)</a></code></pre></div>
<p>So the parameters are <code>beginning</code> and <code>LENGTH</code>.</p>
<p>But Python’s behaviour is different; it expects beginning and one after END (!). <strong>This is difficult to spot by beginners.</strong> So the correct replacement for Substr(s, beginning, LENGTH) is</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb132-1" title="1">s <span class="op">=</span> s[ beginning : beginning <span class="op">+</span> LENGTH]</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-current-directory-and-files-directory-score-2648748-in-2016" class="level3">
<h3>21: Find current directory and file’s directory (score <a href="https://stackoverflow.com/q/5137497.html">2648748</a> in 2016)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>In Python, what commands can I use to find:</p>
<ol>
<li>
the current directory (where I was in the terminal when I ran the Python script), and
</li>
<li>
where the file I am executing is?
</li>
</ol>
</section>
<section id="answer-accepted-score-3058" class="level4">
<h4>Answer accepted (score 3058)</h4>
<p>To get the full path to the directory a Python file is contained in, write this in that file:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb133-1" title="1"><span class="im">import</span> os </a>
<a class="sourceLine" id="cb133-2" title="2">dir_path <span class="op">=</span> os.path.dirname(os.path.realpath(<span class="va">__file__</span>))</a></code></pre></div>
<p>(Note that the incantation above won’t work if you’ve already used <code>os.chdir()</code> to change your current working directory, since the value of the <code>__file__</code> constant is relative to the current working directory and is not changed by an <code>os.chdir()</code> call.)</p>
<hr>
<p>To get the current working directory use</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb134-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb134-2" title="2">cwd <span class="op">=</span> os.getcwd()</a></code></pre></div>
<hr>
<p>Documentation references for the modules, constants and functions used above:</p>
<ul>
<li>
The <a href="https://docs.python.org/library/os.html"><code>os</code></a> and <a href="https://docs.python.org/library/os.path.html#module-os.path"><code>os.path</code></a> modules.
</li>
<li>
The <a href="https://docs.python.org/reference/datamodel.html"><code>__file__</code></a> constant
</li>
<li>
<a href="https://docs.python.org/library/os.path.html#os.path.realpath"><code>os.path.realpath(path)</code></a> (returns <em>“the canonical path of the specified filename, eliminating any symbolic links encountered in the path”</em>)
</li>
<li>
<a href="https://docs.python.org/library/os.path.html#os.path.dirname"><code>os.path.dirname(path)</code></a> (returns <em>“the directory name of pathname <code>path</code>”</em>)
</li>
<li>
<a href="https://docs.python.org/library/os.html#os.getcwd"><code>os.getcwd()</code></a> (returns <em>“a string representing the current working directory”</em>)
</li>
<li>
<a href="https://docs.python.org/library/os.html#os.chdir"><code>os.chdir(path)</code></a> (<em>“change the current working directory to <code>path</code>”</em>)
</li>
</ul>
</section>
<section id="answer-2-score-308" class="level4">
<h4>Answer 2 (score 308)</h4>
<p>Current Working Directory: <a href="https://docs.python.org/2/library/os.html#os.getcwd" rel="noreferrer"><code>os.getcwd()</code></a></p>
<p>And the <a href="http://docs.python.org/reference/datamodel.html" rel="noreferrer"><code>__file__</code> attribute</a> can help you find out where the file you are executing is located. This SO post explains everything: <a href="https://stackoverflow.com/questions/2632199/how-do-i-get-the-path-of-the-current-executed-file-in-python">How do I get the path of the current executed file in Python?</a></p>
</section>
<section id="answer-3-score-260" class="level4">
<h4>Answer 3 (score 260)</h4>
<p>You may find this useful as a reference:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb135-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb135-2" title="2"></a>
<a class="sourceLine" id="cb135-3" title="3"><span class="bu">print</span>(<span class="st">&quot;Path at terminal when executing this file&quot;</span>)</a>
<a class="sourceLine" id="cb135-4" title="4"><span class="bu">print</span>(os.getcwd() <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb135-5" title="5"></a>
<a class="sourceLine" id="cb135-6" title="6"><span class="bu">print</span>(<span class="st">&quot;This file path, relative to os.getcwd()&quot;</span>)</a>
<a class="sourceLine" id="cb135-7" title="7"><span class="bu">print</span>(<span class="va">__file__</span> <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb135-8" title="8"></a>
<a class="sourceLine" id="cb135-9" title="9"><span class="bu">print</span>(<span class="st">&quot;This file full path (following symlinks)&quot;</span>)</a>
<a class="sourceLine" id="cb135-10" title="10">full_path <span class="op">=</span> os.path.realpath(<span class="va">__file__</span>)</a>
<a class="sourceLine" id="cb135-11" title="11"><span class="bu">print</span>(full_path <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb135-12" title="12"></a>
<a class="sourceLine" id="cb135-13" title="13"><span class="bu">print</span>(<span class="st">&quot;This file directory and name&quot;</span>)</a>
<a class="sourceLine" id="cb135-14" title="14">path, filename <span class="op">=</span> os.path.split(full_path)</a>
<a class="sourceLine" id="cb135-15" title="15"><span class="bu">print</span>(path <span class="op">+</span> <span class="st">&#39; --&amp;gt; &#39;</span> <span class="op">+</span> filename <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb135-16" title="16"></a>
<a class="sourceLine" id="cb135-17" title="17"><span class="bu">print</span>(<span class="st">&quot;This file directory only&quot;</span>)</a>
<a class="sourceLine" id="cb135-18" title="18"><span class="bu">print</span>(os.path.dirname(full_path))</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-cant-python-parse-this-json-data-score-2591542-in-2019" class="level3">
<h3>22: Why can’t Python parse this JSON data? (score <a href="https://stackoverflow.com/q/2835559.html">2591542</a> in 2019)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>I have this JSON in a file:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb136-1" title="1">{</a>
<a class="sourceLine" id="cb136-2" title="2">    <span class="st">&quot;maps&quot;</span>: [</a>
<a class="sourceLine" id="cb136-3" title="3">        {</a>
<a class="sourceLine" id="cb136-4" title="4">            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</a>
<a class="sourceLine" id="cb136-5" title="5">            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></a>
<a class="sourceLine" id="cb136-6" title="6">        },</a>
<a class="sourceLine" id="cb136-7" title="7">        {</a>
<a class="sourceLine" id="cb136-8" title="8">            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</a>
<a class="sourceLine" id="cb136-9" title="9">            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></a>
<a class="sourceLine" id="cb136-10" title="10">        }</a>
<a class="sourceLine" id="cb136-11" title="11">    ],</a>
<a class="sourceLine" id="cb136-12" title="12">    <span class="st">&quot;masks&quot;</span>: [</a>
<a class="sourceLine" id="cb136-13" title="13">        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></a>
<a class="sourceLine" id="cb136-14" title="14">    ],</a>
<a class="sourceLine" id="cb136-15" title="15">    <span class="st">&quot;om_points&quot;</span>: <span class="st">&quot;value&quot;</span>,</a>
<a class="sourceLine" id="cb136-16" title="16">    <span class="st">&quot;parameters&quot;</span>: [</a>
<a class="sourceLine" id="cb136-17" title="17">        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></a>
<a class="sourceLine" id="cb136-18" title="18">    ]</a>
<a class="sourceLine" id="cb136-19" title="19">}</a></code></pre></div>
<p>I wrote this script to print all of the JSON data:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb137-1" title="1"><span class="im">import</span> json</a>
<a class="sourceLine" id="cb137-2" title="2"><span class="im">from</span> pprint <span class="im">import</span> pprint</a>
<a class="sourceLine" id="cb137-3" title="3"></a>
<a class="sourceLine" id="cb137-4" title="4"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>) <span class="im">as</span> f:</a>
<a class="sourceLine" id="cb137-5" title="5">    data <span class="op">=</span> json.load(f)</a>
<a class="sourceLine" id="cb137-6" title="6"></a>
<a class="sourceLine" id="cb137-7" title="7">pprint(data)</a></code></pre></div>
<p>This program raises an exception, though:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb138-1" title="1">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb138-2" title="2">  File <span class="st">&quot;&amp;lt;pyshell#1&amp;gt;&quot;</span>, line <span class="dv">5</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb138-3" title="3">    data <span class="op">=</span> json.load(f)</a>
<a class="sourceLine" id="cb138-4" title="4">  File <span class="st">&quot;/usr/lib/python3.5/json/__init__.py&quot;</span>, line <span class="dv">319</span>, <span class="kw">in</span> loads</a>
<a class="sourceLine" id="cb138-5" title="5">    <span class="cf">return</span> _default_decoder.decode(s)</a>
<a class="sourceLine" id="cb138-6" title="6">  File <span class="st">&quot;/usr/lib/python3.5/json/decoder.py&quot;</span>, line <span class="dv">339</span>, <span class="kw">in</span> decode</a>
<a class="sourceLine" id="cb138-7" title="7">    obj, end <span class="op">=</span> <span class="va">self</span>.raw_decode(s, idx<span class="op">=</span>_w(s, <span class="dv">0</span>).end())</a>
<a class="sourceLine" id="cb138-8" title="8">  File <span class="st">&quot;/usr/lib/python3.5/json/decoder.py&quot;</span>, line <span class="dv">355</span>, <span class="kw">in</span> raw_decode</a>
<a class="sourceLine" id="cb138-9" title="9">    obj, end <span class="op">=</span> <span class="va">self</span>.scan_once(s, idx)</a>
<a class="sourceLine" id="cb138-10" title="10">json.decoder.JSONDecodeError: Expecting <span class="st">&#39;,&#39;</span> delimiter: line <span class="dv">13</span> column <span class="dv">13</span> (char <span class="dv">213</span>)</a></code></pre></div>
<p>How can I parse the JSON and extract its values?</p>
</section>
<section id="answer-accepted-score-2081" class="level4">
<h4>Answer accepted (score 2081)</h4>
<p>Your data is not valid <a href="https://www.json.org/" rel="noreferrer">JSON</a> format. You have <code>[]</code> when you should have <code>{}</code>:</p>
<ul>
<li>
<code>[]</code> are for JSON arrays, which are called <code>list</code> in Python
</li>
<li>
<code>{}</code> are for JSON objects, which are called <code>dict</code> in Python
</li>
</ul>
<p>Here’s how your JSON file should look:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb139-1" title="1">{</a>
<a class="sourceLine" id="cb139-2" title="2">    <span class="st">&quot;maps&quot;</span>: [</a>
<a class="sourceLine" id="cb139-3" title="3">        {</a>
<a class="sourceLine" id="cb139-4" title="4">            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</a>
<a class="sourceLine" id="cb139-5" title="5">            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></a>
<a class="sourceLine" id="cb139-6" title="6">        },</a>
<a class="sourceLine" id="cb139-7" title="7">        {</a>
<a class="sourceLine" id="cb139-8" title="8">            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</a>
<a class="sourceLine" id="cb139-9" title="9">            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></a>
<a class="sourceLine" id="cb139-10" title="10">        }</a>
<a class="sourceLine" id="cb139-11" title="11">    ],</a>
<a class="sourceLine" id="cb139-12" title="12">    <span class="st">&quot;masks&quot;</span>: {</a>
<a class="sourceLine" id="cb139-13" title="13">        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></a>
<a class="sourceLine" id="cb139-14" title="14">    },</a>
<a class="sourceLine" id="cb139-15" title="15">    <span class="st">&quot;om_points&quot;</span>: <span class="st">&quot;value&quot;</span>,</a>
<a class="sourceLine" id="cb139-16" title="16">    <span class="st">&quot;parameters&quot;</span>: {</a>
<a class="sourceLine" id="cb139-17" title="17">        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></a>
<a class="sourceLine" id="cb139-18" title="18">    }</a>
<a class="sourceLine" id="cb139-19" title="19">}</a></code></pre></div>
<p>Then you can use your code:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb140-1" title="1"><span class="im">import</span> json</a>
<a class="sourceLine" id="cb140-2" title="2"><span class="im">from</span> pprint <span class="im">import</span> pprint</a>
<a class="sourceLine" id="cb140-3" title="3"></a>
<a class="sourceLine" id="cb140-4" title="4"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>) <span class="im">as</span> f:</a>
<a class="sourceLine" id="cb140-5" title="5">    data <span class="op">=</span> json.load(f)</a>
<a class="sourceLine" id="cb140-6" title="6"></a>
<a class="sourceLine" id="cb140-7" title="7">pprint(data)</a></code></pre></div>
<p>With data, you can now also find values like so:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb141-1" title="1">data[<span class="st">&quot;maps&quot;</span>][<span class="dv">0</span>][<span class="st">&quot;id&quot;</span>]</a>
<a class="sourceLine" id="cb141-2" title="2">data[<span class="st">&quot;masks&quot;</span>][<span class="st">&quot;id&quot;</span>]</a>
<a class="sourceLine" id="cb141-3" title="3">data[<span class="st">&quot;om_points&quot;</span>]</a></code></pre></div>
<p>Try those out and see if it starts to make sense.</p>
</section>
<section id="answer-2-score-304" class="level4">
<h4>Answer 2 (score 304)</h4>
<p>Your <code>data.json</code> should look like this:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb142-1" title="1">{</a>
<a class="sourceLine" id="cb142-2" title="2"> <span class="st">&quot;maps&quot;</span>:[</a>
<a class="sourceLine" id="cb142-3" title="3">         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;blabla&quot;</span>,<span class="st">&quot;iscategorical&quot;</span>:<span class="st">&quot;0&quot;</span>},</a>
<a class="sourceLine" id="cb142-4" title="4">         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;blabla&quot;</span>,<span class="st">&quot;iscategorical&quot;</span>:<span class="st">&quot;0&quot;</span>}</a>
<a class="sourceLine" id="cb142-5" title="5">        ],</a>
<a class="sourceLine" id="cb142-6" title="6"><span class="st">&quot;masks&quot;</span>:</a>
<a class="sourceLine" id="cb142-7" title="7">         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;valore&quot;</span>},</a>
<a class="sourceLine" id="cb142-8" title="8"><span class="st">&quot;om_points&quot;</span>:<span class="st">&quot;value&quot;</span>,</a>
<a class="sourceLine" id="cb142-9" title="9"><span class="st">&quot;parameters&quot;</span>:</a>
<a class="sourceLine" id="cb142-10" title="10">         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;valore&quot;</span>}</a>
<a class="sourceLine" id="cb142-11" title="11">}</a></code></pre></div>
<p>Your code should be:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb143-1" title="1"><span class="im">import</span> json</a>
<a class="sourceLine" id="cb143-2" title="2"><span class="im">from</span> pprint <span class="im">import</span> pprint</a>
<a class="sourceLine" id="cb143-3" title="3"></a>
<a class="sourceLine" id="cb143-4" title="4"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>) <span class="im">as</span> data_file:    </a>
<a class="sourceLine" id="cb143-5" title="5">    data <span class="op">=</span> json.load(data_file)</a>
<a class="sourceLine" id="cb143-6" title="6">pprint(data)</a></code></pre></div>
<p>Note that this only works in Python 2.6 and up, as it depends upon the <a href="http://docs.python.org/2/reference/compound_stmts.html#the-with-statement" rel="noreferrer"><code>with</code>-statement</a>. In Python 2.5 use <code>from __future__ import with_statement</code>, in Python &lt;= 2.4, see <a href="https://stackoverflow.com/a/2835672/906658">Justin Peel’s answer</a>, which this answer is based upon.</p>
<p>You can now also access single values like this:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb144-1" title="1">data[<span class="st">&quot;maps&quot;</span>][<span class="dv">0</span>][<span class="st">&quot;id&quot;</span>]  <span class="co"># will return &#39;blabla&#39;</span></a>
<a class="sourceLine" id="cb144-2" title="2">data[<span class="st">&quot;masks&quot;</span>][<span class="st">&quot;id&quot;</span>]    <span class="co"># will return &#39;valore&#39;</span></a>
<a class="sourceLine" id="cb144-3" title="3">data[<span class="st">&quot;om_points&quot;</span>]      <span class="co"># will return &#39;value&#39;</span></a></code></pre></div>
</section>
<section id="answer-3-score-64" class="level4">
<h4>Answer 3 (score 64)</h4>
<p><a href="https://stackoverflow.com/a/2835672/906658">Justin Peel’s answer</a> is really helpful, but if you are using Python 3 reading JSON should be done like this:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb145-1" title="1"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>, encoding<span class="op">=</span><span class="st">&#39;utf-8&#39;</span>) <span class="im">as</span> data_file:</a>
<a class="sourceLine" id="cb145-2" title="2">    data <span class="op">=</span> json.loads(data_file.read())</a></code></pre></div>
<p>Note: use <code>json.loads</code> instead of <code>json.load</code>. In Python 3, <code>json.loads</code> takes a string parameter. <code>json.load</code> takes a file-like object parameter. <code>data_file.read()</code> returns a string object.</p>
<p>To be honest, I don’t think it’s a problem to load all json data into memory most cases.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-if-name-main-do-score-2531456-in-2018" class="level3">
<h3>23: What does if <strong>name</strong> == “<strong>main</strong>”: do? (score <a href="https://stackoverflow.com/q/419163.html">2531456</a> in 2018)</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>What does the <code>if __name__ == &quot;__main__&quot;:</code> do?</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb146-1" title="1"><span class="co"># Threading example</span></a>
<a class="sourceLine" id="cb146-2" title="2"><span class="im">import</span> time, thread</a>
<a class="sourceLine" id="cb146-3" title="3"></a>
<a class="sourceLine" id="cb146-4" title="4"><span class="kw">def</span> myfunction(string, sleeptime, lock, <span class="op">*</span>args):</a>
<a class="sourceLine" id="cb146-5" title="5">    <span class="cf">while</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb146-6" title="6">        lock.acquire()</a>
<a class="sourceLine" id="cb146-7" title="7">        time.sleep(sleeptime)</a>
<a class="sourceLine" id="cb146-8" title="8">        lock.release()</a>
<a class="sourceLine" id="cb146-9" title="9">        time.sleep(sleeptime)</a>
<a class="sourceLine" id="cb146-10" title="10"></a>
<a class="sourceLine" id="cb146-11" title="11"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb146-12" title="12">    lock <span class="op">=</span> thread.allocate_lock()</a>
<a class="sourceLine" id="cb146-13" title="13">    thread.start_new_thread(myfunction, (<span class="st">&quot;Thread #: 1&quot;</span>, <span class="dv">2</span>, lock))</a>
<a class="sourceLine" id="cb146-14" title="14">    thread.start_new_thread(myfunction, (<span class="st">&quot;Thread #: 2&quot;</span>, <span class="dv">2</span>, lock))</a></code></pre></div>
</section>
<section id="answer-accepted-score-5891" class="level4">
<h4>Answer accepted (score 5891)</h4>
<p>Whenever the Python interpreter reads a source file, it does two things:</p>
<ul>
<li>
<p>
it sets a few special variables like <code>__name__</code>, and then
</p>
</li>
<li>
<p>
it executes all of the code found in the file.
</p>
</li>
</ul>
<p>Let’s see how this works and how it relates to your question about the <code>__name__</code> checks we always see in Python scripts.</p>
<h5>
Code Sample
</h1>
<p>Let’s use a slightly different code sample to explore how imports and scripts work. Suppose the following is in a file called <code>foo.py</code>.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb147-1" title="1"><span class="co"># Suppose this is foo.py.</span></a>
<a class="sourceLine" id="cb147-2" title="2"></a>
<a class="sourceLine" id="cb147-3" title="3"><span class="bu">print</span>(<span class="st">&quot;before import&quot;</span>)</a>
<a class="sourceLine" id="cb147-4" title="4"><span class="im">import</span> math</a>
<a class="sourceLine" id="cb147-5" title="5"></a>
<a class="sourceLine" id="cb147-6" title="6"><span class="bu">print</span>(<span class="st">&quot;before functionA&quot;</span>)</a>
<a class="sourceLine" id="cb147-7" title="7"><span class="kw">def</span> functionA():</a>
<a class="sourceLine" id="cb147-8" title="8">    <span class="bu">print</span>(<span class="st">&quot;Function A&quot;</span>)</a>
<a class="sourceLine" id="cb147-9" title="9"></a>
<a class="sourceLine" id="cb147-10" title="10"><span class="bu">print</span>(<span class="st">&quot;before functionB&quot;</span>)</a>
<a class="sourceLine" id="cb147-11" title="11"><span class="kw">def</span> functionB():</a>
<a class="sourceLine" id="cb147-12" title="12">    <span class="bu">print</span>(<span class="st">&quot;Function B </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(math.sqrt(<span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb147-13" title="13"></a>
<a class="sourceLine" id="cb147-14" title="14"><span class="bu">print</span>(<span class="st">&quot;before __name__ guard&quot;</span>)</a>
<a class="sourceLine" id="cb147-15" title="15"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</a>
<a class="sourceLine" id="cb147-16" title="16">    functionA()</a>
<a class="sourceLine" id="cb147-17" title="17">    functionB()</a>
<a class="sourceLine" id="cb147-18" title="18"><span class="bu">print</span>(<span class="st">&quot;after __name__ guard&quot;</span>)</a></code></pre></div>
<h5>
Special Variables
</h1>
<p>When the Python interpeter reads a source file, it first defines a few special variables. In this case, we care about the <code>__name__</code> variable.</p>
<p><strong>When Your Module Is the Main Program</strong></p>
<p>If you are running your module (the source file) as the main program, e.g.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb148-1" title="1">python foo.py</a></code></pre></div>
<p>the interpreter will assign the hard-coded string <code>&quot;__main__&quot;</code> to the <code>__name__</code> variable, i.e.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb149-1" title="1"><span class="co"># It&#39;s as if the interpreter inserts this at the top</span></a>
<a class="sourceLine" id="cb149-2" title="2"><span class="co"># of your module when run as the main program.</span></a>
<a class="sourceLine" id="cb149-3" title="3"><span class="va">__name__</span> <span class="op">=</span> <span class="st">&quot;__main__&quot;</span> </a></code></pre></div>
<p><strong>When Your Module Is Imported By Another</strong></p>
<p>On the other hand, suppose some other module is the main program and it imports your module. This means there’s a statement like this in the main program, or in some other module the main program imports:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb150-1" title="1"><span class="co"># Suppose this is in some other main program.</span></a>
<a class="sourceLine" id="cb150-2" title="2"><span class="im">import</span> foo</a></code></pre></div>
<p>In this case, the interpreter will look at the filename of your module, <code>foo.py</code>, strip off the <code>.py</code>, and assign that string to your module’s <code>__name__</code> variable, i.e.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb151-1" title="1"><span class="co"># It&#39;s as if the interpreter inserts this at the top</span></a>
<a class="sourceLine" id="cb151-2" title="2"><span class="co"># of your module when it&#39;s imported from another module.</span></a>
<a class="sourceLine" id="cb151-3" title="3"><span class="va">__name__</span> <span class="op">=</span> <span class="st">&quot;foo&quot;</span></a></code></pre></div>
<h5>
Executing the Module’s Code
</h1>
<p>After the special variables are set up, the interpreter executes all the code in the module, one statement at a time. You may want to open another window on the side with the code sample so you can follow along with this explanation.</p>
<p><strong>Always</strong></p>
<ol>
<li>
<p>
It prints the string <code>&quot;before import&quot;</code> (without quotes).
</p>
</li>
<li>
<p>
It loads the <code>math</code> module and assigns it to a variable called <code>math</code>. This is equivalent to replacing <code>import math</code> with the following (note that <code>__import__</code> is a low-level function in Python that takes a string and triggers the actual import):
</p>
</li>
</ol>
<div class="sourceCode" id="cb152"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb152-1" title="1"><span class="co"># Find and load a module given its string name, &quot;math&quot;,</span></a>
<a class="sourceLine" id="cb152-2" title="2"><span class="co"># then assign it to a local variable called math.</span></a>
<a class="sourceLine" id="cb152-3" title="3">math <span class="op">=</span> <span class="bu">__import__</span>(<span class="st">&quot;math&quot;</span>)</a></code></pre></div>
<ol start="3">
<li>
<p>
It prints the string <code>&quot;before functionA&quot;</code>.
</p>
</li>
<li>
<p>
It executes the <code>def</code> block, creating a function object, then assigning that function object to a variable called <code>functionA</code>.
</p>
</li>
<li>
<p>
It prints the string <code>&quot;before functionB&quot;</code>.
</p>
</li>
<li>
<p>
It executes the second <code>def</code> block, creating another function object, then assigning it to a variable called <code>functionB</code>.
</p>
</li>
<li>
<p>
It prints the string <code>&quot;before __name__ guard&quot;</code>.
</p>
</li>
</ol>
<p><strong>Only When Your Module Is the Main Program</strong></p>
<ol start="8">
<li>
If your module is the main program, then it will see that <code>__name__</code> was indeed set to <code>&quot;__main__&quot;</code> and it calls the two functions, printing the strings <code>&quot;Function A&quot;</code> and <code>&quot;Function B 10.0&quot;</code>.
</li>
</ol>
<p><strong>Only When Your Module Is Imported by Another</strong></p>
<ol start="8">
<li>
(<strong>instead</strong>) If your module is not the main program but was imported by another one, then <code>__name__</code> will be <code>&quot;foo&quot;</code>, not <code>&quot;__main__&quot;</code>, and it’ll skip the body of the <code>if</code> statement.
</li>
</ol>
<p><strong>Always</strong></p>
<ol start="9">
<li>
It will print the string <code>&quot;after __name__ guard&quot;</code> in both situations.
</li>
</ol>
<p><strong><em>Summary</em></strong></p>
<p>In summary, here’s what’d be printed in the two cases:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb153-1" title="1"><span class="co"># What gets printed if foo is the main program</span></a>
<a class="sourceLine" id="cb153-2" title="2">before <span class="im">import</span></a>
<a class="sourceLine" id="cb153-3" title="3">before functionA</a>
<a class="sourceLine" id="cb153-4" title="4">before functionB</a>
<a class="sourceLine" id="cb153-5" title="5">before <span class="va">__name__</span> guard</a>
<a class="sourceLine" id="cb153-6" title="6">Function A</a>
<a class="sourceLine" id="cb153-7" title="7">Function B <span class="fl">10.0</span></a>
<a class="sourceLine" id="cb153-8" title="8">after <span class="va">__name__</span> guard</a></code></pre></div>
<div class="sourceCode" id="cb154"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb154-1" title="1"><span class="co"># What gets printed if foo is imported as a regular module</span></a>
<a class="sourceLine" id="cb154-2" title="2">before <span class="im">import</span></a>
<a class="sourceLine" id="cb154-3" title="3">before functionA</a>
<a class="sourceLine" id="cb154-4" title="4">before functionB</a>
<a class="sourceLine" id="cb154-5" title="5">before <span class="va">__name__</span> guard</a>
<a class="sourceLine" id="cb154-6" title="6">after <span class="va">__name__</span> guard</a></code></pre></div>
<h5>
Why Does It Work This Way?
</h1>
<p>You might naturally wonder why anybody would want this. Well, sometimes you want to write a <code>.py</code> file that can be both used by other programs and/or modules as a module, and can also be run as the main program itself. Examples:</p>
<ul>
<li>
<p>
Your module is a library, but you want to have a script mode where it runs some unit tests or a demo.
</p>
</li>
<li>
<p>
Your module is only used as a main program, but it has some unit tests, and the testing framework works by importing <code>.py</code> files like your script and running special test functions. You don’t want it to try running the script just because it’s importing the module.
</p>
</li>
<li>
<p>
Your module is mostly used as a main program, but it also provides a programmer-friendly API for advanced users.
</p>
</li>
</ul>
<p>Beyond those examples, it’s elegant that running a script in Python is just setting up a few magic variables and importing the script. “Running” the script is a side effect of importing the script’s module.</p>
<h5>
Food for Thought
</h1>
<ul>
<li>
<p>
Question: Can I have multiple <code>__name__</code> checking blocks? Answer: it’s strange to do so, but the language won’t stop you.
</p>
</li>
<li>
<p>
Suppose the following is in <code>foo2.py</code>. What happens if you say <code>python foo2.py</code> on the command-line? Why?
</p>
</li>
</ul>
<div class="sourceCode" id="cb155"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb155-1" title="1"><span class="co"># Suppose this is foo2.py.</span></a>
<a class="sourceLine" id="cb155-2" title="2"></a>
<a class="sourceLine" id="cb155-3" title="3"><span class="kw">def</span> functionA():</a>
<a class="sourceLine" id="cb155-4" title="4">    <span class="bu">print</span>(<span class="st">&quot;a1&quot;</span>)</a>
<a class="sourceLine" id="cb155-5" title="5">    <span class="im">from</span> foo2 <span class="im">import</span> functionB</a>
<a class="sourceLine" id="cb155-6" title="6">    <span class="bu">print</span>(<span class="st">&quot;a2&quot;</span>)</a>
<a class="sourceLine" id="cb155-7" title="7">    functionB()</a>
<a class="sourceLine" id="cb155-8" title="8">    <span class="bu">print</span>(<span class="st">&quot;a3&quot;</span>)</a>
<a class="sourceLine" id="cb155-9" title="9"></a>
<a class="sourceLine" id="cb155-10" title="10"><span class="kw">def</span> functionB():</a>
<a class="sourceLine" id="cb155-11" title="11">    <span class="bu">print</span>(<span class="st">&quot;b&quot;</span>)</a>
<a class="sourceLine" id="cb155-12" title="12"></a>
<a class="sourceLine" id="cb155-13" title="13"><span class="bu">print</span>(<span class="st">&quot;t1&quot;</span>)</a>
<a class="sourceLine" id="cb155-14" title="14"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb155-15" title="15">    <span class="bu">print</span>(<span class="st">&quot;m1&quot;</span>)</a>
<a class="sourceLine" id="cb155-16" title="16">    functionA()</a>
<a class="sourceLine" id="cb155-17" title="17">    <span class="bu">print</span>(<span class="st">&quot;m2&quot;</span>)</a>
<a class="sourceLine" id="cb155-18" title="18"><span class="bu">print</span>(<span class="st">&quot;t2&quot;</span>)</a></code></pre></div>
<ul>
<li>
Now, figure out what will happen if you remove the <code>__name__</code> check in <code>foo3.py</code>:
</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb156-1" title="1"><span class="co"># Suppose this is foo3.py.</span></a>
<a class="sourceLine" id="cb156-2" title="2"></a>
<a class="sourceLine" id="cb156-3" title="3"><span class="kw">def</span> functionA():</a>
<a class="sourceLine" id="cb156-4" title="4">    <span class="bu">print</span>(<span class="st">&quot;a1&quot;</span>)</a>
<a class="sourceLine" id="cb156-5" title="5">    <span class="im">from</span> foo3 <span class="im">import</span> functionB</a>
<a class="sourceLine" id="cb156-6" title="6">    <span class="bu">print</span>(<span class="st">&quot;a2&quot;</span>)</a>
<a class="sourceLine" id="cb156-7" title="7">    functionB()</a>
<a class="sourceLine" id="cb156-8" title="8">    <span class="bu">print</span>(<span class="st">&quot;a3&quot;</span>)</a>
<a class="sourceLine" id="cb156-9" title="9"></a>
<a class="sourceLine" id="cb156-10" title="10"><span class="kw">def</span> functionB():</a>
<a class="sourceLine" id="cb156-11" title="11">    <span class="bu">print</span>(<span class="st">&quot;b&quot;</span>)</a>
<a class="sourceLine" id="cb156-12" title="12"></a>
<a class="sourceLine" id="cb156-13" title="13"><span class="bu">print</span>(<span class="st">&quot;t1&quot;</span>)</a>
<a class="sourceLine" id="cb156-14" title="14"><span class="bu">print</span>(<span class="st">&quot;m1&quot;</span>)</a>
<a class="sourceLine" id="cb156-15" title="15">functionA()</a>
<a class="sourceLine" id="cb156-16" title="16"><span class="bu">print</span>(<span class="st">&quot;m2&quot;</span>)</a>
<a class="sourceLine" id="cb156-17" title="17"><span class="bu">print</span>(<span class="st">&quot;t2&quot;</span>)</a></code></pre></div>
<ul>
<li>
What will this do when used as a script? When imported as a module?
</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb157-1" title="1"><span class="co"># Suppose this is in foo4.py</span></a>
<a class="sourceLine" id="cb157-2" title="2"><span class="va">__name__</span> <span class="op">=</span> <span class="st">&quot;__main__&quot;</span></a>
<a class="sourceLine" id="cb157-3" title="3"></a>
<a class="sourceLine" id="cb157-4" title="4"><span class="kw">def</span> bar():</a>
<a class="sourceLine" id="cb157-5" title="5">    <span class="bu">print</span>(<span class="st">&quot;bar&quot;</span>)</a>
<a class="sourceLine" id="cb157-6" title="6"></a>
<a class="sourceLine" id="cb157-7" title="7"><span class="bu">print</span>(<span class="st">&quot;before __name__ guard&quot;</span>)</a>
<a class="sourceLine" id="cb157-8" title="8"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb157-9" title="9">    bar()</a>
<a class="sourceLine" id="cb157-10" title="10"><span class="bu">print</span>(<span class="st">&quot;after __name__ guard&quot;</span>)</a></code></pre></div>
</section>
<section id="answer-2-score-1696" class="level4">
<h4>Answer 2 (score 1696)</h4>
<p>When your script is run by passing it as a command to the Python interpreter,</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb158-1" title="1">python myscript.py</a></code></pre></div>
<p>all of the code that is at indentation level 0 gets executed. Functions and classes that are defined are, well, defined, but none of their code gets run. Unlike other languages, there’s no <code>main()</code> function that gets run automatically - the <code>main()</code> function is implicitly all the code at the top level.</p>
<p>In this case, the top-level code is an <code>if</code> block. <code>__name__</code> is a built-in variable which evaluates to the name of the current module. However, if a module is being run directly (as in <code>myscript.py</code> above), then <code>__name__</code> instead is set to the string <code>&quot;__main__&quot;</code>. Thus, you can test whether your script is being run directly or being imported by something else by testing</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb159-1" title="1"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb159-2" title="2">    ...</a></code></pre></div>
<p>If your script is being imported into another module, its various function and class definitions will be imported and its top-level code will be executed, but the code in the then-body of the <code>if</code> clause above won’t get run as the condition is not met. As a basic example, consider the following two scripts:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb160-1" title="1"><span class="co"># file one.py</span></a>
<a class="sourceLine" id="cb160-2" title="2"><span class="kw">def</span> func():</a>
<a class="sourceLine" id="cb160-3" title="3">    <span class="bu">print</span>(<span class="st">&quot;func() in one.py&quot;</span>)</a>
<a class="sourceLine" id="cb160-4" title="4"></a>
<a class="sourceLine" id="cb160-5" title="5"><span class="bu">print</span>(<span class="st">&quot;top-level in one.py&quot;</span>)</a>
<a class="sourceLine" id="cb160-6" title="6"></a>
<a class="sourceLine" id="cb160-7" title="7"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb160-8" title="8">    <span class="bu">print</span>(<span class="st">&quot;one.py is being run directly&quot;</span>)</a>
<a class="sourceLine" id="cb160-9" title="9"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb160-10" title="10">    <span class="bu">print</span>(<span class="st">&quot;one.py is being imported into another module&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb161"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb161-1" title="1"><span class="co"># file two.py</span></a>
<a class="sourceLine" id="cb161-2" title="2"><span class="im">import</span> one</a>
<a class="sourceLine" id="cb161-3" title="3"></a>
<a class="sourceLine" id="cb161-4" title="4"><span class="bu">print</span>(<span class="st">&quot;top-level in two.py&quot;</span>)</a>
<a class="sourceLine" id="cb161-5" title="5">one.func()</a>
<a class="sourceLine" id="cb161-6" title="6"></a>
<a class="sourceLine" id="cb161-7" title="7"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb161-8" title="8">    <span class="bu">print</span>(<span class="st">&quot;two.py is being run directly&quot;</span>)</a>
<a class="sourceLine" id="cb161-9" title="9"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb161-10" title="10">    <span class="bu">print</span>(<span class="st">&quot;two.py is being imported into another module&quot;</span>)</a></code></pre></div>
<p>Now, if you invoke the interpreter as</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb162-1" title="1">python one.py</a></code></pre></div>
<p>The output will be</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb163-1" title="1">top<span class="op">-</span>level <span class="kw">in</span> one.py</a>
<a class="sourceLine" id="cb163-2" title="2">one.py <span class="kw">is</span> being run directly</a></code></pre></div>
<p>If you run <code>two.py</code> instead:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb164-1" title="1">python two.py</a></code></pre></div>
<p>You get</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb165-1" title="1">top<span class="op">-</span>level <span class="kw">in</span> one.py</a>
<a class="sourceLine" id="cb165-2" title="2">one.py <span class="kw">is</span> being imported into another module</a>
<a class="sourceLine" id="cb165-3" title="3">top<span class="op">-</span>level <span class="kw">in</span> two.py</a>
<a class="sourceLine" id="cb165-4" title="4">func() <span class="kw">in</span> one.py</a>
<a class="sourceLine" id="cb165-5" title="5">two.py <span class="kw">is</span> being run directly</a></code></pre></div>
<p>Thus, when module <code>one</code> gets loaded, its <code>__name__</code> equals <code>&quot;one&quot;</code> instead of <code>&quot;__main__&quot;</code>.</p>
</section>
<section id="answer-3-score-676" class="level4">
<h4>Answer 3 (score 676)</h4>
<p>The simplest explanation for the <code>__name__</code> variable (imho) is the following:</p>
<p>Create the following files.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb166-1" title="1"><span class="co"># a.py</span></a>
<a class="sourceLine" id="cb166-2" title="2"><span class="im">import</span> b</a></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb167-1" title="1"><span class="co"># b.py</span></a>
<a class="sourceLine" id="cb167-2" title="2"><span class="bu">print</span> <span class="st">&quot;Hello World from </span><span class="sc">%s</span><span class="st">!&quot;</span> <span class="op">%</span> <span class="va">__name__</span></a>
<a class="sourceLine" id="cb167-3" title="3"></a>
<a class="sourceLine" id="cb167-4" title="4"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</a>
<a class="sourceLine" id="cb167-5" title="5">    <span class="bu">print</span> <span class="st">&quot;Hello World again from </span><span class="sc">%s</span><span class="st">!&quot;</span> <span class="op">%</span> <span class="va">__name__</span></a></code></pre></div>
<p>Running them will get you this output:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb168-1" title="1">$ python a.py</a>
<a class="sourceLine" id="cb168-2" title="2">Hello World <span class="im">from</span> b<span class="op">!</span></a></code></pre></div>
<p>As you can see, when a module is imported, Python sets <code>globals()['__name__']</code> in this module to the module’s name. Also, upon import all the code in the module is being run. As the <code>if</code> statement evaluates to <code>False</code> this part is not executed.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb169-1" title="1">$ python b.py</a>
<a class="sourceLine" id="cb169-2" title="2">Hello World <span class="im">from</span> __main__<span class="op">!</span></a>
<a class="sourceLine" id="cb169-3" title="3">Hello World again <span class="im">from</span> __main__<span class="op">!</span></a></code></pre></div>
<p>As you can see, when a file is executed, Python sets <code>globals()['__name__']</code> in this file to <code>&quot;__main__&quot;</code>. This time, the <code>if</code> statement evaluates to <code>True</code> and is being run.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-check-if-a-list-is-empty-score-2462573-in-2018" class="level3">
<h3>24: How do I check if a list is empty? (score <a href="https://stackoverflow.com/q/53513.html">2462573</a> in 2018)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>For example, if passed the following:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb170-1" title="1">a <span class="op">=</span> []</a></code></pre></div>
<p>How do I check to see if <code>a</code> is empty?</p>
</section>
<section id="answer-accepted-score-4944" class="level4">
<h4>Answer accepted (score 4944)</h4>
<div class="sourceCode" id="cb171"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb171-1" title="1"><span class="cf">if</span> <span class="kw">not</span> a:</a>
<a class="sourceLine" id="cb171-2" title="2">  <span class="bu">print</span>(<span class="st">&quot;List is empty&quot;</span>)</a></code></pre></div>
<p>Using the implicit booleanness of the empty <code>list</code> is quite pythonic.</p>
</section>
<section id="answer-2-score-1081" class="level4">
<h4>Answer 2 (score 1081)</h4>
<p>The pythonic way to do it is from the <a href="https://www.python.org/dev/peps/pep-0008" rel="noreferrer">PEP 8 style guide</a> (where <strong>Yes</strong> means “recommended” and <strong>No</strong> means “not recommended”):</p>
<blockquote>
<p>
For sequences, (strings, lists, tuples), use the fact that empty sequences are false.
</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb172-1" title="1"><span class="op">&lt;</span>b<span class="op">&gt;</span>Yes:<span class="op">&lt;/</span>b<span class="op">&gt;</span> <span class="cf">if</span> <span class="kw">not</span> seq:</a>
<a class="sourceLine" id="cb172-2" title="2">     <span class="cf">if</span> seq:</a>
<a class="sourceLine" id="cb172-3" title="3"></a>
<a class="sourceLine" id="cb172-4" title="4"><span class="op">&lt;</span>b<span class="op">&gt;</span>No:<span class="op">&lt;/</span>b<span class="op">&gt;</span>  <span class="cf">if</span> <span class="bu">len</span>(seq):</a>
<a class="sourceLine" id="cb172-5" title="5">     <span class="cf">if</span> <span class="kw">not</span> <span class="bu">len</span>(seq):</a></code></pre></div>
</blockquote>
</section>
<section id="answer-3-score-693" class="level4">
<h4>Answer 3 (score 693)</h4>
<p>I prefer it explicitly:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb173-1" title="1"><span class="cf">if</span> <span class="bu">len</span>(li) <span class="op">==</span> <span class="dv">0</span>:</a>
<a class="sourceLine" id="cb173-2" title="2">    <span class="bu">print</span>(<span class="st">&#39;the list is empty&#39;</span>)</a></code></pre></div>
<p>This way it’s 100% clear that <code>li</code> is a sequence (list) and we want to test its size. My problem with <code>if not li: ...</code> is that it gives the false impression that <code>li</code> is a boolean variable.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-sort-a-dictionary-by-value-score-2415416-in-2019" class="level3">
<h3>25: How do I sort a dictionary by value? (score <a href="https://stackoverflow.com/q/613183.html">2415416</a> in 2019)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>I have a dictionary of values read from two fields in a database: a string field and a numeric field. The string field is unique, so that is the key of the dictionary.</p>
<p>I can sort on the keys, but how can I sort based on the values?</p>
<p>Note: I have read Stack Overflow question here <em><a href="https://stackoverflow.com/questions/72899">How do I sort a list of dictionaries by a value of the dictionary?</a></em> and probably could change my code to have a list of dictionaries, but since I do not really need a list of dictionaries I wanted to know if there is a simpler solution to sort either in ascending or descending order.</p>
</section>
<section id="answer-accepted-score-4391" class="level4">
<h4>Answer accepted (score 4391)</h4>
<p>It is not possible to sort a dictionary, only to get a representation of a dictionary that is sorted. Dictionaries are inherently orderless, but other types, such as lists and tuples, are not. So you need an ordered data type to represent sorted values, which will be a list—probably a list of tuples.</p>
<p>For instance,</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb174-1" title="1"><span class="im">import</span> operator</a>
<a class="sourceLine" id="cb174-2" title="2">x <span class="op">=</span> {<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">4</span>: <span class="dv">3</span>, <span class="dv">2</span>: <span class="dv">1</span>, <span class="dv">0</span>: <span class="dv">0</span>}</a>
<a class="sourceLine" id="cb174-3" title="3">sorted_x <span class="op">=</span> <span class="bu">sorted</span>(x.items(), key<span class="op">=</span>operator.itemgetter(<span class="dv">1</span>))</a></code></pre></div>
<p><code>sorted_x</code> will be a list of tuples sorted by the second element in each tuple. <code>dict(sorted_x) == x</code>.</p>
<p>And for those wishing to sort on keys instead of values:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb175-1" title="1"><span class="im">import</span> operator</a>
<a class="sourceLine" id="cb175-2" title="2">x <span class="op">=</span> {<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">4</span>: <span class="dv">3</span>, <span class="dv">2</span>: <span class="dv">1</span>, <span class="dv">0</span>: <span class="dv">0</span>}</a>
<a class="sourceLine" id="cb175-3" title="3">sorted_x <span class="op">=</span> <span class="bu">sorted</span>(x.items(), key<span class="op">=</span>operator.itemgetter(<span class="dv">0</span>))</a></code></pre></div>
<p>In Python3 since unpacking is not allowed <a href="https://stackoverflow.com/a/15712231/4293057">[1]</a> we can use</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb176-1" title="1">x <span class="op">=</span> {<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">4</span>: <span class="dv">3</span>, <span class="dv">2</span>: <span class="dv">1</span>, <span class="dv">0</span>: <span class="dv">0</span>}</a>
<a class="sourceLine" id="cb176-2" title="2">sorted_x <span class="op">=</span> <span class="bu">sorted</span>(x.items(), key<span class="op">=</span><span class="kw">lambda</span> kv: kv[<span class="dv">1</span>])</a></code></pre></div>
<p>If you want the output as a dict, you can use <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="noreferrer"><code>collections.OrderedDict</code></a>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb177-1" title="1"><span class="im">import</span> collections</a>
<a class="sourceLine" id="cb177-2" title="2"></a>
<a class="sourceLine" id="cb177-3" title="3">sorted_dict <span class="op">=</span> collections.OrderedDict(sorted_x)</a></code></pre></div>
</section>
<section id="answer-2-score-1136" class="level4">
<h4>Answer 2 (score 1136)</h4>
<h5>
As simple as: <code>sorted(dict1, key=dict1.get)</code>
</h2>
<p>Well, it is actually possible to do a “sort by dictionary values”. Recently I had to do that in a Code Golf (Stack Overflow question <em><a href="https://stackoverflow.com/questions/3169051/code-golf-word-frequency-chart#3170549">Code golf: Word frequency chart</a></em>). Abridged, the problem was of the kind: given a text, count how often each word is encountered and display a list of the top words, sorted by decreasing frequency.</p>
<p>If you construct a dictionary with the words as keys and the number of occurrences of each word as value, simplified here as:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb178-1" title="1"><span class="im">from</span> collections <span class="im">import</span> defaultdict</a>
<a class="sourceLine" id="cb178-2" title="2">d <span class="op">=</span> defaultdict(<span class="bu">int</span>)</a>
<a class="sourceLine" id="cb178-3" title="3"><span class="cf">for</span> w <span class="kw">in</span> text.split():</a>
<a class="sourceLine" id="cb178-4" title="4">  d[w] <span class="op">+=</span> <span class="dv">1</span></a></code></pre></div>
<p>then you can get a list of the words, ordered by frequency of use with <code>sorted(d, key=d.get)</code> - the sort iterates over the dictionary keys, using the number of word occurrences as a sort key .</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb179-1" title="1"><span class="cf">for</span> w <span class="kw">in</span> <span class="bu">sorted</span>(d, key<span class="op">=</span>d.get, reverse<span class="op">=</span><span class="va">True</span>):</a>
<a class="sourceLine" id="cb179-2" title="2">  <span class="bu">print</span> w, d[w]</a></code></pre></div>
<p>I am writing this detailed explanation to illustrate what people often mean by “I can easily sort a dictionary by key, but how do I sort by value” - and I think the OP was trying to address such an issue. And the solution is to do sort of list of the keys, based on the values, as shown above.</p>
</section>
<section id="answer-3-score-750" class="level4">
<h4>Answer 3 (score 750)</h4>
<p>You could use:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb180-1" title="1"><span class="bu">sorted</span>(d.items(), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])</a></code></pre></div>
<p>This will sort the dictionary by the values of each entry within the dictionary from smallest to largest.</p>
<p>To sort it in descending order just add <code>reverse=True</code>:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb181-1" title="1"><span class="bu">sorted</span>(d.items(), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>], reverse<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-safely-create-a-nested-directory-score-2407666-in-2019" class="level3">
<h3>26: How can I safely create a nested directory? (score <a href="https://stackoverflow.com/q/273192.html">2407666</a> in 2019)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<p>What is the most elegant way to check if the directory a file is going to be written to exists, and if not, create the directory using Python? Here is what I tried:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb182-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb182-2" title="2"></a>
<a class="sourceLine" id="cb182-3" title="3">file_path <span class="op">=</span> <span class="st">&quot;/my/directory/filename.txt&quot;</span></a>
<a class="sourceLine" id="cb182-4" title="4">directory <span class="op">=</span> os.path.dirname(file_path)</a>
<a class="sourceLine" id="cb182-5" title="5"></a>
<a class="sourceLine" id="cb182-6" title="6"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb182-7" title="7">    os.stat(directory)</a>
<a class="sourceLine" id="cb182-8" title="8"><span class="cf">except</span>:</a>
<a class="sourceLine" id="cb182-9" title="9">    os.mkdir(directory)       </a>
<a class="sourceLine" id="cb182-10" title="10"></a>
<a class="sourceLine" id="cb182-11" title="11">f <span class="op">=</span> <span class="bu">file</span>(filename)</a></code></pre></div>
<p>Somehow, I missed <code>os.path.exists</code> (thanks kanja, Blair, and Douglas). This is what I have now:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb183-1" title="1"><span class="kw">def</span> ensure_dir(file_path):</a>
<a class="sourceLine" id="cb183-2" title="2">    directory <span class="op">=</span> os.path.dirname(file_path)</a>
<a class="sourceLine" id="cb183-3" title="3">    <span class="cf">if</span> <span class="kw">not</span> os.path.exists(directory):</a>
<a class="sourceLine" id="cb183-4" title="4">        os.makedirs(directory)</a></code></pre></div>
<p>Is there a flag for “open”, that makes this happen automatically?</p>
</section>
<section id="answer-accepted-score-4670" class="level4">
<h4>Answer accepted (score 4670)</h4>
<p>I see two answers with good qualities, each with a small flaw, so I will give my take on it:</p>
<p>Try <a href="https://docs.python.org/2/library/os.path.html#os.path.exists" rel="noreferrer"><code>os.path.exists</code></a>, and consider <a href="https://docs.python.org/2/library/os.html#os.makedirs" rel="noreferrer"><code>os.makedirs</code></a> for the creation.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb184-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb184-2" title="2"><span class="cf">if</span> <span class="kw">not</span> os.path.exists(directory):</a>
<a class="sourceLine" id="cb184-3" title="3">    os.makedirs(directory)</a></code></pre></div>
<p>As noted in comments and elsewhere, there’s a race condition – if the directory is created between the <code>os.path.exists</code> and the <code>os.makedirs</code> calls, the <code>os.makedirs</code> will fail with an <code>OSError</code>. Unfortunately, blanket-catching <code>OSError</code> and continuing is not foolproof, as it will ignore a failure to create the directory due to other factors, such as insufficient permissions, full disk, etc.</p>
<p>One option would be to trap the <code>OSError</code> and examine the embedded error code (see <a href="https://stackoverflow.com/questions/273698/is-there-a-cross-platform-way-of-getting-information-from-pythons-oserror">Is there a cross-platform way of getting information from Python’s OSError</a>):</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb185-1" title="1"><span class="im">import</span> os, errno</a>
<a class="sourceLine" id="cb185-2" title="2"></a>
<a class="sourceLine" id="cb185-3" title="3"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb185-4" title="4">    os.makedirs(directory)</a>
<a class="sourceLine" id="cb185-5" title="5"><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:</a>
<a class="sourceLine" id="cb185-6" title="6">    <span class="cf">if</span> e.errno <span class="op">!=</span> errno.EEXIST:</a>
<a class="sourceLine" id="cb185-7" title="7">        <span class="cf">raise</span></a></code></pre></div>
<p>Alternatively, there could be a second <code>os.path.exists</code>, but suppose another created the directory after the first check, then removed it before the second one – we could still be fooled.</p>
<p>Depending on the application, the danger of concurrent operations may be more or less than the danger posed by other factors such as file permissions. The developer would have to know more about the particular application being developed and its expected environment before choosing an implementation.</p>
<p>Modern versions of Python improve this code quite a bit, both by exposing <a href="https://docs.python.org/3.3/library/exceptions.html?#FileExistsError" rel="noreferrer"><code>FileExistsError</code></a> (in 3.3+)…</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb186-1" title="1"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb186-2" title="2">    os.makedirs(<span class="st">&quot;path/to/directory&quot;</span>)</a>
<a class="sourceLine" id="cb186-3" title="3"><span class="cf">except</span> <span class="pp">FileExistsError</span>:</a>
<a class="sourceLine" id="cb186-4" title="4">    <span class="co"># directory already exists</span></a>
<a class="sourceLine" id="cb186-5" title="5">    <span class="cf">pass</span></a></code></pre></div>
<p>…and by allowing <a href="https://docs.python.org/3.2/library/os.html#os.makedirs" rel="noreferrer">a keyword argument to <code>os.makedirs</code> called <code>exist_ok</code></a> (in 3.2+).</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb187-1" title="1">os.makedirs(<span class="st">&quot;path/to/directory&quot;</span>, exist_ok<span class="op">=</span><span class="va">True</span>)  <span class="co"># succeeds even if directory exists.</span></a></code></pre></div>
</section>
<section id="answer-2-score-1155" class="level4">
<h4>Answer 2 (score 1155)</h4>
<h5>
Python 3.5+:
</h2>
<div class="sourceCode" id="cb188"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb188-1" title="1"><span class="im">import</span> pathlib</a>
<a class="sourceLine" id="cb188-2" title="2">pathlib.Path(<span class="st">&#39;/my/directory&#39;</span>).mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>) </a></code></pre></div>
<p><a href="https://docs.python.org/library/pathlib.html#pathlib.Path.mkdir" rel="noreferrer"><code>pathlib.Path.mkdir</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. If you don’t need or want the parents to be created, skip the <code>parents</code> argument.</p>
<h5>
Python 3.2+:
</h2>
<p><strong>Using <code>pathlib</code>:</strong></p>
<p>If you can, install the current <code>pathlib</code> backport named <a href="https://pypi.python.org/pypi/pathlib2/" rel="noreferrer"><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href="https://pypi.python.org/pypi/pathlib/" rel="noreferrer"><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>
<p>If using Python 3.4, even though it comes with <code>pathlib</code>, it is missing the useful <code>exist_ok</code> option. The backport is intended to offer a newer and superior implementation of <code>mkdir</code> which includes this missing option.</p>
<p><strong>Using <code>os</code>:</strong></p>
<div class="sourceCode" id="cb189"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb189-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb189-2" title="2">os.makedirs(path, exist_ok<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p><a href="https://docs.python.org/library/os.html#os.makedirs" rel="noreferrer"><code>os.makedirs</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. It has the optional <code>exist_ok</code> argument only if using Python 3.2+, with a default value of <code>False</code>. This argument does not exist in Python 2.x up to 2.7. As such, there is no need for manual exception handling as with Python 2.7.</p>
<h5>
Python 2.7+:
</h2>
<p><strong>Using <code>pathlib</code>:</strong></p>
<p>If you can, install the current <code>pathlib</code> backport named <a href="https://pypi.python.org/pypi/pathlib2/" rel="noreferrer"><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href="https://pypi.python.org/pypi/pathlib/" rel="noreferrer"><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>
<p><strong>Using <code>os</code>:</strong></p>
<div class="sourceCode" id="cb190"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb190-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb190-2" title="2"><span class="cf">try</span>: </a>
<a class="sourceLine" id="cb190-3" title="3">    os.makedirs(path)</a>
<a class="sourceLine" id="cb190-4" title="4"><span class="cf">except</span> <span class="pp">OSError</span>:</a>
<a class="sourceLine" id="cb190-5" title="5">    <span class="cf">if</span> <span class="kw">not</span> os.path.isdir(path):</a>
<a class="sourceLine" id="cb190-6" title="6">        <span class="cf">raise</span></a></code></pre></div>
<p>While a naive solution may first use <a href="https://docs.python.org/2/library/os.path.html#os.path.isdir" rel="noreferrer" title="os.path.isdir"><code>os.path.isdir</code></a> followed by <a href="https://docs.python.org/2/library/os.html#os.makedirs" rel="noreferrer" title="os.makedirs"><code>os.makedirs</code></a>, the solution above reverses the order of the two operations. In doing so, it prevents a common race condition having to do with a duplicated attempt at creating the directory, and also disambiguates files from directories.</p>
<p>Note that capturing the exception and using <code>errno</code> is of limited usefulness because <code>OSError: [Errno 17] File exists</code>, i.e. <code>errno.EEXIST</code>, is raised for both files and directories. It is more reliable simply to check if the directory exists.</p>
<h5>
Alternative:
</h2>
<p><a href="https://docs.python.org/distutils/apiref.html#distutils.dir_util.mkpath" rel="noreferrer"><code>mkpath</code></a> creates the nested directory, and does nothing if the directory already exists. This works in both Python 2 and 3.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb191-1" title="1"><span class="im">import</span> distutils.dir_util</a>
<a class="sourceLine" id="cb191-2" title="2">distutils.dir_util.mkpath(path)</a></code></pre></div>
<p>Per <a href="http://bugs.python.org/issue10948" rel="noreferrer">Bug 10948</a>, a severe limitation of this alternative is that it works only once per python process for a given path. In other words, if you use it to create a directory, then delete the directory from inside or outside Python, then use <code>mkpath</code> again to recreate the same directory, <code>mkpath</code> will simply silently use its invalid cached info of having previously created the directory, and will not actually make the directory again. In contrast, <code>os.makedirs</code> doesn’t rely on any such cache. This limitation may be okay for some applications.</p>
<hr>
<p>With regard to the directory’s <em>mode</em>, please refer to the documentation if you care about it.</p>
</section>
<section id="answer-3-score-600" class="level4">
<h4>Answer 3 (score 600)</h4>
<p>Using try except and the right error code from errno module gets rid of the race condition and is cross-platform:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb192-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb192-2" title="2"><span class="im">import</span> errno</a>
<a class="sourceLine" id="cb192-3" title="3"></a>
<a class="sourceLine" id="cb192-4" title="4"><span class="kw">def</span> make_sure_path_exists(path):</a>
<a class="sourceLine" id="cb192-5" title="5">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb192-6" title="6">        os.makedirs(path)</a>
<a class="sourceLine" id="cb192-7" title="7">    <span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> exception:</a>
<a class="sourceLine" id="cb192-8" title="8">        <span class="cf">if</span> exception.errno <span class="op">!=</span> errno.EEXIST:</a>
<a class="sourceLine" id="cb192-9" title="9">            <span class="cf">raise</span></a></code></pre></div>
<p>In other words, we try to create the directories, but if they already exist we ignore the error. On the other hand, any other error gets reported. For example, if you create dir ‘a’ beforehand and remove all permissions from it, you will get an <code>OSError</code> raised with <code>errno.EACCES</code> (Permission denied, error 13).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-remove-an-element-from-a-list-by-index-score-2347506-in-2019" class="level3">
<h3>27: How to remove an element from a list by index? (score <a href="https://stackoverflow.com/q/627435.html">2347506</a> in 2019)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>How do I remove an element from a list by index in Python?</p>
<p>I found the <code>list.remove</code> method, but say I want to remove the last element, how do I do this? It seems like the default remove searches the list, but I don’t want any search to be performed.</p>
</section>
<section id="answer-accepted-score-1546" class="level4">
<h4>Answer accepted (score 1546)</h4>
<p>Use <code>del</code> and specify the index of the element you want to delete:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb193-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</a>
<a class="sourceLine" id="cb193-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">del</span> a[<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb193-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a</a>
<a class="sourceLine" id="cb193-4" title="4">[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</a></code></pre></div>
<p>Also supports slices:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb194-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">del</span> a[<span class="dv">2</span>:<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb194-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a</a>
<a class="sourceLine" id="cb194-3" title="3">[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</a></code></pre></div>
<p><a href="http://docs.python.org/tutorial/datastructures.html#the-del-statement" rel="noreferrer">Here</a> is the section from the tutorial.</p>
</section>
<section id="answer-2-score-595" class="level4">
<h4>Answer 2 (score 595)</h4>
<p>You probably want <code>pop</code>:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb195-1" title="1">a <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</a>
<a class="sourceLine" id="cb195-2" title="2">a.pop(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb195-3" title="3"></a>
<a class="sourceLine" id="cb195-4" title="4"><span class="co"># now a is [&#39;a&#39;, &#39;c&#39;, &#39;d&#39;]</span></a></code></pre></div>
<p>By default, <code>pop</code> without any arguments removes the last item:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb196-1" title="1">a <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</a>
<a class="sourceLine" id="cb196-2" title="2">a.pop()</a>
<a class="sourceLine" id="cb196-3" title="3"></a>
<a class="sourceLine" id="cb196-4" title="4"><span class="co"># now a is [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span></a></code></pre></div>
</section>
<section id="answer-3-score-124" class="level4">
<h4>Answer 3 (score 124)</h4>
<p>Like others mentioned pop and del are <em>the</em> efficient ways to remove an item of given index. Yet just for the sake of completion (since the same thing can be done via many ways in Python):</p>
<p><strong>Using slices (this does not do in place removal of item from original list):</strong></p>
<p>(Also this will be the least efficient method when working with Python list, but this could be useful (but not efficient, I reiterate) when working with user defined objects that do not support pop, yet do define a <code>__getitem__</code> ):</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb197-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</a>
<a class="sourceLine" id="cb197-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> index <span class="op">=</span> <span class="dv">3</span> <span class="co"># Only positive index</span></a>
<a class="sourceLine" id="cb197-3" title="3"></a>
<a class="sourceLine" id="cb197-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> a[:index] <span class="op">+</span> a[index<span class="op">+</span><span class="dv">1</span> :]</a>
<a class="sourceLine" id="cb197-5" title="5"><span class="co"># a is now [1, 2, 3, 5, 6]</span></a></code></pre></div>
<p><strong>Note:</strong> Please note that this method does not modify the list in place like <code>pop</code> and <code>del</code>. It instead makes two copies of lists (one from the start until the index but without it (<code>a[:index]</code>) and one after the index till the last element (<code>a[index+1:]</code>)) and creates a new list object by adding both. This is then reassigned to the list variable (<code>a</code>). The old list object is hence dereferenced and hence garbage collected (provided the original list object is not referenced by any variable other than a).</p>
<p>This makes this method very inefficient and it can also produce undesirable side effects (especially when other variables point to the original list object which remains un-modified).</p>
<p>Thanks to <span class="citation" data-cites="MarkDickinson">@MarkDickinson</span> for pointing this out …</p>
<p><a href="https://stackoverflow.com/a/509295/3244627">This</a> Stack Overflow answer explains the concept of slicing.</p>
<p>Also note that this works only with positive indices.</p>
<p>While using with objects, the <code>__getitem__</code> method must have been defined and more importantly the <strong><code>__add__</code></strong> method must have been defined to return an object containing items from both the operands.</p>
<p>In essence, this works with any object whose class definition is like:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb198-1" title="1"><span class="kw">class</span> foo(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb198-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, items):</a>
<a class="sourceLine" id="cb198-3" title="3">        <span class="va">self</span>.items <span class="op">=</span> items</a>
<a class="sourceLine" id="cb198-4" title="4"></a>
<a class="sourceLine" id="cb198-5" title="5">    <span class="kw">def</span> <span class="fu">__getitem__</span>(<span class="va">self</span>, index):</a>
<a class="sourceLine" id="cb198-6" title="6">        <span class="cf">return</span> foo(<span class="va">self</span>.items[index])</a>
<a class="sourceLine" id="cb198-7" title="7"></a>
<a class="sourceLine" id="cb198-8" title="8">    <span class="kw">def</span> <span class="fu">__add__</span>(<span class="va">self</span>, right):</a>
<a class="sourceLine" id="cb198-9" title="9">        <span class="cf">return</span> foo( <span class="va">self</span>.items <span class="op">+</span> right.items )</a></code></pre></div>
<p>This works with <code>list</code> which defines <code>__getitem__</code> and <code>__add__</code> methods.</p>
<p><strong>Comparison of the three ways in terms of efficiency:</strong></p>
<p>Assume the following is predefined:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb199-1" title="1">a <span class="op">=</span> <span class="bu">range</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb199-2" title="2">index <span class="op">=</span> <span class="dv">3</span></a></code></pre></div>
<p><strong>The <code>del object[index]</code> method:</strong></p>
<p>By far the most efficient method. It works will all objects that define a <code>__del__</code> method.</p>
<p>The disassembly is as follows:</p>
<p>Code:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb200-1" title="1"><span class="kw">def</span> del_method():</a>
<a class="sourceLine" id="cb200-2" title="2">    <span class="kw">global</span> a</a>
<a class="sourceLine" id="cb200-3" title="3">    <span class="kw">global</span> index</a>
<a class="sourceLine" id="cb200-4" title="4">    <span class="kw">del</span> a[index]</a></code></pre></div>
<p>Disassembly:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb201-1" title="1"> <span class="dv">10</span>    <span class="dv">0</span> LOAD_GLOBAL     <span class="dv">0</span> (a)</a>
<a class="sourceLine" id="cb201-2" title="2">       <span class="dv">3</span> LOAD_GLOBAL     <span class="dv">1</span> (index)</a>
<a class="sourceLine" id="cb201-3" title="3">       <span class="dv">6</span> DELETE_SUBSCR   <span class="co"># This is the line that deletes the item</span></a>
<a class="sourceLine" id="cb201-4" title="4">       <span class="dv">7</span> LOAD_CONST      <span class="dv">0</span> (<span class="va">None</span>)</a>
<a class="sourceLine" id="cb201-5" title="5">      <span class="dv">10</span> RETURN_VALUE</a>
<a class="sourceLine" id="cb201-6" title="6"><span class="va">None</span></a></code></pre></div>
<p><strong><code>pop</code> method:</strong></p>
<p>It is less efficient than the del method and is used when you need to get the deleted item.</p>
<p>Code:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb202-1" title="1"><span class="kw">def</span> pop_method():</a>
<a class="sourceLine" id="cb202-2" title="2">    <span class="kw">global</span> a</a>
<a class="sourceLine" id="cb202-3" title="3">    <span class="kw">global</span> index</a>
<a class="sourceLine" id="cb202-4" title="4">    a.pop(index)</a></code></pre></div>
<p>Disassembly:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb203-1" title="1"> <span class="dv">17</span>     <span class="dv">0</span> LOAD_GLOBAL     <span class="dv">0</span> (a)</a>
<a class="sourceLine" id="cb203-2" title="2">        <span class="dv">3</span> LOAD_ATTR       <span class="dv">1</span> (pop)</a>
<a class="sourceLine" id="cb203-3" title="3">        <span class="dv">6</span> LOAD_GLOBAL     <span class="dv">2</span> (index)</a>
<a class="sourceLine" id="cb203-4" title="4">        <span class="dv">9</span> CALL_FUNCTION   <span class="dv">1</span></a>
<a class="sourceLine" id="cb203-5" title="5">       <span class="dv">12</span> POP_TOP</a>
<a class="sourceLine" id="cb203-6" title="6">       <span class="dv">13</span> LOAD_CONST      <span class="dv">0</span> (<span class="va">None</span>)</a>
<a class="sourceLine" id="cb203-7" title="7">       <span class="dv">16</span> RETURN_VALUE</a></code></pre></div>
<p><strong>The slice and add method.</strong></p>
<p>The least efficient.</p>
<p>Code:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb204-1" title="1"><span class="kw">def</span> slice_method():</a>
<a class="sourceLine" id="cb204-2" title="2">    <span class="kw">global</span> a</a>
<a class="sourceLine" id="cb204-3" title="3">    <span class="kw">global</span> index</a>
<a class="sourceLine" id="cb204-4" title="4">    a <span class="op">=</span> a[:index] <span class="op">+</span> a[index<span class="op">+</span><span class="dv">1</span>:]</a></code></pre></div>
<p>Disassembly:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb205-1" title="1"> <span class="dv">24</span>     <span class="dv">0</span> LOAD_GLOBAL    <span class="dv">0</span> (a)</a>
<a class="sourceLine" id="cb205-2" title="2">        <span class="dv">3</span> LOAD_GLOBAL    <span class="dv">1</span> (index)</a>
<a class="sourceLine" id="cb205-3" title="3">        <span class="dv">6</span> SLICE<span class="op">+</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb205-4" title="4">        <span class="dv">7</span> LOAD_GLOBAL    <span class="dv">0</span> (a)</a>
<a class="sourceLine" id="cb205-5" title="5">       <span class="dv">10</span> LOAD_GLOBAL    <span class="dv">1</span> (index)</a>
<a class="sourceLine" id="cb205-6" title="6">       <span class="dv">13</span> LOAD_CONST     <span class="dv">1</span> (<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb205-7" title="7">       <span class="dv">16</span> BINARY_ADD</a>
<a class="sourceLine" id="cb205-8" title="8">       <span class="dv">17</span> SLICE<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb205-9" title="9">       <span class="dv">18</span> BINARY_ADD</a>
<a class="sourceLine" id="cb205-10" title="10">       <span class="dv">19</span> STORE_GLOBAL   <span class="dv">0</span> (a)</a>
<a class="sourceLine" id="cb205-11" title="11">       <span class="dv">22</span> LOAD_CONST     <span class="dv">0</span> (<span class="va">None</span>)</a>
<a class="sourceLine" id="cb205-12" title="12">       <span class="dv">25</span> RETURN_VALUE</a>
<a class="sourceLine" id="cb205-13" title="13"><span class="va">None</span></a></code></pre></div>
<p>Note: In all three disassembles ignore the last two lines which basically are <code>return None</code>. Also the first two lines are loading the global values <code>a</code> and <code>index</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="renaming-columns-in-pandas-score-2283204-in-2017" class="level3">
<h3>28: Renaming columns in pandas (score <a href="https://stackoverflow.com/q/11346283.html">2283204</a> in 2017)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>I have a DataFrame using pandas and column labels that I need to edit to replace the original column labels.</p>
<p>I’d like to change the column names in a DataFrame <code>A</code> where the original column names are:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb206-1" title="1">[<span class="st">&#39;$a&#39;</span>, <span class="st">&#39;$b&#39;</span>, <span class="st">&#39;$c&#39;</span>, <span class="st">&#39;$d&#39;</span>, <span class="st">&#39;$e&#39;</span>] </a></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb207-1" title="1">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>].</a></code></pre></div>
<p>I have the edited column names stored it in a list, but I don’t know how to replace the column names.</p>
</section>
<section id="answer-accepted-score-1585" class="level4">
<h4>Answer accepted (score 1585)</h4>
<p>Just assign it to the <code>.columns</code> attribute:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb208-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;$a&#39;</span>:[<span class="dv">1</span>,<span class="dv">2</span>], <span class="st">&#39;$b&#39;</span>: [<span class="dv">10</span>,<span class="dv">20</span>]})</a>
<a class="sourceLine" id="cb208-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df.columns <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>]</a>
<a class="sourceLine" id="cb208-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df</a>
<a class="sourceLine" id="cb208-4" title="4">   a   b</a>
<a class="sourceLine" id="cb208-5" title="5"><span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">10</span></a>
<a class="sourceLine" id="cb208-6" title="6"><span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">20</span></a></code></pre></div>
</section>
<section id="answer-2-score-2506" class="level4">
<h4>Answer 2 (score 2506)</h4>
<h5>
<strong>RENAME SPECIFIC COLUMNS</strong>
</h2>
<p>Use the <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rename.html" rel="noreferrer"><code>df.rename()</code></a> function and refer the columns to be renamed. Not all the columns have to be renamed:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb209-1" title="1">df <span class="op">=</span> df.rename(columns<span class="op">=</span>{<span class="st">&#39;oldName1&#39;</span>: <span class="st">&#39;newName1&#39;</span>, <span class="st">&#39;oldName2&#39;</span>: <span class="st">&#39;newName2&#39;</span>})</a>
<a class="sourceLine" id="cb209-2" title="2"><span class="co"># Or rename the existing DataFrame (rather than creating a copy) </span></a>
<a class="sourceLine" id="cb209-3" title="3">df.rename(columns<span class="op">=</span>{<span class="st">&#39;oldName1&#39;</span>: <span class="st">&#39;newName1&#39;</span>, <span class="st">&#39;oldName2&#39;</span>: <span class="st">&#39;newName2&#39;</span>}, inplace<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p><strong>Minimal Code Example</strong></p>
<div class="sourceCode" id="cb210"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb210-1" title="1">df <span class="op">=</span> pd.DataFrame(<span class="st">&#39;x&#39;</span>, index<span class="op">=</span><span class="bu">range</span>(<span class="dv">3</span>), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;abcde&#39;</span>))</a>
<a class="sourceLine" id="cb210-2" title="2">df</a>
<a class="sourceLine" id="cb210-3" title="3"></a>
<a class="sourceLine" id="cb210-4" title="4">   a  b  c  d  e</a>
<a class="sourceLine" id="cb210-5" title="5"><span class="dv">0</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb210-6" title="6"><span class="dv">1</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb210-7" title="7"><span class="dv">2</span>  x  x  x  x  x</a></code></pre></div>
<p>The following methods all work and produce the same output:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb211-1" title="1">df2 <span class="op">=</span> df.rename({<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>}, axis<span class="op">=</span><span class="dv">1</span>)  <span class="co"># new method</span></a>
<a class="sourceLine" id="cb211-2" title="2">df2 <span class="op">=</span> df.rename({<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>}, axis<span class="op">=</span><span class="st">&#39;columns&#39;</span>)</a>
<a class="sourceLine" id="cb211-3" title="3">df2 <span class="op">=</span> df.rename(columns<span class="op">=</span>{<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>})  <span class="co"># old method  </span></a>
<a class="sourceLine" id="cb211-4" title="4"></a>
<a class="sourceLine" id="cb211-5" title="5">df2</a>
<a class="sourceLine" id="cb211-6" title="6"></a>
<a class="sourceLine" id="cb211-7" title="7">   X  Y  c  d  e</a>
<a class="sourceLine" id="cb211-8" title="8"><span class="dv">0</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb211-9" title="9"><span class="dv">1</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb211-10" title="10"><span class="dv">2</span>  x  x  x  x  x</a></code></pre></div>
<p>Remember to assign the result back, as the modification is not-inplace. Alternatively, specify <code>inplace=True</code>:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb212-1" title="1">df.rename({<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>}, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb212-2" title="2">df</a>
<a class="sourceLine" id="cb212-3" title="3"></a>
<a class="sourceLine" id="cb212-4" title="4">   X  Y  c  d  e</a>
<a class="sourceLine" id="cb212-5" title="5"><span class="dv">0</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb212-6" title="6"><span class="dv">1</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb212-7" title="7"><span class="dv">2</span>  x  x  x  x  x</a></code></pre></div>
<p>From v0.25, you can also specify <code>errors='raise'</code> to raise errors if an invalid column-to-rename is specified. See <a href="https://pandas-docs.github.io/pandas-docs-travis/reference/api/pandas.DataFrame.rename.html#pandas.DataFrame.rename" rel="noreferrer">v0.25 <code>rename()</code> docs</a>.</p>
<hr>
<h5>
REASSIGN COLUMN HEADERS
</h2>
<p>Use <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.set_axis.html" rel="noreferrer"><code>df.set_axis()</code></a> with <code>axis=1</code> and <code>inplace=False</code> (to return a copy).</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb213-1" title="1">df2 <span class="op">=</span> df.set_axis([<span class="st">&#39;V&#39;</span>, <span class="st">&#39;W&#39;</span>, <span class="st">&#39;X&#39;</span>, <span class="st">&#39;Y&#39;</span>, <span class="st">&#39;Z&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">False</span>)</a>
<a class="sourceLine" id="cb213-2" title="2">df2</a>
<a class="sourceLine" id="cb213-3" title="3"></a>
<a class="sourceLine" id="cb213-4" title="4">   V  W  X  Y  Z</a>
<a class="sourceLine" id="cb213-5" title="5"><span class="dv">0</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb213-6" title="6"><span class="dv">1</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb213-7" title="7"><span class="dv">2</span>  x  x  x  x  x</a></code></pre></div>
<p>This returns a copy, but you can modify the DataFrame in-place by setting <code>inplace=True</code> (this is the default behaviour for versions &lt;=0.24 but is likely to change in the future).</p>
<p>You can also assign headers directly:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb214-1" title="1">df.columns <span class="op">=</span> [<span class="st">&#39;V&#39;</span>, <span class="st">&#39;W&#39;</span>, <span class="st">&#39;X&#39;</span>, <span class="st">&#39;Y&#39;</span>, <span class="st">&#39;Z&#39;</span>]</a>
<a class="sourceLine" id="cb214-2" title="2">df</a>
<a class="sourceLine" id="cb214-3" title="3"></a>
<a class="sourceLine" id="cb214-4" title="4">   V  W  X  Y  Z</a>
<a class="sourceLine" id="cb214-5" title="5"><span class="dv">0</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb214-6" title="6"><span class="dv">1</span>  x  x  x  x  x</a>
<a class="sourceLine" id="cb214-7" title="7"><span class="dv">2</span>  x  x  x  x  x</a></code></pre></div>
</section>
<section id="answer-3-score-364" class="level4">
<h4>Answer 3 (score 364)</h4>
<p>The <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rename.html"><code>rename</code></a> method can take a function, for example:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb215-1" title="1">In [<span class="dv">11</span>]: df.columns</a>
<a class="sourceLine" id="cb215-2" title="2">Out[<span class="dv">11</span>]: Index([<span class="st">u&#39;$a&#39;</span>, <span class="st">u&#39;$b&#39;</span>, <span class="st">u&#39;$c&#39;</span>, <span class="st">u&#39;$d&#39;</span>, <span class="st">u&#39;$e&#39;</span>], dtype<span class="op">=</span><span class="bu">object</span>)</a>
<a class="sourceLine" id="cb215-3" title="3"></a>
<a class="sourceLine" id="cb215-4" title="4">In [<span class="dv">12</span>]: df.rename(columns<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>:], inplace<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb215-5" title="5"></a>
<a class="sourceLine" id="cb215-6" title="6">In [<span class="dv">13</span>]: df.columns</a>
<a class="sourceLine" id="cb215-7" title="7">Out[<span class="dv">13</span>]: Index([<span class="st">u&#39;a&#39;</span>, <span class="st">u&#39;b&#39;</span>, <span class="st">u&#39;c&#39;</span>, <span class="st">u&#39;d&#39;</span>, <span class="st">u&#39;e&#39;</span>], dtype<span class="op">=</span><span class="bu">object</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-determine-a-python-variables-type-score-2254676-in-2017" class="level3">
<h3>29: How to determine a Python variable’s type? (score <a href="https://stackoverflow.com/q/402504.html">2254676</a> in 2017)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>How do I see the type of a variable whether it is unsigned 32 bit, signed 16 bit, etc.?</p>
<p>How do I view it?</p>
</section>
<section id="answer-2-score-1224" class="level4">
<h4>Answer 2 (score 1224)</h4>
<p>Python doesn’t have the same types as C/C++, which appears to be your question.</p>
<p>Try this:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb216-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> i <span class="op">=</span> <span class="dv">123</span></a>
<a class="sourceLine" id="cb216-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(i)</a>
<a class="sourceLine" id="cb216-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;int&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb216-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(i) <span class="kw">is</span> <span class="bu">int</span></a>
<a class="sourceLine" id="cb216-5" title="5"><span class="va">True</span></a>
<a class="sourceLine" id="cb216-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> i <span class="op">=</span> 123456789L</a>
<a class="sourceLine" id="cb216-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(i)</a>
<a class="sourceLine" id="cb216-8" title="8"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;long&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb216-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(i) <span class="kw">is</span> <span class="bu">long</span></a>
<a class="sourceLine" id="cb216-10" title="10"><span class="va">True</span></a>
<a class="sourceLine" id="cb216-11" title="11"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> i <span class="op">=</span> <span class="fl">123.456</span></a>
<a class="sourceLine" id="cb216-12" title="12"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(i)</a>
<a class="sourceLine" id="cb216-13" title="13"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;float&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb216-14" title="14"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(i) <span class="kw">is</span> <span class="bu">float</span></a>
<a class="sourceLine" id="cb216-15" title="15"><span class="va">True</span></a></code></pre></div>
<p>The distinction between int and long goes away in Python 3.0, though.</p>
</section>
<section id="answer-3-score-403" class="level4">
<h4>Answer 3 (score 403)</h4>
<p>You may be looking for the <code>type()</code> function.</p>
<p>See the examples below, but there’s no “unsigned” type in Python just like Java.</p>
<p>Positive integer:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb217-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> v <span class="op">=</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb217-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(v)</a>
<a class="sourceLine" id="cb217-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;int&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p><em>Large</em> positive integer:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb218-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> v <span class="op">=</span> <span class="dv">100000000000000</span></a>
<a class="sourceLine" id="cb218-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(v)</a>
<a class="sourceLine" id="cb218-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;long&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p>Negative integer:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb219-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> v <span class="op">=</span> <span class="dv">-10</span></a>
<a class="sourceLine" id="cb219-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(v)</a>
<a class="sourceLine" id="cb219-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;int&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p>Literal sequence of characters:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb220-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> v <span class="op">=</span> <span class="st">&#39;hi&#39;</span></a>
<a class="sourceLine" id="cb220-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(v)</a>
<a class="sourceLine" id="cb220-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;str&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p>Floating point integer:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb221-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> v <span class="op">=</span> <span class="fl">3.14159</span></a>
<a class="sourceLine" id="cb221-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(v)</a>
<a class="sourceLine" id="cb221-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;float&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-lowercase-a-string-in-python-score-2241046-in-2019" class="level3">
<h3>30: How do I lowercase a string in Python? (score <a href="https://stackoverflow.com/q/6797984.html">2241046</a> in 2019)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>Is there a way to convert a string from uppercase, or even part uppercase to lowercase?</p>
<p>For example, “Kilometers” → “kilometers”.</p>
</section>
<section id="answer-accepted-score-2880" class="level4">
<h4>Answer accepted (score 2880)</h4>
<p>Use <code>.lower()</code> - For example:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb222-1" title="1">s <span class="op">=</span> <span class="st">&quot;Kilometer&quot;</span></a>
<a class="sourceLine" id="cb222-2" title="2"><span class="bu">print</span>(s.lower())</a></code></pre></div>
<p>
The official 2.x documentation is here: <a href="https://docs.python.org/2/library/stdtypes.html?highlight=str.lower#str.lower" rel="noreferrer"><code>str.lower()</code></a><br> The official 3.x documentation is here: <a href="https://docs.python.org/3/library/stdtypes.html?highlight=str.lower#str.lower" rel="noreferrer"><code>str.lower()</code></a>
</p>
</section>
<section id="answer-2-score-197" class="level4">
<h4>Answer 2 (score 197)</h4>
<blockquote>
<h5>
How to convert string to lowercase in Python?
</h1>
<p>Is there any way to convert an entire user inputted string from uppercase, or even part uppercase to lowercase?</p>
E.g. Kilometers –&gt; kilometers<br />

</blockquote>
<p>The canonical Pythonic way of doing this is</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb223-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;Kilometers&#39;</span>.lower()</a>
<a class="sourceLine" id="cb223-2" title="2"><span class="co">&#39;kilometers&#39;</span></a></code></pre></div>
<p>However, if the purpose is to do case insensitive matching, you should use case-folding:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb224-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;Kilometers&#39;</span>.casefold()</a>
<a class="sourceLine" id="cb224-2" title="2"><span class="co">&#39;kilometers&#39;</span></a></code></pre></div>
<p>Here’s why:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb225-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&quot;Maße&quot;</span>.casefold()</a>
<a class="sourceLine" id="cb225-2" title="2"><span class="co">&#39;masse&#39;</span></a>
<a class="sourceLine" id="cb225-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&quot;Maße&quot;</span>.lower()</a>
<a class="sourceLine" id="cb225-4" title="4"><span class="co">&#39;maße&#39;</span></a>
<a class="sourceLine" id="cb225-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&quot;MASSE&quot;</span> <span class="op">==</span> <span class="st">&quot;Maße&quot;</span></a>
<a class="sourceLine" id="cb225-6" title="6"><span class="va">False</span></a>
<a class="sourceLine" id="cb225-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&quot;MASSE&quot;</span>.lower() <span class="op">==</span> <span class="st">&quot;Maße&quot;</span>.lower()</a>
<a class="sourceLine" id="cb225-8" title="8"><span class="va">False</span></a>
<a class="sourceLine" id="cb225-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&quot;MASSE&quot;</span>.casefold() <span class="op">==</span> <span class="st">&quot;Maße&quot;</span>.casefold()</a>
<a class="sourceLine" id="cb225-10" title="10"><span class="va">True</span></a></code></pre></div>
<p>This is a str method in Python 3, but in Python 2, you’ll want to look at the PyICU or py2casefold - <a href="https://stackoverflow.com/q/18271077/541136">several answers address this here</a>.</p>
<h5>
Unicode Python 3
</h2>
<p><a href="https://docs.python.org/3/howto/unicode.html" rel="noreferrer">Python 3</a> handles plain string literals as unicode:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb226-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string <span class="op">=</span> <span class="st">&#39;Километр&#39;</span></a>
<a class="sourceLine" id="cb226-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string</a>
<a class="sourceLine" id="cb226-3" title="3"><span class="co">&#39;Километр&#39;</span></a>
<a class="sourceLine" id="cb226-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string.lower()</a>
<a class="sourceLine" id="cb226-5" title="5"><span class="co">&#39;километр&#39;</span></a></code></pre></div>
<h5>
Python 2, plain string literals are bytes
</h2>
<p>In Python 2, the below, pasted into a shell, encodes the literal as a string of bytes, using <a href="https://docs.python.org/2/library/codecs.html#python-specific-encodings" rel="noreferrer"><code>utf-8</code></a>.</p>
<p>And <code>lower</code> doesn’t map any changes that bytes would be aware of, so we get the same string.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb227-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string <span class="op">=</span> <span class="st">&#39;Километр&#39;</span></a>
<a class="sourceLine" id="cb227-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string</a>
<a class="sourceLine" id="cb227-3" title="3"><span class="co">&#39;</span><span class="ch">\xd0\x9a\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb227-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string.lower()</a>
<a class="sourceLine" id="cb227-5" title="5"><span class="co">&#39;</span><span class="ch">\xd0\x9a\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb227-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> string.lower()</a>
<a class="sourceLine" id="cb227-7" title="7">Километр</a></code></pre></div>
<p>In scripts, Python will object to non-ascii (as of Python 2.5, and warning in Python 2.4) bytes being in a string with no encoding given, since the intended coding would be ambiguous. For more on that, see the Unicode how-to in the <a href="https://docs.python.org/2/howto/unicode.html#unicode-literals-in-python-source-code" rel="noreferrer">docs</a> and <a href="https://www.python.org/dev/peps/pep-0263/" rel="noreferrer">PEP 263</a></p>
<h5>
Use Unicode literals, not <code>str</code> literals
</h3>
<p>So we need a <code>unicode</code> string to handle this conversion, accomplished easily with a unicode string literal, which disambiguates with a <code>u</code> prefix (and note the <code>u</code> prefix also works in Python 3):</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb228-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> unicode_literal <span class="op">=</span> <span class="st">u&#39;Километр&#39;</span></a>
<a class="sourceLine" id="cb228-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(unicode_literal.lower())</a>
<a class="sourceLine" id="cb228-3" title="3">километр</a></code></pre></div>
<p>Note that the bytes are completely different from the <code>str</code> bytes - the escape character is <code>'\u'</code> followed by the 2-byte width, or 16 bit representation of these <code>unicode</code> letters:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb229-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> unicode_literal</a>
<a class="sourceLine" id="cb229-2" title="2"><span class="co">u&#39;</span><span class="ch">\u041a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb229-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> unicode_literal.lower()</a>
<a class="sourceLine" id="cb229-4" title="4"><span class="co">u&#39;</span><span class="ch">\u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></a></code></pre></div>
<p>Now if we only have it in the form of a <code>str</code>, we need to convert it to <code>unicode</code>. Python’s Unicode type is a universal encoding format that has many <a href="https://en.wikipedia.org/wiki/UTF-8#Advantages_and_disadvantages" rel="noreferrer">advantages</a> relative to most other encodings. We can either use the <code>unicode</code> constructor or <code>str.decode</code> method with the codec to convert the <code>str</code> to <code>unicode</code>:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb230-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> unicode_from_string <span class="op">=</span> <span class="bu">unicode</span>(string, <span class="st">&#39;utf-8&#39;</span>) <span class="co"># &quot;encoding&quot; unicode from string</span></a>
<a class="sourceLine" id="cb230-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(unicode_from_string.lower())</a>
<a class="sourceLine" id="cb230-3" title="3">километр</a>
<a class="sourceLine" id="cb230-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string_to_unicode <span class="op">=</span> string.decode(<span class="st">&#39;utf-8&#39;</span>) </a>
<a class="sourceLine" id="cb230-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(string_to_unicode.lower())</a>
<a class="sourceLine" id="cb230-6" title="6">километр</a>
<a class="sourceLine" id="cb230-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> unicode_from_string <span class="op">==</span> string_to_unicode <span class="op">==</span> unicode_literal</a>
<a class="sourceLine" id="cb230-8" title="8"><span class="va">True</span></a></code></pre></div>
<p>Both methods convert to the unicode type - and same as the unicode_literal.</p>
<h5>
Best Practice, use Unicode
</h2>
<p>It is recommended that you always <a href="https://docs.python.org/2/howto/unicode.html#tips-for-writing-unicode-aware-programs" rel="noreferrer">work with text in Unicode</a>.</p>
<blockquote>
Software should only work with Unicode strings internally, converting to a particular encoding on output.
</blockquote>
<h5>
Can encode back when necessary
</h2>
<p>However, to get the lowercase back in type <code>str</code>, encode the python string to <code>utf-8</code> again:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb231-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> string</a>
<a class="sourceLine" id="cb231-2" title="2">Километр</a>
<a class="sourceLine" id="cb231-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string</a>
<a class="sourceLine" id="cb231-4" title="4"><span class="co">&#39;</span><span class="ch">\xd0\x9a\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb231-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string.decode(<span class="st">&#39;utf-8&#39;</span>)</a>
<a class="sourceLine" id="cb231-6" title="6"><span class="co">u&#39;</span><span class="ch">\u041a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb231-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string.decode(<span class="st">&#39;utf-8&#39;</span>).lower()</a>
<a class="sourceLine" id="cb231-8" title="8"><span class="co">u&#39;</span><span class="ch">\u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb231-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> string.decode(<span class="st">&#39;utf-8&#39;</span>).lower().encode(<span class="st">&#39;utf-8&#39;</span>)</a>
<a class="sourceLine" id="cb231-10" title="10"><span class="co">&#39;</span><span class="ch">\xd0\xba\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></a>
<a class="sourceLine" id="cb231-11" title="11"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> string.decode(<span class="st">&#39;utf-8&#39;</span>).lower().encode(<span class="st">&#39;utf-8&#39;</span>)</a>
<a class="sourceLine" id="cb231-12" title="12">километр</a></code></pre></div>
<p>So in Python 2, Unicode can encode into Python strings, and Python strings can decode into the Unicode type.</p>
</section>
<section id="answer-3-score-195" class="level4">
<h4>Answer 3 (score 195)</h4>
<p>With Python 2, this doesn’t work for non-English words in UTF-8. In this case <code>decode('utf-8')</code> can help:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb232-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> s<span class="op">=</span><span class="st">&#39;Километр&#39;</span></a>
<a class="sourceLine" id="cb232-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> s.lower()</a>
<a class="sourceLine" id="cb232-3" title="3">Километр</a>
<a class="sourceLine" id="cb232-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> s.decode(<span class="st">&#39;utf-8&#39;</span>).lower()</a>
<a class="sourceLine" id="cb232-5" title="5">километр</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-list-to-string-score-2197422-in-2019" class="level3">
<h3>31: How to convert list to string (score <a href="https://stackoverflow.com/q/5618878.html">2197422</a> in 2019)</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>How can I convert a list to a string using Python?</p>
</section>
<section id="answer-2-score-1203" class="level4">
<h4>Answer 2 (score 1203)</h4>
<p>By using <code>''.join</code></p>
<div class="sourceCode" id="cb233"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb233-1" title="1">list1 <span class="op">=</span> [<span class="st">&#39;1&#39;</span>, <span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>]</a>
<a class="sourceLine" id="cb233-2" title="2">str1 <span class="op">=</span> <span class="st">&#39;&#39;</span>.join(list1)</a></code></pre></div>
<p>Or if the list is of integers, convert the elements before joining them.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb234-1" title="1">list1 <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb234-2" title="2">str1 <span class="op">=</span> <span class="st">&#39;&#39;</span>.join(<span class="bu">str</span>(e) <span class="cf">for</span> e <span class="kw">in</span> list1)</a></code></pre></div>
</section>
<section id="answer-3-score-255" class="level4">
<h4>Answer 3 (score 255)</h4>
<div class="sourceCode" id="cb235"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb235-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> L <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]       </a>
<a class="sourceLine" id="cb235-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&quot; &quot;</span>.join(<span class="bu">str</span>(x) <span class="cf">for</span> x <span class="kw">in</span> L)</a>
<a class="sourceLine" id="cb235-3" title="3"><span class="co">&#39;1 2 3&#39;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="select-rows-from-a-dataframe-based-on-values-in-a-column-in-pandas-score-2183835-in-2019" class="level3">
<h3>32: Select rows from a DataFrame based on values in a column in pandas (score <a href="https://stackoverflow.com/q/17071871.html">2183835</a> in 2019)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>How to select rows from a <code>DataFrame</code> based on values in some column in pandas?</p>
<p>In <strong>SQL</strong>, I would use:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb236-1" title="1">SELECT <span class="op">*</span></a>
<a class="sourceLine" id="cb236-2" title="2">FROM table</a>
<a class="sourceLine" id="cb236-3" title="3">WHERE colume_name <span class="op">=</span> some_value</a></code></pre></div>
<p><em>I tried to look at pandas documentation but did not immediately find the answer.</em></p>
</section>
<section id="answer-accepted-score-3029" class="level4">
<h4>Answer accepted (score 3029)</h4>
<p>To select rows whose column value equals a scalar, <code>some_value</code>, use <code>==</code>:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb237-1" title="1">df.loc[df[<span class="st">&#39;column_name&#39;</span>] <span class="op">==</span> some_value]</a></code></pre></div>
<p>To select rows whose column value is in an iterable, <code>some_values</code>, use <code>isin</code>:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb238-1" title="1">df.loc[df[<span class="st">&#39;column_name&#39;</span>].isin(some_values)]</a></code></pre></div>
<p>Combine multiple conditions with <code>&amp;amp;</code>:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb239-1" title="1">df.loc[(df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&amp;</span>gt<span class="op">;=</span> A) <span class="op">&amp;</span>amp<span class="op">;</span> (df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&amp;</span>lt<span class="op">;=</span> B)]</a></code></pre></div>
<p>Note the parentheses. Due to Python’s <a href="https://docs.python.org/3/reference/expressions.html#operator-precedence" rel="noreferrer">operator precedence rules</a>, <code>&amp;amp;</code> binds more tightly than <code>&amp;lt;=</code> and <code>&amp;gt;=</code>. Thus, the parentheses in the last example are necessary. Without the parentheses</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb240-1" title="1">df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&amp;</span>gt<span class="op">;=</span> A <span class="op">&amp;</span>amp<span class="op">;</span> df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&amp;</span>lt<span class="op">;=</span> B</a></code></pre></div>
<p>is parsed as</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb241-1" title="1">df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&amp;</span>gt<span class="op">;=</span> (A <span class="op">&amp;</span>amp<span class="op">;</span> df[<span class="st">&#39;column_name&#39;</span>]) <span class="op">&amp;</span>lt<span class="op">;=</span> B</a></code></pre></div>
<p>which results in a <a href="https://stackoverflow.com/questions/36921951/truth-value-of-a-series-is-ambiguous-use-a-empty-a-bool-a-item-a-any-o">Truth value of a Series is ambiguous error</a>.</p>
<hr>
<p>To select rows whose column value <em>does not equal</em> <code>some_value</code>, use <code>!=</code>:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb242-1" title="1">df.loc[df[<span class="st">&#39;column_name&#39;</span>] <span class="op">!=</span> some_value]</a></code></pre></div>
<p><code>isin</code> returns a boolean Series, so to select rows whose value is <em>not</em> in <code>some_values</code>, negate the boolean Series using <code>~</code>:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb243-1" title="1">df.loc[<span class="op">~</span>df[<span class="st">&#39;column_name&#39;</span>].isin(some_values)]</a></code></pre></div>
<hr>
<p>For example,</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb244-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb244-2" title="2"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb244-3" title="3">df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;A&#39;</span>: <span class="st">&#39;foo bar foo bar foo bar foo foo&#39;</span>.split(),</a>
<a class="sourceLine" id="cb244-4" title="4">                   <span class="st">&#39;B&#39;</span>: <span class="st">&#39;one one two three two two one three&#39;</span>.split(),</a>
<a class="sourceLine" id="cb244-5" title="5">                   <span class="st">&#39;C&#39;</span>: np.arange(<span class="dv">8</span>), <span class="st">&#39;D&#39;</span>: np.arange(<span class="dv">8</span>) <span class="op">*</span> <span class="dv">2</span>})</a>
<a class="sourceLine" id="cb244-6" title="6"><span class="bu">print</span>(df)</a>
<a class="sourceLine" id="cb244-7" title="7"><span class="co">#      A      B  C   D</span></a>
<a class="sourceLine" id="cb244-8" title="8"><span class="co"># 0  foo    one  0   0</span></a>
<a class="sourceLine" id="cb244-9" title="9"><span class="co"># 1  bar    one  1   2</span></a>
<a class="sourceLine" id="cb244-10" title="10"><span class="co"># 2  foo    two  2   4</span></a>
<a class="sourceLine" id="cb244-11" title="11"><span class="co"># 3  bar  three  3   6</span></a>
<a class="sourceLine" id="cb244-12" title="12"><span class="co"># 4  foo    two  4   8</span></a>
<a class="sourceLine" id="cb244-13" title="13"><span class="co"># 5  bar    two  5  10</span></a>
<a class="sourceLine" id="cb244-14" title="14"><span class="co"># 6  foo    one  6  12</span></a>
<a class="sourceLine" id="cb244-15" title="15"><span class="co"># 7  foo  three  7  14</span></a>
<a class="sourceLine" id="cb244-16" title="16"></a>
<a class="sourceLine" id="cb244-17" title="17"><span class="bu">print</span>(df.loc[df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span>])</a></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb245-1" title="1">     A      B  C   D</a>
<a class="sourceLine" id="cb245-2" title="2"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb245-3" title="3"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb245-4" title="4"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb245-5" title="5"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb245-6" title="6"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<hr>
<p>
If you have multiple values you want to include, put them in a list (or more generally, any iterable) and use <code>isin</code>:
</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb246-1" title="1"><span class="bu">print</span>(df.loc[df[<span class="st">&#39;B&#39;</span>].isin([<span class="st">&#39;one&#39;</span>,<span class="st">&#39;three&#39;</span>])])</a></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb247-1" title="1">     A      B  C   D</a>
<a class="sourceLine" id="cb247-2" title="2"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb247-3" title="3"><span class="dv">1</span>  bar    one  <span class="dv">1</span>   <span class="dv">2</span></a>
<a class="sourceLine" id="cb247-4" title="4"><span class="dv">3</span>  bar  three  <span class="dv">3</span>   <span class="dv">6</span></a>
<a class="sourceLine" id="cb247-5" title="5"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb247-6" title="6"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<hr>
<p>
Note, however, that if you wish to do this many times, it is more efficient to make an index first, and then use <code>df.loc</code>:
</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb248-1" title="1">df <span class="op">=</span> df.set_index([<span class="st">&#39;B&#39;</span>])</a>
<a class="sourceLine" id="cb248-2" title="2"><span class="bu">print</span>(df.loc[<span class="st">&#39;one&#39;</span>])</a></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb249-1" title="1">       A  C   D</a>
<a class="sourceLine" id="cb249-2" title="2">B              </a>
<a class="sourceLine" id="cb249-3" title="3">one  foo  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb249-4" title="4">one  bar  <span class="dv">1</span>   <span class="dv">2</span></a>
<a class="sourceLine" id="cb249-5" title="5">one  foo  <span class="dv">6</span>  <span class="dv">12</span></a></code></pre></div>
<p>or, to include multiple values from the index use <code>df.index.isin</code>:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb250-1" title="1">df.loc[df.index.isin([<span class="st">&#39;one&#39;</span>,<span class="st">&#39;two&#39;</span>])]</a></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb251-1" title="1">       A  C   D</a>
<a class="sourceLine" id="cb251-2" title="2">B              </a>
<a class="sourceLine" id="cb251-3" title="3">one  foo  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb251-4" title="4">one  bar  <span class="dv">1</span>   <span class="dv">2</span></a>
<a class="sourceLine" id="cb251-5" title="5">two  foo  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb251-6" title="6">two  foo  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb251-7" title="7">two  bar  <span class="dv">5</span>  <span class="dv">10</span></a>
<a class="sourceLine" id="cb251-8" title="8">one  foo  <span class="dv">6</span>  <span class="dv">12</span></a></code></pre></div>
</section>
<section id="answer-2-score-244" class="level4">
<h4>Answer 2 (score 244)</h4>
<h5>
tl;dr
</h3>
<p>The pandas equivalent to</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb252-1" title="1">select <span class="op">*</span> <span class="im">from</span> table where column_name <span class="op">=</span> some_value</a></code></pre></div>
<p>is</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb253-1" title="1">table[table.column_name <span class="op">==</span> some_value]</a></code></pre></div>
<p>Multiple conditions:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb254-1" title="1">table[(table.column_name <span class="op">==</span> some_value) <span class="op">|</span> (table.column_name2 <span class="op">==</span> some_value2)]</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb255-1" title="1">table.query(<span class="st">&#39;column_name == some_value | column_name2 == some_value2&#39;</span>)</a></code></pre></div>
<h5>
Code example
</h3>
<div class="sourceCode" id="cb256"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb256-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb256-2" title="2"></a>
<a class="sourceLine" id="cb256-3" title="3"><span class="co"># Create data set</span></a>
<a class="sourceLine" id="cb256-4" title="4">d <span class="op">=</span> {<span class="st">&#39;foo&#39;</span>:[<span class="dv">100</span>, <span class="dv">111</span>, <span class="dv">222</span>], </a>
<a class="sourceLine" id="cb256-5" title="5">     <span class="st">&#39;bar&#39;</span>:[<span class="dv">333</span>, <span class="dv">444</span>, <span class="dv">555</span>]}</a>
<a class="sourceLine" id="cb256-6" title="6">df <span class="op">=</span> pd.DataFrame(d)</a>
<a class="sourceLine" id="cb256-7" title="7"></a>
<a class="sourceLine" id="cb256-8" title="8"><span class="co"># Full dataframe:</span></a>
<a class="sourceLine" id="cb256-9" title="9">df</a>
<a class="sourceLine" id="cb256-10" title="10"></a>
<a class="sourceLine" id="cb256-11" title="11"><span class="co"># Shows:</span></a>
<a class="sourceLine" id="cb256-12" title="12"><span class="co">#    bar   foo </span></a>
<a class="sourceLine" id="cb256-13" title="13"><span class="co"># 0  333   100</span></a>
<a class="sourceLine" id="cb256-14" title="14"><span class="co"># 1  444   111</span></a>
<a class="sourceLine" id="cb256-15" title="15"><span class="co"># 2  555   222</span></a>
<a class="sourceLine" id="cb256-16" title="16"></a>
<a class="sourceLine" id="cb256-17" title="17"><span class="co"># Output only the row(s) in df where foo is 222:</span></a>
<a class="sourceLine" id="cb256-18" title="18">df[df.foo <span class="op">==</span> <span class="dv">222</span>]</a>
<a class="sourceLine" id="cb256-19" title="19"></a>
<a class="sourceLine" id="cb256-20" title="20"><span class="co"># Shows:</span></a>
<a class="sourceLine" id="cb256-21" title="21"><span class="co">#    bar  foo</span></a>
<a class="sourceLine" id="cb256-22" title="22"><span class="co"># 2  555  222</span></a></code></pre></div>
<p>In the above code it is the line <code>df[df.foo == 222]</code> that gives the rows based on the column value, <code>222</code> in this case.</p>
<p>Multiple conditions are also possible:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb257-1" title="1">df[(df.foo <span class="op">==</span> <span class="dv">222</span>) <span class="op">|</span> (df.bar <span class="op">==</span> <span class="dv">444</span>)]</a>
<a class="sourceLine" id="cb257-2" title="2"><span class="co">#    bar  foo</span></a>
<a class="sourceLine" id="cb257-3" title="3"><span class="co"># 1  444  111</span></a>
<a class="sourceLine" id="cb257-4" title="4"><span class="co"># 2  555  222</span></a></code></pre></div>
<p>But at that point I would recommend using the <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html" rel="noreferrer">query</a> function, since it’s less verbose and yields the same result:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb258-1" title="1">df.query(<span class="st">&#39;foo == 222 | bar == 444&#39;</span>)</a></code></pre></div>
</section>
<section id="answer-3-score-205" class="level4">
<h4>Answer 3 (score 205)</h4>
<p>There are several ways to select rows from a pandas data frame:</p>
<ol>
<li>
<strong>Boolean indexing (<code>df[df['col'] == value</code>] )</strong>
</li>
<li>
<strong>Positional indexing (<code>df.iloc[...]</code>)</strong>
</li>
<li>
<strong>Label indexing (<code>df.xs(...)</code>)</strong>
</li>
<li>
<strong><code>df.query(...)</code> API</strong>
</li>
</ol>
<p>Below I show you examples of each, with advice when to use certain techniques. Assume our criterion is column <code>'A'</code> == <code>'foo'</code></p>
<p>(Note on performance: For each base type, we can keep things simple by using the pandas API or we can venture outside the API, usually into <code>numpy</code>, and speed things up.)</p>
<hr>
<p>
<strong>Setup</strong><br> The first thing we’ll need is to identify a condition that will act as our criterion for selecting rows. We’ll start with the OP’s case <code>column_name == some_value</code>, and include some other common use cases.
</p>
<p>Borrowing from <span class="citation" data-cites="unutbu">@unutbu</span>:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb259-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd, numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb259-2" title="2"></a>
<a class="sourceLine" id="cb259-3" title="3">df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;A&#39;</span>: <span class="st">&#39;foo bar foo bar foo bar foo foo&#39;</span>.split(),</a>
<a class="sourceLine" id="cb259-4" title="4">                   <span class="st">&#39;B&#39;</span>: <span class="st">&#39;one one two three two two one three&#39;</span>.split(),</a>
<a class="sourceLine" id="cb259-5" title="5">                   <span class="st">&#39;C&#39;</span>: np.arange(<span class="dv">8</span>), <span class="st">&#39;D&#39;</span>: np.arange(<span class="dv">8</span>) <span class="op">*</span> <span class="dv">2</span>})</a></code></pre></div>
<hr>
<h5>
<strong>1. Boolean indexing</strong>
</h1>
<p>… Boolean indexing requires finding the true value of each row’s <code>'A'</code> column being equal to <code>'foo'</code>, then using those truth values to identify which rows to keep. Typically, we’d name this series, an array of truth values, <code>mask</code>. We’ll do so here as well.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb260-1" title="1">mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a></code></pre></div>
<p>We can then use this mask to slice or index the data frame</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb261-1" title="1">df[mask]</a>
<a class="sourceLine" id="cb261-2" title="2"></a>
<a class="sourceLine" id="cb261-3" title="3">     A      B  C   D</a>
<a class="sourceLine" id="cb261-4" title="4"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb261-5" title="5"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb261-6" title="6"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb261-7" title="7"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb261-8" title="8"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<p>This is one of the simplest ways to accomplish this task and if performance or intuitiveness isn’t an issue, this should be your chosen method. However, if performance is a concern, then you might want to consider an alternative way of creating the <code>mask</code>.</p>
<hr>
<h5>
<strong>2. Positional indexing</strong>
</h1>
<p>Positional indexing (<code>df.iloc[...]</code>) has its use cases, but this isn’t one of them. In order to identify where to slice, we first need to perform the same boolean analysis we did above. This leaves us performing one extra step to accomplish the same task.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb262-1" title="1">mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb262-2" title="2">pos <span class="op">=</span> np.flatnonzero(mask)</a>
<a class="sourceLine" id="cb262-3" title="3">df.iloc[pos]</a>
<a class="sourceLine" id="cb262-4" title="4"></a>
<a class="sourceLine" id="cb262-5" title="5">     A      B  C   D</a>
<a class="sourceLine" id="cb262-6" title="6"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb262-7" title="7"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb262-8" title="8"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb262-9" title="9"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb262-10" title="10"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<h5>
<strong>3. Label indexing</strong>
</h1>
<p><em>Label</em> indexing can be very handy, but in this case, we are again doing more work for no benefit</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb263-1" title="1">df.set_index(<span class="st">&#39;A&#39;</span>, append<span class="op">=</span><span class="va">True</span>, drop<span class="op">=</span><span class="va">False</span>).xs(<span class="st">&#39;foo&#39;</span>, level<span class="op">=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb263-2" title="2"></a>
<a class="sourceLine" id="cb263-3" title="3">     A      B  C   D</a>
<a class="sourceLine" id="cb263-4" title="4"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb263-5" title="5"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb263-6" title="6"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb263-7" title="7"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb263-8" title="8"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<h5>
<strong>4. <code>df.query()</code> API</strong>
</h1>
<p><em><code>pd.DataFrame.query</code></em> is a very elegant/intuitive way to perform this task, but is often slower. <strong>However</strong>, if you pay attention to the timings below, for large data, the query is very efficient. More so than the standard approach and of similar magnitude as my best suggestion.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb264-1" title="1">df.query(<span class="st">&#39;A == &quot;foo&quot;&#39;</span>)</a>
<a class="sourceLine" id="cb264-2" title="2"></a>
<a class="sourceLine" id="cb264-3" title="3">     A      B  C   D</a>
<a class="sourceLine" id="cb264-4" title="4"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb264-5" title="5"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb264-6" title="6"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb264-7" title="7"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb264-8" title="8"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<hr>
<p>My preference is to use the <code>Boolean</code> <code>mask</code></p>
<p>Actual improvements can be made by modifying how we create our <code>Boolean</code> <code>mask</code>.</p>
<p>
<strong><code>mask</code> alternative 1</strong><br> <em>Use the underlying <code>numpy</code> array and forgo the overhead of creating another <code>pd.Series</code></em>
</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb265-1" title="1">mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a></code></pre></div>
<p>I’ll show more complete time tests at the end, but just take a look at the performance gains we get using the sample data frame. First, we look at the difference in creating the <code>mask</code></p>
<div class="sourceCode" id="cb266"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb266-1" title="1"><span class="op">%</span>timeit mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb266-2" title="2"><span class="op">%</span>timeit mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb266-3" title="3"></a>
<a class="sourceLine" id="cb266-4" title="4"><span class="fl">5.84</span> µs ± <span class="dv">195</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">100000</span> loops each)</a>
<a class="sourceLine" id="cb266-5" title="5"><span class="dv">166</span> µs ± <span class="fl">4.45</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">10000</span> loops each)</a></code></pre></div>
<p>Evaluating the <code>mask</code> with the <code>numpy</code> array is ~ 30 times faster. This is partly due to <code>numpy</code> evaluation often being faster. It is also partly due to the lack of overhead necessary to build an index and a corresponding <code>pd.Series</code> object.</p>
<p>Next, we’ll look at the timing for slicing with one <code>mask</code> versus the other.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb267-1" title="1">mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb267-2" title="2"><span class="op">%</span>timeit df[mask]</a>
<a class="sourceLine" id="cb267-3" title="3">mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb267-4" title="4"><span class="op">%</span>timeit df[mask]</a>
<a class="sourceLine" id="cb267-5" title="5"></a>
<a class="sourceLine" id="cb267-6" title="6"><span class="dv">219</span> µs ± <span class="fl">12.3</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</a>
<a class="sourceLine" id="cb267-7" title="7"><span class="dv">239</span> µs ± <span class="fl">7.03</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</a></code></pre></div>
<p>The performance gains aren’t as pronounced. We’ll see if this holds up over more robust testing.</p>
<hr>
<p>
<strong><code>mask</code> alternative 2</strong><br> We could have reconstructed the data frame as well. There is a big caveat when reconstructing a dataframe—you must take care of the <code>dtypes</code> when doing so!
</p>
<p>Instead of <code>df[mask]</code> we will do this</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb268-1" title="1">pd.DataFrame(df.values[mask], df.index[mask], df.columns).astype(df.dtypes)</a></code></pre></div>
<p>If the data frame is of mixed type, which our example is, then when we get <code>df.values</code> the resulting array is of <code>dtype</code> <code>object</code> and consequently, all columns of the new data frame will be of <code>dtype</code> <code>object</code>. Thus requiring the <code>astype(df.dtypes)</code> and killing any potential performance gains.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb269-1" title="1"><span class="op">%</span>timeit df[m]</a>
<a class="sourceLine" id="cb269-2" title="2"><span class="op">%</span>timeit pd.DataFrame(df.values[mask], df.index[mask], df.columns).astype(df.dtypes)</a>
<a class="sourceLine" id="cb269-3" title="3"></a>
<a class="sourceLine" id="cb269-4" title="4"><span class="dv">216</span> µs ± <span class="fl">10.4</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</a>
<a class="sourceLine" id="cb269-5" title="5"><span class="fl">1.43</span> ms ± <span class="fl">39.6</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</a></code></pre></div>
<p>However, if the data frame is not of mixed type, this is a very useful way to do it.</p>
<p>Given</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb270-1" title="1">np.random.seed([<span class="dv">3</span>,<span class="dv">1415</span>])</a>
<a class="sourceLine" id="cb270-2" title="2">d1 <span class="op">=</span> pd.DataFrame(np.random.randint(<span class="dv">10</span>, size<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>)), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;ABCDE&#39;</span>))</a>
<a class="sourceLine" id="cb270-3" title="3"></a>
<a class="sourceLine" id="cb270-4" title="4">d1</a>
<a class="sourceLine" id="cb270-5" title="5"></a>
<a class="sourceLine" id="cb270-6" title="6">   A  B  C  D  E</a>
<a class="sourceLine" id="cb270-7" title="7"><span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">7</span>  <span class="dv">3</span>  <span class="dv">8</span></a>
<a class="sourceLine" id="cb270-8" title="8"><span class="dv">1</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">8</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb270-9" title="9"><span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">4</span>  <span class="dv">9</span></a>
<a class="sourceLine" id="cb270-10" title="10"><span class="dv">3</span>  <span class="dv">7</span>  <span class="dv">3</span>  <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">3</span></a>
<a class="sourceLine" id="cb270-11" title="11"><span class="dv">4</span>  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">7</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb270-12" title="12"><span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">3</span>  <span class="dv">7</span>  <span class="dv">5</span>  <span class="dv">9</span></a>
<a class="sourceLine" id="cb270-13" title="13"><span class="dv">6</span>  <span class="dv">8</span>  <span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">4</span>  <span class="dv">7</span></a>
<a class="sourceLine" id="cb270-14" title="14"><span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">6</span>  <span class="dv">5</span></a>
<a class="sourceLine" id="cb270-15" title="15"><span class="dv">8</span>  <span class="dv">2</span>  <span class="dv">8</span>  <span class="dv">7</span>  <span class="dv">5</span>  <span class="dv">8</span></a>
<a class="sourceLine" id="cb270-16" title="16"><span class="dv">9</span>  <span class="dv">4</span>  <span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">1</span>  <span class="dv">5</span>    </a></code></pre></div>
<hr>
<div class="sourceCode" id="cb271"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb271-1" title="1"><span class="op">%%</span>timeit</a>
<a class="sourceLine" id="cb271-2" title="2">mask <span class="op">=</span> d1[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb271-3" title="3">d1[mask]</a>
<a class="sourceLine" id="cb271-4" title="4"></a>
<a class="sourceLine" id="cb271-5" title="5"><span class="dv">179</span> µs ± <span class="fl">8.73</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">10000</span> loops each)</a></code></pre></div>
<p>Versus</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb272-1" title="1"><span class="op">%%</span>timeit</a>
<a class="sourceLine" id="cb272-2" title="2">mask <span class="op">=</span> d1[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb272-3" title="3">pd.DataFrame(d1.values[mask], d1.index[mask], d1.columns)</a>
<a class="sourceLine" id="cb272-4" title="4"></a>
<a class="sourceLine" id="cb272-5" title="5"><span class="dv">87</span> µs ± <span class="fl">5.12</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">10000</span> loops each)</a></code></pre></div>
<p>We cut the time in half.</p>
<hr>
<p>
<strong><code>mask</code> alternative 3</strong><br> <span class="citation" data-cites="unutbu">@unutbu</span> also shows us how to use <code>pd.Series.isin</code> to account for each element of <code>df['A']</code> being in a set of values. This evaluates to the same thing if our set of values is a set of one value, namely <code>'foo'</code>. But it also generalizes to include larger sets of values if needed. Turns out, this is still pretty fast even though it is a more general solution. The only real loss is in intuitiveness for those not familiar with the concept.
</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb273-1" title="1">mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].isin([<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb273-2" title="2">df[mask]</a>
<a class="sourceLine" id="cb273-3" title="3"></a>
<a class="sourceLine" id="cb273-4" title="4">     A      B  C   D</a>
<a class="sourceLine" id="cb273-5" title="5"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb273-6" title="6"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb273-7" title="7"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb273-8" title="8"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb273-9" title="9"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<p>However, as before, we can utilize <code>numpy</code> to improve performance while sacrificing virtually nothing. We’ll use <code>np.in1d</code></p>
<div class="sourceCode" id="cb274"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb274-1" title="1">mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb274-2" title="2">df[mask]</a>
<a class="sourceLine" id="cb274-3" title="3"></a>
<a class="sourceLine" id="cb274-4" title="4">     A      B  C   D</a>
<a class="sourceLine" id="cb274-5" title="5"><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb274-6" title="6"><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb274-7" title="7"><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb274-8" title="8"><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></a>
<a class="sourceLine" id="cb274-9" title="9"><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></a></code></pre></div>
<hr>
<p>
<strong>Timing</strong><br> I’ll include other concepts mentioned in other posts as well for reference.<br> <em>Code Below</em>
</p>
<p>Each Column in this table represents a different length data frame over which we test each function. Each column shows relative time taken, with the fastest function given a base index of <code>1.0</code>.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb275-1" title="1">res.div(res.<span class="bu">min</span>())</a>
<a class="sourceLine" id="cb275-2" title="2"></a>
<a class="sourceLine" id="cb275-3" title="3">                         <span class="dv">10</span>        <span class="dv">30</span>        <span class="dv">100</span>       <span class="dv">300</span>       <span class="dv">1000</span>      <span class="dv">3000</span>      <span class="dv">10000</span>     <span class="dv">30000</span></a>
<a class="sourceLine" id="cb275-4" title="4">mask_standard         <span class="fl">2.156872</span>  <span class="fl">1.850663</span>  <span class="fl">2.034149</span>  <span class="fl">2.166312</span>  <span class="fl">2.164541</span>  <span class="fl">3.090372</span>  <span class="fl">2.981326</span>  <span class="fl">3.131151</span></a>
<a class="sourceLine" id="cb275-5" title="5">mask_standard_loc     <span class="fl">1.879035</span>  <span class="fl">1.782366</span>  <span class="fl">1.988823</span>  <span class="fl">2.338112</span>  <span class="fl">2.361391</span>  <span class="fl">3.036131</span>  <span class="fl">2.998112</span>  <span class="fl">2.990103</span></a>
<a class="sourceLine" id="cb275-6" title="6">mask_with_values      <span class="fl">1.010166</span>  <span class="fl">1.000000</span>  <span class="fl">1.005113</span>  <span class="fl">1.026363</span>  <span class="fl">1.028698</span>  <span class="fl">1.293741</span>  <span class="fl">1.007824</span>  <span class="fl">1.016919</span></a>
<a class="sourceLine" id="cb275-7" title="7">mask_with_values_loc  <span class="fl">1.196843</span>  <span class="fl">1.300228</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.038989</span>  <span class="fl">1.219233</span>  <span class="fl">1.037020</span>  <span class="fl">1.000000</span></a>
<a class="sourceLine" id="cb275-8" title="8">query                 <span class="fl">4.997304</span>  <span class="fl">4.765554</span>  <span class="fl">5.934096</span>  <span class="fl">4.500559</span>  <span class="fl">2.997924</span>  <span class="fl">2.397013</span>  <span class="fl">1.680447</span>  <span class="fl">1.398190</span></a>
<a class="sourceLine" id="cb275-9" title="9">xs_label              <span class="fl">4.124597</span>  <span class="fl">4.272363</span>  <span class="fl">5.596152</span>  <span class="fl">4.295331</span>  <span class="fl">4.676591</span>  <span class="fl">5.710680</span>  <span class="fl">6.032809</span>  <span class="fl">8.950255</span></a>
<a class="sourceLine" id="cb275-10" title="10">mask_with_isin        <span class="fl">1.674055</span>  <span class="fl">1.679935</span>  <span class="fl">1.847972</span>  <span class="fl">1.724183</span>  <span class="fl">1.345111</span>  <span class="fl">1.405231</span>  <span class="fl">1.253554</span>  <span class="fl">1.264760</span></a>
<a class="sourceLine" id="cb275-11" title="11">mask_with_in1d        <span class="fl">1.000000</span>  <span class="fl">1.083807</span>  <span class="fl">1.220493</span>  <span class="fl">1.101929</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.144175</span></a></code></pre></div>
<p>You’ll notice that fastest times seem to be shared between <code>mask_with_values</code> and <code>mask_with_in1d</code></p>
<div class="sourceCode" id="cb276"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb276-1" title="1">res.T.plot(loglog<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p><a href="https://i.stack.imgur.com/ljeTd.png" rel="noreferrer"><img src="https://i.stack.imgur.com/ljeTd.png" alt="enter image description here"></a></p>
<p><strong>Functions</strong></p>
<div class="sourceCode" id="cb277"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb277-1" title="1"><span class="kw">def</span> mask_standard(df):</a>
<a class="sourceLine" id="cb277-2" title="2">    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb277-3" title="3">    <span class="cf">return</span> df[mask]</a>
<a class="sourceLine" id="cb277-4" title="4"></a>
<a class="sourceLine" id="cb277-5" title="5"><span class="kw">def</span> mask_standard_loc(df):</a>
<a class="sourceLine" id="cb277-6" title="6">    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb277-7" title="7">    <span class="cf">return</span> df.loc[mask]</a>
<a class="sourceLine" id="cb277-8" title="8"></a>
<a class="sourceLine" id="cb277-9" title="9"><span class="kw">def</span> mask_with_values(df):</a>
<a class="sourceLine" id="cb277-10" title="10">    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb277-11" title="11">    <span class="cf">return</span> df[mask]</a>
<a class="sourceLine" id="cb277-12" title="12"></a>
<a class="sourceLine" id="cb277-13" title="13"><span class="kw">def</span> mask_with_values_loc(df):</a>
<a class="sourceLine" id="cb277-14" title="14">    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb277-15" title="15">    <span class="cf">return</span> df.loc[mask]</a>
<a class="sourceLine" id="cb277-16" title="16"></a>
<a class="sourceLine" id="cb277-17" title="17"><span class="kw">def</span> query(df):</a>
<a class="sourceLine" id="cb277-18" title="18">    <span class="cf">return</span> df.query(<span class="st">&#39;A == &quot;foo&quot;&#39;</span>)</a>
<a class="sourceLine" id="cb277-19" title="19"></a>
<a class="sourceLine" id="cb277-20" title="20"><span class="kw">def</span> xs_label(df):</a>
<a class="sourceLine" id="cb277-21" title="21">    <span class="cf">return</span> df.set_index(<span class="st">&#39;A&#39;</span>, append<span class="op">=</span><span class="va">True</span>, drop<span class="op">=</span><span class="va">False</span>).xs(<span class="st">&#39;foo&#39;</span>, level<span class="op">=-</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb277-22" title="22"></a>
<a class="sourceLine" id="cb277-23" title="23"><span class="kw">def</span> mask_with_isin(df):</a>
<a class="sourceLine" id="cb277-24" title="24">    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].isin([<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb277-25" title="25">    <span class="cf">return</span> df[mask]</a>
<a class="sourceLine" id="cb277-26" title="26"></a>
<a class="sourceLine" id="cb277-27" title="27"><span class="kw">def</span> mask_with_in1d(df):</a>
<a class="sourceLine" id="cb277-28" title="28">    mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb277-29" title="29">    <span class="cf">return</span> df[mask]</a></code></pre></div>
<hr>
<p><strong>Testing</strong></p>
<div class="sourceCode" id="cb278"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb278-1" title="1">res <span class="op">=</span> pd.DataFrame(</a>
<a class="sourceLine" id="cb278-2" title="2">    index<span class="op">=</span>[</a>
<a class="sourceLine" id="cb278-3" title="3">        <span class="st">&#39;mask_standard&#39;</span>, <span class="st">&#39;mask_standard_loc&#39;</span>, <span class="st">&#39;mask_with_values&#39;</span>, <span class="st">&#39;mask_with_values_loc&#39;</span>,</a>
<a class="sourceLine" id="cb278-4" title="4">        <span class="st">&#39;query&#39;</span>, <span class="st">&#39;xs_label&#39;</span>, <span class="st">&#39;mask_with_isin&#39;</span>, <span class="st">&#39;mask_with_in1d&#39;</span></a>
<a class="sourceLine" id="cb278-5" title="5">    ],</a>
<a class="sourceLine" id="cb278-6" title="6">    columns<span class="op">=</span>[<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">100</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">3000</span>, <span class="dv">10000</span>, <span class="dv">30000</span>],</a>
<a class="sourceLine" id="cb278-7" title="7">    dtype<span class="op">=</span><span class="bu">float</span></a>
<a class="sourceLine" id="cb278-8" title="8">)</a>
<a class="sourceLine" id="cb278-9" title="9"></a>
<a class="sourceLine" id="cb278-10" title="10"><span class="cf">for</span> j <span class="kw">in</span> res.columns:</a>
<a class="sourceLine" id="cb278-11" title="11">    d <span class="op">=</span> pd.concat([df] <span class="op">*</span> j, ignore_index<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb278-12" title="12">    <span class="cf">for</span> i <span class="kw">in</span> res.index:a</a>
<a class="sourceLine" id="cb278-13" title="13">        stmt <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{}</span><span class="st">(d)&#39;</span>.<span class="bu">format</span>(i)</a>
<a class="sourceLine" id="cb278-14" title="14">        setp <span class="op">=</span> <span class="st">&#39;from __main__ import d, </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i)</a>
<a class="sourceLine" id="cb278-15" title="15">        res.at[i, j] <span class="op">=</span> timeit(stmt, setp, number<span class="op">=</span><span class="dv">50</span>)</a></code></pre></div>
<hr>
<p>
<strong>Special Timing</strong><br> Looking at the special case when we have a single non-object <code>dtype</code> for the entire data frame. <em>Code Below</em>
</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb279-1" title="1">spec.div(spec.<span class="bu">min</span>())</a>
<a class="sourceLine" id="cb279-2" title="2"></a>
<a class="sourceLine" id="cb279-3" title="3">                     <span class="dv">10</span>        <span class="dv">30</span>        <span class="dv">100</span>       <span class="dv">300</span>       <span class="dv">1000</span>      <span class="dv">3000</span>      <span class="dv">10000</span>     <span class="dv">30000</span></a>
<a class="sourceLine" id="cb279-4" title="4">mask_with_values  <span class="fl">1.009030</span>  <span class="fl">1.000000</span>  <span class="fl">1.194276</span>  <span class="fl">1.000000</span>  <span class="fl">1.236892</span>  <span class="fl">1.095343</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span></a>
<a class="sourceLine" id="cb279-5" title="5">mask_with_in1d    <span class="fl">1.104638</span>  <span class="fl">1.094524</span>  <span class="fl">1.156930</span>  <span class="fl">1.072094</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.040043</span>  <span class="fl">1.027100</span></a>
<a class="sourceLine" id="cb279-6" title="6">reconstruct       <span class="fl">1.000000</span>  <span class="fl">1.142838</span>  <span class="fl">1.000000</span>  <span class="fl">1.355440</span>  <span class="fl">1.650270</span>  <span class="fl">2.222181</span>  <span class="fl">2.294913</span>  <span class="fl">3.406735</span></a></code></pre></div>
<p>Turns out, reconstruction isn’t worth it past a few hundred rows.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb280-1" title="1">spec.T.plot(loglog<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p><a href="https://i.stack.imgur.com/K1bNc.png" rel="noreferrer"><img src="https://i.stack.imgur.com/K1bNc.png" alt="enter image description here"></a></p>
<p><strong>Functions</strong></p>
<div class="sourceCode" id="cb281"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb281-1" title="1">np.random.seed([<span class="dv">3</span>,<span class="dv">1415</span>])</a>
<a class="sourceLine" id="cb281-2" title="2">d1 <span class="op">=</span> pd.DataFrame(np.random.randint(<span class="dv">10</span>, size<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>)), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;ABCDE&#39;</span>))</a>
<a class="sourceLine" id="cb281-3" title="3"></a>
<a class="sourceLine" id="cb281-4" title="4"><span class="kw">def</span> mask_with_values(df):</a>
<a class="sourceLine" id="cb281-5" title="5">    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></a>
<a class="sourceLine" id="cb281-6" title="6">    <span class="cf">return</span> df[mask]</a>
<a class="sourceLine" id="cb281-7" title="7"></a>
<a class="sourceLine" id="cb281-8" title="8"><span class="kw">def</span> mask_with_in1d(df):</a>
<a class="sourceLine" id="cb281-9" title="9">    mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb281-10" title="10">    <span class="cf">return</span> df[mask]</a>
<a class="sourceLine" id="cb281-11" title="11"></a>
<a class="sourceLine" id="cb281-12" title="12"><span class="kw">def</span> reconstruct(df):</a>
<a class="sourceLine" id="cb281-13" title="13">    v <span class="op">=</span> df.values</a>
<a class="sourceLine" id="cb281-14" title="14">    mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb281-15" title="15">    <span class="cf">return</span> pd.DataFrame(v[mask], df.index[mask], df.columns)</a>
<a class="sourceLine" id="cb281-16" title="16"></a>
<a class="sourceLine" id="cb281-17" title="17">spec <span class="op">=</span> pd.DataFrame(</a>
<a class="sourceLine" id="cb281-18" title="18">    index<span class="op">=</span>[<span class="st">&#39;mask_with_values&#39;</span>, <span class="st">&#39;mask_with_in1d&#39;</span>, <span class="st">&#39;reconstruct&#39;</span>],</a>
<a class="sourceLine" id="cb281-19" title="19">    columns<span class="op">=</span>[<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">100</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">3000</span>, <span class="dv">10000</span>, <span class="dv">30000</span>],</a>
<a class="sourceLine" id="cb281-20" title="20">    dtype<span class="op">=</span><span class="bu">float</span></a>
<a class="sourceLine" id="cb281-21" title="21">)</a></code></pre></div>
<p><strong>Testing</strong></p>
<div class="sourceCode" id="cb282"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb282-1" title="1"><span class="cf">for</span> j <span class="kw">in</span> spec.columns:</a>
<a class="sourceLine" id="cb282-2" title="2">    d <span class="op">=</span> pd.concat([df] <span class="op">*</span> j, ignore_index<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb282-3" title="3">    <span class="cf">for</span> i <span class="kw">in</span> spec.index:</a>
<a class="sourceLine" id="cb282-4" title="4">        stmt <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{}</span><span class="st">(d)&#39;</span>.<span class="bu">format</span>(i)</a>
<a class="sourceLine" id="cb282-5" title="5">        setp <span class="op">=</span> <span class="st">&#39;from __main__ import d, </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i)</a>
<a class="sourceLine" id="cb282-6" title="6">        spec.at[i, j] <span class="op">=</span> timeit(stmt, setp, number<span class="op">=</span><span class="dv">50</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-change-the-size-of-figures-drawn-with-matplotlib-score-2126797-in" class="level3">
<h3>33: How do you change the size of figures drawn with matplotlib? (score <a href="https://stackoverflow.com/q/332289.html">2126797</a> in )</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>How do you change the size of figure drawn with matplotlib?</p>
</section>
<section id="answer-2-score-940" class="level4">
<h4>Answer 2 (score 940)</h4>
<p><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" rel="noreferrer">figure</a> tells you the call signature:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb283-1" title="1"><span class="im">from</span> matplotlib.pyplot <span class="im">import</span> figure</a>
<a class="sourceLine" id="cb283-2" title="2">figure(num<span class="op">=</span><span class="va">None</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), dpi<span class="op">=</span><span class="dv">80</span>, facecolor<span class="op">=</span><span class="st">&#39;w&#39;</span>, edgecolor<span class="op">=</span><span class="st">&#39;k&#39;</span>)</a></code></pre></div>
<p><code>figure(figsize=(1,1))</code> would create an inch-by-inch image, which would be 80-by-80 pixels unless you also give a different dpi argument.</p>
</section>
<section id="answer-3-score-664" class="level4">
<h4>Answer 3 (score 664)</h4>
<p>If you’ve already got the figure created you can quickly do this:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb284-1" title="1">fig <span class="op">=</span> matplotlib.pyplot.gcf()</a>
<a class="sourceLine" id="cb284-2" title="2">fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>)</a>
<a class="sourceLine" id="cb284-3" title="3">fig.savefig(<span class="st">&#39;test2png.png&#39;</span>, dpi<span class="op">=</span><span class="dv">100</span>)</a></code></pre></div>
<p>To propagate the size change to an existing gui window add <code>forward=True</code></p>
<div class="sourceCode" id="cb285"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb285-1" title="1">fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>, forward<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-concatenate-two-lists-in-python-score-2112225-in-2019" class="level3">
<h3>34: How do I concatenate two lists in Python? (score <a href="https://stackoverflow.com/q/1720421.html">2112225</a> in 2019)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>How do I concatenate two lists in Python?</p>
<p>Example:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb286-1" title="1">listone <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb286-2" title="2">listtwo <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</a></code></pre></div>
<p>Expected outcome:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb287-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> joinedlist</a>
<a class="sourceLine" id="cb287-2" title="2">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</a></code></pre></div>
</section>
<section id="answer-accepted-score-3460" class="level4">
<h4>Answer accepted (score 3460)</h4>
<p>You can use the <code>+</code> operator to combine them:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb288-1" title="1">listone <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb288-2" title="2">listtwo <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb288-3" title="3"></a>
<a class="sourceLine" id="cb288-4" title="4">joinedlist <span class="op">=</span> listone <span class="op">+</span> listtwo</a></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb289-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> joinedlist</a>
<a class="sourceLine" id="cb289-2" title="2">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</a></code></pre></div>
</section>
<section id="answer-2-score-277" class="level4">
<h4>Answer 2 (score 277)</h4>
<p>It’s also possible to create a generator that simply iterates over the items in both lists. This allows you to chain lists (or any iterable) together for processing without copying the items to a new list:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb290-1" title="1"><span class="im">import</span> itertools</a>
<a class="sourceLine" id="cb290-2" title="2"><span class="cf">for</span> item <span class="kw">in</span> itertools.chain(listone, listtwo):</a>
<a class="sourceLine" id="cb290-3" title="3">   <span class="co"># Do something with each list item</span></a></code></pre></div>
</section>
<section id="answer-3-score-196" class="level4">
<h4>Answer 3 (score 196)</h4>
<p>You can use sets to obtain merged list of unique values</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb291-1" title="1">mergedlist <span class="op">=</span> <span class="bu">list</span>(<span class="bu">set</span>(listone <span class="op">+</span> listtwo))</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-the-yield-keyword-do-score-2091736-in-2019" class="level3">
<h3>35: What does the “yield” keyword do? (score <a href="https://stackoverflow.com/q/231767.html">2091736</a> in 2019)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>What is the use of the <code>yield</code> keyword in Python? What does it do?</p>
<p>For example, I’m trying to understand this code<sup><strong>1</strong></sup>:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb292-1" title="1"><span class="kw">def</span> _get_child_candidates(<span class="va">self</span>, distance, min_dist, max_dist):</a>
<a class="sourceLine" id="cb292-2" title="2">    <span class="cf">if</span> <span class="va">self</span>._leftchild <span class="kw">and</span> distance <span class="op">-</span> max_dist <span class="op">&amp;</span>lt<span class="op">;</span> <span class="va">self</span>._median:</a>
<a class="sourceLine" id="cb292-3" title="3">        <span class="cf">yield</span> <span class="va">self</span>._leftchild</a>
<a class="sourceLine" id="cb292-4" title="4">    <span class="cf">if</span> <span class="va">self</span>._rightchild <span class="kw">and</span> distance <span class="op">+</span> max_dist <span class="op">&amp;</span>gt<span class="op">;=</span> <span class="va">self</span>._median:</a>
<a class="sourceLine" id="cb292-5" title="5">        <span class="cf">yield</span> <span class="va">self</span>._rightchild  </a></code></pre></div>
<p>And this is the caller:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb293-1" title="1">result, candidates <span class="op">=</span> [], [<span class="va">self</span>]</a>
<a class="sourceLine" id="cb293-2" title="2"><span class="cf">while</span> candidates:</a>
<a class="sourceLine" id="cb293-3" title="3">    node <span class="op">=</span> candidates.pop()</a>
<a class="sourceLine" id="cb293-4" title="4">    distance <span class="op">=</span> node._get_dist(obj)</a>
<a class="sourceLine" id="cb293-5" title="5">    <span class="cf">if</span> distance <span class="op">&amp;</span>lt<span class="op">;=</span> max_dist <span class="kw">and</span> distance <span class="op">&amp;</span>gt<span class="op">;=</span> min_dist:</a>
<a class="sourceLine" id="cb293-6" title="6">        result.extend(node._values)</a>
<a class="sourceLine" id="cb293-7" title="7">    candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))</a>
<a class="sourceLine" id="cb293-8" title="8"><span class="cf">return</span> result</a></code></pre></div>
<p>
What happens when the method <code>_get_child_candidates</code> is called? Is a list returned? A single element? Is it called again? When will subsequent calls stop?
</p>
<hr>
<p>
<sub> 1. This piece of code was written by Jochen Schulz (jrschulz), who made a great Python library for metric spaces. This is the link to the complete source: <a href="http://well-adjusted.de/~jrschulz/mspace/" rel="noreferrer">Module mspace</a>.</sub>
</p>
</section>
<section id="answer-accepted-score-13854" class="level4">
<h4>Answer accepted (score 13854)</h4>
<p>To understand what <code>yield</code> does, you must understand what <em>generators</em> are. And before you can understand generators, you must understand <em>iterables</em>.</p>
<h5>
Iterables
</h2>
<p>When you create a list, you can read its items one by one. Reading its items one by one is called iteration:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb294-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> mylist <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb294-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> mylist:</a>
<a class="sourceLine" id="cb294-3" title="3">...    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb294-4" title="4"><span class="dv">1</span></a>
<a class="sourceLine" id="cb294-5" title="5"><span class="dv">2</span></a>
<a class="sourceLine" id="cb294-6" title="6"><span class="dv">3</span></a></code></pre></div>
<p><code>mylist</code> is an <em>iterable</em>. When you use a list comprehension, you create a list, and so an iterable:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb295-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> mylist <span class="op">=</span> [x<span class="op">*</span>x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</a>
<a class="sourceLine" id="cb295-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> mylist:</a>
<a class="sourceLine" id="cb295-3" title="3">...    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb295-4" title="4"><span class="dv">0</span></a>
<a class="sourceLine" id="cb295-5" title="5"><span class="dv">1</span></a>
<a class="sourceLine" id="cb295-6" title="6"><span class="dv">4</span></a></code></pre></div>
<p>Everything you can use “<code>for... in...</code>” on is an iterable; <code>lists</code>, <code>strings</code>, files…</p>
<p>These iterables are handy because you can read them as much as you wish, but you store all the values in memory and this is not always what you want when you have a lot of values.</p>
<h5>
Generators
</h2>
<p>Generators are iterators, a kind of iterable <strong>you can only iterate over once</strong>. Generators do not store all the values in memory, <strong>they generate the values on the fly</strong>:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb296-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> mygenerator <span class="op">=</span> (x<span class="op">*</span>x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb296-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> mygenerator:</a>
<a class="sourceLine" id="cb296-3" title="3">...    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb296-4" title="4"><span class="dv">0</span></a>
<a class="sourceLine" id="cb296-5" title="5"><span class="dv">1</span></a>
<a class="sourceLine" id="cb296-6" title="6"><span class="dv">4</span></a></code></pre></div>
<p>It is just the same except you used <code>()</code> instead of <code>[]</code>. BUT, you <strong>cannot</strong> perform <code>for i in mygenerator</code> a second time since generators can only be used once: they calculate 0, then forget about it and calculate 1, and end calculating 4, one by one.</p>
<h5>
Yield
</h2>
<p><code>yield</code> is a keyword that is used like <code>return</code>, except the function will return a generator.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb297-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">def</span> createGenerator():</a>
<a class="sourceLine" id="cb297-2" title="2">...    mylist <span class="op">=</span> <span class="bu">range</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb297-3" title="3">...    <span class="cf">for</span> i <span class="kw">in</span> mylist:</a>
<a class="sourceLine" id="cb297-4" title="4">...        <span class="cf">yield</span> i<span class="op">*</span>i</a>
<a class="sourceLine" id="cb297-5" title="5">...</a>
<a class="sourceLine" id="cb297-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> mygenerator <span class="op">=</span> createGenerator() <span class="co"># create a generator</span></a>
<a class="sourceLine" id="cb297-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(mygenerator) <span class="co"># mygenerator is an object!</span></a>
<a class="sourceLine" id="cb297-8" title="8"><span class="op">&amp;</span>lt<span class="op">;</span>generator <span class="bu">object</span> createGenerator at <span class="bn">0xb7555c34</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb297-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> mygenerator:</a>
<a class="sourceLine" id="cb297-10" title="10">...     <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb297-11" title="11"><span class="dv">0</span></a>
<a class="sourceLine" id="cb297-12" title="12"><span class="dv">1</span></a>
<a class="sourceLine" id="cb297-13" title="13"><span class="dv">4</span></a></code></pre></div>
<p>Here it’s a useless example, but it’s handy when you know your function will return a huge set of values that you will only need to read once.</p>
<p>To master <code>yield</code>, you must understand that <strong>when you call the function, the code you have written in the function body does not run.</strong> The function only returns the generator object, this is a bit tricky :-)</p>
<p>Then, your code will continue from where it left off each time <code>for</code> uses the generator.</p>
<p>Now the hard part:</p>
<p>The first time the <code>for</code> calls the generator object created from your function, it will run the code in your function from the beginning until it hits <code>yield</code>, then it’ll return the first value of the loop. Then, each other call will run the loop you have written in the function one more time, and return the next value until there is no value to return.</p>
<p>The generator is considered empty once the function runs, but does not hit <code>yield</code> anymore. It can be because the loop had come to an end, or because you do not satisfy an <code>&quot;if/else&quot;</code> anymore.</p>
<hr>
<h5>
Your code explained
</h2>
<p><em>Generator:</em></p>
<div class="sourceCode" id="cb298"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb298-1" title="1"><span class="co"># Here you create the method of the node object that will return the generator</span></a>
<a class="sourceLine" id="cb298-2" title="2"><span class="kw">def</span> _get_child_candidates(<span class="va">self</span>, distance, min_dist, max_dist):</a>
<a class="sourceLine" id="cb298-3" title="3"></a>
<a class="sourceLine" id="cb298-4" title="4">    <span class="co"># Here is the code that will be called each time you use the generator object:</span></a>
<a class="sourceLine" id="cb298-5" title="5"></a>
<a class="sourceLine" id="cb298-6" title="6">    <span class="co"># If there is still a child of the node object on its left</span></a>
<a class="sourceLine" id="cb298-7" title="7">    <span class="co"># AND if the distance is ok, return the next child</span></a>
<a class="sourceLine" id="cb298-8" title="8">    <span class="cf">if</span> <span class="va">self</span>._leftchild <span class="kw">and</span> distance <span class="op">-</span> max_dist <span class="op">&amp;</span>lt<span class="op">;</span> <span class="va">self</span>._median:</a>
<a class="sourceLine" id="cb298-9" title="9">        <span class="cf">yield</span> <span class="va">self</span>._leftchild</a>
<a class="sourceLine" id="cb298-10" title="10"></a>
<a class="sourceLine" id="cb298-11" title="11">    <span class="co"># If there is still a child of the node object on its right</span></a>
<a class="sourceLine" id="cb298-12" title="12">    <span class="co"># AND if the distance is ok, return the next child</span></a>
<a class="sourceLine" id="cb298-13" title="13">    <span class="cf">if</span> <span class="va">self</span>._rightchild <span class="kw">and</span> distance <span class="op">+</span> max_dist <span class="op">&amp;</span>gt<span class="op">;=</span> <span class="va">self</span>._median:</a>
<a class="sourceLine" id="cb298-14" title="14">        <span class="cf">yield</span> <span class="va">self</span>._rightchild</a>
<a class="sourceLine" id="cb298-15" title="15"></a>
<a class="sourceLine" id="cb298-16" title="16">    <span class="co"># If the function arrives here, the generator will be considered empty</span></a>
<a class="sourceLine" id="cb298-17" title="17">    <span class="co"># there is no more than two values: the left and the right children</span></a></code></pre></div>
<p><em>Caller:</em></p>
<div class="sourceCode" id="cb299"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb299-1" title="1"><span class="co"># Create an empty list and a list with the current object reference</span></a>
<a class="sourceLine" id="cb299-2" title="2">result, candidates <span class="op">=</span> <span class="bu">list</span>(), [<span class="va">self</span>]</a>
<a class="sourceLine" id="cb299-3" title="3"></a>
<a class="sourceLine" id="cb299-4" title="4"><span class="co"># Loop on candidates (they contain only one element at the beginning)</span></a>
<a class="sourceLine" id="cb299-5" title="5"><span class="cf">while</span> candidates:</a>
<a class="sourceLine" id="cb299-6" title="6"></a>
<a class="sourceLine" id="cb299-7" title="7">    <span class="co"># Get the last candidate and remove it from the list</span></a>
<a class="sourceLine" id="cb299-8" title="8">    node <span class="op">=</span> candidates.pop()</a>
<a class="sourceLine" id="cb299-9" title="9"></a>
<a class="sourceLine" id="cb299-10" title="10">    <span class="co"># Get the distance between obj and the candidate</span></a>
<a class="sourceLine" id="cb299-11" title="11">    distance <span class="op">=</span> node._get_dist(obj)</a>
<a class="sourceLine" id="cb299-12" title="12"></a>
<a class="sourceLine" id="cb299-13" title="13">    <span class="co"># If distance is ok, then you can fill the result</span></a>
<a class="sourceLine" id="cb299-14" title="14">    <span class="cf">if</span> distance <span class="op">&amp;</span>lt<span class="op">;=</span> max_dist <span class="kw">and</span> distance <span class="op">&amp;</span>gt<span class="op">;=</span> min_dist:</a>
<a class="sourceLine" id="cb299-15" title="15">        result.extend(node._values)</a>
<a class="sourceLine" id="cb299-16" title="16"></a>
<a class="sourceLine" id="cb299-17" title="17">    <span class="co"># Add the children of the candidate in the candidate&#39;s list</span></a>
<a class="sourceLine" id="cb299-18" title="18">    <span class="co"># so the loop will keep running until it will have looked</span></a>
<a class="sourceLine" id="cb299-19" title="19">    <span class="co"># at all the children of the children of the children, etc. of the candidate</span></a>
<a class="sourceLine" id="cb299-20" title="20">    candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))</a>
<a class="sourceLine" id="cb299-21" title="21"></a>
<a class="sourceLine" id="cb299-22" title="22"><span class="cf">return</span> result</a></code></pre></div>
<p>This code contains several smart parts:</p>
<ul>
<li>
<p>
The loop iterates on a list, but the list expands while the loop is being iterated :-) It’s a concise way to go through all these nested data even if it’s a bit dangerous since you can end up with an infinite loop. In this case, <code>candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))</code> exhaust all the values of the generator, but <code>while</code> keeps creating new generator objects which will produce different values from the previous ones since it’s not applied on the same node.
</p>
</li>
<li>
<p>
The <code>extend()</code> method is a list object method that expects an iterable and adds its values to the list.
</p>
</li>
</ul>
<p>Usually we pass a list to it:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb300-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb300-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> b <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb300-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a.extend(b)</a>
<a class="sourceLine" id="cb300-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(a)</a>
<a class="sourceLine" id="cb300-5" title="5">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a></code></pre></div>
<p>But in your code, it gets a generator, which is good because:</p>
<ol>
<li>
You don’t need to read the values twice.
</li>
<li>
You may have a lot of children and you don’t want them all stored in memory.
</li>
</ol>
<p>And it works because Python does not care if the argument of a method is a list or not. Python expects iterables so it will work with strings, lists, tuples, and generators! This is called duck typing and is one of the reasons why Python is so cool. But this is another story, for another question…</p>
<p>You can stop here, or read a little bit to see an advanced use of a generator:</p>
<h5>
Controlling a generator exhaustion
</h2>
<div class="sourceCode" id="cb301"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb301-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> Bank(): <span class="co"># Let&#39;s create a bank, building ATMs</span></a>
<a class="sourceLine" id="cb301-2" title="2">...    crisis <span class="op">=</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb301-3" title="3">...    <span class="kw">def</span> create_atm(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb301-4" title="4">...        <span class="cf">while</span> <span class="kw">not</span> <span class="va">self</span>.crisis:</a>
<a class="sourceLine" id="cb301-5" title="5">...            <span class="cf">yield</span> <span class="st">&quot;$100&quot;</span></a>
<a class="sourceLine" id="cb301-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> hsbc <span class="op">=</span> Bank() <span class="co"># When everything&#39;s ok the ATM gives you as much as you want</span></a>
<a class="sourceLine" id="cb301-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> corner_street_atm <span class="op">=</span> hsbc.create_atm()</a>
<a class="sourceLine" id="cb301-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</a>
<a class="sourceLine" id="cb301-9" title="9">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-10" title="10"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</a>
<a class="sourceLine" id="cb301-11" title="11">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-12" title="12"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>([corner_street_atm.<span class="bu">next</span>() <span class="cf">for</span> cash <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)])</a>
<a class="sourceLine" id="cb301-13" title="13">[<span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>]</a>
<a class="sourceLine" id="cb301-14" title="14"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> hsbc.crisis <span class="op">=</span> <span class="va">True</span> <span class="co"># Crisis is coming, no more money!</span></a>
<a class="sourceLine" id="cb301-15" title="15"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</a>
<a class="sourceLine" id="cb301-16" title="16"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;exceptions.StopIteration&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb301-17" title="17"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> wall_street_atm <span class="op">=</span> hsbc.create_atm() <span class="co"># It&#39;s even true for new ATMs</span></a>
<a class="sourceLine" id="cb301-18" title="18"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(wall_street_atm.<span class="bu">next</span>())</a>
<a class="sourceLine" id="cb301-19" title="19"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;exceptions.StopIteration&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb301-20" title="20"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> hsbc.crisis <span class="op">=</span> <span class="va">False</span> <span class="co"># The trouble is, even post-crisis the ATM remains empty</span></a>
<a class="sourceLine" id="cb301-21" title="21"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</a>
<a class="sourceLine" id="cb301-22" title="22"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;exceptions.StopIteration&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb301-23" title="23"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> brand_new_atm <span class="op">=</span> hsbc.create_atm() <span class="co"># Build a new one to get back in business</span></a>
<a class="sourceLine" id="cb301-24" title="24"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> cash <span class="kw">in</span> brand_new_atm:</a>
<a class="sourceLine" id="cb301-25" title="25">...    <span class="bu">print</span> cash</a>
<a class="sourceLine" id="cb301-26" title="26">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-27" title="27">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-28" title="28">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-29" title="29">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-30" title="30">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-31" title="31">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-32" title="32">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-33" title="33">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-34" title="34">$<span class="dv">100</span></a>
<a class="sourceLine" id="cb301-35" title="35">...</a></code></pre></div>
<p><strong>Note:</strong> For Python 3, use<code>print(corner_street_atm.__next__())</code> or <code>print(next(corner_street_atm))</code></p>
<p>It can be useful for various things like controlling access to a resource.</p>
<h5>
Itertools, your best friend
</h2>
<p>
The itertools module contains special functions to manipulate iterables. Ever wish to duplicate a generator? Chain two generators? Group values in a nested list with a one-liner? <code>Map / Zip</code> without creating another list?
</p>
<p>Then just <code>import itertools</code>.</p>
<p>An example? Let’s see the possible orders of arrival for a four-horse race:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb302-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> horses <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb302-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> races <span class="op">=</span> itertools.permutations(horses)</a>
<a class="sourceLine" id="cb302-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(races)</a>
<a class="sourceLine" id="cb302-4" title="4"><span class="op">&amp;</span>lt<span class="op">;</span>itertools.permutations <span class="bu">object</span> at <span class="bn">0xb754f1dc</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb302-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(<span class="bu">list</span>(itertools.permutations(horses)))</a>
<a class="sourceLine" id="cb302-6" title="6">[(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb302-7" title="7"> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb302-8" title="8"> (<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb302-9" title="9"> (<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb302-10" title="10"> (<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb302-11" title="11"> (<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb302-12" title="12"> (<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb302-13" title="13"> (<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb302-14" title="14"> (<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb302-15" title="15"> (<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb302-16" title="16"> (<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb302-17" title="17"> (<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb302-18" title="18"> (<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb302-19" title="19"> (<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb302-20" title="20"> (<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb302-21" title="21"> (<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb302-22" title="22"> (<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb302-23" title="23"> (<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb302-24" title="24"> (<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb302-25" title="25"> (<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb302-26" title="26"> (<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb302-27" title="27"> (<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb302-28" title="28"> (<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb302-29" title="29"> (<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>)]</a></code></pre></div>
<h5>
Understanding the inner mechanisms of iteration
</h2>
<p>
Iteration is a process implying iterables (implementing the <code>__iter__()</code> method) and iterators (implementing the <code>__next__()</code> method). Iterables are any objects you can get an iterator from. Iterators are objects that let you iterate on iterables.
</p>
<p>There is more about it in this article about <a href="http://effbot.org/zone/python-for-statement.htm" rel="noreferrer">how <code>for</code> loops work</a>.</p>
</section>
<section id="answer-2-score-1872" class="level4">
<h4>Answer 2 (score 1872)</h4>
<h5>
Shortcut to understanding <code>yield</code>
</h2>
<p>When you see a function with <code>yield</code> statements, apply this easy trick to understand what will happen:</p>
<ol>
<li>
Insert a line <code>result = []</code> at the start of the function.
</li>
<li>
Replace each <code>yield expr</code> with <code>result.append(expr)</code>.
</li>
<li>
Insert a line <code>return result</code> at the bottom of the function.
</li>
<li>
Yay - no more <code>yield</code> statements! Read and figure out code.
</li>
<li>
Compare function to original definition.
</li>
</ol>
<p>This trick may give you an idea of the logic behind the function, but what actually happens with <code>yield</code> is significantly different that what happens in the list based approach. In many cases the yield approach will be a lot more memory efficient and faster too. In other cases this trick will get you stuck in an infinite loop, even though the original function works just fine. Read on to learn more…</p>
<h5>
Don’t confuse your Iterables, Iterators and Generators
</h2>
<p>First, the <strong>iterator protocol</strong> - when you write</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb303-1" title="1"><span class="cf">for</span> x <span class="kw">in</span> mylist:</a>
<a class="sourceLine" id="cb303-2" title="2">    ...loop body...</a></code></pre></div>
<p>Python performs the following two steps:</p>
<ol>
<li>
<p>
Gets an iterator for <code>mylist</code>:
</p>
<p>Call <code>iter(mylist)</code> -&gt; this returns an object with a <code>next()</code> method (or <code>__next__()</code> in Python 3).</p>
[This is the step most people forget to tell you about]
</li>
<li>
<p>
Uses the iterator to loop over items:
</p>
Keep calling the <code>next()</code> method on the iterator returned from step 1. The return value from <code>next()</code> is assigned to <code>x</code> and the loop body is executed. If an exception <code>StopIteration</code> is raised from within <code>next()</code>, it means there are no more values in the iterator and the loop is exited.
</li>
</ol>
<p>The truth is Python performs the above two steps anytime it wants to <em>loop over</em> the contents of an object - so it could be a for loop, but it could also be code like <code>otherlist.extend(mylist)</code> (where <code>otherlist</code> is a Python list).</p>
<p>Here <code>mylist</code> is an <em>iterable</em> because it implements the iterator protocol. In a user defined class, you can implement the <code>__iter__()</code> method to make instances of your class iterable. This method should return an <em>iterator</em>. An iterator is an object with a <code>next()</code> method. It is possible to implement both <code>__iter__()</code> and <code>next()</code> on the same class, and have <code>__iter__()</code> return <code>self</code>. This will work for simple cases, but not when you want two iterators looping over the same object at the same time.</p>
<p>So that’s the iterator protocol, many objects implement this protocol:</p>
<ol>
<li>
Built-in lists, dictionaries, tuples, sets, files.
</li>
<li>
User defined classes that implement <code>__iter__()</code>.
</li>
<li>
Generators.
</li>
</ol>
<p>Note that a <code>for</code> loop doesn’t know what kind of object it’s dealing with - it just follows the iterator protocol, and is happy to get item after item as it calls <code>next()</code>. Built-in lists return their items one by one, dictionaries return the <em>keys</em> one by one, files return the <em>lines</em> one by one, etc. And generators return… well that’s where <code>yield</code> comes in:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb304-1" title="1"><span class="kw">def</span> f123():</a>
<a class="sourceLine" id="cb304-2" title="2">    <span class="cf">yield</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb304-3" title="3">    <span class="cf">yield</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb304-4" title="4">    <span class="cf">yield</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb304-5" title="5"></a>
<a class="sourceLine" id="cb304-6" title="6"><span class="cf">for</span> item <span class="kw">in</span> f123():</a>
<a class="sourceLine" id="cb304-7" title="7">    <span class="bu">print</span> item</a></code></pre></div>
<p>Instead of <code>yield</code> statements, if you had three <code>return</code> statements in <code>f123()</code> only the first would get executed, and the function would exit. But <code>f123()</code> is no ordinary function. When <code>f123()</code> is called, it <em>does not</em> return any of the values in the yield statements! It returns a generator object. Also, the function does not really exit - it goes into a suspended state. When the <code>for</code> loop tries to loop over the generator object, the function resumes from its suspended state at the very next line after the <code>yield</code> it previously returned from, executes the next line of code, in this case a <code>yield</code> statement, and returns that as the next item. This happens until the function exits, at which point the generator raises <code>StopIteration</code>, and the loop exits.</p>
<p>So the generator object is sort of like an adapter - at one end it exhibits the iterator protocol, by exposing <code>__iter__()</code> and <code>next()</code> methods to keep the <code>for</code> loop happy. At the other end however, it runs the function just enough to get the next value out of it, and puts it back in suspended mode.</p>
<h5>
Why Use Generators?
</h2>
<p>Usually you can write code that doesn’t use generators but implements the same logic. One option is to use the temporary list ‘trick’ I mentioned before. That will not work in all cases, for e.g. if you have infinite loops, or it may make inefficient use of memory when you have a really long list. The other approach is to implement a new iterable class <code>SomethingIter</code> that keeps state in instance members and performs the next logical step in it’s <code>next()</code> (or <code>__next__()</code> in Python 3) method. Depending on the logic, the code inside the <code>next()</code> method may end up looking very complex and be prone to bugs. Here generators provide a clean and easy solution.</p>
</section>
<section id="answer-3-score-504" class="level4">
<h4>Answer 3 (score 504)</h4>
<p>Think of it this way:</p>
<p>An iterator is just a fancy sounding term for an object that has a <code>next()</code> method. So a yield-ed function ends up being something like this:</p>
<p>Original version:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb305-1" title="1"><span class="kw">def</span> some_function():</a>
<a class="sourceLine" id="cb305-2" title="2">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">4</span>):</a>
<a class="sourceLine" id="cb305-3" title="3">        <span class="cf">yield</span> i</a>
<a class="sourceLine" id="cb305-4" title="4"></a>
<a class="sourceLine" id="cb305-5" title="5"><span class="cf">for</span> i <span class="kw">in</span> some_function():</a>
<a class="sourceLine" id="cb305-6" title="6">    <span class="bu">print</span> i</a></code></pre></div>
<p>This is basically what the Python interpreter does with the above code:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb306-1" title="1"><span class="kw">class</span> it:</a>
<a class="sourceLine" id="cb306-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb306-3" title="3">        <span class="co"># Start at -1 so that we get 0 when we add 1 below.</span></a>
<a class="sourceLine" id="cb306-4" title="4">        <span class="va">self</span>.count <span class="op">=</span> <span class="dv">-1</span></a>
<a class="sourceLine" id="cb306-5" title="5"></a>
<a class="sourceLine" id="cb306-6" title="6">    <span class="co"># The __iter__ method will be called once by the &#39;for&#39; loop.</span></a>
<a class="sourceLine" id="cb306-7" title="7">    <span class="co"># The rest of the magic happens on the object returned by this method.</span></a>
<a class="sourceLine" id="cb306-8" title="8">    <span class="co"># In this case it is the object itself.</span></a>
<a class="sourceLine" id="cb306-9" title="9">    <span class="kw">def</span> <span class="fu">__iter__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb306-10" title="10">        <span class="cf">return</span> <span class="va">self</span></a>
<a class="sourceLine" id="cb306-11" title="11"></a>
<a class="sourceLine" id="cb306-12" title="12">    <span class="co"># The next method will be called repeatedly by the &#39;for&#39; loop</span></a>
<a class="sourceLine" id="cb306-13" title="13">    <span class="co"># until it raises StopIteration.</span></a>
<a class="sourceLine" id="cb306-14" title="14">    <span class="kw">def</span> <span class="bu">next</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb306-15" title="15">        <span class="va">self</span>.count <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb306-16" title="16">        <span class="cf">if</span> <span class="va">self</span>.count <span class="op">&amp;</span>lt<span class="op">;</span> <span class="dv">4</span>:</a>
<a class="sourceLine" id="cb306-17" title="17">            <span class="cf">return</span> <span class="va">self</span>.count</a>
<a class="sourceLine" id="cb306-18" title="18">        <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb306-19" title="19">            <span class="co"># A StopIteration exception is raised</span></a>
<a class="sourceLine" id="cb306-20" title="20">            <span class="co"># to signal that the iterator is done.</span></a>
<a class="sourceLine" id="cb306-21" title="21">            <span class="co"># This is caught implicitly by the &#39;for&#39; loop.</span></a>
<a class="sourceLine" id="cb306-22" title="22">            <span class="cf">raise</span> <span class="pp">StopIteration</span></a>
<a class="sourceLine" id="cb306-23" title="23"></a>
<a class="sourceLine" id="cb306-24" title="24"><span class="kw">def</span> some_func():</a>
<a class="sourceLine" id="cb306-25" title="25">    <span class="cf">return</span> it()</a>
<a class="sourceLine" id="cb306-26" title="26"></a>
<a class="sourceLine" id="cb306-27" title="27"><span class="cf">for</span> i <span class="kw">in</span> some_func():</a>
<a class="sourceLine" id="cb306-28" title="28">    <span class="bu">print</span> i</a></code></pre></div>
<p>For more insight as to what’s happening behind the scenes, the <code>for</code> loop can be rewritten to this:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb307-1" title="1">iterator <span class="op">=</span> some_func()</a>
<a class="sourceLine" id="cb307-2" title="2"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb307-3" title="3">    <span class="cf">while</span> <span class="dv">1</span>:</a>
<a class="sourceLine" id="cb307-4" title="4">        <span class="bu">print</span> iterator.<span class="bu">next</span>()</a>
<a class="sourceLine" id="cb307-5" title="5"><span class="cf">except</span> <span class="pp">StopIteration</span>:</a>
<a class="sourceLine" id="cb307-6" title="6">    <span class="cf">pass</span></a></code></pre></div>
<p>Does that make more sense or just confuse you more? :)</p>
<p>I should note that this <em>is</em> an oversimplification for illustrative purposes. :)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-define-a-two-dimensional-array-in-python-score-2033452-in-2017" class="level3">
<h3>36: How to define a two-dimensional array in Python (score <a href="https://stackoverflow.com/q/6667201.html">2033452</a> in 2017)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I want to define a two-dimensional array without an initialized length like this:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb308-1" title="1">Matrix <span class="op">=</span> [][]</a></code></pre></div>
<p>but it does not work…</p>
<p>I’ve tried the code below, but it is wrong too:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb309-1" title="1">Matrix <span class="op">=</span> [<span class="dv">5</span>][<span class="dv">5</span>]</a></code></pre></div>
<p><strong><em>Error:</em></strong></p>
<div class="sourceCode" id="cb310"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb310-1" title="1">Traceback ...</a>
<a class="sourceLine" id="cb310-2" title="2"></a>
<a class="sourceLine" id="cb310-3" title="3"><span class="pp">IndexError</span>: <span class="bu">list</span> index out of <span class="bu">range</span></a></code></pre></div>
<p>What is my mistake?</p>
</section>
<section id="answer-accepted-score-916" class="level4">
<h4>Answer accepted (score 916)</h4>
<p>
You’re technically trying to index an uninitialized array. You have to first initialize the outer list with lists before adding items; Python calls this “list comprehension”.
</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb311-1" title="1"><span class="co"># Creates a list containing 5 lists, each of 8 items, all set to 0</span></a>
<a class="sourceLine" id="cb311-2" title="2">w, h <span class="op">=</span> <span class="dv">8</span>, <span class="dv">5</span><span class="op">;</span></a>
<a class="sourceLine" id="cb311-3" title="3">Matrix <span class="op">=</span> [[<span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(w)] <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(h)] </a></code></pre></div>
<h5>
You can now add items to the list:
</h1>
<div class="sourceCode" id="cb312"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb312-1" title="1">Matrix[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb312-2" title="2">Matrix[<span class="dv">6</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">3</span> <span class="co"># error! range... </span></a>
<a class="sourceLine" id="cb312-3" title="3">Matrix[<span class="dv">0</span>][<span class="dv">6</span>] <span class="op">=</span> <span class="dv">3</span> <span class="co"># valid</span></a></code></pre></div>
<p>Note that the matrix is “y” address major, in other words, the “y index” comes before the “x index”.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb313-1" title="1"><span class="bu">print</span> Matrix[<span class="dv">0</span>][<span class="dv">0</span>] <span class="co"># prints 1</span></a>
<a class="sourceLine" id="cb313-2" title="2">x, y <span class="op">=</span> <span class="dv">0</span>, <span class="dv">6</span> </a>
<a class="sourceLine" id="cb313-3" title="3"><span class="bu">print</span> Matrix[x][y] <span class="co"># prints 3; be careful with indexing! </span></a></code></pre></div>
<p>Although you can name them as you wish, I look at it this way to avoid some confusion that could arise with the indexing, if you use “x” for both the inner and outer lists, and want a non-square Matrix.</p>
</section>
<section id="answer-2-score-373" class="level4">
<h4>Answer 2 (score 373)</h4>
<p>If you really want a matrix, you might be better off using <code>numpy</code>. Matrix operations in <code>numpy</code> most often use an array type with two dimensions. There are many ways to create a new array; one of the most useful is the <code>zeros</code> function, which takes a shape parameter and returns an array of the given shape, with the values initialized to zero:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb314-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> numpy</a>
<a class="sourceLine" id="cb314-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> numpy.zeros((<span class="dv">5</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb314-3" title="3">array([[ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</a>
<a class="sourceLine" id="cb314-4" title="4">       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</a>
<a class="sourceLine" id="cb314-5" title="5">       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</a>
<a class="sourceLine" id="cb314-6" title="6">       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</a>
<a class="sourceLine" id="cb314-7" title="7">       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>]])</a></code></pre></div>
<p><code>numpy</code> provides a <code>matrix</code> type as well. It’s less commonly used, and some people <a href="https://stackoverflow.com/a/3892639/577088">recommend against</a> using it. But it’s useful for people coming to <code>numpy</code> from Matlab, and in some other contexts. I thought I’d include it since we’re talking about matrices!</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb315-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> numpy.matrix([[<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]])</a>
<a class="sourceLine" id="cb315-2" title="2">matrix([[<span class="dv">1</span>, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb315-3" title="3">        [<span class="dv">3</span>, <span class="dv">4</span>]])</a></code></pre></div>
<p>Here are some other ways to create 2-d arrays and matrices (with output removed for compactness):</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb316-1" title="1">numpy.matrix(<span class="st">&#39;1 2; 3 4&#39;</span>)                 <span class="co"># use Matlab-style syntax</span></a>
<a class="sourceLine" id="cb316-2" title="2">numpy.arange(<span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))         <span class="co"># create a 1-d range and reshape</span></a>
<a class="sourceLine" id="cb316-3" title="3">numpy.array(<span class="bu">range</span>(<span class="dv">25</span>)).reshape((<span class="dv">5</span>, <span class="dv">5</span>))   <span class="co"># pass a Python range and reshape</span></a>
<a class="sourceLine" id="cb316-4" title="4">numpy.array([<span class="dv">5</span>] <span class="op">*</span> <span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))    <span class="co"># pass a Python list and reshape</span></a>
<a class="sourceLine" id="cb316-5" title="5">numpy.empty((<span class="dv">5</span>, <span class="dv">5</span>))                      <span class="co"># allocate, but don&#39;t initialize</span></a>
<a class="sourceLine" id="cb316-6" title="6">numpy.ones((<span class="dv">5</span>, <span class="dv">5</span>))                       <span class="co"># initialize with ones</span></a>
<a class="sourceLine" id="cb316-7" title="7">numpy.ndarray((<span class="dv">5</span>, <span class="dv">5</span>))                    <span class="co"># use the low-level constructor</span></a></code></pre></div>
</section>
<section id="answer-3-score-310" class="level4">
<h4>Answer 3 (score 310)</h4>
<p>Here is a shorter notation for initializing a list of lists:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb317-1" title="1">matrix <span class="op">=</span> [[<span class="dv">0</span>]<span class="op">*</span><span class="dv">5</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)]</a></code></pre></div>
<p>Unfortunately shortening this to something like <code>5*[5*[0]]</code> doesn’t really work because you end up with 5 copies of the same list, so when you modify one of them they all change, for example:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb318-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> matrix <span class="op">=</span> <span class="dv">5</span><span class="op">*</span>[<span class="dv">5</span><span class="op">*</span>[<span class="dv">0</span>]]</a>
<a class="sourceLine" id="cb318-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> matrix</a>
<a class="sourceLine" id="cb318-3" title="3">[[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]]</a>
<a class="sourceLine" id="cb318-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> matrix[<span class="dv">4</span>][<span class="dv">4</span>] <span class="op">=</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb318-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> matrix</a>
<a class="sourceLine" id="cb318-6" title="6">[[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>]]</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-install-pip-on-macos-or-os-x-score-1952317-in-2017" class="level3">
<h3>37: How do I install pip on macOS or OS X? (score <a href="https://stackoverflow.com/q/17271319.html">1952317</a> in 2017)</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>I spent most of the day yesterday searching for a clear answer for installing <code>pip</code> (package manager for Python). I can’t find a good solution.</p>
<p>How do I install it?</p>
</section>
<section id="answer-2-score-3197" class="level4">
<h4>Answer 2 (score 3197)</h4>
<div class="sourceCode" id="cb319"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb319-1" title="1">easy_install pip</a></code></pre></div>
<hr>
<p>If you need admin privileges to run this, try:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb320-1" title="1">sudo easy_install pip</a></code></pre></div>
<hr>
<p><strong>UPDATE (Jan 2019):</strong></p>
<p><code>easy_install</code> has been <a href="https://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer">deprecated</a>. Please use <a href="https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py" rel="noreferrer"><code>get-pip.py</code></a> instead.</p>
</section>
<section id="answer-3-score-542" class="level4">
<h4>Answer 3 (score 542)</h4>
<blockquote>
⚡️ <strong>TL;DR</strong> — One line solution.
</blockquote>
<p>All you have to do is:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb321-1" title="1">sudo easy_install pip</a></code></pre></div>
<blockquote>
<strong>2019</strong>: ⚠️<code>easy_install</code> has been <a href="https://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer">deprecated</a>. Check <strong>Method #2</strong> below for preferred installation!
</blockquote>
<p><em>I made a gif, coz. why not?</em></p>
<p><a href="https://ahmadawais.com/install-pip-macos-os-x-python/" rel="noreferrer"><img src="https://on.ahmda.ws/rsgI/c" alt="Install PIP on Mac"></a></p>
<p><strong>Details:</strong></p>
<blockquote>
⚡️ OK, I read the solutions given above, but here’s an <strong>EASY</strong> solution to install <code>pip</code>.
</blockquote>
<p>MacOS comes with <code>Python</code> installed. But to make sure that you have <code>Python</code> installed open the terminal and run the following command.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb322-1" title="1">python <span class="op">--</span>version</a></code></pre></div>
<p>If this command returns a version number that means <code>Python</code> exists. Which also means that you already have access to <code>easy_install</code> considering you are using <code>macOS/OSX</code>.</p>
<p>ℹ️ Now, all you have to do is run the following command.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb323-1" title="1">sudo easy_install pip</a></code></pre></div>
<p>After that, <code>pip</code> will be installed and you’ll be able to use it for installing other packages.</p>
<p>Let me know if you have any problems installing <code>pip</code> this way.</p>
<p>Cheers!</p>
<p>P.S. I ended up blogging a post about it. <a href="https://ahmadawais.com/install-pip-macos-os-x-python/" rel="noreferrer">QuickTip: How Do I Install pip on macOS or OS X?</a></p>
<hr>
<blockquote>
✅ <strong>UPDATE (Jan 2019): METHOD #2: Two line solution —</strong>
</blockquote>
<p><code>easy_install</code> has been <a href="https://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer">deprecated</a>. Please use <a href="https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py" rel="noreferrer"><code>get-pip.py</code></a> instead.</p>
<p>First of all download the <code>get-pip</code> file</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb324-1" title="1">curl https:<span class="op">//</span>bootstrap.pypa.io<span class="op">/</span>get<span class="op">-</span>pip.py <span class="op">-</span>o get<span class="op">-</span>pip.py</a></code></pre></div>
<p>Now run this file to install <code>pip</code></p>
<div class="sourceCode" id="cb325"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb325-1" title="1">python get<span class="op">-</span>pip.py</a></code></pre></div>
<p>That should do it.</p>
<p>Another gif you said? Here ya go!</p>
<p><a href="https://i.stack.imgur.com/UXG0G.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/UXG0G.gif" alt="Manual install of pip"></a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="convert-bytes-to-a-string-score-1932306-in-2019" class="level3">
<h3>38: Convert bytes to a string (score <a href="https://stackoverflow.com/q/606191.html">1932306</a> in 2019)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>I’m using this code to get standard output from an external program:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb326-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">from</span> subprocess <span class="im">import</span> <span class="op">*</span></a>
<a class="sourceLine" id="cb326-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> command_stdout <span class="op">=</span> Popen([<span class="st">&#39;ls&#39;</span>, <span class="st">&#39;-l&#39;</span>], stdout<span class="op">=</span>PIPE).communicate()[<span class="dv">0</span>]</a></code></pre></div>
<p>The communicate() method returns an array of bytes:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb327-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> command_stdout</a>
<a class="sourceLine" id="cb327-2" title="2">b<span class="st">&#39;total 0</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2</span><span class="ch">\n</span><span class="st">&#39;</span></a></code></pre></div>
<p>However, I’d like to work with the output as a normal Python string. So that I could print it like this:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb328-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(command_stdout)</a>
<a class="sourceLine" id="cb328-2" title="2"><span class="op">-</span>rw<span class="op">-</span>rw<span class="op">-</span>r<span class="op">--</span> <span class="dv">1</span> thomas thomas <span class="dv">0</span> Mar  <span class="dv">3</span> <span class="dv">07</span>:<span class="dv">03</span> file1</a>
<a class="sourceLine" id="cb328-3" title="3"><span class="op">-</span>rw<span class="op">-</span>rw<span class="op">-</span>r<span class="op">--</span> <span class="dv">1</span> thomas thomas <span class="dv">0</span> Mar  <span class="dv">3</span> <span class="dv">07</span>:<span class="dv">03</span> file2</a></code></pre></div>
<p>I thought that’s what the <a href="http://docs.python.org/3.0/library/binascii.html?highlight=b2a#binascii.b2a_qp" rel="noreferrer">binascii.b2a_qp()</a> method is for, but when I tried it, I got the same byte array again:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb329-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> binascii.b2a_qp(command_stdout)</a>
<a class="sourceLine" id="cb329-2" title="2">b<span class="st">&#39;total 0</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2</span><span class="ch">\n</span><span class="st">&#39;</span></a></code></pre></div>
<p>How do I convert the bytes value back to string? I mean, using the “batteries” instead of doing it manually. And I’d like it to be OK with Python 3.</p>
</section>
<section id="answer-accepted-score-3076" class="level4">
<h4>Answer accepted (score 3076)</h4>
<p>You need to decode the bytes object to produce a string:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb330-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> b<span class="st">&quot;abcde&quot;</span></a>
<a class="sourceLine" id="cb330-2" title="2">b<span class="st">&#39;abcde&#39;</span></a>
<a class="sourceLine" id="cb330-3" title="3"></a>
<a class="sourceLine" id="cb330-4" title="4"><span class="co"># utf-8 is used here because it is a very common encoding, but you</span></a>
<a class="sourceLine" id="cb330-5" title="5"><span class="co"># need to use the encoding your data is actually in.</span></a>
<a class="sourceLine" id="cb330-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> b<span class="st">&quot;abcde&quot;</span>.decode(<span class="st">&quot;utf-8&quot;</span>) </a>
<a class="sourceLine" id="cb330-7" title="7"><span class="co">&#39;abcde&#39;</span></a></code></pre></div>
</section>
<section id="answer-2-score-173" class="level4">
<h4>Answer 2 (score 173)</h4>
<p>You need to decode the byte string and turn it in to a character (Unicode) string.</p>
<p>On Python 2</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb331-1" title="1">encoding <span class="op">=</span> <span class="st">&#39;utf-8&#39;</span></a>
<a class="sourceLine" id="cb331-2" title="2"><span class="co">&#39;hello&#39;</span>.decode(encoding)</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb332-1" title="1"><span class="bu">unicode</span>(<span class="st">&#39;hello&#39;</span>, encoding)</a></code></pre></div>
<p>On Python 3</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb333-1" title="1">encoding <span class="op">=</span> <span class="st">&#39;utf-8&#39;</span></a>
<a class="sourceLine" id="cb333-2" title="2">b<span class="st">&#39;hello&#39;</span>.decode(encoding)</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb334-1" title="1"><span class="bu">str</span>(b<span class="st">&#39;hello&#39;</span>, encoding)</a></code></pre></div>
</section>
<section id="answer-3-score-159" class="level4">
<h4>Answer 3 (score 159)</h4>
<p>I think this way is easy:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb335-1" title="1">bytes_data <span class="op">=</span> [<span class="dv">112</span>, <span class="dv">52</span>, <span class="dv">52</span>]</a>
<a class="sourceLine" id="cb335-2" title="2"><span class="co">&quot;&quot;</span>.join(<span class="bu">map</span>(<span class="bu">chr</span>, bytes_data))</a>
<a class="sourceLine" id="cb335-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> p44</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="correct-way-to-write-line-to-file-score-1928059-in-2017" class="level3">
<h3>39: Correct way to write line to file? (score <a href="https://stackoverflow.com/q/6159900.html">1928059</a> in 2017)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>I’m used to doing <code>print &amp;gt;&amp;gt;f, &quot;hi there&quot;</code></p>
<p>However, it seems that <code>print &amp;gt;&amp;gt;</code> is getting deprecated. What is the recommended way to do the line above?</p>
<p>
<b>Update</b>: Regarding all those answers with <code>&quot;\n&quot;</code>…is this universal or Unix-specific? IE, should I be doing <code>&quot;\r\n&quot;</code> on Windows?
</p>
</section>
<section id="answer-accepted-score-991" class="level4">
<h4>Answer accepted (score 991)</h4>
<p>This should be as simple as:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb336-1" title="1"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;somefile.txt&#39;</span>, <span class="st">&#39;a&#39;</span>) <span class="im">as</span> the_file:</a>
<a class="sourceLine" id="cb336-2" title="2">    the_file.write(<span class="st">&#39;Hello</span><span class="ch">\n</span><span class="st">&#39;</span>)</a></code></pre></div>
<p>From The Documentation:</p>
<blockquote>
Do not use <code>os.linesep</code> as a line terminator when writing files opened in text mode (the default); use a single ‘’ instead, on all platforms.
</blockquote>
<p>Some useful reading:</p>
<ul>
<li>
<a href="http://docs.python.org/reference/compound_stmts.html#the-with-statement" rel="noreferrer">The <code>with</code> statement</a>
</li>
<li>
<p><a href="http://docs.python.org/library/functions.html?highlight=open#open" rel="noreferrer"><code>open()</code></a></p>
<ul>
<li>
‘a’ is for append, or use
</li>
<li>
‘w’ to write with truncation
</li>
</ul>
</li>
<li>
<a href="http://docs.python.org/library/os.html" rel="noreferrer"><code>os</code></a> (particularly <a href="http://docs.python.org/library/os.html?highlight=os.linesep#os.linesep" rel="noreferrer"><code>os.linesep</code></a>)
</li>
</ul>
</section>
<section id="answer-2-score-943" class="level4">
<h4>Answer 2 (score 943)</h4>
<p>You should use the <code>print()</code> function which is available since Python 2.6+</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb337-1" title="1"><span class="im">from</span> __future__ <span class="im">import</span> print_function  <span class="co"># Only needed for Python 2</span></a>
<a class="sourceLine" id="cb337-2" title="2"><span class="bu">print</span>(<span class="st">&quot;hi there&quot;</span>, <span class="bu">file</span><span class="op">=</span>f)</a></code></pre></div>
<p>For Python 3 you don’t need the <code>import</code>, since the <code>print()</code> function is the default.</p>
<p>The alternative would be to use:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb338-1" title="1">f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;myfile&#39;</span>, <span class="st">&#39;w&#39;</span>)</a>
<a class="sourceLine" id="cb338-2" title="2">f.write(<span class="st">&#39;hi there</span><span class="ch">\n</span><span class="st">&#39;</span>)  <span class="co"># python will convert \n to os.linesep</span></a>
<a class="sourceLine" id="cb338-3" title="3">f.close()  <span class="co"># you can omit in most cases as the destructor will call it</span></a></code></pre></div>
<p>Quoting from <a href="https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files">Python documentation</a> regarding newlines:</p>
<blockquote>
On output, if newline is None, any <code>'\n'</code> characters written are translated to the system default line separator, <code>os.linesep</code>. If newline is <code>''</code>, no translation takes place. If newline is any of the other legal values, any <code>'\n'</code> characters written are translated to the given string.
</blockquote>
</section>
<section id="answer-3-score-107" class="level4">
<h4>Answer 3 (score 107)</h4>
<p>The <a href="http://docs.python.org/tutorial/inputoutput.html" rel="noreferrer">python docs</a> recommend this way:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb339-1" title="1"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;file_to_write&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:</a>
<a class="sourceLine" id="cb339-2" title="2">    f.write(<span class="st">&#39;file contents&#39;</span>)</a></code></pre></div>
<p>So this is the way I usually do it :)</p>
<p>Statement from <a href="http://docs.python.org/tutorial/inputoutput.html" rel="noreferrer">docs.python.org</a>:</p>
<blockquote>
<p>
It is good practice to use the <strong>‘with’</strong> keyword when dealing with file objects. This has the advantage that the file is properly closed after its suite finishes, even if an exception is raised on the way. It is also much shorter than writing equivalent try-finally blocks.
</p>
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="accessing-the-index-in-for-loops-score-1900009-in-2019" class="level3">
<h3>40: Accessing the index in ‘for’ loops? (score <a href="https://stackoverflow.com/q/522563.html">1900009</a> in 2019)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>How do I access the index in a <code>for</code> loop like the following?</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb340-1" title="1">ints <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">23</span>, <span class="dv">45</span>, <span class="dv">12</span>, <span class="dv">78</span>]</a>
<a class="sourceLine" id="cb340-2" title="2"><span class="cf">for</span> i <span class="kw">in</span> ints:</a>
<a class="sourceLine" id="cb340-3" title="3">    <span class="bu">print</span>(<span class="st">&#39;item #</span><span class="sc">{}</span><span class="st"> = </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(???, i))</a></code></pre></div>
<p>I want to get this output:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb341-1" title="1">item <span class="co">#1 = 8</span></a>
<a class="sourceLine" id="cb341-2" title="2">item <span class="co">#2 = 23</span></a>
<a class="sourceLine" id="cb341-3" title="3">item <span class="co">#3 = 45</span></a>
<a class="sourceLine" id="cb341-4" title="4">item <span class="co">#4 = 12</span></a>
<a class="sourceLine" id="cb341-5" title="5">item <span class="co">#5 = 78</span></a></code></pre></div>
<p>When I loop through it using a <code>for</code> loop, how do I access the loop index, from 1 to 5 in this case?</p>
</section>
<section id="answer-accepted-score-5577" class="level4">
<h4>Answer accepted (score 5577)</h4>
<p>Using an additional state variable, such as an index variable (which you would normally use in languages such as C or PHP), is considered non-pythonic.</p>
<p>The better option is to use the built-in function <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="noreferrer" title="enumerate"><code>enumerate()</code></a>, available in both Python 2 and 3:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb342-1" title="1"><span class="cf">for</span> idx, val <span class="kw">in</span> <span class="bu">enumerate</span>(ints):</a>
<a class="sourceLine" id="cb342-2" title="2">    <span class="bu">print</span>(idx, val)</a></code></pre></div>
<p>Check out <a href="https://www.python.org/dev/peps/pep-0279/" rel="noreferrer" title="PEP 279">PEP 279</a> for more.</p>
</section>
<section id="answer-2-score-700" class="level4">
<h4>Answer 2 (score 700)</h4>
<blockquote>
<h5>
Using a for loop, how do I access the loop index, from 1 to 5 in this case?
</h1>
</blockquote>
<p>Use <code>enumerate</code> to get the index with the element as you iterate:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb343-1" title="1"><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(items):</a>
<a class="sourceLine" id="cb343-2" title="2">    <span class="bu">print</span>(index, item)</a></code></pre></div>
<p>And note that Python’s indexes start at zero, so you would get 0 to 4 with the above. If you want the count, 1 to 5, do this:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb344-1" title="1"><span class="cf">for</span> count, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">1</span>):</a>
<a class="sourceLine" id="cb344-2" title="2">    <span class="bu">print</span>(count, item)</a></code></pre></div>
<h5>
Unidiomatic control flow
</h1>
<p>What you are asking for is the Pythonic equivalent of the following, which is the algorithm most programmers of lower-level languages would use:</p>
<blockquote>
<div class="sourceCode" id="cb345"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb345-1" title="1">index <span class="op">=</span> <span class="dv">0</span>            <span class="co"># Python&#39;s indexing starts at zero</span></a>
<a class="sourceLine" id="cb345-2" title="2"><span class="cf">for</span> item <span class="kw">in</span> items:   <span class="co"># Python&#39;s for loops are a &quot;for each&quot; loop </span></a>
<a class="sourceLine" id="cb345-3" title="3">    <span class="bu">print</span>(index, item)</a>
<a class="sourceLine" id="cb345-4" title="4">    index <span class="op">+=</span> <span class="dv">1</span></a></code></pre></div>
</blockquote>
<p>Or in languages that do not have a for-each loop:</p>
<blockquote>
<div class="sourceCode" id="cb346"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb346-1" title="1">index <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb346-2" title="2"><span class="cf">while</span> index <span class="op">&amp;</span>lt<span class="op">;</span> <span class="bu">len</span>(items):</a>
<a class="sourceLine" id="cb346-3" title="3">    <span class="bu">print</span>(index, items[index])</a>
<a class="sourceLine" id="cb346-4" title="4">    index <span class="op">+=</span> <span class="dv">1</span></a></code></pre></div>
</blockquote>
<p>or sometimes more commonly (but unidiomatically) found in Python:</p>
<blockquote>
<div class="sourceCode" id="cb347"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb347-1" title="1"><span class="cf">for</span> index <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(items)):</a>
<a class="sourceLine" id="cb347-2" title="2">    <span class="bu">print</span>(index, items[index])</a></code></pre></div>
</blockquote>
<h5>
Use the Enumerate Function
</h1>
<p>Python’s <a href="https://docs.python.org/2/library/functions.html#enumerate" rel="noreferrer"><code>enumerate</code> function</a> reduces the visual clutter by hiding the accounting for the indexes, and encapsulating the iterable into another iterable (an <code>enumerate</code> object) that yields a two-item tuple of the index and the item that the original iterable would provide. That looks like this:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb348-1" title="1"><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">0</span>):   <span class="co"># default is zero</span></a>
<a class="sourceLine" id="cb348-2" title="2">    <span class="bu">print</span>(index, item)</a></code></pre></div>
<p>This code sample is fairly well the <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#index-item-2-enumerate" rel="noreferrer">canonical</a> example of the difference between code that is idiomatic of Python and code that is not. Idiomatic code is sophisticated (but not complicated) Python, written in the way that it was intended to be used. Idiomatic code is expected by the designers of the language, which means that usually this code is not just more readable, but also more efficient.</p>
<h5>
Getting a count
</h2>
<p>Even if you don’t need indexes as you go, but you need a count of the iterations (sometimes desirable) you can start with <code>1</code> and the final number will be your count.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb349-1" title="1"><span class="cf">for</span> count, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">1</span>):   <span class="co"># default is zero</span></a>
<a class="sourceLine" id="cb349-2" title="2">    <span class="bu">print</span>(item)</a>
<a class="sourceLine" id="cb349-3" title="3"></a>
<a class="sourceLine" id="cb349-4" title="4"><span class="bu">print</span>(<span class="st">&#39;there were </span><span class="sc">{0}</span><span class="st"> items printed&#39;</span>.<span class="bu">format</span>(count))</a></code></pre></div>
<p>The count seems to be more what you intend to ask for (as opposed to index) when you said you wanted from 1 to 5.</p>
<hr>
<h5>
Breaking it down - a step by step explanation
</h2>
<p>To break these examples down, say we have a list of items that we want to iterate over with an index:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb350-1" title="1">items <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>]</a></code></pre></div>
<p>Now we pass this iterable to enumerate, creating an enumerate object:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb351-1" title="1">enumerate_object <span class="op">=</span> <span class="bu">enumerate</span>(items) <span class="co"># the enumerate object</span></a></code></pre></div>
<p>We can pull the first item out of this iterable that we would get in a loop with the <code>next</code> function:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb352-1" title="1">iteration <span class="op">=</span> <span class="bu">next</span>(enumerate_object) <span class="co"># first iteration from enumerate</span></a>
<a class="sourceLine" id="cb352-2" title="2"><span class="bu">print</span>(iteration)</a></code></pre></div>
<p>And we see we get a tuple of <code>0</code>, the first index, and <code>'a'</code>, the first item:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb353-1" title="1">(<span class="dv">0</span>, <span class="st">&#39;a&#39;</span>)</a></code></pre></div>
<p>we can use what is referred to as “<a href="https://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences" rel="noreferrer">sequence unpacking</a>” to extract the elements from this two-tuple:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb354-1" title="1">index, item <span class="op">=</span> iteration</a>
<a class="sourceLine" id="cb354-2" title="2"><span class="co">#   0,  &#39;a&#39; = (0, &#39;a&#39;) # essentially this.</span></a></code></pre></div>
<p>and when we inspect <code>index</code>, we find it refers to the first index, 0, and <code>item</code> refers to the first item, <code>'a'</code>.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb355-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(index)</a>
<a class="sourceLine" id="cb355-2" title="2"><span class="dv">0</span></a>
<a class="sourceLine" id="cb355-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(item)</a>
<a class="sourceLine" id="cb355-4" title="4">a</a></code></pre></div>
<h5>
Conclusion
</h1>
<ul>
<li>
Python indexes start at zero
</li>
<li>
To get these indexes from an iterable as you iterate over it, use the enumerate function
</li>
<li>
Using enumerate in the idiomatic way (along with tuple unpacking) creates code that is more readable and maintainable:
</li>
</ul>
<p>So do this:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb356-1" title="1"><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">0</span>):   <span class="co"># Python indexes start at zero</span></a>
<a class="sourceLine" id="cb356-2" title="2">    <span class="bu">print</span>(index, item)</a></code></pre></div>
</section>
<section id="answer-3-score-132" class="level4">
<h4>Answer 3 (score 132)</h4>
<p>It’s pretty simple to start it from <code>1</code> other than <code>0</code>:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb357-1" title="1"><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(iterable, start<span class="op">=</span><span class="dv">1</span>):</a>
<a class="sourceLine" id="cb357-2" title="2">   <span class="bu">print</span> index, item</a></code></pre></div>
<h5>
Note
</h2>
<p>
Important hint, though a little misleading since <code>index</code> will be a <code>tuple</code> <code>(idx, item)</code> here. Good to go.
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-iterate-over-rows-in-a-dataframe-in-pandas-score-1869294-in-2018" class="level3">
<h3>41: How to iterate over rows in a DataFrame in Pandas? (score <a href="https://stackoverflow.com/q/16476924.html">1869294</a> in 2018)</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>I have a <code>DataFrame</code> from pandas:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb358-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb358-2" title="2">inp <span class="op">=</span> [{<span class="st">&#39;c1&#39;</span>:<span class="dv">10</span>, <span class="st">&#39;c2&#39;</span>:<span class="dv">100</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">11</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">110</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">12</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">120</span>}]</a>
<a class="sourceLine" id="cb358-3" title="3">df <span class="op">=</span> pd.DataFrame(inp)</a>
<a class="sourceLine" id="cb358-4" title="4"><span class="bu">print</span> df</a></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb359-1" title="1">   c1   c2</a>
<a class="sourceLine" id="cb359-2" title="2"><span class="dv">0</span>  <span class="dv">10</span>  <span class="dv">100</span></a>
<a class="sourceLine" id="cb359-3" title="3"><span class="dv">1</span>  <span class="dv">11</span>  <span class="dv">110</span></a>
<a class="sourceLine" id="cb359-4" title="4"><span class="dv">2</span>  <span class="dv">12</span>  <span class="dv">120</span></a></code></pre></div>
<p>Now I want to iterate over the rows of this frame. For every row I want to be able to access its elements (values in cells) by the name of the columns. For example:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb360-1" title="1"><span class="cf">for</span> row <span class="kw">in</span> df.rows:</a>
<a class="sourceLine" id="cb360-2" title="2">   <span class="bu">print</span> row[<span class="st">&#39;c1&#39;</span>], row[<span class="st">&#39;c2&#39;</span>]</a></code></pre></div>
<p>Is it possible to do that in pandas?</p>
<p>I found this <a href="https://stackoverflow.com/questions/7837722/what-is-the-most-efficient-way-to-loop-through-dataframes-with-pandas">similar question</a>. But it does not give me the answer I need. For example, it is suggested there to use:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb361-1" title="1"><span class="cf">for</span> date, row <span class="kw">in</span> df.T.iteritems():</a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb362-1" title="1"><span class="cf">for</span> row <span class="kw">in</span> df.iterrows():</a></code></pre></div>
<p>But I do not understand what the <code>row</code> object is and how I can work with it.</p>
</section>
<section id="answer-accepted-score-2033" class="level4">
<h4>Answer accepted (score 2033)</h4>
<p><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows" rel="noreferrer">DataFrame.iterrows</a> is a generator which yield both index and row</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb363-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb363-2" title="2"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb363-3" title="3"></a>
<a class="sourceLine" id="cb363-4" title="4">df <span class="op">=</span> pd.DataFrame([{<span class="st">&#39;c1&#39;</span>:<span class="dv">10</span>, <span class="st">&#39;c2&#39;</span>:<span class="dv">100</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">11</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">110</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">12</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">120</span>}])</a></code></pre></div>
<div class="sourceCode" id="cb364"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb364-1" title="1"><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</a>
<a class="sourceLine" id="cb364-2" title="2">    <span class="bu">print</span>(row[<span class="st">&#39;c1&#39;</span>], row[<span class="st">&#39;c2&#39;</span>])</a>
<a class="sourceLine" id="cb364-3" title="3"></a>
<a class="sourceLine" id="cb364-4" title="4">Output: </a>
<a class="sourceLine" id="cb364-5" title="5">   <span class="dv">10</span> <span class="dv">100</span></a>
<a class="sourceLine" id="cb364-6" title="6">   <span class="dv">11</span> <span class="dv">110</span></a>
<a class="sourceLine" id="cb364-7" title="7">   <span class="dv">12</span> <span class="dv">120</span></a></code></pre></div>
</section>
<section id="answer-2-score-314" class="level4">
<h4>Answer 2 (score 314)</h4>
<p>First consider if you really need to <em>iterate</em> over rows in a DataFrame. See <a href="https://stackoverflow.com/a/55557758/3844376">this answer</a> for alternatives.</p>
<p>If you still need to iterate over rows, you can use methods below. Note some <strong>important caveats</strong> which are not mentioned in any of the other answers.</p>
<ul>
<li>
<p>
<a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html" rel="noreferrer">DataFrame.iterrows()</a>
</p>
<code>python for index, row in df.iterrows():     print row[&quot;c1&quot;], row[&quot;c2&quot;]</code>
</li>
<li>
<p>
<a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.itertuples.html" rel="noreferrer">DataFrame.itertuples()</a>
</p>
<code>python for row in df.itertuples(index=True, name='Pandas'):     print getattr(row, &quot;c1&quot;), getattr(row, &quot;c2&quot;)</code>
</li>
</ul>
<p><code>itertuples()</code> is supposed to be faster than <code>iterrows()</code></p>
<p>But be aware, according to the docs (pandas 0.24.2 at the moment):</p>
<ul>
<li>
<p>
iterrows: <code>dtype</code> might not match from row to row
</p>
<blockquote>
Because iterrows returns a Series for each row, it <strong>does not preserve</strong> dtypes across the rows (dtypes are preserved across columns for DataFrames). To preserve dtypes while iterating over the rows, it is better to use itertuples() which returns namedtuples of the values and which is generally much faster than iterrows()
</blockquote>
</li>
<li>
<p>
iterrows: Do not modify rows
</p>
<blockquote>
You should <strong>never modify</strong> something you are iterating over. This is not guaranteed to work in all cases. Depending on the data types, the iterator returns a copy and not a view, and writing to it will have no effect.
</blockquote>
<p>Use <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html" rel="noreferrer">DataFrame.apply()</a> instead:</p>
<code>python new_df = df.apply(lambda x: x * 2)</code>
</li>
<li>
<p>
itertuples:
</p>
<blockquote>
The column names will be renamed to positional names if they are invalid Python identifiers, repeated, or start with an underscore. With a large number of columns (&gt;255), regular tuples are returned.
</blockquote>
</li>
</ul>
<p>See <a href="https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#iteration" rel="noreferrer">pandas docs on iteration</a> for more details.</p>
</section>
<section id="answer-3-score-188" class="level4">
<h4>Answer 3 (score 188)</h4>
<p>You should use <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html"><code>df.iterrows()</code></a>. Though iterating row-by-row is not especially efficient since Series objects have to be created.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="selecting-multiple-columns-in-a-pandas-dataframe-score-1863876-in-2018" class="level3">
<h3>42: Selecting multiple columns in a pandas dataframe (score <a href="https://stackoverflow.com/q/11285613.html">1863876</a> in 2018)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>I have data in different columns but I don’t know how to extract it to save it in another variable.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb365-1" title="1">index  a   b   c</a>
<a class="sourceLine" id="cb365-2" title="2"><span class="dv">1</span>      <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb365-3" title="3"><span class="dv">2</span>      <span class="dv">3</span>   <span class="dv">4</span>   <span class="dv">5</span></a></code></pre></div>
<p>How do I select <code>'a'</code>, <code>'b'</code> and save it in to df1?</p>
<p>I tried</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb366-1" title="1">df1 <span class="op">=</span> df[<span class="st">&#39;a&#39;</span>:<span class="st">&#39;b&#39;</span>]</a>
<a class="sourceLine" id="cb366-2" title="2">df1 <span class="op">=</span> df.ix[:, <span class="st">&#39;a&#39;</span>:<span class="st">&#39;b&#39;</span>]</a></code></pre></div>
<p>None seem to work.</p>
</section>
<section id="answer-accepted-score-1472" class="level4">
<h4>Answer accepted (score 1472)</h4>
<p>The column names (which are strings) cannot be sliced in the manner you tried.</p>
<p>Here you have a couple of options. If you know from context which variables you want to slice out, you can just return a view of only those columns by passing a list into the <code>__getitem__</code> syntax (the []’s).</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb367-1" title="1">df1 <span class="op">=</span> df[[<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>]]</a></code></pre></div>
<p>Alternatively, if it matters to index them numerically and not by their name (say your code should automatically do this without knowing the names of the first two columns) then you can do this instead:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb368-1" title="1">df1 <span class="op">=</span> df.iloc[:,<span class="dv">0</span>:<span class="dv">2</span>] <span class="co"># Remember that Python does not slice inclusive of the ending index.</span></a></code></pre></div>
<p>Additionally, you should familiarize yourself with the idea of a view into a Pandas object vs. a copy of that object. The first of the above methods will return a new copy in memory of the desired sub-object (the desired slices).</p>
<p>Sometimes, however, there are indexing conventions in Pandas that don’t do this and instead give you a new variable that just refers to the same chunk of memory as the sub-object or slice in the original object. This will happen with the second way of indexing, so you can modify it with the <code>copy()</code> function to get a regular copy. When this happens, changing what you think is the sliced object can sometimes alter the original object. Always good to be on the look out for this.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb369-1" title="1">df1 <span class="op">=</span> df.iloc[<span class="dv">0</span>,<span class="dv">0</span>:<span class="dv">2</span>].copy() <span class="co"># To avoid the case where changing df1 also changes df</span></a></code></pre></div>
<p>To use <code>iloc</code>, you need to know the column positions (or indices). As the column positions may change, instead of hard-coding indices, you can use <code>iloc</code> along with <code>get_loc</code> function of <code>columns</code> method of dataframe object to obtain column indices.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb370-1" title="1">{df.columns.get_loc(c):c <span class="cf">for</span> idx, c <span class="kw">in</span> <span class="bu">enumerate</span>(df.columns)}</a></code></pre></div>
<p>Now you can use this dictionary to access columns through names and using <code>iloc</code>.</p>
</section>
<section id="answer-2-score-100" class="level4">
<h4>Answer 2 (score 100)</h4>
<p>
Assuming your column names (<code>df.columns</code>) are <code>['index','a','b','c']</code>, then the data you want is in the 3rd &amp; 4th columns. If you don’t know their names when your script runs, you can do this
</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb371-1" title="1">newdf <span class="op">=</span> df[df.columns[<span class="dv">2</span>:<span class="dv">4</span>]] <span class="co"># Remember, Python is 0-offset! The &quot;3rd&quot; entry is at slot 2.</span></a></code></pre></div>
<p>As EMS points out in <a href="https://stackoverflow.com/a/11287278/623735">his answer</a>, <code>df.ix</code> slices columns a bit more concisely, but the <code>.columns</code> slicing interface might be more natural because it uses the vanilla 1-D python list indexing/slicing syntax.</p>
<p>WARN: <code>'index'</code> is a bad name for a <code>DataFrame</code> column. That same label is also used for the real <code>df.index</code> attribute, a <code>Index</code> array. So your column is returned by <code>df['index']</code> and the real DataFrame index is returned by <code>df.index</code>. An <code>Index</code> is a special kind of <code>Series</code> optimized for lookup of it’s elements’ values. For df.index it’s for looking up rows by their label. That <code>df.columns</code> attribute is also a <code>pd.Index</code> array, for looking up columns by their labels.</p>
</section>
<section id="answer-3-score-96" class="level4">
<h4>Answer 3 (score 96)</h4>
<p>As of version 0.11.0, columns <em>can be</em> sliced in the manner you tried using the <a href="http://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.11.0.html#selection-choices" rel="noreferrer"><code>.loc</code></a> indexer:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb372-1" title="1">df.loc[:, <span class="st">&#39;C&#39;</span>:<span class="st">&#39;E&#39;</span>]</a></code></pre></div>
<p>is equivalent of</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb373-1" title="1">df[[<span class="st">&#39;C&#39;</span>, <span class="st">&#39;D&#39;</span>, <span class="st">&#39;E&#39;</span>]]  <span class="co"># or df.loc[:, [&#39;C&#39;, &#39;D&#39;, &#39;E&#39;]]</span></a></code></pre></div>
<p>and returns columns <code>C</code> through <code>E</code>.</p>
<hr>
<p>A demo on a randomly generated DataFrame:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb374-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb374-2" title="2"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb374-3" title="3">np.random.seed(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb374-4" title="4">df <span class="op">=</span> pd.DataFrame(np.random.randint(<span class="dv">100</span>, size<span class="op">=</span>(<span class="dv">100</span>, <span class="dv">6</span>)), </a>
<a class="sourceLine" id="cb374-5" title="5">                  columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;ABCDEF&#39;</span>), </a>
<a class="sourceLine" id="cb374-6" title="6">                  index<span class="op">=</span>[<span class="st">&#39;R</span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>)])</a>
<a class="sourceLine" id="cb374-7" title="7">df.head()</a>
<a class="sourceLine" id="cb374-8" title="8"></a>
<a class="sourceLine" id="cb374-9" title="9">Out: </a>
<a class="sourceLine" id="cb374-10" title="10">     A   B   C   D   E   F</a>
<a class="sourceLine" id="cb374-11" title="11">R0  <span class="dv">99</span>  <span class="dv">78</span>  <span class="dv">61</span>  <span class="dv">16</span>  <span class="dv">73</span>   <span class="dv">8</span></a>
<a class="sourceLine" id="cb374-12" title="12">R1  <span class="dv">62</span>  <span class="dv">27</span>  <span class="dv">30</span>  <span class="dv">80</span>   <span class="dv">7</span>  <span class="dv">76</span></a>
<a class="sourceLine" id="cb374-13" title="13">R2  <span class="dv">15</span>  <span class="dv">53</span>  <span class="dv">80</span>  <span class="dv">27</span>  <span class="dv">44</span>  <span class="dv">77</span></a>
<a class="sourceLine" id="cb374-14" title="14">R3  <span class="dv">75</span>  <span class="dv">65</span>  <span class="dv">47</span>  <span class="dv">30</span>  <span class="dv">84</span>  <span class="dv">86</span></a>
<a class="sourceLine" id="cb374-15" title="15">R4  <span class="dv">18</span>   <span class="dv">9</span>  <span class="dv">41</span>  <span class="dv">62</span>   <span class="dv">1</span>  <span class="dv">82</span></a></code></pre></div>
<p>To get the columns from C to E (note that unlike integer slicing, ‘E’ is included in the columns):</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb375-1" title="1">df.loc[:, <span class="st">&#39;C&#39;</span>:<span class="st">&#39;E&#39;</span>]</a>
<a class="sourceLine" id="cb375-2" title="2"></a>
<a class="sourceLine" id="cb375-3" title="3">Out: </a>
<a class="sourceLine" id="cb375-4" title="4">      C   D   E</a>
<a class="sourceLine" id="cb375-5" title="5">R0   <span class="dv">61</span>  <span class="dv">16</span>  <span class="dv">73</span></a>
<a class="sourceLine" id="cb375-6" title="6">R1   <span class="dv">30</span>  <span class="dv">80</span>   <span class="dv">7</span></a>
<a class="sourceLine" id="cb375-7" title="7">R2   <span class="dv">80</span>  <span class="dv">27</span>  <span class="dv">44</span></a>
<a class="sourceLine" id="cb375-8" title="8">R3   <span class="dv">47</span>  <span class="dv">30</span>  <span class="dv">84</span></a>
<a class="sourceLine" id="cb375-9" title="9">R4   <span class="dv">41</span>  <span class="dv">62</span>   <span class="dv">1</span></a>
<a class="sourceLine" id="cb375-10" title="10">R5    <span class="dv">5</span>  <span class="dv">58</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb375-11" title="11">...</a></code></pre></div>
<p>Same works for selecting rows based on labels. Get the rows ‘R6’ to ‘R10’ from those columns:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb376-1" title="1">df.loc[<span class="st">&#39;R6&#39;</span>:<span class="st">&#39;R10&#39;</span>, <span class="st">&#39;C&#39;</span>:<span class="st">&#39;E&#39;</span>]</a>
<a class="sourceLine" id="cb376-2" title="2"></a>
<a class="sourceLine" id="cb376-3" title="3">Out: </a>
<a class="sourceLine" id="cb376-4" title="4">      C   D   E</a>
<a class="sourceLine" id="cb376-5" title="5">R6   <span class="dv">51</span>  <span class="dv">27</span>  <span class="dv">31</span></a>
<a class="sourceLine" id="cb376-6" title="6">R7   <span class="dv">83</span>  <span class="dv">19</span>  <span class="dv">18</span></a>
<a class="sourceLine" id="cb376-7" title="7">R8   <span class="dv">11</span>  <span class="dv">67</span>  <span class="dv">65</span></a>
<a class="sourceLine" id="cb376-8" title="8">R9   <span class="dv">78</span>  <span class="dv">27</span>  <span class="dv">29</span></a>
<a class="sourceLine" id="cb376-9" title="9">R10   <span class="dv">7</span>  <span class="dv">16</span>  <span class="dv">94</span></a></code></pre></div>
<p><code>.loc</code> also accepts a boolean array so you can select the columns whose corresponding entry in the array is <code>True</code>. For example, <code>df.columns.isin(list('BCD'))</code> returns <code>array([False,  True,  True,  True, False, False], dtype=bool)</code> - True if the column name is in the list <code>['B', 'C', 'D']</code>; False, otherwise.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb377-1" title="1">df.loc[:, df.columns.isin(<span class="bu">list</span>(<span class="st">&#39;BCD&#39;</span>))]</a>
<a class="sourceLine" id="cb377-2" title="2"></a>
<a class="sourceLine" id="cb377-3" title="3">Out: </a>
<a class="sourceLine" id="cb377-4" title="4">      B   C   D</a>
<a class="sourceLine" id="cb377-5" title="5">R0   <span class="dv">78</span>  <span class="dv">61</span>  <span class="dv">16</span></a>
<a class="sourceLine" id="cb377-6" title="6">R1   <span class="dv">27</span>  <span class="dv">30</span>  <span class="dv">80</span></a>
<a class="sourceLine" id="cb377-7" title="7">R2   <span class="dv">53</span>  <span class="dv">80</span>  <span class="dv">27</span></a>
<a class="sourceLine" id="cb377-8" title="8">R3   <span class="dv">65</span>  <span class="dv">47</span>  <span class="dv">30</span></a>
<a class="sourceLine" id="cb377-9" title="9">R4    <span class="dv">9</span>  <span class="dv">41</span>  <span class="dv">62</span></a>
<a class="sourceLine" id="cb377-10" title="10">R5   <span class="dv">78</span>   <span class="dv">5</span>  <span class="dv">58</span></a>
<a class="sourceLine" id="cb377-11" title="11">...</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="pythons-equivalent-of-logical-and-in-an-if-statement-score-1813435-in-2018" class="level3">
<h3>43: Python’s equivalent of &amp;&amp; (logical-and) in an if-statement (score <a href="https://stackoverflow.com/q/2485466.html">1813435</a> in 2018)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>Here’s my code:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb378-1" title="1"><span class="kw">def</span> front_back(a, b):</a>
<a class="sourceLine" id="cb378-2" title="2">  <span class="co"># +++your code here+++</span></a>
<a class="sourceLine" id="cb378-3" title="3">  <span class="cf">if</span> <span class="bu">len</span>(a) <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;</span>amp<span class="op">;&amp;</span>amp<span class="op">;</span> <span class="bu">len</span>(b) <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</a>
<a class="sourceLine" id="cb378-4" title="4">    <span class="cf">return</span> a[:(<span class="bu">len</span>(a)<span class="op">/</span><span class="dv">2</span>)] <span class="op">+</span> b[:(<span class="bu">len</span>(b)<span class="op">/</span><span class="dv">2</span>)] <span class="op">+</span> a[(<span class="bu">len</span>(a)<span class="op">/</span><span class="dv">2</span>):] <span class="op">+</span> b[(<span class="bu">len</span>(b)<span class="op">/</span><span class="dv">2</span>):] </a>
<a class="sourceLine" id="cb378-5" title="5">  <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb378-6" title="6">    <span class="co">#todo! Not yet done. :P</span></a>
<a class="sourceLine" id="cb378-7" title="7">  <span class="cf">return</span></a></code></pre></div>
<p>I’m getting an error in the IF conditional. What am I doing wrong?</p>
</section>
<section id="answer-accepted-score-1338" class="level4">
<h4>Answer accepted (score 1338)</h4>
<p>You would want <code>and</code> instead of <code>&amp;amp;&amp;amp;</code>.</p>
</section>
<section id="answer-2-score-214" class="level4">
<h4>Answer 2 (score 214)</h4>
<p>Python uses <code>and</code> and <code>or</code> conditionals.</p>
<p>i.e.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb379-1" title="1"><span class="cf">if</span> foo <span class="op">==</span> <span class="st">&#39;abc&#39;</span> <span class="kw">and</span> bar <span class="op">==</span> <span class="st">&#39;bac&#39;</span> <span class="kw">or</span> zoo <span class="op">==</span> <span class="st">&#39;123&#39;</span>:</a>
<a class="sourceLine" id="cb379-2" title="2">  <span class="co"># do something</span></a></code></pre></div>
</section>
<section id="answer-3-score-36" class="level4">
<h4>Answer 3 (score 36)</h4>
<p>Two comments:</p>
<ul>
<li>
Use <code>and</code> and <code>or</code> for logical operations in Python.
</li>
<li>
Use 4 spaces to indent instead of 2. You will thank yourself later because your code will look pretty much the same as everyone else’s code. See <a href="http://www.python.org/dev/peps/pep-0008/" rel="noreferrer">PEP 8</a> for more details.
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="getting-the-last-element-of-a-list-score-1789328-in-2019" class="level3">
<h3>44: Getting the last element of a list (score <a href="https://stackoverflow.com/q/930397.html">1789328</a> in 2019)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>In Python, how do you get the last element of a list?</p>
</section>
<section id="answer-accepted-score-2780" class="level4">
<h4>Answer accepted (score 2780)</h4>
<p><code>some_list[-1]</code> is the shortest and most Pythonic.</p>
<p>In fact, you can do much more with this syntax. The <code>some_list[-n]</code> syntax gets the nth-to-last element. So <code>some_list[-1]</code> gets the last element, <code>some_list[-2]</code> gets the second to last, etc, all the way down to <code>some_list[-len(some_list)]</code>, which gives you the first element.</p>
<p>You can also set list elements in this way. For instance:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb380-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb380-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> some_list[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> <span class="dv">5</span> <span class="co"># Set the last element</span></a>
<a class="sourceLine" id="cb380-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> some_list[<span class="op">-</span><span class="dv">2</span>] <span class="op">=</span> <span class="dv">3</span> <span class="co"># Set the second to last element</span></a>
<a class="sourceLine" id="cb380-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> some_list</a>
<a class="sourceLine" id="cb380-5" title="5">[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</a></code></pre></div>
<p>Note that getting a list item by index will raise an <a href="https://docs.python.org/3/library/exceptions.html#IndexError" rel="noreferrer"><code>IndexError</code></a> if the expected item doesn’t exist. This means that <code>some_list[-1]</code> will raise an exception if <code>some_list</code> is empty, because an empty list can’t have a last element.</p>
</section>
<section id="answer-2-score-224" class="level4">
<h4>Answer 2 (score 224)</h4>
<p>If your <code>str()</code> or <code>list()</code> objects might end up being empty as so: <code>astr = ''</code> or <code>alist = []</code>, then you might want to use <code>alist[-1:]</code> instead of <code>alist[-1]</code> for object “sameness”.</p>
<p>The significance of this is:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb381-1" title="1">alist <span class="op">=</span> []</a>
<a class="sourceLine" id="cb381-2" title="2">alist[<span class="op">-</span><span class="dv">1</span>]   <span class="co"># will generate an IndexError exception whereas </span></a>
<a class="sourceLine" id="cb381-3" title="3">alist[<span class="op">-</span><span class="dv">1</span>:]  <span class="co"># will return an empty list</span></a>
<a class="sourceLine" id="cb381-4" title="4">astr <span class="op">=</span> <span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb381-5" title="5">astr[<span class="op">-</span><span class="dv">1</span>]    <span class="co"># will generate an IndexError exception whereas</span></a>
<a class="sourceLine" id="cb381-6" title="6">astr[<span class="op">-</span><span class="dv">1</span>:]   <span class="co"># will return an empty str</span></a></code></pre></div>
<p>Where the distinction being made is that returning an empty list object or empty str object is more “last element”-like then an exception object.</p>
</section>
<section id="answer-3-score-86" class="level4">
<h4>Answer 3 (score 86)</h4>
<p>You can also do:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb382-1" title="1">alist.pop()</a></code></pre></div>
<p>It depends on what you want to do with your list because the <code>pop()</code> method will delete the last element.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="adding-new-column-to-existing-dataframe-in-python-pandas-score-1789112-in-2017" class="level3">
<h3>45: Adding new column to existing DataFrame in Python pandas (score <a href="https://stackoverflow.com/q/12555323.html">1789112</a> in 2017)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>I have the following indexed DataFrame with named columns and rows not- continuous numbers:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb383-1" title="1">          a         b         c         d</a>
<a class="sourceLine" id="cb383-2" title="2"><span class="dv">2</span>  <span class="fl">0.671399</span>  <span class="fl">0.101208</span> <span class="fl">-0.181532</span>  <span class="fl">0.241273</span></a>
<a class="sourceLine" id="cb383-3" title="3"><span class="dv">3</span>  <span class="fl">0.446172</span> <span class="fl">-0.243316</span>  <span class="fl">0.051767</span>  <span class="fl">1.577318</span></a>
<a class="sourceLine" id="cb383-4" title="4"><span class="dv">5</span>  <span class="fl">0.614758</span>  <span class="fl">0.075793</span> <span class="fl">-0.451460</span> <span class="fl">-0.012493</span></a></code></pre></div>
<p>I would like to add a new column, <code>'e'</code>, to the existing data frame and do not want to change anything in the data frame (i.e., the new column always has the same length as the DataFrame).</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb384-1" title="1"><span class="dv">0</span>   <span class="fl">-0.335485</span></a>
<a class="sourceLine" id="cb384-2" title="2"><span class="dv">1</span>   <span class="fl">-1.166658</span></a>
<a class="sourceLine" id="cb384-3" title="3"><span class="dv">2</span>   <span class="fl">-0.385571</span></a>
<a class="sourceLine" id="cb384-4" title="4">dtype: float64</a></code></pre></div>
<p>I tried different versions of <code>join</code>, <code>append</code>, <code>merge</code>, but I did not get the result I wanted, only errors at most. How can I add column <code>e</code> to the above example?</p>
</section>
<section id="answer-accepted-score-947" class="level4">
<h4>Answer accepted (score 947)</h4>
<p>Use the original df1 indexes to create the series:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb385-1" title="1">df1[<span class="st">&#39;e&#39;</span>] <span class="op">=</span> pd.Series(np.random.randn(sLength), index<span class="op">=</span>df1.index)</a></code></pre></div>
<hr>
<p>
<strong>Edit 2015</strong><br> Some reported getting the <code>SettingWithCopyWarning</code> with this code.<br> However, the code still runs perfectly with the current pandas version 0.16.1.
</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb386-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> sLength <span class="op">=</span> <span class="bu">len</span>(df1[<span class="st">&#39;a&#39;</span>])</a>
<a class="sourceLine" id="cb386-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1</a>
<a class="sourceLine" id="cb386-3" title="3">          a         b         c         d</a>
<a class="sourceLine" id="cb386-4" title="4"><span class="dv">6</span> <span class="fl">-0.269221</span> <span class="fl">-0.026476</span>  <span class="fl">0.997517</span>  <span class="fl">1.294385</span></a>
<a class="sourceLine" id="cb386-5" title="5"><span class="dv">8</span>  <span class="fl">0.917438</span>  <span class="fl">0.847941</span>  <span class="fl">0.034235</span> <span class="fl">-0.448948</span></a>
<a class="sourceLine" id="cb386-6" title="6"></a>
<a class="sourceLine" id="cb386-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1[<span class="st">&#39;e&#39;</span>] <span class="op">=</span> pd.Series(np.random.randn(sLength), index<span class="op">=</span>df1.index)</a>
<a class="sourceLine" id="cb386-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1</a>
<a class="sourceLine" id="cb386-9" title="9">          a         b         c         d         e</a>
<a class="sourceLine" id="cb386-10" title="10"><span class="dv">6</span> <span class="fl">-0.269221</span> <span class="fl">-0.026476</span>  <span class="fl">0.997517</span>  <span class="fl">1.294385</span>  <span class="fl">1.757167</span></a>
<a class="sourceLine" id="cb386-11" title="11"><span class="dv">8</span>  <span class="fl">0.917438</span>  <span class="fl">0.847941</span>  <span class="fl">0.034235</span> <span class="fl">-0.448948</span>  <span class="fl">2.228131</span></a>
<a class="sourceLine" id="cb386-12" title="12"></a>
<a class="sourceLine" id="cb386-13" title="13"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> p.version.short_version</a>
<a class="sourceLine" id="cb386-14" title="14"><span class="co">&#39;0.16.1&#39;</span></a></code></pre></div>
<p>The <code>SettingWithCopyWarning</code> aims to inform of a possibly invalid assignment on a copy of the Dataframe. It doesn’t necessarily say you did it wrong (it can trigger false positives) but from 0.13.0 it let you know there are more adequate methods for the same purpose. Then, if you get the warning, just follow its advise: <em>Try using .loc[row_index,col_indexer] = value instead</em></p>
<div class="sourceCode" id="cb387"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb387-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1.loc[:,<span class="st">&#39;f&#39;</span>] <span class="op">=</span> pd.Series(np.random.randn(sLength), index<span class="op">=</span>df1.index)</a>
<a class="sourceLine" id="cb387-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1</a>
<a class="sourceLine" id="cb387-3" title="3">          a         b         c         d         e         f</a>
<a class="sourceLine" id="cb387-4" title="4"><span class="dv">6</span> <span class="fl">-0.269221</span> <span class="fl">-0.026476</span>  <span class="fl">0.997517</span>  <span class="fl">1.294385</span>  <span class="fl">1.757167</span> <span class="fl">-0.050927</span></a>
<a class="sourceLine" id="cb387-5" title="5"><span class="dv">8</span>  <span class="fl">0.917438</span>  <span class="fl">0.847941</span>  <span class="fl">0.034235</span> <span class="fl">-0.448948</span>  <span class="fl">2.228131</span>  <span class="fl">0.006109</span></a>
<a class="sourceLine" id="cb387-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> </a></code></pre></div>
<p>In fact, this is currently the more efficient method as <a href="http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy" rel="noreferrer">described in pandas docs</a></p>
<hr>
<p><strong>Edit 2017</strong></p>
<p>As indicated in the comments and by <span class="citation" data-cites="Alexander">@Alexander</span>, currently the best method to add the values of a Series as a new column of a DataFrame could be using <code>assign</code>:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb388-1" title="1">df1 <span class="op">=</span> df1.assign(e<span class="op">=</span>pd.Series(np.random.randn(sLength)).values)</a></code></pre></div>
</section>
<section id="answer-2-score-199" class="level4">
<h4>Answer 2 (score 199)</h4>
<p>This is the simple way of adding a new column: <code>df['e'] = e</code></p>
</section>
<section id="answer-3-score-138" class="level4">
<h4>Answer 3 (score 138)</h4>
<blockquote>
I would like to add a new column, ‘e’, to the existing data frame and do not change anything in the data frame. (The series always got the same length as a dataframe.)
</blockquote>
<p>I assume that the index values in <code>e</code> match those in <code>df1</code>.</p>
<p>The easiest way to initiate a new column named <code>e</code>, and assign it the values from your series <code>e</code>:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb389-1" title="1">df[<span class="st">&#39;e&#39;</span>] <span class="op">=</span> e.values</a></code></pre></div>
<p><strong>assign (Pandas 0.16.0+)</strong></p>
<p>As of Pandas 0.16.0, you can also use <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html" rel="noreferrer"><code>assign</code></a>, which assigns new columns to a DataFrame and returns a new object (a copy) with all the original columns in addition to the new ones.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb390-1" title="1">df1 <span class="op">=</span> df1.assign(e<span class="op">=</span>e.values)</a></code></pre></div>
<p>As per <a href="https://stackoverflow.com/questions/42101382/pandas-dataframe-assign-arguments">this example</a> (which also includes the source code of the <code>assign</code> function), you can also include more than one column:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb391-1" title="1">df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;a&#39;</span>: [<span class="dv">1</span>, <span class="dv">2</span>], <span class="st">&#39;b&#39;</span>: [<span class="dv">3</span>, <span class="dv">4</span>]})</a>
<a class="sourceLine" id="cb391-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df.assign(mean_a<span class="op">=</span>df.a.mean(), mean_b<span class="op">=</span>df.b.mean())</a>
<a class="sourceLine" id="cb391-3" title="3">   a  b  mean_a  mean_b</a>
<a class="sourceLine" id="cb391-4" title="4"><span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">3</span>     <span class="fl">1.5</span>     <span class="fl">3.5</span></a>
<a class="sourceLine" id="cb391-5" title="5"><span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">4</span>     <span class="fl">1.5</span>     <span class="fl">3.5</span></a></code></pre></div>
<p>In context with your example:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb392-1" title="1">np.random.seed(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb392-2" title="2">df1 <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">10</span>, <span class="dv">4</span>), columns<span class="op">=</span>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>])</a>
<a class="sourceLine" id="cb392-3" title="3">mask <span class="op">=</span> df1.applymap(<span class="kw">lambda</span> x: x <span class="op">&amp;</span>lt<span class="op">;-</span><span class="fl">0.7</span>)</a>
<a class="sourceLine" id="cb392-4" title="4">df1 <span class="op">=</span> df1[<span class="op">-</span>mask.<span class="bu">any</span>(axis<span class="op">=</span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb392-5" title="5">sLength <span class="op">=</span> <span class="bu">len</span>(df1[<span class="st">&#39;a&#39;</span>])</a>
<a class="sourceLine" id="cb392-6" title="6">e <span class="op">=</span> pd.Series(np.random.randn(sLength))</a>
<a class="sourceLine" id="cb392-7" title="7"></a>
<a class="sourceLine" id="cb392-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1</a>
<a class="sourceLine" id="cb392-9" title="9">          a         b         c         d</a>
<a class="sourceLine" id="cb392-10" title="10"><span class="dv">0</span>  <span class="fl">1.764052</span>  <span class="fl">0.400157</span>  <span class="fl">0.978738</span>  <span class="fl">2.240893</span></a>
<a class="sourceLine" id="cb392-11" title="11"><span class="dv">2</span> <span class="fl">-0.103219</span>  <span class="fl">0.410599</span>  <span class="fl">0.144044</span>  <span class="fl">1.454274</span></a>
<a class="sourceLine" id="cb392-12" title="12"><span class="dv">3</span>  <span class="fl">0.761038</span>  <span class="fl">0.121675</span>  <span class="fl">0.443863</span>  <span class="fl">0.333674</span></a>
<a class="sourceLine" id="cb392-13" title="13"><span class="dv">7</span>  <span class="fl">1.532779</span>  <span class="fl">1.469359</span>  <span class="fl">0.154947</span>  <span class="fl">0.378163</span></a>
<a class="sourceLine" id="cb392-14" title="14"><span class="dv">9</span>  <span class="fl">1.230291</span>  <span class="fl">1.202380</span> <span class="fl">-0.387327</span> <span class="fl">-0.302303</span></a>
<a class="sourceLine" id="cb392-15" title="15"></a>
<a class="sourceLine" id="cb392-16" title="16"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> e</a>
<a class="sourceLine" id="cb392-17" title="17"><span class="dv">0</span>   <span class="fl">-1.048553</span></a>
<a class="sourceLine" id="cb392-18" title="18"><span class="dv">1</span>   <span class="fl">-1.420018</span></a>
<a class="sourceLine" id="cb392-19" title="19"><span class="dv">2</span>   <span class="fl">-1.706270</span></a>
<a class="sourceLine" id="cb392-20" title="20"><span class="dv">3</span>    <span class="fl">1.950775</span></a>
<a class="sourceLine" id="cb392-21" title="21"><span class="dv">4</span>   <span class="fl">-0.509652</span></a>
<a class="sourceLine" id="cb392-22" title="22">dtype: float64</a>
<a class="sourceLine" id="cb392-23" title="23"></a>
<a class="sourceLine" id="cb392-24" title="24">df1 <span class="op">=</span> df1.assign(e<span class="op">=</span>e.values)</a>
<a class="sourceLine" id="cb392-25" title="25"></a>
<a class="sourceLine" id="cb392-26" title="26"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> df1</a>
<a class="sourceLine" id="cb392-27" title="27">          a         b         c         d         e</a>
<a class="sourceLine" id="cb392-28" title="28"><span class="dv">0</span>  <span class="fl">1.764052</span>  <span class="fl">0.400157</span>  <span class="fl">0.978738</span>  <span class="fl">2.240893</span> <span class="fl">-1.048553</span></a>
<a class="sourceLine" id="cb392-29" title="29"><span class="dv">2</span> <span class="fl">-0.103219</span>  <span class="fl">0.410599</span>  <span class="fl">0.144044</span>  <span class="fl">1.454274</span> <span class="fl">-1.420018</span></a>
<a class="sourceLine" id="cb392-30" title="30"><span class="dv">3</span>  <span class="fl">0.761038</span>  <span class="fl">0.121675</span>  <span class="fl">0.443863</span>  <span class="fl">0.333674</span> <span class="fl">-1.706270</span></a>
<a class="sourceLine" id="cb392-31" title="31"><span class="dv">7</span>  <span class="fl">1.532779</span>  <span class="fl">1.469359</span>  <span class="fl">0.154947</span>  <span class="fl">0.378163</span>  <span class="fl">1.950775</span></a>
<a class="sourceLine" id="cb392-32" title="32"><span class="dv">9</span>  <span class="fl">1.230291</span>  <span class="fl">1.202380</span> <span class="fl">-0.387327</span> <span class="fl">-0.302303</span> <span class="fl">-0.509652</span></a></code></pre></div>
<p>The description of this new feature when it was first introduced can be found <a href="http://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.16.0.html#dataframe-assign" rel="noreferrer">here</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="delete-a-file-or-folder-score-1779349-in-2018" class="level3">
<h3>46: Delete a file or folder (score <a href="https://stackoverflow.com/q/6996603.html">1779349</a> in 2018)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>How to delete a file or folder in Python?</p>
</section>
<section id="answer-accepted-score-2966" class="level4">
<h4>Answer accepted (score 2966)</h4>
<p><a href="http://docs.python.org/library/os.html#os.remove" rel="noreferrer"><code>os.remove()</code></a> removes a file.</p>
<p><a href="http://docs.python.org/library/os.html#os.rmdir" rel="noreferrer"><code>os.rmdir()</code></a> removes an empty directory.</p>
<p><a href="http://docs.python.org/library/shutil.html#shutil.rmtree" rel="noreferrer"><code>shutil.rmtree()</code></a> deletes a directory and all its contents.</p>
<hr>
<p><a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" rel="noreferrer"><code>Path</code></a> objects from the Python 3.4+ <a href="https://docs.python.org/3/library/pathlib.html" rel="noreferrer"><code>pathlib</code></a> module also expose these instance methods:</p>
<ul>
<li>
<p>
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.unlink" rel="noreferrer"><code>pathlib.Path.unlink()</code></a> removes a file or symbolic link.
</p>
</li>
<li>
<p>
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.rmdir" rel="noreferrer"><code>pathlib.Path.rmdir()</code></a> removes an empty directory.
</p>
</li>
</ul>
</section>
<section id="answer-2-score-219" class="level4">
<h4>Answer 2 (score 219)</h4>
<h5>
Python syntax to delete a file
</h2>
<div class="sourceCode" id="cb393"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb393-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb393-2" title="2">os.remove(<span class="st">&quot;/tmp/&amp;lt;file_name&amp;gt;.txt&quot;</span>)</a></code></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb394-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb394-2" title="2">os.unlink(<span class="st">&quot;/tmp/&amp;lt;file_name&amp;gt;.txt&quot;</span>)</a></code></pre></div>
<h5>
Best practice
</h2>
<ol>
<li>
First, check whether the file or folder exists or not then only delete that file. This can be achieved in two ways :<br> a. <code>os.path.isfile(&quot;/path/to/file&quot;)</code><br> b. Use <code>exception handling.</code><br>
</li>
</ol>
<p><strong>EXAMPLE</strong> for <code>os.path.isfile</code></p>
<div class="sourceCode" id="cb395"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb395-1" title="1"><span class="co">#!/usr/bin/python</span></a>
<a class="sourceLine" id="cb395-2" title="2"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb395-3" title="3">myfile<span class="op">=</span><span class="st">&quot;/tmp/foo.txt&quot;</span></a>
<a class="sourceLine" id="cb395-4" title="4"></a>
<a class="sourceLine" id="cb395-5" title="5"><span class="co">## If file exists, delete it ##</span></a>
<a class="sourceLine" id="cb395-6" title="6"><span class="cf">if</span> os.path.isfile(myfile):</a>
<a class="sourceLine" id="cb395-7" title="7">    os.remove(myfile)</a>
<a class="sourceLine" id="cb395-8" title="8"><span class="cf">else</span>:    <span class="co">## Show an error ##</span></a>
<a class="sourceLine" id="cb395-9" title="9">    <span class="bu">print</span>(<span class="st">&quot;Error: </span><span class="sc">%s</span><span class="st"> file not found&quot;</span> <span class="op">%</span> myfile)</a></code></pre></div>
<h5>
Exception Handling
</h3>
<div class="sourceCode" id="cb396"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb396-1" title="1"><span class="co">#!/usr/bin/python</span></a>
<a class="sourceLine" id="cb396-2" title="2"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb396-3" title="3"></a>
<a class="sourceLine" id="cb396-4" title="4"><span class="co">## Get input ##</span></a>
<a class="sourceLine" id="cb396-5" title="5">myfile<span class="op">=</span> <span class="bu">raw_input</span>(<span class="st">&quot;Enter file name to delete: &quot;</span>)</a>
<a class="sourceLine" id="cb396-6" title="6"></a>
<a class="sourceLine" id="cb396-7" title="7"><span class="co">## Try to delete the file ##</span></a>
<a class="sourceLine" id="cb396-8" title="8"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb396-9" title="9">    os.remove(myfile)</a>
<a class="sourceLine" id="cb396-10" title="10"><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:  <span class="co">## if failed, report it back to the user ##</span></a>
<a class="sourceLine" id="cb396-11" title="11">    <span class="bu">print</span> (<span class="st">&quot;Error: </span><span class="sc">%s</span><span class="st"> - </span><span class="sc">%s</span><span class="st">.&quot;</span> <span class="op">%</span> (e.filename, e.strerror))</a></code></pre></div>
<h5>
RESPECTIVE OUTPUT
</h3>
<pre>
Enter file name to delete : demo.txt
Error: demo.txt - No such file or directory.

Enter file name to delete : rrr.txt
Error: rrr.txt - Operation not permitted.

Enter file name to delete : foo.txt
</pre>
<h5>
Python syntax to delete a folder
</h3>
<div class="sourceCode" id="cb397"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb397-1" title="1">shutil.rmtree()</a></code></pre></div>
<p>Example for <code>shutil.rmtree()</code></p>
<div class="sourceCode" id="cb398"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb398-1" title="1"><span class="co">#!/usr/bin/python</span></a>
<a class="sourceLine" id="cb398-2" title="2"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb398-3" title="3"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb398-4" title="4"><span class="im">import</span> shutil</a>
<a class="sourceLine" id="cb398-5" title="5"></a>
<a class="sourceLine" id="cb398-6" title="6"><span class="co"># Get directory name</span></a>
<a class="sourceLine" id="cb398-7" title="7">mydir<span class="op">=</span> <span class="bu">raw_input</span>(<span class="st">&quot;Enter directory name: &quot;</span>)</a>
<a class="sourceLine" id="cb398-8" title="8"></a>
<a class="sourceLine" id="cb398-9" title="9"><span class="co">## Try to remove tree; if failed show an error using try...except on screen</span></a>
<a class="sourceLine" id="cb398-10" title="10"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb398-11" title="11">    shutil.rmtree(mydir)</a>
<a class="sourceLine" id="cb398-12" title="12"><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:</a>
<a class="sourceLine" id="cb398-13" title="13">    <span class="bu">print</span> (<span class="st">&quot;Error: </span><span class="sc">%s</span><span class="st"> - </span><span class="sc">%s</span><span class="st">.&quot;</span> <span class="op">%</span> (e.filename, e.strerror))</a></code></pre></div>
</section>
<section id="answer-3-score-72-1" class="level4">
<h4>Answer 3 (score 72)</h4>
<p>Use</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb399-1" title="1">shutil.rmtree(path[, ignore_errors[, onerror]])</a></code></pre></div>
<p>(See complete documentation on <a href="http://docs.python.org/library/shutil.html" rel="noreferrer">shutil</a>) and/or</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb400-1" title="1">os.remove</a></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb401-1" title="1">os.rmdir</a></code></pre></div>
<p>(Complete documentation on <a href="http://docs.python.org/library/os.html#os.remove" rel="noreferrer">os</a>.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="does-python-have-a-ternary-conditional-operator-score-1772957-in-2019" class="level3">
<h3>47: Does Python have a ternary conditional operator? (score <a href="https://stackoverflow.com/q/394809.html">1772957</a> in 2019)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>If Python does not have a ternary conditional operator, is it possible to simulate one using other language constructs?</p>
</section>
<section id="answer-accepted-score-6476" class="level4">
<h4>Answer accepted (score 6476)</h4>
<p>Yes, it was <a href="https://mail.python.org/pipermail/python-dev/2005-September/056846.html" rel="noreferrer" title="[Python-Dev] Conditional Expression Resolution">added</a> in version 2.5. The expression syntax is:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb402-1" title="1">a <span class="cf">if</span> condition <span class="cf">else</span> b</a></code></pre></div>
<p>First <code>condition</code> is evaluated, then exactly one of either <code>a</code> or <code>b</code> is evaluated and returned based on the <a href="https://en.wikipedia.org/wiki/Boolean_data_type" rel="noreferrer" title="Boolean data type">Boolean</a> value of <code>condition</code>. If <code>condition</code> evaluates to <code>True</code>, then <code>a</code> is evaluated and returned but <code>b</code> is ignored, or else when <code>b</code> is evaluated and returned but <code>a</code> is ignored.</p>
<p>This allows short-circuiting because when <code>condition</code> is true only <code>a</code> is evaluated and <code>b</code> is not evaluated at all, but when <code>condition</code> is false only <code>b</code> is evaluated and <code>a</code> is not evaluated at all.</p>
<p>For example:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb403-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;true&#39;</span> <span class="cf">if</span> <span class="va">True</span> <span class="cf">else</span> <span class="st">&#39;false&#39;</span></a>
<a class="sourceLine" id="cb403-2" title="2"><span class="co">&#39;true&#39;</span></a>
<a class="sourceLine" id="cb403-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;true&#39;</span> <span class="cf">if</span> <span class="va">False</span> <span class="cf">else</span> <span class="st">&#39;false&#39;</span></a>
<a class="sourceLine" id="cb403-4" title="4"><span class="co">&#39;false&#39;</span></a></code></pre></div>
<p>Note that conditionals are an <em>expression</em>, not a <em>statement</em>. This means you can’t use assignment statements or <code>pass</code> or other <strong>statements</strong> within a conditional <strong>expression</strong>:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb404-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">pass</span> <span class="cf">if</span> <span class="va">False</span> <span class="cf">else</span> x <span class="op">=</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb404-2" title="2">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span></a>
<a class="sourceLine" id="cb404-3" title="3">    <span class="cf">pass</span> <span class="cf">if</span> <span class="va">False</span> <span class="cf">else</span> x <span class="op">=</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb404-4" title="4">          <span class="op">^</span></a>
<a class="sourceLine" id="cb404-5" title="5"><span class="pp">SyntaxError</span>: invalid syntax</a></code></pre></div>
<p>You can, however, use conditional expressions to assign a variable like so:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb405-1" title="1">x <span class="op">=</span> a <span class="cf">if</span> <span class="va">True</span> <span class="cf">else</span> b</a></code></pre></div>
<p>Think of the conditional expression as switching between two values. It is very useful when you’re in a ‘one value or another’ situation, it but doesn’t do much else.</p>
<p>If you need to use statements, you have to use a normal <code>if</code> <strong>statement</strong> instead of a conditional <strong>expression</strong>.</p>
<hr>
<p>Keep in mind that it’s frowned upon by some Pythonistas for several reasons:</p>
<ul>
<li>
The order of the arguments is different from those of the classic <code>condition ? a : b</code> ternary operator from many other languages (such as C, C++, Go, Perl, Ruby, Java, Javascript, etc.), which may lead to bugs when people unfamiliar with Python’s “surprising” behaviour use it (they may reverse the argument order).
</li>
<li>
Some find it “unwieldy”, since it goes contrary to the normal flow of thought (thinking of the condition first and then the effects).
</li>
<li>
Stylistic reasons. (Although the ‘inline <code>if</code>’ can be <em>really</em> useful, and make your script more concise, it really does complicate your code)
</li>
</ul>
<p>If you’re having trouble remembering the order, then remember that when read aloud, you (almost) say what you mean. For example, <code>x = 4 if b &amp;gt; 8 else 9</code> is read aloud as <code>x will be 4 if b is greater than 8 otherwise 9</code>.</p>
<p>Official documentation:</p>
<ul>
<li>
<a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="noreferrer" title="Conditional expressions">Conditional expressions</a>
</li>
<li>
<a href="https://docs.python.org/3.3/faq/programming.html#is-there-an-equivalent-of-c-s-ternary-operator" rel="noreferrer" title="Is there an equivalent of C’s ”?:” ternary operator?">Is there an equivalent of C’s ”?:” ternary operator?</a>
</li>
</ul>
</section>
<section id="answer-2-score-725" class="level4">
<h4>Answer 2 (score 725)</h4>
<p>You can index into a tuple:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb406-1" title="1">(falseValue, trueValue)[test]</a></code></pre></div>
<p>
<code>test</code> needs to return <em>True</em> or <em>False</em>.<br> It might be safer to always implement it as:
</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb407-1" title="1">(falseValue, trueValue)[test <span class="op">==</span> <span class="va">True</span>]</a></code></pre></div>
<p>or you can use the built-in <a href="https://docs.python.org/3.3/library/functions.html#bool" rel="noreferrer" title="bool"><code>bool()</code></a> to assure a <a href="https://en.wikipedia.org/wiki/Boolean_data_type" rel="noreferrer" title="Boolean data type">Boolean</a> value:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb408-1" title="1">(falseValue, trueValue)[<span class="bu">bool</span>(<span class="op">&amp;</span>lt<span class="op">;</span>expression<span class="op">&amp;</span>gt<span class="op">;</span>)]</a></code></pre></div>
</section>
<section id="answer-3-score-303" class="level4">
<h4>Answer 3 (score 303)</h4>
<p>For versions prior to 2.5, there’s the trick:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb409-1" title="1">[expression] <span class="kw">and</span> [on_true] <span class="kw">or</span> [on_false]</a></code></pre></div>
<p>
It can give wrong results when <code>on_true</code> has a false boolean value.<sup>1</sup><br> Although it does have the benefit of evaluating expressions left to right, which is clearer in my opinion.
</p>
<p><sub>1. <a href="http://docs.python.org/3.3/faq/programming.html#is-there-an-equivalent-of-c-s-ternary-operator" rel="noreferrer">Is there an equivalent of C’s ”?:” ternary operator?</a></sub></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-make-a-flat-list-out-of-list-of-lists-score-1764924-in-2019" class="level3">
<h3>48: How to make a flat list out of list of lists? (score <a href="https://stackoverflow.com/q/952914.html">1764924</a> in 2019)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<p>I wonder whether there is a shortcut to make a simple list out of list of lists in Python.</p>
<p>I can do that in a <code>for</code> loop, but maybe there is some cool “one-liner”? I tried it with <code>reduce()</code>, but I get an error.</p>
<p><strong>Code</strong></p>
<div class="sourceCode" id="cb410"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb410-1" title="1">l <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], [<span class="dv">7</span>], [<span class="dv">8</span>, <span class="dv">9</span>]]</a>
<a class="sourceLine" id="cb410-2" title="2"><span class="bu">reduce</span>(<span class="kw">lambda</span> x, y: x.extend(y), l)</a></code></pre></div>
<p><strong>Error message</strong></p>
<div class="sourceCode" id="cb411"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb411-1" title="1">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb411-2" title="2">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb411-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span><span class="kw">lambda</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb411-4" title="4"><span class="pp">AttributeError</span>: <span class="st">&#39;NoneType&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;extend&#39;</span></a></code></pre></div>
</section>
<section id="answer-accepted-score-4134" class="level4">
<h4>Answer accepted (score 4134)</h4>
<p>Given a list of lists <code>l</code>,</p>
<p><code>flat_list = [item for sublist in l for item in sublist]</code></p>
<p>which means:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb412-1" title="1">flat_list <span class="op">=</span> []</a>
<a class="sourceLine" id="cb412-2" title="2"><span class="cf">for</span> sublist <span class="kw">in</span> l:</a>
<a class="sourceLine" id="cb412-3" title="3">    <span class="cf">for</span> item <span class="kw">in</span> sublist:</a>
<a class="sourceLine" id="cb412-4" title="4">        flat_list.append(item)</a></code></pre></div>
<p>is faster than the shortcuts posted so far. (<code>l</code> is the list to flatten.)</p>
<p>Here is the corresponding function:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb413-1" title="1">flatten <span class="op">=</span> <span class="kw">lambda</span> l: [item <span class="cf">for</span> sublist <span class="kw">in</span> l <span class="cf">for</span> item <span class="kw">in</span> sublist]</a></code></pre></div>
<p>As evidence, you can use the <code>timeit</code> module in the standard library:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb414-1" title="1">$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;[item for sublist in l for item in sublist]&#39;</span></a>
<a class="sourceLine" id="cb414-2" title="2"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">143</span> usec per loop</a>
<a class="sourceLine" id="cb414-3" title="3">$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;sum(l, [])&#39;</span></a>
<a class="sourceLine" id="cb414-4" title="4"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">969</span> usec per loop</a>
<a class="sourceLine" id="cb414-5" title="5">$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;reduce(lambda x,y: x+y,l)&#39;</span></a>
<a class="sourceLine" id="cb414-6" title="6"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="fl">1.1</span> msec per loop</a></code></pre></div>
<p>Explanation: the shortcuts based on <code>+</code> (including the implied use in <code>sum</code>) are, of necessity, <code>O(L**2)</code> when there are L sublists – as the intermediate result list keeps getting longer, at each step a new intermediate result list object gets allocated, and all the items in the previous intermediate result must be copied over (as well as a few new ones added at the end). So, for simplicity and without actual loss of generality, say you have L sublists of I items each: the first I items are copied back and forth L-1 times, the second I items L-2 times, and so on; total number of copies is I times the sum of x for x from 1 to L excluded, i.e., <code>I * (L**2)/2</code>.</p>
<p>The list comprehension just generates one list, once, and copies each item over (from its original place of residence to the result list) also exactly once.</p>
</section>
<section id="answer-2-score-1360" class="level4">
<h4>Answer 2 (score 1360)</h4>
<p>You can use <a href="http://docs.python.org/2/library/itertools.html#itertools.chain" rel="noreferrer"><code>itertools.chain()</code></a>:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb415-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> itertools</a>
<a class="sourceLine" id="cb415-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> list2d <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">7</span>], [<span class="dv">8</span>,<span class="dv">9</span>]]</a>
<a class="sourceLine" id="cb415-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> merged <span class="op">=</span> <span class="bu">list</span>(itertools.chain(<span class="op">*</span>list2d))</a></code></pre></div>
<p>or, on Python &gt;=2.6, use <a href="http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable" rel="noreferrer"><code>itertools.chain.from_iterable()</code></a> which doesn’t require unpacking the list:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb416-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> itertools</a>
<a class="sourceLine" id="cb416-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> list2d <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">7</span>], [<span class="dv">8</span>,<span class="dv">9</span>]]</a>
<a class="sourceLine" id="cb416-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> merged <span class="op">=</span> <span class="bu">list</span>(itertools.chain.from_iterable(list2d))</a></code></pre></div>
<p>This approach is arguably more readable than <code>[item for sublist in l for item in sublist]</code> and appears to be faster too:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb417-1" title="1">[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99;import itertools&#39;</span> <span class="st">&#39;list(itertools.chain.from_iterable(l))&#39;</span></a>
<a class="sourceLine" id="cb417-2" title="2"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">24.2</span> usec per loop</a>
<a class="sourceLine" id="cb417-3" title="3">[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;[item for sublist in l for item in sublist]&#39;</span></a>
<a class="sourceLine" id="cb417-4" title="4"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">45.2</span> usec per loop</a>
<a class="sourceLine" id="cb417-5" title="5">[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;sum(l, [])&#39;</span></a>
<a class="sourceLine" id="cb417-6" title="6"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">488</span> usec per loop</a>
<a class="sourceLine" id="cb417-7" title="7">[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;reduce(lambda x,y: x+y,l)&#39;</span></a>
<a class="sourceLine" id="cb417-8" title="8"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">522</span> usec per loop</a>
<a class="sourceLine" id="cb417-9" title="9">[me<span class="op">@</span>home]$ python <span class="op">--</span>version</a>
<a class="sourceLine" id="cb417-10" title="10">Python <span class="dv">2</span>.<span class="fl">7.3</span></a></code></pre></div>
</section>
<section id="answer-3-score-807" class="level4">
<h4>Answer 3 (score 807)</h4>
<p><strong>Note from the author</strong>: This is inefficient. But fun, because <a href="https://en.wikipedia.org/wiki/Monoid#Monoids_in_computer_science" rel="noreferrer">monoids</a> are awesome. It’s not appropriate for production Python code.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb418-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">sum</span>(l, [])</a>
<a class="sourceLine" id="cb418-2" title="2">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</a></code></pre></div>
<p>This just sums the elements of iterable passed in the first argument, treating second argument as the initial value of the sum (if not given, <code>0</code> is used instead and this case will give you an error).</p>
<p>Because you are summing nested lists, you actually get <code>[1,3]+[2,4]</code> as a result of <code>sum([[1,3],[2,4]],[])</code>, which is equal to <code>[1,3,2,4]</code>.</p>
<p>Note that only works on lists of lists. For lists of lists of lists, you’ll need another solution.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-print-without-newline-or-space-score-1755449-in-2019" class="level3">
<h3>49: How to print without newline or space? (score <a href="https://stackoverflow.com/q/493386.html">1755449</a> in 2019)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>The question is in the title.</p>
<p>I’d like to do it in <a href="/questions/tagged/python" class="post-tag" title="show questions tagged &#39;python&#39;" rel="tag">python</a>. What I’d like to do in this example in <a href="/questions/tagged/c" class="post-tag" title="show questions tagged &#39;c&#39;" rel="tag">c</a>:</p>
<p>In C:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb419-1" title="1"><span class="co">#include &amp;lt;stdio.h&amp;gt;</span></a>
<a class="sourceLine" id="cb419-2" title="2"></a>
<a class="sourceLine" id="cb419-3" title="3"><span class="bu">int</span> main() {</a>
<a class="sourceLine" id="cb419-4" title="4">    <span class="bu">int</span> i<span class="op">;</span></a>
<a class="sourceLine" id="cb419-5" title="5">    <span class="cf">for</span> (i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&amp;</span>lt<span class="op">;</span><span class="dv">10</span><span class="op">;</span> i<span class="op">++</span>) printf(<span class="st">&quot;.&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb419-6" title="6">    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb419-7" title="7">}</a></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb420-1" title="1">..........</a></code></pre></div>
<p>In Python:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb421-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">0</span>,<span class="dv">10</span>): <span class="bu">print</span> <span class="st">&#39;.&#39;</span></a>
<a class="sourceLine" id="cb421-2" title="2">.</a>
<a class="sourceLine" id="cb421-3" title="3">.</a>
<a class="sourceLine" id="cb421-4" title="4">.</a>
<a class="sourceLine" id="cb421-5" title="5">.</a>
<a class="sourceLine" id="cb421-6" title="6">.</a>
<a class="sourceLine" id="cb421-7" title="7">.</a>
<a class="sourceLine" id="cb421-8" title="8">.</a>
<a class="sourceLine" id="cb421-9" title="9">.</a>
<a class="sourceLine" id="cb421-10" title="10">.</a>
<a class="sourceLine" id="cb421-11" title="11">.</a>
<a class="sourceLine" id="cb421-12" title="12"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">0</span>,<span class="dv">10</span>): <span class="bu">print</span> <span class="st">&#39;.&#39;</span>,</a>
<a class="sourceLine" id="cb421-13" title="13">. . . . . . . . . .</a></code></pre></div>
<p>In Python <code>print</code> will add a <code>\n</code> or space, how can I avoid that? Now, it’s just an example. Don’t tell me I can first build a string then print it. I’d like to know how to “append” strings to <code>stdout</code>.</p>
</section>
<section id="answer-accepted-score-2357" class="level4">
<h4>Answer accepted (score 2357)</h4>
<h5>
General way
</h2>
<div class="sourceCode" id="cb422"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb422-1" title="1"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb422-2" title="2">sys.stdout.write(<span class="st">&#39;.&#39;</span>)</a></code></pre></div>
<p>You may also need to call</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb423-1" title="1">sys.stdout.flush()</a></code></pre></div>
<p>to ensure <code>stdout</code> is flushed immediately.</p>
<h5>
Python 2.6+
</h2>
<p>From Python 2.6 you can import the <code>print</code> function from Python 3:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb424-1" title="1"><span class="im">from</span> __future__ <span class="im">import</span> print_function</a></code></pre></div>
<p>This allows you to use the Python 3 solution below.</p>
<h5>
Python 3
</h2>
<p>In Python 3, the <code>print</code> statement has been changed into a function. In Python 3, you can instead do:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb425-1" title="1"><span class="bu">print</span>(<span class="st">&#39;.&#39;</span>, end<span class="op">=</span><span class="st">&#39;&#39;</span>)</a></code></pre></div>
<p>This also works in Python 2, provided that you’ve used <code>from __future__ import print_function</code>.</p>
<p>If you are having trouble with buffering, you can flush the output by adding <code>flush=True</code> keyword argument:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb426-1" title="1"><span class="bu">print</span>(<span class="st">&#39;.&#39;</span>, end<span class="op">=</span><span class="st">&#39;&#39;</span>, flush<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p>However, note that the <code>flush</code> keyword is not available in the version of the <code>print</code> function imported from <code>__future__</code> in Python 2; it only works in Python 3, more specifically 3.3 and later. In earlier versions you’ll still need to flush manually with a call to <code>sys.stdout.flush()</code>.</p>
<h5>
Sources
</h2>
<ol>
<li>
<a href="https://docs.python.org/2/library/functions.html#print" rel="noreferrer">https://docs.python.org/2/library/functions.html#print</a>
</li>
<li>
<a href="https://docs.python.org/2/library/__future__.html" rel="noreferrer">https://docs.python.org/2/library/<strong>future</strong>.html</a>
</li>
<li>
<a href="https://docs.python.org/3/library/functions.html#print" rel="noreferrer">https://docs.python.org/3/library/functions.html#print</a>
</li>
</ol>
</section>
<section id="answer-2-score-293" class="level4">
<h4>Answer 2 (score 293)</h4>
<p>It should be as simple as described at this link by Guido Van Rossum:</p>
<p>Re: How does one print without a c/r ?</p>
<p><a href="http://legacy.python.org/search/hypermail/python-1992/0115.html" rel="noreferrer">http://legacy.python.org/search/hypermail/python-1992/0115.html</a></p>
<blockquote>
<p>
Is it possible to print something but not automatically have a carriage return appended to it ?
</p>
</blockquote>
<p>
Yes, append a comma after the last argument to print. For instance, this loop prints the numbers 0..9 on a line separated by spaces. Note the parameterless “print” that adds the final newline:
</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb427-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</a>
<a class="sourceLine" id="cb427-2" title="2">...     <span class="bu">print</span> i,</a>
<a class="sourceLine" id="cb427-3" title="3">... <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb427-4" title="4">...     <span class="bu">print</span></a>
<a class="sourceLine" id="cb427-5" title="5">...</a>
<a class="sourceLine" id="cb427-6" title="6"><span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb427-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> </a></code></pre></div>
</section>
<section id="answer-3-score-164" class="level4">
<h4>Answer 3 (score 164)</h4>
<p><em>Note: The title of this question used to be something like “How to printf in python?”</em></p>
<p>Since people may come here looking for it based on the title, Python also supports printf-style substitution:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb428-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> strings <span class="op">=</span> [ <span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span> ]</a>
<a class="sourceLine" id="cb428-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb428-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">3</span>):</a>
<a class="sourceLine" id="cb428-4" title="4">...     <span class="bu">print</span> <span class="st">&quot;Item </span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> (i, strings[i])</a>
<a class="sourceLine" id="cb428-5" title="5">...</a>
<a class="sourceLine" id="cb428-6" title="6">Item <span class="dv">0</span>: one</a>
<a class="sourceLine" id="cb428-7" title="7">Item <span class="dv">1</span>: two</a>
<a class="sourceLine" id="cb428-8" title="8">Item <span class="dv">2</span>: three</a></code></pre></div>
<p>And, you can handily multiply string values:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb429-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> <span class="st">&quot;.&quot;</span> <span class="op">*</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb429-2" title="2">..........</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="generate-random-integers-between-0-and-9-score-1740843-in-2018" class="level3">
<h3>50: Generate random integers between 0 and 9 (score <a href="https://stackoverflow.com/q/3996904.html">1740843</a> in 2018)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>How can I generate random integers between 0 and 9 (inclusive) in Python?</p>
<p>For example, <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>5</code>, <code>6</code>, <code>7</code>, <code>8</code>, <code>9</code></p>
</section>
<section id="answer-accepted-score-1891" class="level4">
<h4>Answer accepted (score 1891)</h4>
<p>Try:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb430-1" title="1"><span class="im">from</span> random <span class="im">import</span> randrange</a>
<a class="sourceLine" id="cb430-2" title="2"><span class="bu">print</span>(randrange(<span class="dv">10</span>))</a></code></pre></div>
<p>More info: <a href="http://docs.python.org/library/random.html#random.randrange" rel="noreferrer">http://docs.python.org/library/random.html#random.randrange</a></p>
</section>
<section id="answer-2-score-371" class="level4">
<h4>Answer 2 (score 371)</h4>
<div class="sourceCode" id="cb431"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb431-1" title="1"><span class="im">import</span> random</a>
<a class="sourceLine" id="cb431-2" title="2"><span class="bu">print</span>(random.randint(<span class="dv">0</span>,<span class="dv">9</span>))</a></code></pre></div>
<hr>
<div class="sourceCode" id="cb432"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb432-1" title="1">random.randint(a, b)</a></code></pre></div>
<p>Return a random integer N such that a &lt;= N &lt;= b.</p>
<p>Docs: <a href="https://docs.python.org/3.1/library/random.html#random.randint" rel="noreferrer">https://docs.python.org/3.1/library/random.html#random.randint</a></p>
</section>
<section id="answer-3-score-111" class="level4">
<h4>Answer 3 (score 111)</h4>
<p>Try this:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb433-1" title="1"><span class="im">from</span> random <span class="im">import</span> randrange, uniform</a>
<a class="sourceLine" id="cb433-2" title="2"></a>
<a class="sourceLine" id="cb433-3" title="3"><span class="co"># randrange gives you an integral value</span></a>
<a class="sourceLine" id="cb433-4" title="4">irand <span class="op">=</span> randrange(<span class="dv">0</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb433-5" title="5"></a>
<a class="sourceLine" id="cb433-6" title="6"><span class="co"># uniform gives you a floating-point value</span></a>
<a class="sourceLine" id="cb433-7" title="7">frand <span class="op">=</span> uniform(<span class="dv">0</span>, <span class="dv">10</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-copy-a-file-in-python-score-1692227-in-2018" class="level3">
<h3>51: How do I copy a file in Python? (score <a href="https://stackoverflow.com/q/123198.html">1692227</a> in 2018)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>How do I copy a file in Python?</p>
<p>I couldn’t find anything under <a href="https://docs.python.org/2/library/os.html" rel="noreferrer"><code>os</code></a>.</p>
</section>
<section id="answer-accepted-score-2597" class="level4">
<h4>Answer accepted (score 2597)</h4>
<p><a href="http://docs.python.org/3/library/shutil.html" rel="noreferrer"><code>shutil</code></a> has many methods you can use. One of which is:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb434-1" title="1"><span class="im">from</span> shutil <span class="im">import</span> copyfile</a>
<a class="sourceLine" id="cb434-2" title="2"></a>
<a class="sourceLine" id="cb434-3" title="3">copyfile(src, dst)</a></code></pre></div>
<p>Copy the contents of the file named <code>src</code> to a file named <code>dst</code>. The destination location must be writable; otherwise, an <code>IOError</code> exception will be raised. If <code>dst</code> already exists, it will be replaced. Special files such as character or block devices and pipes cannot be copied with this function. <code>src</code> and <code>dst</code> are path names given as strings.</p>
</section>
<section id="answer-2-score-976" class="level4">
<h4>Answer 2 (score 976)</h4>
<div class="sourceCode" id="cb435"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb435-1" title="1">┌──────────────────┬────────┬───────────┬───────┬────────────────┐</a>
<a class="sourceLine" id="cb435-2" title="2">│     Function     │ Copies │   Copies  │Can use│   Destination  │</a>
<a class="sourceLine" id="cb435-3" title="3">│                  │metadata│permissions│buffer │may be directory│</a>
<a class="sourceLine" id="cb435-4" title="4">├──────────────────┼────────┼───────────┼───────┼────────────────┤</a>
<a class="sourceLine" id="cb435-5" title="5">│shutil.copy       │   No   │    Yes    │   No  │      Yes       │</a>
<a class="sourceLine" id="cb435-6" title="6">│shutil.copyfile   │   No   │     No    │   No  │       No       │</a>
<a class="sourceLine" id="cb435-7" title="7">│shutil.copy2      │  Yes   │    Yes    │   No  │      Yes       │</a>
<a class="sourceLine" id="cb435-8" title="8">│shutil.copyfileobj│   No   │     No    │  Yes  │       No       │</a>
<a class="sourceLine" id="cb435-9" title="9">└──────────────────┴────────┴───────────┴───────┴────────────────┘</a></code></pre></div>
</section>
<section id="answer-3-score-681" class="level4">
<h4>Answer 3 (score 681)</h4>
<p><a href="https://docs.python.org/2/library/shutil.html#shutil.copy2" rel="noreferrer"><code>copy2(src,dst)</code></a> is often more useful than <a href="https://docs.python.org/2/library/shutil.html#shutil.copyfile" rel="noreferrer"><code>copyfile(src,dst)</code></a> because:</p>
<ul>
<li>
it allows <code>dst</code> to be a <em>directory</em> (instead of the complete target filename), in which case the <a href="https://docs.python.org/2/library/os.path.html#os.path.basename" rel="noreferrer">basename</a> of <code>src</code> is used for creating the new file;
</li>
<li>
it preserves the original modification and access info (mtime and atime) in the file metadata (however, this comes with a slight overhead).
</li>
</ul>
<p>Here is a short example:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb436-1" title="1"><span class="im">import</span> shutil</a>
<a class="sourceLine" id="cb436-2" title="2">shutil.copy2(<span class="st">&#39;/src/dir/file.ext&#39;</span>, <span class="st">&#39;/dst/dir/newname.ext&#39;</span>) <span class="co"># complete target filename given</span></a>
<a class="sourceLine" id="cb436-3" title="3">shutil.copy2(<span class="st">&#39;/src/file.ext&#39;</span>, <span class="st">&#39;/dst/dir&#39;</span>) <span class="co"># target filename is /dst/dir/file.ext</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-declare-an-array-in-python-score-1679894-in-2014" class="level3">
<h3>52: How to declare an array in Python? (score <a href="https://stackoverflow.com/q/1514553.html">1679894</a> in 2014)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>How do I declare an array in <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a>?</p>
<p>I can’t find any reference to arrays in the documentation.</p>
</section>
<section id="answer-2-score-332" class="level4">
<h4>Answer 2 (score 332)</h4>
<div class="sourceCode" id="cb437"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb437-1" title="1">variable <span class="op">=</span> []</a></code></pre></div>
<p>Now <code>variable</code> refers to an empty list<sup>*</sup>.</p>
<p>Of course this is an assignment, not a declaration. There’s no way to say in Python “this variable should never refer to anything other than a list”, since Python is dynamically typed.</p>
<hr>
<p><sup>*</sup>The default built-in Python type is called a <em>list</em>, not an array. It is an ordered container of arbitrary length that can hold a heterogenous collection of objects (their types do not matter and can be freely mixed). This should not be confused with the <a href="https://docs.python.org/2/library/array.html" rel="noreferrer"><code>array</code> module</a>, which offers a type closer to the C <code>array</code> type; the contents must be homogenous (all of the same type), but the length is still dynamic.</p>
</section>
<section id="answer-3-score-118" class="level4">
<h4>Answer 3 (score 118)</h4>
<p>You don’t actually declare things, but this is how you create an array in Python:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb438-1" title="1"><span class="im">from</span> array <span class="im">import</span> array</a>
<a class="sourceLine" id="cb438-2" title="2">intarray <span class="op">=</span> array(<span class="st">&#39;i&#39;</span>)</a></code></pre></div>
<p>For more info see the array module: <a href="http://docs.python.org/library/array.html" rel="noreferrer">http://docs.python.org/library/array.html</a></p>
<p>Now possible you don’t want an array, but a list, but others have answered that already. :)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-split-a-string-into-a-list-score-1677830-in-2019" class="level3">
<h3>53: How to split a string into a list? (score <a href="https://stackoverflow.com/q/743806.html">1677830</a> in 2019)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>I want my Python function to split a sentence (input) and store each word in a list. My current code splits the sentence, but does not store the words as a list. How do I do that?</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb439-1" title="1"><span class="kw">def</span> split_line(text):</a>
<a class="sourceLine" id="cb439-2" title="2"></a>
<a class="sourceLine" id="cb439-3" title="3">    <span class="co"># split the text</span></a>
<a class="sourceLine" id="cb439-4" title="4">    words <span class="op">=</span> text.split()</a>
<a class="sourceLine" id="cb439-5" title="5"></a>
<a class="sourceLine" id="cb439-6" title="6">    <span class="co"># for each word in the line:</span></a>
<a class="sourceLine" id="cb439-7" title="7">    <span class="cf">for</span> word <span class="kw">in</span> words:</a>
<a class="sourceLine" id="cb439-8" title="8"></a>
<a class="sourceLine" id="cb439-9" title="9">        <span class="co"># print the word</span></a>
<a class="sourceLine" id="cb439-10" title="10">        <span class="bu">print</span>(words)</a></code></pre></div>
</section>
<section id="answer-accepted-score-464" class="level4">
<h4>Answer accepted (score 464)</h4>
<div class="sourceCode" id="cb440"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb440-1" title="1">text.split()</a></code></pre></div>
<p>This should be enough to store each word in a list. <code>words</code> is already a list of the words from the sentence, so there is no need for the loop.</p>
<p>Second, it might be a typo, but you have your loop a little messed up. If you really did want to use append, it would be:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb441-1" title="1">words.append(word)</a></code></pre></div>
<p>not</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb442-1" title="1">word.append(words)</a></code></pre></div>
</section>
<section id="answer-2-score-429" class="level4">
<h4>Answer 2 (score 429)</h4>
<p>Splits the string in <code>text</code> on any consecutive runs of whitespace.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb443-1" title="1">words <span class="op">=</span> text.split()      </a></code></pre></div>
<p>Split the string in <code>text</code> on delimiter: <code>&quot;,&quot;</code>.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb444-1" title="1">words <span class="op">=</span> text.split(<span class="st">&quot;,&quot;</span>)   </a></code></pre></div>
<p>The words variable will be a <code>list</code> and contain the words from <code>text</code> split on the delimiter.</p>
</section>
<section id="answer-3-score-84" class="level4">
<h4>Answer 3 (score 84)</h4>
<p><a href="https://docs.python.org/2/library/stdtypes.html#str.split" rel="noreferrer">str.split()</a></p>
<blockquote>
<p>
Return a <strong>list of the words</strong> in the string, using sep as the delimiter … If sep is not specified or is None, a different splitting algorithm is applied: runs of consecutive whitespace are regarded as a single separator, and the result will contain no empty strings at the start or end if the string has leading or trailing whitespace.
</p>
</blockquote>
<div class="sourceCode" id="cb445"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb445-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> line<span class="op">=</span><span class="st">&quot;a sentence with a few words&quot;</span></a>
<a class="sourceLine" id="cb445-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> line.split()</a>
<a class="sourceLine" id="cb445-3" title="3">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;sentence&#39;</span>, <span class="st">&#39;with&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;few&#39;</span>, <span class="st">&#39;words&#39;</span>]</a>
<a class="sourceLine" id="cb445-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> </a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="fastest-way-to-check-if-a-value-exists-in-a-list-score-1650273-in-2019" class="level3">
<h3>54: Fastest way to check if a value exists in a list (score <a href="https://stackoverflow.com/q/7571635.html">1650273</a> in 2019)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>What is the fastest way to know if a value exists in a list (a list with millions of values in it) and what its index is?</p>
<p>I know that all values in the list are unique as in this example.</p>
<p><strong>The first method I try is (3.8 sec in my real code):</strong></p>
<div class="sourceCode" id="cb446"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb446-1" title="1">a <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb446-2" title="2"></a>
<a class="sourceLine" id="cb446-3" title="3"><span class="cf">if</span> a.count(<span class="dv">7</span>) <span class="op">==</span> <span class="dv">1</span>:</a>
<a class="sourceLine" id="cb446-4" title="4">    b<span class="op">=</span>a.index(<span class="dv">7</span>)</a>
<a class="sourceLine" id="cb446-5" title="5">    <span class="co">&quot;Do something with variable b&quot;</span></a></code></pre></div>
<p><strong>The second method I try is (2x faster: 1.9 sec for my real code):</strong></p>
<div class="sourceCode" id="cb447"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb447-1" title="1">a <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb447-2" title="2"></a>
<a class="sourceLine" id="cb447-3" title="3"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb447-4" title="4">    b<span class="op">=</span>a.index(<span class="dv">7</span>)</a>
<a class="sourceLine" id="cb447-5" title="5"><span class="cf">except</span> <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb447-6" title="6">    <span class="co">&quot;Do nothing&quot;</span></a>
<a class="sourceLine" id="cb447-7" title="7"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb447-8" title="8">    <span class="co">&quot;Do something with variable b&quot;</span></a></code></pre></div>
<p><strong>Proposed methods from Stack Overflow user (2.74 sec for my real code):</strong></p>
<div class="sourceCode" id="cb448"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb448-1" title="1">a <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb448-2" title="2"><span class="cf">if</span> <span class="dv">7</span> <span class="kw">in</span> a:</a>
<a class="sourceLine" id="cb448-3" title="3">    a.index(<span class="dv">7</span>)</a></code></pre></div>
<p>
In my real code, the first method takes 3.81 sec and the second method takes 1.88 sec. It’s a good improvement, but:
</p>
<p>I’m a beginner with Python/scripting, and is there a faster way to do the same things and save more processing time?</p>
<p><strong>More specific explication for my application:</strong></p>
<p>In the Blender API I can access a list of particles:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb449-1" title="1">particles <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, etc.]</a></code></pre></div>
<p>From there, I can access a particle’s location:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb450-1" title="1">particles[x].location <span class="op">=</span> [x,y,z]</a></code></pre></div>
<p>And for each particle I test if a neighbour exists by searching each particle location like so:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb451-1" title="1"><span class="cf">if</span> [x<span class="op">+</span><span class="dv">1</span>,y,z] <span class="kw">in</span> particles.location</a>
<a class="sourceLine" id="cb451-2" title="2">    <span class="co">&quot;Find the identity of this neighbour particle in x:the particle&#39;s index</span></a>
<a class="sourceLine" id="cb451-3" title="3"><span class="co">    in the array&quot;</span></a>
<a class="sourceLine" id="cb451-4" title="4">    particles.index([x<span class="op">+</span><span class="dv">1</span>,y,z])</a></code></pre></div>
</section>
<section id="answer-accepted-score-1391" class="level4">
<h4>Answer accepted (score 1391)</h4>
<div class="sourceCode" id="cb452"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb452-1" title="1"><span class="dv">7</span> <span class="kw">in</span> a</a></code></pre></div>
<p>Clearest and fastest way to do it.</p>
<p>You can also consider using a <code>set</code>, but constructing that set from your list may take more time than faster membership testing will save. The only way to be certain is to benchmark well. (this also depends on what operations you require)</p>
</section>
<section id="answer-2-score-178" class="level4">
<h4>Answer 2 (score 178)</h4>
<p>As stated by others, <code>in</code> can be very slow for large lists. Here are some comparisons of the performances for <code>in</code>, <code>set</code> and <code>bisect</code>. Note the time (in second) is in log scale.</p>
<p><a href="https://i.stack.imgur.com/HSRgg.png" rel="noreferrer"><img src="https://i.stack.imgur.com/HSRgg.png" alt="enter image description here"></a></p>
<p>Code for testing:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb453-1" title="1"><span class="im">import</span> random</a>
<a class="sourceLine" id="cb453-2" title="2"><span class="im">import</span> bisect</a>
<a class="sourceLine" id="cb453-3" title="3"><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</a>
<a class="sourceLine" id="cb453-4" title="4"><span class="im">import</span> math</a>
<a class="sourceLine" id="cb453-5" title="5"><span class="im">import</span> time</a>
<a class="sourceLine" id="cb453-6" title="6"></a>
<a class="sourceLine" id="cb453-7" title="7"><span class="kw">def</span> method_in(a,b,c):</a>
<a class="sourceLine" id="cb453-8" title="8">    start_time <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb453-9" title="9">    <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(a):</a>
<a class="sourceLine" id="cb453-10" title="10">        <span class="cf">if</span> x <span class="kw">in</span> b:</a>
<a class="sourceLine" id="cb453-11" title="11">            c[i] <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb453-12" title="12">    <span class="cf">return</span>(time.time()<span class="op">-</span>start_time)   </a>
<a class="sourceLine" id="cb453-13" title="13"></a>
<a class="sourceLine" id="cb453-14" title="14"><span class="kw">def</span> method_set_in(a,b,c):</a>
<a class="sourceLine" id="cb453-15" title="15">    start_time <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb453-16" title="16">    s <span class="op">=</span> <span class="bu">set</span>(b)</a>
<a class="sourceLine" id="cb453-17" title="17">    <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(a):</a>
<a class="sourceLine" id="cb453-18" title="18">        <span class="cf">if</span> x <span class="kw">in</span> s:</a>
<a class="sourceLine" id="cb453-19" title="19">            c[i] <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb453-20" title="20">    <span class="cf">return</span>(time.time()<span class="op">-</span>start_time)</a>
<a class="sourceLine" id="cb453-21" title="21"></a>
<a class="sourceLine" id="cb453-22" title="22"><span class="kw">def</span> method_bisect(a,b,c):</a>
<a class="sourceLine" id="cb453-23" title="23">    start_time <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb453-24" title="24">    b.sort()</a>
<a class="sourceLine" id="cb453-25" title="25">    <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(a):</a>
<a class="sourceLine" id="cb453-26" title="26">        index <span class="op">=</span> bisect.bisect_left(b,x)</a>
<a class="sourceLine" id="cb453-27" title="27">        <span class="cf">if</span> index <span class="op">&amp;</span>lt<span class="op">;</span> <span class="bu">len</span>(a):</a>
<a class="sourceLine" id="cb453-28" title="28">            <span class="cf">if</span> x <span class="op">==</span> b[index]:</a>
<a class="sourceLine" id="cb453-29" title="29">                c[i] <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb453-30" title="30">    <span class="cf">return</span>(time.time()<span class="op">-</span>start_time)</a>
<a class="sourceLine" id="cb453-31" title="31"></a>
<a class="sourceLine" id="cb453-32" title="32"><span class="kw">def</span> profile():</a>
<a class="sourceLine" id="cb453-33" title="33">    time_method_in <span class="op">=</span> []</a>
<a class="sourceLine" id="cb453-34" title="34">    time_method_set_in <span class="op">=</span> []</a>
<a class="sourceLine" id="cb453-35" title="35">    time_method_bisect <span class="op">=</span> []</a>
<a class="sourceLine" id="cb453-36" title="36"></a>
<a class="sourceLine" id="cb453-37" title="37">    Nls <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>,<span class="dv">20000</span>,<span class="dv">1000</span>)]</a>
<a class="sourceLine" id="cb453-38" title="38">    <span class="cf">for</span> N <span class="kw">in</span> Nls:</a>
<a class="sourceLine" id="cb453-39" title="39">        a <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,N)]</a>
<a class="sourceLine" id="cb453-40" title="40">        random.shuffle(a)</a>
<a class="sourceLine" id="cb453-41" title="41">        b <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,N)]</a>
<a class="sourceLine" id="cb453-42" title="42">        random.shuffle(b)</a>
<a class="sourceLine" id="cb453-43" title="43">        c <span class="op">=</span> [<span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,N)]</a>
<a class="sourceLine" id="cb453-44" title="44"></a>
<a class="sourceLine" id="cb453-45" title="45">        time_method_in.append(math.log(method_in(a,b,c)))</a>
<a class="sourceLine" id="cb453-46" title="46">        time_method_set_in.append(math.log(method_set_in(a,b,c)))</a>
<a class="sourceLine" id="cb453-47" title="47">        time_method_bisect.append(math.log(method_bisect(a,b,c)))</a>
<a class="sourceLine" id="cb453-48" title="48"></a>
<a class="sourceLine" id="cb453-49" title="49">    plt.plot(Nls,time_method_in,marker<span class="op">=</span><span class="st">&#39;o&#39;</span>,color<span class="op">=</span><span class="st">&#39;r&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;-&#39;</span>,label<span class="op">=</span><span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb453-50" title="50">    plt.plot(Nls,time_method_set_in,marker<span class="op">=</span><span class="st">&#39;o&#39;</span>,color<span class="op">=</span><span class="st">&#39;b&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;-&#39;</span>,label<span class="op">=</span><span class="st">&#39;set&#39;</span>)</a>
<a class="sourceLine" id="cb453-51" title="51">    plt.plot(Nls,time_method_bisect,marker<span class="op">=</span><span class="st">&#39;o&#39;</span>,color<span class="op">=</span><span class="st">&#39;g&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;-&#39;</span>,label<span class="op">=</span><span class="st">&#39;bisect&#39;</span>)</a>
<a class="sourceLine" id="cb453-52" title="52">    plt.xlabel(<span class="st">&#39;list size&#39;</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</a>
<a class="sourceLine" id="cb453-53" title="53">    plt.ylabel(<span class="st">&#39;log(time)&#39;</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</a>
<a class="sourceLine" id="cb453-54" title="54">    plt.legend(loc <span class="op">=</span> <span class="st">&#39;upper left&#39;</span>)</a>
<a class="sourceLine" id="cb453-55" title="55">    plt.show()</a></code></pre></div>
</section>
<section id="answer-3-score-32" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>You could put your items into a <a href="http://docs.python.org/library/stdtypes.html#set-types-set-frozenset" rel="noreferrer"><code>set</code></a>. Set lookups are very efficient.</p>
<p>Try:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb454-1" title="1">s <span class="op">=</span> <span class="bu">set</span>(a)</a>
<a class="sourceLine" id="cb454-2" title="2"><span class="cf">if</span> <span class="dv">7</span> <span class="kw">in</span> s:</a>
<a class="sourceLine" id="cb454-3" title="3">  <span class="co"># do stuff</span></a></code></pre></div>
<p><strong>edit</strong> In a comment you say that you’d like to get the index of the element. Unfortunately, sets have no notion of element position. An alternative is to pre-sort your list and then use <a href="https://stackoverflow.com/questions/212358/binary-search-in-python">binary search</a> every time you need to find an element.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-merge-two-dictionaries-in-a-single-expression-score-1648573-in-2019" class="level3">
<h3>55: How do I merge two dictionaries in a single expression? (score <a href="https://stackoverflow.com/q/38987.html">1648573</a> in 2019)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>I have two Python dictionaries, and I want to write a single expression that returns these two dictionaries, merged. The <code>update()</code> method would be what I need, if it returned its result instead of modifying a dict in-place.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb455-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb455-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</a>
<a class="sourceLine" id="cb455-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z <span class="op">=</span> x.update(y)</a>
<a class="sourceLine" id="cb455-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span>(z)</a>
<a class="sourceLine" id="cb455-5" title="5"><span class="va">None</span></a>
<a class="sourceLine" id="cb455-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x</a>
<a class="sourceLine" id="cb455-7" title="7">{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</a></code></pre></div>
<p>How can I get that final merged dict in <code>z</code>, not <code>x</code>?</p>
<p>(To be extra-clear, the last-one-wins conflict-handling of <code>dict.update()</code> is what I’m looking for as well.)</p>
</section>
<section id="answer-accepted-score-4917" class="level4">
<h4>Answer accepted (score 4917)</h4>
<blockquote>
<h5>
How can I merge two Python dictionaries in a single expression?
</h2>
</blockquote>
<p>For dictionaries <code>x</code> and <code>y</code>, <code>z</code> becomes a shallowly merged dictionary with values from <code>y</code> replacing those from <code>x</code>.</p>
<ul>
<li>
<p>
In Python 3.5 or greater:
</p>
<code>python z = {**x, **y}</code>
</li>
<li>
<p>
In Python 2, (or 3.4 or lower) write a function:
</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb456-1" title="1"><span class="kw">def</span> merge_two_dicts(x, y):</a>
<a class="sourceLine" id="cb456-2" title="2">    z <span class="op">=</span> x.copy()   <span class="co"># start with x&#39;s keys and values</span></a>
<a class="sourceLine" id="cb456-3" title="3">    z.update(y)    <span class="co"># modifies z with y&#39;s keys and values &amp;amp; returns None</span></a>
<a class="sourceLine" id="cb456-4" title="4">    <span class="cf">return</span> z</a></code></pre></div>
<p>and now:</p>
<code>python z = merge_two_dicts(x, y)</code>
</li>
</ul>
<h5>
Explanation
</h3>
<p>Say you have two dicts and you want to merge them into a new dict without altering the original dicts:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb457-1" title="1">x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb457-2" title="2">y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">4</span>}</a></code></pre></div>
<p>The desired result is to get a new dictionary (<code>z</code>) with the values merged, and the second dict’s values overwriting those from the first.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb458-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z</a>
<a class="sourceLine" id="cb458-2" title="2">{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">4</span>}</a></code></pre></div>
<p>A new syntax for this, proposed in <a href="https://www.python.org/dev/peps/pep-0448" rel="noreferrer">PEP 448</a> and <a href="https://mail.python.org/pipermail/python-dev/2015-February/138564.html" rel="noreferrer">available as of Python 3.5</a>, is</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb459-1" title="1">z <span class="op">=</span> {<span class="op">**</span>x, <span class="op">**</span>y}</a></code></pre></div>
<p>And it is indeed a single expression.</p>
<p>Note that we can merge in with literal notation as well:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb460-1" title="1">z <span class="op">=</span> {<span class="op">**</span>x, <span class="st">&#39;foo&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;bar&#39;</span>: <span class="dv">2</span>, <span class="op">**</span>y}</a></code></pre></div>
<p>and now:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb461-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z</a>
<a class="sourceLine" id="cb461-2" title="2">{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;foo&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;bar&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">4</span>}</a></code></pre></div>
<p>It is now showing as implemented in the <a href="https://www.python.org/dev/peps/pep-0478/#features-for-3-5" rel="noreferrer">release schedule for 3.5, PEP 478</a>, and it has now made its way into <a href="https://docs.python.org/dev/whatsnew/3.5.html#pep-448-additional-unpacking-generalizations" rel="noreferrer">What’s New in Python 3.5</a> document.</p>
<p>However, since many organizations are still on Python 2, you may wish to do this in a backwards compatible way. The classically Pythonic way, available in Python 2 and Python 3.0-3.4, is to do this as a two-step process:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb462-1" title="1">z <span class="op">=</span> x.copy()</a>
<a class="sourceLine" id="cb462-2" title="2">z.update(y) <span class="co"># which returns None since it mutates z</span></a></code></pre></div>
<p>In both approaches, <code>y</code> will come second and its values will replace <code>x</code>’s values, thus <code>'b'</code> will point to <code>3</code> in our final result.</p>
<h5>
Not yet on Python 3.5, but want a <em>single expression</em>
</h2>
<p>If you are not yet on Python 3.5, or need to write backward-compatible code, and you want this in a <em>single expression</em>, the most performant while correct approach is to put it in a function:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb463-1" title="1"><span class="kw">def</span> merge_two_dicts(x, y):</a>
<a class="sourceLine" id="cb463-2" title="2">    <span class="co">&quot;&quot;&quot;Given two dicts, merge them into a new dict as a shallow copy.&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb463-3" title="3">    z <span class="op">=</span> x.copy()</a>
<a class="sourceLine" id="cb463-4" title="4">    z.update(y)</a>
<a class="sourceLine" id="cb463-5" title="5">    <span class="cf">return</span> z</a></code></pre></div>
<p>and then you have a single expression:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb464-1" title="1">z <span class="op">=</span> merge_two_dicts(x, y)</a></code></pre></div>
<p>You can also make a function to merge an undefined number of dicts, from zero to a very large number:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb465-1" title="1"><span class="kw">def</span> merge_dicts(<span class="op">*</span>dict_args):</a>
<a class="sourceLine" id="cb465-2" title="2">    <span class="co">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb465-3" title="3"><span class="co">    Given any number of dicts, shallow copy and merge into a new dict,</span></a>
<a class="sourceLine" id="cb465-4" title="4"><span class="co">    precedence goes to key value pairs in latter dicts.</span></a>
<a class="sourceLine" id="cb465-5" title="5"><span class="co">    &quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb465-6" title="6">    result <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb465-7" title="7">    <span class="cf">for</span> dictionary <span class="kw">in</span> dict_args:</a>
<a class="sourceLine" id="cb465-8" title="8">        result.update(dictionary)</a>
<a class="sourceLine" id="cb465-9" title="9">    <span class="cf">return</span> result</a></code></pre></div>
<p>This function will work in Python 2 and 3 for all dicts. e.g. given dicts <code>a</code> to <code>g</code>:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb466-1" title="1">z <span class="op">=</span> merge_dicts(a, b, c, d, e, f, g) </a></code></pre></div>
<p>and key value pairs in <code>g</code> will take precedence over dicts <code>a</code> to <code>f</code>, and so on.</p>
<h5>
Critiques of Other Answers
</h2>
<p>Don’t use what you see in the formerly accepted answer:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb467-1" title="1">z <span class="op">=</span> <span class="bu">dict</span>(x.items() <span class="op">+</span> y.items())</a></code></pre></div>
<p>In Python 2, you create two lists in memory for each dict, create a third list in memory with length equal to the length of the first two put together, and then discard all three lists to create the dict. <strong>In Python 3, this will fail</strong> because you’re adding two <code>dict_items</code> objects together, not two lists -</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb468-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> c <span class="op">=</span> <span class="bu">dict</span>(a.items() <span class="op">+</span> b.items())</a>
<a class="sourceLine" id="cb468-2" title="2">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb468-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb468-4" title="4"><span class="pp">TypeError</span>: unsupported operand <span class="bu">type</span>(s) <span class="cf">for</span> <span class="op">+</span>: <span class="st">&#39;dict_items&#39;</span> <span class="kw">and</span> <span class="st">&#39;dict_items&#39;</span></a></code></pre></div>
<p>and you would have to explicitly create them as lists, e.g. <code>z = dict(list(x.items()) + list(y.items()))</code>. This is a waste of resources and computation power.</p>
<p>Similarly, taking the union of <code>items()</code> in Python 3 (<code>viewitems()</code> in Python 2.7) will also fail when values are unhashable objects (like lists, for example). Even if your values are hashable, <strong>since sets are semantically unordered, the behavior is undefined in regards to precedence. So don’t do this:</strong></p>
<div class="sourceCode" id="cb469"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb469-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> c <span class="op">=</span> <span class="bu">dict</span>(a.items() <span class="op">|</span> b.items())</a></code></pre></div>
<p>This example demonstrates what happens when values are unhashable:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb470-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: []}</a>
<a class="sourceLine" id="cb470-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: []}</a>
<a class="sourceLine" id="cb470-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">dict</span>(x.items() <span class="op">|</span> y.items())</a>
<a class="sourceLine" id="cb470-4" title="4">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb470-5" title="5">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb470-6" title="6"><span class="pp">TypeError</span>: unhashable <span class="bu">type</span>: <span class="st">&#39;list&#39;</span></a></code></pre></div>
<p>Here’s an example where y should have precedence, but instead the value from x is retained due to the arbitrary order of sets:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb471-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb471-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> y <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>}</a>
<a class="sourceLine" id="cb471-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">dict</span>(x.items() <span class="op">|</span> y.items())</a>
<a class="sourceLine" id="cb471-4" title="4">{<span class="st">&#39;a&#39;</span>: <span class="dv">2</span>}</a></code></pre></div>
<p>Another hack you should not use:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb472-1" title="1">z <span class="op">=</span> <span class="bu">dict</span>(x, <span class="op">**</span>y)</a></code></pre></div>
<p>This uses the <code>dict</code> constructor, and is very fast and memory efficient (even slightly more-so than our two-step process) but unless you know precisely what is happening here (that is, the second dict is being passed as keyword arguments to the dict constructor), it’s difficult to read, it’s not the intended usage, and so it is not Pythonic.</p>
<p>Here’s an example of the usage being <a href="https://code.djangoproject.com/attachment/ticket/13357/django-pypy.2.diff" rel="noreferrer">remediated in django</a>.</p>
<p>Dicts are intended to take hashable keys (e.g. frozensets or tuples), but <strong>this method fails in Python 3 when keys are not strings.</strong></p>
<div class="sourceCode" id="cb473"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb473-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> c <span class="op">=</span> <span class="bu">dict</span>(a, <span class="op">**</span>b)</a>
<a class="sourceLine" id="cb473-2" title="2">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb473-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb473-4" title="4"><span class="pp">TypeError</span>: keyword arguments must be strings</a></code></pre></div>
<p>From the <a href="https://mail.python.org/pipermail/python-dev/2010-April/099459.html" rel="noreferrer">mailing list</a>, Guido van Rossum, the creator of the language, wrote:</p>
<blockquote>
<p>
I am fine with declaring dict({}, <strong>{1:3}) illegal, since after all it is abuse of the </strong> mechanism.
</p>
</blockquote>
<p>and</p>
<blockquote>
<p>
Apparently dict(x, **y) is going around as “cool hack” for “call x.update(y) and return x”. Personally I find it more despicable than cool.
</p>
</blockquote>
<p>It is my understanding (as well as the understanding of the <a href="https://mail.python.org/pipermail/python-dev/2010-April/099485.html" rel="noreferrer">creator of the language</a>) that the intended usage for <code>dict(**y)</code> is for creating dicts for readability purposes, e.g.:</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb474-1" title="1"><span class="bu">dict</span>(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">10</span>, c<span class="op">=</span><span class="dv">11</span>)</a></code></pre></div>
<p>instead of</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb475-1" title="1">{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</a></code></pre></div>
<h5>
Response to comments
</h2>
<blockquote>
Despite what Guido says, <code>dict(x, **y)</code> is in line with the dict specification, which btw. works for both Python 2 and 3. The fact that this only works for string keys is a direct consequence of how keyword parameters work and not a short-comming of dict. Nor is using the ** operator in this place an abuse of the mechanism, in fact ** was designed precisely to pass dicts as keywords.
</blockquote>
<p>Again, it doesn’t work for 3 when keys are non-strings. The implicit calling contract is that namespaces take ordinary dicts, while users must only pass keyword arguments that are strings. All other callables enforced it. <code>dict</code> broke this consistency in Python 2:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb476-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> foo(<span class="op">**</span>{(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>): <span class="va">None</span>})</a>
<a class="sourceLine" id="cb476-2" title="2">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb476-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb476-4" title="4"><span class="pp">TypeError</span>: foo() keywords must be strings</a>
<a class="sourceLine" id="cb476-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">dict</span>(<span class="op">**</span>{(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>): <span class="va">None</span>})</a>
<a class="sourceLine" id="cb476-6" title="6">{(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>): <span class="va">None</span>}</a></code></pre></div>
<p>This inconsistency was bad given other implementations of Python (Pypy, Jython, IronPython). Thus it was fixed in Python 3, as this usage could be a breaking change.</p>
<p>I submit to you that it is malicious incompetence to intentionally write code that only works in one version of a language or that only works given certain arbitrary constraints.</p>
<p>More comments:</p>
<blockquote>
<code>dict(x.items() + y.items())</code> is still the most readable solution for Python 2. Readability counts.
</blockquote>
<p>My response: <code>merge_two_dicts(x, y)</code> actually seems much clearer to me, if we’re actually concerned about readability. And it is not forward compatible, as Python 2 is increasingly deprecated.</p>
<blockquote>
<code>{**x, **y}</code> does not seem to handle nested dictionaries. the contents of nested keys are simply overwritten, not merged […] I ended up being burnt by these answers that do not merge recursively and I was surprised no one mentioned it. In my interpretation of the word “merging” these answers describe “updating one dict with another”, and not merging.
</blockquote>
<p>Yes. I must refer you back to the question, which is asking for a <em>shallow</em> merge of <strong><em>two</em></strong> dictionaries, with the first’s values being overwritten by the second’s - in a single expression.</p>
<p>Assuming two dictionary of dictionaries, one might recursively merge them in a single function, but you should be careful not to modify the dicts from either source, and the surest way to avoid that is to make a copy when assigning values. As keys must be hashable and are usually therefore immutable, it is pointless to copy them:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb477-1" title="1"><span class="im">from</span> copy <span class="im">import</span> deepcopy</a>
<a class="sourceLine" id="cb477-2" title="2"></a>
<a class="sourceLine" id="cb477-3" title="3"><span class="kw">def</span> dict_of_dicts_merge(x, y):</a>
<a class="sourceLine" id="cb477-4" title="4">    z <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb477-5" title="5">    overlapping_keys <span class="op">=</span> x.keys() <span class="op">&amp;</span>amp<span class="op">;</span> y.keys()</a>
<a class="sourceLine" id="cb477-6" title="6">    <span class="cf">for</span> key <span class="kw">in</span> overlapping_keys:</a>
<a class="sourceLine" id="cb477-7" title="7">        z[key] <span class="op">=</span> dict_of_dicts_merge(x[key], y[key])</a>
<a class="sourceLine" id="cb477-8" title="8">    <span class="cf">for</span> key <span class="kw">in</span> x.keys() <span class="op">-</span> overlapping_keys:</a>
<a class="sourceLine" id="cb477-9" title="9">        z[key] <span class="op">=</span> deepcopy(x[key])</a>
<a class="sourceLine" id="cb477-10" title="10">    <span class="cf">for</span> key <span class="kw">in</span> y.keys() <span class="op">-</span> overlapping_keys:</a>
<a class="sourceLine" id="cb477-11" title="11">        z[key] <span class="op">=</span> deepcopy(y[key])</a>
<a class="sourceLine" id="cb477-12" title="12">    <span class="cf">return</span> z</a></code></pre></div>
<p>Usage:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb478-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>:{<span class="dv">1</span>:{}}, <span class="st">&#39;b&#39;</span>: {<span class="dv">2</span>:{}}}</a>
<a class="sourceLine" id="cb478-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>:{<span class="dv">10</span>:{}}, <span class="st">&#39;c&#39;</span>: {<span class="dv">11</span>:{}}}</a>
<a class="sourceLine" id="cb478-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> dict_of_dicts_merge(x, y)</a>
<a class="sourceLine" id="cb478-4" title="4">{<span class="st">&#39;b&#39;</span>: {<span class="dv">2</span>: {}, <span class="dv">10</span>: {}}, <span class="st">&#39;a&#39;</span>: {<span class="dv">1</span>: {}}, <span class="st">&#39;c&#39;</span>: {<span class="dv">11</span>: {}}}</a></code></pre></div>
<p>Coming up with contingencies for other value types is far beyond the scope of this question, so I will point you at <a href="https://stackoverflow.com/a/24088493/541136">my answer to the canonical question on a “Dictionaries of dictionaries merge”</a>.</p>
<h5>
Less Performant But Correct Ad-hocs
</h2>
<p>
These approaches are less performant, but they will provide correct behavior. They will be <em>much less</em> performant than <code>copy</code> and <code>update</code> or the new unpacking because they iterate through each key-value pair at a higher level of abstraction, but they <em>do</em> respect the order of precedence (latter dicts have precedence)
</p>
<p>You can also chain the dicts manually inside a dict comprehension:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb479-1" title="1">{k: v <span class="cf">for</span> d <span class="kw">in</span> dicts <span class="cf">for</span> k, v <span class="kw">in</span> d.items()} <span class="co"># iteritems in Python 2.7</span></a></code></pre></div>
<p>or in python 2.6 (and perhaps as early as 2.4 when generator expressions were introduced):</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb480-1" title="1"><span class="bu">dict</span>((k, v) <span class="cf">for</span> d <span class="kw">in</span> dicts <span class="cf">for</span> k, v <span class="kw">in</span> d.items())</a></code></pre></div>
<p><code>itertools.chain</code> will chain the iterators over the key-value pairs in the correct order:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb481-1" title="1"><span class="im">import</span> itertools</a>
<a class="sourceLine" id="cb481-2" title="2">z <span class="op">=</span> <span class="bu">dict</span>(itertools.chain(x.iteritems(), y.iteritems()))</a></code></pre></div>
<h5>
Performance Analysis
</h2>
<p>I’m only going to do the performance analysis of the usages known to behave correctly.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb482-1" title="1"><span class="im">import</span> timeit</a></code></pre></div>
<p>The following is done on Ubuntu 14.04</p>
<p>In Python 2.7 (system Python):</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb483-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: merge_two_dicts(x, y)))</a>
<a class="sourceLine" id="cb483-2" title="2"><span class="fl">0.5726828575134277</span></a>
<a class="sourceLine" id="cb483-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: {k: v <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items()} ))</a>
<a class="sourceLine" id="cb483-4" title="4"><span class="fl">1.163769006729126</span></a>
<a class="sourceLine" id="cb483-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>(itertools.chain(x.iteritems(), y.iteritems()))))</a>
<a class="sourceLine" id="cb483-6" title="6"><span class="fl">1.1614501476287842</span></a>
<a class="sourceLine" id="cb483-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>((k, v) <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items())))</a>
<a class="sourceLine" id="cb483-8" title="8"><span class="fl">2.2345519065856934</span></a></code></pre></div>
<p>In Python 3.5 (deadsnakes PPA):</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb484-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: {<span class="op">**</span>x, <span class="op">**</span>y}))</a>
<a class="sourceLine" id="cb484-2" title="2"><span class="fl">0.4094954460160807</span></a>
<a class="sourceLine" id="cb484-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: merge_two_dicts(x, y)))</a>
<a class="sourceLine" id="cb484-4" title="4"><span class="fl">0.7881555100320838</span></a>
<a class="sourceLine" id="cb484-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: {k: v <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items()} ))</a>
<a class="sourceLine" id="cb484-6" title="6"><span class="fl">1.4525277839857154</span></a>
<a class="sourceLine" id="cb484-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>(itertools.chain(x.items(), y.items()))))</a>
<a class="sourceLine" id="cb484-8" title="8"><span class="fl">2.3143140770262107</span></a>
<a class="sourceLine" id="cb484-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>((k, v) <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items())))</a>
<a class="sourceLine" id="cb484-10" title="10"><span class="fl">3.2069112799945287</span></a></code></pre></div>
<h5>
Resources on Dictionaries
</h2>
<ul>
<li>
<a href="https://stackoverflow.com/questions/327311/how-are-pythons-built-in-dictionaries-implemented/44509302#44509302">My explanation of Python’s <strong>dictionary implementation</strong>, updated for 3.6.</a>
</li>
<li>
<a href="https://stackoverflow.com/questions/1024847/add-new-keys-to-a-dictionary/27208535#27208535">Answer on how to add new keys to a dictionary</a>
</li>
<li>
<a href="https://stackoverflow.com/questions/209840/map-two-lists-into-a-dictionary-in-python/33737067#33737067">Mapping two lists into a dictionary</a>
</li>
<li>
The official Python <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries" rel="noreferrer">docs on dictionaries</a>
</li>
<li>
<a href="https://www.youtube.com/watch?v=66P5FMkWoVU" rel="noreferrer">The Dictionary Even Mightier</a> - talk by Brandon Rhodes at Pycon 2017
</li>
<li>
<a href="https://www.youtube.com/watch?v=npw4s1QTmPg" rel="noreferrer">Modern Python Dictionaries, A Confluence of Great Ideas</a> - talk by Raymond Hettinger at Pycon 2017
</li>
</ul>
</section>
<section id="answer-2-score-1554" class="level4">
<h4>Answer 2 (score 1554)</h4>
<p>In your case, what you can do is:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb485-1" title="1">z <span class="op">=</span> <span class="bu">dict</span>(x.items() <span class="op">+</span> y.items())</a></code></pre></div>
<p>This will, as you want it, put the final dict in <code>z</code>, and make the value for key <code>b</code> be properly overridden by the second (<code>y</code>) dict’s value:</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb486-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>:<span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb486-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>:<span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</a>
<a class="sourceLine" id="cb486-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z <span class="op">=</span> <span class="bu">dict</span>(x.items() <span class="op">+</span> y.items())</a>
<a class="sourceLine" id="cb486-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z</a>
<a class="sourceLine" id="cb486-5" title="5">{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>}</a></code></pre></div>
<p>If you use Python 3, it is only a little more complicated. To create <code>z</code>:</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb487-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">list</span>(x.items()) <span class="op">+</span> <span class="bu">list</span>(y.items()))</a>
<a class="sourceLine" id="cb487-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> z</a>
<a class="sourceLine" id="cb487-3" title="3">{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>}</a></code></pre></div>
</section>
<section id="answer-3-score-605" class="level4">
<h4>Answer 3 (score 605)</h4>
<p>An alternative:</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb488-1" title="1">z <span class="op">=</span> x.copy()</a>
<a class="sourceLine" id="cb488-2" title="2">z.update(y)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="determine-the-type-of-an-object-score-1647494-in-2017" class="level3">
<h3>56: Determine the type of an object? (score <a href="https://stackoverflow.com/q/2225038.html">1647494</a> in 2017)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<p>Is there a simple way to determine if a variable is a list, dictionary, or something else? I am getting an object back that may be either type and I need to be able to tell the difference.</p>
</section>
<section id="answer-accepted-score-1876" class="level4">
<h4>Answer accepted (score 1876)</h4>
<p>To get the type of an object, you can use the built-in <a href="http://docs.python.org/3/library/functions.html#type" rel="noreferrer"><code>type()</code></a> function. Passing an object as the only parameter will return the type object of that object:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb489-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>([]) <span class="kw">is</span> <span class="bu">list</span></a>
<a class="sourceLine" id="cb489-2" title="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb489-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>({}) <span class="kw">is</span> <span class="bu">dict</span></a>
<a class="sourceLine" id="cb489-4" title="4"><span class="va">True</span></a>
<a class="sourceLine" id="cb489-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(<span class="st">&#39;&#39;</span>) <span class="kw">is</span> <span class="bu">str</span></a>
<a class="sourceLine" id="cb489-6" title="6"><span class="va">True</span></a>
<a class="sourceLine" id="cb489-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(<span class="dv">0</span>) <span class="kw">is</span> <span class="bu">int</span></a>
<a class="sourceLine" id="cb489-8" title="8"><span class="va">True</span></a>
<a class="sourceLine" id="cb489-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>({})</a>
<a class="sourceLine" id="cb489-10" title="10"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;dict&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb489-11" title="11"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>([])</a>
<a class="sourceLine" id="cb489-12" title="12"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;list&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p>This of course also works for custom types:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb490-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> Test1 (<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb490-2" title="2">        <span class="cf">pass</span></a>
<a class="sourceLine" id="cb490-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> Test2 (Test1):</a>
<a class="sourceLine" id="cb490-4" title="4">        <span class="cf">pass</span></a>
<a class="sourceLine" id="cb490-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> Test1()</a>
<a class="sourceLine" id="cb490-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> b <span class="op">=</span> Test2()</a>
<a class="sourceLine" id="cb490-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(a) <span class="kw">is</span> Test1</a>
<a class="sourceLine" id="cb490-8" title="8"><span class="va">True</span></a>
<a class="sourceLine" id="cb490-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(b) <span class="kw">is</span> Test2</a>
<a class="sourceLine" id="cb490-10" title="10"><span class="va">True</span></a></code></pre></div>
<p>Note that <code>type()</code> will only return the immediate type of the object, but won’t be able to tell you about type inheritance.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb491-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(b) <span class="kw">is</span> Test1</a>
<a class="sourceLine" id="cb491-2" title="2"><span class="va">False</span></a></code></pre></div>
<p>To cover that, you should use the <a href="http://docs.python.org/3/library/functions.html#isinstance" rel="noreferrer"><code>isinstance</code></a> function. This of course also works for built-in types:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb492-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>(b, Test1)</a>
<a class="sourceLine" id="cb492-2" title="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb492-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>(b, Test2)</a>
<a class="sourceLine" id="cb492-4" title="4"><span class="va">True</span></a>
<a class="sourceLine" id="cb492-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>(a, Test1)</a>
<a class="sourceLine" id="cb492-6" title="6"><span class="va">True</span></a>
<a class="sourceLine" id="cb492-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>(a, Test2)</a>
<a class="sourceLine" id="cb492-8" title="8"><span class="va">False</span></a>
<a class="sourceLine" id="cb492-9" title="9"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>([], <span class="bu">list</span>)</a>
<a class="sourceLine" id="cb492-10" title="10"><span class="va">True</span></a>
<a class="sourceLine" id="cb492-11" title="11"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>({}, <span class="bu">dict</span>)</a>
<a class="sourceLine" id="cb492-12" title="12"><span class="va">True</span></a></code></pre></div>
<p><code>isinstance()</code> is usually the preferred way to ensure the type of an object because it will also accept derived types. So unless you actually need the type object (for whatever reason), using <code>isinstance()</code> is preferred over <code>type()</code>.</p>
<p>The second parameter of <code>isinstance()</code> also accepts a tuple of types, so it’s possible to check for multiple types at once. <code>isinstance</code> will then return true, if the object is of any of those types:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb493-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">isinstance</span>([], (<span class="bu">tuple</span>, <span class="bu">list</span>, <span class="bu">set</span>))</a>
<a class="sourceLine" id="cb493-2" title="2"><span class="va">True</span></a></code></pre></div>
</section>
<section id="answer-2-score-157" class="level4">
<h4>Answer 2 (score 157)</h4>
<p>You can do that using <code>type()</code>:</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb494-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> []</a>
<a class="sourceLine" id="cb494-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(a)</a>
<a class="sourceLine" id="cb494-3" title="3"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;list&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb494-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> f <span class="op">=</span> ()</a>
<a class="sourceLine" id="cb494-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">type</span>(f)</a>
<a class="sourceLine" id="cb494-6" title="6"><span class="op">&amp;</span>lt<span class="op">;</span><span class="bu">type</span> <span class="st">&#39;tuple&#39;</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
</section>
<section id="answer-3-score-40" class="level4">
<h4>Answer 3 (score 40)</h4>
<p>It might be more Pythonic to use a <code>try</code>…<code>except</code> block. That way, if you have a class which quacks like a list, or quacks like a dict, it will behave properly regardless of what its type <em>really</em> is.</p>
<p>To clarify, the preferred method of “telling the difference” between variable types is with something called <a href="http://en.wikipedia.org/wiki/Duck_typing" rel="noreferrer">duck typing</a>: as long as the methods (and return types) that a variable responds to are what your subroutine expects, treat it like what you expect it to be. For example, if you have a class that overloads the bracket operators with <code>getattr</code> and <code>setattr</code>, but uses some funny internal scheme, it would be appropriate for it to behave as a dictionary if that’s what it’s trying to emulate.</p>
<p>The other problem with the <code>type(A) is type(B)</code> checking is that if <code>A</code> is a subclass of <code>B</code>, it evaluates to <code>false</code> when, programmatically, you would hope it would be <code>true</code>. If an object is a subclass of a list, it should work like a list: checking the type as presented in the other answer will prevent this. (<code>isinstance</code> will work, however).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-arr.__len__-the-preferred-way-to-get-the-length-of-an-array-in-python-score-1645889-in-2018" class="level3">
<h3>57: Is arr.__len__() the preferred way to get the length of an array in Python? (score <a href="https://stackoverflow.com/q/518021.html">1645889</a> in 2018)</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>In <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a>, is the following the only way to get the number of elements?</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb495-1" title="1">arr.<span class="fu">__len__</span>()</a></code></pre></div>
<p>If so, why the strange syntax?</p>
</section>
<section id="answer-accepted-score-1204" class="level4">
<h4>Answer accepted (score 1204)</h4>
<div class="sourceCode" id="cb496"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb496-1" title="1">my_list <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb496-2" title="2"><span class="bu">len</span>(my_list)</a>
<a class="sourceLine" id="cb496-3" title="3"><span class="co"># 5</span></a></code></pre></div>
<p>The same works for tuples:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb497-1" title="1">my_tuple <span class="op">=</span> (<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb497-2" title="2"><span class="bu">len</span>(my_tuple)</a>
<a class="sourceLine" id="cb497-3" title="3"><span class="co"># 5</span></a></code></pre></div>
<p>And strings, which are really just arrays of characters:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb498-1" title="1">my_string <span class="op">=</span> <span class="st">&#39;hello world&#39;</span></a>
<a class="sourceLine" id="cb498-2" title="2"><span class="bu">len</span>(my_string)</a>
<a class="sourceLine" id="cb498-3" title="3"><span class="co"># 11</span></a></code></pre></div>
<p>It was <a href="http://effbot.org/pyfaq/why-does-python-use-methods-for-some-functionality-e-g-list-index-but-functions-for-other-e-g-len-list.htm" rel="noreferrer">intentionally done this way</a> so that lists, tuples and other container types didn’t all need to explicitly implement a public <code>.length()</code> method, instead you can just check the <code>len()</code> of anything that implements the ‘magic’ <code>__len__()</code> method.</p>
<p>Sure, this may seem redundant, but length checking implementations can vary considerably, even within the same language. It’s not uncommon to see one collection type use a <code>.length()</code> method while another type uses a <code>.length</code> property, while yet another uses <code>.count()</code>. Having a language-level keyword unifies the entry point for all these types. So even objects you may not consider to be lists of elements could still be length-checked. This includes strings, queues, trees, etc.</p>
<p>The functional nature of <code>len()</code> also lends itself well to functional styles of programming.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb499-1" title="1">lengths <span class="op">=</span> <span class="bu">map</span>(<span class="bu">len</span>, list_of_containers)</a></code></pre></div>
</section>
<section id="answer-2-score-51" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>The way you take a length of anything for which that makes sense (a list, dictionary, tuple, string, …) is to call <code>len</code> on it.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb500-1" title="1">l <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb500-2" title="2">s <span class="op">=</span> <span class="st">&#39;abcde&#39;</span></a>
<a class="sourceLine" id="cb500-3" title="3"><span class="bu">len</span>(l) <span class="co">#returns 4</span></a>
<a class="sourceLine" id="cb500-4" title="4"><span class="bu">len</span>(s) <span class="co">#returns 5</span></a></code></pre></div>
<p>The reason for the “strange” syntax is that internally python translates <code>len(object)</code> into <code>object.__len__()</code>. This applies to any object. So, if you are defining some class and it makes sense for it to have a length, just define a <code>__len__()</code> method on it and then one can call <code>len</code> on those instances.</p>
</section>
<section id="answer-3-score-23" class="level4">
<h4>Answer 3 (score 23)</h4>
<p>Python uses <a href="http://en.wikipedia.org/wiki/Duck_typing" rel="noreferrer">duck typing</a>: it doesn’t care about what an object <em>is</em>, as long as it has the appropriate interface for the situation at hand. When you call the built-in function len() on an object, you are actually calling its internal <strong>len</strong> method. A custom object can implement this interface and len() will return the answer, even if the object is not conceptually a sequence.</p>
<p>For a complete list of interfaces, have a look here: <a href="http://docs.python.org/reference/datamodel.html#basic-customization" rel="noreferrer">http://docs.python.org/reference/datamodel.html#basic-customization</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-ide-to-use-for-python-score-1633282-in-2014" class="level3">
<h3>58: What IDE to use for Python? (score <a href="https://stackoverflow.com/q/81584.html">1633282</a> in 2014)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>What IDEs (“GUIs/editors”) do others use for Python coding?</p>
</section>
<section id="answer-2-score-1273" class="level4">
<h4>Answer 2 (score 1273)</h4>
<h5>
Results
</h2>
<p><a href="https://docs.google.com/spreadsheets/d/1l3x94P55qoxqYbq5GosWQ7IonZ4vR-4ZyCaImiVmCSk/pubhtml" rel="noreferrer">Spreadsheet version</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/1l3x94P55qoxqYbq5GosWQ7IonZ4vR-4ZyCaImiVmCSk/pubhtml" rel="noreferrer"><img src="https://i.stack.imgur.com/Jrc6C.png" alt="spreadsheet screenshot"></a></p>
<p>Alternatively, in plain text: (also available as a a <a href="https://i.stack.imgur.com/ItVKB.png" rel="noreferrer">screenshot</a>)</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb501-1" title="1">                         Bracket Matching <span class="op">-</span>.  .<span class="op">-</span> Line Numbering</a>
<a class="sourceLine" id="cb501-2" title="2">                          Smart Indent <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> UML Editing <span class="op">/</span> Viewing</a>
<a class="sourceLine" id="cb501-3" title="3">         Source Control Integration <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Code Folding</a>
<a class="sourceLine" id="cb501-4" title="4">                    Error Markup <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Code Templates</a>
<a class="sourceLine" id="cb501-5" title="5">  Integrated Python Debugging <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Unit Testing</a>
<a class="sourceLine" id="cb501-6" title="6">    Multi<span class="op">-</span>Language Support <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> GUI Designer (Qt, Eric, etc)</a>
<a class="sourceLine" id="cb501-7" title="7">   Auto Code Completion <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Integrated DB Support</a>
<a class="sourceLine" id="cb501-8" title="8">     Commercial<span class="op">/</span>Free <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Refactoring</a>
<a class="sourceLine" id="cb501-9" title="9">   Cross Platform <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>     </a>
<a class="sourceLine" id="cb501-10" title="10">                  <span class="op">+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+</span></a>
<a class="sourceLine" id="cb501-11" title="11">Atom              <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>many plugins</a>
<a class="sourceLine" id="cb501-12" title="12">Editra            <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-13" title="13">Emacs             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-14" title="14">Eric Ide          <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-15" title="15">Geany             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>very limited</a>
<a class="sourceLine" id="cb501-16" title="16">Gedit             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y¹|Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y²|  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>¹with plugin<span class="op">;</span> ²sort of</a>
<a class="sourceLine" id="cb501-17" title="17">Idle              <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-18" title="18">IntelliJ          <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span></a>
<a class="sourceLine" id="cb501-19" title="19">JEdit             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-20" title="20">KDevelop          <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>no <span class="bu">type</span> inference</a>
<a class="sourceLine" id="cb501-21" title="21">Komodo            <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-22" title="22">NetBeans<span class="op">*</span>         <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|*</span>pre<span class="op">-</span>v7<span class="fl">.0</span></a>
<a class="sourceLine" id="cb501-23" title="23">Notepad<span class="op">++</span>         <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y<span class="op">*|</span>Y<span class="op">*|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span><span class="cf">with</span> plugin</a>
<a class="sourceLine" id="cb501-24" title="24">Pfaide            <span class="op">|</span>W <span class="op">|</span>C <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-25" title="25">PIDA              <span class="op">|</span>LW<span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>VIM based</a>
<a class="sourceLine" id="cb501-26" title="26">PTVS              <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y<span class="op">*|</span>  <span class="op">|</span>Y <span class="op">|*</span>WPF bsed</a>
<a class="sourceLine" id="cb501-27" title="27">PyCharm           <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|*</span>JavaScript</a>
<a class="sourceLine" id="cb501-28" title="28">PyDev (Eclipse)   <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-29" title="29">PyScripter        <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-30" title="30">PythonWin         <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-31" title="31">SciTE             <span class="op">|</span>Y <span class="op">|</span>F¹|  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>¹Mac version <span class="kw">is</span></a>
<a class="sourceLine" id="cb501-32" title="32">ScriptDev         <span class="op">|</span>W <span class="op">|</span>C <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>    commercial</a>
<a class="sourceLine" id="cb501-33" title="33">Spyder            <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-34" title="34">Sublime Text      <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>extensible w<span class="op">/</span>Python,</a>
<a class="sourceLine" id="cb501-35" title="35">TextMate          <span class="op">|</span>M <span class="op">|</span>F <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>    <span class="op">*</span>PythonTestRunner</a>
<a class="sourceLine" id="cb501-36" title="36">UliPad            <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-37" title="37">Vim               <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-38" title="38">Visual Studio     <span class="op">|</span>W <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span></a>
<a class="sourceLine" id="cb501-39" title="39">Visual Studio Code<span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>uses plugins</a>
<a class="sourceLine" id="cb501-40" title="40">WingIde           <span class="op">|</span>Y <span class="op">|</span>C <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>support <span class="cf">for</span> C</a>
<a class="sourceLine" id="cb501-41" title="41">Zeus              <span class="op">|</span>W <span class="op">|</span>C <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></a>
<a class="sourceLine" id="cb501-42" title="42">                  <span class="op">+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+</span></a>
<a class="sourceLine" id="cb501-43" title="43">   Cross Platform <span class="op">-</span><span class="st">&#39;  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |     </span></a>
<a class="sourceLine" id="cb501-44" title="44"><span class="st">     Commercial/Free -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Refactoring</span></a>
<a class="sourceLine" id="cb501-45" title="45"><span class="st">   Auto Code Completion -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Integrated DB Support</span></a>
<a class="sourceLine" id="cb501-46" title="46"><span class="st">    Multi-Language Support -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- GUI Designer (Qt, Eric, etc)</span></a>
<a class="sourceLine" id="cb501-47" title="47"><span class="st">  Integrated Python Debugging -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Unit Testing</span></a>
<a class="sourceLine" id="cb501-48" title="48"><span class="st">                    Error Markup -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Code Templates</span></a>
<a class="sourceLine" id="cb501-49" title="49"><span class="st">         Source Control Integration -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Code Folding</span></a>
<a class="sourceLine" id="cb501-50" title="50"><span class="st">                          Smart Indent -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- UML Editing / Viewing</span></a>
<a class="sourceLine" id="cb501-51" title="51"><span class="st">                         Bracket Matching -&#39;</span>  <span class="st">&#39;- Line Numbering</span></a></code></pre></div>
<hr>
<p>Acronyms used:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb502-1" title="1"> L  <span class="op">-</span> Linux</a>
<a class="sourceLine" id="cb502-2" title="2"> W  <span class="op">-</span> Windows</a>
<a class="sourceLine" id="cb502-3" title="3"> M  <span class="op">-</span> Mac</a>
<a class="sourceLine" id="cb502-4" title="4"> C  <span class="op">-</span> Commercial</a>
<a class="sourceLine" id="cb502-5" title="5"> F  <span class="op">-</span> Free</a>
<a class="sourceLine" id="cb502-6" title="6"> CF <span class="op">-</span> Commercial <span class="cf">with</span> Free limited edition</a>
<a class="sourceLine" id="cb502-7" title="7"> ?  <span class="op">-</span> To be confirmed</a></code></pre></div>
<p>I don’t mention basics like syntax highlighting as I expect these by default.</p>
<hr>
<p>This is a just dry list reflecting your feedback and comments, I am not advocating any of these tools. I will keep updating this list as you keep posting your answers.</p>
<p><strong><em>PS. Can you help me to add features of the above editors to the list (like auto-complete, debugging, etc.)?</em></strong></p>
<p>We have a comprehensive wiki page for this question <a href="https://wiki.python.org/moin/IntegratedDevelopmentEnvironments" rel="noreferrer">https://wiki.python.org/moin/IntegratedDevelopmentEnvironments</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/1l3x94P55qoxqYbq5GosWQ7IonZ4vR-4ZyCaImiVmCSk/edit#gid=0&amp;fvid=1960281650" rel="noreferrer" title="Submit edits to the spreadsheet">Submit edits to the spreadsheet</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-remove-a-trailing-newline-score-1623884-in-2019" class="level3">
<h3>59: How can I remove a trailing newline? (score <a href="https://stackoverflow.com/q/275018.html">1623884</a> in 2019)</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>What is the Python equivalent of Perl’s <code>chomp</code> function, which removes the last character of a string if it is a newline?</p>
</section>
<section id="answer-2-score-1715" class="level4">
<h4>Answer 2 (score 1715)</h4>
<p>Try the method <code>rstrip()</code> (see doc <a href="http://docs.python.org/2/library/stdtypes.html#str.rstrip" rel="noreferrer">Python 2</a> and <a href="https://docs.python.org/3/library/stdtypes.html#str.rstrip" rel="noreferrer">Python 3</a>)</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb503-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;test string</span><span class="ch">\n</span><span class="st">&#39;</span>.rstrip()</a>
<a class="sourceLine" id="cb503-2" title="2"><span class="co">&#39;test string&#39;</span></a></code></pre></div>
<p>Python’s <code>rstrip()</code> method strips <em>all</em> kinds of trailing whitespace by default, not just one newline as Perl does with <a href="http://perldoc.perl.org/functions/chomp.html" rel="noreferrer"><code>chomp</code></a>.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb504-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;test string </span><span class="ch">\n</span><span class="st"> </span><span class="ch">\r\n\n\r</span><span class="st"> </span><span class="ch">\n\n</span><span class="st">&#39;</span>.rstrip()</a>
<a class="sourceLine" id="cb504-2" title="2"><span class="co">&#39;test string&#39;</span></a></code></pre></div>
<p>To strip only newlines:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb505-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="st">&#39;test string </span><span class="ch">\n</span><span class="st"> </span><span class="ch">\r\n\n\r</span><span class="st"> </span><span class="ch">\n\n</span><span class="st">&#39;</span>.rstrip(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>)</a>
<a class="sourceLine" id="cb505-2" title="2"><span class="co">&#39;test string </span><span class="ch">\n</span><span class="co"> </span><span class="ch">\r\n\n\r</span><span class="co"> &#39;</span></a></code></pre></div>
<p>There are also the methods <code>lstrip()</code> and <code>strip()</code>:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb506-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> s <span class="op">=</span> <span class="st">&quot;   </span><span class="ch">\n\r\n</span><span class="st">  </span><span class="ch">\n</span><span class="st">  abc   def </span><span class="ch">\n\r\n</span><span class="st">  </span><span class="ch">\n</span><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb506-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> s.strip()</a>
<a class="sourceLine" id="cb506-3" title="3"><span class="co">&#39;abc   def&#39;</span></a>
<a class="sourceLine" id="cb506-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> s.lstrip()</a>
<a class="sourceLine" id="cb506-5" title="5"><span class="co">&#39;abc   def </span><span class="ch">\n\r\n</span><span class="co">  </span><span class="ch">\n</span><span class="co">  &#39;</span></a>
<a class="sourceLine" id="cb506-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> s.rstrip()</a>
<a class="sourceLine" id="cb506-7" title="7"><span class="co">&#39;   </span><span class="ch">\n\r\n</span><span class="co">  </span><span class="ch">\n</span><span class="co">  abc   def&#39;</span></a></code></pre></div>
</section>
<section id="answer-3-score-153" class="level4">
<h4>Answer 3 (score 153)</h4>
<p>And I would say the “pythonic” way to get lines without trailing newline characters is splitlines().</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb507-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> text <span class="op">=</span> <span class="st">&quot;line 1</span><span class="ch">\n</span><span class="st">line 2</span><span class="ch">\r\n</span><span class="st">line 3</span><span class="ch">\n</span><span class="st">line 4&quot;</span></a>
<a class="sourceLine" id="cb507-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> text.splitlines()</a>
<a class="sourceLine" id="cb507-3" title="3">[<span class="st">&#39;line 1&#39;</span>, <span class="st">&#39;line 2&#39;</span>, <span class="st">&#39;line 3&#39;</span>, <span class="st">&#39;line 4&#39;</span>]</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-strings-into-integers-in-python-score-1618410-in-2017" class="level3">
<h3>60: How to convert strings into integers in Python? (score <a href="https://stackoverflow.com/q/642154.html">1618410</a> in 2017)</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<p>I have a tuple of tuples from a MySQL query like this:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb508-1" title="1">T1 <span class="op">=</span> ((<span class="st">&#39;13&#39;</span>, <span class="st">&#39;17&#39;</span>, <span class="st">&#39;18&#39;</span>, <span class="st">&#39;21&#39;</span>, <span class="st">&#39;32&#39;</span>),</a>
<a class="sourceLine" id="cb508-2" title="2">      (<span class="st">&#39;07&#39;</span>, <span class="st">&#39;11&#39;</span>, <span class="st">&#39;13&#39;</span>, <span class="st">&#39;14&#39;</span>, <span class="st">&#39;28&#39;</span>),</a>
<a class="sourceLine" id="cb508-3" title="3">      (<span class="st">&#39;01&#39;</span>, <span class="st">&#39;05&#39;</span>, <span class="st">&#39;06&#39;</span>, <span class="st">&#39;08&#39;</span>, <span class="st">&#39;15&#39;</span>, <span class="st">&#39;16&#39;</span>))</a></code></pre></div>
<p>I’d like to convert all the string elements into integers and put them back into a list of lists:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb509-1" title="1">T2 <span class="op">=</span> [[<span class="dv">13</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">32</span>], [<span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">28</span>], [<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">16</span>]]</a></code></pre></div>
<p>I tried to achieve it with <code>eval</code> but didn’t get any decent result yet.</p>
</section>
<section id="answer-accepted-score-606" class="level4">
<h4>Answer accepted (score 606)</h4>
<p><a href="https://docs.python.org/3/library/functions.html#int" rel="noreferrer"><code>int()</code></a> is the Python standard built-in function to convert a string into an integer value. You call it with a string containing a number as the argument, and it returns the number converted to an integer:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb510-1" title="1"><span class="bu">print</span> (<span class="bu">int</span>(<span class="st">&quot;1&quot;</span>) <span class="op">+</span> <span class="dv">1</span>)</a></code></pre></div>
<p>The above prints <code>2</code>.</p>
<p>If you know the structure of your list, T1 (that it simply contains lists, only one level), you could do this in Python 2:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb511-1" title="1">T2 <span class="op">=</span> [<span class="bu">map</span>(<span class="bu">int</span>, x) <span class="cf">for</span> x <span class="kw">in</span> T1]</a></code></pre></div>
<p>In Python 3:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb512-1" title="1">T2 <span class="op">=</span> [<span class="bu">list</span>(<span class="bu">map</span>(<span class="bu">int</span>, x)) <span class="cf">for</span> x <span class="kw">in</span> T1]</a></code></pre></div>
</section>
<section id="answer-2-score-28" class="level4">
<h4>Answer 2 (score 28)</h4>
<p>You can do this with a list comprehension:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb513-1" title="1">T2 <span class="op">=</span> [[<span class="bu">int</span>(column) <span class="cf">for</span> column <span class="kw">in</span> row] <span class="cf">for</span> row <span class="kw">in</span> T1]</a></code></pre></div>
<p>The inner list comprehension (<code>[int(column) for column in row]</code>) builds a <code>list</code> of <code>int</code>s from a sequence of <code>int</code>-able objects, like decimal strings, in <code>row</code>. The outer list comprehension (<code>[... for row in T1])</code>) builds a list of the results of the inner list comprehension applied to each item in <code>T1</code>.</p>
<p>The code snippet will fail if any of the rows contain objects that can’t be converted by <code>int</code>. You’ll need a smarter function if you want to process rows containing non-decimal strings.</p>
<p>If you know the structure of the rows, you can replace the inner list comprehension with a call to a function of the row. Eg.</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb514-1" title="1">T2 <span class="op">=</span> [parse_a_row_of_T1(row) <span class="cf">for</span> row <span class="kw">in</span> T1]</a></code></pre></div>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>I would rather prefer using only comprehension lists:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb515-1" title="1">[[<span class="bu">int</span>(y) <span class="cf">for</span> y <span class="kw">in</span> x] <span class="cf">for</span> x <span class="kw">in</span> T1]</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-there-a-simple-way-to-delete-a-list-element-by-value-score-1596938-in-2019" class="level3">
<h3>61: Is there a simple way to delete a list element by value? (score <a href="https://stackoverflow.com/q/2793324.html">1596938</a> in 2019)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<div class="sourceCode" id="cb516"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb516-1" title="1">a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb516-2" title="2">b <span class="op">=</span> a.index(<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb516-3" title="3"></a>
<a class="sourceLine" id="cb516-4" title="4"><span class="kw">del</span> a[b]</a>
<a class="sourceLine" id="cb516-5" title="5"><span class="bu">print</span> a</a></code></pre></div>
<p>The above shows the following error:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb517-1" title="1">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb517-2" title="2">  File <span class="st">&quot;D:\zjm_code</span><span class="ch">\a</span><span class="st">.py&quot;</span>, line <span class="dv">6</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb517-3" title="3">    b <span class="op">=</span> a.index(<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb517-4" title="4"><span class="pp">ValueError</span>: <span class="bu">list</span>.index(x): x <span class="kw">not</span> <span class="kw">in</span> <span class="bu">list</span></a></code></pre></div>
<p>So I have to do this:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb518-1" title="1">a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb518-2" title="2"></a>
<a class="sourceLine" id="cb518-3" title="3"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb518-4" title="4">    b <span class="op">=</span> a.index(<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb518-5" title="5">    <span class="kw">del</span> a[b]</a>
<a class="sourceLine" id="cb518-6" title="6"><span class="cf">except</span>:</a>
<a class="sourceLine" id="cb518-7" title="7">    <span class="cf">pass</span></a>
<a class="sourceLine" id="cb518-8" title="8"></a>
<a class="sourceLine" id="cb518-9" title="9"><span class="bu">print</span> a</a></code></pre></div>
<p>But is there not a simpler way to do this?</p>
</section>
<section id="answer-accepted-score-1455" class="level4">
<h4>Answer accepted (score 1455)</h4>
<p>To remove an element’s first occurrence in a list, simply use <code>list.remove</code>:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb519-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</a>
<a class="sourceLine" id="cb519-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a.remove(<span class="st">&#39;b&#39;</span>)</a>
<a class="sourceLine" id="cb519-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> a</a>
<a class="sourceLine" id="cb519-4" title="4">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</a></code></pre></div>
<p>Mind that it does not remove all occurrences of your element. Use a list comprehension for that.</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb520-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">70</span>, <span class="dv">20</span>]</a>
<a class="sourceLine" id="cb520-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> a <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> a <span class="cf">if</span> x <span class="op">!=</span> <span class="dv">20</span>]</a>
<a class="sourceLine" id="cb520-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="bu">print</span> a</a>
<a class="sourceLine" id="cb520-4" title="4">[<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">70</span>]</a></code></pre></div>
</section>
<section id="answer-2-score-171" class="level4">
<h4>Answer 2 (score 171)</h4>
<p>Usually Python will throw an Exception if you tell it to do something it can’t so you’ll have to do either:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb521-1" title="1"><span class="cf">if</span> c <span class="kw">in</span> a:</a>
<a class="sourceLine" id="cb521-2" title="2">    a.remove(c)</a></code></pre></div>
<p>or:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb522-1" title="1"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb522-2" title="2">    a.remove(c)</a>
<a class="sourceLine" id="cb522-3" title="3"><span class="cf">except</span> <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb522-4" title="4">    <span class="cf">pass</span></a></code></pre></div>
<p>An Exception isn’t necessarily a bad thing as long as it’s one you’re expecting and handle properly.</p>
</section>
<section id="answer-3-score-76" class="level4">
<h4>Answer 3 (score 76)</h4>
<p>You can do</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb523-1" title="1">a<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb523-2" title="2"><span class="cf">if</span> <span class="dv">6</span> <span class="kw">in</span> a:</a>
<a class="sourceLine" id="cb523-3" title="3">    a.remove(<span class="dv">6</span>)</a></code></pre></div>
<p>but above need to search 6 in list a 2 times, so try except would be faster</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb524-1" title="1"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb524-2" title="2">    a.remove(<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb524-3" title="3"><span class="cf">except</span>:</a>
<a class="sourceLine" id="cb524-4" title="4">    <span class="cf">pass</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="python-find-in-list-score-1578399-in-2018" class="level3">
<h3>62: Python: Find in list (score <a href="https://stackoverflow.com/q/9542738.html">1578399</a> in 2018)</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>I have come across this:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb525-1" title="1">item <span class="op">=</span> someSortOfSelection()</a>
<a class="sourceLine" id="cb525-2" title="2"><span class="cf">if</span> item <span class="kw">in</span> myList:</a>
<a class="sourceLine" id="cb525-3" title="3">    doMySpecialFunction(item)</a></code></pre></div>
<p>but sometimes it does not work with all my items, as if they weren’t recognized in the list (when it’s a list of string).</p>
<p>Is this the most ‘pythonic’ way of finding an item in a list: <code>if x in l:</code>?</p>
</section>
<section id="answer-accepted-score-1039" class="level4">
<h4>Answer accepted (score 1039)</h4>
<p>As for your first question: that code is perfectly fine and should work if <code>item</code> equals one of the elements inside <code>myList</code>. Maybe you try to find a string that does not <em>exactly</em> match one of the items or maybe you are using a float value which suffers from inaccuracy.</p>
<p>As for your second question: There’s actually several possible ways if “finding” things in lists.</p>
<h5>
Checking if something is inside
</h3>
<p>This is the use case you describe: Checking whether something is inside a list or not. As you know, you can use the <code>in</code> operator for that:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb526-1" title="1"><span class="dv">3</span> <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>] <span class="co"># =&amp;gt; True</span></a></code></pre></div>
<h5>
Filtering a collection
</h3>
<p>That is, finding all elements in a sequence that meet a certain condition. You can use list comprehension or generator expressions for that:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb527-1" title="1">matches <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> fulfills_some_condition(x)]</a>
<a class="sourceLine" id="cb527-2" title="2">matches <span class="op">=</span> (x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> x <span class="op">&amp;</span>gt<span class="op">;</span> <span class="dv">6</span>)</a></code></pre></div>
<p>The latter will return a <em>generator</em> which you can imagine as a sort of lazy list that will only be built as soon as you iterate through it. By the way, the first one is exactly equivalent to</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb528-1" title="1">matches <span class="op">=</span> <span class="bu">filter</span>(fulfills_some_condition, lst)</a></code></pre></div>
<p>in Python 2. Here you can see higher-order functions at work. In Python 3, <code>filter</code> doesn’t return a list, but a generator-like object.</p>
<h5>
Finding the first occurrence
</h3>
<p>If you only want the first thing that matches a condition (but you don’t know what it is yet), it’s fine to use a for loop (possibly using the <code>else</code> clause as well, which is not really well-known). You can also use</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb529-1" title="1"><span class="bu">next</span>(x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> ...)</a></code></pre></div>
<p>which will return the first match or raise a <code>StopIteration</code> if none is found. Alternatively, you can use</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb530-1" title="1"><span class="bu">next</span>((x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> ...), [default value])</a></code></pre></div>
<h5>
Finding the location of an item
</h3>
<p>For lists, there’s also the <code>index</code> method that can sometimes be useful if you want to know <em>where</em> a certain element is in the list:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb531-1" title="1">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].index(<span class="dv">2</span>) <span class="co"># =&amp;gt; 1</span></a>
<a class="sourceLine" id="cb531-2" title="2">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].index(<span class="dv">4</span>) <span class="co"># =&amp;gt; ValueError</span></a></code></pre></div>
<p>However, note that if you have duplicates, <code>.index</code> always returns the lowest index:……</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb532-1" title="1">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>].index(<span class="dv">2</span>) <span class="co"># =&amp;gt; 1</span></a></code></pre></div>
<p>If there are duplicates and you want all the indexes then you can use <code>enumerate()</code> instead:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb533-1" title="1">[i <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>]) <span class="cf">if</span> x<span class="op">==</span><span class="dv">2</span>] <span class="co"># =&amp;gt; [1, 3]</span></a></code></pre></div>
</section>
<section id="answer-2-score-168" class="level4">
<h4>Answer 2 (score 168)</h4>
<p>If you want to find one element or <code>None</code> use default in <code>next</code>, it won’t raise <code>StopIteration</code> if the item was not found in the list:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb534-1" title="1">first_or_default <span class="op">=</span> <span class="bu">next</span>((x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> ...), <span class="va">None</span>)</a></code></pre></div>
</section>
<section id="answer-3-score-18" class="level4">
<h4>Answer 3 (score 18)</h4>
<p>While the answer from Niklas B. is pretty comprehensive, when we want to find an item in a list it is sometimes useful to get its index:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb535-1" title="1"><span class="bu">next</span>((i <span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(lst) <span class="cf">if</span> [condition on x]), [default value])</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="manually-raising-throwing-an-exception-in-python-score-1572164-in-2019" class="level3">
<h3>63: Manually raising (throwing) an exception in Python (score <a href="https://stackoverflow.com/q/2052390.html">1572164</a> in 2019)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>How can I raise an exception in Python so that it can later be caught via an <code>except</code> block?</p>
</section>
<section id="answer-accepted-score-2620" class="level4">
<h4>Answer accepted (score 2620)</h4>
<blockquote>
<h5>
How do I manually throw/raise an exception in Python?
</h2>
</blockquote>
<p><a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" rel="noreferrer">Use the most specific Exception constructor that semantically fits your issue</a>.</p>
<p>Be specific in your message, e.g.:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb536-1" title="1"><span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;A very specific bad thing happened.&#39;</span>)</a></code></pre></div>
<h5>
Don’t raise generic exceptions
</h2>
<p>Avoid raising a generic Exception. To catch it, you’ll have to catch all other more specific exceptions that subclass it.</p>
<h5>
Problem 1: Hiding bugs
</h3>
<div class="sourceCode" id="cb537"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb537-1" title="1"><span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;I know Python!&#39;</span>) <span class="co"># Don&#39;t! If you catch, likely to hide bugs.</span></a></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb538-1" title="1"><span class="kw">def</span> demo_bad_catch():</a>
<a class="sourceLine" id="cb538-2" title="2">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb538-3" title="3">        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;Represents a hidden bug, do not catch this&#39;</span>)</a>
<a class="sourceLine" id="cb538-4" title="4">        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;This is the exception you expect to handle&#39;</span>)</a>
<a class="sourceLine" id="cb538-5" title="5">    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> error:</a>
<a class="sourceLine" id="cb538-6" title="6">        <span class="bu">print</span>(<span class="st">&#39;Caught this error: &#39;</span> <span class="op">+</span> <span class="bu">repr</span>(error))</a>
<a class="sourceLine" id="cb538-7" title="7"></a>
<a class="sourceLine" id="cb538-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> demo_bad_catch()</a>
<a class="sourceLine" id="cb538-9" title="9">Caught this error: <span class="pp">ValueError</span>(<span class="st">&#39;Represents a hidden bug, do not catch this&#39;</span>,)</a></code></pre></div>
<h5>
Problem 2: Won’t catch
</h3>
<p>and more specific catches won’t catch the general exception:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb539-1" title="1"><span class="kw">def</span> demo_no_catch():</a>
<a class="sourceLine" id="cb539-2" title="2">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb539-3" title="3">        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;general exceptions not caught by specific handling&#39;</span>)</a>
<a class="sourceLine" id="cb539-4" title="4">    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</a>
<a class="sourceLine" id="cb539-5" title="5">        <span class="bu">print</span>(<span class="st">&#39;we will not catch exception: Exception&#39;</span>)</a>
<a class="sourceLine" id="cb539-6" title="6"></a>
<a class="sourceLine" id="cb539-7" title="7"></a>
<a class="sourceLine" id="cb539-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> demo_no_catch()</a>
<a class="sourceLine" id="cb539-9" title="9">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb539-10" title="10">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb539-11" title="11">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">3</span>, <span class="kw">in</span> demo_no_catch</a>
<a class="sourceLine" id="cb539-12" title="12"><span class="pp">Exception</span>: general exceptions <span class="kw">not</span> caught by specific handling</a></code></pre></div>
<h5>
Best Practices: <code>raise</code> statement
</h2>
<p><a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" rel="noreferrer">Instead, use the most specific Exception constructor that semantically fits your issue</a>.</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb540-1" title="1"><span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;A very specific bad thing happened&#39;</span>)</a></code></pre></div>
<p>which also handily allows an arbitrary number of arguments to be passed to the constructor:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb541-1" title="1"><span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;A very specific bad thing happened&#39;</span>, <span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>) </a></code></pre></div>
<p>These arguments are accessed by the <code>args</code> attribute on the Exception object. For example:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb542-1" title="1"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb542-2" title="2">    some_code_that_may_raise_our_value_error()</a>
<a class="sourceLine" id="cb542-3" title="3"><span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> err:</a>
<a class="sourceLine" id="cb542-4" title="4">    <span class="bu">print</span>(err.args)</a></code></pre></div>
<p>prints</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb543-1" title="1">(<span class="st">&#39;message&#39;</span>, <span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>)    </a></code></pre></div>
<p>In Python 2.5, an actual <code>message</code> attribute was added to BaseException in favor of encouraging users to subclass Exceptions and stop using <code>args</code>, but <a href="http://www.python.org/dev/peps/pep-0352/#retracted-ideas" rel="noreferrer">the introduction of <code>message</code> and the original deprecation of args has been retracted</a>.</p>
<h5>
Best Practices: <code>except</code> clause
</h2>
<p>When inside an except clause, you might want to, for example, log that a specific type of error happened, and then re-raise. The best way to do this while preserving the stack trace is to use a bare raise statement. For example:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb544-1" title="1">logger <span class="op">=</span> logging.getLogger(<span class="va">__name__</span>)</a>
<a class="sourceLine" id="cb544-2" title="2"></a>
<a class="sourceLine" id="cb544-3" title="3"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb544-4" title="4">    do_something_in_app_that_breaks_easily()</a>
<a class="sourceLine" id="cb544-5" title="5"><span class="cf">except</span> AppError <span class="im">as</span> error:</a>
<a class="sourceLine" id="cb544-6" title="6">    logger.error(error)</a>
<a class="sourceLine" id="cb544-7" title="7">    <span class="cf">raise</span>                 <span class="co"># just this!</span></a>
<a class="sourceLine" id="cb544-8" title="8">    <span class="co"># raise AppError      # Don&#39;t do this, you&#39;ll lose the stack trace!</span></a></code></pre></div>
<h5>
Don’t modify your errors… but if you insist.
</h3>
<p>You can preserve the stacktrace (and error value) with <code>sys.exc_info()</code>, but <strong>this is way more error prone</strong> and <strong>has compatibility problems between Python 2 and 3</strong>, prefer to use a bare <code>raise</code> to re-raise.</p>
<p>To explain - the <code>sys.exc_info()</code> returns the type, value, and traceback.</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb545-1" title="1"><span class="bu">type</span>, value, traceback <span class="op">=</span> sys.exc_info()</a></code></pre></div>
<p>This is the syntax in Python 2 - note this is not compatible with Python 3:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb546-1" title="1">    <span class="cf">raise</span> AppError, error, sys.exc_info()[<span class="dv">2</span>] <span class="co"># avoid this.</span></a>
<a class="sourceLine" id="cb546-2" title="2">    <span class="co"># Equivalently, as error *is* the second object:</span></a>
<a class="sourceLine" id="cb546-3" title="3">    <span class="cf">raise</span> sys.exc_info()[<span class="dv">0</span>], sys.exc_info()[<span class="dv">1</span>], sys.exc_info()[<span class="dv">2</span>]</a></code></pre></div>
<p>If you want to, you can modify what happens with your new raise - e.g. setting new args for the instance:</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb547-1" title="1"><span class="kw">def</span> error():</a>
<a class="sourceLine" id="cb547-2" title="2">    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;oops!&#39;</span>)</a>
<a class="sourceLine" id="cb547-3" title="3"></a>
<a class="sourceLine" id="cb547-4" title="4"><span class="kw">def</span> catch_error_modify_message():</a>
<a class="sourceLine" id="cb547-5" title="5">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb547-6" title="6">        error()</a>
<a class="sourceLine" id="cb547-7" title="7">    <span class="cf">except</span> <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb547-8" title="8">        error_type, error_instance, traceback <span class="op">=</span> sys.exc_info()</a>
<a class="sourceLine" id="cb547-9" title="9">        error_instance.args <span class="op">=</span> (error_instance.args[<span class="dv">0</span>] <span class="op">+</span> <span class="st">&#39; &amp;lt;modification&amp;gt;&#39;</span>,)</a>
<a class="sourceLine" id="cb547-10" title="10">        <span class="cf">raise</span> error_type, error_instance, traceback</a></code></pre></div>
<p>And we have preserved the whole traceback while modifying the args. Note that this is <strong>not a best practice</strong> and it is <strong>invalid syntax</strong> in Python 3 (making keeping compatibility much harder to work around).</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb548-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> catch_error_modify_message()</a>
<a class="sourceLine" id="cb548-2" title="2">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb548-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb548-4" title="4">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">3</span>, <span class="kw">in</span> catch_error_modify_message</a>
<a class="sourceLine" id="cb548-5" title="5">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">2</span>, <span class="kw">in</span> error</a>
<a class="sourceLine" id="cb548-6" title="6"><span class="pp">ValueError</span>: oops<span class="op">!</span> <span class="op">&amp;</span>lt<span class="op">;</span>modification<span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<p>In <a href="https://docs.python.org/3/reference/simple_stmts.html#the-raise-statement" rel="noreferrer">Python 3</a>:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb549-1" title="1">    <span class="cf">raise</span> error.with_traceback(sys.exc_info()[<span class="dv">2</span>])</a></code></pre></div>
<p>Again: avoid manually manipulating tracebacks. It’s <a href="https://docs.python.org/2/reference/simple_stmts.html#the-raise-statement" rel="noreferrer">less efficient</a> and more error prone. And if you’re using threading and <code>sys.exc_info</code> you may even get the wrong traceback (especially if you’re using exception handling for control flow - which I’d personally tend to avoid.)</p>
<h5>
Python 3, Exception chaining
</h3>
<p>In Python 3, you can chain Exceptions, which preserve tracebacks:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb550-1" title="1">    <span class="cf">raise</span> <span class="pp">RuntimeError</span>(<span class="st">&#39;specific message&#39;</span>) <span class="im">from</span> error</a></code></pre></div>
<p>Be aware:</p>
<ul>
<li>
this <em>does</em> allow changing the error type raised, and
</li>
<li>
this is <em>not</em> compatible with Python 2.
</li>
</ul>
<h5>
Deprecated Methods:
</h3>
<p>These can easily hide and even get into production code. You want to raise an exception, and doing them will raise an exception, <strong>but not the one intended!</strong></p>
<p><a href="http://www.python.org/dev/peps/pep-3109/" rel="noreferrer">Valid in Python 2, but not in Python 3</a> is the following:</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb551-1" title="1"><span class="cf">raise</span> <span class="pp">ValueError</span>, <span class="st">&#39;message&#39;</span> <span class="co"># Don&#39;t do this, it&#39;s deprecated!</span></a></code></pre></div>
<p>Only <a href="https://docs.python.org/2/whatsnew/2.5.html#pep-352-exceptions-as-new-style-classes" rel="noreferrer">valid in much older versions of Python</a> (2.4 and lower), you may still see people raising strings:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb552-1" title="1"><span class="cf">raise</span> <span class="st">&#39;message&#39;</span> <span class="co"># really really wrong. don&#39;t do this.</span></a></code></pre></div>
<p>In all modern versions, this will actually raise a TypeError, because you’re not raising a BaseException type. If you’re not checking for the right exception and don’t have a reviewer that’s aware of the issue, it could get into production.</p>
<h5>
Example Usage
</h2>
<p>I raise Exceptions to warn consumers of my API if they’re using it incorrectly:</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb553-1" title="1"><span class="kw">def</span> api_func(foo):</a>
<a class="sourceLine" id="cb553-2" title="2">    <span class="co">&#39;&#39;&#39;foo should be either &#39;baz&#39; or &#39;bar&#39;. returns something very useful.&#39;&#39;&#39;</span></a>
<a class="sourceLine" id="cb553-3" title="3">    <span class="cf">if</span> foo <span class="kw">not</span> <span class="kw">in</span> _ALLOWED_ARGS:</a>
<a class="sourceLine" id="cb553-4" title="4">        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;</span><span class="sc">{foo}</span><span class="st"> wrong, use &quot;baz&quot; or &quot;bar&quot;&#39;</span>.<span class="bu">format</span>(foo<span class="op">=</span><span class="bu">repr</span>(foo)))</a></code></pre></div>
<h5>
Create your own error types when apropos
</h2>
<blockquote>
<strong>“I want to make an error on purpose, so that it would go into the except”</strong>
</blockquote>
<p>You can create your own error types, if you want to indicate something specific is wrong with your application, just subclass the appropriate point in the exception hierarchy:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb554-1" title="1"><span class="kw">class</span> MyAppLookupError(<span class="pp">LookupError</span>):</a>
<a class="sourceLine" id="cb554-2" title="2">    <span class="co">&#39;&#39;&#39;raise this when there&#39;s a lookup error for my app&#39;&#39;&#39;</span></a></code></pre></div>
<p>and usage:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb555-1" title="1"><span class="cf">if</span> important_key <span class="kw">not</span> <span class="kw">in</span> resource_dict <span class="kw">and</span> <span class="kw">not</span> ok_to_be_missing:</a>
<a class="sourceLine" id="cb555-2" title="2">    <span class="cf">raise</span> MyAppLookupError(<span class="st">&#39;resource is missing, and that is not ok.&#39;</span>)</a></code></pre></div>
</section>
<section id="answer-2-score-529" class="level4">
<h4>Answer 2 (score 529)</h4>
<blockquote>
<strong>DON’T DO THIS</strong>. Raising a bare <code>Exception</code> is absolutely <strong>not</strong> the right thing to do; see <a href="https://stackoverflow.com/a/24065533">Aaron Hall’s excellent answer</a> instead.
</blockquote>
<p>Can’t get much more pythonic than this:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb556-1" title="1"><span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&quot;I know python!&quot;</span>)</a></code></pre></div>
<p>See <a href="http://docs.python.org/reference/simple_stmts.html#the-raise-statement" rel="nofollow noreferrer">the raise statement docs</a> for python if you’d like more info.</p>
</section>
<section id="answer-3-score-41" class="level4">
<h4>Answer 3 (score 41)</h4>
<p>In Python3 there are 4 different syntaxes for rasing exceptions:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb557-1" title="1"><span class="fl">1.</span> <span class="cf">raise</span> exception </a>
<a class="sourceLine" id="cb557-2" title="2"><span class="fl">2.</span> <span class="cf">raise</span> exception (args) </a>
<a class="sourceLine" id="cb557-3" title="3"><span class="fl">3.</span> <span class="cf">raise</span></a>
<a class="sourceLine" id="cb557-4" title="4"><span class="fl">4.</span> <span class="cf">raise</span> exception (args) <span class="im">from</span> original_exception</a></code></pre></div>
<blockquote>
<strong>1. raise exception vs. 2. raise exception (args)</strong>
</blockquote>
<p>If you use <code>raise exception (args)</code> to raise an exception then the <code>args</code> will be printed when you print the exception object - as shown in the example below.</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb558-1" title="1">  <span class="co">#raise exception (args)</span></a>
<a class="sourceLine" id="cb558-2" title="2">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb558-3" title="3">        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;I have raised an Exception&quot;</span>)</a>
<a class="sourceLine" id="cb558-4" title="4">    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> exp:</a>
<a class="sourceLine" id="cb558-5" title="5">        <span class="bu">print</span> (<span class="st">&quot;Error&quot;</span>, exp)     <span class="co"># Output -&amp;gt; Error I have raised an Exception </span></a>
<a class="sourceLine" id="cb558-6" title="6"></a>
<a class="sourceLine" id="cb558-7" title="7"></a>
<a class="sourceLine" id="cb558-8" title="8"></a>
<a class="sourceLine" id="cb558-9" title="9">  <span class="co">#raise execption </span></a>
<a class="sourceLine" id="cb558-10" title="10">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb558-11" title="11">        <span class="cf">raise</span> <span class="pp">ValueError</span></a>
<a class="sourceLine" id="cb558-12" title="12">    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> exp:</a>
<a class="sourceLine" id="cb558-13" title="13">        <span class="bu">print</span> (<span class="st">&quot;Error&quot;</span>, exp)     <span class="co"># Output -&amp;gt; Error </span></a></code></pre></div>
<blockquote>
<strong>3.raise</strong>
</blockquote>
<p>
<code>raise</code> statement without any arguments re-raises the last exception. This is useful if you need to perform some actions after catching the exception and then want to re-raise it. But if there was no exception before, <code>raise</code> statement raises <code>TypeError</code> Exception.
</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb559-1" title="1"><span class="kw">def</span> somefunction():</a>
<a class="sourceLine" id="cb559-2" title="2">    <span class="bu">print</span>(<span class="st">&quot;some cleaning&quot;</span>)</a>
<a class="sourceLine" id="cb559-3" title="3"></a>
<a class="sourceLine" id="cb559-4" title="4">a<span class="op">=</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb559-5" title="5">b<span class="op">=</span><span class="dv">0</span> </a>
<a class="sourceLine" id="cb559-6" title="6">result<span class="op">=</span><span class="va">None</span></a>
<a class="sourceLine" id="cb559-7" title="7"></a>
<a class="sourceLine" id="cb559-8" title="8"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb559-9" title="9">    result<span class="op">=</span>a<span class="op">/</span>b</a>
<a class="sourceLine" id="cb559-10" title="10">    <span class="bu">print</span>(result)</a>
<a class="sourceLine" id="cb559-11" title="11"></a>
<a class="sourceLine" id="cb559-12" title="12"><span class="cf">except</span> <span class="pp">Exception</span>:            <span class="co">#Output -&amp;gt;</span></a>
<a class="sourceLine" id="cb559-13" title="13">    somefunction()           <span class="co">#some cleaning</span></a>
<a class="sourceLine" id="cb559-14" title="14">    <span class="cf">raise</span>                    <span class="co">#Traceback (most recent call last):</span></a>
<a class="sourceLine" id="cb559-15" title="15">                             <span class="co">#File &quot;python&quot;, line 8, in &amp;lt;module&amp;gt;</span></a>
<a class="sourceLine" id="cb559-16" title="16">                             <span class="co">#ZeroDivisionError: division by zero</span></a></code></pre></div>
<blockquote>
<strong>4. raise exception (args) from original_exception</strong>
</blockquote>
<p>This statement is used to create exception chaining in which an exception that is raised in response to another exception can contain the details of the original exception - as shown in the example below.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb560-1" title="1"><span class="kw">class</span> MyCustomException(<span class="pp">Exception</span>):</a>
<a class="sourceLine" id="cb560-2" title="2"><span class="cf">pass</span></a>
<a class="sourceLine" id="cb560-3" title="3"></a>
<a class="sourceLine" id="cb560-4" title="4">a<span class="op">=</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb560-5" title="5">b<span class="op">=</span><span class="dv">0</span> </a>
<a class="sourceLine" id="cb560-6" title="6">reuslt<span class="op">=</span><span class="va">None</span></a>
<a class="sourceLine" id="cb560-7" title="7"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb560-8" title="8">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb560-9" title="9">        result<span class="op">=</span>a<span class="op">/</span>b</a>
<a class="sourceLine" id="cb560-10" title="10"></a>
<a class="sourceLine" id="cb560-11" title="11">    <span class="cf">except</span> <span class="pp">ZeroDivisionError</span> <span class="im">as</span> exp:</a>
<a class="sourceLine" id="cb560-12" title="12">        <span class="bu">print</span>(<span class="st">&quot;ZeroDivisionError -- &quot;</span>,exp)</a>
<a class="sourceLine" id="cb560-13" title="13">        <span class="cf">raise</span> MyCustomException(<span class="st">&quot;Zero Division &quot;</span>) <span class="im">from</span> exp</a>
<a class="sourceLine" id="cb560-14" title="14"></a>
<a class="sourceLine" id="cb560-15" title="15"><span class="cf">except</span> MyCustomException <span class="im">as</span> exp:</a>
<a class="sourceLine" id="cb560-16" title="16">        <span class="bu">print</span>(<span class="st">&quot;MyException&quot;</span>,exp)</a>
<a class="sourceLine" id="cb560-17" title="17">        <span class="bu">print</span>(exp.__cause__)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb561"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb561-1" title="1"><span class="pp">ZeroDivisionError</span> <span class="op">--</span>  division by zero</a>
<a class="sourceLine" id="cb561-2" title="2">MyException Zero Division </a>
<a class="sourceLine" id="cb561-3" title="3">division by zero</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-access-environment-variable-values-score-1565338-in-2019" class="level3">
<h3>64: How to access environment variable values? (score <a href="https://stackoverflow.com/q/4906977.html">1565338</a> in 2019)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>I set an environment variable that I want to access in my Python application. How do I get this value?</p>
</section>
<section id="answer-accepted-score-2745" class="level4">
<h4>Answer accepted (score 2745)</h4>
<p>Environment variables are accessed through <a href="https://docs.python.org/library/os.html#os.environ" rel="noreferrer">os.environ</a></p>
<div class="sourceCode" id="cb562"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb562-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb562-2" title="2"><span class="bu">print</span>(os.environ[<span class="st">&#39;HOME&#39;</span>])</a></code></pre></div>
<p>Or you can see a list of all the environment variables using:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb563-1" title="1">os.environ</a></code></pre></div>
<p>As sometimes you might need to see a complete list!</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb564-1" title="1"><span class="co"># using get will return `None` if a key is not present rather than raise a `KeyError`</span></a>
<a class="sourceLine" id="cb564-2" title="2"><span class="bu">print</span>(os.environ.get(<span class="st">&#39;KEY_THAT_MIGHT_EXIST&#39;</span>))</a>
<a class="sourceLine" id="cb564-3" title="3"></a>
<a class="sourceLine" id="cb564-4" title="4"><span class="co"># os.getenv is equivalent, and can also give a default value instead of `None`</span></a>
<a class="sourceLine" id="cb564-5" title="5"><span class="bu">print</span>(os.getenv(<span class="st">&#39;KEY_THAT_MIGHT_EXIST&#39;</span>, default_value))</a></code></pre></div>
<p><a href="https://docs.python.org/install/index.html#how-installation-works" rel="noreferrer">Python default installation</a> on Windows is <code>C:\Python</code>. If you want to find out while running python you can do:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb565-1" title="1"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb565-2" title="2"><span class="bu">print</span>(sys.prefix)</a></code></pre></div>
</section>
<section id="answer-2-score-209" class="level4">
<h4>Answer 2 (score 209)</h4>
<p>To check if the key exists (returns <code>True</code> or <code>False</code>)</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb566-1" title="1"><span class="co">&#39;HOME&#39;</span> <span class="kw">in</span> os.environ</a></code></pre></div>
<p>You can also use <code>get()</code> when printing the key; useful if you want to use a default.</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb567-1" title="1"><span class="bu">print</span>(os.environ.get(<span class="st">&#39;HOME&#39;</span>, <span class="st">&#39;/home/username/&#39;</span>))</a></code></pre></div>
<p>where <code>/home/username/</code> is the default</p>
</section>
<section id="answer-3-score-48" class="level4">
<h4>Answer 3 (score 48)</h4>
<p>The original question (first part) was “how to check environment variables in Python.”</p>
<p>Here’s how to check if $FOO is set:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb568-1" title="1"><span class="cf">try</span>:  </a>
<a class="sourceLine" id="cb568-2" title="2">   os.environ[<span class="st">&quot;FOO&quot;</span>]</a>
<a class="sourceLine" id="cb568-3" title="3"><span class="cf">except</span> <span class="pp">KeyError</span>: </a>
<a class="sourceLine" id="cb568-4" title="4">   <span class="bu">print</span> <span class="st">&quot;Please set the environment variable FOO&quot;</span></a>
<a class="sourceLine" id="cb568-5" title="5">   sys.exit(<span class="dv">1</span>)</a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="understanding-python-super-with-init-methods-score-1561073-in-2018" class="level3">
<h3>65: Understanding Python super() with <strong>init</strong>() methods (score <a href="https://stackoverflow.com/q/576169.html">1561073</a> in 2018)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>I’m trying to understand the use of <code>super()</code>. From the looks of it, both child classes can be created, just fine.</p>
<p>I’m curious to know about the actual difference between the following 2 child classes.</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb569-1" title="1"><span class="kw">class</span> Base(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb569-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb569-3" title="3">        <span class="bu">print</span> <span class="st">&quot;Base created&quot;</span></a>
<a class="sourceLine" id="cb569-4" title="4"></a>
<a class="sourceLine" id="cb569-5" title="5"><span class="kw">class</span> ChildA(Base):</a>
<a class="sourceLine" id="cb569-6" title="6">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb569-7" title="7">        Base.<span class="fu">__init__</span>(<span class="va">self</span>)</a>
<a class="sourceLine" id="cb569-8" title="8"></a>
<a class="sourceLine" id="cb569-9" title="9"><span class="kw">class</span> ChildB(Base):</a>
<a class="sourceLine" id="cb569-10" title="10">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb569-11" title="11">        <span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</a>
<a class="sourceLine" id="cb569-12" title="12"></a>
<a class="sourceLine" id="cb569-13" title="13">ChildA() </a>
<a class="sourceLine" id="cb569-14" title="14">ChildB()</a></code></pre></div>
</section>
<section id="answer-accepted-score-1703" class="level4">
<h4>Answer accepted (score 1703)</h4>
<p><code>super()</code> lets you avoid referring to the base class explicitly, which can be nice. But the main advantage comes with multiple inheritance, where all sorts of <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=236275" rel="noreferrer">fun stuff</a> can happen. See the <a href="https://docs.python.org/2/library/functions.html#super" rel="noreferrer">standard docs on super</a> if you haven’t already.</p>
<p>Note that <a href="https://docs.python.org/3/library/functions.html#super" rel="noreferrer">the syntax changed in Python 3.0</a>: you can just say <code>super().__init__()</code> instead of <code>super(ChildB, self).__init__()</code> which IMO is quite a bit nicer. The standard docs also refer to a <a href="https://rhettinger.wordpress.com/2011/05/26/super-considered-super/" rel="noreferrer">guide to using super()</a> which is quite explanatory.</p>
</section>
<section id="answer-2-score-644" class="level4">
<h4>Answer 2 (score 644)</h4>
<blockquote>
<h5>
I’m trying to understand <code>super()</code>
</h2>
</blockquote>
<p>The reason we use <code>super</code> is so that child classes that may be using cooperative multiple inheritance will call the correct next parent class function in the Method Resolution Order (MRO).</p>
<p>In Python 3, we can call it like this:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb570-1" title="1"><span class="kw">class</span> ChildB(Base):</a>
<a class="sourceLine" id="cb570-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb570-3" title="3">        <span class="bu">super</span>().<span class="fu">__init__</span>() </a></code></pre></div>
<p>In Python 2, we are required to use it like this:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb571-1" title="1"><span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</a></code></pre></div>
<p>Without super, you are limited in your ability to use multiple inheritance:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb572-1" title="1">Base.<span class="fu">__init__</span>(<span class="va">self</span>) <span class="co"># Avoid this.</span></a></code></pre></div>
<p>I further explain below.</p>
<blockquote>
<h5>
“What difference is there actually in this code?:”
</h2>
</blockquote>
<div class="sourceCode" id="cb573"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb573-1" title="1"><span class="kw">class</span> ChildA(Base):</a>
<a class="sourceLine" id="cb573-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb573-3" title="3">        Base.<span class="fu">__init__</span>(<span class="va">self</span>)</a>
<a class="sourceLine" id="cb573-4" title="4"></a>
<a class="sourceLine" id="cb573-5" title="5"><span class="kw">class</span> ChildB(Base):</a>
<a class="sourceLine" id="cb573-6" title="6">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb573-7" title="7">        <span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</a>
<a class="sourceLine" id="cb573-8" title="8">        <span class="co"># super().__init__() # you can call super like this in Python 3!</span></a></code></pre></div>
<p>The primary difference in this code is that you get a layer of indirection in the <code>__init__</code> with <code>super</code>, which uses the current class to determine the next class’s <code>__init__</code> to look up in the MRO.</p>
<p>I illustrate this difference in an answer at the <a href="https://stackoverflow.com/a/33469090/541136">canonical question, How to use ‘super’ in Python?</a>, which demonstrates <strong>dependency injection</strong> and <strong>cooperative multiple inheritance</strong>.</p>
<h5>
If Python didn’t have <code>super</code>
</h2>
<p>Here’s code that’s actually closely equivalent to <code>super</code> (how it’s implemented in C, minus some checking and fallback behavior, and translated to Python):</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb574-1" title="1"><span class="kw">class</span> ChildB(Base):</a>
<a class="sourceLine" id="cb574-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb574-3" title="3">        mro <span class="op">=</span> <span class="bu">type</span>(<span class="va">self</span>).mro()             <span class="co"># Get the Method Resolution Order.</span></a>
<a class="sourceLine" id="cb574-4" title="4">        check_next <span class="op">=</span> mro.index(ChildB) <span class="op">+</span> <span class="dv">1</span> <span class="co"># Start looking after *this* class.</span></a>
<a class="sourceLine" id="cb574-5" title="5">        <span class="cf">while</span> check_next <span class="op">&amp;</span>lt<span class="op">;</span> <span class="bu">len</span>(mro):</a>
<a class="sourceLine" id="cb574-6" title="6">            next_class <span class="op">=</span> mro[check_next]</a>
<a class="sourceLine" id="cb574-7" title="7">            <span class="cf">if</span> <span class="st">&#39;__init__&#39;</span> <span class="kw">in</span> next_class.__dict__:</a>
<a class="sourceLine" id="cb574-8" title="8">                next_class.<span class="fu">__init__</span>(<span class="va">self</span>)</a>
<a class="sourceLine" id="cb574-9" title="9">                <span class="cf">break</span></a>
<a class="sourceLine" id="cb574-10" title="10">            check_next <span class="op">+=</span> <span class="dv">1</span></a></code></pre></div>
<p>Written a little more like native Python:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb575-1" title="1"><span class="kw">class</span> ChildB(Base):</a>
<a class="sourceLine" id="cb575-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb575-3" title="3">        mro <span class="op">=</span> <span class="bu">type</span>(<span class="va">self</span>).mro()</a>
<a class="sourceLine" id="cb575-4" title="4">        <span class="cf">for</span> next_class <span class="kw">in</span> mro[mro.index(ChildB) <span class="op">+</span> <span class="dv">1</span>:]: <span class="co"># slice to end</span></a>
<a class="sourceLine" id="cb575-5" title="5">            <span class="cf">if</span> <span class="bu">hasattr</span>(next_class, <span class="st">&#39;__init__&#39;</span>):</a>
<a class="sourceLine" id="cb575-6" title="6">                next_class.<span class="fu">__init__</span>(<span class="va">self</span>)</a>
<a class="sourceLine" id="cb575-7" title="7">                <span class="cf">break</span></a></code></pre></div>
<p>If we didn’t have the <code>super</code> object, we’d have to write this manual code everywhere (or recreate it!) to ensure that we call the proper next method in the Method Resolution Order!</p>
<p>How does super do this in Python 3 without being told explicitly which class and instance from the method it was called from?</p>
<p>It gets the calling stack frame, and finds the class (implicitly stored as a local free variable, <code>__class__</code>, making the calling function a closure over the class) and the first argument to that function, which should be the instance or class that informs it which Method Resolution Order (MRO) to use.</p>
<p>Since it requires that first argument for the MRO, <a href="https://bugs.python.org/issue31118" rel="noreferrer">using <code>super</code> with static methods is impossible</a>.</p>
<h5>
Criticisms of other answers:
</h2>
<blockquote>
super() lets you avoid referring to the base class explicitly, which can be nice. . But the main advantage comes with multiple inheritance, where all sorts of fun stuff can happen. See the standard docs on super if you haven’t already.
</blockquote>
<p>It’s rather hand-wavey and doesn’t tell us much, but the point of <code>super</code> is not to avoid writing the parent class. The point is to ensure that the next method in line in the method resolution order (MRO) is called. This becomes important in multiple inheritance.</p>
<p>I’ll explain here.</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb576-1" title="1"><span class="kw">class</span> Base(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb576-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb576-3" title="3">        <span class="bu">print</span>(<span class="st">&quot;Base init&#39;ed&quot;</span>)</a>
<a class="sourceLine" id="cb576-4" title="4"></a>
<a class="sourceLine" id="cb576-5" title="5"><span class="kw">class</span> ChildA(Base):</a>
<a class="sourceLine" id="cb576-6" title="6">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb576-7" title="7">        <span class="bu">print</span>(<span class="st">&quot;ChildA init&#39;ed&quot;</span>)</a>
<a class="sourceLine" id="cb576-8" title="8">        Base.<span class="fu">__init__</span>(<span class="va">self</span>)</a>
<a class="sourceLine" id="cb576-9" title="9"></a>
<a class="sourceLine" id="cb576-10" title="10"><span class="kw">class</span> ChildB(Base):</a>
<a class="sourceLine" id="cb576-11" title="11">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb576-12" title="12">        <span class="bu">print</span>(<span class="st">&quot;ChildB init&#39;ed&quot;</span>)</a>
<a class="sourceLine" id="cb576-13" title="13">        <span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</a></code></pre></div>
<p>And let’s create a dependency that we want to be called after the Child:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb577-1" title="1"><span class="kw">class</span> UserDependency(Base):</a>
<a class="sourceLine" id="cb577-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb577-3" title="3">        <span class="bu">print</span>(<span class="st">&quot;UserDependency init&#39;ed&quot;</span>)</a>
<a class="sourceLine" id="cb577-4" title="4">        <span class="bu">super</span>(UserDependency, <span class="va">self</span>).<span class="fu">__init__</span>()</a></code></pre></div>
<p>Now remember, <code>ChildB</code> uses super, <code>ChildA</code> does not:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb578-1" title="1"><span class="kw">class</span> UserA(ChildA, UserDependency):</a>
<a class="sourceLine" id="cb578-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb578-3" title="3">        <span class="bu">print</span>(<span class="st">&quot;UserA init&#39;ed&quot;</span>)</a>
<a class="sourceLine" id="cb578-4" title="4">        <span class="bu">super</span>(UserA, <span class="va">self</span>).<span class="fu">__init__</span>()</a>
<a class="sourceLine" id="cb578-5" title="5"></a>
<a class="sourceLine" id="cb578-6" title="6"><span class="kw">class</span> UserB(ChildB, UserDependency):</a>
<a class="sourceLine" id="cb578-7" title="7">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb578-8" title="8">        <span class="bu">print</span>(<span class="st">&quot;UserB init&#39;ed&quot;</span>)</a>
<a class="sourceLine" id="cb578-9" title="9">        <span class="bu">super</span>(UserB, <span class="va">self</span>).<span class="fu">__init__</span>()</a></code></pre></div>
<p>And <code>UserA</code> does not call the UserDependency method:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb579-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> UserA()</a>
<a class="sourceLine" id="cb579-2" title="2">UserA init<span class="st">&#39;ed</span></a>
<a class="sourceLine" id="cb579-3" title="3"><span class="st">ChildA init&#39;</span>ed</a>
<a class="sourceLine" id="cb579-4" title="4">Base init<span class="st">&#39;ed</span></a>
<a class="sourceLine" id="cb579-5" title="5"><span class="st">&amp;lt;__main__.UserA object at 0x0000000003403BA8&amp;gt;</span></a></code></pre></div>
<p>But <code>UserB</code>, because <code>ChildB</code> uses <code>super</code>, does!:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb580-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> UserB()</a>
<a class="sourceLine" id="cb580-2" title="2">UserB init<span class="st">&#39;ed</span></a>
<a class="sourceLine" id="cb580-3" title="3"><span class="st">ChildB init&#39;</span>ed</a>
<a class="sourceLine" id="cb580-4" title="4">UserDependency init<span class="st">&#39;ed</span></a>
<a class="sourceLine" id="cb580-5" title="5"><span class="st">Base init&#39;</span>ed</a>
<a class="sourceLine" id="cb580-6" title="6"><span class="op">&amp;</span>lt<span class="op">;</span>__main__.UserB <span class="bu">object</span> at <span class="bn">0x0000000003403438</span><span class="op">&amp;</span>gt<span class="op">;</span></a></code></pre></div>
<h5>
Criticism for another answer
</h3>
<p>In no circumstance should you do the following, which another answer suggests, as you’ll definitely get errors when you subclass ChildB:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb581-1" title="1"><span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>() <span class="co"># Don&#39;t do this. Ever.</span></a></code></pre></div>
<p><sub>(That answer is not clever or particularly interesting, but in spite of direct criticism in the comments and over 17 downvotes, the answerer persisted in suggesting it until a kind editor fixed his problem.)</sub></p>
<p>Explanation: That answer suggested calling super like this:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb582-1" title="1"><span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>()</a></code></pre></div>
<p>This is <em>completely</em> wrong. <code>super</code> lets us look up the next parent in the MRO (see the first section of this answer) for child classes. If you tell <code>super</code> we’re in the child instance’s method, it will then lookup the next method in line (probably this one) resulting in recursion, probably causing a logical failure (in the answerer’s example, it does) or a <code>RuntimeError</code> when the recursion depth is exceeded.</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb583-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> Polygon(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb583-2" title="2">...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>):</a>
<a class="sourceLine" id="cb583-3" title="3">...         <span class="va">self</span>.<span class="bu">id</span> <span class="op">=</span> <span class="bu">id</span></a>
<a class="sourceLine" id="cb583-4" title="4">...</a>
<a class="sourceLine" id="cb583-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> Rectangle(Polygon):</a>
<a class="sourceLine" id="cb583-6" title="6">...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>, width, height):</a>
<a class="sourceLine" id="cb583-7" title="7">...         <span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>(<span class="bu">id</span>)</a>
<a class="sourceLine" id="cb583-8" title="8">...         <span class="va">self</span>.shape <span class="op">=</span> (width, height)</a>
<a class="sourceLine" id="cb583-9" title="9">...</a>
<a class="sourceLine" id="cb583-10" title="10"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> Square(Rectangle):</a>
<a class="sourceLine" id="cb583-11" title="11">...     <span class="cf">pass</span></a>
<a class="sourceLine" id="cb583-12" title="12">...</a>
<a class="sourceLine" id="cb583-13" title="13"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> Square(<span class="st">&#39;a&#39;</span>, <span class="dv">10</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb583-14" title="14">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb583-15" title="15">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb583-16" title="16">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">3</span>, <span class="kw">in</span> <span class="fu">__init__</span></a>
<a class="sourceLine" id="cb583-17" title="17"><span class="pp">TypeError</span>: <span class="fu">__init__</span>() missing <span class="dv">2</span> required positional arguments: <span class="st">&#39;width&#39;</span> <span class="kw">and</span> <span class="st">&#39;height&#39;</span></a></code></pre></div>
</section>
<section id="answer-3-score-248" class="level4">
<h4>Answer 3 (score 248)</h4>
<p>It’s been noted that in Python 3.0+ you can use</p>
<p><code>super().__init__()</code></p>
<p>to make your call, which is concise and does not require you to reference the parent OR class names explicitly, which can be handy. I just want to add that for Python 2.7 or under, it is possible to get this name-insensitive behaviour by writing <code>self.__class__</code> instead of the class name, i.e.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb584-1" title="1"><span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>()</a></code></pre></div>
<p>HOWEVER, this breaks calls to <code>super</code> for any classes that inherit from your class, where <code>self.__class__</code> could return a child class. For example:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb585-1" title="1"><span class="kw">class</span> Polygon(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb585-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>):</a>
<a class="sourceLine" id="cb585-3" title="3">        <span class="va">self</span>.<span class="bu">id</span> <span class="op">=</span> <span class="bu">id</span></a>
<a class="sourceLine" id="cb585-4" title="4"></a>
<a class="sourceLine" id="cb585-5" title="5"><span class="kw">class</span> Rectangle(Polygon):</a>
<a class="sourceLine" id="cb585-6" title="6">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>, width, height):</a>
<a class="sourceLine" id="cb585-7" title="7">        <span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>(<span class="bu">id</span>)</a>
<a class="sourceLine" id="cb585-8" title="8">        <span class="va">self</span>.shape <span class="op">=</span> (width, height)</a>
<a class="sourceLine" id="cb585-9" title="9"></a>
<a class="sourceLine" id="cb585-10" title="10"><span class="kw">class</span> Square(Rectangle):</a>
<a class="sourceLine" id="cb585-11" title="11">    <span class="cf">pass</span></a></code></pre></div>
<p>Here I have a class <code>Square</code>, which is a sub-class of <code>Rectangle</code>. Say I don’t want to write a separate constructor for <code>Square</code> because the constructor for <code>Rectangle</code> is good enough, but for whatever reason I want to implement a Square so I can reimplement some other method.</p>
<p>When I create a <code>Square</code> using <code>mSquare = Square('a', 10,10)</code>, Python calls the constructor for <code>Rectangle</code> because I haven’t given <code>Square</code> its own constructor. However, in the constructor for <code>Rectangle</code>, the call <code>super(self.__class__,self)</code> is going to return the superclass of <code>mSquare</code>, so it calls the constructor for <code>Rectangle</code> again. This is how the infinite loop happens, as was mentioned by <span class="citation" data-cites="S_C">@S_C</span>. In this case, when I run <code>super(...).__init__()</code> I am calling the constructor for <code>Rectangle</code> but since I give it no arguments, I will get an error.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="understanding-slice-notation-score-1550739-in-2019" class="level3">
<h3>66: Understanding slice notation (score <a href="https://stackoverflow.com/q/509211.html">1550739</a> in 2019)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>I need a good explanation (references are a plus) on Python’s slice notation.</p>
<p>To me, this notation needs a bit of picking up.</p>
<p>It looks extremely powerful, but I haven’t quite got my head around it.</p>
</section>
<section id="answer-accepted-score-4014" class="level4">
<h4>Answer accepted (score 4014)</h4>
<p>It’s pretty simple really:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb586-1" title="1">a[start:stop]  <span class="co"># items start through stop-1</span></a>
<a class="sourceLine" id="cb586-2" title="2">a[start:]      <span class="co"># items start through the rest of the array</span></a>
<a class="sourceLine" id="cb586-3" title="3">a[:stop]       <span class="co"># items from the beginning through stop-1</span></a>
<a class="sourceLine" id="cb586-4" title="4">a[:]           <span class="co"># a copy of the whole array</span></a></code></pre></div>
<p>There is also the <code>step</code> value, which can be used with any of the above:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb587-1" title="1">a[start:stop:step] <span class="co"># start through not past stop, by step</span></a></code></pre></div>
<p>The key point to remember is that the <code>:stop</code> value represents the first value that is <em>not</em> in the selected slice. So, the difference between <code>stop</code> and <code>start</code> is the number of elements selected (if <code>step</code> is 1, the default).</p>
<p>The other feature is that <code>start</code> or <code>stop</code> may be a <em>negative</em> number, which means it counts from the end of the array instead of the beginning. So:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb588-1" title="1">a[<span class="op">-</span><span class="dv">1</span>]    <span class="co"># last item in the array</span></a>
<a class="sourceLine" id="cb588-2" title="2">a[<span class="op">-</span><span class="dv">2</span>:]   <span class="co"># last two items in the array</span></a>
<a class="sourceLine" id="cb588-3" title="3">a[:<span class="op">-</span><span class="dv">2</span>]   <span class="co"># everything except the last two items</span></a></code></pre></div>
<p>Similarly, <code>step</code> may be a negative number:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb589-1" title="1">a[::<span class="op">-</span><span class="dv">1</span>]    <span class="co"># all items in the array, reversed</span></a>
<a class="sourceLine" id="cb589-2" title="2">a[<span class="dv">1</span>::<span class="op">-</span><span class="dv">1</span>]   <span class="co"># the first two items, reversed</span></a>
<a class="sourceLine" id="cb589-3" title="3">a[:<span class="op">-</span><span class="dv">3</span>:<span class="op">-</span><span class="dv">1</span>]  <span class="co"># the last two items, reversed</span></a>
<a class="sourceLine" id="cb589-4" title="4">a[<span class="op">-</span><span class="dv">3</span>::<span class="op">-</span><span class="dv">1</span>]  <span class="co"># everything except the last two items, reversed</span></a></code></pre></div>
<p>Python is kind to the programmer if there are fewer items than you ask for. For example, if you ask for <code>a[:-2]</code> and <code>a</code> only contains one element, you get an empty list instead of an error. Sometimes you would prefer the error, so you have to be aware that this may happen.</p>
<h5>
Relation to <code>slice()</code> object
</h3>
<p>The slicing operator <code>[]</code> is actually being used in the above code with a <code>slice()</code> object using the <code>:</code> notation (which is only valid within <code>[]</code>), i.e.:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb590-1" title="1">a[start:stop:step]</a></code></pre></div>
<p>is equivalent to:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb591-1" title="1">a[<span class="bu">slice</span>(start, stop, step)]</a></code></pre></div>
<p>
Slice objects also behave slightly differently depending on the number of arguments, similarly to <code>range()</code>, i.e. both <code>slice(stop)</code> and <code>slice(start, stop[, step])</code> are supported. To skip specifying a given argument, one might use <code>None</code>, so that e.g. <code>a[start:]</code> is equivalent to <code>a[slice(start, None)]</code> or <code>a[::-1]</code> is equivalent to <code>a[slice(None, None, -1)]</code>.
</p>
<p>While the <code>:</code>-based notation is very helpful for simple slicing, the explicit use of <code>slice()</code> objects simplifies the programmatic generation of slicing.</p>
</section>
<section id="answer-2-score-509" class="level4">
<h4>Answer 2 (score 509)</h4>
<p>The <a href="http://docs.python.org/tutorial/introduction.html#strings" rel="noreferrer">Python tutorial</a> talks about it (scroll down a bit until you get to the part about slicing).</p>
<p>The ASCII art diagram is helpful too for remembering how slices work:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb592-1" title="1"> <span class="op">+---+---+---+---+---+---+</span></a>
<a class="sourceLine" id="cb592-2" title="2"> <span class="op">|</span> P <span class="op">|</span> y <span class="op">|</span> t <span class="op">|</span> h <span class="op">|</span> o <span class="op">|</span> n <span class="op">|</span></a>
<a class="sourceLine" id="cb592-3" title="3"> <span class="op">+---+---+---+---+---+---+</span></a>
<a class="sourceLine" id="cb592-4" title="4"> <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">4</span>   <span class="dv">5</span>   <span class="dv">6</span></a>
<a class="sourceLine" id="cb592-5" title="5"><span class="dv">-6</span>  <span class="dv">-5</span>  <span class="dv">-4</span>  <span class="dv">-3</span>  <span class="dv">-2</span>  <span class="dv">-1</span></a></code></pre></div>
<blockquote>
One way to remember how slices work is to think of the indices as pointing <em>between</em> characters, with the left edge of the first character numbered 0. Then the right edge of the last character of a string of <em>n</em> characters has index <em>n</em>.
</blockquote>
</section>
<section id="answer-3-score-391" class="level4">
<h4>Answer 3 (score 391)</h4>
<p>Enumerating the possibilities allowed by the grammar:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb593-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[:]                <span class="co"># [seq[0],   seq[1],          ..., seq[-1]    ]</span></a>
<a class="sourceLine" id="cb593-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[low:]             <span class="co"># [seq[low], seq[low+1],      ..., seq[-1]    ]</span></a>
<a class="sourceLine" id="cb593-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[:high]            <span class="co"># [seq[0],   seq[1],          ..., seq[high-1]]</span></a>
<a class="sourceLine" id="cb593-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[low:high]         <span class="co"># [seq[low], seq[low+1],      ..., seq[high-1]]</span></a>
<a class="sourceLine" id="cb593-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[::stride]         <span class="co"># [seq[0],   seq[stride],     ..., seq[-1]    ]</span></a>
<a class="sourceLine" id="cb593-6" title="6"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[low::stride]      <span class="co"># [seq[low], seq[low+stride], ..., seq[-1]    ]</span></a>
<a class="sourceLine" id="cb593-7" title="7"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[:high:stride]     <span class="co"># [seq[0],   seq[stride],     ..., seq[high-1]]</span></a>
<a class="sourceLine" id="cb593-8" title="8"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[low:high:stride]  <span class="co"># [seq[low], seq[low+stride], ..., seq[high-1]]</span></a></code></pre></div>
<p>Of course, if <code>(high-low)%stride != 0</code>, then the end point will be a little lower than <code>high-1</code>.</p>
<p>If <code>stride</code> is negative, the ordering is changed a bit since we’re counting down:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb594-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[::<span class="op">-</span>stride]        <span class="co"># [seq[-1],   seq[-1-stride],   ..., seq[0]    ]</span></a>
<a class="sourceLine" id="cb594-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[high::<span class="op">-</span>stride]    <span class="co"># [seq[high], seq[high-stride], ..., seq[0]    ]</span></a>
<a class="sourceLine" id="cb594-3" title="3"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[:low:<span class="op">-</span>stride]     <span class="co"># [seq[-1],   seq[-1-stride],   ..., seq[low+1]]</span></a>
<a class="sourceLine" id="cb594-4" title="4"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> seq[high:low:<span class="op">-</span>stride] <span class="co"># [seq[high], seq[high-stride], ..., seq[low+1]]</span></a></code></pre></div>
<p>Extended slicing (with commas and ellipses) are mostly used only by special data structures (like NumPy); the basic sequences don’t support them.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb595-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="kw">class</span> slicee:</a>
<a class="sourceLine" id="cb595-2" title="2">...     <span class="kw">def</span> <span class="fu">__getitem__</span>(<span class="va">self</span>, item):</a>
<a class="sourceLine" id="cb595-3" title="3">...         <span class="cf">return</span> <span class="bu">repr</span>(item)</a>
<a class="sourceLine" id="cb595-4" title="4">...</a>
<a class="sourceLine" id="cb595-5" title="5"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> slicee()[<span class="dv">0</span>, <span class="dv">1</span>:<span class="dv">2</span>, ::<span class="dv">5</span>, ...]</a>
<a class="sourceLine" id="cb595-6" title="6"><span class="co">&#39;(0, slice(1, 2, None), slice(None, None, 5), Ellipsis)&#39;</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-list-from-pandas-dataframe-column-headers-score-1535570-in-2019" class="level3">
<h3>67: Get list from pandas DataFrame column headers (score <a href="https://stackoverflow.com/q/19482970.html">1535570</a> in 2019)</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<p>I want to get a list of the column headers from a pandas DataFrame. The DataFrame will come from user input so I won’t know how many columns there will be or what they will be called.</p>
<p>For example, if I’m given a DataFrame like this:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb596-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> my_dataframe</a>
<a class="sourceLine" id="cb596-2" title="2">    y  gdp  cap</a>
<a class="sourceLine" id="cb596-3" title="3"><span class="dv">0</span>   <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">5</span></a>
<a class="sourceLine" id="cb596-4" title="4"><span class="dv">1</span>   <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">9</span></a>
<a class="sourceLine" id="cb596-5" title="5"><span class="dv">2</span>   <span class="dv">8</span>    <span class="dv">7</span>    <span class="dv">2</span></a>
<a class="sourceLine" id="cb596-6" title="6"><span class="dv">3</span>   <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">7</span></a>
<a class="sourceLine" id="cb596-7" title="7"><span class="dv">4</span>   <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">7</span></a>
<a class="sourceLine" id="cb596-8" title="8"><span class="dv">5</span>   <span class="dv">4</span>    <span class="dv">8</span>    <span class="dv">3</span></a>
<a class="sourceLine" id="cb596-9" title="9"><span class="dv">6</span>   <span class="dv">8</span>    <span class="dv">2</span>    <span class="dv">8</span></a>
<a class="sourceLine" id="cb596-10" title="10"><span class="dv">7</span>   <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">10</span></a>
<a class="sourceLine" id="cb596-11" title="11"><span class="dv">8</span>   <span class="dv">6</span>    <span class="dv">6</span>    <span class="dv">4</span></a>
<a class="sourceLine" id="cb596-12" title="12"><span class="dv">9</span>  <span class="dv">10</span>   <span class="dv">10</span>    <span class="dv">7</span></a></code></pre></div>
<p>I would want to get a list like this:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb597-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> header_list</a>
<a class="sourceLine" id="cb597-2" title="2">[<span class="st">&#39;y&#39;</span>, <span class="st">&#39;gdp&#39;</span>, <span class="st">&#39;cap&#39;</span>]</a></code></pre></div>
</section>
<section id="answer-accepted-score-1476" class="level4">
<h4>Answer accepted (score 1476)</h4>
<p>You can get the values as a list by doing:</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb598-1" title="1"><span class="bu">list</span>(my_dataframe.columns.values)</a></code></pre></div>
<p>Also you can simply use: (as shown in <a href="https://stackoverflow.com/a/19483602/4909087">Ed Chum’s answer</a>):</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb599-1" title="1"><span class="bu">list</span>(my_dataframe)</a></code></pre></div>
</section>
<section id="answer-2-score-360" class="level4">
<h4>Answer 2 (score 360)</h4>
<p>There is a built in method which is the most performant:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb600-1" title="1">my_dataframe.columns.values.tolist()</a></code></pre></div>
<p><code>.columns</code> returns an Index, <code>.columns.values</code> returns an array and this has a helper function <code>.tolist</code> to return a list.</p>
<p>If performance is not as important to you, <code>Index</code> objects define a <code>.tolist()</code> method that you can call directly:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb601-1" title="1">my_dataframe.columns.tolist()</a></code></pre></div>
<p>The difference in performance is obvious:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb602-1" title="1"><span class="op">%</span>timeit df.columns.tolist()</a>
<a class="sourceLine" id="cb602-2" title="2"><span class="fl">16.7</span> µs ± <span class="dv">317</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">100000</span> loops each)</a>
<a class="sourceLine" id="cb602-3" title="3"></a>
<a class="sourceLine" id="cb602-4" title="4"><span class="op">%</span>timeit df.columns.values.tolist()</a>
<a class="sourceLine" id="cb602-5" title="5"><span class="fl">1.24</span> µs ± <span class="fl">12.3</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000000</span> loops each)</a></code></pre></div>
<hr>
<p>For those who hate typing, you can just call <code>list</code> on <code>df</code>, as so:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb603-1" title="1"><span class="bu">list</span>(df)</a></code></pre></div>
</section>
<section id="answer-3-score-80" class="level4">
<h4>Answer 3 (score 80)</h4>
<p>Did some quick tests, and perhaps unsurprisingly the built-in version using <code>dataframe.columns.values.tolist()</code> is the fastest:</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb604-1" title="1">In [<span class="dv">1</span>]: <span class="op">%</span>timeit [column <span class="cf">for</span> column <span class="kw">in</span> df]</a>
<a class="sourceLine" id="cb604-2" title="2"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="fl">81.6</span> µs per loop</a>
<a class="sourceLine" id="cb604-3" title="3"></a>
<a class="sourceLine" id="cb604-4" title="4">In [<span class="dv">2</span>]: <span class="op">%</span>timeit df.columns.values.tolist()</a>
<a class="sourceLine" id="cb604-5" title="5"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">16.1</span> µs per loop</a>
<a class="sourceLine" id="cb604-6" title="6"></a>
<a class="sourceLine" id="cb604-7" title="7">In [<span class="dv">3</span>]: <span class="op">%</span>timeit <span class="bu">list</span>(df)</a>
<a class="sourceLine" id="cb604-8" title="8"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">44.9</span> µs per loop</a>
<a class="sourceLine" id="cb604-9" title="9"></a>
<a class="sourceLine" id="cb604-10" title="10">In [<span class="dv">4</span>]: <span class="op">%</span> timeit <span class="bu">list</span>(df.columns.values)</a>
<a class="sourceLine" id="cb604-11" title="11"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">38.4</span> µs per loop</a></code></pre></div>
<p>(I still really like the <code>list(dataframe)</code> though, so thanks EdChum!)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-all-files-in-a-directory-with-extension-.txt-in-python-score-1534437-in-2017" class="level3">
<h3>68: Find all files in a directory with extension .txt in Python (score <a href="https://stackoverflow.com/q/3964681.html">1534437</a> in 2017)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>How can I find all the files in a directory having the extension <code>.txt</code> in python?</p>
</section>
<section id="answer-accepted-score-2086" class="level4">
<h4>Answer accepted (score 2086)</h4>
<p>You can use <a href="https://docs.python.org/2/library/glob.html" rel="noreferrer"><code>glob</code></a>:</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb605-1" title="1"><span class="im">import</span> glob, os</a>
<a class="sourceLine" id="cb605-2" title="2">os.chdir(<span class="st">&quot;/mydir&quot;</span>)</a>
<a class="sourceLine" id="cb605-3" title="3"><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> glob.glob(<span class="st">&quot;*.txt&quot;</span>):</a>
<a class="sourceLine" id="cb605-4" title="4">    <span class="bu">print</span>(<span class="bu">file</span>)</a></code></pre></div>
<p>or simply <a href="https://docs.python.org/2/library/os.html#os.listdir" rel="noreferrer"><code>os.listdir</code></a>:</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb606-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb606-2" title="2"><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> os.listdir(<span class="st">&quot;/mydir&quot;</span>):</a>
<a class="sourceLine" id="cb606-3" title="3">    <span class="cf">if</span> <span class="bu">file</span>.endswith(<span class="st">&quot;.txt&quot;</span>):</a>
<a class="sourceLine" id="cb606-4" title="4">        <span class="bu">print</span>(os.path.join(<span class="st">&quot;/mydir&quot;</span>, <span class="bu">file</span>))</a></code></pre></div>
<p>or if you want to traverse directory, use <a href="https://docs.python.org/2/library/os.html#os.walk" rel="noreferrer"><code>os.walk</code></a>:</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb607-1" title="1"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb607-2" title="2"><span class="cf">for</span> root, dirs, files <span class="kw">in</span> os.walk(<span class="st">&quot;/mydir&quot;</span>):</a>
<a class="sourceLine" id="cb607-3" title="3">    <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files:</a>
<a class="sourceLine" id="cb607-4" title="4">        <span class="cf">if</span> <span class="bu">file</span>.endswith(<span class="st">&quot;.txt&quot;</span>):</a>
<a class="sourceLine" id="cb607-5" title="5">             <span class="bu">print</span>(os.path.join(root, <span class="bu">file</span>))</a></code></pre></div>
</section>
<section id="answer-2-score-214-1" class="level4">
<h4>Answer 2 (score 214)</h4>
<p>Use <a href="http://docs.python.org/library/glob.html" rel="noreferrer">glob</a>.</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb608-1" title="1"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> <span class="im">import</span> glob</a>
<a class="sourceLine" id="cb608-2" title="2"><span class="op">&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;&amp;</span>gt<span class="op">;</span> glob.glob(<span class="st">&#39;./*.txt&#39;</span>)</a>
<a class="sourceLine" id="cb608-3" title="3">[<span class="st">&#39;./outline.txt&#39;</span>, <span class="st">&#39;./pip-log.txt&#39;</span>, <span class="st">&#39;./test.txt&#39;</span>, <span class="st">&#39;./testingvim.txt&#39;</span>]</a></code></pre></div>
</section>
<section id="answer-3-score-133" class="level4">
<h4>Answer 3 (score 133)</h4>
<p>Something like that should do the job</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb609-1" title="1"><span class="cf">for</span> root, dirs, files <span class="kw">in</span> os.walk(directory):</a>
<a class="sourceLine" id="cb609-2" title="2">    <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files:</a>
<a class="sourceLine" id="cb609-3" title="3">        <span class="cf">if</span> <span class="bu">file</span>.endswith(<span class="st">&#39;.txt&#39;</span>):</a>
<a class="sourceLine" id="cb609-4" title="4">            <span class="bu">print</span> <span class="bu">file</span></a></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="unicodeencodeerror-ascii-codec-cant-encode-character-u0-in-position-20-ordinal-not-in-range128-score-1532253-in-2016" class="level3">
<h3>69: UnicodeEncodeError: ‘ascii’ codec can’t encode character u’0’ in position 20: ordinal not in range(128) (score <a href="https://stackoverflow.com/q/9942594.html">1532253</a> in 2016)</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>I’m having problems dealing with unicode characters from text fetched from different web pages (on different sites). I am using BeautifulSoup.</p>
<p>The problem is that the error is not always reproducible; it sometimes works with some pages, and sometimes, it barfs by throwing a <code>UnicodeEncodeError</code>. I have tried just about everything I can think of, and yet I have not found anything that works consistently without throwing some kind of Unicode-related error.</p>
<p>One of the sections of code that is causing problems is shown below:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb610-1" title="1">agent_telno <span class="op">=</span> agent.find(<span class="st">&#39;div&#39;</span>, <span class="st">&#39;agent_contact_number&#39;</span>)</a>
<a class="sourceLine" id="cb610-2" title="2">agent_telno <span class="op">=</span> <span class="st">&#39;&#39;</span> <span class="cf">if</span> agent_telno <span class="kw">is</span> <span class="va">None</span> <span class="cf">else</span> agent_telno.contents[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb610-3" title="3">p.agent_info <span class="op">=</span> <span class="bu">str</span>(agent_contact <span class="op">+</span> <span class="st">&#39; &#39;</span> <span class="op">+</span> agent_telno).strip()</a></code></pre></div>
<p>Here is a stack trace produced on SOME strings when the snippet above is run:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb611-1" title="1">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb611-2" title="2">  File <span class="st">&quot;foobar.py&quot;</span>, line <span class="dv">792</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb611-3" title="3">    p.agent_info <span class="op">=</span> <span class="bu">str</span>(agent_contact <span class="op">+</span> <span class="st">&#39; &#39;</span> <span class="op">+</span> agent_telno).strip()</a>
<a class="sourceLine" id="cb611-4" title="4"><span class="pp">UnicodeEncodeError</span>: <span class="st">&#39;ascii&#39;</span> codec can<span class="st">&#39;t encode character u&#39;</span><span class="op">\</span>xa0<span class="st">&#39; in position 20: ordinal not in range(128)</span></a></code></pre></div>
<p>I suspect that this is because some pages (or more specifically, pages from some of the sites) may be encoded, whilst others may be unencoded. All the sites are based in the UK and provide data meant for UK consumption - so there are no issues relating to internalization or dealing with text written in anything other than English.</p>
<p>Does anyone have any ideas as to how to solve this so that I can CONSISTENTLY fix this problem?</p>
</section>
<section id="answer-accepted-score-1284" class="level4">
<h4>Answer accepted (score 1284)</h4>
<p>You need to read the Python <a href="https://docs.python.org/2.7/howto/unicode.html" rel="noreferrer">Unicode HOWTO</a>. This error is the <a href="https://docs.python.org/2.7/howto/unicode.html#the-unicode-type" rel="noreferrer">very first example</a>.</p>
<p>Basically, stop using <code>str</code> to convert from unicode to encoded text / bytes.</p>
<p>Instead, properly use <a href="http://docs.python.org/library/stdtypes.html#str.encode" rel="noreferrer"><code>.encode()</code></a> to encode the string:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb612-1" title="1">p.agent_info <span class="op">=</span> <span class="st">u&#39; &#39;</span>.join((agent_contact, agent_telno)).encode(<span class="st">&#39;utf-8&#39;</span>).strip()</a></code></pre></div>
<p>or work entirely in unicode.</p>
</section>
<section id="answer-2-score-421" class="level4">
<h4>Answer 2 (score 421)</h4>
<p>This is a classic python unicode pain point! Consider the following:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb613-1" title="1">a <span class="op">=</span> <span class="st">u&#39;bats</span><span class="ch">\u00E0</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb613-2" title="2"><span class="bu">print</span> a</a>
<a class="sourceLine" id="cb613-3" title="3"> <span class="op">=&amp;</span>gt<span class="op">;</span> batsà</a></code></pre></div>
<p>All good so far, but if we call str(a), let’s see what happens:</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb614-1" title="1"><span class="bu">str</span>(a)</a>
<a class="sourceLine" id="cb614-2" title="2">Traceback (most recent call last):</a>
<a class="sourceLine" id="cb614-3" title="3">  File <span class="st">&quot;&amp;lt;stdin&amp;gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&amp;</span>lt<span class="op">;</span>module<span class="op">&amp;</span>gt<span class="op">;</span></a>
<a class="sourceLine" id="cb614-4" title="4"><span class="pp">UnicodeEncodeError</span>: <span class="st">&#39;ascii&#39;</span> codec can<span class="st">&#39;t encode character u&#39;</span><span class="op">\</span>xe0<span class="st">&#39; in position 4: ordinal not in range(128)</span></a></code></pre></div>
<p>Oh dip, that’s not gonna do anyone any good! To fix the error, encode the bytes explicitly with .encode and tell python what codec to use:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb615-1" title="1">a.encode(<span class="st">&#39;utf-8&#39;</span>)</a>
<a class="sourceLine" id="cb615-2" title="2"> <span class="op">=&amp;</span>gt<span class="op">;</span> <span class="st">&#39;bats</span><span class="ch">\xc3\xa0</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb615-3" title="3"><span class="bu">print</span> a.encode(<span class="st">&#39;utf-8&#39;</span>)</a>
<a class="sourceLine" id="cb615-4" title="4"> <span class="op">=&amp;</span>gt<span class="op">;</span> batsà</a></code></pre></div>
Voil
</section>
</section>
</body>
</html>
