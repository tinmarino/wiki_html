<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Python_top_100.md – Python &lt;- StackOverflow top 100</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #232629;
        color: #7a7c7d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
    div.sourceCode
      { color: #cfcfc2; background-color: #232629; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span. { color: #cfcfc2; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #3f8058; } /* Annotation */
    code span.at { color: #2980b9; } /* Attribute */
    code span.bn { color: #f67400; } /* BaseN */
    code span.bu { color: #7f8c8d; } /* BuiltIn */
    code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #3daee9; } /* Char */
    code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
    code span.co { color: #7a7c7d; } /* Comment */
    code span.cv { color: #7f8c8d; } /* CommentVar */
    code span.do { color: #a43340; } /* Documentation */
    code span.dt { color: #2980b9; } /* DataType */
    code span.dv { color: #f67400; } /* DecVal */
    code span.er { color: #da4453; text-decoration: underline; } /* Error */
    code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
    code span.fl { color: #f67400; } /* Float */
    code span.fu { color: #8e44ad; } /* Function */
    code span.im { color: #27ae60; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
    code span.op { color: #cfcfc2; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #27ae60; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #f44f4f; } /* String */
    code span.va { color: #27aeae; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../Css/color_dark_solarized.css" />
  <link rel="stylesheet" href="../Css/layout_toc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script type="text/javascript" src="../Css/js_masonry_desandro.js"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Python &lt;- StackOverflow top 100</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#iterating-over-dictionaries-using-for-loops-score-4065148-in-2017">1: Iterating over dictionaries using ‘for’ loops (score <span>4065148</span> in 2017)</a></li>
<li><a href="#does-python-have-a-string-contains-substring-method-score-3792442-in-2017">2: Does Python have a string ‘contains’ substring method? (score <span>3792442</span> in 2017)</a></li>
<li><a href="#how-do-i-check-whether-a-file-exists-without-exceptions-score-3681360-in-2018">3: How do I check whether a file exists without exceptions? (score <span>3681360</span> in 2018)</a></li>
<li><a href="#how-do-i-parse-a-string-to-a-float-or-int-score-3665519-in-2019">4: How do I parse a string to a float or int? (score <span>3665519</span> in 2019)</a></li>
<li><a href="#how-do-i-list-all-files-of-a-directory-score-3621699-in-2017">5: How do I list all files of a directory? (score <span>3621699</span> in 2017)</a></li>
<li><a href="#finding-the-index-of-an-item-given-a-list-containing-it-in-python-score-3448930-in-2019">6: Finding the index of an item given a list containing it in Python (score <span>3448930</span> in 2019)</a></li>
<li><a href="#how-to-read-a-file-line-by-line-into-a-list-score-3366083-in-2018">7: How to read a file line-by-line into a list? (score <span>3366083</span> in 2018)</a></li>
<li><a href="#calling-an-external-command-in-python-score-3202147-in-2019">8: Calling an external command in Python (score <span>3202147</span> in 2019)</a></li>
<li><a href="#converting-integer-to-string-score-3197810-in-2019">9: Converting integer to string? (score <span>3197810</span> in 2019)</a></li>
<li><a href="#add-new-keys-to-a-dictionary-score-3143556-in-2019">10: Add new keys to a dictionary? (score <span>3143556</span> in 2019)</a></li>
<li><a href="#check-if-a-given-key-already-exists-in-a-dictionary-score-3139063-in-2013">11: Check if a given key already exists in a dictionary (score <span>3139063</span> in 2013)</a></li>
<li><a href="#how-do-i-get-the-number-of-elements-in-a-list-score-3134575-in-2019">12: How do I get the number of elements in a list? (score <span>3134575</span> in 2019)</a></li>
<li><a href="#using-global-variables-in-a-function-score-3043289-in-2018">13: Using global variables in a function (score <span>3043289</span> in 2018)</a></li>
<li><a href="#how-to-get-the-current-time-in-python-score-3001470-in-2018">14: How to get the current time in Python (score <span>3001470</span> in 2018)</a></li>
<li><a href="#how-do-i-install-pip-on-windows-score-2887828-in-2017">15: How do I install pip on Windows? (score <span>2887828</span> in 2017)</a></li>
<li><a href="#how-can-i-make-a-time-delay-in-python-score-2839107-in-2018">16: How can I make a time delay in Python? (score <span>2839107</span> in 2018)</a></li>
<li><a href="#what-is-the-difference-between-pythons-list-methods-append-and-extend-score-2798324-in-2019">17: What is the difference between Python’s list methods append and extend? (score <span>2798324</span> in 2019)</a></li>
<li><a href="#limiting-floats-to-two-decimal-points-score-2780835-in-2017">18: Limiting floats to two decimal points (score <span>2780835</span> in 2017)</a></li>
<li><a href="#converting-string-into-datetime-score-2674955-in-2019">19: Converting string into datetime (score <span>2674955</span> in 2019)</a></li>
<li><a href="#how-do-i-get-a-substring-of-a-string-in-python-score-2671603-in-2019">20: How do I get a substring of a string in Python? (score <span>2671603</span> in 2019)</a></li>
<li><a href="#find-current-directory-and-files-directory-score-2648748-in-2016">21: Find current directory and file’s directory (score <span>2648748</span> in 2016)</a></li>
<li><a href="#why-cant-python-parse-this-json-data-score-2591542-in-2019">22: Why can’t Python parse this JSON data? (score <span>2591542</span> in 2019)</a></li>
<li><a href="#what-does-if-name-main-do-score-2531456-in-2018">23: What does if <strong>name</strong> == “<strong>main</strong>”: do? (score <span>2531456</span> in 2018)</a></li>
<li><a href="#how-do-i-check-if-a-list-is-empty-score-2462573-in-2018">24: How do I check if a list is empty? (score <span>2462573</span> in 2018)</a></li>
<li><a href="#how-do-i-sort-a-dictionary-by-value-score-2415416-in-2019">25: How do I sort a dictionary by value? (score <span>2415416</span> in 2019)</a></li>
<li><a href="#how-can-i-safely-create-a-nested-directory-score-2407666-in-2019">26: How can I safely create a nested directory? (score <span>2407666</span> in 2019)</a></li>
<li><a href="#how-to-remove-an-element-from-a-list-by-index-score-2347506-in-2019">27: How to remove an element from a list by index? (score <span>2347506</span> in 2019)</a></li>
<li><a href="#renaming-columns-in-pandas-score-2283204-in-2017">28: Renaming columns in pandas (score <span>2283204</span> in 2017)</a></li>
<li><a href="#how-to-determine-a-python-variables-type-score-2254676-in-2017">29: How to determine a Python variable’s type? (score <span>2254676</span> in 2017)</a></li>
<li><a href="#how-do-i-lowercase-a-string-in-python-score-2241046-in-2019">30: How do I lowercase a string in Python? (score <span>2241046</span> in 2019)</a></li>
<li><a href="#how-to-convert-list-to-string-score-2197422-in-2019">31: How to convert list to string (score <span>2197422</span> in 2019)</a></li>
<li><a href="#select-rows-from-a-dataframe-based-on-values-in-a-column-in-pandas-score-2183835-in-2019">32: Select rows from a DataFrame based on values in a column in pandas (score <span>2183835</span> in 2019)</a></li>
<li><a href="#how-do-you-change-the-size-of-figures-drawn-with-matplotlib-score-2126797-in">33: How do you change the size of figures drawn with matplotlib? (score <span>2126797</span> in )</a></li>
<li><a href="#how-do-i-concatenate-two-lists-in-python-score-2112225-in-2019">34: How do I concatenate two lists in Python? (score <span>2112225</span> in 2019)</a></li>
<li><a href="#what-does-the-yield-keyword-do-score-2091736-in-2019">35: What does the “yield” keyword do? (score <span>2091736</span> in 2019)</a></li>
<li><a href="#how-to-define-a-two-dimensional-array-in-python-score-2033452-in-2017">36: How to define a two-dimensional array in Python (score <span>2033452</span> in 2017)</a></li>
<li><a href="#how-do-i-install-pip-on-macos-or-os-x-score-1952317-in-2017">37: How do I install pip on macOS or OS X? (score <span>1952317</span> in 2017)</a></li>
<li><a href="#convert-bytes-to-a-string-score-1932306-in-2019">38: Convert bytes to a string (score <span>1932306</span> in 2019)</a></li>
<li><a href="#correct-way-to-write-line-to-file-score-1928059-in-2017">39: Correct way to write line to file? (score <span>1928059</span> in 2017)</a></li>
<li><a href="#accessing-the-index-in-for-loops-score-1900009-in-2019">40: Accessing the index in ‘for’ loops? (score <span>1900009</span> in 2019)</a></li>
<li><a href="#how-to-iterate-over-rows-in-a-dataframe-in-pandas-score-1869294-in-2018">41: How to iterate over rows in a DataFrame in Pandas? (score <span>1869294</span> in 2018)</a></li>
<li><a href="#pythons-equivalent-of-logical-and-in-an-if-statement-score-1813435-in-2018">43: Python’s equivalent of &amp;&amp; (logical-and) in an if-statement (score <span>1813435</span> in 2018)</a></li>
<li><a href="#getting-the-last-element-of-a-list-score-1789328-in-2019">44: Getting the last element of a list (score <span>1789328</span> in 2019)</a></li>
<li><a href="#adding-new-column-to-existing-dataframe-in-python-pandas-score-1789112-in-2017">45: Adding new column to existing DataFrame in Python pandas (score <span>1789112</span> in 2017)</a></li>
<li><a href="#delete-a-file-or-folder-score-1779349-in-2018">46: Delete a file or folder (score <span>1779349</span> in 2018)</a></li>
<li><a href="#does-python-have-a-ternary-conditional-operator-score-1772957-in-2019">47: Does Python have a ternary conditional operator? (score <span>1772957</span> in 2019)</a></li>
<li><a href="#how-to-make-a-flat-list-out-of-list-of-lists-score-1764924-in-2019">48: How to make a flat list out of list of lists? (score <span>1764924</span> in 2019)</a></li>
<li><a href="#how-to-print-without-newline-or-space-score-1755449-in-2019">49: How to print without newline or space? (score <span>1755449</span> in 2019)</a></li>
<li><a href="#generate-random-integers-between-0-and-9-score-1740843-in-2018">50: Generate random integers between 0 and 9 (score <span>1740843</span> in 2018)</a></li>
<li><a href="#how-do-i-copy-a-file-in-python-score-1692227-in-2018">51: How do I copy a file in Python? (score <span>1692227</span> in 2018)</a></li>
<li><a href="#how-to-declare-an-array-in-python-score-1679894-in-2014">52: How to declare an array in Python? (score <span>1679894</span> in 2014)</a></li>
<li><a href="#how-to-split-a-string-into-a-list-score-1677830-in-2019">53: How to split a string into a list? (score <span>1677830</span> in 2019)</a></li>
<li><a href="#fastest-way-to-check-if-a-value-exists-in-a-list-score-1650273-in-2019">54: Fastest way to check if a value exists in a list (score <span>1650273</span> in 2019)</a></li>
<li><a href="#how-do-i-merge-two-dictionaries-in-a-single-expression-score-1648573-in-2019">55: How do I merge two dictionaries in a single expression? (score <span>1648573</span> in 2019)</a></li>
<li><a href="#determine-the-type-of-an-object-score-1647494-in-2017">56: Determine the type of an object? (score <span>1647494</span> in 2017)</a></li>
<li><a href="#is-arr.__len__-the-preferred-way-to-get-the-length-of-an-array-in-python-score-1645889-in-2018">57: Is arr.__len__() the preferred way to get the length of an array in Python? (score <span>1645889</span> in 2018)</a></li>
<li><a href="#what-ide-to-use-for-python-score-1633282-in-2014">58: What IDE to use for Python? (score <span>1633282</span> in 2014)</a></li>
<li><a href="#how-can-i-remove-a-trailing-newline-score-1623884-in-2019">59: How can I remove a trailing newline? (score <span>1623884</span> in 2019)</a></li>
<li><a href="#how-to-convert-strings-into-integers-in-python-score-1618410-in-2017">60: How to convert strings into integers in Python? (score <span>1618410</span> in 2017)</a></li>
<li><a href="#is-there-a-simple-way-to-delete-a-list-element-by-value-score-1596938-in-2019">61: Is there a simple way to delete a list element by value? (score <span>1596938</span> in 2019)</a></li>
<li><a href="#python-find-in-list-score-1578399-in-2018">62: Python: Find in list (score <span>1578399</span> in 2018)</a></li>
<li><a href="#manually-raising-throwing-an-exception-in-python-score-1572164-in-2019">63: Manually raising (throwing) an exception in Python (score <span>1572164</span> in 2019)</a></li>
<li><a href="#how-to-access-environment-variable-values-score-1565338-in-2019">64: How to access environment variable values? (score <span>1565338</span> in 2019)</a></li>
<li><a href="#understanding-python-super-with-init-methods-score-1561073-in-2018">65: Understanding Python super() with <strong>init</strong>() methods (score <span>1561073</span> in 2018)</a></li>
<li><a href="#understanding-slice-notation-score-1550739-in-2019">66: Understanding slice notation (score <span>1550739</span> in 2019)</a></li>
<li><a href="#get-list-from-pandas-dataframe-column-headers-score-1535570-in-2019">67: Get list from pandas DataFrame column headers (score <span>1535570</span> in 2019)</a></li>
<li><a href="#find-all-files-in-a-directory-with-extension-.txt-in-python-score-1534437-in-2017">68: Find all files in a directory with extension .txt in Python (score <span>1534437</span> in 2017)</a></li>
<li><a href="#unicodeencodeerror-ascii-codec-cant-encode-character-u-in-position-20-ordinal-not-in-range128-score-1532253-in-2016">69: UnicodeEncodeError: ‘ascii’ codec can’t encode character u’’ in position 20: ordinal not in range(128) (score <span>1532253</span> in 2016)</a></li>
<li><a href="#how-do-i-append-one-string-to-another-in-python-score-1511101-in-2019">70: How do I append one string to another in Python? (score <span>1511101</span> in 2019)</a></li>
<li><a href="#sum-a-list-of-numbers-in-python-score-1505579-in-2018">71: Sum a list of numbers in Python (score <span>1505579</span> in 2018)</a></li>
<li><a href="#remove-all-whitespace-in-a-string-in-python-score-1504934-in-2018">72: Remove all whitespace in a string in Python (score <span>1504934</span> in 2018)</a></li>
<li><a href="#is-there-a-not-equal-operator-in-python-score-1487533-in-2018">73: Is there a “not equal” operator in Python? (score <span>1487533</span> in 2018)</a></li>
<li><a href="#how-do-you-append-to-a-file-in-python-score-1477953-in-2019">74: How do you append to a file in Python? (score <span>1477953</span> in 2019)</a></li>
<li><a href="#replacements-for-switch-statement-in-python-score-1472506-in-2018">75: Replacements for switch statement in Python? (score <span>1472506</span> in 2018)</a></li>
<li><a href="#why-does-comparing-strings-using-either-or-is-sometimes-produce-a-different-result-score-1471340-in-2019">76: Why does comparing strings using either ‘==’ or ‘is’ sometimes produce a different result? (score <span>1471340</span> in 2019)</a></li>
<li><a href="#how-can-i-count-the-occurrences-of-a-list-item-score-1467929-in-2018">77: How can I count the occurrences of a list item? (score <span>1467929</span> in 2018)</a></li>
<li><a href="#how-do-you-read-from-stdin-score-1462727-in-2018">78: How do you read from stdin? (score <span>1462727</span> in 2018)</a></li>
<li><a href="#how-do-i-get-the-row-count-of-a-pandas-dataframe-score-1456763-in-2019">79: How do I get the row count of a pandas DataFrame? (score <span>1456763</span> in 2019)</a></li>
<li><a href="#way-to-create-multiline-comments-in-python-score-1449100-in-2019">80: Way to create multiline comments in Python? (score <span>1449100</span> in 2019)</a></li>
<li><a href="#how-to-clone-or-copy-a-list-score-1446611-in-2019">81: How to clone or copy a list? (score <span>1446611</span> in 2019)</a></li>
<li><a href="#python-add-new-item-to-dictionary-score-1441083-in-2016">82: Python add new item to dictionary (score <span>1441083</span> in 2016)</a></li>
<li><a href="#delete-column-from-pandas-dataframe-score-1437865-in-2019">83: Delete column from pandas DataFrame (score <span>1437865</span> in 2019)</a></li>
<li><a href="#how-to-check-if-the-string-is-empty-score-1432962-in-2019">84: How to check if the string is empty? (score <span>1432962</span> in 2019)</a></li>
<li><a href="#difference-between-del-remove-and-pop-on-lists-score-1429816-in-2012">85: Difference between del, remove and pop on lists (score <span>1429816</span> in 2012)</a></li>
<li><a href="#delete-an-element-from-a-dictionary-score-1418712-in-2019">86: Delete an element from a dictionary (score <span>1418712</span> in 2019)</a></li>
<li><a href="#null-object-in-python-score-1404774-in-2013">87: null object in Python? (score <span>1404774</span> in 2013)</a></li>
<li><a href="#how-can-i-do-a-line-break-line-continuation-in-python-score-1403503-in-2018">88: How can I do a line break (line continuation) in Python? (score <span>1403503</span> in 2018)</a></li>
<li><a href="#save-plot-to-image-file-instead-of-displaying-it-using-matplotlib-score-1400228-in-2018">89: Save plot to image file instead of displaying it using Matplotlib (score <span>1400228</span> in 2018)</a></li>
<li><a href="#how-do-i-check-what-version-of-python-is-running-my-script-score-1394392-in-2011">90: How do I check what version of Python is running my script? (score <span>1394392</span> in 2011)</a></li>
<li><a href="#writing-a-list-to-a-file-with-python-score-1386411-in-2016">91: Writing a list to a file with Python (score <span>1386411</span> in 2016)</a></li>
<li><a href="#how-to-delete-a-character-from-a-string-using-python-score-1381554-in-2018">92: How to delete a character from a string using Python (score <span>1381554</span> in 2018)</a></li>
<li><a href="#how-to-comment-out-a-block-of-code-in-python-score-1371641-in-2018">93: How to comment out a block of code in Python (score <span>1371641</span> in 2018)</a></li>
<li><a href="#terminating-a-python-script-score-1362795-in-2016">94: Terminating a Python script (score <span>1362795</span> in 2016)</a></li>
<li><a href="#how-to-import-other-python-files-score-1351747-in-2018">95: How to import other Python files? (score <span>1351747</span> in 2018)</a></li>
<li><a href="#how-can-i-reverse-a-list-in-python-score-1346403-in-2018">96: How can I reverse a list in Python? (score <span>1346403</span> in 2018)</a></li>
<li><a href="#how-do-i-specify-new-lines-on-python-when-writing-on-files-score-1343781-in-2019">97: How do I specify new lines on Python, when writing on files? (score <span>1343781</span> in 2019)</a></li>
<li><a href="#removing-duplicates-in-lists-score-1337045-in-2019">98: Removing duplicates in lists (score <span>1337045</span> in 2019)</a></li>
<li><a href="#get-unique-values-from-a-list-in-python-score-1335592-in-2019">99: Get unique values from a list in python (score <span>1335592</span> in 2019)</a></li>
<li><a href="#python-error-importerror-no-module-named-score-1319040-in-2017">100: Python error “ImportError: No module named” (score <span>1319040</span> in 2017)</a></li>
</ul>
</nav>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="iterating-over-dictionaries-using-for-loops-score-4065148-in-2017" class="level3">
<h3>1: Iterating over dictionaries using ‘for’ loops (score <a href="https://stackoverflow.com/q/3294889.html">4065148</a> in 2017)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>I am a bit puzzled by the following code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>d <span class="op">=</span> {<span class="st">&#39;x&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;y&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;z&#39;</span>: <span class="dv">3</span>} </span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="cf">for</span> key <span class="kw">in</span> d:</span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="bu">print</span> key, <span class="st">&#39;corresponds to&#39;</span>, d[key]</span></code></pre></div>
<p>What I don’t understand is the <code>key</code> portion. How does Python recognize that it needs only to read the key from the dictionary? Is <code>key</code> a special word in Python? Or is it simply a variable?</p>
</section>
<section id="answer-accepted-score-5011" class="level4">
<h4>Answer accepted (score 5011)</h4>
<p><code>key</code> is just a variable name.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="cf">for</span> key <span class="kw">in</span> d:</span></code></pre></div>
<p>will simply loop over the keys in the dictionary, rather than the keys and values. To loop over both key and value you can use the following:</p>
<p>For Python 2.x:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> d.iteritems():</span></code></pre></div>
<p>For Python 3.x:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> d.items():</span></code></pre></div>
<p>To test for yourself, change the word <code>key</code> to <code>poop</code>.</p>
<p>
For Python 3.x, <code>iteritems()</code> has been replaced with simply <code>items()</code>, which returns a set-like view backed by the dict, like <code>iteritems()</code> but even better. This is also available in 2.7 as <code>viewitems()</code>.
</p>
<p>The operation <code>items()</code> will work for both 2 and 3, but in 2 it will return a list of the dictionary’s <code>(key, value)</code> pairs, which will not reflect changes to the dict that happen after the <code>items()</code> call. If you want the 2.x behavior in 3.x, you can call <code>list(d.items())</code>.</p>
</section>
<section id="answer-2-score-401" class="level4">
<h4>Answer 2 (score 401)</h4>
<p>It’s not that key is a special word, but that dictionaries implement the iterator protocol. You could do this in your class, e.g. see <a href="https://stackoverflow.com/questions/19151/build-a-basic-python-iterator/24377#24377">this question</a> for how to build class iterators.</p>
<p>In the case of dictionaries, it’s implemented at the C level. The details are available in <a href="http://www.python.org/dev/peps/pep-0234/" rel="noreferrer">PEP 234</a>. In particular, the section titled “Dictionary Iterators”:</p>
<blockquote>
<ul>
<li>
<p>
Dictionaries implement a tp_iter slot that returns an efficient iterator that iterates over the keys of the dictionary. […] This means that we can write
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">dict</span>: ...</span></code></pre></div>
<p>which is equivalent to, but much faster than</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">dict</span>.keys(): ...</span></code></pre></div>
<p>
as long as the restriction on modifications to the dictionary (either by the loop or by another thread) are not violated.
</p>
</li>
<li>
<p>
Add methods to dictionaries that return different kinds of iterators explicitly:
</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="cf">for</span> key <span class="kw">in</span> <span class="bu">dict</span>.iterkeys(): ...</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="cf">for</span> value <span class="kw">in</span> <span class="bu">dict</span>.itervalues(): ...</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="cf">for</span> key, value <span class="kw">in</span> <span class="bu">dict</span>.iteritems(): ...</span></code></pre></div>
<p>
This means that <code>for x in dict</code> is shorthand for <code>for x in dict.iterkeys()</code>.
</p>
</li>
</ul>
</blockquote>
<p>In Python 3, <code>dict.iterkeys()</code>, <code>dict.itervalues()</code> and <code>dict.iteritems()</code> are no longer supported. Use <code>dict.keys()</code>, <code>dict.values()</code> and <code>dict.items()</code> instead.</p>
</section>
<section id="answer-3-score-189" class="level4">
<h4>Answer 3 (score 189)</h4>
<p>Iterating over a <code>dict</code> iterates through its keys in no particular order, as you can see here:</p>
<p>Edit: (This is <strong>no longer the case in <a href="https://stackoverflow.com/questions/39980323/dictionaries-are-ordered-in-python-3-6">Python3.6</a></strong>, but note that it’s <strong>not guaranteed</strong> behaviour yet)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">&gt;&gt;&gt;</span> d <span class="op">=</span> {<span class="st">&#39;x&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;y&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;z&#39;</span>: <span class="dv">3</span>} </span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(d)</span>
<span id="cb8-3"><a href="#cb8-3"></a>[<span class="st">&#39;y&#39;</span>, <span class="st">&#39;x&#39;</span>, <span class="st">&#39;z&#39;</span>]</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="op">&gt;&gt;&gt;</span> d.keys()</span>
<span id="cb8-5"><a href="#cb8-5"></a>[<span class="st">&#39;y&#39;</span>, <span class="st">&#39;x&#39;</span>, <span class="st">&#39;z&#39;</span>]</span></code></pre></div>
<p>For your example, it is a better idea to use <code>dict.items()</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">&gt;&gt;&gt;</span> d.items()</span>
<span id="cb9-2"><a href="#cb9-2"></a>[(<span class="st">&#39;y&#39;</span>, <span class="dv">2</span>), (<span class="st">&#39;x&#39;</span>, <span class="dv">1</span>), (<span class="st">&#39;z&#39;</span>, <span class="dv">3</span>)]</span></code></pre></div>
<p>This gives you a list of tuples. When you loop over them like this, each tuple is unpacked into <code>k</code> and <code>v</code> automatically:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="cf">for</span> k,v <span class="kw">in</span> d.items():</span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="bu">print</span>(k, <span class="st">&#39;corresponds to&#39;</span>, v)</span></code></pre></div>
<p>Using <code>k</code> and <code>v</code> as variable names when looping over a <code>dict</code> is quite common if the body of the loop is only a few lines. For more complicated loops it may be a good idea to use more descriptive names:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="cf">for</span> letter, number <span class="kw">in</span> d.items():</span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="bu">print</span>(letter, <span class="st">&#39;corresponds to&#39;</span>, number)</span></code></pre></div>
<p>It’s a good idea to get into the habit of using format strings:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a><span class="cf">for</span> letter, number <span class="kw">in</span> d.items():</span>
<span id="cb12-2"><a href="#cb12-2"></a>    <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{0}</span><span class="st"> corresponds to </span><span class="sc">{1}</span><span class="st">&#39;</span>.<span class="bu">format</span>(letter, number))</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="does-python-have-a-string-contains-substring-method-score-3792442-in-2017" class="level3">
<h3>2: Does Python have a string ‘contains’ substring method? (score <a href="https://stackoverflow.com/q/3437059.html">3792442</a> in 2017)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>I’m looking for a <code>string.contains</code> or <code>string.indexof</code> method in Python.</p>
<p>I want to do:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="cf">if</span> <span class="kw">not</span> somestring.contains(<span class="st">&quot;blah&quot;</span>):</span>
<span id="cb13-2"><a href="#cb13-2"></a>   <span class="cf">continue</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-5757" class="level4">
<h4>Answer accepted (score 5757)</h4>
<p>You can use the <a href="https://docs.python.org/reference/expressions.html#membership-test-details" rel="noreferrer"><code>in</code> operator</a>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="cf">if</span> <span class="st">&quot;blah&quot;</span> <span class="kw">not</span> <span class="kw">in</span> somestring: </span>
<span id="cb14-2"><a href="#cb14-2"></a>    <span class="cf">continue</span></span></code></pre></div>
</section>
<section id="answer-2-score-601" class="level4">
<h4>Answer 2 (score 601)</h4>
<p>If it’s just a substring search you can use <code>string.find("substring")</code>.</p>
<p>You do have to be a little careful with <a href="https://docs.python.org/library/stdtypes.html#str.find" rel="noreferrer"><code>find</code></a>, <a href="https://docs.python.org/library/stdtypes.html#str.index" rel="noreferrer"><code>index</code></a>, and <a href="https://docs.python.org/reference/expressions.html#membership-test-operations" rel="noreferrer"><code>in</code></a> though, as they are substring searches. In other words, this:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>s <span class="op">=</span> <span class="st">&quot;This be a string&quot;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="cf">if</span> s.find(<span class="st">&quot;is&quot;</span>) <span class="op">==</span> <span class="dv">-1</span>:</span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="bu">print</span> <span class="st">&quot;No &#39;is&#39; here!&quot;</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="cf">else</span>:</span>
<span id="cb15-5"><a href="#cb15-5"></a>    <span class="bu">print</span> <span class="st">&quot;Found &#39;is&#39; in the string.&quot;</span></span></code></pre></div>
<p>It would print <code>Found 'is' in the string.</code> Similarly, <code>if "is" in s:</code> would evaluate to <code>True</code>. This may or may not be what you want.</p>
</section>
<section id="answer-3-score-161" class="level4">
<h4>Answer 3 (score 161)</h4>
<p><code>if needle in haystack:</code> is the normal use, as <span class="citation" data-cites="Michael">@Michael</span> says – it relies on the <a href="https://docs.python.org/reference/expressions.html#membership-test-details" rel="noreferrer"><code>in</code></a> operator, more readable and faster than a method call.</p>
<p>If you truly need a method instead of an operator (e.g. to do some weird <code>key=</code> for a very peculiar sort…?), that would be <a href="https://docs.python.org/reference/datamodel.html#object.__contains__" rel="noreferrer"><code>'haystack'.__contains__</code></a>. But since your example is for use in an <code>if</code>, I guess you don’t really mean what you say;-). It’s not good form (nor readable, nor efficient) to use special methods directly – they’re meant to be used, instead, through the operators and builtins that delegate to them.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-check-whether-a-file-exists-without-exceptions-score-3681360-in-2018" class="level3">
<h3>3: How do I check whether a file exists without exceptions? (score <a href="https://stackoverflow.com/q/82831.html">3681360</a> in 2018)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>How do I see if a file exists or not, without using the <a href="https://docs.python.org/3.6/reference/compound_stmts.html#try" rel="noreferrer"><code>try</code></a> statement?</p>
</section>
<section id="answer-2-score-4830" class="level4">
<h4>Answer 2 (score 4830)</h4>
<p>If the reason you’re checking is so you can do something like <code>if file_exists: open_it()</code>, it’s safer to use a <code>try</code> around the attempt to open it. Checking and then opening risks the file being deleted or moved or something between when you check and when you try to open it.</p>
<p>If you’re not planning to open the file immediately, you can use <a href="https://docs.python.org/library/os.path.html#os.path.isfile" rel="noreferrer"><code>os.path.isfile</code></a></p>
<blockquote>
Return <code>True</code> if path is an existing regular file. This follows symbolic links, so both <a href="https://docs.python.org/library/os.path.html#os.path.islink" rel="noreferrer">islink()</a> and <a href="https://docs.python.org/library/os.path.html#os.path.isfile" rel="noreferrer">isfile()</a> can be true for the same path.
</blockquote>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="im">import</span> os.path</span>
<span id="cb16-2"><a href="#cb16-2"></a>os.path.isfile(fname) </span></code></pre></div>
<p>if you need to be sure it’s a file.</p>
<p>Starting with Python 3.4, the <a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.is_file" rel="noreferrer"><code>pathlib</code> module</a> offers an object-oriented approach (backported to <code>pathlib2</code> in Python 2.7):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>my_file <span class="op">=</span> Path(<span class="st">&quot;/path/to/file&quot;</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="cf">if</span> my_file.is_file():</span>
<span id="cb17-5"><a href="#cb17-5"></a>    <span class="co"># file exists</span></span></code></pre></div>
<p>To check a directory, do:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="cf">if</span> my_file.is_dir():</span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="co"># directory exists</span></span></code></pre></div>
<p>To check whether a <code>Path</code> object exists independently of whether is it a file or directory, use <code>exists()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="cf">if</span> my_file.exists():</span>
<span id="cb19-2"><a href="#cb19-2"></a>    <span class="co"># path exists</span></span></code></pre></div>
<p>You can also use <code>resolve(strict=True)</code> in a <code>try</code> block:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="cf">try</span>:</span>
<span id="cb20-2"><a href="#cb20-2"></a>    my_abs_path <span class="op">=</span> my_file.resolve(strict<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="co"># doesn&#39;t exist</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="cf">else</span>:</span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="co"># exists</span></span></code></pre></div>
</section>
<section id="answer-3-score-1993" class="level4">
<h4>Answer 3 (score 1993)</h4>
<p>You have the <a href="https://docs.python.org/2/library/os.path.html#os.path.exists" rel="noreferrer"><code>os.path.exists</code></a> function:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="im">import</span> os.path</span>
<span id="cb21-2"><a href="#cb21-2"></a>os.path.exists(file_path)</span></code></pre></div>
<p>This returns <code>True</code> for both files and directories but you can instead use</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>os.path.isfile(file_path)</span></code></pre></div>
<p>to test if it’s a file specifically. It follows symlinks.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-parse-a-string-to-a-float-or-int-score-3665519-in-2019" class="level3">
<h3>4: How do I parse a string to a float or int? (score <a href="https://stackoverflow.com/q/379906.html">3665519</a> in 2019)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>In Python, how can I parse a numeric string like <code>"545.2222"</code> to its corresponding float value, <code>545.2222</code>? Or parse the string <code>"31"</code> to an integer, <code>31</code>?</p>
<p>I just want to know how to parse a <em>float</em> <code>str</code> to a <code>float</code>, and (separately) an <em>int</em> <code>str</code> to an <code>int</code>.</p>
</section>
<section id="answer-accepted-score-2443" class="level4">
<h4>Answer accepted (score 2443)</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="st">&quot;545.2222&quot;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">float</span>(a)</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="fl">545.22220000000004</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="bu">float</span>(a))</span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="dv">545</span></span></code></pre></div>
</section>
<section id="answer-2-score-487" class="level4">
<h4>Answer 2 (score 487)</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">def</span> num(s):</span>
<span id="cb24-2"><a href="#cb24-2"></a>    <span class="cf">try</span>:</span>
<span id="cb24-3"><a href="#cb24-3"></a>        <span class="cf">return</span> <span class="bu">int</span>(s)</span>
<span id="cb24-4"><a href="#cb24-4"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb24-5"><a href="#cb24-5"></a>        <span class="cf">return</span> <span class="bu">float</span>(s)</span></code></pre></div>
</section>
<section id="answer-3-score-477" class="level4">
<h4>Answer 3 (score 477)</h4>
<h5>
Python method to check if a string is a float:
</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">def</span> is_float(value):</span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="cf">try</span>:</span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="bu">float</span>(value)</span>
<span id="cb25-4"><a href="#cb25-4"></a>    <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>  <span class="cf">except</span>:</span>
<span id="cb25-6"><a href="#cb25-6"></a>    <span class="cf">return</span> <span class="va">False</span></span></code></pre></div>
<p>A longer and more accurate name for this function could be: <code>is_convertible_to_float(value)</code></p>
<h5>
What is, and is not a float in <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a> may surprise you:
</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a>val                   is_float(val) Note</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="op">--------------------</span>  <span class="op">----------</span>   <span class="op">--------------------------------</span></span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="co">&quot;&quot;</span>                    <span class="va">False</span>        Blank string</span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="co">&quot;127&quot;</span>                 <span class="va">True</span>         Passed string</span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="va">True</span>                  <span class="va">True</span>         Pure sweet Truth</span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="co">&quot;True&quot;</span>                <span class="va">False</span>        Vile contemptible lie</span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="va">False</span>                 <span class="va">True</span>         So false it becomes true</span>
<span id="cb26-8"><a href="#cb26-8"></a><span class="co">&quot;123.456&quot;</span>             <span class="va">True</span>         Decimal</span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="co">&quot;      -127    &quot;</span>      <span class="va">True</span>         Spaces trimmed</span>
<span id="cb26-10"><a href="#cb26-10"></a><span class="co">&quot;</span><span class="ch">\t\n</span><span class="co">12</span><span class="ch">\r\n</span><span class="co">&quot;</span>          <span class="va">True</span>         whitespace ignored</span>
<span id="cb26-11"><a href="#cb26-11"></a><span class="co">&quot;NaN&quot;</span>                 <span class="va">True</span>         Not a number</span>
<span id="cb26-12"><a href="#cb26-12"></a><span class="co">&quot;NaNanananaBATMAN&quot;</span>    <span class="va">False</span>        I am Batman</span>
<span id="cb26-13"><a href="#cb26-13"></a><span class="co">&quot;-iNF&quot;</span>                <span class="va">True</span>         Negative infinity</span>
<span id="cb26-14"><a href="#cb26-14"></a><span class="co">&quot;123.E4&quot;</span>              <span class="va">True</span>         Exponential notation</span>
<span id="cb26-15"><a href="#cb26-15"></a><span class="co">&quot;.1&quot;</span>                  <span class="va">True</span>         mantissa only</span>
<span id="cb26-16"><a href="#cb26-16"></a><span class="co">&quot;1,234&quot;</span>               <span class="va">False</span>        Commas gtfo</span>
<span id="cb26-17"><a href="#cb26-17"></a><span class="co">u&#39;</span><span class="ch">\x30</span><span class="co">&#39;</span>               <span class="va">True</span>         Unicode <span class="kw">is</span> fine.</span>
<span id="cb26-18"><a href="#cb26-18"></a><span class="co">&quot;NULL&quot;</span>                <span class="va">False</span>        Null <span class="kw">is</span> <span class="kw">not</span> special</span>
<span id="cb26-19"><a href="#cb26-19"></a><span class="bn">0x3fade</span>               <span class="va">True</span>         Hexadecimal</span>
<span id="cb26-20"><a href="#cb26-20"></a><span class="co">&quot;6e7777777777777&quot;</span>     <span class="va">True</span>         Shrunk to infinity</span>
<span id="cb26-21"><a href="#cb26-21"></a><span class="co">&quot;1.797693e+308&quot;</span>       <span class="va">True</span>         This <span class="kw">is</span> <span class="bu">max</span> value</span>
<span id="cb26-22"><a href="#cb26-22"></a><span class="co">&quot;infinity&quot;</span>            <span class="va">True</span>         Same <span class="im">as</span> inf</span>
<span id="cb26-23"><a href="#cb26-23"></a><span class="co">&quot;infinityandBEYOND&quot;</span>   <span class="va">False</span>        Extra characters wreck it</span>
<span id="cb26-24"><a href="#cb26-24"></a><span class="co">&quot;12.34.56&quot;</span>            <span class="va">False</span>        Only one dot allowed</span>
<span id="cb26-25"><a href="#cb26-25"></a><span class="co">u&#39;四&#39;</span>                 <span class="va">False</span>        Japanese <span class="st">&#39;4&#39;</span> <span class="kw">is</span> <span class="kw">not</span> a <span class="bu">float</span>.</span>
<span id="cb26-26"><a href="#cb26-26"></a><span class="co">&quot;#56&quot;</span>                 <span class="va">False</span>        Pound sign</span>
<span id="cb26-27"><a href="#cb26-27"></a><span class="co">&quot;56%&quot;</span>                 <span class="va">False</span>        Percent of what?</span>
<span id="cb26-28"><a href="#cb26-28"></a><span class="co">&quot;0E0&quot;</span>                 <span class="va">True</span>         Exponential, move dot <span class="dv">0</span> places</span>
<span id="cb26-29"><a href="#cb26-29"></a><span class="dv">0</span><span class="op">**</span><span class="dv">0</span>                  <span class="va">True</span>         <span class="dv">0</span>___0  Exponentiation</span>
<span id="cb26-30"><a href="#cb26-30"></a><span class="co">&quot;-5e-5&quot;</span>               <span class="va">True</span>         Raise to a negative number</span>
<span id="cb26-31"><a href="#cb26-31"></a><span class="co">&quot;+1e1&quot;</span>                <span class="va">True</span>         Plus <span class="kw">is</span> OK <span class="cf">with</span> exponent</span>
<span id="cb26-32"><a href="#cb26-32"></a><span class="co">&quot;+1e1^5&quot;</span>              <span class="va">False</span>        Fancy exponent <span class="kw">not</span> interpreted</span>
<span id="cb26-33"><a href="#cb26-33"></a><span class="co">&quot;+1e1.3&quot;</span>              <span class="va">False</span>        No decimals <span class="kw">in</span> exponent</span>
<span id="cb26-34"><a href="#cb26-34"></a><span class="co">&quot;-+1&quot;</span>                 <span class="va">False</span>        Make up your mind</span>
<span id="cb26-35"><a href="#cb26-35"></a><span class="co">&quot;(1)&quot;</span>                 <span class="va">False</span>        Parenthesis <span class="kw">is</span> bad</span></code></pre></div>
<p>You think you know what numbers are? You are not so good as you think! Not big surprise.</p>
<h5>
Don’t use this code on life-critical software!
</h2>
<p>Catching broad exceptions this way, killing canaries and gobbling the exception creates a tiny chance that a valid float as string will return false. The <code>float(...)</code> line of code can failed for any of a thousand reasons that have nothing to do with the contents of the string. But if you’re writing life-critical software in a duck-typing prototype language like Python, then you’ve got much larger problems.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-list-all-files-of-a-directory-score-3621699-in-2017" class="level3">
<h3>5: How do I list all files of a directory? (score <a href="https://stackoverflow.com/q/3207219.html">3621699</a> in 2017)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<p>How can I list all files of a directory in Python and add them to a <code>list</code>?</p>
</section>
<section id="answer-2-score-3664" class="level4">
<h4>Answer 2 (score 3664)</h4>
<p><a href="https://docs.python.org/2/library/os.html#os.listdir" rel="noreferrer" title="os.listdir"><code>os.listdir()</code></a> will get you everything that’s in a directory - files and directories.</p>
<p>If you want <em>just</em> files, you could either filter this down using <a href="https://docs.python.org/2/library/os.path.html#module-os.path" rel="noreferrer"><code>os.path</code></a>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="im">from</span> os <span class="im">import</span> listdir</span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="im">from</span> os.path <span class="im">import</span> isfile, join</span>
<span id="cb27-3"><a href="#cb27-3"></a>onlyfiles <span class="op">=</span> [f <span class="cf">for</span> f <span class="kw">in</span> listdir(mypath) <span class="cf">if</span> isfile(join(mypath, f))]</span></code></pre></div>
<p>or you could use <a href="https://docs.python.org/2/library/os.html#os.walk" rel="noreferrer" title="os.walk"><code>os.walk()</code></a> which will yield two lists for each directory it visits - splitting into files and dirs for you. If you only want the top directory you can just break the first time it yields</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="im">from</span> os <span class="im">import</span> walk</span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a>f <span class="op">=</span> []</span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="cf">for</span> (dirpath, dirnames, filenames) <span class="kw">in</span> walk(mypath):</span>
<span id="cb28-5"><a href="#cb28-5"></a>    f.extend(filenames)</span>
<span id="cb28-6"><a href="#cb28-6"></a>    <span class="cf">break</span></span></code></pre></div>
</section>
<section id="answer-3-score-1475" class="level4">
<h4>Answer 3 (score 1475)</h4>
<p>I prefer using the <a href="https://docs.python.org/library/glob.html" rel="noreferrer"><code>glob</code></a> module, as it does pattern matching and expansion.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="im">import</span> glob</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="bu">print</span>(glob.glob(<span class="st">&quot;/home/adam/*.txt&quot;</span>))</span></code></pre></div>
<p>It will return a list with the queried files:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a>[<span class="st">&#39;/home/adam/file1.txt&#39;</span>, <span class="st">&#39;/home/adam/file2.txt&#39;</span>, .... ]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="finding-the-index-of-an-item-given-a-list-containing-it-in-python-score-3448930-in-2019" class="level3">
<h3>6: Finding the index of an item given a list containing it in Python (score <a href="https://stackoverflow.com/q/176918.html">3448930</a> in 2019)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p>For a list <code>["foo", "bar", "baz"]</code> and an item in the list <code>"bar"</code>, how do I get its index (1) in Python?</p>
</section>
<section id="answer-accepted-score-4050" class="level4">
<h4>Answer accepted (score 4050)</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>].index(<span class="st">&quot;bar&quot;</span>)</span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="dv">1</span></span></code></pre></div>
<p>Reference: <a href="http://docs.python.org/2/tutorial/datastructures.html#more-on-lists" rel="noreferrer">Data Structures &gt; More on Lists</a></p>
<h5>
Caveats follow
</h1>
<p>Note that while this is perhaps the cleanest way to answer the question <em>as asked</em>, <code>index</code> is a rather weak component of the <code>list</code> API, and I can’t remember the last time I used it in anger. It’s been pointed out to me in the comments that because this answer is heavily referenced, it should be made more complete. Some caveats about <code>list.index</code> follow. It is probably worth initially taking a look at the docstring for it:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="bu">list</span>.index.__doc__)</span>
<span id="cb32-2"><a href="#cb32-2"></a>L.index(value, [start, [stop]]) <span class="op">-&gt;</span> integer <span class="op">--</span> <span class="cf">return</span> first index of value.</span>
<span id="cb32-3"><a href="#cb32-3"></a>Raises <span class="pp">ValueError</span> <span class="cf">if</span> the value <span class="kw">is</span> <span class="kw">not</span> present.</span></code></pre></div>
<h5>
Linear time-complexity in list length
</h2>
<p>An <code>index</code> call checks every element of the list in order, until it finds a match. If your list is long, and you don’t know roughly where in the list it occurs, this search could become a bottleneck. In that case, you should consider a different data structure. Note that if you know roughly where to find the match, you can give <code>index</code> a hint. For instance, in this snippet, <code>l.index(999_999, 999_990, 1_000_000)</code> is roughly five orders of magnitude faster than straight <code>l.index(999_999)</code>, because the former only has to search 10 entries, while the latter searches a million:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> timeit</span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="op">&gt;&gt;&gt;</span> timeit.timeit(<span class="st">&#39;l.index(999_999)&#39;</span>, setup<span class="op">=</span><span class="st">&#39;l = list(range(0, 1_000_000))&#39;</span>, number<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb33-3"><a href="#cb33-3"></a><span class="fl">9.356267921015387</span></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="op">&gt;&gt;&gt;</span> timeit.timeit(<span class="st">&#39;l.index(999_999, 999_990, 1_000_000)&#39;</span>, setup<span class="op">=</span><span class="st">&#39;l = list(range(0, 1_000_000))&#39;</span>, number<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="fl">0.0004404920036904514</span></span></code></pre></div>
<h5>
Only returns the index of the <em>first match</em> to its argument
</h2>
<p>A call to <code>index</code> searches through the list in order until it finds a match, and <em>stops there.</em> If you expect to need indices of more matches, you should use a list comprehension, or generator expression.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="dv">1</span>, <span class="dv">1</span>].index(<span class="dv">1</span>)</span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="dv">0</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="op">&gt;&gt;&gt;</span> [i <span class="cf">for</span> i, e <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>]) <span class="cf">if</span> e <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb34-4"><a href="#cb34-4"></a>[<span class="dv">0</span>, <span class="dv">2</span>]</span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="op">&gt;&gt;&gt;</span> g <span class="op">=</span> (i <span class="cf">for</span> i, e <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>]) <span class="cf">if</span> e <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">next</span>(g)</span>
<span id="cb34-7"><a href="#cb34-7"></a><span class="dv">0</span></span>
<span id="cb34-8"><a href="#cb34-8"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">next</span>(g)</span>
<span id="cb34-9"><a href="#cb34-9"></a><span class="dv">2</span></span></code></pre></div>
<p>Most places where I once would have used <code>index</code>, I now use a list comprehension or generator expression because they’re more generalizable. So if you’re considering reaching for <code>index</code>, take a look at these excellent python features.</p>
<h5>
Throws if element not present in list
</h2>
<p>A call to <code>index</code> results in a <code>ValueError</code> if the item’s not present.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="dv">1</span>, <span class="dv">1</span>].index(<span class="dv">2</span>)</span>
<span id="cb35-2"><a href="#cb35-2"></a>Traceback (most recent call last):</span>
<span id="cb35-3"><a href="#cb35-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="pp">ValueError</span>: <span class="dv">2</span> <span class="kw">is</span> <span class="kw">not</span> <span class="kw">in</span> <span class="bu">list</span></span></code></pre></div>
<p>If the item might not be present in the list, you should either</p>
<ol>
<li>
Check for it first with <code>item in my_list</code> (clean, readable approach), or
</li>
<li>
Wrap the <code>index</code> call in a <code>try/except</code> block which catches <code>ValueError</code> (probably faster, at least when the list to search is long, and the item is usually present.)
</li>
</ol>
</section>
<section id="answer-2-score-861" class="level4">
<h4>Answer 2 (score 861)</h4>
<p>One thing that is really helpful in learning Python is to use the interactive help function:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">help</span>([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>])</span>
<span id="cb36-2"><a href="#cb36-2"></a>Help on <span class="bu">list</span> <span class="bu">object</span>:</span>
<span id="cb36-3"><a href="#cb36-3"></a></span>
<span id="cb36-4"><a href="#cb36-4"></a><span class="kw">class</span> <span class="bu">list</span>(<span class="bu">object</span>)</span>
<span id="cb36-5"><a href="#cb36-5"></a> ...</span>
<span id="cb36-6"><a href="#cb36-6"></a></span>
<span id="cb36-7"><a href="#cb36-7"></a> <span class="op">|</span></span>
<span id="cb36-8"><a href="#cb36-8"></a> <span class="op">|</span>  index(...)</span>
<span id="cb36-9"><a href="#cb36-9"></a> <span class="op">|</span>      L.index(value, [start, [stop]]) <span class="op">-&gt;</span> integer <span class="op">--</span> <span class="cf">return</span> first index of value</span>
<span id="cb36-10"><a href="#cb36-10"></a> <span class="op">|</span></span></code></pre></div>
<p>which will often lead you to the method you are looking for.</p>
</section>
<section id="answer-3-score-511" class="level4">
<h4>Answer 3 (score 511)</h4>
<p>The majority of answers explain how to find <strong>a single index</strong>, but their methods do not return multiple indexes if the item is in the list multiple times. Use <a href="https://docs.python.org/3.6/library/functions.html#enumerate" rel="noreferrer"><code>enumerate()</code></a>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a><span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]):</span>
<span id="cb37-2"><a href="#cb37-2"></a>    <span class="cf">if</span> j <span class="op">==</span> <span class="st">&#39;bar&#39;</span>:</span>
<span id="cb37-3"><a href="#cb37-3"></a>        <span class="bu">print</span>(i)</span></code></pre></div>
<p>The <code>index()</code> function only returns the first occurrence, while <code>enumerate()</code> returns all occurrences.</p>
<p>As a list comprehension:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a>[i <span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]) <span class="cf">if</span> j <span class="op">==</span> <span class="st">&#39;bar&#39;</span>]</span></code></pre></div>
<hr>
<p>Here’s also another small solution with <a href="http://docs.python.org/2/library/itertools.html#itertools.count" rel="noreferrer"><code>itertools.count()</code></a> (which is pretty much the same approach as enumerate):</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a><span class="im">from</span> itertools <span class="im">import</span> izip <span class="im">as</span> <span class="bu">zip</span>, count <span class="co"># izip for maximum efficiency</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>[i <span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">zip</span>(count(), [<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]) <span class="cf">if</span> j <span class="op">==</span> <span class="st">&#39;bar&#39;</span>]</span></code></pre></div>
<p>This is more efficient for larger lists than using <code>enumerate()</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a>$ python <span class="op">-</span>m timeit <span class="op">-</span>s <span class="st">&quot;from itertools import izip as zip, count&quot;</span> <span class="st">&quot;[i for i, j in zip(count(), [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]*500) if j == &#39;bar&#39;]&quot;</span></span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">174</span> usec per loop</span>
<span id="cb40-3"><a href="#cb40-3"></a>$ python <span class="op">-</span>m timeit <span class="st">&quot;[i for i, j in enumerate([&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]*500) if j == &#39;bar&#39;]&quot;</span></span>
<span id="cb40-4"><a href="#cb40-4"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">196</span> usec per loop</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-read-a-file-line-by-line-into-a-list-score-3366083-in-2018" class="level3">
<h3>7: How to read a file line-by-line into a list? (score <a href="https://stackoverflow.com/q/3277503.html">3366083</a> in 2018)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>How do I read every line of a file in Python and store each line as an element in a list?</p>
<p>I want to read the file line by line and append each line to the end of the list.</p>
</section>
<section id="answer-2-score-2035" class="level4">
<h4>Answer 2 (score 2035)</h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> f:</span>
<span id="cb41-2"><a href="#cb41-2"></a>    content <span class="op">=</span> f.readlines()</span>
<span id="cb41-3"><a href="#cb41-3"></a><span class="co"># you may also want to remove whitespace characters like `\n` at the end of each line</span></span>
<span id="cb41-4"><a href="#cb41-4"></a>content <span class="op">=</span> [x.strip() <span class="cf">for</span> x <span class="kw">in</span> content] </span></code></pre></div>
</section>
<section id="answer-3-score-915" class="level4">
<h4>Answer 3 (score 915)</h4>
<p>See <a href="http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files" rel="noreferrer">Input and Ouput</a>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;filename&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb42-2"><a href="#cb42-2"></a>    lines <span class="op">=</span> f.readlines()</span></code></pre></div>
<p>or with stripping the newline character:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a>lines <span class="op">=</span> [line.rstrip(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>) <span class="cf">for</span> line <span class="kw">in</span> <span class="bu">open</span>(<span class="st">&#39;filename&#39;</span>)]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="calling-an-external-command-in-python-score-3202147-in-2019" class="level3">
<h3>8: Calling an external command in Python (score <a href="https://stackoverflow.com/q/89228.html">3202147</a> in 2019)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>How do you call an external command (as if I’d typed it at the Unix shell or Windows command prompt) from within a Python script?</p>
</section>
<section id="answer-accepted-score-4312" class="level4">
<h4>Answer accepted (score 4312)</h4>
<p>Look at the <a href="https://docs.python.org/library/subprocess.html" rel="noreferrer">subprocess</a> module in the standard library:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a><span class="im">import</span> subprocess</span>
<span id="cb44-2"><a href="#cb44-2"></a>subprocess.run([<span class="st">&quot;ls&quot;</span>, <span class="st">&quot;-l&quot;</span>])</span></code></pre></div>
<p>The advantage of <code>subprocess</code> vs. <code>system</code> is that it is more flexible (you can get the <code>stdout</code>, <code>stderr</code>, the “real” status code, better error handling, etc…).</p>
<p>The <a href="https://docs.python.org/library/os.html#os.system" rel="noreferrer">official documentation</a> recommends the <code>subprocess</code> module over the alternative <code>os.system()</code>:</p>
<blockquote>
The <code>subprocess</code> module provides more powerful facilities for spawning new processes and retrieving their results; using that module is preferable to using this function [<a href="https://docs.python.org/library/os.html#os.system" rel="noreferrer"><code>os.system()</code></a>].
</blockquote>
<p>The <a href="https://docs.python.org/library/subprocess.html#replacing-older-functions-with-the-subprocess-module" rel="noreferrer">Replacing Older Functions with the subprocess Module</a> section in the <code>subprocess</code> documentation may have some helpful recipes.</p>
<p>For versions of Python before 3.5, use <code>call</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1"></a><span class="im">import</span> subprocess</span>
<span id="cb45-2"><a href="#cb45-2"></a>subprocess.call([<span class="st">&quot;ls&quot;</span>, <span class="st">&quot;-l&quot;</span>])</span></code></pre></div>
</section>
<section id="answer-2-score-2852" class="level4">
<h4>Answer 2 (score 2852)</h4>
<p>Here’s a summary of the ways to call external programs and the advantages and disadvantages of each:</p>
<ol>
<li>
<p>
<code>os.system("some_command with args")</code> passes the command and arguments to your system’s shell. This is nice because you can actually run multiple commands at once in this manner and set up pipes and input/output redirection. For example:
</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1"></a>os.system(<span class="st">&quot;some_command &lt; input_file | another_command &gt; output_file&quot;</span>)  </span>
<span id="cb46-2"><a href="#cb46-2"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3"></a><span class="op">&lt;/</span>ol<span class="op">&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4"></a></span>
<span id="cb46-5"><a href="#cb46-5"></a>However, <span class="cf">while</span> this <span class="kw">is</span> convenient, you have to manually handle the escaping of shell characters such <span class="im">as</span> spaces, etc.  On the other hand, this also lets you run commands which are simply shell commands <span class="kw">and</span> <span class="kw">not</span> actually external programs.  See <span class="op">&lt;</span>a href<span class="op">=</span><span class="st">&quot;https://docs.python.org/2/library/os.html#os.system&quot;</span> rel<span class="op">=</span><span class="st">&quot;noreferrer&quot;</span><span class="op">&gt;</span>the documentation<span class="op">&lt;/</span>a<span class="op">&gt;</span>.  </span>
<span id="cb46-6"><a href="#cb46-6"></a></span>
<span id="cb46-7"><a href="#cb46-7"></a><span class="op">&lt;</span>ol start<span class="op">=</span><span class="st">&quot;2&quot;</span><span class="op">&gt;</span></span>
<span id="cb46-8"><a href="#cb46-8"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>`stream <span class="op">=</span> os.popen(<span class="st">&quot;some_command with args&quot;</span>)` will do the same thing <span class="im">as</span> `os.system` <span class="cf">except</span> that it gives you a <span class="bu">file</span><span class="op">-</span>like <span class="bu">object</span> that you can use to access standard <span class="bu">input</span><span class="op">/</span>output <span class="cf">for</span> that process.  There are <span class="dv">3</span> other variants of popen that <span class="bu">all</span> handle the i<span class="op">/</span>o slightly differently.  If you <span class="cf">pass</span> everything <span class="im">as</span> a string, then your command <span class="kw">is</span> passed to the shell<span class="op">;</span> <span class="cf">if</span> you <span class="cf">pass</span> them <span class="im">as</span> a <span class="bu">list</span> then you don<span class="st">&#39;t need to worry about escaping anything.  See &lt;a href=&quot;https://docs.python.org/2/library/os.html#os.popen&quot; rel=&quot;noreferrer&quot;&gt;the documentation&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;</span></span>
<span id="cb46-9"><a href="#cb46-9"></a><span class="st">&lt;li&gt;&lt;p&gt;The `Popen` class of the `subprocess` module.  This is intended as a replacement for `os.popen` but has the downside of being slightly more complicated by virtue of being so comprehensive.  For example, you&#39;</span>d say:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb46-10"><a href="#cb46-10"></a></span>
<span id="cb46-11"><a href="#cb46-11"></a>```python</span>
<span id="cb46-12"><a href="#cb46-12"></a><span class="bu">print</span> subprocess.Popen(<span class="st">&quot;echo Hello World&quot;</span>, shell<span class="op">=</span><span class="va">True</span>, stdout<span class="op">=</span>subprocess.PIPE).stdout.read()</span></code></pre></div>
<p>instead of:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1"></a><span class="bu">print</span> os.popen(<span class="st">&quot;echo Hello World&quot;</span>).read()</span></code></pre></div>
but it is nice to have all of the options there in one unified class instead of 4 different popen functions. See <a href="https://docs.python.org/2/library/subprocess.html#popen-constructor" rel="noreferrer">the documentation</a>.
</li>
<li>
<p>
The <code>call</code> function from the <code>subprocess</code> module. This is basically just like the <code>Popen</code> class and takes all of the same arguments, but it simply waits until the command completes and gives you the return code. For example:
</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1"></a>return_code <span class="op">=</span> subprocess.call(<span class="st">&quot;echo Hello World&quot;</span>, shell<span class="op">=</span><span class="va">True</span>)  </span></code></pre></div>
See <a href="https://docs.python.org/2/library/subprocess.html#subprocess.call" rel="noreferrer">the documentation</a>.
</li>
<li>
<p>
If you’re on Python 3.5 or later, you can use the new <a href="https://docs.python.org/3.5/library/subprocess.html#subprocess.run" rel="noreferrer"><code>subprocess.run</code></a> function, which is a lot like the above but even more flexible and returns a <a href="https://docs.python.org/3.5/library/subprocess.html#subprocess.CompletedProcess" rel="noreferrer"><code>CompletedProcess</code></a> object when the command finishes executing.
</p>
</li>
<li>
<p>
The os module also has all of the fork/exec/spawn functions that you’d have in a C program, but I don’t recommend using them directly.
</p>
</li>
</ol>
<p>The <code>subprocess</code> module should probably be what you use.</p>
<p>Finally please be aware that for all methods where you pass the final command to be executed by the shell as a string and you are responsible for escaping it. <strong>There are serious security implications</strong> if any part of the string that you pass can not be fully trusted. For example, if a user is entering some/any part of the string. If you are unsure, only use these methods with constants. To give you a hint of the implications consider this code:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a><span class="bu">print</span> subprocess.Popen(<span class="st">&quot;echo </span><span class="sc">%s</span><span class="st"> &quot;</span> <span class="op">%</span> user_input, stdout<span class="op">=</span>PIPE).stdout.read()</span></code></pre></div>
<p>and imagine that the user enters something “my mama didnt love me &amp;&amp; rm -rf /” which could erase the whole filesystem.</p>
</section>
<section id="answer-3-score-318" class="level4">
<h4>Answer 3 (score 318)</h4>
<p>Typical implementation:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1"></a><span class="im">import</span> subprocess</span>
<span id="cb50-2"><a href="#cb50-2"></a></span>
<span id="cb50-3"><a href="#cb50-3"></a>p <span class="op">=</span> subprocess.Popen(<span class="st">&#39;ls&#39;</span>, shell<span class="op">=</span><span class="va">True</span>, stdout<span class="op">=</span>subprocess.PIPE, stderr<span class="op">=</span>subprocess.STDOUT)</span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="cf">for</span> line <span class="kw">in</span> p.stdout.readlines():</span>
<span id="cb50-5"><a href="#cb50-5"></a>    <span class="bu">print</span> line,</span>
<span id="cb50-6"><a href="#cb50-6"></a>retval <span class="op">=</span> p.wait()</span></code></pre></div>
<p>You are free to do what you want with the <code>stdout</code> data in the pipe. In fact, you can simply omit those parameters (<code>stdout=</code> and <code>stderr=</code>) and it’ll behave like <code>os.system()</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="converting-integer-to-string-score-3197810-in-2019" class="level3">
<h3>9: Converting integer to string? (score <a href="https://stackoverflow.com/q/961632.html">3197810</a> in 2019)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>I want to convert an integer to a string in Python. I am typecasting it in vain:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a>d <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>d.<span class="bu">str</span>()</span></code></pre></div>
<p>When I try to convert it to string, it’s showing an error like <code>int</code> doesn’t have any attribute called <code>str</code>.</p>
</section>
<section id="answer-accepted-score-1966" class="level4">
<h4>Answer accepted (score 1966)</h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">str</span>(<span class="dv">10</span>)</span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="co">&#39;10&#39;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="st">&#39;10&#39;</span>)</span>
<span id="cb52-4"><a href="#cb52-4"></a><span class="dv">10</span></span></code></pre></div>
<p>Links to the documentation:</p>
<ul>
<li>
<a href="https://docs.python.org/2/library/functions.html#int" rel="noreferrer"><code>int()</code></a>
</li>
<li>
<a href="https://docs.python.org/2/library/functions.html#str" rel="noreferrer"><code>str()</code></a>
</li>
</ul>
<p>Conversion to a string is done with the builtin <code>str()</code> function, which basically calls the <a href="https://docs.python.org/3/reference/datamodel.html#object.__str__" rel="noreferrer"><code>__str__()</code></a> method of its parameter.</p>
</section>
<section id="answer-2-score-112" class="level4">
<h4>Answer 2 (score 112)</h4>
<p>Try this:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a><span class="bu">str</span>(i)</span></code></pre></div>
</section>
<section id="answer-3-score-54" class="level4">
<h4>Answer 3 (score 54)</h4>
<p>There is not typecast and no type coercion in Python. You have to convert your variable in an explicit way.</p>
<p>To convert an object in string you use the <code>str()</code> function. It works with any object that has a method called <code>__str__()</code> defined. In fact</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1"></a><span class="bu">str</span>(a)</span></code></pre></div>
<p>is equivalent to</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a>a.<span class="fu">__str__</span>()</span></code></pre></div>
<p>The same if you want to convert something to int, float, etc.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="add-new-keys-to-a-dictionary-score-3143556-in-2019" class="level3">
<h3>10: Add new keys to a dictionary? (score <a href="https://stackoverflow.com/q/1024847.html">3143556</a> in 2019)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>Is it possible to add a key to a Python dictionary after it has been created? It doesn’t seem to have an <code>.add()</code> method.</p>
</section>
<section id="answer-accepted-score-3128" class="level4">
<h4>Answer accepted (score 3128)</h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1"></a>d <span class="op">=</span> {<span class="st">&#39;key&#39;</span>:<span class="st">&#39;value&#39;</span>}</span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="bu">print</span>(d)</span>
<span id="cb56-3"><a href="#cb56-3"></a><span class="co"># {&#39;key&#39;: &#39;value&#39;}</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>d[<span class="st">&#39;mynewkey&#39;</span>] <span class="op">=</span> <span class="st">&#39;mynewvalue&#39;</span></span>
<span id="cb56-5"><a href="#cb56-5"></a><span class="bu">print</span>(d)</span>
<span id="cb56-6"><a href="#cb56-6"></a><span class="co"># {&#39;mynewkey&#39;: &#39;mynewvalue&#39;, &#39;key&#39;: &#39;value&#39;}</span></span></code></pre></div>
</section>
<section id="answer-2-score-975" class="level4">
<h4>Answer 2 (score 975)</h4>
<p>To add multiple keys simultaneously:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> {<span class="dv">1</span>:<span class="dv">2</span>}</span>
<span id="cb57-2"><a href="#cb57-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> x</span>
<span id="cb57-3"><a href="#cb57-3"></a>{<span class="dv">1</span>: <span class="dv">2</span>}</span>
<span id="cb57-4"><a href="#cb57-4"></a></span>
<span id="cb57-5"><a href="#cb57-5"></a><span class="op">&gt;&gt;&gt;</span> d <span class="op">=</span> {<span class="dv">3</span>:<span class="dv">4</span>, <span class="dv">5</span>:<span class="dv">6</span>, <span class="dv">7</span>:<span class="dv">8</span>}</span>
<span id="cb57-6"><a href="#cb57-6"></a><span class="op">&gt;&gt;&gt;</span> x.update(d)</span>
<span id="cb57-7"><a href="#cb57-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> x</span>
<span id="cb57-8"><a href="#cb57-8"></a>{<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">5</span>: <span class="dv">6</span>, <span class="dv">7</span>: <span class="dv">8</span>}</span></code></pre></div>
<p>For adding a single key, the accepted answer has less computational overhead.</p>
</section>
<section id="answer-3-score-838" class="level4">
<h4>Answer 3 (score 838)</h4>
<p>I feel like consolidating info about Python dictionaries:</p>
<h5>
Creating an empty dictionary
</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1"></a>data <span class="op">=</span> {}</span>
<span id="cb58-2"><a href="#cb58-2"></a><span class="co"># OR</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>data <span class="op">=</span> <span class="bu">dict</span>()</span></code></pre></div>
<h5>
Creating a dictionary with initial values
</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1"></a>data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>:<span class="dv">1</span>,<span class="st">&#39;b&#39;</span>:<span class="dv">2</span>,<span class="st">&#39;c&#39;</span>:<span class="dv">3</span>}</span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="co"># OR</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>data <span class="op">=</span> <span class="bu">dict</span>(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>, c<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb59-4"><a href="#cb59-4"></a><span class="co"># OR</span></span>
<span id="cb59-5"><a href="#cb59-5"></a>data <span class="op">=</span> {k: v <span class="cf">for</span> k, v <span class="kw">in</span> ((<span class="st">&#39;a&#39;</span>, <span class="dv">1</span>),(<span class="st">&#39;b&#39;</span>,<span class="dv">2</span>),(<span class="st">&#39;c&#39;</span>,<span class="dv">3</span>))}</span></code></pre></div>
<h5>
Inserting/Updating a single value
</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a>data[<span class="st">&#39;a&#39;</span>]<span class="op">=</span><span class="dv">1</span>  <span class="co"># Updates if &#39;a&#39; exists, else adds &#39;a&#39;</span></span>
<span id="cb60-2"><a href="#cb60-2"></a><span class="co"># OR</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>data.update({<span class="st">&#39;a&#39;</span>:<span class="dv">1</span>})</span>
<span id="cb60-4"><a href="#cb60-4"></a><span class="co"># OR</span></span>
<span id="cb60-5"><a href="#cb60-5"></a>data.update(<span class="bu">dict</span>(a<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb60-6"><a href="#cb60-6"></a><span class="co"># OR</span></span>
<span id="cb60-7"><a href="#cb60-7"></a>data.update(a<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<h5>
Inserting/Updating multiple values
</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1"></a>data.update({<span class="st">&#39;c&#39;</span>:<span class="dv">3</span>,<span class="st">&#39;d&#39;</span>:<span class="dv">4</span>})  <span class="co"># Updates &#39;c&#39; and adds &#39;d&#39;</span></span></code></pre></div>
<h5>
Creating a merged dictionary without modifying originals
</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1"></a>data3 <span class="op">=</span> {}</span>
<span id="cb62-2"><a href="#cb62-2"></a>data3.update(data)  <span class="co"># Modifies data3, not data</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>data3.update(data2)  <span class="co"># Modifies data3, not data2</span></span></code></pre></div>
<h5>
Deleting items in dictionary
</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1"></a><span class="kw">del</span> data[key]  <span class="co"># Removes specific element in a dictionary</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>data.pop(key)  <span class="co"># Removes the key &amp; returns the value</span></span>
<span id="cb63-3"><a href="#cb63-3"></a>data.clear()  <span class="co"># Clears entire dictionary</span></span></code></pre></div>
<h5>
Check if a key is already in dictionary
</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1"></a>key <span class="kw">in</span> data</span></code></pre></div>
<h5>
Iterate through pairs in a dictionary
</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1"></a><span class="cf">for</span> key <span class="kw">in</span> data: <span class="co"># Iterates just through the keys, ignoring the values</span></span>
<span id="cb65-2"><a href="#cb65-2"></a><span class="cf">for</span> key, value <span class="kw">in</span> d.items(): <span class="co"># Iterates through the pairs</span></span>
<span id="cb65-3"><a href="#cb65-3"></a><span class="cf">for</span> key <span class="kw">in</span> d.keys(): <span class="co"># Iterates just through key, ignoring the values</span></span>
<span id="cb65-4"><a href="#cb65-4"></a><span class="cf">for</span> value <span class="kw">in</span> d.values(): <span class="co"># Iterates just through value, ignoring the keys</span></span></code></pre></div>
<h5>
Create a dictionary from 2 lists
</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1"></a>data <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(list_with_keys, list_with_values))</span></code></pre></div>
<hr>
<h5>
New to Python3
</h1>
<h5>
Creating a merged dictionary without modifying originals
</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1"></a>data <span class="op">=</span> {<span class="op">**</span>data1, <span class="op">**</span>data2, <span class="op">**</span>data3}</span></code></pre></div>
<hr>
<p>Feel free to add more!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-if-a-given-key-already-exists-in-a-dictionary-score-3139063-in-2013" class="level3">
<h3>11: Check if a given key already exists in a dictionary (score <a href="https://stackoverflow.com/q/1602934.html">3139063</a> in 2013)</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>
I wanted to test if a key exists in a dictionary before updating the value for the key. I wrote the following code:
</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1"></a><span class="cf">if</span> <span class="st">&#39;key1&#39;</span> <span class="kw">in</span> <span class="bu">dict</span>.keys():</span>
<span id="cb68-2"><a href="#cb68-2"></a>  <span class="bu">print</span> <span class="st">&quot;blah&quot;</span></span>
<span id="cb68-3"><a href="#cb68-3"></a><span class="cf">else</span>:</span>
<span id="cb68-4"><a href="#cb68-4"></a>  <span class="bu">print</span> <span class="st">&quot;boo&quot;</span></span></code></pre></div>
<p>I think this is not the best way to accomplish this task. Is there a better way to test for a key in the dictionary?</p>
</section>
<section id="answer-accepted-score-2923" class="level4">
<h4>Answer accepted (score 2923)</h4>
<p><code>in</code> is the intended way to test for the existence of a key in a <code>dict</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1"></a>d <span class="op">=</span> <span class="bu">dict</span>()</span>
<span id="cb69-2"><a href="#cb69-2"></a></span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb69-4"><a href="#cb69-4"></a>    key <span class="op">=</span> i <span class="op">%</span> <span class="dv">10</span></span>
<span id="cb69-5"><a href="#cb69-5"></a>    <span class="cf">if</span> key <span class="kw">in</span> d:</span>
<span id="cb69-6"><a href="#cb69-6"></a>        d[key] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb69-7"><a href="#cb69-7"></a>    <span class="cf">else</span>:</span>
<span id="cb69-8"><a href="#cb69-8"></a>        d[key] <span class="op">=</span> <span class="dv">1</span></span></code></pre></div>
<p>If you wanted a default, you can always use <code>dict.get()</code>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1"></a>d <span class="op">=</span> <span class="bu">dict</span>()</span>
<span id="cb70-2"><a href="#cb70-2"></a></span>
<span id="cb70-3"><a href="#cb70-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb70-4"><a href="#cb70-4"></a>    key <span class="op">=</span> i <span class="op">%</span> <span class="dv">10</span></span>
<span id="cb70-5"><a href="#cb70-5"></a>    d[key] <span class="op">=</span> d.get(key, <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span></span></code></pre></div>
<p>… and if you wanted to always ensure a default value for any key you can use <code>defaultdict</code> from the <code>collections</code> module, like so:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb71-2"><a href="#cb71-2"></a></span>
<span id="cb71-3"><a href="#cb71-3"></a>d <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb71-4"><a href="#cb71-4"></a></span>
<span id="cb71-5"><a href="#cb71-5"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb71-6"><a href="#cb71-6"></a>    d[i <span class="op">%</span> <span class="dv">10</span>] <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
<p>… but in general, the <code>in</code> keyword is the best way to do it.</p>
</section>
<section id="answer-2-score-1454" class="level4">
<h4>Answer 2 (score 1454)</h4>
<p>You don’t have to call keys:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1"></a><span class="cf">if</span> <span class="st">&#39;key1&#39;</span> <span class="kw">in</span> <span class="bu">dict</span>:</span>
<span id="cb72-2"><a href="#cb72-2"></a>  <span class="bu">print</span> <span class="st">&quot;blah&quot;</span></span>
<span id="cb72-3"><a href="#cb72-3"></a><span class="cf">else</span>:</span>
<span id="cb72-4"><a href="#cb72-4"></a>  <span class="bu">print</span> <span class="st">&quot;boo&quot;</span></span></code></pre></div>
<p>That will be much <a href="https://stackoverflow.com/a/30527984/452708">faster</a> as it uses the dictionary’s hashing as opposed to doing a linear search, which calling keys would do.</p>
</section>
<section id="answer-3-score-258" class="level4">
<h4>Answer 3 (score 258)</h4>
<p>You can test for the presence of a key in a dictionary, using the <b>in</b> keyword:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1"></a>d <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</span>
<span id="cb73-2"><a href="#cb73-2"></a><span class="co">&#39;a&#39;</span> <span class="kw">in</span> d <span class="co"># &lt;== evaluates to True</span></span>
<span id="cb73-3"><a href="#cb73-3"></a><span class="co">&#39;c&#39;</span> <span class="kw">in</span> d <span class="co"># &lt;== evaluates to False</span></span></code></pre></div>
<p>A common use for checking the existence of a key in a dictionary before mutating it is to default-initialize the value (e.g. if your values are lists, for example, and you want to ensure that there is an empty list to which you can append when inserting the first value for a key). In cases such as those, you may find the <a href="https://docs.python.org/2/library/collections.html#collections.defaultdict" rel="noreferrer"><code>collections.defaultdict()</code></a> type to be of interest.</p>
<p>In older code, you may also find some uses of <code>has_key()</code>, a deprecated method for checking the existence of keys in dictionaries (just use <code>key_name in dict_name</code>, instead).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-the-number-of-elements-in-a-list-score-3134575-in-2019" class="level3">
<h3>12: How do I get the number of elements in a list? (score <a href="https://stackoverflow.com/q/1712227.html">3134575</a> in 2019)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>Consider the following:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1"></a>items <span class="op">=</span> []</span>
<span id="cb74-2"><a href="#cb74-2"></a>items.append(<span class="st">&quot;apple&quot;</span>)</span>
<span id="cb74-3"><a href="#cb74-3"></a>items.append(<span class="st">&quot;orange&quot;</span>)</span>
<span id="cb74-4"><a href="#cb74-4"></a>items.append(<span class="st">&quot;banana&quot;</span>)</span>
<span id="cb74-5"><a href="#cb74-5"></a></span>
<span id="cb74-6"><a href="#cb74-6"></a><span class="co"># FAKE METHOD:</span></span>
<span id="cb74-7"><a href="#cb74-7"></a>items.amount()  <span class="co"># Should return 3</span></span></code></pre></div>
<p>How do I get the number of elements in the list <code>items</code>?</p>
</section>
<section id="answer-accepted-score-2526" class="level4">
<h4>Answer accepted (score 2526)</h4>
<p>The <code>len()</code> function can be used with several different types in Python - both built-in types and library types. For example:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">len</span>([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb75-2"><a href="#cb75-2"></a><span class="dv">3</span></span></code></pre></div>
<p>
Official 2.x documentation is here: <a href="https://docs.python.org/2/library/functions.html#len" rel="noreferrer" title="len()"><code>len()</code></a><br> Official 3.x documentation is here: <a href="https://docs.python.org/3/library/functions.html#len" rel="noreferrer" title="len()"><code>len()</code></a>
</p>
</section>
<section id="answer-2-score-216" class="level4">
<h4>Answer 2 (score 216)</h4>
<blockquote>
<h5>
How to get the size of a list?
</h1>
</blockquote>
<p>To find the size of a list, use the builtin function, <code>len</code>:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1"></a>items <span class="op">=</span> []</span>
<span id="cb76-2"><a href="#cb76-2"></a>items.append(<span class="st">&quot;apple&quot;</span>)</span>
<span id="cb76-3"><a href="#cb76-3"></a>items.append(<span class="st">&quot;orange&quot;</span>)</span>
<span id="cb76-4"><a href="#cb76-4"></a>items.append(<span class="st">&quot;banana&quot;</span>)</span></code></pre></div>
<p>And now:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1"></a><span class="bu">len</span>(items)</span></code></pre></div>
<p>returns 3.</p>
<h5>
Explanation
</h2>
<p>Everything in Python is an object, including lists. All objects have a header of some sort in the C implementation.</p>
<p>Lists and other similar builtin objects with a “size” in Python, in particular, have an attribute called <code>ob_size</code>, where the number of elements in the object is cached. So checking the number of objects in a list is very fast.</p>
<p>But if you’re checking if list size is zero or not, don’t use <code>len</code> - instead, <a href="https://stackoverflow.com/a/45778282/541136">put the list in a boolean context - it treated as False if empty, True otherwise</a>.</p>
<h5>
From the <a href="https://docs.python.org/library/functions.html#len" rel="noreferrer">docs</a>
</h2>
<p><strong><code>len(s)</code></strong></p>
<blockquote>
<p>
Return the length (the number of items) of an object. The argument may be a sequence (such as a string, bytes, tuple, list, or range) or a collection (such as a dictionary, set, or frozen set).
</p>
</blockquote>
<p><code>len</code> is implemented with <code>__len__</code>, from the data model <a href="https://docs.python.org/reference/datamodel.html#object.__len__" rel="noreferrer">docs</a>:</p>
<p><strong><code>object.__len__(self)</code></strong></p>
<blockquote>
<p>
Called to implement the built-in function <code>len()</code>. Should return the length of the object, an integer &gt;= 0. Also, an object that doesn’t define a <code>__nonzero__()</code> [in Python 2 or <code>__bool__()</code> in Python 3] method and whose <code>__len__()</code> method returns zero is considered to be false in a Boolean context.
</p>
</blockquote>
<p>And we can also see that <code>__len__</code> is a method of lists:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1"></a>items.<span class="fu">__len__</span>()</span></code></pre></div>
<p>returns 3.</p>
<h5>
Builtin types you can get the <code>len</code> (length) of
</h2>
<p>And in fact we see we can get this information for all of the described types:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">all</span>(<span class="bu">hasattr</span>(cls, <span class="st">&#39;__len__&#39;</span>) <span class="cf">for</span> cls <span class="kw">in</span> (<span class="bu">str</span>, <span class="bu">bytes</span>, <span class="bu">tuple</span>, <span class="bu">list</span>, </span>
<span id="cb79-2"><a href="#cb79-2"></a>                                            <span class="bu">xrange</span>, <span class="bu">dict</span>, <span class="bu">set</span>, <span class="bu">frozenset</span>))</span>
<span id="cb79-3"><a href="#cb79-3"></a><span class="va">True</span></span></code></pre></div>
<h5>
Do not use <code>len</code> to test for an empty or nonempty list
</h2>
<p>To test for a specific length, of course, simply test for equality:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1"></a><span class="cf">if</span> <span class="bu">len</span>(items) <span class="op">==</span> required_length:</span>
<span id="cb80-2"><a href="#cb80-2"></a>    ...</span></code></pre></div>
<p>But there’s a special case for testing for a zero length list or the inverse. In that case, do not test for equality.</p>
<p>Also, do not do:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1"></a><span class="cf">if</span> <span class="bu">len</span>(items): </span>
<span id="cb81-2"><a href="#cb81-2"></a>    ...</span></code></pre></div>
<p>Instead, simply do:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1"></a><span class="cf">if</span> items:     <span class="co"># Then we have some items, not empty!</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>    ...</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1"></a><span class="cf">if</span> <span class="kw">not</span> items: <span class="co"># Then we have an empty list!</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>    ...</span></code></pre></div>
<p>I <a href="https://stackoverflow.com/questions/53513/best-way-to-check-if-a-list-is-empty/45778282#45778282">explain why here</a> but in short, <code>if items</code> or <code>if not items</code> is both more readable and more performant.</p>
</section>
<section id="answer-3-score-72" class="level4">
<h4>Answer 3 (score 72)</h4>
<p>While this may not be useful due to the fact that it’d make a lot more sense as being “out of the box” functionality, a fairly simple hack would be to build a class with a <code>length</code> property:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1"></a><span class="kw">class</span> slist(<span class="bu">list</span>):</span>
<span id="cb84-2"><a href="#cb84-2"></a>    <span class="at">@property</span></span>
<span id="cb84-3"><a href="#cb84-3"></a>    <span class="kw">def</span> length(<span class="va">self</span>):</span>
<span id="cb84-4"><a href="#cb84-4"></a>        <span class="cf">return</span> <span class="bu">len</span>(<span class="va">self</span>)</span></code></pre></div>
<p>You can use it like so:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1"></a><span class="op">&gt;&gt;&gt;</span> l <span class="op">=</span> slist(<span class="bu">range</span>(<span class="dv">10</span>))</span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="op">&gt;&gt;&gt;</span> l.length</span>
<span id="cb85-3"><a href="#cb85-3"></a><span class="dv">10</span></span>
<span id="cb85-4"><a href="#cb85-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> l</span>
<span id="cb85-5"><a href="#cb85-5"></a>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code></pre></div>
<p>Essentially, it’s exactly identical to a list object, with the added benefit of having an OOP-friendly <code>length</code> property.</p>
<p>As always, your mileage may vary.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="using-global-variables-in-a-function-score-3043289-in-2018" class="level3">
<h3>13: Using global variables in a function (score <a href="https://stackoverflow.com/q/423379.html">3043289</a> in 2018)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>How can I create or use a global variable in a function?</p>
<p>If I create a global variable in one function, how can I use that global variable in another function? Do I need to store the global variable in a local variable of the function which needs its access?</p>
</section>
<section id="answer-accepted-score-4017" class="level4">
<h4>Answer accepted (score 4017)</h4>
<p>You can use a global variable in other functions by declaring it as <code>global</code> in each function that assigns to it:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1"></a>globvar <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb86-2"><a href="#cb86-2"></a></span>
<span id="cb86-3"><a href="#cb86-3"></a><span class="kw">def</span> set_globvar_to_one():</span>
<span id="cb86-4"><a href="#cb86-4"></a>    <span class="kw">global</span> globvar    <span class="co"># Needed to modify global copy of globvar</span></span>
<span id="cb86-5"><a href="#cb86-5"></a>    globvar <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb86-6"><a href="#cb86-6"></a></span>
<span id="cb86-7"><a href="#cb86-7"></a><span class="kw">def</span> print_globvar():</span>
<span id="cb86-8"><a href="#cb86-8"></a>    <span class="bu">print</span>(globvar)     <span class="co"># No need for global declaration to read value of globvar</span></span>
<span id="cb86-9"><a href="#cb86-9"></a></span>
<span id="cb86-10"><a href="#cb86-10"></a>set_globvar_to_one()</span>
<span id="cb86-11"><a href="#cb86-11"></a>print_globvar()       <span class="co"># Prints 1</span></span></code></pre></div>
<p>I imagine the reason for it is that, since global variables are so dangerous, Python wants to make sure that you really know that’s what you’re playing with by explicitly requiring the <code>global</code> keyword.</p>
<p>See other answers if you want to share a global variable across modules.</p>
</section>
<section id="answer-2-score-736" class="level4">
<h4>Answer 2 (score 736)</h4>
<p>If I’m understanding your situation correctly, what you’re seeing is the result of how Python handles local (function) and global (module) namespaces.</p>
<p>Say you’ve got a module like this:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1"></a><span class="co"># sample.py</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>myGlobal <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb87-3"><a href="#cb87-3"></a></span>
<span id="cb87-4"><a href="#cb87-4"></a><span class="kw">def</span> func1():</span>
<span id="cb87-5"><a href="#cb87-5"></a>    myGlobal <span class="op">=</span> <span class="dv">42</span></span>
<span id="cb87-6"><a href="#cb87-6"></a></span>
<span id="cb87-7"><a href="#cb87-7"></a><span class="kw">def</span> func2():</span>
<span id="cb87-8"><a href="#cb87-8"></a>    <span class="bu">print</span> myGlobal</span>
<span id="cb87-9"><a href="#cb87-9"></a></span>
<span id="cb87-10"><a href="#cb87-10"></a>func1()</span>
<span id="cb87-11"><a href="#cb87-11"></a>func2()</span></code></pre></div>
<p>You might expecting this to print 42, but instead it prints 5. As has already been mentioned, if you add a ‘<code>global</code>’ declaration to <code>func1()</code>, then <code>func2()</code> will print 42.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1"></a><span class="kw">def</span> func1():</span>
<span id="cb88-2"><a href="#cb88-2"></a>    <span class="kw">global</span> myGlobal</span>
<span id="cb88-3"><a href="#cb88-3"></a>    myGlobal <span class="op">=</span> <span class="dv">42</span></span></code></pre></div>
<p>What’s going on here is that Python assumes that any name that is <em>assigned to</em>, anywhere within a function, is local to that function unless explicitly told otherwise. If it is only <em>reading</em> from a name, and the name doesn’t exist locally, it will try to look up the name in any containing scopes (e.g. the module’s global scope).</p>
<p>When you assign 42 to the name <code>myGlobal</code>, therefore, Python creates a local variable that shadows the global variable of the same name. That local goes out of scope and is <a href="http://www.digi.com/wiki/developer/index.php/Python_Garbage_Collection" rel="noreferrer">garbage-collected</a> when <code>func1()</code> returns; meanwhile, <code>func2()</code> can never see anything other than the (unmodified) global name. Note that this namespace decision happens at compile time, not at runtime – if you were to read the value of <code>myGlobal</code> inside <code>func1()</code> before you assign to it, you’d get an <code>UnboundLocalError</code>, because Python has already decided that it must be a local variable but it has not had any value associated with it yet. But by using the ‘<code>global</code>’ statement, you tell Python that it should look elsewhere for the name instead of assigning to it locally.</p>
<p>(I believe that this behavior originated largely through an optimization of local namespaces – without this behavior, Python’s VM would need to perform at least three name lookups each time a new name is assigned to inside a function (to ensure that the name didn’t already exist at module/builtin level), which would significantly slow down a very common operation.)</p>
</section>
<section id="answer-3-score-201" class="level4">
<h4>Answer 3 (score 201)</h4>
<p>You may want to explore the notion of <a href="http://docs.python.org/reference/datamodel.html" rel="noreferrer">namespaces</a>. In Python, the <a href="http://docs.python.org/tutorial/modules.html" rel="noreferrer">module</a> is the natural place for <em>global</em> data:</p>
<blockquote>
Each module has its own private symbol table, which is used as the global symbol table by all functions defined in the module. Thus, the author of a module can use global variables in the module without worrying about accidental clashes with a user’s global variables. On the other hand, if you know what you are doing you can touch a module’s global variables with the same notation used to refer to its functions, <code>modname.itemname</code>.
</blockquote>
<p>A specific use of global-in-a-module is described here - <a href="http://effbot.org/pyfaq/how-do-i-share-global-variables-across-modules.htm" rel="noreferrer">How do I share global variables across modules?</a>, and for completeness the contents are shared here:</p>
<blockquote>
<p>The canonical way to share information across modules within a single program is to create a special configuration module (often called <strong>config</strong> or <strong>cfg</strong>). Just import the configuration module in all modules of your application; the module then becomes available as a global name. Because there is only one instance of each module, any changes made to the module object get reflected everywhere. For example:</p>
<p>File: config.py</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1"></a>x <span class="op">=</span> <span class="dv">0</span>   <span class="co"># Default value of the &#39;x&#39; configuration setting</span></span></code></pre></div>
<p>File: mod.py</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1"></a><span class="im">import</span> config</span>
<span id="cb90-2"><a href="#cb90-2"></a>config.x <span class="op">=</span> <span class="dv">1</span></span></code></pre></div>
<p>File: main.py</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1"></a><span class="im">import</span> config</span>
<span id="cb91-2"><a href="#cb91-2"></a><span class="im">import</span> mod</span>
<span id="cb91-3"><a href="#cb91-3"></a><span class="bu">print</span> config.x</span></code></pre></div>
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-the-current-time-in-python-score-3001470-in-2018" class="level3">
<h3>14: How to get the current time in Python (score <a href="https://stackoverflow.com/q/415511.html">3001470</a> in 2018)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>What is the module/method used to get the current time?</p>
</section>
<section id="answer-accepted-score-2718" class="level4">
<h4>Answer accepted (score 2718)</h4>
<p>Use:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> datetime</span>
<span id="cb92-2"><a href="#cb92-2"></a><span class="op">&gt;&gt;&gt;</span> datetime.datetime.now()</span>
<span id="cb92-3"><a href="#cb92-3"></a>datetime.datetime(<span class="dv">2009</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">24</span>, <span class="dv">78915</span>)</span>
<span id="cb92-4"><a href="#cb92-4"></a></span>
<span id="cb92-5"><a href="#cb92-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(datetime.datetime.now())</span>
<span id="cb92-6"><a href="#cb92-6"></a><span class="dv">2018-07-29</span> <span class="dv">09</span>:<span class="dv">17</span>:<span class="fl">13.812189</span></span></code></pre></div>
<p>And just the time:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1"></a><span class="op">&gt;&gt;&gt;</span> datetime.datetime.now().time()</span>
<span id="cb93-2"><a href="#cb93-2"></a>datetime.time(<span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">24</span>, <span class="dv">78915</span>)</span>
<span id="cb93-3"><a href="#cb93-3"></a></span>
<span id="cb93-4"><a href="#cb93-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(datetime.datetime.now().time())</span>
<span id="cb93-5"><a href="#cb93-5"></a><span class="dv">09</span>:<span class="dv">17</span>:<span class="fl">51.914526</span></span></code></pre></div>
<p>See <a href="https://docs.python.org/3/library/datetime.html" rel="noreferrer"><strong>the documentation</strong></a> for more information.</p>
<p>To save typing, you can import the <code>datetime</code> object from the <code>datetime</code> module:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> datetime <span class="im">import</span> datetime</span></code></pre></div>
<p>Then remove the leading <code>datetime.</code> from all of the above.</p>
</section>
<section id="answer-2-score-891" class="level4">
<h4>Answer 2 (score 891)</h4>
<p>You can use <a href="http://docs.python.org/3.3/library/time.html?highlight=time.strftime#time.strftime" rel="noreferrer"><code>time.strftime()</code></a>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> time <span class="im">import</span> gmtime, strftime</span>
<span id="cb95-2"><a href="#cb95-2"></a><span class="op">&gt;&gt;&gt;</span> strftime(<span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&quot;</span>, gmtime())</span>
<span id="cb95-3"><a href="#cb95-3"></a><span class="co">&#39;2009-01-05 22:14:39&#39;</span></span></code></pre></div>
</section>
<section id="answer-3-score-531" class="level4">
<h4>Answer 3 (score 531)</h4>
<div class="sourceCode" id="cb96"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb96-2"><a href="#cb96-2"></a>datetime.now().strftime(<span class="st">&#39;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&#39;</span>)</span></code></pre></div>
<p>For this example, the output will be like this: <code>'2013-09-18 11:16:32'</code></p>
<p>Here is the list of <a href="https://docs.python.org/3/library/time.html#time.strftime" rel="noreferrer"><code>strftime</code> directives</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-install-pip-on-windows-score-2887828-in-2017" class="level3">
<h3>15: How do I install pip on Windows? (score <a href="https://stackoverflow.com/q/4750806.html">2887828</a> in 2017)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p><a href="https://pip.pypa.io/en/stable/" rel="noreferrer"><code>pip</code></a> is a replacement for <a href="http://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer"><code>easy_install</code></a>. But should I install <code>pip</code> using <code>easy_install</code> on Windows? Is there a better way?</p>
</section>
<section id="answer-accepted-score-1779" class="level4">
<h4>Answer accepted (score 1779)</h4>
<h5>
Python 2.7.9+ and 3.4+
</h2>
<p>Good news! <a href="https://docs.python.org/3/whatsnew/3.4.html" rel="noreferrer">Python 3.4</a> (released March 2014) and <a href="https://docs.python.org/2/whatsnew/2.7.html#pep-477-backport-ensurepip-pep-453-to-python-2-7" rel="noreferrer">Python 2.7.9</a> (released December 2014) ship with Pip. This is the best feature of any Python release. It makes the community’s wealth of libraries accessible to everyone. Newbies are no longer excluded from using community libraries by the prohibitive difficulty of setup. In shipping with a package manager, Python joins <a href="http://en.wikipedia.org/wiki/Ruby_%28programming_language%29" rel="noreferrer">Ruby</a>, <a href="http://en.wikipedia.org/wiki/Node.js" rel="noreferrer">Node.js</a>, <a href="http://en.wikipedia.org/wiki/Haskell_%28programming_language%29" rel="noreferrer">Haskell</a>, <a href="http://en.wikipedia.org/wiki/Perl" rel="noreferrer">Perl</a>, <a href="http://en.wikipedia.org/wiki/Go_%28programming_language%29" rel="noreferrer">Go</a>—almost every other contemporary language with a majority open-source community. Thank you, Python.</p>
<p>If you do find that pip is not available when using Python 3.4+ or Python 2.7.9+, simply execute e.g.:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1"></a>py <span class="dv">-3</span> <span class="op">-</span>m ensurepip</span></code></pre></div>
<p>Of course, that doesn’t mean Python packaging is problem solved. The experience remains frustrating. I discuss this <a href="https://stackoverflow.com/questions/2436731/does-python-have-a-package-module-management-system/13445719#13445719">in the Stack Overflow question <em>Does Python have a package/module management system?</em></a>.</p>
<p>And, alas for everyone using Python 2.7.8 or earlier (a sizable portion of the community). There’s no plan to ship Pip to you. Manual instructions follow.</p>
<h5>
Python 2 ≤ 2.7.8 and Python 3 ≤ 3.3
</h2>
<p>Flying in the face of its <a href="http://www.python.org/about/" rel="noreferrer">‘batteries included’</a> motto, Python ships without a package manager. To make matters worse, Pip was—until recently—ironically difficult to install.</p>
<h5>
Official instructions
</h3>
<p>Per <a href="https://pip.pypa.io/en/stable/installing/#do-i-need-to-install-pip" rel="noreferrer">https://pip.pypa.io/en/stable/installing/#do-i-need-to-install-pip</a>:</p>
<p>Download <a href="https://bootstrap.pypa.io/get-pip.py" rel="noreferrer"><code>get-pip.py</code></a>, being careful to save it as a <code>.py</code> file rather than <code>.txt</code>. Then, run it from the command prompt:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1"></a>python get<span class="op">-</span>pip.py</span></code></pre></div>
<p>You possibly need an administrator command prompt to do this. Follow <em><a href="http://technet.microsoft.com/en-us/library/cc947813(v=ws.10).aspx" rel="noreferrer">Start a Command Prompt as an Administrator</a></em> (Microsoft TechNet).</p>
<p>This installs the pip package, which (in Windows) contains ….exe that path must be in PATH environment variable to use pip from the command line (see the second part of ‘Alternative Instructions’ for adding it to your PATH,</p>
<h5>
Alternative instructions
</h3>
<p>The official documentation tells users to install Pip and each of its dependencies from source. That’s tedious for the experienced and prohibitively difficult for newbies.</p>
<p>For our sake, Christoph Gohlke prepares Windows installers (<code>.msi</code>) for popular Python packages. He builds installers for all Python versions, both 32 and 64 bit. You need to:</p>
<ol>
<li>
<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#setuptools" rel="noreferrer">Install setuptools</a>
</li>
<li>
<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip" rel="noreferrer">Install pip</a>
</li>
</ol>
<p>For me, this installed Pip at <code>C:\Python27\Scripts\pip.exe</code>. Find <code>pip.exe</code> on your computer, then add its folder (for example, <code>C:\Python27\Scripts</code>) to your path (Start / Edit environment variables). Now you should be able to run <code>pip</code> from the command line. Try installing a package:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1"></a>pip install httpie</span></code></pre></div>
<p>There you go (hopefully)! Solutions for common problems are given below:</p>
<h5>
Proxy problems
</h3>
<p>If you work in an office, you might be behind an HTTP proxy. If so, set the environment variables <a href="http://docs.python.org/2/library/urllib.html" rel="noreferrer"><code>http_proxy</code> and <code>https_proxy</code></a>. Most Python applications (and other free software) respect these. Example syntax:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1"></a>http:<span class="op">//</span>proxy_url:port</span>
<span id="cb100-2"><a href="#cb100-2"></a>http:<span class="op">//</span>username:password<span class="op">@</span>proxy_url:port</span></code></pre></div>
<p>If you’re really unlucky, your proxy might be a Microsoft <a href="https://en.wikipedia.org/wiki/NT_LAN_Manager" rel="noreferrer">NTLM</a> proxy. Free software can’t cope. The only solution is to install a free software friendly proxy that forwards to the nasty proxy. <a href="http://cntlm.sourceforge.net/" rel="noreferrer">http://cntlm.sourceforge.net/</a></p>
<h5>
Unable to find vcvarsall.bat
</h3>
<p>Python modules can be partly written in C or C++. Pip tries to compile from source. If you don’t have a C/C++ compiler installed and configured, you’ll see this cryptic error message.</p>
<blockquote>
Error: Unable to find vcvarsall.bat
</blockquote>
<p>You can fix that by <a href="https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat">installing a C++ compiler</a> such as <a href="http://en.wikipedia.org/wiki/MinGW" rel="noreferrer">MinGW</a> or <a href="http://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_versions" rel="noreferrer">Visual C++</a>. Microsoft actually ships one specifically for use with Python. Or try <em><a href="http://aka.ms/vcpython27" rel="noreferrer">Microsoft Visual C++ Compiler for Python 2.7</a></em>.</p>
<p>Often though it’s easier to check <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" rel="noreferrer">Christoph’s site</a> for your package.</p>
</section>
<section id="answer-2-score-296" class="level4">
<h4>Answer 2 (score 296)</h4>
<p>
<s>– <strong>Outdated</strong> – use distribute, not setuptools as described here. –</s><br> – <strong>Outdated #2</strong> – use setuptools as distribute is deprecated.
</p>
<p>As you mentioned pip doesn’t include an independent installer, but you can install it with its predecessor easy_install.</p>
<p>So:</p>
<ol>
<li>
Download the last pip version from here: <a href="http://pypi.python.org/pypi/pip#downloads" rel="noreferrer">http://pypi.python.org/pypi/pip#downloads</a>
</li>
<li>
Uncompress it
</li>
<li>
Download the last easy installer for Windows: (<strong>download the .exe at the bottom of <a href="http://pypi.python.org/pypi/setuptools" rel="noreferrer">http://pypi.python.org/pypi/setuptools</a></strong> ). Install it.
</li>
<li>
copy the uncompressed pip folder <strong>content</strong> into <code>C:\Python2x\</code> folder (don’t copy the whole folder into it, just the content), because python command doesn’t work outside <code>C:\Python2x</code> folder and then run: <code>python setup.py install</code>
</li>
<li>
Add your python <code>C:\Python2x\Scripts</code> to the path
</li>
</ol>
<p>You are done.</p>
<p>Now you can use <code>pip install package</code> to easily install packages as in Linux :)</p>
</section>
<section id="answer-3-score-215" class="level4">
<h4>Answer 3 (score 215)</h4>
<p><strong>2014 UPDATE:</strong></p>
<ol type="1">
<li><p>If you have installed Python 3.4 or later, pip is included with Python and should already be working on your system.</p></li>
<li><p>If you are running a version below Python 3.4 or if pip was not installed with Python 3.4 for some reason, then you’d probably use pip’s official installation script <code>get-pip.py</code>. The pip installer now grabs setuptools for you, and works regardless of architecture (32-bit or 64-bit).</p></li>
</ol>
<p>The installation <a href="http://www.pip-installer.org/en/latest/installing.html" rel="noreferrer">instructions are detailed here</a> and involve:</p>
<blockquote>
<p>To install or upgrade pip, securely download <a href="https://raw.github.com/pypa/pip/master/contrib/get-pip.py" rel="noreferrer">get-pip.py</a>.</p>
Then run the following (which may require administrator access):
</blockquote>
<div class="sourceCode" id="cb101"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1"></a>python get<span class="op">-</span>pip.py</span></code></pre></div>
<blockquote>
To upgrade an existing setuptools (or distribute), run <code>pip install -U setuptools</code>
</blockquote>
<p>I’ll leave the two sets of old instructions below for posterity.</p>
<p><strong>OLD Answers:</strong></p>
<p>For Windows editions of the <strong>64 bit</strong> variety - 64-bit Windows + Python used to require a separate installation method due to ez_setup, but I’ve tested the new distribute method on 64-bit Windows running 32-bit Python and 64-bit Python, and you can now use the same method for all versions of Windows/Python 2.7X:</p>
<p><strong>OLD Method 2</strong> using <a href="https://pypi.python.org/pypi/distribute" rel="noreferrer">distribute</a>:</p>
<ol>
<li>
Download <a href="http://python-distribute.org/distribute_setup.py" rel="noreferrer">distribute</a> - I threw mine in <code>C:\Python27\Scripts</code> (feel free to create a <code>Scripts</code> directory if it doesn’t exist.
</li>
<li>
Open up a command prompt (on Windows you should check out <a href="http://code.google.com/p/conemu-maximus5/" rel="noreferrer">conemu2</a> if you don’t use <a href="http://en.wikipedia.org/wiki/Windows_PowerShell" rel="noreferrer">PowerShell</a>) and change (<code>cd</code>) to the directory you’ve downloaded <code>distribute_setup.py</code> to.
</li>
<li>
Run distribute_setup: <code>python distribute_setup.py</code> (This will not work if your python installation directory is not added to your path - <a href="https://stackoverflow.com/a/6318188/705198">go here for help</a>)
</li>
<li>
Change the current directory to the <code>Scripts</code> directory for your Python installation (<code>C:\Python27\Scripts</code>) or add that directory, as well as the Python base installation directory to your %PATH% environment variable.
</li>
<li>
Install pip using the newly installed setuptools: <code>easy_install pip</code>
</li>
</ol>
<p>The last step will not work unless you’re either in the directory <code>easy_install.exe</code> is located in (C:would be the default for Python 2.7), or you have that directory added to your path.</p>
<p><strong>OLD Method 1</strong> using ez_setup:</p>
<p><a href="http://pypi.python.org/pypi/setuptools#windows" rel="noreferrer">from the setuptools page</a> –</p>
<blockquote>
Download <a href="http://peak.telecommunity.com/dist/ez_setup.py" rel="noreferrer">ez_setup.py</a> and run it; it will download the appropriate .egg file and install it for you. (Currently, the provided .exe installer does not support 64-bit versions of Python for Windows, due to a distutils installer compatibility issue.
</blockquote>
<p>After this, you may continue with:</p>
<ol start="2">
<li>
Add <code>c:\Python2x\Scripts</code> to the Windows path (replace the <code>x</code> in <code>Python2x</code> with the actual version number you have installed)
</li>
<li>
Open a new (!) DOS prompt. From there run <code>easy_install pip</code>
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-make-a-time-delay-in-python-score-2839107-in-2018" class="level3">
<h3>16: How can I make a time delay in Python? (score <a href="https://stackoverflow.com/q/510348.html">2839107</a> in 2018)</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>I would like to know how to put a time delay in a Python script.</p>
</section>
<section id="answer-2-score-2835" class="level4">
<h4>Answer 2 (score 2835)</h4>
<div class="sourceCode" id="cb102"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1"></a><span class="im">import</span> time</span>
<span id="cb102-2"><a href="#cb102-2"></a>time.sleep(<span class="dv">5</span>)   <span class="co"># Delays for 5 seconds. You can also use a float value.</span></span></code></pre></div>
<p>Here is another example where something is run approximately once a minute:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1"></a><span class="im">import</span> time</span>
<span id="cb103-2"><a href="#cb103-2"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb103-3"><a href="#cb103-3"></a>    <span class="bu">print</span>(<span class="st">&quot;This prints once a minute.&quot;</span>)</span>
<span id="cb103-4"><a href="#cb103-4"></a>    time.sleep(<span class="dv">60</span>) <span class="co"># Delay for 1 minute (60 seconds).</span></span></code></pre></div>
</section>
<section id="answer-3-score-736" class="level4">
<h4>Answer 3 (score 736)</h4>
<p>You can use the <a href="https://docs.python.org/library/time.html#time.sleep" rel="noreferrer"><code>sleep()</code> function in the <code>time</code> module</a>. It can take a float argument for sub-second resolution.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1"></a><span class="im">from</span> time <span class="im">import</span> sleep</span>
<span id="cb104-2"><a href="#cb104-2"></a>sleep(<span class="fl">0.1</span>) <span class="co"># Time in seconds</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-pythons-list-methods-append-and-extend-score-2798324-in-2019" class="level3">
<h3>17: What is the difference between Python’s list methods append and extend? (score <a href="https://stackoverflow.com/q/252703.html">2798324</a> in 2019)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>What’s the difference between the list methods <code>append()</code> and <code>extend()</code>?</p>
</section>
<section id="answer-accepted-score-4958" class="level4">
<h4>Answer accepted (score 4958)</h4>
<p><a href="https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types" rel="noreferrer"><code>append</code></a>: Appends object at the end.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb105-2"><a href="#cb105-2"></a>x.append([<span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb105-3"><a href="#cb105-3"></a><span class="bu">print</span> (x)</span></code></pre></div>
<p>gives you: <code>[1, 2, 3, [4, 5]]</code></p>
<hr>
<p><a href="https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types" rel="noreferrer"><code>extend</code></a>: Extends list by appending elements from the iterable.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb106-2"><a href="#cb106-2"></a>x.extend([<span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb106-3"><a href="#cb106-3"></a><span class="bu">print</span> (x)</span></code></pre></div>
<p>gives you: <code>[1, 2, 3, 4, 5]</code></p>
</section>
<section id="answer-2-score-606" class="level4">
<h4>Answer 2 (score 606)</h4>
<p><code>append</code> adds an element to a list, and <code>extend</code> concatenates the first list with another list (or another iterable, not necessarily a list.)</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1"></a><span class="op">&gt;&gt;&gt;</span> li <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>]</span>
<span id="cb107-2"><a href="#cb107-2"></a><span class="op">&gt;&gt;&gt;</span> li</span>
<span id="cb107-3"><a href="#cb107-3"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>]</span>
<span id="cb107-4"><a href="#cb107-4"></a></span>
<span id="cb107-5"><a href="#cb107-5"></a><span class="op">&gt;&gt;&gt;</span> li.append(<span class="st">&quot;new&quot;</span>)</span>
<span id="cb107-6"><a href="#cb107-6"></a><span class="op">&gt;&gt;&gt;</span> li</span>
<span id="cb107-7"><a href="#cb107-7"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>]</span>
<span id="cb107-8"><a href="#cb107-8"></a></span>
<span id="cb107-9"><a href="#cb107-9"></a><span class="op">&gt;&gt;&gt;</span> li.append([<span class="st">&quot;new&quot;</span>, <span class="dv">2</span>])</span>
<span id="cb107-10"><a href="#cb107-10"></a><span class="op">&gt;&gt;&gt;</span> li</span>
<span id="cb107-11"><a href="#cb107-11"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>, [<span class="st">&#39;new&#39;</span>, <span class="dv">2</span>]]</span>
<span id="cb107-12"><a href="#cb107-12"></a></span>
<span id="cb107-13"><a href="#cb107-13"></a><span class="op">&gt;&gt;&gt;</span> li.insert(<span class="dv">2</span>, <span class="st">&quot;new&quot;</span>)</span>
<span id="cb107-14"><a href="#cb107-14"></a><span class="op">&gt;&gt;&gt;</span> li</span>
<span id="cb107-15"><a href="#cb107-15"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;new&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>, [<span class="st">&#39;new&#39;</span>, <span class="dv">2</span>]]</span>
<span id="cb107-16"><a href="#cb107-16"></a></span>
<span id="cb107-17"><a href="#cb107-17"></a><span class="op">&gt;&gt;&gt;</span> li.extend([<span class="st">&quot;two&quot;</span>, <span class="st">&quot;elements&quot;</span>])</span>
<span id="cb107-18"><a href="#cb107-18"></a><span class="op">&gt;&gt;&gt;</span> li</span>
<span id="cb107-19"><a href="#cb107-19"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;new&#39;</span>, <span class="st">&#39;mpilgrim&#39;</span>, <span class="st">&#39;z&#39;</span>, <span class="st">&#39;example&#39;</span>, <span class="st">&#39;new&#39;</span>, [<span class="st">&#39;new&#39;</span>, <span class="dv">2</span>], <span class="st">&#39;two&#39;</span>, <span class="st">&#39;elements&#39;</span>]</span></code></pre></div>
</section>
<section id="answer-3-score-437" class="level4">
<h4>Answer 3 (score 437)</h4>
<blockquote>
<h5>
What is the difference between the list methods append and extend?
</h2>
</blockquote>
<ul>
<li>
<code>append</code> adds its argument as a single element to the end of a list. The length of the list itself will increase by one.
</li>
<li>
<code>extend</code> iterates over its argument adding each element to the list, extending the list. The length of the list will increase by however many elements were in the iterable argument.
</li>
</ul>
<h5>
<code>append</code>
</h2>
<p>The <code>list.append</code> method appends an object to the end of the list.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1"></a>my_list.append(<span class="bu">object</span>) </span></code></pre></div>
<p>Whatever the object is, whether a number, a string, another list, or something else, it gets added onto the end of <code>my_list</code> as a single entry on the list.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1"></a><span class="op">&gt;&gt;&gt;</span> my_list</span>
<span id="cb109-2"><a href="#cb109-2"></a>[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>]</span>
<span id="cb109-3"><a href="#cb109-3"></a><span class="op">&gt;&gt;&gt;</span> my_list.append(<span class="st">&#39;baz&#39;</span>)</span>
<span id="cb109-4"><a href="#cb109-4"></a><span class="op">&gt;&gt;&gt;</span> my_list</span>
<span id="cb109-5"><a href="#cb109-5"></a>[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>]</span></code></pre></div>
<p>So keep in mind that a list is an object. If you append another list onto a list, the first list will be a single object at the end of the list (which may not be what you want):</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1"></a><span class="op">&gt;&gt;&gt;</span> another_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb110-2"><a href="#cb110-2"></a><span class="op">&gt;&gt;&gt;</span> my_list.append(another_list)</span>
<span id="cb110-3"><a href="#cb110-3"></a><span class="op">&gt;&gt;&gt;</span> my_list</span>
<span id="cb110-4"><a href="#cb110-4"></a>[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]]</span>
<span id="cb110-5"><a href="#cb110-5"></a>                     <span class="co">#^^^^^^^^^--- single item at the end of the list.</span></span></code></pre></div>
<h5>
<code>extend</code>
</h2>
<p>The <code>list.extend</code> method extends a list by appending elements from an iterable:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1"></a>my_list.extend(iterable)</span></code></pre></div>
<p>So with extend, each element of the iterable gets appended onto the list. For example:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1"></a><span class="op">&gt;&gt;&gt;</span> my_list</span>
<span id="cb112-2"><a href="#cb112-2"></a>[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>]</span>
<span id="cb112-3"><a href="#cb112-3"></a><span class="op">&gt;&gt;&gt;</span> another_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb112-4"><a href="#cb112-4"></a><span class="op">&gt;&gt;&gt;</span> my_list.extend(another_list)</span>
<span id="cb112-5"><a href="#cb112-5"></a><span class="op">&gt;&gt;&gt;</span> my_list</span>
<span id="cb112-6"><a href="#cb112-6"></a>[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<p>Keep in mind that a string is an iterable, so if you extend a list with a string, you’ll append each character as you iterate over the string (which may not be what you want):</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1"></a><span class="op">&gt;&gt;&gt;</span> my_list.extend(<span class="st">&#39;baz&#39;</span>)</span>
<span id="cb113-2"><a href="#cb113-2"></a><span class="op">&gt;&gt;&gt;</span> my_list</span>
<span id="cb113-3"><a href="#cb113-3"></a>[<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;z&#39;</span>]</span></code></pre></div>
<h5>
Operator Overload, <code>__add__</code> (<code>+</code>) and <code>__iadd__</code> (<code>+=</code>)
</h2>
<p>Both <code>+</code> and <code>+=</code> operators are defined for <code>list</code>. They are semantically similar to extend.</p>
<p><code>my_list + another_list</code> creates a third list in memory, so you can return the result of it, but it requires that the second iterable be a list.</p>
<p><code>my_list += another_list</code> modifies the list in-place (it <em>is</em> the in-place operator, and lists are mutable objects, as we’ve seen) so it does not create a new list. It also works like extend, in that the second iterable can be any kind of iterable.</p>
<p>Don’t get confused - <code>my_list = my_list + another_list</code> is not equivalent to <code>+=</code> - it gives you a brand new list assigned to my_list.</p>
<h5>
Time Complexity
</h2>
<p>Append has <a href="https://wiki.python.org/moin/TimeComplexity" rel="noreferrer">constant time complexity</a>, O(1).</p>
<p>Extend has time complexity, O(k).</p>
<p>Iterating through the multiple calls to <code>append</code> adds to the complexity, making it equivalent to that of extend, and since extend’s iteration is implemented in C, it will always be faster if you intend to append successive items from an iterable onto a list.</p>
<h5>
Performance
</h2>
<p>You may wonder what is more performant, since append can be used to achieve the same outcome as extend. The following functions do the same thing:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1"></a><span class="kw">def</span> append(alist, iterable):</span>
<span id="cb114-2"><a href="#cb114-2"></a>    <span class="cf">for</span> item <span class="kw">in</span> iterable:</span>
<span id="cb114-3"><a href="#cb114-3"></a>        alist.append(item)</span>
<span id="cb114-4"><a href="#cb114-4"></a></span>
<span id="cb114-5"><a href="#cb114-5"></a><span class="kw">def</span> extend(alist, iterable):</span>
<span id="cb114-6"><a href="#cb114-6"></a>    alist.extend(iterable)</span></code></pre></div>
<p>So let’s time them:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1"></a><span class="im">import</span> timeit</span>
<span id="cb115-2"><a href="#cb115-2"></a></span>
<span id="cb115-3"><a href="#cb115-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: append([], <span class="st">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>)))</span>
<span id="cb115-4"><a href="#cb115-4"></a><span class="fl">2.867846965789795</span></span>
<span id="cb115-5"><a href="#cb115-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: extend([], <span class="st">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>)))</span>
<span id="cb115-6"><a href="#cb115-6"></a><span class="fl">0.8060121536254883</span></span></code></pre></div>
<h5>
Addressing a comment on timings
</h3>
<p>A commenter said:</p>
<blockquote>
Perfect answer, I just miss the timing of comparing adding only one element
</blockquote>
<p>Do the semantically correct thing. If you want to append all elements in an iterable, use <code>extend</code>. If you’re just adding one element, use <code>append</code>.</p>
<p>Ok, so let’s create an experiment to see how this works out in time:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1"></a><span class="kw">def</span> append_one(a_list, element):</span>
<span id="cb116-2"><a href="#cb116-2"></a>    a_list.append(element)</span>
<span id="cb116-3"><a href="#cb116-3"></a></span>
<span id="cb116-4"><a href="#cb116-4"></a><span class="kw">def</span> extend_one(a_list, element):</span>
<span id="cb116-5"><a href="#cb116-5"></a>    <span class="co">&quot;&quot;&quot;creating a new list is semantically the most direct</span></span>
<span id="cb116-6"><a href="#cb116-6"></a><span class="co">    way to create an iterable to give to extend&quot;&quot;&quot;</span></span>
<span id="cb116-7"><a href="#cb116-7"></a>    a_list.extend([element])</span>
<span id="cb116-8"><a href="#cb116-8"></a></span>
<span id="cb116-9"><a href="#cb116-9"></a><span class="im">import</span> timeit</span></code></pre></div>
<p>And we see that going out of our way to create an iterable just to use extend is a (minor) waste of time:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: append_one([], <span class="dv">0</span>)))</span>
<span id="cb117-2"><a href="#cb117-2"></a><span class="fl">0.2082819009956438</span></span>
<span id="cb117-3"><a href="#cb117-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: extend_one([], <span class="dv">0</span>)))</span>
<span id="cb117-4"><a href="#cb117-4"></a><span class="fl">0.2397019260097295</span></span></code></pre></div>
<p>We learn from this that there’s nothing gained from using <code>extend</code> when we have only <em>one</em> element to append.</p>
<p>Also, these timings are not that important. I am just showing them to make the point that, in Python, doing the semantically correct thing is doing things the <em>Right</em> Way™.</p>
<p>It’s conceivable that you might test timings on two comparable operations and get an ambiguous or inverse result. Just focus on doing the semantically correct thing.</p>
<h5>
Conclusion
</h2>
<p>We see that <code>extend</code> is semantically clearer, and that it can run much faster than <code>append</code>, <em>when you intend to append each element in an iterable to a list.</em></p>
<p>If you only have a single element (not in an iterable) to add to the list, use <code>append</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="limiting-floats-to-two-decimal-points-score-2780835-in-2017" class="level3">
<h3>18: Limiting floats to two decimal points (score <a href="https://stackoverflow.com/q/455612.html">2780835</a> in 2017)</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>I want <code>a</code> to be rounded to <em>13.95</em>.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb118-2"><a href="#cb118-2"></a><span class="fl">13.949999999999999</span></span>
<span id="cb118-3"><a href="#cb118-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">round</span>(a, <span class="dv">2</span>)</span>
<span id="cb118-4"><a href="#cb118-4"></a><span class="fl">13.949999999999999</span></span></code></pre></div>
<p>The <a href="https://docs.python.org/2/library/functions.html#round" rel="noreferrer"><code>round</code></a> function does not work the way I expected.</p>
</section>
<section id="answer-2-score-1484" class="level4">
<h4>Answer 2 (score 1484)</h4>
<p>You are running into the <a href="https://en.wikipedia.org/wiki/IEEE_754" rel="noreferrer">old problem</a> with floating point numbers that not all numbers can be represented exactly. The command line is just showing you the full floating point form from memory.</p>
<p>With floating point representation, your rounded version is the same number. Since computers are binary, they store floating point numbers as an integer and then divide it by a power of two so 13.95 will be represented in a similar fashion to 125650429603636838/(2**53).</p>
<p>Double precision numbers have 53 bits (16 digits) of precision and regular floats have 24 bits (8 digits) of precision. The <a href="http://docs.python.org/tutorial/floatingpoint.html" rel="noreferrer">floating point type in Python uses double precision</a> to store the values.</p>
<p>For example,</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="dv">125650429603636838</span><span class="op">/</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">53</span>)</span>
<span id="cb119-2"><a href="#cb119-2"></a>  <span class="fl">13.949999999999999</span></span>
<span id="cb119-3"><a href="#cb119-3"></a></span>
<span id="cb119-4"><a href="#cb119-4"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="dv">234042163</span><span class="op">/</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">24</span>)</span>
<span id="cb119-5"><a href="#cb119-5"></a>  <span class="fl">13.949999988079071</span></span>
<span id="cb119-6"><a href="#cb119-6"></a></span>
<span id="cb119-7"><a href="#cb119-7"></a>  <span class="op">&gt;&gt;&gt;</span> a<span class="op">=</span><span class="fl">13.946</span></span>
<span id="cb119-8"><a href="#cb119-8"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(a)</span>
<span id="cb119-9"><a href="#cb119-9"></a>  <span class="fl">13.946</span></span>
<span id="cb119-10"><a href="#cb119-10"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">%.2f</span><span class="st">&quot;</span> <span class="op">%</span> a)</span>
<span id="cb119-11"><a href="#cb119-11"></a>  <span class="fl">13.95</span></span>
<span id="cb119-12"><a href="#cb119-12"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">round</span>(a,<span class="dv">2</span>)</span>
<span id="cb119-13"><a href="#cb119-13"></a>  <span class="fl">13.949999999999999</span></span>
<span id="cb119-14"><a href="#cb119-14"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">%.2f</span><span class="st">&quot;</span> <span class="op">%</span> <span class="bu">round</span>(a,<span class="dv">2</span>))</span>
<span id="cb119-15"><a href="#cb119-15"></a>  <span class="fl">13.95</span></span>
<span id="cb119-16"><a href="#cb119-16"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(a))</span>
<span id="cb119-17"><a href="#cb119-17"></a>  <span class="fl">13.95</span></span>
<span id="cb119-18"><a href="#cb119-18"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="bu">round</span>(a,<span class="dv">2</span>)))</span>
<span id="cb119-19"><a href="#cb119-19"></a>  <span class="fl">13.95</span></span>
<span id="cb119-20"><a href="#cb119-20"></a>  <span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&quot;</span><span class="sc">{0:.15f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="bu">round</span>(a,<span class="dv">2</span>)))</span>
<span id="cb119-21"><a href="#cb119-21"></a>  <span class="fl">13.949999999999999</span></span></code></pre></div>
<p>If you are after only two decimal places (to display a currency value, for example), then you have a couple of better choices:</p>
<ol>
<li>
Use integers and store values in cents, not dollars and then divide by 100 to convert to dollars.
</li>
<li>
Or use a fixed point number like <a href="https://docs.python.org/library/decimal.html" rel="noreferrer">decimal</a>.
</li>
</ol>
</section>
<section id="answer-3-score-525" class="level4">
<h4>Answer 3 (score 525)</h4>
<p>There are new format specifications, <a href="http://docs.python.org/library/string.html#format-specification-mini-language" rel="noreferrer"><strong>String Format Specification Mini-Language</strong></a>:</p>
<p>You can do the same as:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1"></a><span class="co">&quot;{0:.2f}&quot;</span>.<span class="bu">format</span>(<span class="fl">13.949999999999999</span>)</span></code></pre></div>
<p><strong>Note</strong> that the above returns a string. In order to get as float, simply wrap with <code>float(...)</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1"></a><span class="bu">float</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="fl">13.949999999999999</span>))</span></code></pre></div>
<p><strong>Note</strong> that wrapping with <code>float()</code> doesn’t change anything:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="fl">13.949999999999999999</span></span>
<span id="cb122-2"><a href="#cb122-2"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb122-3"><a href="#cb122-3"></a><span class="fl">13.95</span></span>
<span id="cb122-4"><a href="#cb122-4"></a><span class="op">&gt;&gt;&gt;</span> g <span class="op">=</span> <span class="bu">float</span>(<span class="st">&quot;</span><span class="sc">{0:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(x))</span>
<span id="cb122-5"><a href="#cb122-5"></a><span class="op">&gt;&gt;&gt;</span> g</span>
<span id="cb122-6"><a href="#cb122-6"></a><span class="fl">13.95</span></span>
<span id="cb122-7"><a href="#cb122-7"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">==</span> g</span>
<span id="cb122-8"><a href="#cb122-8"></a><span class="va">True</span></span>
<span id="cb122-9"><a href="#cb122-9"></a><span class="op">&gt;&gt;&gt;</span> h <span class="op">=</span> <span class="bu">round</span>(x, <span class="dv">2</span>)</span>
<span id="cb122-10"><a href="#cb122-10"></a><span class="op">&gt;&gt;&gt;</span> h</span>
<span id="cb122-11"><a href="#cb122-11"></a><span class="fl">13.95</span></span>
<span id="cb122-12"><a href="#cb122-12"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">==</span> h</span>
<span id="cb122-13"><a href="#cb122-13"></a><span class="va">True</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="converting-string-into-datetime-score-2674955-in-2019" class="level3">
<h3>19: Converting string into datetime (score <a href="https://stackoverflow.com/q/466345.html">2674955</a> in 2019)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>I’ve got a huge list of date-times like this as strings:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1"></a>Jun <span class="dv">1</span> <span class="dv">2005</span>  <span class="dv">1</span>:33PM</span>
<span id="cb123-2"><a href="#cb123-2"></a>Aug <span class="dv">28</span> <span class="dv">1999</span> <span class="dv">12</span>:00AM</span></code></pre></div>
<p>I’m going to be shoving these back into proper datetime fields in a database so I need to magic them into real datetime objects.</p>
<p>This is going through Django’s ORM so I can’t use SQL to do the conversion on insert.</p>
</section>
<section id="answer-accepted-score-3174" class="level4">
<h4>Answer accepted (score 3174)</h4>
<p><code>datetime.strptime</code> is the main routine for parsing strings into datetimes. It can handle all sorts of formats, with the format determined by a format string you give it:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb124-2"><a href="#cb124-2"></a></span>
<span id="cb124-3"><a href="#cb124-3"></a>datetime_object <span class="op">=</span> datetime.strptime(<span class="st">&#39;Jun 1 2005  1:33PM&#39;</span>, <span class="st">&#39;%b </span><span class="sc">%d</span><span class="st"> %Y %I:%M%p&#39;</span>)</span></code></pre></div>
<p>The resulting <code>datetime</code> object is timezone-naive.</p>
<p>Links:</p>
<ul>
<li>
<p>
Python documentation for <code>strptime</code>: <a href="https://docs.python.org/2/library/datetime.html#datetime.datetime.strptime" rel="noreferrer" title="datetime.datetime.strptime">Python 2</a>, <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime" rel="noreferrer">Python 3</a>
</p>
</li>
<li>
<p>
Python documentation for <code>strptime</code>/<code>strftime</code> format strings: <a href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" rel="noreferrer" title="strftime-and-strptime-behavior">Python 2</a>, <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="noreferrer">Python 3</a>
</p>
</li>
<li>
<p>
<a href="http://strftime.org/" rel="noreferrer">strftime.org</a> is also a really nice reference for strftime
</p>
</li>
</ul>
<p>Notes:</p>
<ul>
<li>
<code>strptime</code> = “string parse time”
</li>
<li>
<code>strftime</code> = “string format time”
</li>
<li>
Pronounce it out loud today &amp; you won’t have to search for it again in 6 months.
</li>
</ul>
</section>
<section id="answer-2-score-757" class="level4">
<h4>Answer 2 (score 757)</h4>
<p>Use the third party <a href="https://dateutil.readthedocs.io" rel="nofollow noreferrer">dateutil</a> library:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1"></a><span class="im">from</span> dateutil <span class="im">import</span> parser</span>
<span id="cb125-2"><a href="#cb125-2"></a>parser.parse(<span class="st">&quot;Aug 28 1999 12:00AM&quot;</span>)  <span class="co"># datetime.datetime(1999, 8, 28, 0, 0)</span></span></code></pre></div>
<p>It can handle most date formats, including the one you need to parse. It’s more convenient than <code>strptime</code> as it can guess the correct format most of the time.</p>
<p>It’s very useful for writing tests, where readability is more important than performance.</p>
<p>You can install it with:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1"></a>pip install python<span class="op">-</span>dateutil</span></code></pre></div>
</section>
<section id="answer-3-score-477-1" class="level4">
<h4>Answer 3 (score 477)</h4>
<p>Check out <a href="http://docs.python.org/3/library/time.html#time.strptime" rel="noreferrer">strptime</a> in the <a href="http://docs.python.org/3/library/time.html" rel="noreferrer">time</a> module. It is the inverse of <a href="http://docs.python.org/3/library/time.html#time.strftime" rel="noreferrer">strftime</a>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1"></a>$ python</span>
<span id="cb127-2"><a href="#cb127-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> time</span>
<span id="cb127-3"><a href="#cb127-3"></a><span class="op">&gt;&gt;&gt;</span> time.strptime(<span class="st">&#39;Jun 1 2005  1:33PM&#39;</span>, <span class="st">&#39;%b </span><span class="sc">%d</span><span class="st"> %Y %I:%M%p&#39;</span>)</span>
<span id="cb127-4"><a href="#cb127-4"></a>time.struct_time(tm_year<span class="op">=</span><span class="dv">2005</span>, tm_mon<span class="op">=</span><span class="dv">6</span>, tm_mday<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb127-5"><a href="#cb127-5"></a>                 tm_hour<span class="op">=</span><span class="dv">13</span>, tm_min<span class="op">=</span><span class="dv">33</span>, tm_sec<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb127-6"><a href="#cb127-6"></a>                 tm_wday<span class="op">=</span><span class="dv">2</span>, tm_yday<span class="op">=</span><span class="dv">152</span>, tm_isdst<span class="op">=-</span><span class="dv">1</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-a-substring-of-a-string-in-python-score-2671603-in-2019" class="level3">
<h3>20: How do I get a substring of a string in Python? (score <a href="https://stackoverflow.com/q/663171.html">2671603</a> in 2019)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>Is there a way to substring a string in Python, to get a new string from the third character to the end of the string?</p>
<p>Maybe like <code>myString[2:end]</code>?</p>
<p>If leaving the second part means ‘till the end’, and if you leave the first part, does it start from the start?</p>
</section>
<section id="answer-accepted-score-2939" class="level4">
<h4>Answer accepted (score 2939)</h4>
<div class="sourceCode" id="cb128"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="st">&quot;Hello World!&quot;</span></span>
<span id="cb128-2"><a href="#cb128-2"></a><span class="op">&gt;&gt;&gt;</span> x[<span class="dv">2</span>:]</span>
<span id="cb128-3"><a href="#cb128-3"></a><span class="co">&#39;llo World!&#39;</span></span>
<span id="cb128-4"><a href="#cb128-4"></a><span class="op">&gt;&gt;&gt;</span> x[:<span class="dv">2</span>]</span>
<span id="cb128-5"><a href="#cb128-5"></a><span class="co">&#39;He&#39;</span></span>
<span id="cb128-6"><a href="#cb128-6"></a><span class="op">&gt;&gt;&gt;</span> x[:<span class="op">-</span><span class="dv">2</span>]</span>
<span id="cb128-7"><a href="#cb128-7"></a><span class="co">&#39;Hello Worl&#39;</span></span>
<span id="cb128-8"><a href="#cb128-8"></a><span class="op">&gt;&gt;&gt;</span> x[<span class="op">-</span><span class="dv">2</span>:]</span>
<span id="cb128-9"><a href="#cb128-9"></a><span class="co">&#39;d!&#39;</span></span>
<span id="cb128-10"><a href="#cb128-10"></a><span class="op">&gt;&gt;&gt;</span> x[<span class="dv">2</span>:<span class="op">-</span><span class="dv">2</span>]</span>
<span id="cb128-11"><a href="#cb128-11"></a><span class="co">&#39;llo Worl&#39;</span></span></code></pre></div>
<p>Python calls this concept “slicing” and it works on more than just strings. Take a look <a href="https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation">here</a> for a comprehensive introduction.</p>
</section>
<section id="answer-2-score-361" class="level4">
<h4>Answer 2 (score 361)</h4>
<p>Just for completeness as nobody else has mentioned it. The third parameter to an array slice is a step. So reversing a string is as simple as:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1"></a>some_string[::<span class="op">-</span><span class="dv">1</span>]</span></code></pre></div>
<p>Or selecting alternate characters would be:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1"></a><span class="co">&quot;H-e-l-l-o- -W-o-r-l-d&quot;</span>[::<span class="dv">2</span>] <span class="co"># outputs &quot;Hello World&quot;</span></span></code></pre></div>
<p>The ability to step forwards and backwards through the string maintains consistency with being able to array slice from the start or end.</p>
</section>
<section id="answer-3-score-108" class="level4">
<h4>Answer 3 (score 108)</h4>
<p>Substr() normally (i.e. PHP and Perl) works this way:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1"></a>s <span class="op">=</span> Substr(s, beginning, LENGTH)</span></code></pre></div>
<p>So the parameters are <code>beginning</code> and <code>LENGTH</code>.</p>
<p>But Python’s behaviour is different; it expects beginning and one after END (!). <strong>This is difficult to spot by beginners.</strong> So the correct replacement for Substr(s, beginning, LENGTH) is</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1"></a>s <span class="op">=</span> s[ beginning : beginning <span class="op">+</span> LENGTH]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-current-directory-and-files-directory-score-2648748-in-2016" class="level3">
<h3>21: Find current directory and file’s directory (score <a href="https://stackoverflow.com/q/5137497.html">2648748</a> in 2016)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>In Python, what commands can I use to find:</p>
<ol>
<li>
the current directory (where I was in the terminal when I ran the Python script), and
</li>
<li>
where the file I am executing is?
</li>
</ol>
</section>
<section id="answer-accepted-score-3058" class="level4">
<h4>Answer accepted (score 3058)</h4>
<p>To get the full path to the directory a Python file is contained in, write this in that file:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1"></a><span class="im">import</span> os </span>
<span id="cb133-2"><a href="#cb133-2"></a>dir_path <span class="op">=</span> os.path.dirname(os.path.realpath(<span class="va">__file__</span>))</span></code></pre></div>
<p>(Note that the incantation above won’t work if you’ve already used <code>os.chdir()</code> to change your current working directory, since the value of the <code>__file__</code> constant is relative to the current working directory and is not changed by an <code>os.chdir()</code> call.)</p>
<hr>
<p>To get the current working directory use</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1"></a><span class="im">import</span> os</span>
<span id="cb134-2"><a href="#cb134-2"></a>cwd <span class="op">=</span> os.getcwd()</span></code></pre></div>
<hr>
<p>Documentation references for the modules, constants and functions used above:</p>
<ul>
<li>
The <a href="https://docs.python.org/library/os.html"><code>os</code></a> and <a href="https://docs.python.org/library/os.path.html#module-os.path"><code>os.path</code></a> modules.
</li>
<li>
The <a href="https://docs.python.org/reference/datamodel.html"><code>__file__</code></a> constant
</li>
<li>
<a href="https://docs.python.org/library/os.path.html#os.path.realpath"><code>os.path.realpath(path)</code></a> (returns <em>“the canonical path of the specified filename, eliminating any symbolic links encountered in the path”</em>)
</li>
<li>
<a href="https://docs.python.org/library/os.path.html#os.path.dirname"><code>os.path.dirname(path)</code></a> (returns <em>“the directory name of pathname <code>path</code>”</em>)
</li>
<li>
<a href="https://docs.python.org/library/os.html#os.getcwd"><code>os.getcwd()</code></a> (returns <em>“a string representing the current working directory”</em>)
</li>
<li>
<a href="https://docs.python.org/library/os.html#os.chdir"><code>os.chdir(path)</code></a> (<em>“change the current working directory to <code>path</code>”</em>)
</li>
</ul>
</section>
<section id="answer-2-score-308" class="level4">
<h4>Answer 2 (score 308)</h4>
<p>Current Working Directory: <a href="https://docs.python.org/2/library/os.html#os.getcwd" rel="noreferrer"><code>os.getcwd()</code></a></p>
<p>And the <a href="http://docs.python.org/reference/datamodel.html" rel="noreferrer"><code>__file__</code> attribute</a> can help you find out where the file you are executing is located. This SO post explains everything: <a href="https://stackoverflow.com/questions/2632199/how-do-i-get-the-path-of-the-current-executed-file-in-python">How do I get the path of the current executed file in Python?</a></p>
</section>
<section id="answer-3-score-260" class="level4">
<h4>Answer 3 (score 260)</h4>
<p>You may find this useful as a reference:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1"></a><span class="im">import</span> os</span>
<span id="cb135-2"><a href="#cb135-2"></a></span>
<span id="cb135-3"><a href="#cb135-3"></a><span class="bu">print</span>(<span class="st">&quot;Path at terminal when executing this file&quot;</span>)</span>
<span id="cb135-4"><a href="#cb135-4"></a><span class="bu">print</span>(os.getcwd() <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb135-5"><a href="#cb135-5"></a></span>
<span id="cb135-6"><a href="#cb135-6"></a><span class="bu">print</span>(<span class="st">&quot;This file path, relative to os.getcwd()&quot;</span>)</span>
<span id="cb135-7"><a href="#cb135-7"></a><span class="bu">print</span>(<span class="va">__file__</span> <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb135-8"><a href="#cb135-8"></a></span>
<span id="cb135-9"><a href="#cb135-9"></a><span class="bu">print</span>(<span class="st">&quot;This file full path (following symlinks)&quot;</span>)</span>
<span id="cb135-10"><a href="#cb135-10"></a>full_path <span class="op">=</span> os.path.realpath(<span class="va">__file__</span>)</span>
<span id="cb135-11"><a href="#cb135-11"></a><span class="bu">print</span>(full_path <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb135-12"><a href="#cb135-12"></a></span>
<span id="cb135-13"><a href="#cb135-13"></a><span class="bu">print</span>(<span class="st">&quot;This file directory and name&quot;</span>)</span>
<span id="cb135-14"><a href="#cb135-14"></a>path, filename <span class="op">=</span> os.path.split(full_path)</span>
<span id="cb135-15"><a href="#cb135-15"></a><span class="bu">print</span>(path <span class="op">+</span> <span class="st">&#39; --&gt; &#39;</span> <span class="op">+</span> filename <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb135-16"><a href="#cb135-16"></a></span>
<span id="cb135-17"><a href="#cb135-17"></a><span class="bu">print</span>(<span class="st">&quot;This file directory only&quot;</span>)</span>
<span id="cb135-18"><a href="#cb135-18"></a><span class="bu">print</span>(os.path.dirname(full_path))</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-cant-python-parse-this-json-data-score-2591542-in-2019" class="level3">
<h3>22: Why can’t Python parse this JSON data? (score <a href="https://stackoverflow.com/q/2835559.html">2591542</a> in 2019)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>I have this JSON in a file:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1"></a>{</span>
<span id="cb136-2"><a href="#cb136-2"></a>    <span class="st">&quot;maps&quot;</span>: [</span>
<span id="cb136-3"><a href="#cb136-3"></a>        {</span>
<span id="cb136-4"><a href="#cb136-4"></a>            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</span>
<span id="cb136-5"><a href="#cb136-5"></a>            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></span>
<span id="cb136-6"><a href="#cb136-6"></a>        },</span>
<span id="cb136-7"><a href="#cb136-7"></a>        {</span>
<span id="cb136-8"><a href="#cb136-8"></a>            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</span>
<span id="cb136-9"><a href="#cb136-9"></a>            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></span>
<span id="cb136-10"><a href="#cb136-10"></a>        }</span>
<span id="cb136-11"><a href="#cb136-11"></a>    ],</span>
<span id="cb136-12"><a href="#cb136-12"></a>    <span class="st">&quot;masks&quot;</span>: [</span>
<span id="cb136-13"><a href="#cb136-13"></a>        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></span>
<span id="cb136-14"><a href="#cb136-14"></a>    ],</span>
<span id="cb136-15"><a href="#cb136-15"></a>    <span class="st">&quot;om_points&quot;</span>: <span class="st">&quot;value&quot;</span>,</span>
<span id="cb136-16"><a href="#cb136-16"></a>    <span class="st">&quot;parameters&quot;</span>: [</span>
<span id="cb136-17"><a href="#cb136-17"></a>        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></span>
<span id="cb136-18"><a href="#cb136-18"></a>    ]</span>
<span id="cb136-19"><a href="#cb136-19"></a>}</span></code></pre></div>
<p>I wrote this script to print all of the JSON data:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1"></a><span class="im">import</span> json</span>
<span id="cb137-2"><a href="#cb137-2"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb137-3"><a href="#cb137-3"></a></span>
<span id="cb137-4"><a href="#cb137-4"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb137-5"><a href="#cb137-5"></a>    data <span class="op">=</span> json.load(f)</span>
<span id="cb137-6"><a href="#cb137-6"></a></span>
<span id="cb137-7"><a href="#cb137-7"></a>pprint(data)</span></code></pre></div>
<p>This program raises an exception, though:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1"></a>Traceback (most recent call last):</span>
<span id="cb138-2"><a href="#cb138-2"></a>  File <span class="st">&quot;&lt;pyshell#1&gt;&quot;</span>, line <span class="dv">5</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb138-3"><a href="#cb138-3"></a>    data <span class="op">=</span> json.load(f)</span>
<span id="cb138-4"><a href="#cb138-4"></a>  File <span class="st">&quot;/usr/lib/python3.5/json/__init__.py&quot;</span>, line <span class="dv">319</span>, <span class="kw">in</span> loads</span>
<span id="cb138-5"><a href="#cb138-5"></a>    <span class="cf">return</span> _default_decoder.decode(s)</span>
<span id="cb138-6"><a href="#cb138-6"></a>  File <span class="st">&quot;/usr/lib/python3.5/json/decoder.py&quot;</span>, line <span class="dv">339</span>, <span class="kw">in</span> decode</span>
<span id="cb138-7"><a href="#cb138-7"></a>    obj, end <span class="op">=</span> <span class="va">self</span>.raw_decode(s, idx<span class="op">=</span>_w(s, <span class="dv">0</span>).end())</span>
<span id="cb138-8"><a href="#cb138-8"></a>  File <span class="st">&quot;/usr/lib/python3.5/json/decoder.py&quot;</span>, line <span class="dv">355</span>, <span class="kw">in</span> raw_decode</span>
<span id="cb138-9"><a href="#cb138-9"></a>    obj, end <span class="op">=</span> <span class="va">self</span>.scan_once(s, idx)</span>
<span id="cb138-10"><a href="#cb138-10"></a>json.decoder.JSONDecodeError: Expecting <span class="st">&#39;,&#39;</span> delimiter: line <span class="dv">13</span> column <span class="dv">13</span> (char <span class="dv">213</span>)</span></code></pre></div>
<p>How can I parse the JSON and extract its values?</p>
</section>
<section id="answer-accepted-score-2081" class="level4">
<h4>Answer accepted (score 2081)</h4>
<p>Your data is not valid <a href="https://www.json.org/" rel="noreferrer">JSON</a> format. You have <code>[]</code> when you should have <code>{}</code>:</p>
<ul>
<li>
<code>[]</code> are for JSON arrays, which are called <code>list</code> in Python
</li>
<li>
<code>{}</code> are for JSON objects, which are called <code>dict</code> in Python
</li>
</ul>
<p>Here’s how your JSON file should look:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1"></a>{</span>
<span id="cb139-2"><a href="#cb139-2"></a>    <span class="st">&quot;maps&quot;</span>: [</span>
<span id="cb139-3"><a href="#cb139-3"></a>        {</span>
<span id="cb139-4"><a href="#cb139-4"></a>            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</span>
<span id="cb139-5"><a href="#cb139-5"></a>            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></span>
<span id="cb139-6"><a href="#cb139-6"></a>        },</span>
<span id="cb139-7"><a href="#cb139-7"></a>        {</span>
<span id="cb139-8"><a href="#cb139-8"></a>            <span class="st">&quot;id&quot;</span>: <span class="st">&quot;blabla&quot;</span>,</span>
<span id="cb139-9"><a href="#cb139-9"></a>            <span class="st">&quot;iscategorical&quot;</span>: <span class="st">&quot;0&quot;</span></span>
<span id="cb139-10"><a href="#cb139-10"></a>        }</span>
<span id="cb139-11"><a href="#cb139-11"></a>    ],</span>
<span id="cb139-12"><a href="#cb139-12"></a>    <span class="st">&quot;masks&quot;</span>: {</span>
<span id="cb139-13"><a href="#cb139-13"></a>        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></span>
<span id="cb139-14"><a href="#cb139-14"></a>    },</span>
<span id="cb139-15"><a href="#cb139-15"></a>    <span class="st">&quot;om_points&quot;</span>: <span class="st">&quot;value&quot;</span>,</span>
<span id="cb139-16"><a href="#cb139-16"></a>    <span class="st">&quot;parameters&quot;</span>: {</span>
<span id="cb139-17"><a href="#cb139-17"></a>        <span class="st">&quot;id&quot;</span>: <span class="st">&quot;valore&quot;</span></span>
<span id="cb139-18"><a href="#cb139-18"></a>    }</span>
<span id="cb139-19"><a href="#cb139-19"></a>}</span></code></pre></div>
<p>Then you can use your code:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1"></a><span class="im">import</span> json</span>
<span id="cb140-2"><a href="#cb140-2"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb140-3"><a href="#cb140-3"></a></span>
<span id="cb140-4"><a href="#cb140-4"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb140-5"><a href="#cb140-5"></a>    data <span class="op">=</span> json.load(f)</span>
<span id="cb140-6"><a href="#cb140-6"></a></span>
<span id="cb140-7"><a href="#cb140-7"></a>pprint(data)</span></code></pre></div>
<p>With data, you can now also find values like so:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1"></a>data[<span class="st">&quot;maps&quot;</span>][<span class="dv">0</span>][<span class="st">&quot;id&quot;</span>]</span>
<span id="cb141-2"><a href="#cb141-2"></a>data[<span class="st">&quot;masks&quot;</span>][<span class="st">&quot;id&quot;</span>]</span>
<span id="cb141-3"><a href="#cb141-3"></a>data[<span class="st">&quot;om_points&quot;</span>]</span></code></pre></div>
<p>Try those out and see if it starts to make sense.</p>
</section>
<section id="answer-2-score-304" class="level4">
<h4>Answer 2 (score 304)</h4>
<p>Your <code>data.json</code> should look like this:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1"></a>{</span>
<span id="cb142-2"><a href="#cb142-2"></a> <span class="st">&quot;maps&quot;</span>:[</span>
<span id="cb142-3"><a href="#cb142-3"></a>         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;blabla&quot;</span>,<span class="st">&quot;iscategorical&quot;</span>:<span class="st">&quot;0&quot;</span>},</span>
<span id="cb142-4"><a href="#cb142-4"></a>         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;blabla&quot;</span>,<span class="st">&quot;iscategorical&quot;</span>:<span class="st">&quot;0&quot;</span>}</span>
<span id="cb142-5"><a href="#cb142-5"></a>        ],</span>
<span id="cb142-6"><a href="#cb142-6"></a><span class="st">&quot;masks&quot;</span>:</span>
<span id="cb142-7"><a href="#cb142-7"></a>         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;valore&quot;</span>},</span>
<span id="cb142-8"><a href="#cb142-8"></a><span class="st">&quot;om_points&quot;</span>:<span class="st">&quot;value&quot;</span>,</span>
<span id="cb142-9"><a href="#cb142-9"></a><span class="st">&quot;parameters&quot;</span>:</span>
<span id="cb142-10"><a href="#cb142-10"></a>         {<span class="st">&quot;id&quot;</span>:<span class="st">&quot;valore&quot;</span>}</span>
<span id="cb142-11"><a href="#cb142-11"></a>}</span></code></pre></div>
<p>Your code should be:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1"></a><span class="im">import</span> json</span>
<span id="cb143-2"><a href="#cb143-2"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb143-3"><a href="#cb143-3"></a></span>
<span id="cb143-4"><a href="#cb143-4"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>) <span class="im">as</span> data_file:    </span>
<span id="cb143-5"><a href="#cb143-5"></a>    data <span class="op">=</span> json.load(data_file)</span>
<span id="cb143-6"><a href="#cb143-6"></a>pprint(data)</span></code></pre></div>
<p>Note that this only works in Python 2.6 and up, as it depends upon the <a href="http://docs.python.org/2/reference/compound_stmts.html#the-with-statement" rel="noreferrer"><code>with</code>-statement</a>. In Python 2.5 use <code>from __future__ import with_statement</code>, in Python &lt;= 2.4, see <a href="https://stackoverflow.com/a/2835672/906658">Justin Peel’s answer</a>, which this answer is based upon.</p>
<p>You can now also access single values like this:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1"></a>data[<span class="st">&quot;maps&quot;</span>][<span class="dv">0</span>][<span class="st">&quot;id&quot;</span>]  <span class="co"># will return &#39;blabla&#39;</span></span>
<span id="cb144-2"><a href="#cb144-2"></a>data[<span class="st">&quot;masks&quot;</span>][<span class="st">&quot;id&quot;</span>]    <span class="co"># will return &#39;valore&#39;</span></span>
<span id="cb144-3"><a href="#cb144-3"></a>data[<span class="st">&quot;om_points&quot;</span>]      <span class="co"># will return &#39;value&#39;</span></span></code></pre></div>
</section>
<section id="answer-3-score-64" class="level4">
<h4>Answer 3 (score 64)</h4>
<p><a href="https://stackoverflow.com/a/2835672/906658">Justin Peel’s answer</a> is really helpful, but if you are using Python 3 reading JSON should be done like this:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data.json&#39;</span>, encoding<span class="op">=</span><span class="st">&#39;utf-8&#39;</span>) <span class="im">as</span> data_file:</span>
<span id="cb145-2"><a href="#cb145-2"></a>    data <span class="op">=</span> json.loads(data_file.read())</span></code></pre></div>
<p>Note: use <code>json.loads</code> instead of <code>json.load</code>. In Python 3, <code>json.loads</code> takes a string parameter. <code>json.load</code> takes a file-like object parameter. <code>data_file.read()</code> returns a string object.</p>
<p>To be honest, I don’t think it’s a problem to load all json data into memory most cases.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-if-name-main-do-score-2531456-in-2018" class="level3">
<h3>23: What does if <strong>name</strong> == “<strong>main</strong>”: do? (score <a href="https://stackoverflow.com/q/419163.html">2531456</a> in 2018)</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>What does the <code>if __name__ == "__main__":</code> do?</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb146-1"><a href="#cb146-1"></a><span class="co"># Threading example</span></span>
<span id="cb146-2"><a href="#cb146-2"></a><span class="im">import</span> time, thread</span>
<span id="cb146-3"><a href="#cb146-3"></a></span>
<span id="cb146-4"><a href="#cb146-4"></a><span class="kw">def</span> myfunction(string, sleeptime, lock, <span class="op">*</span>args):</span>
<span id="cb146-5"><a href="#cb146-5"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb146-6"><a href="#cb146-6"></a>        lock.acquire()</span>
<span id="cb146-7"><a href="#cb146-7"></a>        time.sleep(sleeptime)</span>
<span id="cb146-8"><a href="#cb146-8"></a>        lock.release()</span>
<span id="cb146-9"><a href="#cb146-9"></a>        time.sleep(sleeptime)</span>
<span id="cb146-10"><a href="#cb146-10"></a></span>
<span id="cb146-11"><a href="#cb146-11"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb146-12"><a href="#cb146-12"></a>    lock <span class="op">=</span> thread.allocate_lock()</span>
<span id="cb146-13"><a href="#cb146-13"></a>    thread.start_new_thread(myfunction, (<span class="st">&quot;Thread #: 1&quot;</span>, <span class="dv">2</span>, lock))</span>
<span id="cb146-14"><a href="#cb146-14"></a>    thread.start_new_thread(myfunction, (<span class="st">&quot;Thread #: 2&quot;</span>, <span class="dv">2</span>, lock))</span></code></pre></div>
</section>
<section id="answer-accepted-score-5891" class="level4">
<h4>Answer accepted (score 5891)</h4>
<p>Whenever the Python interpreter reads a source file, it does two things:</p>
<ul>
<li>
<p>
it sets a few special variables like <code>__name__</code>, and then
</p>
</li>
<li>
<p>
it executes all of the code found in the file.
</p>
</li>
</ul>
<p>Let’s see how this works and how it relates to your question about the <code>__name__</code> checks we always see in Python scripts.</p>
<h5>
Code Sample
</h1>
<p>Let’s use a slightly different code sample to explore how imports and scripts work. Suppose the following is in a file called <code>foo.py</code>.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1"></a><span class="co"># Suppose this is foo.py.</span></span>
<span id="cb147-2"><a href="#cb147-2"></a></span>
<span id="cb147-3"><a href="#cb147-3"></a><span class="bu">print</span>(<span class="st">&quot;before import&quot;</span>)</span>
<span id="cb147-4"><a href="#cb147-4"></a><span class="im">import</span> math</span>
<span id="cb147-5"><a href="#cb147-5"></a></span>
<span id="cb147-6"><a href="#cb147-6"></a><span class="bu">print</span>(<span class="st">&quot;before functionA&quot;</span>)</span>
<span id="cb147-7"><a href="#cb147-7"></a><span class="kw">def</span> functionA():</span>
<span id="cb147-8"><a href="#cb147-8"></a>    <span class="bu">print</span>(<span class="st">&quot;Function A&quot;</span>)</span>
<span id="cb147-9"><a href="#cb147-9"></a></span>
<span id="cb147-10"><a href="#cb147-10"></a><span class="bu">print</span>(<span class="st">&quot;before functionB&quot;</span>)</span>
<span id="cb147-11"><a href="#cb147-11"></a><span class="kw">def</span> functionB():</span>
<span id="cb147-12"><a href="#cb147-12"></a>    <span class="bu">print</span>(<span class="st">&quot;Function B </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(math.sqrt(<span class="dv">100</span>)))</span>
<span id="cb147-13"><a href="#cb147-13"></a></span>
<span id="cb147-14"><a href="#cb147-14"></a><span class="bu">print</span>(<span class="st">&quot;before __name__ guard&quot;</span>)</span>
<span id="cb147-15"><a href="#cb147-15"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb147-16"><a href="#cb147-16"></a>    functionA()</span>
<span id="cb147-17"><a href="#cb147-17"></a>    functionB()</span>
<span id="cb147-18"><a href="#cb147-18"></a><span class="bu">print</span>(<span class="st">&quot;after __name__ guard&quot;</span>)</span></code></pre></div>
<h5>
Special Variables
</h1>
<p>When the Python interpeter reads a source file, it first defines a few special variables. In this case, we care about the <code>__name__</code> variable.</p>
<p><strong>When Your Module Is the Main Program</strong></p>
<p>If you are running your module (the source file) as the main program, e.g. </p>
<div class="sourceCode" id="cb148"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1"></a>python foo.py</span></code></pre></div>
<p>the interpreter will assign the hard-coded string <code>"__main__"</code> to the <code>__name__</code> variable, i.e. </p>
<div class="sourceCode" id="cb149"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1"></a><span class="co"># It&#39;s as if the interpreter inserts this at the top</span></span>
<span id="cb149-2"><a href="#cb149-2"></a><span class="co"># of your module when run as the main program.</span></span>
<span id="cb149-3"><a href="#cb149-3"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">&quot;__main__&quot;</span> </span></code></pre></div>
<p><strong>When Your Module Is Imported By Another</strong></p>
<p>On the other hand, suppose some other module is the main program and it imports your module. This means there’s a statement like this in the main program, or in some other module the main program imports:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1"></a><span class="co"># Suppose this is in some other main program.</span></span>
<span id="cb150-2"><a href="#cb150-2"></a><span class="im">import</span> foo</span></code></pre></div>
<p>In this case, the interpreter will look at the filename of your module, <code>foo.py</code>, strip off the <code>.py</code>, and assign that string to your module’s <code>__name__</code> variable, i.e. </p>
<div class="sourceCode" id="cb151"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1"></a><span class="co"># It&#39;s as if the interpreter inserts this at the top</span></span>
<span id="cb151-2"><a href="#cb151-2"></a><span class="co"># of your module when it&#39;s imported from another module.</span></span>
<span id="cb151-3"><a href="#cb151-3"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">&quot;foo&quot;</span></span></code></pre></div>
<h5>
Executing the Module’s Code
</h1>
<p>After the special variables are set up, the interpreter executes all the code in the module, one statement at a time. You may want to open another window on the side with the code sample so you can follow along with this explanation.</p>
<p><strong>Always</strong></p>
<ol>
<li>
<p>
It prints the string <code>"before import"</code> (without quotes).
</p>
</li>
<li>
<p>
It loads the <code>math</code> module and assigns it to a variable called <code>math</code>. This is equivalent to replacing <code>import math</code> with the following (note that <code>__import__</code> is a low-level function in Python that takes a string and triggers the actual import):
</p>
</li>
</ol>
<div class="sourceCode" id="cb152"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1"></a><span class="co"># Find and load a module given its string name, &quot;math&quot;,</span></span>
<span id="cb152-2"><a href="#cb152-2"></a><span class="co"># then assign it to a local variable called math.</span></span>
<span id="cb152-3"><a href="#cb152-3"></a>math <span class="op">=</span> <span class="bu">__import__</span>(<span class="st">&quot;math&quot;</span>)</span></code></pre></div>
<ol start="3">
<li>
<p>
It prints the string <code>"before functionA"</code>.
</p>
</li>
<li>
<p>
It executes the <code>def</code> block, creating a function object, then assigning that function object to a variable called <code>functionA</code>.
</p>
</li>
<li>
<p>
It prints the string <code>"before functionB"</code>.
</p>
</li>
<li>
<p>
It executes the second <code>def</code> block, creating another function object, then assigning it to a variable called <code>functionB</code>.
</p>
</li>
<li>
<p>
It prints the string <code>"before __name__ guard"</code>.
</p>
</li>
</ol>
<p><strong>Only When Your Module Is the Main Program</strong></p>
<ol start="8">
<li>
If your module is the main program, then it will see that <code>__name__</code> was indeed set to <code>"__main__"</code> and it calls the two functions, printing the strings <code>"Function A"</code> and <code>"Function B 10.0"</code>.
</li>
</ol>
<p><strong>Only When Your Module Is Imported by Another</strong></p>
<ol start="8">
<li>
(<strong>instead</strong>) If your module is not the main program but was imported by another one, then <code>__name__</code> will be <code>"foo"</code>, not <code>"__main__"</code>, and it’ll skip the body of the <code>if</code> statement.
</li>
</ol>
<p><strong>Always</strong></p>
<ol start="9">
<li>
It will print the string <code>"after __name__ guard"</code> in both situations.
</li>
</ol>
<p><strong><em>Summary</em></strong></p>
<p>In summary, here’s what’d be printed in the two cases:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1"></a><span class="co"># What gets printed if foo is the main program</span></span>
<span id="cb153-2"><a href="#cb153-2"></a>before <span class="im">import</span></span>
<span id="cb153-3"><a href="#cb153-3"></a>before functionA</span>
<span id="cb153-4"><a href="#cb153-4"></a>before functionB</span>
<span id="cb153-5"><a href="#cb153-5"></a>before <span class="va">__name__</span> guard</span>
<span id="cb153-6"><a href="#cb153-6"></a>Function A</span>
<span id="cb153-7"><a href="#cb153-7"></a>Function B <span class="fl">10.0</span></span>
<span id="cb153-8"><a href="#cb153-8"></a>after <span class="va">__name__</span> guard</span></code></pre></div>
<div class="sourceCode" id="cb154"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1"></a><span class="co"># What gets printed if foo is imported as a regular module</span></span>
<span id="cb154-2"><a href="#cb154-2"></a>before <span class="im">import</span></span>
<span id="cb154-3"><a href="#cb154-3"></a>before functionA</span>
<span id="cb154-4"><a href="#cb154-4"></a>before functionB</span>
<span id="cb154-5"><a href="#cb154-5"></a>before <span class="va">__name__</span> guard</span>
<span id="cb154-6"><a href="#cb154-6"></a>after <span class="va">__name__</span> guard</span></code></pre></div>
<h5>
Why Does It Work This Way?
</h1>
<p>You might naturally wonder why anybody would want this. Well, sometimes you want to write a <code>.py</code> file that can be both used by other programs and/or modules as a module, and can also be run as the main program itself. Examples:</p>
<ul>
<li>
<p>
Your module is a library, but you want to have a script mode where it runs some unit tests or a demo.
</p>
</li>
<li>
<p>
Your module is only used as a main program, but it has some unit tests, and the testing framework works by importing <code>.py</code> files like your script and running special test functions. You don’t want it to try running the script just because it’s importing the module.
</p>
</li>
<li>
<p>
Your module is mostly used as a main program, but it also provides a programmer-friendly API for advanced users.
</p>
</li>
</ul>
<p>Beyond those examples, it’s elegant that running a script in Python is just setting up a few magic variables and importing the script. “Running” the script is a side effect of importing the script’s module.</p>
<h5>
Food for Thought
</h1>
<ul>
<li>
<p>
Question: Can I have multiple <code>__name__</code> checking blocks? Answer: it’s strange to do so, but the language won’t stop you.
</p>
</li>
<li>
<p>
Suppose the following is in <code>foo2.py</code>. What happens if you say <code>python foo2.py</code> on the command-line? Why?
</p>
</li>
</ul>
<div class="sourceCode" id="cb155"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1"></a><span class="co"># Suppose this is foo2.py.</span></span>
<span id="cb155-2"><a href="#cb155-2"></a></span>
<span id="cb155-3"><a href="#cb155-3"></a><span class="kw">def</span> functionA():</span>
<span id="cb155-4"><a href="#cb155-4"></a>    <span class="bu">print</span>(<span class="st">&quot;a1&quot;</span>)</span>
<span id="cb155-5"><a href="#cb155-5"></a>    <span class="im">from</span> foo2 <span class="im">import</span> functionB</span>
<span id="cb155-6"><a href="#cb155-6"></a>    <span class="bu">print</span>(<span class="st">&quot;a2&quot;</span>)</span>
<span id="cb155-7"><a href="#cb155-7"></a>    functionB()</span>
<span id="cb155-8"><a href="#cb155-8"></a>    <span class="bu">print</span>(<span class="st">&quot;a3&quot;</span>)</span>
<span id="cb155-9"><a href="#cb155-9"></a></span>
<span id="cb155-10"><a href="#cb155-10"></a><span class="kw">def</span> functionB():</span>
<span id="cb155-11"><a href="#cb155-11"></a>    <span class="bu">print</span>(<span class="st">&quot;b&quot;</span>)</span>
<span id="cb155-12"><a href="#cb155-12"></a></span>
<span id="cb155-13"><a href="#cb155-13"></a><span class="bu">print</span>(<span class="st">&quot;t1&quot;</span>)</span>
<span id="cb155-14"><a href="#cb155-14"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb155-15"><a href="#cb155-15"></a>    <span class="bu">print</span>(<span class="st">&quot;m1&quot;</span>)</span>
<span id="cb155-16"><a href="#cb155-16"></a>    functionA()</span>
<span id="cb155-17"><a href="#cb155-17"></a>    <span class="bu">print</span>(<span class="st">&quot;m2&quot;</span>)</span>
<span id="cb155-18"><a href="#cb155-18"></a><span class="bu">print</span>(<span class="st">&quot;t2&quot;</span>)</span></code></pre></div>
<ul>
<li>
Now, figure out what will happen if you remove the <code>__name__</code> check in <code>foo3.py</code>:
</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb156-1"><a href="#cb156-1"></a><span class="co"># Suppose this is foo3.py.</span></span>
<span id="cb156-2"><a href="#cb156-2"></a></span>
<span id="cb156-3"><a href="#cb156-3"></a><span class="kw">def</span> functionA():</span>
<span id="cb156-4"><a href="#cb156-4"></a>    <span class="bu">print</span>(<span class="st">&quot;a1&quot;</span>)</span>
<span id="cb156-5"><a href="#cb156-5"></a>    <span class="im">from</span> foo3 <span class="im">import</span> functionB</span>
<span id="cb156-6"><a href="#cb156-6"></a>    <span class="bu">print</span>(<span class="st">&quot;a2&quot;</span>)</span>
<span id="cb156-7"><a href="#cb156-7"></a>    functionB()</span>
<span id="cb156-8"><a href="#cb156-8"></a>    <span class="bu">print</span>(<span class="st">&quot;a3&quot;</span>)</span>
<span id="cb156-9"><a href="#cb156-9"></a></span>
<span id="cb156-10"><a href="#cb156-10"></a><span class="kw">def</span> functionB():</span>
<span id="cb156-11"><a href="#cb156-11"></a>    <span class="bu">print</span>(<span class="st">&quot;b&quot;</span>)</span>
<span id="cb156-12"><a href="#cb156-12"></a></span>
<span id="cb156-13"><a href="#cb156-13"></a><span class="bu">print</span>(<span class="st">&quot;t1&quot;</span>)</span>
<span id="cb156-14"><a href="#cb156-14"></a><span class="bu">print</span>(<span class="st">&quot;m1&quot;</span>)</span>
<span id="cb156-15"><a href="#cb156-15"></a>functionA()</span>
<span id="cb156-16"><a href="#cb156-16"></a><span class="bu">print</span>(<span class="st">&quot;m2&quot;</span>)</span>
<span id="cb156-17"><a href="#cb156-17"></a><span class="bu">print</span>(<span class="st">&quot;t2&quot;</span>)</span></code></pre></div>
<ul>
<li>
What will this do when used as a script? When imported as a module?
</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1"></a><span class="co"># Suppose this is in foo4.py</span></span>
<span id="cb157-2"><a href="#cb157-2"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">&quot;__main__&quot;</span></span>
<span id="cb157-3"><a href="#cb157-3"></a></span>
<span id="cb157-4"><a href="#cb157-4"></a><span class="kw">def</span> bar():</span>
<span id="cb157-5"><a href="#cb157-5"></a>    <span class="bu">print</span>(<span class="st">&quot;bar&quot;</span>)</span>
<span id="cb157-6"><a href="#cb157-6"></a></span>
<span id="cb157-7"><a href="#cb157-7"></a><span class="bu">print</span>(<span class="st">&quot;before __name__ guard&quot;</span>)</span>
<span id="cb157-8"><a href="#cb157-8"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb157-9"><a href="#cb157-9"></a>    bar()</span>
<span id="cb157-10"><a href="#cb157-10"></a><span class="bu">print</span>(<span class="st">&quot;after __name__ guard&quot;</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-1696" class="level4">
<h4>Answer 2 (score 1696)</h4>
<p>When your script is run by passing it as a command to the Python interpreter,</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1"></a>python myscript.py</span></code></pre></div>
<p>all of the code that is at indentation level 0 gets executed. Functions and classes that are defined are, well, defined, but none of their code gets run. Unlike other languages, there’s no <code>main()</code> function that gets run automatically - the <code>main()</code> function is implicitly all the code at the top level.</p>
<p>In this case, the top-level code is an <code>if</code> block. <code>__name__</code> is a built-in variable which evaluates to the name of the current module. However, if a module is being run directly (as in <code>myscript.py</code> above), then <code>__name__</code> instead is set to the string <code>"__main__"</code>. Thus, you can test whether your script is being run directly or being imported by something else by testing</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb159-2"><a href="#cb159-2"></a>    ...</span></code></pre></div>
<p>If your script is being imported into another module, its various function and class definitions will be imported and its top-level code will be executed, but the code in the then-body of the <code>if</code> clause above won’t get run as the condition is not met. As a basic example, consider the following two scripts:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1"></a><span class="co"># file one.py</span></span>
<span id="cb160-2"><a href="#cb160-2"></a><span class="kw">def</span> func():</span>
<span id="cb160-3"><a href="#cb160-3"></a>    <span class="bu">print</span>(<span class="st">&quot;func() in one.py&quot;</span>)</span>
<span id="cb160-4"><a href="#cb160-4"></a></span>
<span id="cb160-5"><a href="#cb160-5"></a><span class="bu">print</span>(<span class="st">&quot;top-level in one.py&quot;</span>)</span>
<span id="cb160-6"><a href="#cb160-6"></a></span>
<span id="cb160-7"><a href="#cb160-7"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb160-8"><a href="#cb160-8"></a>    <span class="bu">print</span>(<span class="st">&quot;one.py is being run directly&quot;</span>)</span>
<span id="cb160-9"><a href="#cb160-9"></a><span class="cf">else</span>:</span>
<span id="cb160-10"><a href="#cb160-10"></a>    <span class="bu">print</span>(<span class="st">&quot;one.py is being imported into another module&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb161"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1"></a><span class="co"># file two.py</span></span>
<span id="cb161-2"><a href="#cb161-2"></a><span class="im">import</span> one</span>
<span id="cb161-3"><a href="#cb161-3"></a></span>
<span id="cb161-4"><a href="#cb161-4"></a><span class="bu">print</span>(<span class="st">&quot;top-level in two.py&quot;</span>)</span>
<span id="cb161-5"><a href="#cb161-5"></a>one.func()</span>
<span id="cb161-6"><a href="#cb161-6"></a></span>
<span id="cb161-7"><a href="#cb161-7"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb161-8"><a href="#cb161-8"></a>    <span class="bu">print</span>(<span class="st">&quot;two.py is being run directly&quot;</span>)</span>
<span id="cb161-9"><a href="#cb161-9"></a><span class="cf">else</span>:</span>
<span id="cb161-10"><a href="#cb161-10"></a>    <span class="bu">print</span>(<span class="st">&quot;two.py is being imported into another module&quot;</span>)</span></code></pre></div>
<p>Now, if you invoke the interpreter as</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1"></a>python one.py</span></code></pre></div>
<p>The output will be</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1"></a>top<span class="op">-</span>level <span class="kw">in</span> one.py</span>
<span id="cb163-2"><a href="#cb163-2"></a>one.py <span class="kw">is</span> being run directly</span></code></pre></div>
<p>If you run <code>two.py</code> instead:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1"></a>python two.py</span></code></pre></div>
<p>You get</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1"></a>top<span class="op">-</span>level <span class="kw">in</span> one.py</span>
<span id="cb165-2"><a href="#cb165-2"></a>one.py <span class="kw">is</span> being imported into another module</span>
<span id="cb165-3"><a href="#cb165-3"></a>top<span class="op">-</span>level <span class="kw">in</span> two.py</span>
<span id="cb165-4"><a href="#cb165-4"></a>func() <span class="kw">in</span> one.py</span>
<span id="cb165-5"><a href="#cb165-5"></a>two.py <span class="kw">is</span> being run directly</span></code></pre></div>
<p>Thus, when module <code>one</code> gets loaded, its <code>__name__</code> equals <code>"one"</code> instead of <code>"__main__"</code>.</p>
</section>
<section id="answer-3-score-676" class="level4">
<h4>Answer 3 (score 676)</h4>
<p>The simplest explanation for the <code>__name__</code> variable (imho) is the following:</p>
<p>Create the following files.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1"></a><span class="co"># a.py</span></span>
<span id="cb166-2"><a href="#cb166-2"></a><span class="im">import</span> b</span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1"></a><span class="co"># b.py</span></span>
<span id="cb167-2"><a href="#cb167-2"></a><span class="bu">print</span> <span class="st">&quot;Hello World from </span><span class="sc">%s</span><span class="st">!&quot;</span> <span class="op">%</span> <span class="va">__name__</span></span>
<span id="cb167-3"><a href="#cb167-3"></a></span>
<span id="cb167-4"><a href="#cb167-4"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb167-5"><a href="#cb167-5"></a>    <span class="bu">print</span> <span class="st">&quot;Hello World again from </span><span class="sc">%s</span><span class="st">!&quot;</span> <span class="op">%</span> <span class="va">__name__</span></span></code></pre></div>
<p>Running them will get you this output:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1"></a>$ python a.py</span>
<span id="cb168-2"><a href="#cb168-2"></a>Hello World <span class="im">from</span> b<span class="op">!</span></span></code></pre></div>
<p>As you can see, when a module is imported, Python sets <code>globals()['__name__']</code> in this module to the module’s name. Also, upon import all the code in the module is being run. As the <code>if</code> statement evaluates to <code>False</code> this part is not executed.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1"></a>$ python b.py</span>
<span id="cb169-2"><a href="#cb169-2"></a>Hello World <span class="im">from</span> __main__<span class="op">!</span></span>
<span id="cb169-3"><a href="#cb169-3"></a>Hello World again <span class="im">from</span> __main__<span class="op">!</span></span></code></pre></div>
<p>As you can see, when a file is executed, Python sets <code>globals()['__name__']</code> in this file to <code>"__main__"</code>. This time, the <code>if</code> statement evaluates to <code>True</code> and is being run.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-check-if-a-list-is-empty-score-2462573-in-2018" class="level3">
<h3>24: How do I check if a list is empty? (score <a href="https://stackoverflow.com/q/53513.html">2462573</a> in 2018)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>For example, if passed the following:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1"></a>a <span class="op">=</span> []</span></code></pre></div>
<p>How do I check to see if <code>a</code> is empty?</p>
</section>
<section id="answer-accepted-score-4944" class="level4">
<h4>Answer accepted (score 4944)</h4>
<div class="sourceCode" id="cb171"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1"></a><span class="cf">if</span> <span class="kw">not</span> a:</span>
<span id="cb171-2"><a href="#cb171-2"></a>  <span class="bu">print</span>(<span class="st">&quot;List is empty&quot;</span>)</span></code></pre></div>
<p>Using the implicit booleanness of the empty <code>list</code> is quite pythonic.</p>
</section>
<section id="answer-2-score-1081" class="level4">
<h4>Answer 2 (score 1081)</h4>
<p>The pythonic way to do it is from the <a href="https://www.python.org/dev/peps/pep-0008" rel="noreferrer">PEP 8 style guide</a> (where <strong>Yes</strong> means “recommended” and <strong>No</strong> means “not recommended”):</p>
<blockquote>
<p>
For sequences, (strings, lists, tuples), use the fact that empty sequences are false.
</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1"></a><span class="op">&lt;</span>b<span class="op">&gt;</span>Yes:<span class="op">&lt;/</span>b<span class="op">&gt;</span> <span class="cf">if</span> <span class="kw">not</span> seq:</span>
<span id="cb172-2"><a href="#cb172-2"></a>     <span class="cf">if</span> seq:</span>
<span id="cb172-3"><a href="#cb172-3"></a></span>
<span id="cb172-4"><a href="#cb172-4"></a><span class="op">&lt;</span>b<span class="op">&gt;</span>No:<span class="op">&lt;/</span>b<span class="op">&gt;</span>  <span class="cf">if</span> <span class="bu">len</span>(seq):</span>
<span id="cb172-5"><a href="#cb172-5"></a>     <span class="cf">if</span> <span class="kw">not</span> <span class="bu">len</span>(seq):</span></code></pre></div>
</blockquote>
</section>
<section id="answer-3-score-693" class="level4">
<h4>Answer 3 (score 693)</h4>
<p>I prefer it explicitly:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb173-1"><a href="#cb173-1"></a><span class="cf">if</span> <span class="bu">len</span>(li) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb173-2"><a href="#cb173-2"></a>    <span class="bu">print</span>(<span class="st">&#39;the list is empty&#39;</span>)</span></code></pre></div>
<p>This way it’s 100% clear that <code>li</code> is a sequence (list) and we want to test its size. My problem with <code>if not li: ...</code> is that it gives the false impression that <code>li</code> is a boolean variable.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-sort-a-dictionary-by-value-score-2415416-in-2019" class="level3">
<h3>25: How do I sort a dictionary by value? (score <a href="https://stackoverflow.com/q/613183.html">2415416</a> in 2019)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>I have a dictionary of values read from two fields in a database: a string field and a numeric field. The string field is unique, so that is the key of the dictionary.</p>
<p>I can sort on the keys, but how can I sort based on the values?</p>
<p>Note: I have read Stack Overflow question here <em><a href="https://stackoverflow.com/questions/72899">How do I sort a list of dictionaries by a value of the dictionary?</a></em> and probably could change my code to have a list of dictionaries, but since I do not really need a list of dictionaries I wanted to know if there is a simpler solution to sort either in ascending or descending order.</p>
</section>
<section id="answer-accepted-score-4391" class="level4">
<h4>Answer accepted (score 4391)</h4>
<p>It is not possible to sort a dictionary, only to get a representation of a dictionary that is sorted. Dictionaries are inherently orderless, but other types, such as lists and tuples, are not. So you need an ordered data type to represent sorted values, which will be a list—probably a list of tuples.</p>
<p>For instance,</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1"></a><span class="im">import</span> operator</span>
<span id="cb174-2"><a href="#cb174-2"></a>x <span class="op">=</span> {<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">4</span>: <span class="dv">3</span>, <span class="dv">2</span>: <span class="dv">1</span>, <span class="dv">0</span>: <span class="dv">0</span>}</span>
<span id="cb174-3"><a href="#cb174-3"></a>sorted_x <span class="op">=</span> <span class="bu">sorted</span>(x.items(), key<span class="op">=</span>operator.itemgetter(<span class="dv">1</span>))</span></code></pre></div>
<p><code>sorted_x</code> will be a list of tuples sorted by the second element in each tuple. <code>dict(sorted_x) == x</code>.</p>
<p>And for those wishing to sort on keys instead of values:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1"></a><span class="im">import</span> operator</span>
<span id="cb175-2"><a href="#cb175-2"></a>x <span class="op">=</span> {<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">4</span>: <span class="dv">3</span>, <span class="dv">2</span>: <span class="dv">1</span>, <span class="dv">0</span>: <span class="dv">0</span>}</span>
<span id="cb175-3"><a href="#cb175-3"></a>sorted_x <span class="op">=</span> <span class="bu">sorted</span>(x.items(), key<span class="op">=</span>operator.itemgetter(<span class="dv">0</span>))</span></code></pre></div>
<p>In Python3 since unpacking is not allowed <a href="https://stackoverflow.com/a/15712231/4293057">[1]</a> we can use</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1"></a>x <span class="op">=</span> {<span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">3</span>: <span class="dv">4</span>, <span class="dv">4</span>: <span class="dv">3</span>, <span class="dv">2</span>: <span class="dv">1</span>, <span class="dv">0</span>: <span class="dv">0</span>}</span>
<span id="cb176-2"><a href="#cb176-2"></a>sorted_x <span class="op">=</span> <span class="bu">sorted</span>(x.items(), key<span class="op">=</span><span class="kw">lambda</span> kv: kv[<span class="dv">1</span>])</span></code></pre></div>
<p>If you want the output as a dict, you can use <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="noreferrer"><code>collections.OrderedDict</code></a>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb177-1"><a href="#cb177-1"></a><span class="im">import</span> collections</span>
<span id="cb177-2"><a href="#cb177-2"></a></span>
<span id="cb177-3"><a href="#cb177-3"></a>sorted_dict <span class="op">=</span> collections.OrderedDict(sorted_x)</span></code></pre></div>
</section>
<section id="answer-2-score-1136" class="level4">
<h4>Answer 2 (score 1136)</h4>
<h5>
As simple as: <code>sorted(dict1, key=dict1.get)</code>
</h2>
<p>Well, it is actually possible to do a “sort by dictionary values”. Recently I had to do that in a Code Golf (Stack Overflow question <em><a href="https://stackoverflow.com/questions/3169051/code-golf-word-frequency-chart#3170549">Code golf: Word frequency chart</a></em>). Abridged, the problem was of the kind: given a text, count how often each word is encountered and display a list of the top words, sorted by decreasing frequency.</p>
<p>If you construct a dictionary with the words as keys and the number of occurrences of each word as value, simplified here as:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb178-2"><a href="#cb178-2"></a>d <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb178-3"><a href="#cb178-3"></a><span class="cf">for</span> w <span class="kw">in</span> text.split():</span>
<span id="cb178-4"><a href="#cb178-4"></a>  d[w] <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
<p>then you can get a list of the words, ordered by frequency of use with <code>sorted(d, key=d.get)</code> - the sort iterates over the dictionary keys, using the number of word occurrences as a sort key .</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1"></a><span class="cf">for</span> w <span class="kw">in</span> <span class="bu">sorted</span>(d, key<span class="op">=</span>d.get, reverse<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb179-2"><a href="#cb179-2"></a>  <span class="bu">print</span> w, d[w]</span></code></pre></div>
<p>I am writing this detailed explanation to illustrate what people often mean by “I can easily sort a dictionary by key, but how do I sort by value” - and I think the OP was trying to address such an issue. And the solution is to do sort of list of the keys, based on the values, as shown above.</p>
</section>
<section id="answer-3-score-750" class="level4">
<h4>Answer 3 (score 750)</h4>
<p>You could use:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1"></a><span class="bu">sorted</span>(d.items(), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])</span></code></pre></div>
<p>This will sort the dictionary by the values of each entry within the dictionary from smallest to largest.</p>
<p>To sort it in descending order just add <code>reverse=True</code>:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1"></a><span class="bu">sorted</span>(d.items(), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>], reverse<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-safely-create-a-nested-directory-score-2407666-in-2019" class="level3">
<h3>26: How can I safely create a nested directory? (score <a href="https://stackoverflow.com/q/273192.html">2407666</a> in 2019)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<p>What is the most elegant way to check if the directory a file is going to be written to exists, and if not, create the directory using Python? Here is what I tried:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb182-1"><a href="#cb182-1"></a><span class="im">import</span> os</span>
<span id="cb182-2"><a href="#cb182-2"></a></span>
<span id="cb182-3"><a href="#cb182-3"></a>file_path <span class="op">=</span> <span class="st">&quot;/my/directory/filename.txt&quot;</span></span>
<span id="cb182-4"><a href="#cb182-4"></a>directory <span class="op">=</span> os.path.dirname(file_path)</span>
<span id="cb182-5"><a href="#cb182-5"></a></span>
<span id="cb182-6"><a href="#cb182-6"></a><span class="cf">try</span>:</span>
<span id="cb182-7"><a href="#cb182-7"></a>    os.stat(directory)</span>
<span id="cb182-8"><a href="#cb182-8"></a><span class="cf">except</span>:</span>
<span id="cb182-9"><a href="#cb182-9"></a>    os.mkdir(directory)       </span>
<span id="cb182-10"><a href="#cb182-10"></a></span>
<span id="cb182-11"><a href="#cb182-11"></a>f <span class="op">=</span> <span class="bu">file</span>(filename)</span></code></pre></div>
<p>Somehow, I missed <code>os.path.exists</code> (thanks kanja, Blair, and Douglas). This is what I have now:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1"></a><span class="kw">def</span> ensure_dir(file_path):</span>
<span id="cb183-2"><a href="#cb183-2"></a>    directory <span class="op">=</span> os.path.dirname(file_path)</span>
<span id="cb183-3"><a href="#cb183-3"></a>    <span class="cf">if</span> <span class="kw">not</span> os.path.exists(directory):</span>
<span id="cb183-4"><a href="#cb183-4"></a>        os.makedirs(directory)</span></code></pre></div>
<p>Is there a flag for “open”, that makes this happen automatically?</p>
</section>
<section id="answer-accepted-score-4670" class="level4">
<h4>Answer accepted (score 4670)</h4>
<p>I see two answers with good qualities, each with a small flaw, so I will give my take on it:</p>
<p>Try <a href="https://docs.python.org/2/library/os.path.html#os.path.exists" rel="noreferrer"><code>os.path.exists</code></a>, and consider <a href="https://docs.python.org/2/library/os.html#os.makedirs" rel="noreferrer"><code>os.makedirs</code></a> for the creation.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1"></a><span class="im">import</span> os</span>
<span id="cb184-2"><a href="#cb184-2"></a><span class="cf">if</span> <span class="kw">not</span> os.path.exists(directory):</span>
<span id="cb184-3"><a href="#cb184-3"></a>    os.makedirs(directory)</span></code></pre></div>
<p>As noted in comments and elsewhere, there’s a race condition – if the directory is created between the <code>os.path.exists</code> and the <code>os.makedirs</code> calls, the <code>os.makedirs</code> will fail with an <code>OSError</code>. Unfortunately, blanket-catching <code>OSError</code> and continuing is not foolproof, as it will ignore a failure to create the directory due to other factors, such as insufficient permissions, full disk, etc.</p>
<p>One option would be to trap the <code>OSError</code> and examine the embedded error code (see <a href="https://stackoverflow.com/questions/273698/is-there-a-cross-platform-way-of-getting-information-from-pythons-oserror">Is there a cross-platform way of getting information from Python’s OSError</a>):</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb185-1"><a href="#cb185-1"></a><span class="im">import</span> os, errno</span>
<span id="cb185-2"><a href="#cb185-2"></a></span>
<span id="cb185-3"><a href="#cb185-3"></a><span class="cf">try</span>:</span>
<span id="cb185-4"><a href="#cb185-4"></a>    os.makedirs(directory)</span>
<span id="cb185-5"><a href="#cb185-5"></a><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:</span>
<span id="cb185-6"><a href="#cb185-6"></a>    <span class="cf">if</span> e.errno <span class="op">!=</span> errno.EEXIST:</span>
<span id="cb185-7"><a href="#cb185-7"></a>        <span class="cf">raise</span></span></code></pre></div>
<p>Alternatively, there could be a second <code>os.path.exists</code>, but suppose another created the directory after the first check, then removed it before the second one – we could still be fooled.</p>
<p>Depending on the application, the danger of concurrent operations may be more or less than the danger posed by other factors such as file permissions. The developer would have to know more about the particular application being developed and its expected environment before choosing an implementation.</p>
<p>Modern versions of Python improve this code quite a bit, both by exposing <a href="https://docs.python.org/3.3/library/exceptions.html?#FileExistsError" rel="noreferrer"><code>FileExistsError</code></a> (in 3.3+)…</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1"></a><span class="cf">try</span>:</span>
<span id="cb186-2"><a href="#cb186-2"></a>    os.makedirs(<span class="st">&quot;path/to/directory&quot;</span>)</span>
<span id="cb186-3"><a href="#cb186-3"></a><span class="cf">except</span> <span class="pp">FileExistsError</span>:</span>
<span id="cb186-4"><a href="#cb186-4"></a>    <span class="co"># directory already exists</span></span>
<span id="cb186-5"><a href="#cb186-5"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>…and by allowing <a href="https://docs.python.org/3.2/library/os.html#os.makedirs" rel="noreferrer">a keyword argument to <code>os.makedirs</code> called <code>exist_ok</code></a> (in 3.2+).</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1"></a>os.makedirs(<span class="st">&quot;path/to/directory&quot;</span>, exist_ok<span class="op">=</span><span class="va">True</span>)  <span class="co"># succeeds even if directory exists.</span></span></code></pre></div>
</section>
<section id="answer-2-score-1155" class="level4">
<h4>Answer 2 (score 1155)</h4>
<h5>
Python 3.5+:
</h2>
<div class="sourceCode" id="cb188"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1"></a><span class="im">import</span> pathlib</span>
<span id="cb188-2"><a href="#cb188-2"></a>pathlib.Path(<span class="st">&#39;/my/directory&#39;</span>).mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>) </span></code></pre></div>
<p><a href="https://docs.python.org/library/pathlib.html#pathlib.Path.mkdir" rel="noreferrer"><code>pathlib.Path.mkdir</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. If you don’t need or want the parents to be created, skip the <code>parents</code> argument.</p>
<h5>
Python 3.2+:
</h2>
<p><strong>Using <code>pathlib</code>:</strong></p>
<p>If you can, install the current <code>pathlib</code> backport named <a href="https://pypi.python.org/pypi/pathlib2/" rel="noreferrer"><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href="https://pypi.python.org/pypi/pathlib/" rel="noreferrer"><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>
<p>If using Python 3.4, even though it comes with <code>pathlib</code>, it is missing the useful <code>exist_ok</code> option. The backport is intended to offer a newer and superior implementation of <code>mkdir</code> which includes this missing option.</p>
<p><strong>Using <code>os</code>:</strong></p>
<div class="sourceCode" id="cb189"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1"></a><span class="im">import</span> os</span>
<span id="cb189-2"><a href="#cb189-2"></a>os.makedirs(path, exist_ok<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p><a href="https://docs.python.org/library/os.html#os.makedirs" rel="noreferrer"><code>os.makedirs</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. It has the optional <code>exist_ok</code> argument only if using Python 3.2+, with a default value of <code>False</code>. This argument does not exist in Python 2.x up to 2.7. As such, there is no need for manual exception handling as with Python 2.7.</p>
<h5>
Python 2.7+:
</h2>
<p><strong>Using <code>pathlib</code>:</strong></p>
<p>If you can, install the current <code>pathlib</code> backport named <a href="https://pypi.python.org/pypi/pathlib2/" rel="noreferrer"><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href="https://pypi.python.org/pypi/pathlib/" rel="noreferrer"><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>
<p><strong>Using <code>os</code>:</strong></p>
<div class="sourceCode" id="cb190"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1"></a><span class="im">import</span> os</span>
<span id="cb190-2"><a href="#cb190-2"></a><span class="cf">try</span>: </span>
<span id="cb190-3"><a href="#cb190-3"></a>    os.makedirs(path)</span>
<span id="cb190-4"><a href="#cb190-4"></a><span class="cf">except</span> <span class="pp">OSError</span>:</span>
<span id="cb190-5"><a href="#cb190-5"></a>    <span class="cf">if</span> <span class="kw">not</span> os.path.isdir(path):</span>
<span id="cb190-6"><a href="#cb190-6"></a>        <span class="cf">raise</span></span></code></pre></div>
<p>While a naive solution may first use <a href="https://docs.python.org/2/library/os.path.html#os.path.isdir" rel="noreferrer" title="os.path.isdir"><code>os.path.isdir</code></a> followed by <a href="https://docs.python.org/2/library/os.html#os.makedirs" rel="noreferrer" title="os.makedirs"><code>os.makedirs</code></a>, the solution above reverses the order of the two operations. In doing so, it prevents a common race condition having to do with a duplicated attempt at creating the directory, and also disambiguates files from directories.</p>
<p>Note that capturing the exception and using <code>errno</code> is of limited usefulness because <code>OSError: [Errno 17] File exists</code>, i.e. <code>errno.EEXIST</code>, is raised for both files and directories. It is more reliable simply to check if the directory exists.</p>
<h5>
Alternative:
</h2>
<p><a href="https://docs.python.org/distutils/apiref.html#distutils.dir_util.mkpath" rel="noreferrer"><code>mkpath</code></a> creates the nested directory, and does nothing if the directory already exists. This works in both Python 2 and 3.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb191-1"><a href="#cb191-1"></a><span class="im">import</span> distutils.dir_util</span>
<span id="cb191-2"><a href="#cb191-2"></a>distutils.dir_util.mkpath(path)</span></code></pre></div>
<p>Per <a href="http://bugs.python.org/issue10948" rel="noreferrer">Bug 10948</a>, a severe limitation of this alternative is that it works only once per python process for a given path. In other words, if you use it to create a directory, then delete the directory from inside or outside Python, then use <code>mkpath</code> again to recreate the same directory, <code>mkpath</code> will simply silently use its invalid cached info of having previously created the directory, and will not actually make the directory again. In contrast, <code>os.makedirs</code> doesn’t rely on any such cache. This limitation may be okay for some applications.</p>
<hr>
<p>With regard to the directory’s <em>mode</em>, please refer to the documentation if you care about it.</p>
</section>
<section id="answer-3-score-600" class="level4">
<h4>Answer 3 (score 600)</h4>
<p>Using try except and the right error code from errno module gets rid of the race condition and is cross-platform:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1"></a><span class="im">import</span> os</span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="im">import</span> errno</span>
<span id="cb192-3"><a href="#cb192-3"></a></span>
<span id="cb192-4"><a href="#cb192-4"></a><span class="kw">def</span> make_sure_path_exists(path):</span>
<span id="cb192-5"><a href="#cb192-5"></a>    <span class="cf">try</span>:</span>
<span id="cb192-6"><a href="#cb192-6"></a>        os.makedirs(path)</span>
<span id="cb192-7"><a href="#cb192-7"></a>    <span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> exception:</span>
<span id="cb192-8"><a href="#cb192-8"></a>        <span class="cf">if</span> exception.errno <span class="op">!=</span> errno.EEXIST:</span>
<span id="cb192-9"><a href="#cb192-9"></a>            <span class="cf">raise</span></span></code></pre></div>
<p>In other words, we try to create the directories, but if they already exist we ignore the error. On the other hand, any other error gets reported. For example, if you create dir ‘a’ beforehand and remove all permissions from it, you will get an <code>OSError</code> raised with <code>errno.EACCES</code> (Permission denied, error 13).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-remove-an-element-from-a-list-by-index-score-2347506-in-2019" class="level3">
<h3>27: How to remove an element from a list by index? (score <a href="https://stackoverflow.com/q/627435.html">2347506</a> in 2019)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>How do I remove an element from a list by index in Python?</p>
<p>I found the <code>list.remove</code> method, but say I want to remove the last element, how do I do this? It seems like the default remove searches the list, but I don’t want any search to be performed.</p>
</section>
<section id="answer-accepted-score-1546" class="level4">
<h4>Answer accepted (score 1546)</h4>
<p>Use <code>del</code> and specify the index of the element you want to delete:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb193-1"><a href="#cb193-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span>
<span id="cb193-2"><a href="#cb193-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> a[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb193-3"><a href="#cb193-3"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb193-4"><a href="#cb193-4"></a>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span></code></pre></div>
<p>Also supports slices:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb194-1"><a href="#cb194-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> a[<span class="dv">2</span>:<span class="dv">4</span>]</span>
<span id="cb194-2"><a href="#cb194-2"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb194-3"><a href="#cb194-3"></a>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code></pre></div>
<p><a href="http://docs.python.org/tutorial/datastructures.html#the-del-statement" rel="noreferrer">Here</a> is the section from the tutorial.</p>
</section>
<section id="answer-2-score-595" class="level4">
<h4>Answer 2 (score 595)</h4>
<p>You probably want <code>pop</code>:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1"></a>a <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span>
<span id="cb195-2"><a href="#cb195-2"></a>a.pop(<span class="dv">1</span>)</span>
<span id="cb195-3"><a href="#cb195-3"></a></span>
<span id="cb195-4"><a href="#cb195-4"></a><span class="co"># now a is [&#39;a&#39;, &#39;c&#39;, &#39;d&#39;]</span></span></code></pre></div>
<p>By default, <code>pop</code> without any arguments removes the last item:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1"></a>a <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span>
<span id="cb196-2"><a href="#cb196-2"></a>a.pop()</span>
<span id="cb196-3"><a href="#cb196-3"></a></span>
<span id="cb196-4"><a href="#cb196-4"></a><span class="co"># now a is [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span></span></code></pre></div>
</section>
<section id="answer-3-score-124" class="level4">
<h4>Answer 3 (score 124)</h4>
<p>Like others mentioned pop and del are <em>the</em> efficient ways to remove an item of given index. Yet just for the sake of completion (since the same thing can be done via many ways in Python):</p>
<p><strong>Using slices (this does not do in place removal of item from original list):</strong></p>
<p>(Also this will be the least efficient method when working with Python list, but this could be useful (but not efficient, I reiterate) when working with user defined objects that do not support pop, yet do define a <code>__getitem__</code> ):</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb197-1"><a href="#cb197-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span>
<span id="cb197-2"><a href="#cb197-2"></a><span class="op">&gt;&gt;&gt;</span> index <span class="op">=</span> <span class="dv">3</span> <span class="co"># Only positive index</span></span>
<span id="cb197-3"><a href="#cb197-3"></a></span>
<span id="cb197-4"><a href="#cb197-4"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> a[:index] <span class="op">+</span> a[index<span class="op">+</span><span class="dv">1</span> :]</span>
<span id="cb197-5"><a href="#cb197-5"></a><span class="co"># a is now [1, 2, 3, 5, 6]</span></span></code></pre></div>
<p><strong>Note:</strong> Please note that this method does not modify the list in place like <code>pop</code> and <code>del</code>. It instead makes two copies of lists (one from the start until the index but without it (<code>a[:index]</code>) and one after the index till the last element (<code>a[index+1:]</code>)) and creates a new list object by adding both. This is then reassigned to the list variable (<code>a</code>). The old list object is hence dereferenced and hence garbage collected (provided the original list object is not referenced by any variable other than a).</p>
<p>This makes this method very inefficient and it can also produce undesirable side effects (especially when other variables point to the original list object which remains un-modified).</p>
<p>Thanks to <span class="citation" data-cites="MarkDickinson">@MarkDickinson</span> for pointing this out …</p>
<p><a href="https://stackoverflow.com/a/509295/3244627">This</a> Stack Overflow answer explains the concept of slicing.</p>
<p>Also note that this works only with positive indices.</p>
<p>While using with objects, the <code>__getitem__</code> method must have been defined and more importantly the <strong><code>__add__</code></strong> method must have been defined to return an object containing items from both the operands.</p>
<p>In essence, this works with any object whose class definition is like:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1"></a><span class="kw">class</span> foo(<span class="bu">object</span>):</span>
<span id="cb198-2"><a href="#cb198-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, items):</span>
<span id="cb198-3"><a href="#cb198-3"></a>        <span class="va">self</span>.items <span class="op">=</span> items</span>
<span id="cb198-4"><a href="#cb198-4"></a></span>
<span id="cb198-5"><a href="#cb198-5"></a>    <span class="kw">def</span> <span class="fu">__getitem__</span>(<span class="va">self</span>, index):</span>
<span id="cb198-6"><a href="#cb198-6"></a>        <span class="cf">return</span> foo(<span class="va">self</span>.items[index])</span>
<span id="cb198-7"><a href="#cb198-7"></a></span>
<span id="cb198-8"><a href="#cb198-8"></a>    <span class="kw">def</span> <span class="fu">__add__</span>(<span class="va">self</span>, right):</span>
<span id="cb198-9"><a href="#cb198-9"></a>        <span class="cf">return</span> foo( <span class="va">self</span>.items <span class="op">+</span> right.items )</span></code></pre></div>
<p>This works with <code>list</code> which defines <code>__getitem__</code> and <code>__add__</code> methods.</p>
<p><strong>Comparison of the three ways in terms of efficiency:</strong></p>
<p>Assume the following is predefined:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb199-1"><a href="#cb199-1"></a>a <span class="op">=</span> <span class="bu">range</span>(<span class="dv">10</span>)</span>
<span id="cb199-2"><a href="#cb199-2"></a>index <span class="op">=</span> <span class="dv">3</span></span></code></pre></div>
<p><strong>The <code>del object[index]</code> method:</strong></p>
<p>By far the most efficient method. It works will all objects that define a <code>__del__</code> method.</p>
<p>The disassembly is as follows:</p>
<p>Code:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1"></a><span class="kw">def</span> del_method():</span>
<span id="cb200-2"><a href="#cb200-2"></a>    <span class="kw">global</span> a</span>
<span id="cb200-3"><a href="#cb200-3"></a>    <span class="kw">global</span> index</span>
<span id="cb200-4"><a href="#cb200-4"></a>    <span class="kw">del</span> a[index]</span></code></pre></div>
<p>Disassembly:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb201-1"><a href="#cb201-1"></a> <span class="dv">10</span>    <span class="dv">0</span> LOAD_GLOBAL     <span class="dv">0</span> (a)</span>
<span id="cb201-2"><a href="#cb201-2"></a>       <span class="dv">3</span> LOAD_GLOBAL     <span class="dv">1</span> (index)</span>
<span id="cb201-3"><a href="#cb201-3"></a>       <span class="dv">6</span> DELETE_SUBSCR   <span class="co"># This is the line that deletes the item</span></span>
<span id="cb201-4"><a href="#cb201-4"></a>       <span class="dv">7</span> LOAD_CONST      <span class="dv">0</span> (<span class="va">None</span>)</span>
<span id="cb201-5"><a href="#cb201-5"></a>      <span class="dv">10</span> RETURN_VALUE</span>
<span id="cb201-6"><a href="#cb201-6"></a><span class="va">None</span></span></code></pre></div>
<p><strong><code>pop</code> method:</strong></p>
<p>It is less efficient than the del method and is used when you need to get the deleted item.</p>
<p>Code:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1"></a><span class="kw">def</span> pop_method():</span>
<span id="cb202-2"><a href="#cb202-2"></a>    <span class="kw">global</span> a</span>
<span id="cb202-3"><a href="#cb202-3"></a>    <span class="kw">global</span> index</span>
<span id="cb202-4"><a href="#cb202-4"></a>    a.pop(index)</span></code></pre></div>
<p>Disassembly:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1"></a> <span class="dv">17</span>     <span class="dv">0</span> LOAD_GLOBAL     <span class="dv">0</span> (a)</span>
<span id="cb203-2"><a href="#cb203-2"></a>        <span class="dv">3</span> LOAD_ATTR       <span class="dv">1</span> (pop)</span>
<span id="cb203-3"><a href="#cb203-3"></a>        <span class="dv">6</span> LOAD_GLOBAL     <span class="dv">2</span> (index)</span>
<span id="cb203-4"><a href="#cb203-4"></a>        <span class="dv">9</span> CALL_FUNCTION   <span class="dv">1</span></span>
<span id="cb203-5"><a href="#cb203-5"></a>       <span class="dv">12</span> POP_TOP</span>
<span id="cb203-6"><a href="#cb203-6"></a>       <span class="dv">13</span> LOAD_CONST      <span class="dv">0</span> (<span class="va">None</span>)</span>
<span id="cb203-7"><a href="#cb203-7"></a>       <span class="dv">16</span> RETURN_VALUE</span></code></pre></div>
<p><strong>The slice and add method.</strong></p>
<p>The least efficient.</p>
<p>Code:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1"></a><span class="kw">def</span> slice_method():</span>
<span id="cb204-2"><a href="#cb204-2"></a>    <span class="kw">global</span> a</span>
<span id="cb204-3"><a href="#cb204-3"></a>    <span class="kw">global</span> index</span>
<span id="cb204-4"><a href="#cb204-4"></a>    a <span class="op">=</span> a[:index] <span class="op">+</span> a[index<span class="op">+</span><span class="dv">1</span>:]</span></code></pre></div>
<p>Disassembly:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1"></a> <span class="dv">24</span>     <span class="dv">0</span> LOAD_GLOBAL    <span class="dv">0</span> (a)</span>
<span id="cb205-2"><a href="#cb205-2"></a>        <span class="dv">3</span> LOAD_GLOBAL    <span class="dv">1</span> (index)</span>
<span id="cb205-3"><a href="#cb205-3"></a>        <span class="dv">6</span> SLICE<span class="op">+</span><span class="dv">2</span></span>
<span id="cb205-4"><a href="#cb205-4"></a>        <span class="dv">7</span> LOAD_GLOBAL    <span class="dv">0</span> (a)</span>
<span id="cb205-5"><a href="#cb205-5"></a>       <span class="dv">10</span> LOAD_GLOBAL    <span class="dv">1</span> (index)</span>
<span id="cb205-6"><a href="#cb205-6"></a>       <span class="dv">13</span> LOAD_CONST     <span class="dv">1</span> (<span class="dv">1</span>)</span>
<span id="cb205-7"><a href="#cb205-7"></a>       <span class="dv">16</span> BINARY_ADD</span>
<span id="cb205-8"><a href="#cb205-8"></a>       <span class="dv">17</span> SLICE<span class="op">+</span><span class="dv">1</span></span>
<span id="cb205-9"><a href="#cb205-9"></a>       <span class="dv">18</span> BINARY_ADD</span>
<span id="cb205-10"><a href="#cb205-10"></a>       <span class="dv">19</span> STORE_GLOBAL   <span class="dv">0</span> (a)</span>
<span id="cb205-11"><a href="#cb205-11"></a>       <span class="dv">22</span> LOAD_CONST     <span class="dv">0</span> (<span class="va">None</span>)</span>
<span id="cb205-12"><a href="#cb205-12"></a>       <span class="dv">25</span> RETURN_VALUE</span>
<span id="cb205-13"><a href="#cb205-13"></a><span class="va">None</span></span></code></pre></div>
<p>Note: In all three disassembles ignore the last two lines which basically are <code>return None</code>. Also the first two lines are loading the global values <code>a</code> and <code>index</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="renaming-columns-in-pandas-score-2283204-in-2017" class="level3">
<h3>28: Renaming columns in pandas (score <a href="https://stackoverflow.com/q/11346283.html">2283204</a> in 2017)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>I have a DataFrame using pandas and column labels that I need to edit to replace the original column labels.</p>
<p>I’d like to change the column names in a DataFrame <code>A</code> where the original column names are:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1"></a>[<span class="st">&#39;$a&#39;</span>, <span class="st">&#39;$b&#39;</span>, <span class="st">&#39;$c&#39;</span>, <span class="st">&#39;$d&#39;</span>, <span class="st">&#39;$e&#39;</span>] </span></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb207-1"><a href="#cb207-1"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>].</span></code></pre></div>
<p>I have the edited column names stored it in a list, but I don’t know how to replace the column names.</p>
</section>
<section id="answer-accepted-score-1585" class="level4">
<h4>Answer accepted (score 1585)</h4>
<p>Just assign it to the <code>.columns</code> attribute:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1"></a><span class="op">&gt;&gt;&gt;</span> df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;$a&#39;</span>:[<span class="dv">1</span>,<span class="dv">2</span>], <span class="st">&#39;$b&#39;</span>: [<span class="dv">10</span>,<span class="dv">20</span>]})</span>
<span id="cb208-2"><a href="#cb208-2"></a><span class="op">&gt;&gt;&gt;</span> df.columns <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>]</span>
<span id="cb208-3"><a href="#cb208-3"></a><span class="op">&gt;&gt;&gt;</span> df</span>
<span id="cb208-4"><a href="#cb208-4"></a>   a   b</span>
<span id="cb208-5"><a href="#cb208-5"></a><span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">10</span></span>
<span id="cb208-6"><a href="#cb208-6"></a><span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">20</span></span></code></pre></div>
</section>
<section id="answer-2-score-2506" class="level4">
<h4>Answer 2 (score 2506)</h4>
<h5>
<strong>RENAME SPECIFIC COLUMNS</strong>
</h2>
<p>Use the <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rename.html" rel="noreferrer"><code>df.rename()</code></a> function and refer the columns to be renamed. Not all the columns have to be renamed:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1"></a>df <span class="op">=</span> df.rename(columns<span class="op">=</span>{<span class="st">&#39;oldName1&#39;</span>: <span class="st">&#39;newName1&#39;</span>, <span class="st">&#39;oldName2&#39;</span>: <span class="st">&#39;newName2&#39;</span>})</span>
<span id="cb209-2"><a href="#cb209-2"></a><span class="co"># Or rename the existing DataFrame (rather than creating a copy) </span></span>
<span id="cb209-3"><a href="#cb209-3"></a>df.rename(columns<span class="op">=</span>{<span class="st">&#39;oldName1&#39;</span>: <span class="st">&#39;newName1&#39;</span>, <span class="st">&#39;oldName2&#39;</span>: <span class="st">&#39;newName2&#39;</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p><strong>Minimal Code Example</strong></p>
<div class="sourceCode" id="cb210"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb210-1"><a href="#cb210-1"></a>df <span class="op">=</span> pd.DataFrame(<span class="st">&#39;x&#39;</span>, index<span class="op">=</span><span class="bu">range</span>(<span class="dv">3</span>), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;abcde&#39;</span>))</span>
<span id="cb210-2"><a href="#cb210-2"></a>df</span>
<span id="cb210-3"><a href="#cb210-3"></a></span>
<span id="cb210-4"><a href="#cb210-4"></a>   a  b  c  d  e</span>
<span id="cb210-5"><a href="#cb210-5"></a><span class="dv">0</span>  x  x  x  x  x</span>
<span id="cb210-6"><a href="#cb210-6"></a><span class="dv">1</span>  x  x  x  x  x</span>
<span id="cb210-7"><a href="#cb210-7"></a><span class="dv">2</span>  x  x  x  x  x</span></code></pre></div>
<p>The following methods all work and produce the same output:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1"></a>df2 <span class="op">=</span> df.rename({<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>}, axis<span class="op">=</span><span class="dv">1</span>)  <span class="co"># new method</span></span>
<span id="cb211-2"><a href="#cb211-2"></a>df2 <span class="op">=</span> df.rename({<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>}, axis<span class="op">=</span><span class="st">&#39;columns&#39;</span>)</span>
<span id="cb211-3"><a href="#cb211-3"></a>df2 <span class="op">=</span> df.rename(columns<span class="op">=</span>{<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>})  <span class="co"># old method  </span></span>
<span id="cb211-4"><a href="#cb211-4"></a></span>
<span id="cb211-5"><a href="#cb211-5"></a>df2</span>
<span id="cb211-6"><a href="#cb211-6"></a></span>
<span id="cb211-7"><a href="#cb211-7"></a>   X  Y  c  d  e</span>
<span id="cb211-8"><a href="#cb211-8"></a><span class="dv">0</span>  x  x  x  x  x</span>
<span id="cb211-9"><a href="#cb211-9"></a><span class="dv">1</span>  x  x  x  x  x</span>
<span id="cb211-10"><a href="#cb211-10"></a><span class="dv">2</span>  x  x  x  x  x</span></code></pre></div>
<p>Remember to assign the result back, as the modification is not-inplace. Alternatively, specify <code>inplace=True</code>:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb212-1"><a href="#cb212-1"></a>df.rename({<span class="st">&#39;a&#39;</span>: <span class="st">&#39;X&#39;</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;Y&#39;</span>}, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb212-2"><a href="#cb212-2"></a>df</span>
<span id="cb212-3"><a href="#cb212-3"></a></span>
<span id="cb212-4"><a href="#cb212-4"></a>   X  Y  c  d  e</span>
<span id="cb212-5"><a href="#cb212-5"></a><span class="dv">0</span>  x  x  x  x  x</span>
<span id="cb212-6"><a href="#cb212-6"></a><span class="dv">1</span>  x  x  x  x  x</span>
<span id="cb212-7"><a href="#cb212-7"></a><span class="dv">2</span>  x  x  x  x  x</span></code></pre></div>
<p>From v0.25, you can also specify <code>errors='raise'</code> to raise errors if an invalid column-to-rename is specified. See <a href="https://pandas-docs.github.io/pandas-docs-travis/reference/api/pandas.DataFrame.rename.html#pandas.DataFrame.rename" rel="noreferrer">v0.25 <code>rename()</code> docs</a>.</p>
<hr>
<h5>
REASSIGN COLUMN HEADERS
</h2>
<p>Use <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.set_axis.html" rel="noreferrer"><code>df.set_axis()</code></a> with <code>axis=1</code> and <code>inplace=False</code> (to return a copy).</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1"></a>df2 <span class="op">=</span> df.set_axis([<span class="st">&#39;V&#39;</span>, <span class="st">&#39;W&#39;</span>, <span class="st">&#39;X&#39;</span>, <span class="st">&#39;Y&#39;</span>, <span class="st">&#39;Z&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb213-2"><a href="#cb213-2"></a>df2</span>
<span id="cb213-3"><a href="#cb213-3"></a></span>
<span id="cb213-4"><a href="#cb213-4"></a>   V  W  X  Y  Z</span>
<span id="cb213-5"><a href="#cb213-5"></a><span class="dv">0</span>  x  x  x  x  x</span>
<span id="cb213-6"><a href="#cb213-6"></a><span class="dv">1</span>  x  x  x  x  x</span>
<span id="cb213-7"><a href="#cb213-7"></a><span class="dv">2</span>  x  x  x  x  x</span></code></pre></div>
<p>This returns a copy, but you can modify the DataFrame in-place by setting <code>inplace=True</code> (this is the default behaviour for versions &lt;=0.24 but is likely to change in the future).</p>
<p>You can also assign headers directly:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb214-1"><a href="#cb214-1"></a>df.columns <span class="op">=</span> [<span class="st">&#39;V&#39;</span>, <span class="st">&#39;W&#39;</span>, <span class="st">&#39;X&#39;</span>, <span class="st">&#39;Y&#39;</span>, <span class="st">&#39;Z&#39;</span>]</span>
<span id="cb214-2"><a href="#cb214-2"></a>df</span>
<span id="cb214-3"><a href="#cb214-3"></a></span>
<span id="cb214-4"><a href="#cb214-4"></a>   V  W  X  Y  Z</span>
<span id="cb214-5"><a href="#cb214-5"></a><span class="dv">0</span>  x  x  x  x  x</span>
<span id="cb214-6"><a href="#cb214-6"></a><span class="dv">1</span>  x  x  x  x  x</span>
<span id="cb214-7"><a href="#cb214-7"></a><span class="dv">2</span>  x  x  x  x  x</span></code></pre></div>
</section>
<section id="answer-3-score-364" class="level4">
<h4>Answer 3 (score 364)</h4>
<p>The <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rename.html"><code>rename</code></a> method can take a function, for example:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb215-1"><a href="#cb215-1"></a>In [<span class="dv">11</span>]: df.columns</span>
<span id="cb215-2"><a href="#cb215-2"></a>Out[<span class="dv">11</span>]: Index([<span class="st">u&#39;$a&#39;</span>, <span class="st">u&#39;$b&#39;</span>, <span class="st">u&#39;$c&#39;</span>, <span class="st">u&#39;$d&#39;</span>, <span class="st">u&#39;$e&#39;</span>], dtype<span class="op">=</span><span class="bu">object</span>)</span>
<span id="cb215-3"><a href="#cb215-3"></a></span>
<span id="cb215-4"><a href="#cb215-4"></a>In [<span class="dv">12</span>]: df.rename(columns<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>:], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb215-5"><a href="#cb215-5"></a></span>
<span id="cb215-6"><a href="#cb215-6"></a>In [<span class="dv">13</span>]: df.columns</span>
<span id="cb215-7"><a href="#cb215-7"></a>Out[<span class="dv">13</span>]: Index([<span class="st">u&#39;a&#39;</span>, <span class="st">u&#39;b&#39;</span>, <span class="st">u&#39;c&#39;</span>, <span class="st">u&#39;d&#39;</span>, <span class="st">u&#39;e&#39;</span>], dtype<span class="op">=</span><span class="bu">object</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-determine-a-python-variables-type-score-2254676-in-2017" class="level3">
<h3>29: How to determine a Python variable’s type? (score <a href="https://stackoverflow.com/q/402504.html">2254676</a> in 2017)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>How do I see the type of a variable whether it is unsigned 32 bit, signed 16 bit, etc.?</p>
<p>How do I view it?</p>
</section>
<section id="answer-2-score-1224" class="level4">
<h4>Answer 2 (score 1224)</h4>
<p>Python doesn’t have the same types as C/C++, which appears to be your question.</p>
<p>Try this:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb216-1"><a href="#cb216-1"></a><span class="op">&gt;&gt;&gt;</span> i <span class="op">=</span> <span class="dv">123</span></span>
<span id="cb216-2"><a href="#cb216-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(i)</span>
<span id="cb216-3"><a href="#cb216-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;int&#39;</span><span class="op">&gt;</span></span>
<span id="cb216-4"><a href="#cb216-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(i) <span class="kw">is</span> <span class="bu">int</span></span>
<span id="cb216-5"><a href="#cb216-5"></a><span class="va">True</span></span>
<span id="cb216-6"><a href="#cb216-6"></a><span class="op">&gt;&gt;&gt;</span> i <span class="op">=</span> 123456789L</span>
<span id="cb216-7"><a href="#cb216-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(i)</span>
<span id="cb216-8"><a href="#cb216-8"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;long&#39;</span><span class="op">&gt;</span></span>
<span id="cb216-9"><a href="#cb216-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(i) <span class="kw">is</span> <span class="bu">long</span></span>
<span id="cb216-10"><a href="#cb216-10"></a><span class="va">True</span></span>
<span id="cb216-11"><a href="#cb216-11"></a><span class="op">&gt;&gt;&gt;</span> i <span class="op">=</span> <span class="fl">123.456</span></span>
<span id="cb216-12"><a href="#cb216-12"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(i)</span>
<span id="cb216-13"><a href="#cb216-13"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;float&#39;</span><span class="op">&gt;</span></span>
<span id="cb216-14"><a href="#cb216-14"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(i) <span class="kw">is</span> <span class="bu">float</span></span>
<span id="cb216-15"><a href="#cb216-15"></a><span class="va">True</span></span></code></pre></div>
<p>The distinction between int and long goes away in Python 3.0, though.</p>
</section>
<section id="answer-3-score-403" class="level4">
<h4>Answer 3 (score 403)</h4>
<p>You may be looking for the <code>type()</code> function.</p>
<p>See the examples below, but there’s no “unsigned” type in Python just like Java.</p>
<p>Positive integer:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1"></a><span class="op">&gt;&gt;&gt;</span> v <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb217-2"><a href="#cb217-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(v)</span>
<span id="cb217-3"><a href="#cb217-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;int&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p><em>Large</em> positive integer:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb218-1"><a href="#cb218-1"></a><span class="op">&gt;&gt;&gt;</span> v <span class="op">=</span> <span class="dv">100000000000000</span></span>
<span id="cb218-2"><a href="#cb218-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(v)</span>
<span id="cb218-3"><a href="#cb218-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;long&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p>Negative integer:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb219-1"><a href="#cb219-1"></a><span class="op">&gt;&gt;&gt;</span> v <span class="op">=</span> <span class="dv">-10</span></span>
<span id="cb219-2"><a href="#cb219-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(v)</span>
<span id="cb219-3"><a href="#cb219-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;int&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p>Literal sequence of characters:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb220-1"><a href="#cb220-1"></a><span class="op">&gt;&gt;&gt;</span> v <span class="op">=</span> <span class="st">&#39;hi&#39;</span></span>
<span id="cb220-2"><a href="#cb220-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(v)</span>
<span id="cb220-3"><a href="#cb220-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;str&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p>Floating point integer:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1"></a><span class="op">&gt;&gt;&gt;</span> v <span class="op">=</span> <span class="fl">3.14159</span></span>
<span id="cb221-2"><a href="#cb221-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(v)</span>
<span id="cb221-3"><a href="#cb221-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;float&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-lowercase-a-string-in-python-score-2241046-in-2019" class="level3">
<h3>30: How do I lowercase a string in Python? (score <a href="https://stackoverflow.com/q/6797984.html">2241046</a> in 2019)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>Is there a way to convert a string from uppercase, or even part uppercase to lowercase?</p>
<p>For example, “Kilometers” → “kilometers”.</p>
</section>
<section id="answer-accepted-score-2880" class="level4">
<h4>Answer accepted (score 2880)</h4>
<p>Use <code>.lower()</code> - For example:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb222-1"><a href="#cb222-1"></a>s <span class="op">=</span> <span class="st">&quot;Kilometer&quot;</span></span>
<span id="cb222-2"><a href="#cb222-2"></a><span class="bu">print</span>(s.lower())</span></code></pre></div>
<p>
The official 2.x documentation is here: <a href="https://docs.python.org/2/library/stdtypes.html?highlight=str.lower#str.lower" rel="noreferrer"><code>str.lower()</code></a><br> The official 3.x documentation is here: <a href="https://docs.python.org/3/library/stdtypes.html?highlight=str.lower#str.lower" rel="noreferrer"><code>str.lower()</code></a>
</p>
</section>
<section id="answer-2-score-197" class="level4">
<h4>Answer 2 (score 197)</h4>
<blockquote>
<h5>
How to convert string to lowercase in Python?
</h1>
<p>Is there any way to convert an entire user inputted string from uppercase, or even part uppercase to lowercase?</p>
E.g. Kilometers –&gt; kilometers<br />

</blockquote>
<p>The canonical Pythonic way of doing this is</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb223-1"><a href="#cb223-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;Kilometers&#39;</span>.lower()</span>
<span id="cb223-2"><a href="#cb223-2"></a><span class="co">&#39;kilometers&#39;</span></span></code></pre></div>
<p>However, if the purpose is to do case insensitive matching, you should use case-folding:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb224-1"><a href="#cb224-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;Kilometers&#39;</span>.casefold()</span>
<span id="cb224-2"><a href="#cb224-2"></a><span class="co">&#39;kilometers&#39;</span></span></code></pre></div>
<p>Here’s why:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb225-1"><a href="#cb225-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;Maße&quot;</span>.casefold()</span>
<span id="cb225-2"><a href="#cb225-2"></a><span class="co">&#39;masse&#39;</span></span>
<span id="cb225-3"><a href="#cb225-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;Maße&quot;</span>.lower()</span>
<span id="cb225-4"><a href="#cb225-4"></a><span class="co">&#39;maße&#39;</span></span>
<span id="cb225-5"><a href="#cb225-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;MASSE&quot;</span> <span class="op">==</span> <span class="st">&quot;Maße&quot;</span></span>
<span id="cb225-6"><a href="#cb225-6"></a><span class="va">False</span></span>
<span id="cb225-7"><a href="#cb225-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;MASSE&quot;</span>.lower() <span class="op">==</span> <span class="st">&quot;Maße&quot;</span>.lower()</span>
<span id="cb225-8"><a href="#cb225-8"></a><span class="va">False</span></span>
<span id="cb225-9"><a href="#cb225-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;MASSE&quot;</span>.casefold() <span class="op">==</span> <span class="st">&quot;Maße&quot;</span>.casefold()</span>
<span id="cb225-10"><a href="#cb225-10"></a><span class="va">True</span></span></code></pre></div>
<p>This is a str method in Python 3, but in Python 2, you’ll want to look at the PyICU or py2casefold - <a href="https://stackoverflow.com/q/18271077/541136">several answers address this here</a>.</p>
<h5>
Unicode Python 3
</h2>
<p><a href="https://docs.python.org/3/howto/unicode.html" rel="noreferrer">Python 3</a> handles plain string literals as unicode:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb226-1"><a href="#cb226-1"></a><span class="op">&gt;&gt;&gt;</span> string <span class="op">=</span> <span class="st">&#39;Километр&#39;</span></span>
<span id="cb226-2"><a href="#cb226-2"></a><span class="op">&gt;&gt;&gt;</span> string</span>
<span id="cb226-3"><a href="#cb226-3"></a><span class="co">&#39;Километр&#39;</span></span>
<span id="cb226-4"><a href="#cb226-4"></a><span class="op">&gt;&gt;&gt;</span> string.lower()</span>
<span id="cb226-5"><a href="#cb226-5"></a><span class="co">&#39;километр&#39;</span></span></code></pre></div>
<h5>
Python 2, plain string literals are bytes
</h2>
<p>In Python 2, the below, pasted into a shell, encodes the literal as a string of bytes, using <a href="https://docs.python.org/2/library/codecs.html#python-specific-encodings" rel="noreferrer"><code>utf-8</code></a>.</p>
<p>And <code>lower</code> doesn’t map any changes that bytes would be aware of, so we get the same string.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb227-1"><a href="#cb227-1"></a><span class="op">&gt;&gt;&gt;</span> string <span class="op">=</span> <span class="st">&#39;Километр&#39;</span></span>
<span id="cb227-2"><a href="#cb227-2"></a><span class="op">&gt;&gt;&gt;</span> string</span>
<span id="cb227-3"><a href="#cb227-3"></a><span class="co">&#39;</span><span class="ch">\xd0\x9a\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></span>
<span id="cb227-4"><a href="#cb227-4"></a><span class="op">&gt;&gt;&gt;</span> string.lower()</span>
<span id="cb227-5"><a href="#cb227-5"></a><span class="co">&#39;</span><span class="ch">\xd0\x9a\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></span>
<span id="cb227-6"><a href="#cb227-6"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> string.lower()</span>
<span id="cb227-7"><a href="#cb227-7"></a>Километр</span></code></pre></div>
<p>In scripts, Python will object to non-ascii (as of Python 2.5, and warning in Python 2.4) bytes being in a string with no encoding given, since the intended coding would be ambiguous. For more on that, see the Unicode how-to in the <a href="https://docs.python.org/2/howto/unicode.html#unicode-literals-in-python-source-code" rel="noreferrer">docs</a> and <a href="https://www.python.org/dev/peps/pep-0263/" rel="noreferrer">PEP 263</a></p>
<h5>
Use Unicode literals, not <code>str</code> literals
</h3>
<p>So we need a <code>unicode</code> string to handle this conversion, accomplished easily with a unicode string literal, which disambiguates with a <code>u</code> prefix (and note the <code>u</code> prefix also works in Python 3):</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb228-1"><a href="#cb228-1"></a><span class="op">&gt;&gt;&gt;</span> unicode_literal <span class="op">=</span> <span class="st">u&#39;Километр&#39;</span></span>
<span id="cb228-2"><a href="#cb228-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(unicode_literal.lower())</span>
<span id="cb228-3"><a href="#cb228-3"></a>километр</span></code></pre></div>
<p>Note that the bytes are completely different from the <code>str</code> bytes - the escape character is <code>'\u'</code> followed by the 2-byte width, or 16 bit representation of these <code>unicode</code> letters:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb229-1"><a href="#cb229-1"></a><span class="op">&gt;&gt;&gt;</span> unicode_literal</span>
<span id="cb229-2"><a href="#cb229-2"></a><span class="co">u&#39;</span><span class="ch">\u041a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></span>
<span id="cb229-3"><a href="#cb229-3"></a><span class="op">&gt;&gt;&gt;</span> unicode_literal.lower()</span>
<span id="cb229-4"><a href="#cb229-4"></a><span class="co">u&#39;</span><span class="ch">\u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></span></code></pre></div>
<p>Now if we only have it in the form of a <code>str</code>, we need to convert it to <code>unicode</code>. Python’s Unicode type is a universal encoding format that has many <a href="https://en.wikipedia.org/wiki/UTF-8#Advantages_and_disadvantages" rel="noreferrer">advantages</a> relative to most other encodings. We can either use the <code>unicode</code> constructor or <code>str.decode</code> method with the codec to convert the <code>str</code> to <code>unicode</code>:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb230-1"><a href="#cb230-1"></a><span class="op">&gt;&gt;&gt;</span> unicode_from_string <span class="op">=</span> <span class="bu">unicode</span>(string, <span class="st">&#39;utf-8&#39;</span>) <span class="co"># &quot;encoding&quot; unicode from string</span></span>
<span id="cb230-2"><a href="#cb230-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(unicode_from_string.lower())</span>
<span id="cb230-3"><a href="#cb230-3"></a>километр</span>
<span id="cb230-4"><a href="#cb230-4"></a><span class="op">&gt;&gt;&gt;</span> string_to_unicode <span class="op">=</span> string.decode(<span class="st">&#39;utf-8&#39;</span>) </span>
<span id="cb230-5"><a href="#cb230-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(string_to_unicode.lower())</span>
<span id="cb230-6"><a href="#cb230-6"></a>километр</span>
<span id="cb230-7"><a href="#cb230-7"></a><span class="op">&gt;&gt;&gt;</span> unicode_from_string <span class="op">==</span> string_to_unicode <span class="op">==</span> unicode_literal</span>
<span id="cb230-8"><a href="#cb230-8"></a><span class="va">True</span></span></code></pre></div>
<p>Both methods convert to the unicode type - and same as the unicode_literal.</p>
<h5>
Best Practice, use Unicode
</h2>
<p>It is recommended that you always <a href="https://docs.python.org/2/howto/unicode.html#tips-for-writing-unicode-aware-programs" rel="noreferrer">work with text in Unicode</a>.</p>
<blockquote>
Software should only work with Unicode strings internally, converting to a particular encoding on output.
</blockquote>
<h5>
Can encode back when necessary
</h2>
<p>However, to get the lowercase back in type <code>str</code>, encode the python string to <code>utf-8</code> again:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb231-1"><a href="#cb231-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> string</span>
<span id="cb231-2"><a href="#cb231-2"></a>Километр</span>
<span id="cb231-3"><a href="#cb231-3"></a><span class="op">&gt;&gt;&gt;</span> string</span>
<span id="cb231-4"><a href="#cb231-4"></a><span class="co">&#39;</span><span class="ch">\xd0\x9a\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></span>
<span id="cb231-5"><a href="#cb231-5"></a><span class="op">&gt;&gt;&gt;</span> string.decode(<span class="st">&#39;utf-8&#39;</span>)</span>
<span id="cb231-6"><a href="#cb231-6"></a><span class="co">u&#39;</span><span class="ch">\u041a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></span>
<span id="cb231-7"><a href="#cb231-7"></a><span class="op">&gt;&gt;&gt;</span> string.decode(<span class="st">&#39;utf-8&#39;</span>).lower()</span>
<span id="cb231-8"><a href="#cb231-8"></a><span class="co">u&#39;</span><span class="ch">\u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440</span><span class="co">&#39;</span></span>
<span id="cb231-9"><a href="#cb231-9"></a><span class="op">&gt;&gt;&gt;</span> string.decode(<span class="st">&#39;utf-8&#39;</span>).lower().encode(<span class="st">&#39;utf-8&#39;</span>)</span>
<span id="cb231-10"><a href="#cb231-10"></a><span class="co">&#39;</span><span class="ch">\xd0\xba\xd0\xb8\xd0\xbb\xd0\xbe\xd0\xbc\xd0\xb5\xd1\x82\xd1\x80</span><span class="co">&#39;</span></span>
<span id="cb231-11"><a href="#cb231-11"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> string.decode(<span class="st">&#39;utf-8&#39;</span>).lower().encode(<span class="st">&#39;utf-8&#39;</span>)</span>
<span id="cb231-12"><a href="#cb231-12"></a>километр</span></code></pre></div>
<p>So in Python 2, Unicode can encode into Python strings, and Python strings can decode into the Unicode type.</p>
</section>
<section id="answer-3-score-195" class="level4">
<h4>Answer 3 (score 195)</h4>
<p>With Python 2, this doesn’t work for non-English words in UTF-8. In this case <code>decode('utf-8')</code> can help:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb232-1"><a href="#cb232-1"></a><span class="op">&gt;&gt;&gt;</span> s<span class="op">=</span><span class="st">&#39;Километр&#39;</span></span>
<span id="cb232-2"><a href="#cb232-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> s.lower()</span>
<span id="cb232-3"><a href="#cb232-3"></a>Километр</span>
<span id="cb232-4"><a href="#cb232-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> s.decode(<span class="st">&#39;utf-8&#39;</span>).lower()</span>
<span id="cb232-5"><a href="#cb232-5"></a>километр</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-list-to-string-score-2197422-in-2019" class="level3">
<h3>31: How to convert list to string (score <a href="https://stackoverflow.com/q/5618878.html">2197422</a> in 2019)</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>How can I convert a list to a string using Python?</p>
</section>
<section id="answer-2-score-1203" class="level4">
<h4>Answer 2 (score 1203)</h4>
<p>By using <code>''.join</code></p>
<div class="sourceCode" id="cb233"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb233-1"><a href="#cb233-1"></a>list1 <span class="op">=</span> [<span class="st">&#39;1&#39;</span>, <span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>]</span>
<span id="cb233-2"><a href="#cb233-2"></a>str1 <span class="op">=</span> <span class="st">&#39;&#39;</span>.join(list1)</span></code></pre></div>
<p>Or if the list is of integers, convert the elements before joining them.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb234-1"><a href="#cb234-1"></a>list1 <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb234-2"><a href="#cb234-2"></a>str1 <span class="op">=</span> <span class="st">&#39;&#39;</span>.join(<span class="bu">str</span>(e) <span class="cf">for</span> e <span class="kw">in</span> list1)</span></code></pre></div>
</section>
<section id="answer-3-score-255" class="level4">
<h4>Answer 3 (score 255)</h4>
<div class="sourceCode" id="cb235"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb235-1"><a href="#cb235-1"></a><span class="op">&gt;&gt;&gt;</span> L <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]       </span>
<span id="cb235-2"><a href="#cb235-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot; &quot;</span>.join(<span class="bu">str</span>(x) <span class="cf">for</span> x <span class="kw">in</span> L)</span>
<span id="cb235-3"><a href="#cb235-3"></a><span class="co">&#39;1 2 3&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="select-rows-from-a-dataframe-based-on-values-in-a-column-in-pandas-score-2183835-in-2019" class="level3">
<h3>32: Select rows from a DataFrame based on values in a column in pandas (score <a href="https://stackoverflow.com/q/17071871.html">2183835</a> in 2019)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>How to select rows from a <code>DataFrame</code> based on values in some column in pandas?</p>
<p>In <strong>SQL</strong>, I would use:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb236-1"><a href="#cb236-1"></a>SELECT <span class="op">*</span></span>
<span id="cb236-2"><a href="#cb236-2"></a>FROM table</span>
<span id="cb236-3"><a href="#cb236-3"></a>WHERE colume_name <span class="op">=</span> some_value</span></code></pre></div>
<p><em>I tried to look at pandas documentation but did not immediately find the answer.</em></p>
</section>
<section id="answer-accepted-score-3029" class="level4">
<h4>Answer accepted (score 3029)</h4>
<p>To select rows whose column value equals a scalar, <code>some_value</code>, use <code>==</code>:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb237-1"><a href="#cb237-1"></a>df.loc[df[<span class="st">&#39;column_name&#39;</span>] <span class="op">==</span> some_value]</span></code></pre></div>
<p>To select rows whose column value is in an iterable, <code>some_values</code>, use <code>isin</code>:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb238-1"><a href="#cb238-1"></a>df.loc[df[<span class="st">&#39;column_name&#39;</span>].isin(some_values)]</span></code></pre></div>
<p>Combine multiple conditions with <code>&amp;amp;</code>:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb239-1"><a href="#cb239-1"></a>df.loc[(df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&gt;=</span> A) <span class="op">&amp;</span> (df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&lt;=</span> B)]</span></code></pre></div>
<p>Note the parentheses. Due to Python’s <a href="https://docs.python.org/3/reference/expressions.html#operator-precedence" rel="noreferrer">operator precedence rules</a>, <code>&amp;amp;</code> binds more tightly than <code>&amp;lt;=</code> and <code>&amp;gt;=</code>. Thus, the parentheses in the last example are necessary. Without the parentheses</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb240-1"><a href="#cb240-1"></a>df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&gt;=</span> A <span class="op">&amp;</span> df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&lt;=</span> B</span></code></pre></div>
<p>is parsed as</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb241-1"><a href="#cb241-1"></a>df[<span class="st">&#39;column_name&#39;</span>] <span class="op">&gt;=</span> (A <span class="op">&amp;</span> df[<span class="st">&#39;column_name&#39;</span>]) <span class="op">&lt;=</span> B</span></code></pre></div>
<p>which results in a <a href="https://stackoverflow.com/questions/36921951/truth-value-of-a-series-is-ambiguous-use-a-empty-a-bool-a-item-a-any-o">Truth value of a Series is ambiguous error</a>.</p>
<hr>
<p>To select rows whose column value <em>does not equal</em> <code>some_value</code>, use <code>!=</code>:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb242-1"><a href="#cb242-1"></a>df.loc[df[<span class="st">&#39;column_name&#39;</span>] <span class="op">!=</span> some_value]</span></code></pre></div>
<p><code>isin</code> returns a boolean Series, so to select rows whose value is <em>not</em> in <code>some_values</code>, negate the boolean Series using <code>~</code>:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb243-1"><a href="#cb243-1"></a>df.loc[<span class="op">~</span>df[<span class="st">&#39;column_name&#39;</span>].isin(some_values)]</span></code></pre></div>
<hr>
<p>For example,</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb244-1"><a href="#cb244-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb244-2"><a href="#cb244-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb244-3"><a href="#cb244-3"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;A&#39;</span>: <span class="st">&#39;foo bar foo bar foo bar foo foo&#39;</span>.split(),</span>
<span id="cb244-4"><a href="#cb244-4"></a>                   <span class="st">&#39;B&#39;</span>: <span class="st">&#39;one one two three two two one three&#39;</span>.split(),</span>
<span id="cb244-5"><a href="#cb244-5"></a>                   <span class="st">&#39;C&#39;</span>: np.arange(<span class="dv">8</span>), <span class="st">&#39;D&#39;</span>: np.arange(<span class="dv">8</span>) <span class="op">*</span> <span class="dv">2</span>})</span>
<span id="cb244-6"><a href="#cb244-6"></a><span class="bu">print</span>(df)</span>
<span id="cb244-7"><a href="#cb244-7"></a><span class="co">#      A      B  C   D</span></span>
<span id="cb244-8"><a href="#cb244-8"></a><span class="co"># 0  foo    one  0   0</span></span>
<span id="cb244-9"><a href="#cb244-9"></a><span class="co"># 1  bar    one  1   2</span></span>
<span id="cb244-10"><a href="#cb244-10"></a><span class="co"># 2  foo    two  2   4</span></span>
<span id="cb244-11"><a href="#cb244-11"></a><span class="co"># 3  bar  three  3   6</span></span>
<span id="cb244-12"><a href="#cb244-12"></a><span class="co"># 4  foo    two  4   8</span></span>
<span id="cb244-13"><a href="#cb244-13"></a><span class="co"># 5  bar    two  5  10</span></span>
<span id="cb244-14"><a href="#cb244-14"></a><span class="co"># 6  foo    one  6  12</span></span>
<span id="cb244-15"><a href="#cb244-15"></a><span class="co"># 7  foo  three  7  14</span></span>
<span id="cb244-16"><a href="#cb244-16"></a></span>
<span id="cb244-17"><a href="#cb244-17"></a><span class="bu">print</span>(df.loc[df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span>])</span></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb245-1"><a href="#cb245-1"></a>     A      B  C   D</span>
<span id="cb245-2"><a href="#cb245-2"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb245-3"><a href="#cb245-3"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb245-4"><a href="#cb245-4"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb245-5"><a href="#cb245-5"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb245-6"><a href="#cb245-6"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<hr>
<p>
If you have multiple values you want to include, put them in a list (or more generally, any iterable) and use <code>isin</code>:
</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1"></a><span class="bu">print</span>(df.loc[df[<span class="st">&#39;B&#39;</span>].isin([<span class="st">&#39;one&#39;</span>,<span class="st">&#39;three&#39;</span>])])</span></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb247-1"><a href="#cb247-1"></a>     A      B  C   D</span>
<span id="cb247-2"><a href="#cb247-2"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb247-3"><a href="#cb247-3"></a><span class="dv">1</span>  bar    one  <span class="dv">1</span>   <span class="dv">2</span></span>
<span id="cb247-4"><a href="#cb247-4"></a><span class="dv">3</span>  bar  three  <span class="dv">3</span>   <span class="dv">6</span></span>
<span id="cb247-5"><a href="#cb247-5"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb247-6"><a href="#cb247-6"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<hr>
<p>
Note, however, that if you wish to do this many times, it is more efficient to make an index first, and then use <code>df.loc</code>:
</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb248-1"><a href="#cb248-1"></a>df <span class="op">=</span> df.set_index([<span class="st">&#39;B&#39;</span>])</span>
<span id="cb248-2"><a href="#cb248-2"></a><span class="bu">print</span>(df.loc[<span class="st">&#39;one&#39;</span>])</span></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb249-1"><a href="#cb249-1"></a>       A  C   D</span>
<span id="cb249-2"><a href="#cb249-2"></a>B              </span>
<span id="cb249-3"><a href="#cb249-3"></a>one  foo  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb249-4"><a href="#cb249-4"></a>one  bar  <span class="dv">1</span>   <span class="dv">2</span></span>
<span id="cb249-5"><a href="#cb249-5"></a>one  foo  <span class="dv">6</span>  <span class="dv">12</span></span></code></pre></div>
<p>or, to include multiple values from the index use <code>df.index.isin</code>:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb250-1"><a href="#cb250-1"></a>df.loc[df.index.isin([<span class="st">&#39;one&#39;</span>,<span class="st">&#39;two&#39;</span>])]</span></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb251-1"><a href="#cb251-1"></a>       A  C   D</span>
<span id="cb251-2"><a href="#cb251-2"></a>B              </span>
<span id="cb251-3"><a href="#cb251-3"></a>one  foo  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb251-4"><a href="#cb251-4"></a>one  bar  <span class="dv">1</span>   <span class="dv">2</span></span>
<span id="cb251-5"><a href="#cb251-5"></a>two  foo  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb251-6"><a href="#cb251-6"></a>two  foo  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb251-7"><a href="#cb251-7"></a>two  bar  <span class="dv">5</span>  <span class="dv">10</span></span>
<span id="cb251-8"><a href="#cb251-8"></a>one  foo  <span class="dv">6</span>  <span class="dv">12</span></span></code></pre></div>
</section>
<section id="answer-2-score-244" class="level4">
<h4>Answer 2 (score 244)</h4>
<h5>
tl;dr
</h3>
<p>The pandas equivalent to</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb252-1"><a href="#cb252-1"></a>select <span class="op">*</span> <span class="im">from</span> table where column_name <span class="op">=</span> some_value</span></code></pre></div>
<p>is</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb253-1"><a href="#cb253-1"></a>table[table.column_name <span class="op">==</span> some_value]</span></code></pre></div>
<p>Multiple conditions:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb254-1"><a href="#cb254-1"></a>table[(table.column_name <span class="op">==</span> some_value) <span class="op">|</span> (table.column_name2 <span class="op">==</span> some_value2)]</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb255-1"><a href="#cb255-1"></a>table.query(<span class="st">&#39;column_name == some_value | column_name2 == some_value2&#39;</span>)</span></code></pre></div>
<h5>
Code example
</h3>
<div class="sourceCode" id="cb256"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb256-1"><a href="#cb256-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb256-2"><a href="#cb256-2"></a></span>
<span id="cb256-3"><a href="#cb256-3"></a><span class="co"># Create data set</span></span>
<span id="cb256-4"><a href="#cb256-4"></a>d <span class="op">=</span> {<span class="st">&#39;foo&#39;</span>:[<span class="dv">100</span>, <span class="dv">111</span>, <span class="dv">222</span>], </span>
<span id="cb256-5"><a href="#cb256-5"></a>     <span class="st">&#39;bar&#39;</span>:[<span class="dv">333</span>, <span class="dv">444</span>, <span class="dv">555</span>]}</span>
<span id="cb256-6"><a href="#cb256-6"></a>df <span class="op">=</span> pd.DataFrame(d)</span>
<span id="cb256-7"><a href="#cb256-7"></a></span>
<span id="cb256-8"><a href="#cb256-8"></a><span class="co"># Full dataframe:</span></span>
<span id="cb256-9"><a href="#cb256-9"></a>df</span>
<span id="cb256-10"><a href="#cb256-10"></a></span>
<span id="cb256-11"><a href="#cb256-11"></a><span class="co"># Shows:</span></span>
<span id="cb256-12"><a href="#cb256-12"></a><span class="co">#    bar   foo </span></span>
<span id="cb256-13"><a href="#cb256-13"></a><span class="co"># 0  333   100</span></span>
<span id="cb256-14"><a href="#cb256-14"></a><span class="co"># 1  444   111</span></span>
<span id="cb256-15"><a href="#cb256-15"></a><span class="co"># 2  555   222</span></span>
<span id="cb256-16"><a href="#cb256-16"></a></span>
<span id="cb256-17"><a href="#cb256-17"></a><span class="co"># Output only the row(s) in df where foo is 222:</span></span>
<span id="cb256-18"><a href="#cb256-18"></a>df[df.foo <span class="op">==</span> <span class="dv">222</span>]</span>
<span id="cb256-19"><a href="#cb256-19"></a></span>
<span id="cb256-20"><a href="#cb256-20"></a><span class="co"># Shows:</span></span>
<span id="cb256-21"><a href="#cb256-21"></a><span class="co">#    bar  foo</span></span>
<span id="cb256-22"><a href="#cb256-22"></a><span class="co"># 2  555  222</span></span></code></pre></div>
<p>In the above code it is the line <code>df[df.foo == 222]</code> that gives the rows based on the column value, <code>222</code> in this case.</p>
<p>Multiple conditions are also possible:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb257-1"><a href="#cb257-1"></a>df[(df.foo <span class="op">==</span> <span class="dv">222</span>) <span class="op">|</span> (df.bar <span class="op">==</span> <span class="dv">444</span>)]</span>
<span id="cb257-2"><a href="#cb257-2"></a><span class="co">#    bar  foo</span></span>
<span id="cb257-3"><a href="#cb257-3"></a><span class="co"># 1  444  111</span></span>
<span id="cb257-4"><a href="#cb257-4"></a><span class="co"># 2  555  222</span></span></code></pre></div>
<p>But at that point I would recommend using the <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html" rel="noreferrer">query</a> function, since it’s less verbose and yields the same result:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb258-1"><a href="#cb258-1"></a>df.query(<span class="st">&#39;foo == 222 | bar == 444&#39;</span>)</span></code></pre></div>
</section>
<section id="answer-3-score-205" class="level4">
<h4>Answer 3 (score 205)</h4>
<p>There are several ways to select rows from a pandas data frame:</p>
<ol>
<li>
<strong>Boolean indexing (<code>df[df['col'] == value</code>] )</strong>
</li>
<li>
<strong>Positional indexing (<code>df.iloc[...]</code>)</strong>
</li>
<li>
<strong>Label indexing (<code>df.xs(...)</code>)</strong>
</li>
<li>
<strong><code>df.query(...)</code> API</strong>
</li>
</ol>
<p>Below I show you examples of each, with advice when to use certain techniques. Assume our criterion is column <code>'A'</code> == <code>'foo'</code></p>
<p>(Note on performance: For each base type, we can keep things simple by using the pandas API or we can venture outside the API, usually into <code>numpy</code>, and speed things up.)</p>
<hr>
<p>
<strong>Setup</strong><br> The first thing we’ll need is to identify a condition that will act as our criterion for selecting rows. We’ll start with the OP’s case <code>column_name == some_value</code>, and include some other common use cases.
</p>
<p>Borrowing from <span class="citation" data-cites="unutbu">@unutbu</span>:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb259-1"><a href="#cb259-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd, numpy <span class="im">as</span> np</span>
<span id="cb259-2"><a href="#cb259-2"></a></span>
<span id="cb259-3"><a href="#cb259-3"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;A&#39;</span>: <span class="st">&#39;foo bar foo bar foo bar foo foo&#39;</span>.split(),</span>
<span id="cb259-4"><a href="#cb259-4"></a>                   <span class="st">&#39;B&#39;</span>: <span class="st">&#39;one one two three two two one three&#39;</span>.split(),</span>
<span id="cb259-5"><a href="#cb259-5"></a>                   <span class="st">&#39;C&#39;</span>: np.arange(<span class="dv">8</span>), <span class="st">&#39;D&#39;</span>: np.arange(<span class="dv">8</span>) <span class="op">*</span> <span class="dv">2</span>})</span></code></pre></div>
<hr>
<h5>
<strong>1. Boolean indexing</strong>
</h1>
<p>… Boolean indexing requires finding the true value of each row’s <code>'A'</code> column being equal to <code>'foo'</code>, then using those truth values to identify which rows to keep. Typically, we’d name this series, an array of truth values, <code>mask</code>. We’ll do so here as well.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb260-1"><a href="#cb260-1"></a>mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span></code></pre></div>
<p>We can then use this mask to slice or index the data frame</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb261-1"><a href="#cb261-1"></a>df[mask]</span>
<span id="cb261-2"><a href="#cb261-2"></a></span>
<span id="cb261-3"><a href="#cb261-3"></a>     A      B  C   D</span>
<span id="cb261-4"><a href="#cb261-4"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb261-5"><a href="#cb261-5"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb261-6"><a href="#cb261-6"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb261-7"><a href="#cb261-7"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb261-8"><a href="#cb261-8"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<p>This is one of the simplest ways to accomplish this task and if performance or intuitiveness isn’t an issue, this should be your chosen method. However, if performance is a concern, then you might want to consider an alternative way of creating the <code>mask</code>.</p>
<hr>
<h5>
<strong>2. Positional indexing</strong>
</h1>
<p>Positional indexing (<code>df.iloc[...]</code>) has its use cases, but this isn’t one of them. In order to identify where to slice, we first need to perform the same boolean analysis we did above. This leaves us performing one extra step to accomplish the same task.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb262-1"><a href="#cb262-1"></a>mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb262-2"><a href="#cb262-2"></a>pos <span class="op">=</span> np.flatnonzero(mask)</span>
<span id="cb262-3"><a href="#cb262-3"></a>df.iloc[pos]</span>
<span id="cb262-4"><a href="#cb262-4"></a></span>
<span id="cb262-5"><a href="#cb262-5"></a>     A      B  C   D</span>
<span id="cb262-6"><a href="#cb262-6"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb262-7"><a href="#cb262-7"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb262-8"><a href="#cb262-8"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb262-9"><a href="#cb262-9"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb262-10"><a href="#cb262-10"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<h5>
<strong>3. Label indexing</strong>
</h1>
<p><em>Label</em> indexing can be very handy, but in this case, we are again doing more work for no benefit</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb263-1"><a href="#cb263-1"></a>df.set_index(<span class="st">&#39;A&#39;</span>, append<span class="op">=</span><span class="va">True</span>, drop<span class="op">=</span><span class="va">False</span>).xs(<span class="st">&#39;foo&#39;</span>, level<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb263-2"><a href="#cb263-2"></a></span>
<span id="cb263-3"><a href="#cb263-3"></a>     A      B  C   D</span>
<span id="cb263-4"><a href="#cb263-4"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb263-5"><a href="#cb263-5"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb263-6"><a href="#cb263-6"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb263-7"><a href="#cb263-7"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb263-8"><a href="#cb263-8"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<h5>
<strong>4. <code>df.query()</code> API</strong>
</h1>
<p><em><code>pd.DataFrame.query</code></em> is a very elegant/intuitive way to perform this task, but is often slower. <strong>However</strong>, if you pay attention to the timings below, for large data, the query is very efficient. More so than the standard approach and of similar magnitude as my best suggestion.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb264-1"><a href="#cb264-1"></a>df.query(<span class="st">&#39;A == &quot;foo&quot;&#39;</span>)</span>
<span id="cb264-2"><a href="#cb264-2"></a></span>
<span id="cb264-3"><a href="#cb264-3"></a>     A      B  C   D</span>
<span id="cb264-4"><a href="#cb264-4"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb264-5"><a href="#cb264-5"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb264-6"><a href="#cb264-6"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb264-7"><a href="#cb264-7"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb264-8"><a href="#cb264-8"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<hr>
<p>My preference is to use the <code>Boolean</code> <code>mask</code></p>
<p>Actual improvements can be made by modifying how we create our <code>Boolean</code> <code>mask</code>.</p>
<p>
<strong><code>mask</code> alternative 1</strong><br> <em>Use the underlying <code>numpy</code> array and forgo the overhead of creating another <code>pd.Series</code></em>
</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb265-1"><a href="#cb265-1"></a>mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span></code></pre></div>
<p>I’ll show more complete time tests at the end, but just take a look at the performance gains we get using the sample data frame. First, we look at the difference in creating the <code>mask</code></p>
<div class="sourceCode" id="cb266"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb266-1"><a href="#cb266-1"></a><span class="op">%</span>timeit mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb266-2"><a href="#cb266-2"></a><span class="op">%</span>timeit mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb266-3"><a href="#cb266-3"></a></span>
<span id="cb266-4"><a href="#cb266-4"></a><span class="fl">5.84</span> µs ± <span class="dv">195</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">100000</span> loops each)</span>
<span id="cb266-5"><a href="#cb266-5"></a><span class="dv">166</span> µs ± <span class="fl">4.45</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">10000</span> loops each)</span></code></pre></div>
<p>Evaluating the <code>mask</code> with the <code>numpy</code> array is ~ 30 times faster. This is partly due to <code>numpy</code> evaluation often being faster. It is also partly due to the lack of overhead necessary to build an index and a corresponding <code>pd.Series</code> object.</p>
<p>Next, we’ll look at the timing for slicing with one <code>mask</code> versus the other.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb267-1"><a href="#cb267-1"></a>mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb267-2"><a href="#cb267-2"></a><span class="op">%</span>timeit df[mask]</span>
<span id="cb267-3"><a href="#cb267-3"></a>mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb267-4"><a href="#cb267-4"></a><span class="op">%</span>timeit df[mask]</span>
<span id="cb267-5"><a href="#cb267-5"></a></span>
<span id="cb267-6"><a href="#cb267-6"></a><span class="dv">219</span> µs ± <span class="fl">12.3</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</span>
<span id="cb267-7"><a href="#cb267-7"></a><span class="dv">239</span> µs ± <span class="fl">7.03</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</span></code></pre></div>
<p>The performance gains aren’t as pronounced. We’ll see if this holds up over more robust testing.</p>
<hr>
<p>
<strong><code>mask</code> alternative 2</strong><br> We could have reconstructed the data frame as well. There is a big caveat when reconstructing a dataframe—you must take care of the <code>dtypes</code> when doing so!
</p>
<p>Instead of <code>df[mask]</code> we will do this</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb268-1"><a href="#cb268-1"></a>pd.DataFrame(df.values[mask], df.index[mask], df.columns).astype(df.dtypes)</span></code></pre></div>
<p>If the data frame is of mixed type, which our example is, then when we get <code>df.values</code> the resulting array is of <code>dtype</code> <code>object</code> and consequently, all columns of the new data frame will be of <code>dtype</code> <code>object</code>. Thus requiring the <code>astype(df.dtypes)</code> and killing any potential performance gains.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb269-1"><a href="#cb269-1"></a><span class="op">%</span>timeit df[m]</span>
<span id="cb269-2"><a href="#cb269-2"></a><span class="op">%</span>timeit pd.DataFrame(df.values[mask], df.index[mask], df.columns).astype(df.dtypes)</span>
<span id="cb269-3"><a href="#cb269-3"></a></span>
<span id="cb269-4"><a href="#cb269-4"></a><span class="dv">216</span> µs ± <span class="fl">10.4</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</span>
<span id="cb269-5"><a href="#cb269-5"></a><span class="fl">1.43</span> ms ± <span class="fl">39.6</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</span></code></pre></div>
<p>However, if the data frame is not of mixed type, this is a very useful way to do it.</p>
<p>Given</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb270-1"><a href="#cb270-1"></a>np.random.seed([<span class="dv">3</span>,<span class="dv">1415</span>])</span>
<span id="cb270-2"><a href="#cb270-2"></a>d1 <span class="op">=</span> pd.DataFrame(np.random.randint(<span class="dv">10</span>, size<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>)), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;ABCDE&#39;</span>))</span>
<span id="cb270-3"><a href="#cb270-3"></a></span>
<span id="cb270-4"><a href="#cb270-4"></a>d1</span>
<span id="cb270-5"><a href="#cb270-5"></a></span>
<span id="cb270-6"><a href="#cb270-6"></a>   A  B  C  D  E</span>
<span id="cb270-7"><a href="#cb270-7"></a><span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">7</span>  <span class="dv">3</span>  <span class="dv">8</span></span>
<span id="cb270-8"><a href="#cb270-8"></a><span class="dv">1</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">8</span>  <span class="dv">6</span></span>
<span id="cb270-9"><a href="#cb270-9"></a><span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">4</span>  <span class="dv">9</span></span>
<span id="cb270-10"><a href="#cb270-10"></a><span class="dv">3</span>  <span class="dv">7</span>  <span class="dv">3</span>  <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">3</span></span>
<span id="cb270-11"><a href="#cb270-11"></a><span class="dv">4</span>  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">7</span>  <span class="dv">4</span></span>
<span id="cb270-12"><a href="#cb270-12"></a><span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">3</span>  <span class="dv">7</span>  <span class="dv">5</span>  <span class="dv">9</span></span>
<span id="cb270-13"><a href="#cb270-13"></a><span class="dv">6</span>  <span class="dv">8</span>  <span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">4</span>  <span class="dv">7</span></span>
<span id="cb270-14"><a href="#cb270-14"></a><span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">6</span>  <span class="dv">5</span></span>
<span id="cb270-15"><a href="#cb270-15"></a><span class="dv">8</span>  <span class="dv">2</span>  <span class="dv">8</span>  <span class="dv">7</span>  <span class="dv">5</span>  <span class="dv">8</span></span>
<span id="cb270-16"><a href="#cb270-16"></a><span class="dv">9</span>  <span class="dv">4</span>  <span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">1</span>  <span class="dv">5</span>    </span></code></pre></div>
<hr>
<div class="sourceCode" id="cb271"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb271-1"><a href="#cb271-1"></a><span class="op">%%</span>timeit</span>
<span id="cb271-2"><a href="#cb271-2"></a>mask <span class="op">=</span> d1[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="dv">7</span></span>
<span id="cb271-3"><a href="#cb271-3"></a>d1[mask]</span>
<span id="cb271-4"><a href="#cb271-4"></a></span>
<span id="cb271-5"><a href="#cb271-5"></a><span class="dv">179</span> µs ± <span class="fl">8.73</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">10000</span> loops each)</span></code></pre></div>
<p>Versus</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb272-1"><a href="#cb272-1"></a><span class="op">%%</span>timeit</span>
<span id="cb272-2"><a href="#cb272-2"></a>mask <span class="op">=</span> d1[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="dv">7</span></span>
<span id="cb272-3"><a href="#cb272-3"></a>pd.DataFrame(d1.values[mask], d1.index[mask], d1.columns)</span>
<span id="cb272-4"><a href="#cb272-4"></a></span>
<span id="cb272-5"><a href="#cb272-5"></a><span class="dv">87</span> µs ± <span class="fl">5.12</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">10000</span> loops each)</span></code></pre></div>
<p>We cut the time in half.</p>
<hr>
<p>
<strong><code>mask</code> alternative 3</strong><br> <span class="citation" data-cites="unutbu">@unutbu</span> also shows us how to use <code>pd.Series.isin</code> to account for each element of <code>df['A']</code> being in a set of values. This evaluates to the same thing if our set of values is a set of one value, namely <code>'foo'</code>. But it also generalizes to include larger sets of values if needed. Turns out, this is still pretty fast even though it is a more general solution. The only real loss is in intuitiveness for those not familiar with the concept.
</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb273-1"><a href="#cb273-1"></a>mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].isin([<span class="st">&#39;foo&#39;</span>])</span>
<span id="cb273-2"><a href="#cb273-2"></a>df[mask]</span>
<span id="cb273-3"><a href="#cb273-3"></a></span>
<span id="cb273-4"><a href="#cb273-4"></a>     A      B  C   D</span>
<span id="cb273-5"><a href="#cb273-5"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb273-6"><a href="#cb273-6"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb273-7"><a href="#cb273-7"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb273-8"><a href="#cb273-8"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb273-9"><a href="#cb273-9"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<p>However, as before, we can utilize <code>numpy</code> to improve performance while sacrificing virtually nothing. We’ll use <code>np.in1d</code></p>
<div class="sourceCode" id="cb274"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb274-1"><a href="#cb274-1"></a>mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</span>
<span id="cb274-2"><a href="#cb274-2"></a>df[mask]</span>
<span id="cb274-3"><a href="#cb274-3"></a></span>
<span id="cb274-4"><a href="#cb274-4"></a>     A      B  C   D</span>
<span id="cb274-5"><a href="#cb274-5"></a><span class="dv">0</span>  foo    one  <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb274-6"><a href="#cb274-6"></a><span class="dv">2</span>  foo    two  <span class="dv">2</span>   <span class="dv">4</span></span>
<span id="cb274-7"><a href="#cb274-7"></a><span class="dv">4</span>  foo    two  <span class="dv">4</span>   <span class="dv">8</span></span>
<span id="cb274-8"><a href="#cb274-8"></a><span class="dv">6</span>  foo    one  <span class="dv">6</span>  <span class="dv">12</span></span>
<span id="cb274-9"><a href="#cb274-9"></a><span class="dv">7</span>  foo  three  <span class="dv">7</span>  <span class="dv">14</span></span></code></pre></div>
<hr>
<p>
<strong>Timing</strong><br> I’ll include other concepts mentioned in other posts as well for reference.<br> <em>Code Below</em>
</p>
<p>Each Column in this table represents a different length data frame over which we test each function. Each column shows relative time taken, with the fastest function given a base index of <code>1.0</code>.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb275-1"><a href="#cb275-1"></a>res.div(res.<span class="bu">min</span>())</span>
<span id="cb275-2"><a href="#cb275-2"></a></span>
<span id="cb275-3"><a href="#cb275-3"></a>                         <span class="dv">10</span>        <span class="dv">30</span>        <span class="dv">100</span>       <span class="dv">300</span>       <span class="dv">1000</span>      <span class="dv">3000</span>      <span class="dv">10000</span>     <span class="dv">30000</span></span>
<span id="cb275-4"><a href="#cb275-4"></a>mask_standard         <span class="fl">2.156872</span>  <span class="fl">1.850663</span>  <span class="fl">2.034149</span>  <span class="fl">2.166312</span>  <span class="fl">2.164541</span>  <span class="fl">3.090372</span>  <span class="fl">2.981326</span>  <span class="fl">3.131151</span></span>
<span id="cb275-5"><a href="#cb275-5"></a>mask_standard_loc     <span class="fl">1.879035</span>  <span class="fl">1.782366</span>  <span class="fl">1.988823</span>  <span class="fl">2.338112</span>  <span class="fl">2.361391</span>  <span class="fl">3.036131</span>  <span class="fl">2.998112</span>  <span class="fl">2.990103</span></span>
<span id="cb275-6"><a href="#cb275-6"></a>mask_with_values      <span class="fl">1.010166</span>  <span class="fl">1.000000</span>  <span class="fl">1.005113</span>  <span class="fl">1.026363</span>  <span class="fl">1.028698</span>  <span class="fl">1.293741</span>  <span class="fl">1.007824</span>  <span class="fl">1.016919</span></span>
<span id="cb275-7"><a href="#cb275-7"></a>mask_with_values_loc  <span class="fl">1.196843</span>  <span class="fl">1.300228</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.038989</span>  <span class="fl">1.219233</span>  <span class="fl">1.037020</span>  <span class="fl">1.000000</span></span>
<span id="cb275-8"><a href="#cb275-8"></a>query                 <span class="fl">4.997304</span>  <span class="fl">4.765554</span>  <span class="fl">5.934096</span>  <span class="fl">4.500559</span>  <span class="fl">2.997924</span>  <span class="fl">2.397013</span>  <span class="fl">1.680447</span>  <span class="fl">1.398190</span></span>
<span id="cb275-9"><a href="#cb275-9"></a>xs_label              <span class="fl">4.124597</span>  <span class="fl">4.272363</span>  <span class="fl">5.596152</span>  <span class="fl">4.295331</span>  <span class="fl">4.676591</span>  <span class="fl">5.710680</span>  <span class="fl">6.032809</span>  <span class="fl">8.950255</span></span>
<span id="cb275-10"><a href="#cb275-10"></a>mask_with_isin        <span class="fl">1.674055</span>  <span class="fl">1.679935</span>  <span class="fl">1.847972</span>  <span class="fl">1.724183</span>  <span class="fl">1.345111</span>  <span class="fl">1.405231</span>  <span class="fl">1.253554</span>  <span class="fl">1.264760</span></span>
<span id="cb275-11"><a href="#cb275-11"></a>mask_with_in1d        <span class="fl">1.000000</span>  <span class="fl">1.083807</span>  <span class="fl">1.220493</span>  <span class="fl">1.101929</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.144175</span></span></code></pre></div>
<p>You’ll notice that fastest times seem to be shared between <code>mask_with_values</code> and <code>mask_with_in1d</code></p>
<div class="sourceCode" id="cb276"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb276-1"><a href="#cb276-1"></a>res.T.plot(loglog<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p><a href="https://i.stack.imgur.com/ljeTd.png" rel="noreferrer"><img src="https://i.stack.imgur.com/ljeTd.png" alt="enter image description here"></a></p>
<p><strong>Functions</strong></p>
<div class="sourceCode" id="cb277"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb277-1"><a href="#cb277-1"></a><span class="kw">def</span> mask_standard(df):</span>
<span id="cb277-2"><a href="#cb277-2"></a>    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb277-3"><a href="#cb277-3"></a>    <span class="cf">return</span> df[mask]</span>
<span id="cb277-4"><a href="#cb277-4"></a></span>
<span id="cb277-5"><a href="#cb277-5"></a><span class="kw">def</span> mask_standard_loc(df):</span>
<span id="cb277-6"><a href="#cb277-6"></a>    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>] <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb277-7"><a href="#cb277-7"></a>    <span class="cf">return</span> df.loc[mask]</span>
<span id="cb277-8"><a href="#cb277-8"></a></span>
<span id="cb277-9"><a href="#cb277-9"></a><span class="kw">def</span> mask_with_values(df):</span>
<span id="cb277-10"><a href="#cb277-10"></a>    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb277-11"><a href="#cb277-11"></a>    <span class="cf">return</span> df[mask]</span>
<span id="cb277-12"><a href="#cb277-12"></a></span>
<span id="cb277-13"><a href="#cb277-13"></a><span class="kw">def</span> mask_with_values_loc(df):</span>
<span id="cb277-14"><a href="#cb277-14"></a>    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb277-15"><a href="#cb277-15"></a>    <span class="cf">return</span> df.loc[mask]</span>
<span id="cb277-16"><a href="#cb277-16"></a></span>
<span id="cb277-17"><a href="#cb277-17"></a><span class="kw">def</span> query(df):</span>
<span id="cb277-18"><a href="#cb277-18"></a>    <span class="cf">return</span> df.query(<span class="st">&#39;A == &quot;foo&quot;&#39;</span>)</span>
<span id="cb277-19"><a href="#cb277-19"></a></span>
<span id="cb277-20"><a href="#cb277-20"></a><span class="kw">def</span> xs_label(df):</span>
<span id="cb277-21"><a href="#cb277-21"></a>    <span class="cf">return</span> df.set_index(<span class="st">&#39;A&#39;</span>, append<span class="op">=</span><span class="va">True</span>, drop<span class="op">=</span><span class="va">False</span>).xs(<span class="st">&#39;foo&#39;</span>, level<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb277-22"><a href="#cb277-22"></a></span>
<span id="cb277-23"><a href="#cb277-23"></a><span class="kw">def</span> mask_with_isin(df):</span>
<span id="cb277-24"><a href="#cb277-24"></a>    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].isin([<span class="st">&#39;foo&#39;</span>])</span>
<span id="cb277-25"><a href="#cb277-25"></a>    <span class="cf">return</span> df[mask]</span>
<span id="cb277-26"><a href="#cb277-26"></a></span>
<span id="cb277-27"><a href="#cb277-27"></a><span class="kw">def</span> mask_with_in1d(df):</span>
<span id="cb277-28"><a href="#cb277-28"></a>    mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</span>
<span id="cb277-29"><a href="#cb277-29"></a>    <span class="cf">return</span> df[mask]</span></code></pre></div>
<hr>
<p><strong>Testing</strong></p>
<div class="sourceCode" id="cb278"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb278-1"><a href="#cb278-1"></a>res <span class="op">=</span> pd.DataFrame(</span>
<span id="cb278-2"><a href="#cb278-2"></a>    index<span class="op">=</span>[</span>
<span id="cb278-3"><a href="#cb278-3"></a>        <span class="st">&#39;mask_standard&#39;</span>, <span class="st">&#39;mask_standard_loc&#39;</span>, <span class="st">&#39;mask_with_values&#39;</span>, <span class="st">&#39;mask_with_values_loc&#39;</span>,</span>
<span id="cb278-4"><a href="#cb278-4"></a>        <span class="st">&#39;query&#39;</span>, <span class="st">&#39;xs_label&#39;</span>, <span class="st">&#39;mask_with_isin&#39;</span>, <span class="st">&#39;mask_with_in1d&#39;</span></span>
<span id="cb278-5"><a href="#cb278-5"></a>    ],</span>
<span id="cb278-6"><a href="#cb278-6"></a>    columns<span class="op">=</span>[<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">100</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">3000</span>, <span class="dv">10000</span>, <span class="dv">30000</span>],</span>
<span id="cb278-7"><a href="#cb278-7"></a>    dtype<span class="op">=</span><span class="bu">float</span></span>
<span id="cb278-8"><a href="#cb278-8"></a>)</span>
<span id="cb278-9"><a href="#cb278-9"></a></span>
<span id="cb278-10"><a href="#cb278-10"></a><span class="cf">for</span> j <span class="kw">in</span> res.columns:</span>
<span id="cb278-11"><a href="#cb278-11"></a>    d <span class="op">=</span> pd.concat([df] <span class="op">*</span> j, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb278-12"><a href="#cb278-12"></a>    <span class="cf">for</span> i <span class="kw">in</span> res.index:a</span>
<span id="cb278-13"><a href="#cb278-13"></a>        stmt <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{}</span><span class="st">(d)&#39;</span>.<span class="bu">format</span>(i)</span>
<span id="cb278-14"><a href="#cb278-14"></a>        setp <span class="op">=</span> <span class="st">&#39;from __main__ import d, </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i)</span>
<span id="cb278-15"><a href="#cb278-15"></a>        res.at[i, j] <span class="op">=</span> timeit(stmt, setp, number<span class="op">=</span><span class="dv">50</span>)</span></code></pre></div>
<hr>
<p>
<strong>Special Timing</strong><br> Looking at the special case when we have a single non-object <code>dtype</code> for the entire data frame. <em>Code Below</em>
</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb279-1"><a href="#cb279-1"></a>spec.div(spec.<span class="bu">min</span>())</span>
<span id="cb279-2"><a href="#cb279-2"></a></span>
<span id="cb279-3"><a href="#cb279-3"></a>                     <span class="dv">10</span>        <span class="dv">30</span>        <span class="dv">100</span>       <span class="dv">300</span>       <span class="dv">1000</span>      <span class="dv">3000</span>      <span class="dv">10000</span>     <span class="dv">30000</span></span>
<span id="cb279-4"><a href="#cb279-4"></a>mask_with_values  <span class="fl">1.009030</span>  <span class="fl">1.000000</span>  <span class="fl">1.194276</span>  <span class="fl">1.000000</span>  <span class="fl">1.236892</span>  <span class="fl">1.095343</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span></span>
<span id="cb279-5"><a href="#cb279-5"></a>mask_with_in1d    <span class="fl">1.104638</span>  <span class="fl">1.094524</span>  <span class="fl">1.156930</span>  <span class="fl">1.072094</span>  <span class="fl">1.000000</span>  <span class="fl">1.000000</span>  <span class="fl">1.040043</span>  <span class="fl">1.027100</span></span>
<span id="cb279-6"><a href="#cb279-6"></a>reconstruct       <span class="fl">1.000000</span>  <span class="fl">1.142838</span>  <span class="fl">1.000000</span>  <span class="fl">1.355440</span>  <span class="fl">1.650270</span>  <span class="fl">2.222181</span>  <span class="fl">2.294913</span>  <span class="fl">3.406735</span></span></code></pre></div>
<p>Turns out, reconstruction isn’t worth it past a few hundred rows.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb280-1"><a href="#cb280-1"></a>spec.T.plot(loglog<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p><a href="https://i.stack.imgur.com/K1bNc.png" rel="noreferrer"><img src="https://i.stack.imgur.com/K1bNc.png" alt="enter image description here"></a></p>
<p><strong>Functions</strong></p>
<div class="sourceCode" id="cb281"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb281-1"><a href="#cb281-1"></a>np.random.seed([<span class="dv">3</span>,<span class="dv">1415</span>])</span>
<span id="cb281-2"><a href="#cb281-2"></a>d1 <span class="op">=</span> pd.DataFrame(np.random.randint(<span class="dv">10</span>, size<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>)), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;ABCDE&#39;</span>))</span>
<span id="cb281-3"><a href="#cb281-3"></a></span>
<span id="cb281-4"><a href="#cb281-4"></a><span class="kw">def</span> mask_with_values(df):</span>
<span id="cb281-5"><a href="#cb281-5"></a>    mask <span class="op">=</span> df[<span class="st">&#39;A&#39;</span>].values <span class="op">==</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb281-6"><a href="#cb281-6"></a>    <span class="cf">return</span> df[mask]</span>
<span id="cb281-7"><a href="#cb281-7"></a></span>
<span id="cb281-8"><a href="#cb281-8"></a><span class="kw">def</span> mask_with_in1d(df):</span>
<span id="cb281-9"><a href="#cb281-9"></a>    mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</span>
<span id="cb281-10"><a href="#cb281-10"></a>    <span class="cf">return</span> df[mask]</span>
<span id="cb281-11"><a href="#cb281-11"></a></span>
<span id="cb281-12"><a href="#cb281-12"></a><span class="kw">def</span> reconstruct(df):</span>
<span id="cb281-13"><a href="#cb281-13"></a>    v <span class="op">=</span> df.values</span>
<span id="cb281-14"><a href="#cb281-14"></a>    mask <span class="op">=</span> np.in1d(df[<span class="st">&#39;A&#39;</span>].values, [<span class="st">&#39;foo&#39;</span>])</span>
<span id="cb281-15"><a href="#cb281-15"></a>    <span class="cf">return</span> pd.DataFrame(v[mask], df.index[mask], df.columns)</span>
<span id="cb281-16"><a href="#cb281-16"></a></span>
<span id="cb281-17"><a href="#cb281-17"></a>spec <span class="op">=</span> pd.DataFrame(</span>
<span id="cb281-18"><a href="#cb281-18"></a>    index<span class="op">=</span>[<span class="st">&#39;mask_with_values&#39;</span>, <span class="st">&#39;mask_with_in1d&#39;</span>, <span class="st">&#39;reconstruct&#39;</span>],</span>
<span id="cb281-19"><a href="#cb281-19"></a>    columns<span class="op">=</span>[<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">100</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">3000</span>, <span class="dv">10000</span>, <span class="dv">30000</span>],</span>
<span id="cb281-20"><a href="#cb281-20"></a>    dtype<span class="op">=</span><span class="bu">float</span></span>
<span id="cb281-21"><a href="#cb281-21"></a>)</span></code></pre></div>
<p><strong>Testing</strong></p>
<div class="sourceCode" id="cb282"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb282-1"><a href="#cb282-1"></a><span class="cf">for</span> j <span class="kw">in</span> spec.columns:</span>
<span id="cb282-2"><a href="#cb282-2"></a>    d <span class="op">=</span> pd.concat([df] <span class="op">*</span> j, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb282-3"><a href="#cb282-3"></a>    <span class="cf">for</span> i <span class="kw">in</span> spec.index:</span>
<span id="cb282-4"><a href="#cb282-4"></a>        stmt <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{}</span><span class="st">(d)&#39;</span>.<span class="bu">format</span>(i)</span>
<span id="cb282-5"><a href="#cb282-5"></a>        setp <span class="op">=</span> <span class="st">&#39;from __main__ import d, </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i)</span>
<span id="cb282-6"><a href="#cb282-6"></a>        spec.at[i, j] <span class="op">=</span> timeit(stmt, setp, number<span class="op">=</span><span class="dv">50</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-change-the-size-of-figures-drawn-with-matplotlib-score-2126797-in" class="level3">
<h3>33: How do you change the size of figures drawn with matplotlib? (score <a href="https://stackoverflow.com/q/332289.html">2126797</a> in )</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>How do you change the size of figure drawn with matplotlib?</p>
</section>
<section id="answer-2-score-940" class="level4">
<h4>Answer 2 (score 940)</h4>
<p><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" rel="noreferrer">figure</a> tells you the call signature:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb283-1"><a href="#cb283-1"></a><span class="im">from</span> matplotlib.pyplot <span class="im">import</span> figure</span>
<span id="cb283-2"><a href="#cb283-2"></a>figure(num<span class="op">=</span><span class="va">None</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), dpi<span class="op">=</span><span class="dv">80</span>, facecolor<span class="op">=</span><span class="st">&#39;w&#39;</span>, edgecolor<span class="op">=</span><span class="st">&#39;k&#39;</span>)</span></code></pre></div>
<p><code>figure(figsize=(1,1))</code> would create an inch-by-inch image, which would be 80-by-80 pixels unless you also give a different dpi argument.</p>
</section>
<section id="answer-3-score-664" class="level4">
<h4>Answer 3 (score 664)</h4>
<p>If you’ve already got the figure created you can quickly do this:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb284-1"><a href="#cb284-1"></a>fig <span class="op">=</span> matplotlib.pyplot.gcf()</span>
<span id="cb284-2"><a href="#cb284-2"></a>fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>)</span>
<span id="cb284-3"><a href="#cb284-3"></a>fig.savefig(<span class="st">&#39;test2png.png&#39;</span>, dpi<span class="op">=</span><span class="dv">100</span>)</span></code></pre></div>
<p>To propagate the size change to an existing gui window add <code>forward=True</code></p>
<div class="sourceCode" id="cb285"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb285-1"><a href="#cb285-1"></a>fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>, forward<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-concatenate-two-lists-in-python-score-2112225-in-2019" class="level3">
<h3>34: How do I concatenate two lists in Python? (score <a href="https://stackoverflow.com/q/1720421.html">2112225</a> in 2019)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>How do I concatenate two lists in Python?</p>
<p>Example:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb286-1"><a href="#cb286-1"></a>listone <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb286-2"><a href="#cb286-2"></a>listtwo <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span></code></pre></div>
<p>Expected outcome:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb287-1"><a href="#cb287-1"></a><span class="op">&gt;&gt;&gt;</span> joinedlist</span>
<span id="cb287-2"><a href="#cb287-2"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span></code></pre></div>
</section>
<section id="answer-accepted-score-3460" class="level4">
<h4>Answer accepted (score 3460)</h4>
<p>You can use the <code>+</code> operator to combine them:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb288-1"><a href="#cb288-1"></a>listone <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb288-2"><a href="#cb288-2"></a>listtwo <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb288-3"><a href="#cb288-3"></a></span>
<span id="cb288-4"><a href="#cb288-4"></a>joinedlist <span class="op">=</span> listone <span class="op">+</span> listtwo</span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb289-1"><a href="#cb289-1"></a><span class="op">&gt;&gt;&gt;</span> joinedlist</span>
<span id="cb289-2"><a href="#cb289-2"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-277" class="level4">
<h4>Answer 2 (score 277)</h4>
<p>It’s also possible to create a generator that simply iterates over the items in both lists. This allows you to chain lists (or any iterable) together for processing without copying the items to a new list:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb290-1"><a href="#cb290-1"></a><span class="im">import</span> itertools</span>
<span id="cb290-2"><a href="#cb290-2"></a><span class="cf">for</span> item <span class="kw">in</span> itertools.chain(listone, listtwo):</span>
<span id="cb290-3"><a href="#cb290-3"></a>   <span class="co"># Do something with each list item</span></span></code></pre></div>
</section>
<section id="answer-3-score-196" class="level4">
<h4>Answer 3 (score 196)</h4>
<p>You can use sets to obtain merged list of unique values</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb291-1"><a href="#cb291-1"></a>mergedlist <span class="op">=</span> <span class="bu">list</span>(<span class="bu">set</span>(listone <span class="op">+</span> listtwo))</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-the-yield-keyword-do-score-2091736-in-2019" class="level3">
<h3>35: What does the “yield” keyword do? (score <a href="https://stackoverflow.com/q/231767.html">2091736</a> in 2019)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>What is the use of the <code>yield</code> keyword in Python? What does it do?</p>
<p>For example, I’m trying to understand this code<sup><strong>1</strong></sup>:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb292-1"><a href="#cb292-1"></a><span class="kw">def</span> _get_child_candidates(<span class="va">self</span>, distance, min_dist, max_dist):</span>
<span id="cb292-2"><a href="#cb292-2"></a>    <span class="cf">if</span> <span class="va">self</span>._leftchild <span class="kw">and</span> distance <span class="op">-</span> max_dist <span class="op">&lt;</span> <span class="va">self</span>._median:</span>
<span id="cb292-3"><a href="#cb292-3"></a>        <span class="cf">yield</span> <span class="va">self</span>._leftchild</span>
<span id="cb292-4"><a href="#cb292-4"></a>    <span class="cf">if</span> <span class="va">self</span>._rightchild <span class="kw">and</span> distance <span class="op">+</span> max_dist <span class="op">&gt;=</span> <span class="va">self</span>._median:</span>
<span id="cb292-5"><a href="#cb292-5"></a>        <span class="cf">yield</span> <span class="va">self</span>._rightchild  </span></code></pre></div>
<p>And this is the caller:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb293-1"><a href="#cb293-1"></a>result, candidates <span class="op">=</span> [], [<span class="va">self</span>]</span>
<span id="cb293-2"><a href="#cb293-2"></a><span class="cf">while</span> candidates:</span>
<span id="cb293-3"><a href="#cb293-3"></a>    node <span class="op">=</span> candidates.pop()</span>
<span id="cb293-4"><a href="#cb293-4"></a>    distance <span class="op">=</span> node._get_dist(obj)</span>
<span id="cb293-5"><a href="#cb293-5"></a>    <span class="cf">if</span> distance <span class="op">&lt;=</span> max_dist <span class="kw">and</span> distance <span class="op">&gt;=</span> min_dist:</span>
<span id="cb293-6"><a href="#cb293-6"></a>        result.extend(node._values)</span>
<span id="cb293-7"><a href="#cb293-7"></a>    candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))</span>
<span id="cb293-8"><a href="#cb293-8"></a><span class="cf">return</span> result</span></code></pre></div>
<p>
What happens when the method <code>_get_child_candidates</code> is called? Is a list returned? A single element? Is it called again? When will subsequent calls stop?
</p>
<hr>
<p>
<sub> 1. This piece of code was written by Jochen Schulz (jrschulz), who made a great Python library for metric spaces. This is the link to the complete source: <a href="http://well-adjusted.de/~jrschulz/mspace/" rel="noreferrer">Module mspace</a>.</sub>
</p>
</section>
<section id="answer-accepted-score-13854" class="level4">
<h4>Answer accepted (score 13854)</h4>
<p>To understand what <code>yield</code> does, you must understand what <em>generators</em> are. And before you can understand generators, you must understand <em>iterables</em>.</p>
<h5>
Iterables
</h2>
<p>When you create a list, you can read its items one by one. Reading its items one by one is called iteration:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb294-1"><a href="#cb294-1"></a><span class="op">&gt;&gt;&gt;</span> mylist <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb294-2"><a href="#cb294-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> mylist:</span>
<span id="cb294-3"><a href="#cb294-3"></a>...    <span class="bu">print</span>(i)</span>
<span id="cb294-4"><a href="#cb294-4"></a><span class="dv">1</span></span>
<span id="cb294-5"><a href="#cb294-5"></a><span class="dv">2</span></span>
<span id="cb294-6"><a href="#cb294-6"></a><span class="dv">3</span></span></code></pre></div>
<p><code>mylist</code> is an <em>iterable</em>. When you use a list comprehension, you create a list, and so an iterable:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb295-1"><a href="#cb295-1"></a><span class="op">&gt;&gt;&gt;</span> mylist <span class="op">=</span> [x<span class="op">*</span>x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</span>
<span id="cb295-2"><a href="#cb295-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> mylist:</span>
<span id="cb295-3"><a href="#cb295-3"></a>...    <span class="bu">print</span>(i)</span>
<span id="cb295-4"><a href="#cb295-4"></a><span class="dv">0</span></span>
<span id="cb295-5"><a href="#cb295-5"></a><span class="dv">1</span></span>
<span id="cb295-6"><a href="#cb295-6"></a><span class="dv">4</span></span></code></pre></div>
<p>Everything you can use “<code>for... in...</code>” on is an iterable; <code>lists</code>, <code>strings</code>, files…</p>
<p>These iterables are handy because you can read them as much as you wish, but you store all the values in memory and this is not always what you want when you have a lot of values.</p>
<h5>
Generators
</h2>
<p>Generators are iterators, a kind of iterable <strong>you can only iterate over once</strong>. Generators do not store all the values in memory, <strong>they generate the values on the fly</strong>:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb296-1"><a href="#cb296-1"></a><span class="op">&gt;&gt;&gt;</span> mygenerator <span class="op">=</span> (x<span class="op">*</span>x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>))</span>
<span id="cb296-2"><a href="#cb296-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> mygenerator:</span>
<span id="cb296-3"><a href="#cb296-3"></a>...    <span class="bu">print</span>(i)</span>
<span id="cb296-4"><a href="#cb296-4"></a><span class="dv">0</span></span>
<span id="cb296-5"><a href="#cb296-5"></a><span class="dv">1</span></span>
<span id="cb296-6"><a href="#cb296-6"></a><span class="dv">4</span></span></code></pre></div>
<p>It is just the same except you used <code>()</code> instead of <code>[]</code>. BUT, you <strong>cannot</strong> perform <code>for i in mygenerator</code> a second time since generators can only be used once: they calculate 0, then forget about it and calculate 1, and end calculating 4, one by one.</p>
<h5>
Yield
</h2>
<p><code>yield</code> is a keyword that is used like <code>return</code>, except the function will return a generator.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb297-1"><a href="#cb297-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> createGenerator():</span>
<span id="cb297-2"><a href="#cb297-2"></a>...    mylist <span class="op">=</span> <span class="bu">range</span>(<span class="dv">3</span>)</span>
<span id="cb297-3"><a href="#cb297-3"></a>...    <span class="cf">for</span> i <span class="kw">in</span> mylist:</span>
<span id="cb297-4"><a href="#cb297-4"></a>...        <span class="cf">yield</span> i<span class="op">*</span>i</span>
<span id="cb297-5"><a href="#cb297-5"></a>...</span>
<span id="cb297-6"><a href="#cb297-6"></a><span class="op">&gt;&gt;&gt;</span> mygenerator <span class="op">=</span> createGenerator() <span class="co"># create a generator</span></span>
<span id="cb297-7"><a href="#cb297-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(mygenerator) <span class="co"># mygenerator is an object!</span></span>
<span id="cb297-8"><a href="#cb297-8"></a><span class="op">&lt;</span>generator <span class="bu">object</span> createGenerator at <span class="bn">0xb7555c34</span><span class="op">&gt;</span></span>
<span id="cb297-9"><a href="#cb297-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> mygenerator:</span>
<span id="cb297-10"><a href="#cb297-10"></a>...     <span class="bu">print</span>(i)</span>
<span id="cb297-11"><a href="#cb297-11"></a><span class="dv">0</span></span>
<span id="cb297-12"><a href="#cb297-12"></a><span class="dv">1</span></span>
<span id="cb297-13"><a href="#cb297-13"></a><span class="dv">4</span></span></code></pre></div>
<p>Here it’s a useless example, but it’s handy when you know your function will return a huge set of values that you will only need to read once.</p>
<p>To master <code>yield</code>, you must understand that <strong>when you call the function, the code you have written in the function body does not run.</strong> The function only returns the generator object, this is a bit tricky :-)</p>
<p>Then, your code will continue from where it left off each time <code>for</code> uses the generator.</p>
<p>Now the hard part:</p>
<p>The first time the <code>for</code> calls the generator object created from your function, it will run the code in your function from the beginning until it hits <code>yield</code>, then it’ll return the first value of the loop. Then, each other call will run the loop you have written in the function one more time, and return the next value until there is no value to return.</p>
<p>The generator is considered empty once the function runs, but does not hit <code>yield</code> anymore. It can be because the loop had come to an end, or because you do not satisfy an <code>"if/else"</code> anymore.</p>
<hr>
<h5>
Your code explained
</h2>
<p><em>Generator:</em></p>
<div class="sourceCode" id="cb298"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb298-1"><a href="#cb298-1"></a><span class="co"># Here you create the method of the node object that will return the generator</span></span>
<span id="cb298-2"><a href="#cb298-2"></a><span class="kw">def</span> _get_child_candidates(<span class="va">self</span>, distance, min_dist, max_dist):</span>
<span id="cb298-3"><a href="#cb298-3"></a></span>
<span id="cb298-4"><a href="#cb298-4"></a>    <span class="co"># Here is the code that will be called each time you use the generator object:</span></span>
<span id="cb298-5"><a href="#cb298-5"></a></span>
<span id="cb298-6"><a href="#cb298-6"></a>    <span class="co"># If there is still a child of the node object on its left</span></span>
<span id="cb298-7"><a href="#cb298-7"></a>    <span class="co"># AND if the distance is ok, return the next child</span></span>
<span id="cb298-8"><a href="#cb298-8"></a>    <span class="cf">if</span> <span class="va">self</span>._leftchild <span class="kw">and</span> distance <span class="op">-</span> max_dist <span class="op">&lt;</span> <span class="va">self</span>._median:</span>
<span id="cb298-9"><a href="#cb298-9"></a>        <span class="cf">yield</span> <span class="va">self</span>._leftchild</span>
<span id="cb298-10"><a href="#cb298-10"></a></span>
<span id="cb298-11"><a href="#cb298-11"></a>    <span class="co"># If there is still a child of the node object on its right</span></span>
<span id="cb298-12"><a href="#cb298-12"></a>    <span class="co"># AND if the distance is ok, return the next child</span></span>
<span id="cb298-13"><a href="#cb298-13"></a>    <span class="cf">if</span> <span class="va">self</span>._rightchild <span class="kw">and</span> distance <span class="op">+</span> max_dist <span class="op">&gt;=</span> <span class="va">self</span>._median:</span>
<span id="cb298-14"><a href="#cb298-14"></a>        <span class="cf">yield</span> <span class="va">self</span>._rightchild</span>
<span id="cb298-15"><a href="#cb298-15"></a></span>
<span id="cb298-16"><a href="#cb298-16"></a>    <span class="co"># If the function arrives here, the generator will be considered empty</span></span>
<span id="cb298-17"><a href="#cb298-17"></a>    <span class="co"># there is no more than two values: the left and the right children</span></span></code></pre></div>
<p><em>Caller:</em></p>
<div class="sourceCode" id="cb299"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb299-1"><a href="#cb299-1"></a><span class="co"># Create an empty list and a list with the current object reference</span></span>
<span id="cb299-2"><a href="#cb299-2"></a>result, candidates <span class="op">=</span> <span class="bu">list</span>(), [<span class="va">self</span>]</span>
<span id="cb299-3"><a href="#cb299-3"></a></span>
<span id="cb299-4"><a href="#cb299-4"></a><span class="co"># Loop on candidates (they contain only one element at the beginning)</span></span>
<span id="cb299-5"><a href="#cb299-5"></a><span class="cf">while</span> candidates:</span>
<span id="cb299-6"><a href="#cb299-6"></a></span>
<span id="cb299-7"><a href="#cb299-7"></a>    <span class="co"># Get the last candidate and remove it from the list</span></span>
<span id="cb299-8"><a href="#cb299-8"></a>    node <span class="op">=</span> candidates.pop()</span>
<span id="cb299-9"><a href="#cb299-9"></a></span>
<span id="cb299-10"><a href="#cb299-10"></a>    <span class="co"># Get the distance between obj and the candidate</span></span>
<span id="cb299-11"><a href="#cb299-11"></a>    distance <span class="op">=</span> node._get_dist(obj)</span>
<span id="cb299-12"><a href="#cb299-12"></a></span>
<span id="cb299-13"><a href="#cb299-13"></a>    <span class="co"># If distance is ok, then you can fill the result</span></span>
<span id="cb299-14"><a href="#cb299-14"></a>    <span class="cf">if</span> distance <span class="op">&lt;=</span> max_dist <span class="kw">and</span> distance <span class="op">&gt;=</span> min_dist:</span>
<span id="cb299-15"><a href="#cb299-15"></a>        result.extend(node._values)</span>
<span id="cb299-16"><a href="#cb299-16"></a></span>
<span id="cb299-17"><a href="#cb299-17"></a>    <span class="co"># Add the children of the candidate in the candidate&#39;s list</span></span>
<span id="cb299-18"><a href="#cb299-18"></a>    <span class="co"># so the loop will keep running until it will have looked</span></span>
<span id="cb299-19"><a href="#cb299-19"></a>    <span class="co"># at all the children of the children of the children, etc. of the candidate</span></span>
<span id="cb299-20"><a href="#cb299-20"></a>    candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))</span>
<span id="cb299-21"><a href="#cb299-21"></a></span>
<span id="cb299-22"><a href="#cb299-22"></a><span class="cf">return</span> result</span></code></pre></div>
<p>This code contains several smart parts:</p>
<ul>
<li>
<p>
The loop iterates on a list, but the list expands while the loop is being iterated :-) It’s a concise way to go through all these nested data even if it’s a bit dangerous since you can end up with an infinite loop. In this case, <code>candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))</code> exhaust all the values of the generator, but <code>while</code> keeps creating new generator objects which will produce different values from the previous ones since it’s not applied on the same node.
</p>
</li>
<li>
<p>
The <code>extend()</code> method is a list object method that expects an iterable and adds its values to the list.
</p>
</li>
</ul>
<p>Usually we pass a list to it:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb300-1"><a href="#cb300-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb300-2"><a href="#cb300-2"></a><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb300-3"><a href="#cb300-3"></a><span class="op">&gt;&gt;&gt;</span> a.extend(b)</span>
<span id="cb300-4"><a href="#cb300-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(a)</span>
<span id="cb300-5"><a href="#cb300-5"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span></code></pre></div>
<p>But in your code, it gets a generator, which is good because:</p>
<ol>
<li>
You don’t need to read the values twice.
</li>
<li>
You may have a lot of children and you don’t want them all stored in memory.
</li>
</ol>
<p>And it works because Python does not care if the argument of a method is a list or not. Python expects iterables so it will work with strings, lists, tuples, and generators! This is called duck typing and is one of the reasons why Python is so cool. But this is another story, for another question…</p>
<p>You can stop here, or read a little bit to see an advanced use of a generator:</p>
<h5>
Controlling a generator exhaustion
</h2>
<div class="sourceCode" id="cb301"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb301-1"><a href="#cb301-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Bank(): <span class="co"># Let&#39;s create a bank, building ATMs</span></span>
<span id="cb301-2"><a href="#cb301-2"></a>...    crisis <span class="op">=</span> <span class="va">False</span></span>
<span id="cb301-3"><a href="#cb301-3"></a>...    <span class="kw">def</span> create_atm(<span class="va">self</span>):</span>
<span id="cb301-4"><a href="#cb301-4"></a>...        <span class="cf">while</span> <span class="kw">not</span> <span class="va">self</span>.crisis:</span>
<span id="cb301-5"><a href="#cb301-5"></a>...            <span class="cf">yield</span> <span class="st">&quot;$100&quot;</span></span>
<span id="cb301-6"><a href="#cb301-6"></a><span class="op">&gt;&gt;&gt;</span> hsbc <span class="op">=</span> Bank() <span class="co"># When everything&#39;s ok the ATM gives you as much as you want</span></span>
<span id="cb301-7"><a href="#cb301-7"></a><span class="op">&gt;&gt;&gt;</span> corner_street_atm <span class="op">=</span> hsbc.create_atm()</span>
<span id="cb301-8"><a href="#cb301-8"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</span>
<span id="cb301-9"><a href="#cb301-9"></a>$<span class="dv">100</span></span>
<span id="cb301-10"><a href="#cb301-10"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</span>
<span id="cb301-11"><a href="#cb301-11"></a>$<span class="dv">100</span></span>
<span id="cb301-12"><a href="#cb301-12"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>([corner_street_atm.<span class="bu">next</span>() <span class="cf">for</span> cash <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)])</span>
<span id="cb301-13"><a href="#cb301-13"></a>[<span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>, <span class="st">&#39;$100&#39;</span>]</span>
<span id="cb301-14"><a href="#cb301-14"></a><span class="op">&gt;&gt;&gt;</span> hsbc.crisis <span class="op">=</span> <span class="va">True</span> <span class="co"># Crisis is coming, no more money!</span></span>
<span id="cb301-15"><a href="#cb301-15"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</span>
<span id="cb301-16"><a href="#cb301-16"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;exceptions.StopIteration&#39;</span><span class="op">&gt;</span></span>
<span id="cb301-17"><a href="#cb301-17"></a><span class="op">&gt;&gt;&gt;</span> wall_street_atm <span class="op">=</span> hsbc.create_atm() <span class="co"># It&#39;s even true for new ATMs</span></span>
<span id="cb301-18"><a href="#cb301-18"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(wall_street_atm.<span class="bu">next</span>())</span>
<span id="cb301-19"><a href="#cb301-19"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;exceptions.StopIteration&#39;</span><span class="op">&gt;</span></span>
<span id="cb301-20"><a href="#cb301-20"></a><span class="op">&gt;&gt;&gt;</span> hsbc.crisis <span class="op">=</span> <span class="va">False</span> <span class="co"># The trouble is, even post-crisis the ATM remains empty</span></span>
<span id="cb301-21"><a href="#cb301-21"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(corner_street_atm.<span class="bu">next</span>())</span>
<span id="cb301-22"><a href="#cb301-22"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;exceptions.StopIteration&#39;</span><span class="op">&gt;</span></span>
<span id="cb301-23"><a href="#cb301-23"></a><span class="op">&gt;&gt;&gt;</span> brand_new_atm <span class="op">=</span> hsbc.create_atm() <span class="co"># Build a new one to get back in business</span></span>
<span id="cb301-24"><a href="#cb301-24"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> cash <span class="kw">in</span> brand_new_atm:</span>
<span id="cb301-25"><a href="#cb301-25"></a>...    <span class="bu">print</span> cash</span>
<span id="cb301-26"><a href="#cb301-26"></a>$<span class="dv">100</span></span>
<span id="cb301-27"><a href="#cb301-27"></a>$<span class="dv">100</span></span>
<span id="cb301-28"><a href="#cb301-28"></a>$<span class="dv">100</span></span>
<span id="cb301-29"><a href="#cb301-29"></a>$<span class="dv">100</span></span>
<span id="cb301-30"><a href="#cb301-30"></a>$<span class="dv">100</span></span>
<span id="cb301-31"><a href="#cb301-31"></a>$<span class="dv">100</span></span>
<span id="cb301-32"><a href="#cb301-32"></a>$<span class="dv">100</span></span>
<span id="cb301-33"><a href="#cb301-33"></a>$<span class="dv">100</span></span>
<span id="cb301-34"><a href="#cb301-34"></a>$<span class="dv">100</span></span>
<span id="cb301-35"><a href="#cb301-35"></a>...</span></code></pre></div>
<p><strong>Note:</strong> For Python 3, use<code>print(corner_street_atm.__next__())</code> or <code>print(next(corner_street_atm))</code></p>
<p>It can be useful for various things like controlling access to a resource.</p>
<h5>
Itertools, your best friend
</h2>
<p>
The itertools module contains special functions to manipulate iterables. Ever wish to duplicate a generator? Chain two generators? Group values in a nested list with a one-liner? <code>Map / Zip</code> without creating another list?
</p>
<p>Then just <code>import itertools</code>.</p>
<p>An example? Let’s see the possible orders of arrival for a four-horse race:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb302-1"><a href="#cb302-1"></a><span class="op">&gt;&gt;&gt;</span> horses <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb302-2"><a href="#cb302-2"></a><span class="op">&gt;&gt;&gt;</span> races <span class="op">=</span> itertools.permutations(horses)</span>
<span id="cb302-3"><a href="#cb302-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(races)</span>
<span id="cb302-4"><a href="#cb302-4"></a><span class="op">&lt;</span>itertools.permutations <span class="bu">object</span> at <span class="bn">0xb754f1dc</span><span class="op">&gt;</span></span>
<span id="cb302-5"><a href="#cb302-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="bu">list</span>(itertools.permutations(horses)))</span>
<span id="cb302-6"><a href="#cb302-6"></a>[(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb302-7"><a href="#cb302-7"></a> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>),</span>
<span id="cb302-8"><a href="#cb302-8"></a> (<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb302-9"><a href="#cb302-9"></a> (<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>),</span>
<span id="cb302-10"><a href="#cb302-10"></a> (<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb302-11"><a href="#cb302-11"></a> (<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>),</span>
<span id="cb302-12"><a href="#cb302-12"></a> (<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb302-13"><a href="#cb302-13"></a> (<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>),</span>
<span id="cb302-14"><a href="#cb302-14"></a> (<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>),</span>
<span id="cb302-15"><a href="#cb302-15"></a> (<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>),</span>
<span id="cb302-16"><a href="#cb302-16"></a> (<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb302-17"><a href="#cb302-17"></a> (<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb302-18"><a href="#cb302-18"></a> (<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb302-19"><a href="#cb302-19"></a> (<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>),</span>
<span id="cb302-20"><a href="#cb302-20"></a> (<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>),</span>
<span id="cb302-21"><a href="#cb302-21"></a> (<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>),</span>
<span id="cb302-22"><a href="#cb302-22"></a> (<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb302-23"><a href="#cb302-23"></a> (<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>),</span>
<span id="cb302-24"><a href="#cb302-24"></a> (<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb302-25"><a href="#cb302-25"></a> (<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>),</span>
<span id="cb302-26"><a href="#cb302-26"></a> (<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb302-27"><a href="#cb302-27"></a> (<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb302-28"><a href="#cb302-28"></a> (<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb302-29"><a href="#cb302-29"></a> (<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>)]</span></code></pre></div>
<h5>
Understanding the inner mechanisms of iteration
</h2>
<p>
Iteration is a process implying iterables (implementing the <code>__iter__()</code> method) and iterators (implementing the <code>__next__()</code> method). Iterables are any objects you can get an iterator from. Iterators are objects that let you iterate on iterables.
</p>
<p>There is more about it in this article about <a href="http://effbot.org/zone/python-for-statement.htm" rel="noreferrer">how <code>for</code> loops work</a>.</p>
</section>
<section id="answer-2-score-1872" class="level4">
<h4>Answer 2 (score 1872)</h4>
<h5>
Shortcut to understanding <code>yield</code>
</h2>
<p>When you see a function with <code>yield</code> statements, apply this easy trick to understand what will happen:</p>
<ol>
<li>
Insert a line <code>result = []</code> at the start of the function.
</li>
<li>
Replace each <code>yield expr</code> with <code>result.append(expr)</code>.
</li>
<li>
Insert a line <code>return result</code> at the bottom of the function.
</li>
<li>
Yay - no more <code>yield</code> statements! Read and figure out code.
</li>
<li>
Compare function to original definition.
</li>
</ol>
<p>This trick may give you an idea of the logic behind the function, but what actually happens with <code>yield</code> is significantly different that what happens in the list based approach. In many cases the yield approach will be a lot more memory efficient and faster too. In other cases this trick will get you stuck in an infinite loop, even though the original function works just fine. Read on to learn more…</p>
<h5>
Don’t confuse your Iterables, Iterators and Generators
</h2>
<p>First, the <strong>iterator protocol</strong> - when you write</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb303-1"><a href="#cb303-1"></a><span class="cf">for</span> x <span class="kw">in</span> mylist:</span>
<span id="cb303-2"><a href="#cb303-2"></a>    ...loop body...</span></code></pre></div>
<p>Python performs the following two steps:</p>
<ol>
<li>
<p>
Gets an iterator for <code>mylist</code>:
</p>
<p>Call <code>iter(mylist)</code> -&gt; this returns an object with a <code>next()</code> method (or <code>__next__()</code> in Python 3).</p>
[This is the step most people forget to tell you about]
</li>
<li>
<p>
Uses the iterator to loop over items:
</p>
Keep calling the <code>next()</code> method on the iterator returned from step 1. The return value from <code>next()</code> is assigned to <code>x</code> and the loop body is executed. If an exception <code>StopIteration</code> is raised from within <code>next()</code>, it means there are no more values in the iterator and the loop is exited.
</li>
</ol>
<p>The truth is Python performs the above two steps anytime it wants to <em>loop over</em> the contents of an object - so it could be a for loop, but it could also be code like <code>otherlist.extend(mylist)</code> (where <code>otherlist</code> is a Python list).</p>
<p>Here <code>mylist</code> is an <em>iterable</em> because it implements the iterator protocol. In a user defined class, you can implement the <code>__iter__()</code> method to make instances of your class iterable. This method should return an <em>iterator</em>. An iterator is an object with a <code>next()</code> method. It is possible to implement both <code>__iter__()</code> and <code>next()</code> on the same class, and have <code>__iter__()</code> return <code>self</code>. This will work for simple cases, but not when you want two iterators looping over the same object at the same time.</p>
<p>So that’s the iterator protocol, many objects implement this protocol:</p>
<ol>
<li>
Built-in lists, dictionaries, tuples, sets, files.
</li>
<li>
User defined classes that implement <code>__iter__()</code>.
</li>
<li>
Generators.
</li>
</ol>
<p>Note that a <code>for</code> loop doesn’t know what kind of object it’s dealing with - it just follows the iterator protocol, and is happy to get item after item as it calls <code>next()</code>. Built-in lists return their items one by one, dictionaries return the <em>keys</em> one by one, files return the <em>lines</em> one by one, etc. And generators return… well that’s where <code>yield</code> comes in:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb304-1"><a href="#cb304-1"></a><span class="kw">def</span> f123():</span>
<span id="cb304-2"><a href="#cb304-2"></a>    <span class="cf">yield</span> <span class="dv">1</span></span>
<span id="cb304-3"><a href="#cb304-3"></a>    <span class="cf">yield</span> <span class="dv">2</span></span>
<span id="cb304-4"><a href="#cb304-4"></a>    <span class="cf">yield</span> <span class="dv">3</span></span>
<span id="cb304-5"><a href="#cb304-5"></a></span>
<span id="cb304-6"><a href="#cb304-6"></a><span class="cf">for</span> item <span class="kw">in</span> f123():</span>
<span id="cb304-7"><a href="#cb304-7"></a>    <span class="bu">print</span> item</span></code></pre></div>
<p>Instead of <code>yield</code> statements, if you had three <code>return</code> statements in <code>f123()</code> only the first would get executed, and the function would exit. But <code>f123()</code> is no ordinary function. When <code>f123()</code> is called, it <em>does not</em> return any of the values in the yield statements! It returns a generator object. Also, the function does not really exit - it goes into a suspended state. When the <code>for</code> loop tries to loop over the generator object, the function resumes from its suspended state at the very next line after the <code>yield</code> it previously returned from, executes the next line of code, in this case a <code>yield</code> statement, and returns that as the next item. This happens until the function exits, at which point the generator raises <code>StopIteration</code>, and the loop exits.</p>
<p>So the generator object is sort of like an adapter - at one end it exhibits the iterator protocol, by exposing <code>__iter__()</code> and <code>next()</code> methods to keep the <code>for</code> loop happy. At the other end however, it runs the function just enough to get the next value out of it, and puts it back in suspended mode.</p>
<h5>
Why Use Generators?
</h2>
<p>Usually you can write code that doesn’t use generators but implements the same logic. One option is to use the temporary list ‘trick’ I mentioned before. That will not work in all cases, for e.g. if you have infinite loops, or it may make inefficient use of memory when you have a really long list. The other approach is to implement a new iterable class <code>SomethingIter</code> that keeps state in instance members and performs the next logical step in it’s <code>next()</code> (or <code>__next__()</code> in Python 3) method. Depending on the logic, the code inside the <code>next()</code> method may end up looking very complex and be prone to bugs. Here generators provide a clean and easy solution.</p>
</section>
<section id="answer-3-score-504" class="level4">
<h4>Answer 3 (score 504)</h4>
<p>Think of it this way:</p>
<p>An iterator is just a fancy sounding term for an object that has a <code>next()</code> method. So a yield-ed function ends up being something like this:</p>
<p>Original version:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb305-1"><a href="#cb305-1"></a><span class="kw">def</span> some_function():</span>
<span id="cb305-2"><a href="#cb305-2"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">4</span>):</span>
<span id="cb305-3"><a href="#cb305-3"></a>        <span class="cf">yield</span> i</span>
<span id="cb305-4"><a href="#cb305-4"></a></span>
<span id="cb305-5"><a href="#cb305-5"></a><span class="cf">for</span> i <span class="kw">in</span> some_function():</span>
<span id="cb305-6"><a href="#cb305-6"></a>    <span class="bu">print</span> i</span></code></pre></div>
<p>This is basically what the Python interpreter does with the above code:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb306-1"><a href="#cb306-1"></a><span class="kw">class</span> it:</span>
<span id="cb306-2"><a href="#cb306-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb306-3"><a href="#cb306-3"></a>        <span class="co"># Start at -1 so that we get 0 when we add 1 below.</span></span>
<span id="cb306-4"><a href="#cb306-4"></a>        <span class="va">self</span>.count <span class="op">=</span> <span class="dv">-1</span></span>
<span id="cb306-5"><a href="#cb306-5"></a></span>
<span id="cb306-6"><a href="#cb306-6"></a>    <span class="co"># The __iter__ method will be called once by the &#39;for&#39; loop.</span></span>
<span id="cb306-7"><a href="#cb306-7"></a>    <span class="co"># The rest of the magic happens on the object returned by this method.</span></span>
<span id="cb306-8"><a href="#cb306-8"></a>    <span class="co"># In this case it is the object itself.</span></span>
<span id="cb306-9"><a href="#cb306-9"></a>    <span class="kw">def</span> <span class="fu">__iter__</span>(<span class="va">self</span>):</span>
<span id="cb306-10"><a href="#cb306-10"></a>        <span class="cf">return</span> <span class="va">self</span></span>
<span id="cb306-11"><a href="#cb306-11"></a></span>
<span id="cb306-12"><a href="#cb306-12"></a>    <span class="co"># The next method will be called repeatedly by the &#39;for&#39; loop</span></span>
<span id="cb306-13"><a href="#cb306-13"></a>    <span class="co"># until it raises StopIteration.</span></span>
<span id="cb306-14"><a href="#cb306-14"></a>    <span class="kw">def</span> <span class="bu">next</span>(<span class="va">self</span>):</span>
<span id="cb306-15"><a href="#cb306-15"></a>        <span class="va">self</span>.count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb306-16"><a href="#cb306-16"></a>        <span class="cf">if</span> <span class="va">self</span>.count <span class="op">&lt;</span> <span class="dv">4</span>:</span>
<span id="cb306-17"><a href="#cb306-17"></a>            <span class="cf">return</span> <span class="va">self</span>.count</span>
<span id="cb306-18"><a href="#cb306-18"></a>        <span class="cf">else</span>:</span>
<span id="cb306-19"><a href="#cb306-19"></a>            <span class="co"># A StopIteration exception is raised</span></span>
<span id="cb306-20"><a href="#cb306-20"></a>            <span class="co"># to signal that the iterator is done.</span></span>
<span id="cb306-21"><a href="#cb306-21"></a>            <span class="co"># This is caught implicitly by the &#39;for&#39; loop.</span></span>
<span id="cb306-22"><a href="#cb306-22"></a>            <span class="cf">raise</span> <span class="pp">StopIteration</span></span>
<span id="cb306-23"><a href="#cb306-23"></a></span>
<span id="cb306-24"><a href="#cb306-24"></a><span class="kw">def</span> some_func():</span>
<span id="cb306-25"><a href="#cb306-25"></a>    <span class="cf">return</span> it()</span>
<span id="cb306-26"><a href="#cb306-26"></a></span>
<span id="cb306-27"><a href="#cb306-27"></a><span class="cf">for</span> i <span class="kw">in</span> some_func():</span>
<span id="cb306-28"><a href="#cb306-28"></a>    <span class="bu">print</span> i</span></code></pre></div>
<p>For more insight as to what’s happening behind the scenes, the <code>for</code> loop can be rewritten to this:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb307-1"><a href="#cb307-1"></a>iterator <span class="op">=</span> some_func()</span>
<span id="cb307-2"><a href="#cb307-2"></a><span class="cf">try</span>:</span>
<span id="cb307-3"><a href="#cb307-3"></a>    <span class="cf">while</span> <span class="dv">1</span>:</span>
<span id="cb307-4"><a href="#cb307-4"></a>        <span class="bu">print</span> iterator.<span class="bu">next</span>()</span>
<span id="cb307-5"><a href="#cb307-5"></a><span class="cf">except</span> <span class="pp">StopIteration</span>:</span>
<span id="cb307-6"><a href="#cb307-6"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>Does that make more sense or just confuse you more? :)</p>
<p>I should note that this <em>is</em> an oversimplification for illustrative purposes. :)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-define-a-two-dimensional-array-in-python-score-2033452-in-2017" class="level3">
<h3>36: How to define a two-dimensional array in Python (score <a href="https://stackoverflow.com/q/6667201.html">2033452</a> in 2017)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I want to define a two-dimensional array without an initialized length like this:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb308-1"><a href="#cb308-1"></a>Matrix <span class="op">=</span> [][]</span></code></pre></div>
<p>but it does not work…</p>
<p>I’ve tried the code below, but it is wrong too:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb309-1"><a href="#cb309-1"></a>Matrix <span class="op">=</span> [<span class="dv">5</span>][<span class="dv">5</span>]</span></code></pre></div>
<p><strong><em>Error:</em></strong></p>
<div class="sourceCode" id="cb310"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb310-1"><a href="#cb310-1"></a>Traceback ...</span>
<span id="cb310-2"><a href="#cb310-2"></a></span>
<span id="cb310-3"><a href="#cb310-3"></a><span class="pp">IndexError</span>: <span class="bu">list</span> index out of <span class="bu">range</span></span></code></pre></div>
<p>What is my mistake?</p>
</section>
<section id="answer-accepted-score-916" class="level4">
<h4>Answer accepted (score 916)</h4>
<p>
You’re technically trying to index an uninitialized array. You have to first initialize the outer list with lists before adding items; Python calls this “list comprehension”.
</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb311-1"><a href="#cb311-1"></a><span class="co"># Creates a list containing 5 lists, each of 8 items, all set to 0</span></span>
<span id="cb311-2"><a href="#cb311-2"></a>w, h <span class="op">=</span> <span class="dv">8</span>, <span class="dv">5</span><span class="op">;</span></span>
<span id="cb311-3"><a href="#cb311-3"></a>Matrix <span class="op">=</span> [[<span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(w)] <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(h)] </span></code></pre></div>
<h5>
You can now add items to the list:
</h1>
<div class="sourceCode" id="cb312"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb312-1"><a href="#cb312-1"></a>Matrix[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb312-2"><a href="#cb312-2"></a>Matrix[<span class="dv">6</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">3</span> <span class="co"># error! range... </span></span>
<span id="cb312-3"><a href="#cb312-3"></a>Matrix[<span class="dv">0</span>][<span class="dv">6</span>] <span class="op">=</span> <span class="dv">3</span> <span class="co"># valid</span></span></code></pre></div>
<p>Note that the matrix is “y” address major, in other words, the “y index” comes before the “x index”.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb313-1"><a href="#cb313-1"></a><span class="bu">print</span> Matrix[<span class="dv">0</span>][<span class="dv">0</span>] <span class="co"># prints 1</span></span>
<span id="cb313-2"><a href="#cb313-2"></a>x, y <span class="op">=</span> <span class="dv">0</span>, <span class="dv">6</span> </span>
<span id="cb313-3"><a href="#cb313-3"></a><span class="bu">print</span> Matrix[x][y] <span class="co"># prints 3; be careful with indexing! </span></span></code></pre></div>
<p>Although you can name them as you wish, I look at it this way to avoid some confusion that could arise with the indexing, if you use “x” for both the inner and outer lists, and want a non-square Matrix.</p>
</section>
<section id="answer-2-score-373" class="level4">
<h4>Answer 2 (score 373)</h4>
<p>If you really want a matrix, you might be better off using <code>numpy</code>. Matrix operations in <code>numpy</code> most often use an array type with two dimensions. There are many ways to create a new array; one of the most useful is the <code>zeros</code> function, which takes a shape parameter and returns an array of the given shape, with the values initialized to zero:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb314-1"><a href="#cb314-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> numpy</span>
<span id="cb314-2"><a href="#cb314-2"></a><span class="op">&gt;&gt;&gt;</span> numpy.zeros((<span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb314-3"><a href="#cb314-3"></a>array([[ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb314-4"><a href="#cb314-4"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb314-5"><a href="#cb314-5"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb314-6"><a href="#cb314-6"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>],</span>
<span id="cb314-7"><a href="#cb314-7"></a>       [ <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>,  <span class="fl">0.</span>]])</span></code></pre></div>
<p><code>numpy</code> provides a <code>matrix</code> type as well. It’s less commonly used, and some people <a href="https://stackoverflow.com/a/3892639/577088">recommend against</a> using it. But it’s useful for people coming to <code>numpy</code> from Matlab, and in some other contexts. I thought I’d include it since we’re talking about matrices!</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb315-1"><a href="#cb315-1"></a><span class="op">&gt;&gt;&gt;</span> numpy.matrix([[<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]])</span>
<span id="cb315-2"><a href="#cb315-2"></a>matrix([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb315-3"><a href="#cb315-3"></a>        [<span class="dv">3</span>, <span class="dv">4</span>]])</span></code></pre></div>
<p>Here are some other ways to create 2-d arrays and matrices (with output removed for compactness):</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb316-1"><a href="#cb316-1"></a>numpy.matrix(<span class="st">&#39;1 2; 3 4&#39;</span>)                 <span class="co"># use Matlab-style syntax</span></span>
<span id="cb316-2"><a href="#cb316-2"></a>numpy.arange(<span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))         <span class="co"># create a 1-d range and reshape</span></span>
<span id="cb316-3"><a href="#cb316-3"></a>numpy.array(<span class="bu">range</span>(<span class="dv">25</span>)).reshape((<span class="dv">5</span>, <span class="dv">5</span>))   <span class="co"># pass a Python range and reshape</span></span>
<span id="cb316-4"><a href="#cb316-4"></a>numpy.array([<span class="dv">5</span>] <span class="op">*</span> <span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))    <span class="co"># pass a Python list and reshape</span></span>
<span id="cb316-5"><a href="#cb316-5"></a>numpy.empty((<span class="dv">5</span>, <span class="dv">5</span>))                      <span class="co"># allocate, but don&#39;t initialize</span></span>
<span id="cb316-6"><a href="#cb316-6"></a>numpy.ones((<span class="dv">5</span>, <span class="dv">5</span>))                       <span class="co"># initialize with ones</span></span>
<span id="cb316-7"><a href="#cb316-7"></a>numpy.ndarray((<span class="dv">5</span>, <span class="dv">5</span>))                    <span class="co"># use the low-level constructor</span></span></code></pre></div>
</section>
<section id="answer-3-score-310" class="level4">
<h4>Answer 3 (score 310)</h4>
<p>Here is a shorter notation for initializing a list of lists:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb317-1"><a href="#cb317-1"></a>matrix <span class="op">=</span> [[<span class="dv">0</span>]<span class="op">*</span><span class="dv">5</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)]</span></code></pre></div>
<p>Unfortunately shortening this to something like <code>5*[5*[0]]</code> doesn’t really work because you end up with 5 copies of the same list, so when you modify one of them they all change, for example:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb318-1"><a href="#cb318-1"></a><span class="op">&gt;&gt;&gt;</span> matrix <span class="op">=</span> <span class="dv">5</span><span class="op">*</span>[<span class="dv">5</span><span class="op">*</span>[<span class="dv">0</span>]]</span>
<span id="cb318-2"><a href="#cb318-2"></a><span class="op">&gt;&gt;&gt;</span> matrix</span>
<span id="cb318-3"><a href="#cb318-3"></a>[[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]]</span>
<span id="cb318-4"><a href="#cb318-4"></a><span class="op">&gt;&gt;&gt;</span> matrix[<span class="dv">4</span>][<span class="dv">4</span>] <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb318-5"><a href="#cb318-5"></a><span class="op">&gt;&gt;&gt;</span> matrix</span>
<span id="cb318-6"><a href="#cb318-6"></a>[[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>]]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-install-pip-on-macos-or-os-x-score-1952317-in-2017" class="level3">
<h3>37: How do I install pip on macOS or OS X? (score <a href="https://stackoverflow.com/q/17271319.html">1952317</a> in 2017)</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>I spent most of the day yesterday searching for a clear answer for installing <code>pip</code> (package manager for Python). I can’t find a good solution.</p>
<p>How do I install it?</p>
</section>
<section id="answer-2-score-3197" class="level4">
<h4>Answer 2 (score 3197)</h4>
<div class="sourceCode" id="cb319"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb319-1"><a href="#cb319-1"></a>easy_install pip</span></code></pre></div>
<hr>
<p>If you need admin privileges to run this, try:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb320-1"><a href="#cb320-1"></a>sudo easy_install pip</span></code></pre></div>
<hr>
<p><strong>UPDATE (Jan 2019):</strong></p>
<p><code>easy_install</code> has been <a href="https://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer">deprecated</a>. Please use <a href="https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py" rel="noreferrer"><code>get-pip.py</code></a> instead.</p>
</section>
<section id="answer-3-score-542" class="level4">
<h4>Answer 3 (score 542)</h4>
<blockquote>
⚡️ <strong>TL;DR</strong> — One line solution.
</blockquote>
<p>All you have to do is:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb321-1"><a href="#cb321-1"></a>sudo easy_install pip</span></code></pre></div>
<blockquote>
<strong>2019</strong>: ⚠️<code>easy_install</code> has been <a href="https://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer">deprecated</a>. Check <strong>Method #2</strong> below for preferred installation!
</blockquote>
<p><em>I made a gif, coz. why not?</em></p>
<p><a href="https://ahmadawais.com/install-pip-macos-os-x-python/" rel="noreferrer"><img src="https://on.ahmda.ws/rsgI/c" alt="Install PIP on Mac"></a></p>
<p><strong>Details:</strong></p>
<blockquote>
⚡️ OK, I read the solutions given above, but here’s an <strong>EASY</strong> solution to install <code>pip</code>.
</blockquote>
<p>MacOS comes with <code>Python</code> installed. But to make sure that you have <code>Python</code> installed open the terminal and run the following command.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb322-1"><a href="#cb322-1"></a>python <span class="op">--</span>version</span></code></pre></div>
<p>If this command returns a version number that means <code>Python</code> exists. Which also means that you already have access to <code>easy_install</code> considering you are using <code>macOS/OSX</code>.</p>
<p>ℹ️ Now, all you have to do is run the following command.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb323-1"><a href="#cb323-1"></a>sudo easy_install pip</span></code></pre></div>
<p>After that, <code>pip</code> will be installed and you’ll be able to use it for installing other packages.</p>
<p>Let me know if you have any problems installing <code>pip</code> this way.</p>
<p>Cheers!</p>
<p>P.S. I ended up blogging a post about it. <a href="https://ahmadawais.com/install-pip-macos-os-x-python/" rel="noreferrer">QuickTip: How Do I Install pip on macOS or OS X?</a></p>
<hr>
<blockquote>
✅ <strong>UPDATE (Jan 2019): METHOD #2: Two line solution —</strong>
</blockquote>
<p><code>easy_install</code> has been <a href="https://setuptools.readthedocs.io/en/latest/easy_install.html" rel="noreferrer">deprecated</a>. Please use <a href="https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py" rel="noreferrer"><code>get-pip.py</code></a> instead.</p>
<p>First of all download the <code>get-pip</code> file</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb324-1"><a href="#cb324-1"></a>curl https:<span class="op">//</span>bootstrap.pypa.io<span class="op">/</span>get<span class="op">-</span>pip.py <span class="op">-</span>o get<span class="op">-</span>pip.py</span></code></pre></div>
<p>Now run this file to install <code>pip</code></p>
<div class="sourceCode" id="cb325"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb325-1"><a href="#cb325-1"></a>python get<span class="op">-</span>pip.py</span></code></pre></div>
<p>That should do it.</p>
<p>Another gif you said? Here ya go!</p>
<p><a href="https://i.stack.imgur.com/UXG0G.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/UXG0G.gif" alt="Manual install of pip"></a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="convert-bytes-to-a-string-score-1932306-in-2019" class="level3">
<h3>38: Convert bytes to a string (score <a href="https://stackoverflow.com/q/606191.html">1932306</a> in 2019)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>I’m using this code to get standard output from an external program:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb326-1"><a href="#cb326-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> subprocess <span class="im">import</span> <span class="op">*</span></span>
<span id="cb326-2"><a href="#cb326-2"></a><span class="op">&gt;&gt;&gt;</span> command_stdout <span class="op">=</span> Popen([<span class="st">&#39;ls&#39;</span>, <span class="st">&#39;-l&#39;</span>], stdout<span class="op">=</span>PIPE).communicate()[<span class="dv">0</span>]</span></code></pre></div>
<p>The communicate() method returns an array of bytes:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb327-1"><a href="#cb327-1"></a><span class="op">&gt;&gt;&gt;</span> command_stdout</span>
<span id="cb327-2"><a href="#cb327-2"></a>b<span class="st">&#39;total 0</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2</span><span class="ch">\n</span><span class="st">&#39;</span></span></code></pre></div>
<p>However, I’d like to work with the output as a normal Python string. So that I could print it like this:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb328-1"><a href="#cb328-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(command_stdout)</span>
<span id="cb328-2"><a href="#cb328-2"></a><span class="op">-</span>rw<span class="op">-</span>rw<span class="op">-</span>r<span class="op">--</span> <span class="dv">1</span> thomas thomas <span class="dv">0</span> Mar  <span class="dv">3</span> <span class="dv">07</span>:<span class="dv">03</span> file1</span>
<span id="cb328-3"><a href="#cb328-3"></a><span class="op">-</span>rw<span class="op">-</span>rw<span class="op">-</span>r<span class="op">--</span> <span class="dv">1</span> thomas thomas <span class="dv">0</span> Mar  <span class="dv">3</span> <span class="dv">07</span>:<span class="dv">03</span> file2</span></code></pre></div>
<p>I thought that’s what the <a href="http://docs.python.org/3.0/library/binascii.html?highlight=b2a#binascii.b2a_qp" rel="noreferrer">binascii.b2a_qp()</a> method is for, but when I tried it, I got the same byte array again:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb329-1"><a href="#cb329-1"></a><span class="op">&gt;&gt;&gt;</span> binascii.b2a_qp(command_stdout)</span>
<span id="cb329-2"><a href="#cb329-2"></a>b<span class="st">&#39;total 0</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1</span><span class="ch">\n</span><span class="st">-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2</span><span class="ch">\n</span><span class="st">&#39;</span></span></code></pre></div>
<p>How do I convert the bytes value back to string? I mean, using the “batteries” instead of doing it manually. And I’d like it to be OK with Python 3.</p>
</section>
<section id="answer-accepted-score-3076" class="level4">
<h4>Answer accepted (score 3076)</h4>
<p>You need to decode the bytes object to produce a string:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb330-1"><a href="#cb330-1"></a><span class="op">&gt;&gt;&gt;</span> b<span class="st">&quot;abcde&quot;</span></span>
<span id="cb330-2"><a href="#cb330-2"></a>b<span class="st">&#39;abcde&#39;</span></span>
<span id="cb330-3"><a href="#cb330-3"></a></span>
<span id="cb330-4"><a href="#cb330-4"></a><span class="co"># utf-8 is used here because it is a very common encoding, but you</span></span>
<span id="cb330-5"><a href="#cb330-5"></a><span class="co"># need to use the encoding your data is actually in.</span></span>
<span id="cb330-6"><a href="#cb330-6"></a><span class="op">&gt;&gt;&gt;</span> b<span class="st">&quot;abcde&quot;</span>.decode(<span class="st">&quot;utf-8&quot;</span>) </span>
<span id="cb330-7"><a href="#cb330-7"></a><span class="co">&#39;abcde&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-173" class="level4">
<h4>Answer 2 (score 173)</h4>
<p>You need to decode the byte string and turn it in to a character (Unicode) string.</p>
<p>On Python 2</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb331-1"><a href="#cb331-1"></a>encoding <span class="op">=</span> <span class="st">&#39;utf-8&#39;</span></span>
<span id="cb331-2"><a href="#cb331-2"></a><span class="co">&#39;hello&#39;</span>.decode(encoding)</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb332-1"><a href="#cb332-1"></a><span class="bu">unicode</span>(<span class="st">&#39;hello&#39;</span>, encoding)</span></code></pre></div>
<p>On Python 3</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb333-1"><a href="#cb333-1"></a>encoding <span class="op">=</span> <span class="st">&#39;utf-8&#39;</span></span>
<span id="cb333-2"><a href="#cb333-2"></a>b<span class="st">&#39;hello&#39;</span>.decode(encoding)</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb334-1"><a href="#cb334-1"></a><span class="bu">str</span>(b<span class="st">&#39;hello&#39;</span>, encoding)</span></code></pre></div>
</section>
<section id="answer-3-score-159" class="level4">
<h4>Answer 3 (score 159)</h4>
<p>I think this way is easy:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb335-1"><a href="#cb335-1"></a>bytes_data <span class="op">=</span> [<span class="dv">112</span>, <span class="dv">52</span>, <span class="dv">52</span>]</span>
<span id="cb335-2"><a href="#cb335-2"></a><span class="co">&quot;&quot;</span>.join(<span class="bu">map</span>(<span class="bu">chr</span>, bytes_data))</span>
<span id="cb335-3"><a href="#cb335-3"></a><span class="op">&gt;&gt;</span> p44</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="correct-way-to-write-line-to-file-score-1928059-in-2017" class="level3">
<h3>39: Correct way to write line to file? (score <a href="https://stackoverflow.com/q/6159900.html">1928059</a> in 2017)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>I’m used to doing <code>print &amp;gt;&amp;gt;f, "hi there"</code></p>
<p>However, it seems that <code>print &amp;gt;&amp;gt;</code> is getting deprecated. What is the recommended way to do the line above?</p>
<p>
<b>Update</b>: Regarding all those answers with <code>"\n"</code>…is this universal or Unix-specific? IE, should I be doing <code>"\r\n"</code> on Windows?
</p>
</section>
<section id="answer-accepted-score-991" class="level4">
<h4>Answer accepted (score 991)</h4>
<p>This should be as simple as:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb336-1"><a href="#cb336-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;somefile.txt&#39;</span>, <span class="st">&#39;a&#39;</span>) <span class="im">as</span> the_file:</span>
<span id="cb336-2"><a href="#cb336-2"></a>    the_file.write(<span class="st">&#39;Hello</span><span class="ch">\n</span><span class="st">&#39;</span>)</span></code></pre></div>
<p>From The Documentation:</p>
<blockquote>
Do not use <code>os.linesep</code> as a line terminator when writing files opened in text mode (the default); use a single ‘’ instead, on all platforms.
</blockquote>
<p>Some useful reading:</p>
<ul>
<li>
<a href="http://docs.python.org/reference/compound_stmts.html#the-with-statement" rel="noreferrer">The <code>with</code> statement</a>
</li>
<li>
<p><a href="http://docs.python.org/library/functions.html?highlight=open#open" rel="noreferrer"><code>open()</code></a></p>
<ul>
<li>
‘a’ is for append, or use
</li>
<li>
‘w’ to write with truncation
</li>
</ul>
</li>
<li>
<a href="http://docs.python.org/library/os.html" rel="noreferrer"><code>os</code></a> (particularly <a href="http://docs.python.org/library/os.html?highlight=os.linesep#os.linesep" rel="noreferrer"><code>os.linesep</code></a>)
</li>
</ul>
</section>
<section id="answer-2-score-943" class="level4">
<h4>Answer 2 (score 943)</h4>
<p>You should use the <code>print()</code> function which is available since Python 2.6+</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb337-1"><a href="#cb337-1"></a><span class="im">from</span> __future__ <span class="im">import</span> print_function  <span class="co"># Only needed for Python 2</span></span>
<span id="cb337-2"><a href="#cb337-2"></a><span class="bu">print</span>(<span class="st">&quot;hi there&quot;</span>, <span class="bu">file</span><span class="op">=</span>f)</span></code></pre></div>
<p>For Python 3 you don’t need the <code>import</code>, since the <code>print()</code> function is the default.</p>
<p>The alternative would be to use:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb338-1"><a href="#cb338-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;myfile&#39;</span>, <span class="st">&#39;w&#39;</span>)</span>
<span id="cb338-2"><a href="#cb338-2"></a>f.write(<span class="st">&#39;hi there</span><span class="ch">\n</span><span class="st">&#39;</span>)  <span class="co"># python will convert \n to os.linesep</span></span>
<span id="cb338-3"><a href="#cb338-3"></a>f.close()  <span class="co"># you can omit in most cases as the destructor will call it</span></span></code></pre></div>
<p>Quoting from <a href="https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files">Python documentation</a> regarding newlines:</p>
<blockquote>
On output, if newline is None, any <code>'\n'</code> characters written are translated to the system default line separator, <code>os.linesep</code>. If newline is <code>''</code>, no translation takes place. If newline is any of the other legal values, any <code>'\n'</code> characters written are translated to the given string.
</blockquote>
</section>
<section id="answer-3-score-107" class="level4">
<h4>Answer 3 (score 107)</h4>
<p>The <a href="http://docs.python.org/tutorial/inputoutput.html" rel="noreferrer">python docs</a> recommend this way:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb339-1"><a href="#cb339-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;file_to_write&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb339-2"><a href="#cb339-2"></a>    f.write(<span class="st">&#39;file contents&#39;</span>)</span></code></pre></div>
<p>So this is the way I usually do it :)</p>
<p>Statement from <a href="http://docs.python.org/tutorial/inputoutput.html" rel="noreferrer">docs.python.org</a>:</p>
<blockquote>
<p>
It is good practice to use the <strong>‘with’</strong> keyword when dealing with file objects. This has the advantage that the file is properly closed after its suite finishes, even if an exception is raised on the way. It is also much shorter than writing equivalent try-finally blocks.
</p>
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="accessing-the-index-in-for-loops-score-1900009-in-2019" class="level3">
<h3>40: Accessing the index in ‘for’ loops? (score <a href="https://stackoverflow.com/q/522563.html">1900009</a> in 2019)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>How do I access the index in a <code>for</code> loop like the following?</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb340-1"><a href="#cb340-1"></a>ints <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">23</span>, <span class="dv">45</span>, <span class="dv">12</span>, <span class="dv">78</span>]</span>
<span id="cb340-2"><a href="#cb340-2"></a><span class="cf">for</span> i <span class="kw">in</span> ints:</span>
<span id="cb340-3"><a href="#cb340-3"></a>    <span class="bu">print</span>(<span class="st">&#39;item #</span><span class="sc">{}</span><span class="st"> = </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(???, i))</span></code></pre></div>
<p>I want to get this output:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb341-1"><a href="#cb341-1"></a>item <span class="co">#1 = 8</span></span>
<span id="cb341-2"><a href="#cb341-2"></a>item <span class="co">#2 = 23</span></span>
<span id="cb341-3"><a href="#cb341-3"></a>item <span class="co">#3 = 45</span></span>
<span id="cb341-4"><a href="#cb341-4"></a>item <span class="co">#4 = 12</span></span>
<span id="cb341-5"><a href="#cb341-5"></a>item <span class="co">#5 = 78</span></span></code></pre></div>
<p>When I loop through it using a <code>for</code> loop, how do I access the loop index, from 1 to 5 in this case?</p>
</section>
<section id="answer-accepted-score-5577" class="level4">
<h4>Answer accepted (score 5577)</h4>
<p>Using an additional state variable, such as an index variable (which you would normally use in languages such as C or PHP), is considered non-pythonic.</p>
<p>The better option is to use the built-in function <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="noreferrer" title="enumerate"><code>enumerate()</code></a>, available in both Python 2 and 3:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb342-1"><a href="#cb342-1"></a><span class="cf">for</span> idx, val <span class="kw">in</span> <span class="bu">enumerate</span>(ints):</span>
<span id="cb342-2"><a href="#cb342-2"></a>    <span class="bu">print</span>(idx, val)</span></code></pre></div>
<p>Check out <a href="https://www.python.org/dev/peps/pep-0279/" rel="noreferrer" title="PEP 279">PEP 279</a> for more.</p>
</section>
<section id="answer-2-score-700" class="level4">
<h4>Answer 2 (score 700)</h4>
<blockquote>
<h5>
Using a for loop, how do I access the loop index, from 1 to 5 in this case?
</h1>
</blockquote>
<p>Use <code>enumerate</code> to get the index with the element as you iterate:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb343-1"><a href="#cb343-1"></a><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(items):</span>
<span id="cb343-2"><a href="#cb343-2"></a>    <span class="bu">print</span>(index, item)</span></code></pre></div>
<p>And note that Python’s indexes start at zero, so you would get 0 to 4 with the above. If you want the count, 1 to 5, do this:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb344-1"><a href="#cb344-1"></a><span class="cf">for</span> count, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb344-2"><a href="#cb344-2"></a>    <span class="bu">print</span>(count, item)</span></code></pre></div>
<h5>
Unidiomatic control flow
</h1>
<p>What you are asking for is the Pythonic equivalent of the following, which is the algorithm most programmers of lower-level languages would use:</p>
<blockquote>
<div class="sourceCode" id="cb345"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb345-1"><a href="#cb345-1"></a>index <span class="op">=</span> <span class="dv">0</span>            <span class="co"># Python&#39;s indexing starts at zero</span></span>
<span id="cb345-2"><a href="#cb345-2"></a><span class="cf">for</span> item <span class="kw">in</span> items:   <span class="co"># Python&#39;s for loops are a &quot;for each&quot; loop </span></span>
<span id="cb345-3"><a href="#cb345-3"></a>    <span class="bu">print</span>(index, item)</span>
<span id="cb345-4"><a href="#cb345-4"></a>    index <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
</blockquote>
<p>Or in languages that do not have a for-each loop:</p>
<blockquote>
<div class="sourceCode" id="cb346"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb346-1"><a href="#cb346-1"></a>index <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb346-2"><a href="#cb346-2"></a><span class="cf">while</span> index <span class="op">&lt;</span> <span class="bu">len</span>(items):</span>
<span id="cb346-3"><a href="#cb346-3"></a>    <span class="bu">print</span>(index, items[index])</span>
<span id="cb346-4"><a href="#cb346-4"></a>    index <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
</blockquote>
<p>or sometimes more commonly (but unidiomatically) found in Python:</p>
<blockquote>
<div class="sourceCode" id="cb347"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb347-1"><a href="#cb347-1"></a><span class="cf">for</span> index <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(items)):</span>
<span id="cb347-2"><a href="#cb347-2"></a>    <span class="bu">print</span>(index, items[index])</span></code></pre></div>
</blockquote>
<h5>
Use the Enumerate Function
</h1>
<p>Python’s <a href="https://docs.python.org/2/library/functions.html#enumerate" rel="noreferrer"><code>enumerate</code> function</a> reduces the visual clutter by hiding the accounting for the indexes, and encapsulating the iterable into another iterable (an <code>enumerate</code> object) that yields a two-item tuple of the index and the item that the original iterable would provide. That looks like this:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb348-1"><a href="#cb348-1"></a><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">0</span>):   <span class="co"># default is zero</span></span>
<span id="cb348-2"><a href="#cb348-2"></a>    <span class="bu">print</span>(index, item)</span></code></pre></div>
<p>This code sample is fairly well the <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#index-item-2-enumerate" rel="noreferrer">canonical</a> example of the difference between code that is idiomatic of Python and code that is not. Idiomatic code is sophisticated (but not complicated) Python, written in the way that it was intended to be used. Idiomatic code is expected by the designers of the language, which means that usually this code is not just more readable, but also more efficient.</p>
<h5>
Getting a count
</h2>
<p>Even if you don’t need indexes as you go, but you need a count of the iterations (sometimes desirable) you can start with <code>1</code> and the final number will be your count.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb349-1"><a href="#cb349-1"></a><span class="cf">for</span> count, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">1</span>):   <span class="co"># default is zero</span></span>
<span id="cb349-2"><a href="#cb349-2"></a>    <span class="bu">print</span>(item)</span>
<span id="cb349-3"><a href="#cb349-3"></a></span>
<span id="cb349-4"><a href="#cb349-4"></a><span class="bu">print</span>(<span class="st">&#39;there were </span><span class="sc">{0}</span><span class="st"> items printed&#39;</span>.<span class="bu">format</span>(count))</span></code></pre></div>
<p>The count seems to be more what you intend to ask for (as opposed to index) when you said you wanted from 1 to 5.</p>
<hr>
<h5>
Breaking it down - a step by step explanation
</h2>
<p>To break these examples down, say we have a list of items that we want to iterate over with an index:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb350-1"><a href="#cb350-1"></a>items <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>]</span></code></pre></div>
<p>Now we pass this iterable to enumerate, creating an enumerate object:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb351-1"><a href="#cb351-1"></a>enumerate_object <span class="op">=</span> <span class="bu">enumerate</span>(items) <span class="co"># the enumerate object</span></span></code></pre></div>
<p>We can pull the first item out of this iterable that we would get in a loop with the <code>next</code> function:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb352-1"><a href="#cb352-1"></a>iteration <span class="op">=</span> <span class="bu">next</span>(enumerate_object) <span class="co"># first iteration from enumerate</span></span>
<span id="cb352-2"><a href="#cb352-2"></a><span class="bu">print</span>(iteration)</span></code></pre></div>
<p>And we see we get a tuple of <code>0</code>, the first index, and <code>'a'</code>, the first item:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb353-1"><a href="#cb353-1"></a>(<span class="dv">0</span>, <span class="st">&#39;a&#39;</span>)</span></code></pre></div>
<p>we can use what is referred to as “<a href="https://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences" rel="noreferrer">sequence unpacking</a>” to extract the elements from this two-tuple:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb354-1"><a href="#cb354-1"></a>index, item <span class="op">=</span> iteration</span>
<span id="cb354-2"><a href="#cb354-2"></a><span class="co">#   0,  &#39;a&#39; = (0, &#39;a&#39;) # essentially this.</span></span></code></pre></div>
<p>and when we inspect <code>index</code>, we find it refers to the first index, 0, and <code>item</code> refers to the first item, <code>'a'</code>.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb355-1"><a href="#cb355-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(index)</span>
<span id="cb355-2"><a href="#cb355-2"></a><span class="dv">0</span></span>
<span id="cb355-3"><a href="#cb355-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(item)</span>
<span id="cb355-4"><a href="#cb355-4"></a>a</span></code></pre></div>
<h5>
Conclusion
</h1>
<ul>
<li>
Python indexes start at zero
</li>
<li>
To get these indexes from an iterable as you iterate over it, use the enumerate function
</li>
<li>
Using enumerate in the idiomatic way (along with tuple unpacking) creates code that is more readable and maintainable:
</li>
</ul>
<p>So do this:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb356-1"><a href="#cb356-1"></a><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(items, start<span class="op">=</span><span class="dv">0</span>):   <span class="co"># Python indexes start at zero</span></span>
<span id="cb356-2"><a href="#cb356-2"></a>    <span class="bu">print</span>(index, item)</span></code></pre></div>
</section>
<section id="answer-3-score-132" class="level4">
<h4>Answer 3 (score 132)</h4>
<p>It’s pretty simple to start it from <code>1</code> other than <code>0</code>:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb357-1"><a href="#cb357-1"></a><span class="cf">for</span> index, item <span class="kw">in</span> <span class="bu">enumerate</span>(iterable, start<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb357-2"><a href="#cb357-2"></a>   <span class="bu">print</span> index, item</span></code></pre></div>
<h5>
Note
</h2>
<p>
Important hint, though a little misleading since <code>index</code> will be a <code>tuple</code> <code>(idx, item)</code> here. Good to go.
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-iterate-over-rows-in-a-dataframe-in-pandas-score-1869294-in-2018" class="level3">
<h3>41: How to iterate over rows in a DataFrame in Pandas? (score <a href="https://stackoverflow.com/q/16476924.html">1869294</a> in 2018)</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>I have a <code>DataFrame</code> from pandas:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb358-1"><a href="#cb358-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb358-2"><a href="#cb358-2"></a>inp <span class="op">=</span> [{<span class="st">&#39;c1&#39;</span>:<span class="dv">10</span>, <span class="st">&#39;c2&#39;</span>:<span class="dv">100</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">11</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">110</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">12</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">120</span>}]</span>
<span id="cb358-3"><a href="#cb358-3"></a>df <span class="op">=</span> pd.DataFrame(inp)</span>
<span id="cb358-4"><a href="#cb358-4"></a><span class="bu">print</span> df</span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb359-1"><a href="#cb359-1"></a>   c1   c2</span>
<span id="cb359-2"><a href="#cb359-2"></a><span class="dv">0</span>  <span class="dv">10</span>  <span class="dv">100</span></span>
<span id="cb359-3"><a href="#cb359-3"></a><span class="dv">1</span>  <span class="dv">11</span>  <span class="dv">110</span></span>
<span id="cb359-4"><a href="#cb359-4"></a><span class="dv">2</span>  <span class="dv">12</span>  <span class="dv">120</span></span></code></pre></div>
<p>Now I want to iterate over the rows of this frame. For every row I want to be able to access its elements (values in cells) by the name of the columns. For example:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb360-1"><a href="#cb360-1"></a><span class="cf">for</span> row <span class="kw">in</span> df.rows:</span>
<span id="cb360-2"><a href="#cb360-2"></a>   <span class="bu">print</span> row[<span class="st">&#39;c1&#39;</span>], row[<span class="st">&#39;c2&#39;</span>]</span></code></pre></div>
<p>Is it possible to do that in pandas?</p>
<p>I found this <a href="https://stackoverflow.com/questions/7837722/what-is-the-most-efficient-way-to-loop-through-dataframes-with-pandas">similar question</a>. But it does not give me the answer I need. For example, it is suggested there to use:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb361-1"><a href="#cb361-1"></a><span class="cf">for</span> date, row <span class="kw">in</span> df.T.iteritems():</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb362-1"><a href="#cb362-1"></a><span class="cf">for</span> row <span class="kw">in</span> df.iterrows():</span></code></pre></div>
<p>But I do not understand what the <code>row</code> object is and how I can work with it.</p>
</section>
<section id="answer-accepted-score-2033" class="level4">
<h4>Answer accepted (score 2033)</h4>
<p><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows" rel="noreferrer">DataFrame.iterrows</a> is a generator which yield both index and row</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb363-1"><a href="#cb363-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb363-2"><a href="#cb363-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb363-3"><a href="#cb363-3"></a></span>
<span id="cb363-4"><a href="#cb363-4"></a>df <span class="op">=</span> pd.DataFrame([{<span class="st">&#39;c1&#39;</span>:<span class="dv">10</span>, <span class="st">&#39;c2&#39;</span>:<span class="dv">100</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">11</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">110</span>}, {<span class="st">&#39;c1&#39;</span>:<span class="dv">12</span>,<span class="st">&#39;c2&#39;</span>:<span class="dv">120</span>}])</span></code></pre></div>
<div class="sourceCode" id="cb364"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb364-1"><a href="#cb364-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb364-2"><a href="#cb364-2"></a>    <span class="bu">print</span>(row[<span class="st">&#39;c1&#39;</span>], row[<span class="st">&#39;c2&#39;</span>])</span>
<span id="cb364-3"><a href="#cb364-3"></a></span>
<span id="cb364-4"><a href="#cb364-4"></a>Output: </span>
<span id="cb364-5"><a href="#cb364-5"></a>   <span class="dv">10</span> <span class="dv">100</span></span>
<span id="cb364-6"><a href="#cb364-6"></a>   <span class="dv">11</span> <span class="dv">110</span></span>
<span id="cb364-7"><a href="#cb364-7"></a>   <span class="dv">12</span> <span class="dv">120</span></span></code></pre></div>
</section>
<section id="answer-2-score-314" class="level4">
<h4>Answer 2 (score 314)</h4>
<p>First consider if you really need to <em>iterate</em> over rows in a DataFrame. See <a href="https://stackoverflow.com/a/55557758/3844376">this answer</a> for alternatives.</p>
<p>If you still need to iterate over rows, you can use methods below. Note some <strong>important caveats</strong> which are not mentioned in any of the other answers.</p>
<ul>
<li>
<p>
<a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html" rel="noreferrer">DataFrame.iterrows()</a>
</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb365-1"><a href="#cb365-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb365-2"><a href="#cb365-2"></a>    <span class="bu">print</span> row[<span class="st">&quot;c1&quot;</span>], row[<span class="st">&quot;c2&quot;</span>]</span>
<span id="cb365-3"><a href="#cb365-3"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb365-4"><a href="#cb365-4"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;&lt;</span>a href<span class="op">=</span><span class="st">&quot;http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.itertuples.html&quot;</span> rel<span class="op">=</span><span class="st">&quot;noreferrer&quot;</span><span class="op">&gt;</span>DataFrame.itertuples()<span class="op">&lt;/</span>a<span class="op">&gt;&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb365-5"><a href="#cb365-5"></a></span>
<span id="cb365-6"><a href="#cb365-6"></a>```python</span>
<span id="cb365-7"><a href="#cb365-7"></a><span class="cf">for</span> row <span class="kw">in</span> df.itertuples(index<span class="op">=</span><span class="va">True</span>, name<span class="op">=</span><span class="st">&#39;Pandas&#39;</span>):</span>
<span id="cb365-8"><a href="#cb365-8"></a>    <span class="bu">print</span> <span class="bu">getattr</span>(row, <span class="st">&quot;c1&quot;</span>), <span class="bu">getattr</span>(row, <span class="st">&quot;c2&quot;</span>)</span>
<span id="cb365-9"><a href="#cb365-9"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb365-10"><a href="#cb365-10"></a><span class="op">&lt;/</span>ul<span class="op">&gt;</span></span>
<span id="cb365-11"><a href="#cb365-11"></a></span>
<span id="cb365-12"><a href="#cb365-12"></a>`itertuples()` <span class="kw">is</span> supposed to be faster than `iterrows()`  </span>
<span id="cb365-13"><a href="#cb365-13"></a></span>
<span id="cb365-14"><a href="#cb365-14"></a>But be aware, according to the docs (pandas <span class="dv">0</span>.<span class="fl">24.2</span> at the moment):  </span>
<span id="cb365-15"><a href="#cb365-15"></a></span>
<span id="cb365-16"><a href="#cb365-16"></a><span class="op">&lt;</span>ul<span class="op">&gt;</span></span>
<span id="cb365-17"><a href="#cb365-17"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>iterrows: `dtype` might <span class="kw">not</span> match <span class="im">from</span> row to row<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb365-18"><a href="#cb365-18"></a></span>
<span id="cb365-19"><a href="#cb365-19"></a><span class="op">&lt;</span>blockquote<span class="op">&gt;</span></span>
<span id="cb365-20"><a href="#cb365-20"></a>  Because iterrows returns a Series <span class="cf">for</span> each row, it <span class="op">&lt;</span>strong<span class="op">&gt;</span>does <span class="kw">not</span> preserve<span class="op">&lt;/</span>strong<span class="op">&gt;</span> dtypes across the rows (dtypes are preserved across columns <span class="cf">for</span> DataFrames). To preserve dtypes <span class="cf">while</span> iterating over the rows, it <span class="kw">is</span> better to use itertuples() which returns namedtuples of the values <span class="kw">and</span> which <span class="kw">is</span> generally much faster than iterrows()  </span>
<span id="cb365-21"><a href="#cb365-21"></a><span class="op">&lt;/</span>blockquote<span class="op">&gt;&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb365-22"><a href="#cb365-22"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>iterrows: Do <span class="kw">not</span> modify rows<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb365-23"><a href="#cb365-23"></a></span>
<span id="cb365-24"><a href="#cb365-24"></a><span class="op">&lt;</span>blockquote<span class="op">&gt;</span></span>
<span id="cb365-25"><a href="#cb365-25"></a>  You should <span class="op">&lt;</span>strong<span class="op">&gt;</span>never modify<span class="op">&lt;/</span>strong<span class="op">&gt;</span> something you are iterating over. This <span class="kw">is</span> <span class="kw">not</span> guaranteed to work <span class="kw">in</span> <span class="bu">all</span> cases. Depending on the data types, the iterator returns a copy <span class="kw">and</span> <span class="kw">not</span> a view, <span class="kw">and</span> writing to it will have no effect.  </span>
<span id="cb365-26"><a href="#cb365-26"></a><span class="op">&lt;/</span>blockquote<span class="op">&gt;</span></span>
<span id="cb365-27"><a href="#cb365-27"></a></span>
<span id="cb365-28"><a href="#cb365-28"></a>Use <span class="op">&lt;</span>a href<span class="op">=</span><span class="st">&quot;http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html&quot;</span> rel<span class="op">=</span><span class="st">&quot;noreferrer&quot;</span><span class="op">&gt;</span>DataFrame.<span class="bu">apply</span>()<span class="op">&lt;/</span>a<span class="op">&gt;</span> instead:  </span>
<span id="cb365-29"><a href="#cb365-29"></a></span>
<span id="cb365-30"><a href="#cb365-30"></a>```python</span>
<span id="cb365-31"><a href="#cb365-31"></a>new_df <span class="op">=</span> df.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb365-32"><a href="#cb365-32"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb365-33"><a href="#cb365-33"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>itertuples: <span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb365-34"><a href="#cb365-34"></a></span>
<span id="cb365-35"><a href="#cb365-35"></a><span class="op">&lt;</span>blockquote<span class="op">&gt;</span></span>
<span id="cb365-36"><a href="#cb365-36"></a>  The column names will be renamed to positional names <span class="cf">if</span> they are invalid Python identifiers, repeated, <span class="kw">or</span> start <span class="cf">with</span> an underscore. With a large number of columns (<span class="op">&gt;</span><span class="dv">255</span>), regular tuples are returned.  </span>
<span id="cb365-37"><a href="#cb365-37"></a><span class="op">&lt;/</span>blockquote<span class="op">&gt;&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb365-38"><a href="#cb365-38"></a><span class="op">&lt;/</span>ul<span class="op">&gt;</span></span>
<span id="cb365-39"><a href="#cb365-39"></a></span>
<span id="cb365-40"><a href="#cb365-40"></a>See <span class="op">&lt;</span>a href<span class="op">=</span><span class="st">&quot;https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#iteration&quot;</span> rel<span class="op">=</span><span class="st">&quot;noreferrer&quot;</span><span class="op">&gt;</span>pandas docs on iteration<span class="op">&lt;/</span>a<span class="op">&gt;</span> <span class="cf">for</span> more details.  </span>
<span id="cb365-41"><a href="#cb365-41"></a></span>
<span id="cb365-42"><a href="#cb365-42"></a><span class="co">#### Answer 3 (score 188)</span></span>
<span id="cb365-43"><a href="#cb365-43"></a>You should use <span class="op">&lt;</span>a href<span class="op">=</span><span class="st">&quot;http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html&quot;</span><span class="op">&gt;</span>`df.iterrows()`<span class="op">&lt;/</span>a<span class="op">&gt;</span>. Though iterating row<span class="op">-</span>by<span class="op">-</span>row <span class="kw">is</span> <span class="kw">not</span> especially efficient since Series objects have to be created.  </span>
<span id="cb365-44"><a href="#cb365-44"></a></span>
<span id="cb365-45"><a href="#cb365-45"></a><span class="op">&lt;/</span>b<span class="op">&gt;</span> <span class="op">&lt;/</span>em<span class="op">&gt;</span> <span class="op">&lt;/</span>i<span class="op">&gt;</span> <span class="op">&lt;/</span>small<span class="op">&gt;</span> <span class="op">&lt;/</span>strong<span class="op">&gt;</span> <span class="op">&lt;/</span>sub<span class="op">&gt;</span> <span class="op">&lt;/</span>sup<span class="op">&gt;</span></span>
<span id="cb365-46"><a href="#cb365-46"></a></span>
<span id="cb365-47"><a href="#cb365-47"></a><span class="co">### 42: Selecting multiple columns in a pandas dataframe (score [1863876](https://stackoverflow.com/q/11285613.html) in 2018)</span></span>
<span id="cb365-48"><a href="#cb365-48"></a></span>
<span id="cb365-49"><a href="#cb365-49"></a><span class="co">#### Question</span></span>
<span id="cb365-50"><a href="#cb365-50"></a>I have data <span class="kw">in</span> different columns but I don<span class="st">&#39;t know how to extract it to save it in another variable.  </span></span>
<span id="cb365-51"><a href="#cb365-51"></a></span>
<span id="cb365-52"><a href="#cb365-52"></a><span class="st">```python</span></span>
<span id="cb365-53"><a href="#cb365-53"></a><span class="st">index  a   b   c</span></span>
<span id="cb365-54"><a href="#cb365-54"></a><span class="st">1      2   3   4</span></span>
<span id="cb365-55"><a href="#cb365-55"></a><span class="st">2      3   4   5</span></span></code></pre></div>
<p>How do I select <code>'a'</code>, <code>'b'</code> and save it in to df1?</p>
<p>I tried</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb366-1"><a href="#cb366-1"></a>df1 <span class="op">=</span> df[<span class="st">&#39;a&#39;</span>:<span class="st">&#39;b&#39;</span>]</span>
<span id="cb366-2"><a href="#cb366-2"></a>df1 <span class="op">=</span> df.ix[:, <span class="st">&#39;a&#39;</span>:<span class="st">&#39;b&#39;</span>]</span></code></pre></div>
<p>None seem to work.</p>
</section>
<section id="answer-accepted-score-1472" class="level4">
<h4>Answer accepted (score 1472)</h4>
<p>The column names (which are strings) cannot be sliced in the manner you tried.</p>
<p>Here you have a couple of options. If you know from context which variables you want to slice out, you can just return a view of only those columns by passing a list into the <code>__getitem__</code> syntax (the []’s).</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb367-1"><a href="#cb367-1"></a>df1 <span class="op">=</span> df[[<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>]]</span></code></pre></div>
<p>Alternatively, if it matters to index them numerically and not by their name (say your code should automatically do this without knowing the names of the first two columns) then you can do this instead:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb368-1"><a href="#cb368-1"></a>df1 <span class="op">=</span> df.iloc[:,<span class="dv">0</span>:<span class="dv">2</span>] <span class="co"># Remember that Python does not slice inclusive of the ending index.</span></span></code></pre></div>
<p>Additionally, you should familiarize yourself with the idea of a view into a Pandas object vs. a copy of that object. The first of the above methods will return a new copy in memory of the desired sub-object (the desired slices).</p>
<p>Sometimes, however, there are indexing conventions in Pandas that don’t do this and instead give you a new variable that just refers to the same chunk of memory as the sub-object or slice in the original object. This will happen with the second way of indexing, so you can modify it with the <code>copy()</code> function to get a regular copy. When this happens, changing what you think is the sliced object can sometimes alter the original object. Always good to be on the look out for this.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb369-1"><a href="#cb369-1"></a>df1 <span class="op">=</span> df.iloc[<span class="dv">0</span>,<span class="dv">0</span>:<span class="dv">2</span>].copy() <span class="co"># To avoid the case where changing df1 also changes df</span></span></code></pre></div>
<p>To use <code>iloc</code>, you need to know the column positions (or indices). As the column positions may change, instead of hard-coding indices, you can use <code>iloc</code> along with <code>get_loc</code> function of <code>columns</code> method of dataframe object to obtain column indices.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb370-1"><a href="#cb370-1"></a>{df.columns.get_loc(c):c <span class="cf">for</span> idx, c <span class="kw">in</span> <span class="bu">enumerate</span>(df.columns)}</span></code></pre></div>
<p>Now you can use this dictionary to access columns through names and using <code>iloc</code>.</p>
</section>
<section id="answer-2-score-100" class="level4">
<h4>Answer 2 (score 100)</h4>
<p>
Assuming your column names (<code>df.columns</code>) are <code>['index','a','b','c']</code>, then the data you want is in the 3rd &amp; 4th columns. If you don’t know their names when your script runs, you can do this
</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb371-1"><a href="#cb371-1"></a>newdf <span class="op">=</span> df[df.columns[<span class="dv">2</span>:<span class="dv">4</span>]] <span class="co"># Remember, Python is 0-offset! The &quot;3rd&quot; entry is at slot 2.</span></span></code></pre></div>
<p>As EMS points out in <a href="https://stackoverflow.com/a/11287278/623735">his answer</a>, <code>df.ix</code> slices columns a bit more concisely, but the <code>.columns</code> slicing interface might be more natural because it uses the vanilla 1-D python list indexing/slicing syntax.</p>
<p>WARN: <code>'index'</code> is a bad name for a <code>DataFrame</code> column. That same label is also used for the real <code>df.index</code> attribute, a <code>Index</code> array. So your column is returned by <code>df['index']</code> and the real DataFrame index is returned by <code>df.index</code>. An <code>Index</code> is a special kind of <code>Series</code> optimized for lookup of it’s elements’ values. For df.index it’s for looking up rows by their label. That <code>df.columns</code> attribute is also a <code>pd.Index</code> array, for looking up columns by their labels.</p>
</section>
<section id="answer-3-score-96" class="level4">
<h4>Answer 3 (score 96)</h4>
<p>As of version 0.11.0, columns <em>can be</em> sliced in the manner you tried using the <a href="http://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.11.0.html#selection-choices" rel="noreferrer"><code>.loc</code></a> indexer:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb372-1"><a href="#cb372-1"></a>df.loc[:, <span class="st">&#39;C&#39;</span>:<span class="st">&#39;E&#39;</span>]</span></code></pre></div>
<p>is equivalent of</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb373-1"><a href="#cb373-1"></a>df[[<span class="st">&#39;C&#39;</span>, <span class="st">&#39;D&#39;</span>, <span class="st">&#39;E&#39;</span>]]  <span class="co"># or df.loc[:, [&#39;C&#39;, &#39;D&#39;, &#39;E&#39;]]</span></span></code></pre></div>
<p>and returns columns <code>C</code> through <code>E</code>.</p>
<hr>
<p>A demo on a randomly generated DataFrame:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb374-1"><a href="#cb374-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb374-2"><a href="#cb374-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb374-3"><a href="#cb374-3"></a>np.random.seed(<span class="dv">5</span>)</span>
<span id="cb374-4"><a href="#cb374-4"></a>df <span class="op">=</span> pd.DataFrame(np.random.randint(<span class="dv">100</span>, size<span class="op">=</span>(<span class="dv">100</span>, <span class="dv">6</span>)), </span>
<span id="cb374-5"><a href="#cb374-5"></a>                  columns<span class="op">=</span><span class="bu">list</span>(<span class="st">&#39;ABCDEF&#39;</span>), </span>
<span id="cb374-6"><a href="#cb374-6"></a>                  index<span class="op">=</span>[<span class="st">&#39;R</span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>)])</span>
<span id="cb374-7"><a href="#cb374-7"></a>df.head()</span>
<span id="cb374-8"><a href="#cb374-8"></a></span>
<span id="cb374-9"><a href="#cb374-9"></a>Out: </span>
<span id="cb374-10"><a href="#cb374-10"></a>     A   B   C   D   E   F</span>
<span id="cb374-11"><a href="#cb374-11"></a>R0  <span class="dv">99</span>  <span class="dv">78</span>  <span class="dv">61</span>  <span class="dv">16</span>  <span class="dv">73</span>   <span class="dv">8</span></span>
<span id="cb374-12"><a href="#cb374-12"></a>R1  <span class="dv">62</span>  <span class="dv">27</span>  <span class="dv">30</span>  <span class="dv">80</span>   <span class="dv">7</span>  <span class="dv">76</span></span>
<span id="cb374-13"><a href="#cb374-13"></a>R2  <span class="dv">15</span>  <span class="dv">53</span>  <span class="dv">80</span>  <span class="dv">27</span>  <span class="dv">44</span>  <span class="dv">77</span></span>
<span id="cb374-14"><a href="#cb374-14"></a>R3  <span class="dv">75</span>  <span class="dv">65</span>  <span class="dv">47</span>  <span class="dv">30</span>  <span class="dv">84</span>  <span class="dv">86</span></span>
<span id="cb374-15"><a href="#cb374-15"></a>R4  <span class="dv">18</span>   <span class="dv">9</span>  <span class="dv">41</span>  <span class="dv">62</span>   <span class="dv">1</span>  <span class="dv">82</span></span></code></pre></div>
<p>To get the columns from C to E (note that unlike integer slicing, ‘E’ is included in the columns):</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb375-1"><a href="#cb375-1"></a>df.loc[:, <span class="st">&#39;C&#39;</span>:<span class="st">&#39;E&#39;</span>]</span>
<span id="cb375-2"><a href="#cb375-2"></a></span>
<span id="cb375-3"><a href="#cb375-3"></a>Out: </span>
<span id="cb375-4"><a href="#cb375-4"></a>      C   D   E</span>
<span id="cb375-5"><a href="#cb375-5"></a>R0   <span class="dv">61</span>  <span class="dv">16</span>  <span class="dv">73</span></span>
<span id="cb375-6"><a href="#cb375-6"></a>R1   <span class="dv">30</span>  <span class="dv">80</span>   <span class="dv">7</span></span>
<span id="cb375-7"><a href="#cb375-7"></a>R2   <span class="dv">80</span>  <span class="dv">27</span>  <span class="dv">44</span></span>
<span id="cb375-8"><a href="#cb375-8"></a>R3   <span class="dv">47</span>  <span class="dv">30</span>  <span class="dv">84</span></span>
<span id="cb375-9"><a href="#cb375-9"></a>R4   <span class="dv">41</span>  <span class="dv">62</span>   <span class="dv">1</span></span>
<span id="cb375-10"><a href="#cb375-10"></a>R5    <span class="dv">5</span>  <span class="dv">58</span>   <span class="dv">0</span></span>
<span id="cb375-11"><a href="#cb375-11"></a>...</span></code></pre></div>
<p>Same works for selecting rows based on labels. Get the rows ‘R6’ to ‘R10’ from those columns:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb376-1"><a href="#cb376-1"></a>df.loc[<span class="st">&#39;R6&#39;</span>:<span class="st">&#39;R10&#39;</span>, <span class="st">&#39;C&#39;</span>:<span class="st">&#39;E&#39;</span>]</span>
<span id="cb376-2"><a href="#cb376-2"></a></span>
<span id="cb376-3"><a href="#cb376-3"></a>Out: </span>
<span id="cb376-4"><a href="#cb376-4"></a>      C   D   E</span>
<span id="cb376-5"><a href="#cb376-5"></a>R6   <span class="dv">51</span>  <span class="dv">27</span>  <span class="dv">31</span></span>
<span id="cb376-6"><a href="#cb376-6"></a>R7   <span class="dv">83</span>  <span class="dv">19</span>  <span class="dv">18</span></span>
<span id="cb376-7"><a href="#cb376-7"></a>R8   <span class="dv">11</span>  <span class="dv">67</span>  <span class="dv">65</span></span>
<span id="cb376-8"><a href="#cb376-8"></a>R9   <span class="dv">78</span>  <span class="dv">27</span>  <span class="dv">29</span></span>
<span id="cb376-9"><a href="#cb376-9"></a>R10   <span class="dv">7</span>  <span class="dv">16</span>  <span class="dv">94</span></span></code></pre></div>
<p><code>.loc</code> also accepts a boolean array so you can select the columns whose corresponding entry in the array is <code>True</code>. For example, <code>df.columns.isin(list('BCD'))</code> returns <code>array([False,  True,  True,  True, False, False], dtype=bool)</code> - True if the column name is in the list <code>['B', 'C', 'D']</code>; False, otherwise.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb377-1"><a href="#cb377-1"></a>df.loc[:, df.columns.isin(<span class="bu">list</span>(<span class="st">&#39;BCD&#39;</span>))]</span>
<span id="cb377-2"><a href="#cb377-2"></a></span>
<span id="cb377-3"><a href="#cb377-3"></a>Out: </span>
<span id="cb377-4"><a href="#cb377-4"></a>      B   C   D</span>
<span id="cb377-5"><a href="#cb377-5"></a>R0   <span class="dv">78</span>  <span class="dv">61</span>  <span class="dv">16</span></span>
<span id="cb377-6"><a href="#cb377-6"></a>R1   <span class="dv">27</span>  <span class="dv">30</span>  <span class="dv">80</span></span>
<span id="cb377-7"><a href="#cb377-7"></a>R2   <span class="dv">53</span>  <span class="dv">80</span>  <span class="dv">27</span></span>
<span id="cb377-8"><a href="#cb377-8"></a>R3   <span class="dv">65</span>  <span class="dv">47</span>  <span class="dv">30</span></span>
<span id="cb377-9"><a href="#cb377-9"></a>R4    <span class="dv">9</span>  <span class="dv">41</span>  <span class="dv">62</span></span>
<span id="cb377-10"><a href="#cb377-10"></a>R5   <span class="dv">78</span>   <span class="dv">5</span>  <span class="dv">58</span></span>
<span id="cb377-11"><a href="#cb377-11"></a>...</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="pythons-equivalent-of-logical-and-in-an-if-statement-score-1813435-in-2018" class="level3">
<h3>43: Python’s equivalent of &amp;&amp; (logical-and) in an if-statement (score <a href="https://stackoverflow.com/q/2485466.html">1813435</a> in 2018)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>Here’s my code:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb378-1"><a href="#cb378-1"></a><span class="kw">def</span> front_back(a, b):</span>
<span id="cb378-2"><a href="#cb378-2"></a>  <span class="co"># +++your code here+++</span></span>
<span id="cb378-3"><a href="#cb378-3"></a>  <span class="cf">if</span> <span class="bu">len</span>(a) <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> <span class="bu">len</span>(b) <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb378-4"><a href="#cb378-4"></a>    <span class="cf">return</span> a[:(<span class="bu">len</span>(a)<span class="op">/</span><span class="dv">2</span>)] <span class="op">+</span> b[:(<span class="bu">len</span>(b)<span class="op">/</span><span class="dv">2</span>)] <span class="op">+</span> a[(<span class="bu">len</span>(a)<span class="op">/</span><span class="dv">2</span>):] <span class="op">+</span> b[(<span class="bu">len</span>(b)<span class="op">/</span><span class="dv">2</span>):] </span>
<span id="cb378-5"><a href="#cb378-5"></a>  <span class="cf">else</span>:</span>
<span id="cb378-6"><a href="#cb378-6"></a>    <span class="co">#todo! Not yet done. :P</span></span>
<span id="cb378-7"><a href="#cb378-7"></a>  <span class="cf">return</span></span></code></pre></div>
<p>I’m getting an error in the IF conditional. What am I doing wrong?</p>
</section>
<section id="answer-accepted-score-1338" class="level4">
<h4>Answer accepted (score 1338)</h4>
<p>You would want <code>and</code> instead of <code>&amp;amp;&amp;amp;</code>.</p>
</section>
<section id="answer-2-score-214" class="level4">
<h4>Answer 2 (score 214)</h4>
<p>Python uses <code>and</code> and <code>or</code> conditionals.</p>
<p>i.e. </p>
<div class="sourceCode" id="cb379"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb379-1"><a href="#cb379-1"></a><span class="cf">if</span> foo <span class="op">==</span> <span class="st">&#39;abc&#39;</span> <span class="kw">and</span> bar <span class="op">==</span> <span class="st">&#39;bac&#39;</span> <span class="kw">or</span> zoo <span class="op">==</span> <span class="st">&#39;123&#39;</span>:</span>
<span id="cb379-2"><a href="#cb379-2"></a>  <span class="co"># do something</span></span></code></pre></div>
</section>
<section id="answer-3-score-36" class="level4">
<h4>Answer 3 (score 36)</h4>
<p>Two comments:</p>
<ul>
<li>
Use <code>and</code> and <code>or</code> for logical operations in Python.
</li>
<li>
Use 4 spaces to indent instead of 2. You will thank yourself later because your code will look pretty much the same as everyone else’s code. See <a href="http://www.python.org/dev/peps/pep-0008/" rel="noreferrer">PEP 8</a> for more details.
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="getting-the-last-element-of-a-list-score-1789328-in-2019" class="level3">
<h3>44: Getting the last element of a list (score <a href="https://stackoverflow.com/q/930397.html">1789328</a> in 2019)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>In Python, how do you get the last element of a list?</p>
</section>
<section id="answer-accepted-score-2780" class="level4">
<h4>Answer accepted (score 2780)</h4>
<p><code>some_list[-1]</code> is the shortest and most Pythonic.</p>
<p>In fact, you can do much more with this syntax. The <code>some_list[-n]</code> syntax gets the nth-to-last element. So <code>some_list[-1]</code> gets the last element, <code>some_list[-2]</code> gets the second to last, etc, all the way down to <code>some_list[-len(some_list)]</code>, which gives you the first element.</p>
<p>You can also set list elements in this way. For instance:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb380-1"><a href="#cb380-1"></a><span class="op">&gt;&gt;&gt;</span> some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb380-2"><a href="#cb380-2"></a><span class="op">&gt;&gt;&gt;</span> some_list[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> <span class="dv">5</span> <span class="co"># Set the last element</span></span>
<span id="cb380-3"><a href="#cb380-3"></a><span class="op">&gt;&gt;&gt;</span> some_list[<span class="op">-</span><span class="dv">2</span>] <span class="op">=</span> <span class="dv">3</span> <span class="co"># Set the second to last element</span></span>
<span id="cb380-4"><a href="#cb380-4"></a><span class="op">&gt;&gt;&gt;</span> some_list</span>
<span id="cb380-5"><a href="#cb380-5"></a>[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span></code></pre></div>
<p>Note that getting a list item by index will raise an <a href="https://docs.python.org/3/library/exceptions.html#IndexError" rel="noreferrer"><code>IndexError</code></a> if the expected item doesn’t exist. This means that <code>some_list[-1]</code> will raise an exception if <code>some_list</code> is empty, because an empty list can’t have a last element.</p>
</section>
<section id="answer-2-score-224" class="level4">
<h4>Answer 2 (score 224)</h4>
<p>If your <code>str()</code> or <code>list()</code> objects might end up being empty as so: <code>astr = ''</code> or <code>alist = []</code>, then you might want to use <code>alist[-1:]</code> instead of <code>alist[-1]</code> for object “sameness”.</p>
<p>The significance of this is:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb381-1"><a href="#cb381-1"></a>alist <span class="op">=</span> []</span>
<span id="cb381-2"><a href="#cb381-2"></a>alist[<span class="op">-</span><span class="dv">1</span>]   <span class="co"># will generate an IndexError exception whereas </span></span>
<span id="cb381-3"><a href="#cb381-3"></a>alist[<span class="op">-</span><span class="dv">1</span>:]  <span class="co"># will return an empty list</span></span>
<span id="cb381-4"><a href="#cb381-4"></a>astr <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb381-5"><a href="#cb381-5"></a>astr[<span class="op">-</span><span class="dv">1</span>]    <span class="co"># will generate an IndexError exception whereas</span></span>
<span id="cb381-6"><a href="#cb381-6"></a>astr[<span class="op">-</span><span class="dv">1</span>:]   <span class="co"># will return an empty str</span></span></code></pre></div>
<p>Where the distinction being made is that returning an empty list object or empty str object is more “last element”-like then an exception object.</p>
</section>
<section id="answer-3-score-86" class="level4">
<h4>Answer 3 (score 86)</h4>
<p>You can also do:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb382-1"><a href="#cb382-1"></a>alist.pop()</span></code></pre></div>
<p>It depends on what you want to do with your list because the <code>pop()</code> method will delete the last element.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="adding-new-column-to-existing-dataframe-in-python-pandas-score-1789112-in-2017" class="level3">
<h3>45: Adding new column to existing DataFrame in Python pandas (score <a href="https://stackoverflow.com/q/12555323.html">1789112</a> in 2017)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>I have the following indexed DataFrame with named columns and rows not- continuous numbers:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb383-1"><a href="#cb383-1"></a>          a         b         c         d</span>
<span id="cb383-2"><a href="#cb383-2"></a><span class="dv">2</span>  <span class="fl">0.671399</span>  <span class="fl">0.101208</span> <span class="fl">-0.181532</span>  <span class="fl">0.241273</span></span>
<span id="cb383-3"><a href="#cb383-3"></a><span class="dv">3</span>  <span class="fl">0.446172</span> <span class="fl">-0.243316</span>  <span class="fl">0.051767</span>  <span class="fl">1.577318</span></span>
<span id="cb383-4"><a href="#cb383-4"></a><span class="dv">5</span>  <span class="fl">0.614758</span>  <span class="fl">0.075793</span> <span class="fl">-0.451460</span> <span class="fl">-0.012493</span></span></code></pre></div>
<p>I would like to add a new column, <code>'e'</code>, to the existing data frame and do not want to change anything in the data frame (i.e., the new column always has the same length as the DataFrame).</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb384-1"><a href="#cb384-1"></a><span class="dv">0</span>   <span class="fl">-0.335485</span></span>
<span id="cb384-2"><a href="#cb384-2"></a><span class="dv">1</span>   <span class="fl">-1.166658</span></span>
<span id="cb384-3"><a href="#cb384-3"></a><span class="dv">2</span>   <span class="fl">-0.385571</span></span>
<span id="cb384-4"><a href="#cb384-4"></a>dtype: float64</span></code></pre></div>
<p>I tried different versions of <code>join</code>, <code>append</code>, <code>merge</code>, but I did not get the result I wanted, only errors at most. How can I add column <code>e</code> to the above example?</p>
</section>
<section id="answer-accepted-score-947" class="level4">
<h4>Answer accepted (score 947)</h4>
<p>Use the original df1 indexes to create the series:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb385-1"><a href="#cb385-1"></a>df1[<span class="st">&#39;e&#39;</span>] <span class="op">=</span> pd.Series(np.random.randn(sLength), index<span class="op">=</span>df1.index)</span></code></pre></div>
<hr>
<p>
<strong>Edit 2015</strong><br> Some reported getting the <code>SettingWithCopyWarning</code> with this code.<br> However, the code still runs perfectly with the current pandas version 0.16.1.
</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb386-1"><a href="#cb386-1"></a><span class="op">&gt;&gt;&gt;</span> sLength <span class="op">=</span> <span class="bu">len</span>(df1[<span class="st">&#39;a&#39;</span>])</span>
<span id="cb386-2"><a href="#cb386-2"></a><span class="op">&gt;&gt;&gt;</span> df1</span>
<span id="cb386-3"><a href="#cb386-3"></a>          a         b         c         d</span>
<span id="cb386-4"><a href="#cb386-4"></a><span class="dv">6</span> <span class="fl">-0.269221</span> <span class="fl">-0.026476</span>  <span class="fl">0.997517</span>  <span class="fl">1.294385</span></span>
<span id="cb386-5"><a href="#cb386-5"></a><span class="dv">8</span>  <span class="fl">0.917438</span>  <span class="fl">0.847941</span>  <span class="fl">0.034235</span> <span class="fl">-0.448948</span></span>
<span id="cb386-6"><a href="#cb386-6"></a></span>
<span id="cb386-7"><a href="#cb386-7"></a><span class="op">&gt;&gt;&gt;</span> df1[<span class="st">&#39;e&#39;</span>] <span class="op">=</span> pd.Series(np.random.randn(sLength), index<span class="op">=</span>df1.index)</span>
<span id="cb386-8"><a href="#cb386-8"></a><span class="op">&gt;&gt;&gt;</span> df1</span>
<span id="cb386-9"><a href="#cb386-9"></a>          a         b         c         d         e</span>
<span id="cb386-10"><a href="#cb386-10"></a><span class="dv">6</span> <span class="fl">-0.269221</span> <span class="fl">-0.026476</span>  <span class="fl">0.997517</span>  <span class="fl">1.294385</span>  <span class="fl">1.757167</span></span>
<span id="cb386-11"><a href="#cb386-11"></a><span class="dv">8</span>  <span class="fl">0.917438</span>  <span class="fl">0.847941</span>  <span class="fl">0.034235</span> <span class="fl">-0.448948</span>  <span class="fl">2.228131</span></span>
<span id="cb386-12"><a href="#cb386-12"></a></span>
<span id="cb386-13"><a href="#cb386-13"></a><span class="op">&gt;&gt;&gt;</span> p.version.short_version</span>
<span id="cb386-14"><a href="#cb386-14"></a><span class="co">&#39;0.16.1&#39;</span></span></code></pre></div>
<p>The <code>SettingWithCopyWarning</code> aims to inform of a possibly invalid assignment on a copy of the Dataframe. It doesn’t necessarily say you did it wrong (it can trigger false positives) but from 0.13.0 it let you know there are more adequate methods for the same purpose. Then, if you get the warning, just follow its advise: <em>Try using .loc[row_index,col_indexer] = value instead</em></p>
<div class="sourceCode" id="cb387"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb387-1"><a href="#cb387-1"></a><span class="op">&gt;&gt;&gt;</span> df1.loc[:,<span class="st">&#39;f&#39;</span>] <span class="op">=</span> pd.Series(np.random.randn(sLength), index<span class="op">=</span>df1.index)</span>
<span id="cb387-2"><a href="#cb387-2"></a><span class="op">&gt;&gt;&gt;</span> df1</span>
<span id="cb387-3"><a href="#cb387-3"></a>          a         b         c         d         e         f</span>
<span id="cb387-4"><a href="#cb387-4"></a><span class="dv">6</span> <span class="fl">-0.269221</span> <span class="fl">-0.026476</span>  <span class="fl">0.997517</span>  <span class="fl">1.294385</span>  <span class="fl">1.757167</span> <span class="fl">-0.050927</span></span>
<span id="cb387-5"><a href="#cb387-5"></a><span class="dv">8</span>  <span class="fl">0.917438</span>  <span class="fl">0.847941</span>  <span class="fl">0.034235</span> <span class="fl">-0.448948</span>  <span class="fl">2.228131</span>  <span class="fl">0.006109</span></span>
<span id="cb387-6"><a href="#cb387-6"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre></div>
<p>In fact, this is currently the more efficient method as <a href="http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy" rel="noreferrer">described in pandas docs</a></p>
<hr>
<p><strong>Edit 2017</strong></p>
<p>As indicated in the comments and by <span class="citation" data-cites="Alexander">@Alexander</span>, currently the best method to add the values of a Series as a new column of a DataFrame could be using <code>assign</code>:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb388-1"><a href="#cb388-1"></a>df1 <span class="op">=</span> df1.assign(e<span class="op">=</span>pd.Series(np.random.randn(sLength)).values)</span></code></pre></div>
</section>
<section id="answer-2-score-199" class="level4">
<h4>Answer 2 (score 199)</h4>
<p>This is the simple way of adding a new column: <code>df['e'] = e</code></p>
</section>
<section id="answer-3-score-138" class="level4">
<h4>Answer 3 (score 138)</h4>
<blockquote>
I would like to add a new column, ‘e’, to the existing data frame and do not change anything in the data frame. (The series always got the same length as a dataframe.)
</blockquote>
<p>I assume that the index values in <code>e</code> match those in <code>df1</code>.</p>
<p>The easiest way to initiate a new column named <code>e</code>, and assign it the values from your series <code>e</code>:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb389-1"><a href="#cb389-1"></a>df[<span class="st">&#39;e&#39;</span>] <span class="op">=</span> e.values</span></code></pre></div>
<p><strong>assign (Pandas 0.16.0+)</strong></p>
<p>As of Pandas 0.16.0, you can also use <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html" rel="noreferrer"><code>assign</code></a>, which assigns new columns to a DataFrame and returns a new object (a copy) with all the original columns in addition to the new ones.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb390-1"><a href="#cb390-1"></a>df1 <span class="op">=</span> df1.assign(e<span class="op">=</span>e.values)</span></code></pre></div>
<p>As per <a href="https://stackoverflow.com/questions/42101382/pandas-dataframe-assign-arguments">this example</a> (which also includes the source code of the <code>assign</code> function), you can also include more than one column:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb391-1"><a href="#cb391-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;a&#39;</span>: [<span class="dv">1</span>, <span class="dv">2</span>], <span class="st">&#39;b&#39;</span>: [<span class="dv">3</span>, <span class="dv">4</span>]})</span>
<span id="cb391-2"><a href="#cb391-2"></a><span class="op">&gt;&gt;&gt;</span> df.assign(mean_a<span class="op">=</span>df.a.mean(), mean_b<span class="op">=</span>df.b.mean())</span>
<span id="cb391-3"><a href="#cb391-3"></a>   a  b  mean_a  mean_b</span>
<span id="cb391-4"><a href="#cb391-4"></a><span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">3</span>     <span class="fl">1.5</span>     <span class="fl">3.5</span></span>
<span id="cb391-5"><a href="#cb391-5"></a><span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">4</span>     <span class="fl">1.5</span>     <span class="fl">3.5</span></span></code></pre></div>
<p>In context with your example:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb392-1"><a href="#cb392-1"></a>np.random.seed(<span class="dv">0</span>)</span>
<span id="cb392-2"><a href="#cb392-2"></a>df1 <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">10</span>, <span class="dv">4</span>), columns<span class="op">=</span>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>])</span>
<span id="cb392-3"><a href="#cb392-3"></a>mask <span class="op">=</span> df1.applymap(<span class="kw">lambda</span> x: x <span class="op">&lt;-</span><span class="fl">0.7</span>)</span>
<span id="cb392-4"><a href="#cb392-4"></a>df1 <span class="op">=</span> df1[<span class="op">-</span>mask.<span class="bu">any</span>(axis<span class="op">=</span><span class="dv">1</span>)]</span>
<span id="cb392-5"><a href="#cb392-5"></a>sLength <span class="op">=</span> <span class="bu">len</span>(df1[<span class="st">&#39;a&#39;</span>])</span>
<span id="cb392-6"><a href="#cb392-6"></a>e <span class="op">=</span> pd.Series(np.random.randn(sLength))</span>
<span id="cb392-7"><a href="#cb392-7"></a></span>
<span id="cb392-8"><a href="#cb392-8"></a><span class="op">&gt;&gt;&gt;</span> df1</span>
<span id="cb392-9"><a href="#cb392-9"></a>          a         b         c         d</span>
<span id="cb392-10"><a href="#cb392-10"></a><span class="dv">0</span>  <span class="fl">1.764052</span>  <span class="fl">0.400157</span>  <span class="fl">0.978738</span>  <span class="fl">2.240893</span></span>
<span id="cb392-11"><a href="#cb392-11"></a><span class="dv">2</span> <span class="fl">-0.103219</span>  <span class="fl">0.410599</span>  <span class="fl">0.144044</span>  <span class="fl">1.454274</span></span>
<span id="cb392-12"><a href="#cb392-12"></a><span class="dv">3</span>  <span class="fl">0.761038</span>  <span class="fl">0.121675</span>  <span class="fl">0.443863</span>  <span class="fl">0.333674</span></span>
<span id="cb392-13"><a href="#cb392-13"></a><span class="dv">7</span>  <span class="fl">1.532779</span>  <span class="fl">1.469359</span>  <span class="fl">0.154947</span>  <span class="fl">0.378163</span></span>
<span id="cb392-14"><a href="#cb392-14"></a><span class="dv">9</span>  <span class="fl">1.230291</span>  <span class="fl">1.202380</span> <span class="fl">-0.387327</span> <span class="fl">-0.302303</span></span>
<span id="cb392-15"><a href="#cb392-15"></a></span>
<span id="cb392-16"><a href="#cb392-16"></a><span class="op">&gt;&gt;&gt;</span> e</span>
<span id="cb392-17"><a href="#cb392-17"></a><span class="dv">0</span>   <span class="fl">-1.048553</span></span>
<span id="cb392-18"><a href="#cb392-18"></a><span class="dv">1</span>   <span class="fl">-1.420018</span></span>
<span id="cb392-19"><a href="#cb392-19"></a><span class="dv">2</span>   <span class="fl">-1.706270</span></span>
<span id="cb392-20"><a href="#cb392-20"></a><span class="dv">3</span>    <span class="fl">1.950775</span></span>
<span id="cb392-21"><a href="#cb392-21"></a><span class="dv">4</span>   <span class="fl">-0.509652</span></span>
<span id="cb392-22"><a href="#cb392-22"></a>dtype: float64</span>
<span id="cb392-23"><a href="#cb392-23"></a></span>
<span id="cb392-24"><a href="#cb392-24"></a>df1 <span class="op">=</span> df1.assign(e<span class="op">=</span>e.values)</span>
<span id="cb392-25"><a href="#cb392-25"></a></span>
<span id="cb392-26"><a href="#cb392-26"></a><span class="op">&gt;&gt;&gt;</span> df1</span>
<span id="cb392-27"><a href="#cb392-27"></a>          a         b         c         d         e</span>
<span id="cb392-28"><a href="#cb392-28"></a><span class="dv">0</span>  <span class="fl">1.764052</span>  <span class="fl">0.400157</span>  <span class="fl">0.978738</span>  <span class="fl">2.240893</span> <span class="fl">-1.048553</span></span>
<span id="cb392-29"><a href="#cb392-29"></a><span class="dv">2</span> <span class="fl">-0.103219</span>  <span class="fl">0.410599</span>  <span class="fl">0.144044</span>  <span class="fl">1.454274</span> <span class="fl">-1.420018</span></span>
<span id="cb392-30"><a href="#cb392-30"></a><span class="dv">3</span>  <span class="fl">0.761038</span>  <span class="fl">0.121675</span>  <span class="fl">0.443863</span>  <span class="fl">0.333674</span> <span class="fl">-1.706270</span></span>
<span id="cb392-31"><a href="#cb392-31"></a><span class="dv">7</span>  <span class="fl">1.532779</span>  <span class="fl">1.469359</span>  <span class="fl">0.154947</span>  <span class="fl">0.378163</span>  <span class="fl">1.950775</span></span>
<span id="cb392-32"><a href="#cb392-32"></a><span class="dv">9</span>  <span class="fl">1.230291</span>  <span class="fl">1.202380</span> <span class="fl">-0.387327</span> <span class="fl">-0.302303</span> <span class="fl">-0.509652</span></span></code></pre></div>
<p>The description of this new feature when it was first introduced can be found <a href="http://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.16.0.html#dataframe-assign" rel="noreferrer">here</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="delete-a-file-or-folder-score-1779349-in-2018" class="level3">
<h3>46: Delete a file or folder (score <a href="https://stackoverflow.com/q/6996603.html">1779349</a> in 2018)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>How to delete a file or folder in Python?</p>
</section>
<section id="answer-accepted-score-2966" class="level4">
<h4>Answer accepted (score 2966)</h4>
<p><a href="http://docs.python.org/library/os.html#os.remove" rel="noreferrer"><code>os.remove()</code></a> removes a file.</p>
<p><a href="http://docs.python.org/library/os.html#os.rmdir" rel="noreferrer"><code>os.rmdir()</code></a> removes an empty directory.</p>
<p><a href="http://docs.python.org/library/shutil.html#shutil.rmtree" rel="noreferrer"><code>shutil.rmtree()</code></a> deletes a directory and all its contents.</p>
<hr>
<p><a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" rel="noreferrer"><code>Path</code></a> objects from the Python 3.4+ <a href="https://docs.python.org/3/library/pathlib.html" rel="noreferrer"><code>pathlib</code></a> module also expose these instance methods:</p>
<ul>
<li>
<p>
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.unlink" rel="noreferrer"><code>pathlib.Path.unlink()</code></a> removes a file or symbolic link.
</p>
</li>
<li>
<p>
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.rmdir" rel="noreferrer"><code>pathlib.Path.rmdir()</code></a> removes an empty directory.
</p>
</li>
</ul>
</section>
<section id="answer-2-score-219" class="level4">
<h4>Answer 2 (score 219)</h4>
<h5>
Python syntax to delete a file
</h2>
<div class="sourceCode" id="cb393"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb393-1"><a href="#cb393-1"></a><span class="im">import</span> os</span>
<span id="cb393-2"><a href="#cb393-2"></a>os.remove(<span class="st">&quot;/tmp/&lt;file_name&gt;.txt&quot;</span>)</span></code></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb394-1"><a href="#cb394-1"></a><span class="im">import</span> os</span>
<span id="cb394-2"><a href="#cb394-2"></a>os.unlink(<span class="st">&quot;/tmp/&lt;file_name&gt;.txt&quot;</span>)</span></code></pre></div>
<h5>
Best practice
</h2>
<ol>
<li>
First, check whether the file or folder exists or not then only delete that file. This can be achieved in two ways :<br> a. <code>os.path.isfile("/path/to/file")</code><br> b. Use <code>exception handling.</code><br>
</li>
</ol>
<p><strong>EXAMPLE</strong> for <code>os.path.isfile</code></p>
<div class="sourceCode" id="cb395"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb395-1"><a href="#cb395-1"></a><span class="co">#!/usr/bin/python</span></span>
<span id="cb395-2"><a href="#cb395-2"></a><span class="im">import</span> os</span>
<span id="cb395-3"><a href="#cb395-3"></a>myfile<span class="op">=</span><span class="st">&quot;/tmp/foo.txt&quot;</span></span>
<span id="cb395-4"><a href="#cb395-4"></a></span>
<span id="cb395-5"><a href="#cb395-5"></a><span class="co">## If file exists, delete it ##</span></span>
<span id="cb395-6"><a href="#cb395-6"></a><span class="cf">if</span> os.path.isfile(myfile):</span>
<span id="cb395-7"><a href="#cb395-7"></a>    os.remove(myfile)</span>
<span id="cb395-8"><a href="#cb395-8"></a><span class="cf">else</span>:    <span class="co">## Show an error ##</span></span>
<span id="cb395-9"><a href="#cb395-9"></a>    <span class="bu">print</span>(<span class="st">&quot;Error: </span><span class="sc">%s</span><span class="st"> file not found&quot;</span> <span class="op">%</span> myfile)</span></code></pre></div>
<h5>
Exception Handling
</h3>
<div class="sourceCode" id="cb396"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb396-1"><a href="#cb396-1"></a><span class="co">#!/usr/bin/python</span></span>
<span id="cb396-2"><a href="#cb396-2"></a><span class="im">import</span> os</span>
<span id="cb396-3"><a href="#cb396-3"></a></span>
<span id="cb396-4"><a href="#cb396-4"></a><span class="co">## Get input ##</span></span>
<span id="cb396-5"><a href="#cb396-5"></a>myfile<span class="op">=</span> <span class="bu">raw_input</span>(<span class="st">&quot;Enter file name to delete: &quot;</span>)</span>
<span id="cb396-6"><a href="#cb396-6"></a></span>
<span id="cb396-7"><a href="#cb396-7"></a><span class="co">## Try to delete the file ##</span></span>
<span id="cb396-8"><a href="#cb396-8"></a><span class="cf">try</span>:</span>
<span id="cb396-9"><a href="#cb396-9"></a>    os.remove(myfile)</span>
<span id="cb396-10"><a href="#cb396-10"></a><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:  <span class="co">## if failed, report it back to the user ##</span></span>
<span id="cb396-11"><a href="#cb396-11"></a>    <span class="bu">print</span> (<span class="st">&quot;Error: </span><span class="sc">%s</span><span class="st"> - </span><span class="sc">%s</span><span class="st">.&quot;</span> <span class="op">%</span> (e.filename, e.strerror))</span></code></pre></div>
<h5>
RESPECTIVE OUTPUT
</h3>
<pre>
Enter file name to delete : demo.txt
Error: demo.txt - No such file or directory.

Enter file name to delete : rrr.txt
Error: rrr.txt - Operation not permitted.

Enter file name to delete : foo.txt
</pre>
<h5>
Python syntax to delete a folder
</h3>
<div class="sourceCode" id="cb397"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb397-1"><a href="#cb397-1"></a>shutil.rmtree()</span></code></pre></div>
<p>Example for <code>shutil.rmtree()</code></p>
<div class="sourceCode" id="cb398"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb398-1"><a href="#cb398-1"></a><span class="co">#!/usr/bin/python</span></span>
<span id="cb398-2"><a href="#cb398-2"></a><span class="im">import</span> os</span>
<span id="cb398-3"><a href="#cb398-3"></a><span class="im">import</span> sys</span>
<span id="cb398-4"><a href="#cb398-4"></a><span class="im">import</span> shutil</span>
<span id="cb398-5"><a href="#cb398-5"></a></span>
<span id="cb398-6"><a href="#cb398-6"></a><span class="co"># Get directory name</span></span>
<span id="cb398-7"><a href="#cb398-7"></a>mydir<span class="op">=</span> <span class="bu">raw_input</span>(<span class="st">&quot;Enter directory name: &quot;</span>)</span>
<span id="cb398-8"><a href="#cb398-8"></a></span>
<span id="cb398-9"><a href="#cb398-9"></a><span class="co">## Try to remove tree; if failed show an error using try...except on screen</span></span>
<span id="cb398-10"><a href="#cb398-10"></a><span class="cf">try</span>:</span>
<span id="cb398-11"><a href="#cb398-11"></a>    shutil.rmtree(mydir)</span>
<span id="cb398-12"><a href="#cb398-12"></a><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:</span>
<span id="cb398-13"><a href="#cb398-13"></a>    <span class="bu">print</span> (<span class="st">&quot;Error: </span><span class="sc">%s</span><span class="st"> - </span><span class="sc">%s</span><span class="st">.&quot;</span> <span class="op">%</span> (e.filename, e.strerror))</span></code></pre></div>
</section>
<section id="answer-3-score-72-1" class="level4">
<h4>Answer 3 (score 72)</h4>
<p>Use</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb399-1"><a href="#cb399-1"></a>shutil.rmtree(path[, ignore_errors[, onerror]])</span></code></pre></div>
<p>(See complete documentation on <a href="http://docs.python.org/library/shutil.html" rel="noreferrer">shutil</a>) and/or</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb400-1"><a href="#cb400-1"></a>os.remove</span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb401-1"><a href="#cb401-1"></a>os.rmdir</span></code></pre></div>
<p>(Complete documentation on <a href="http://docs.python.org/library/os.html#os.remove" rel="noreferrer">os</a>.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="does-python-have-a-ternary-conditional-operator-score-1772957-in-2019" class="level3">
<h3>47: Does Python have a ternary conditional operator? (score <a href="https://stackoverflow.com/q/394809.html">1772957</a> in 2019)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>If Python does not have a ternary conditional operator, is it possible to simulate one using other language constructs?</p>
</section>
<section id="answer-accepted-score-6476" class="level4">
<h4>Answer accepted (score 6476)</h4>
<p>Yes, it was <a href="https://mail.python.org/pipermail/python-dev/2005-September/056846.html" rel="noreferrer" title="[Python-Dev] Conditional Expression Resolution">added</a> in version 2.5. The expression syntax is:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb402-1"><a href="#cb402-1"></a>a <span class="cf">if</span> condition <span class="cf">else</span> b</span></code></pre></div>
<p>First <code>condition</code> is evaluated, then exactly one of either <code>a</code> or <code>b</code> is evaluated and returned based on the <a href="https://en.wikipedia.org/wiki/Boolean_data_type" rel="noreferrer" title="Boolean data type">Boolean</a> value of <code>condition</code>. If <code>condition</code> evaluates to <code>True</code>, then <code>a</code> is evaluated and returned but <code>b</code> is ignored, or else when <code>b</code> is evaluated and returned but <code>a</code> is ignored.</p>
<p>This allows short-circuiting because when <code>condition</code> is true only <code>a</code> is evaluated and <code>b</code> is not evaluated at all, but when <code>condition</code> is false only <code>b</code> is evaluated and <code>a</code> is not evaluated at all.</p>
<p>For example:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb403-1"><a href="#cb403-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;true&#39;</span> <span class="cf">if</span> <span class="va">True</span> <span class="cf">else</span> <span class="st">&#39;false&#39;</span></span>
<span id="cb403-2"><a href="#cb403-2"></a><span class="co">&#39;true&#39;</span></span>
<span id="cb403-3"><a href="#cb403-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;true&#39;</span> <span class="cf">if</span> <span class="va">False</span> <span class="cf">else</span> <span class="st">&#39;false&#39;</span></span>
<span id="cb403-4"><a href="#cb403-4"></a><span class="co">&#39;false&#39;</span></span></code></pre></div>
<p>Note that conditionals are an <em>expression</em>, not a <em>statement</em>. This means you can’t use assignment statements or <code>pass</code> or other <strong>statements</strong> within a conditional <strong>expression</strong>:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb404-1"><a href="#cb404-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">pass</span> <span class="cf">if</span> <span class="va">False</span> <span class="cf">else</span> x <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb404-2"><a href="#cb404-2"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span></span>
<span id="cb404-3"><a href="#cb404-3"></a>    <span class="cf">pass</span> <span class="cf">if</span> <span class="va">False</span> <span class="cf">else</span> x <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb404-4"><a href="#cb404-4"></a>          <span class="op">^</span></span>
<span id="cb404-5"><a href="#cb404-5"></a><span class="pp">SyntaxError</span>: invalid syntax</span></code></pre></div>
<p>You can, however, use conditional expressions to assign a variable like so:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb405-1"><a href="#cb405-1"></a>x <span class="op">=</span> a <span class="cf">if</span> <span class="va">True</span> <span class="cf">else</span> b</span></code></pre></div>
<p>Think of the conditional expression as switching between two values. It is very useful when you’re in a ‘one value or another’ situation, it but doesn’t do much else.</p>
<p>If you need to use statements, you have to use a normal <code>if</code> <strong>statement</strong> instead of a conditional <strong>expression</strong>.</p>
<hr>
<p>Keep in mind that it’s frowned upon by some Pythonistas for several reasons:</p>
<ul>
<li>
The order of the arguments is different from those of the classic <code>condition ? a : b</code> ternary operator from many other languages (such as C, C++, Go, Perl, Ruby, Java, Javascript, etc.), which may lead to bugs when people unfamiliar with Python’s “surprising” behaviour use it (they may reverse the argument order).
</li>
<li>
Some find it “unwieldy”, since it goes contrary to the normal flow of thought (thinking of the condition first and then the effects).
</li>
<li>
Stylistic reasons. (Although the ‘inline <code>if</code>’ can be <em>really</em> useful, and make your script more concise, it really does complicate your code)
</li>
</ul>
<p>If you’re having trouble remembering the order, then remember that when read aloud, you (almost) say what you mean. For example, <code>x = 4 if b &amp;gt; 8 else 9</code> is read aloud as <code>x will be 4 if b is greater than 8 otherwise 9</code>.</p>
<p>Official documentation:</p>
<ul>
<li>
<a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="noreferrer" title="Conditional expressions">Conditional expressions</a>
</li>
<li>
<a href="https://docs.python.org/3.3/faq/programming.html#is-there-an-equivalent-of-c-s-ternary-operator" rel="noreferrer" title="Is there an equivalent of C’s ”?:” ternary operator?">Is there an equivalent of C’s ”?:” ternary operator?</a>
</li>
</ul>
</section>
<section id="answer-2-score-725" class="level4">
<h4>Answer 2 (score 725)</h4>
<p>You can index into a tuple:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb406-1"><a href="#cb406-1"></a>(falseValue, trueValue)[test]</span></code></pre></div>
<p>
<code>test</code> needs to return <em>True</em> or <em>False</em>.<br> It might be safer to always implement it as:
</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb407-1"><a href="#cb407-1"></a>(falseValue, trueValue)[test <span class="op">==</span> <span class="va">True</span>]</span></code></pre></div>
<p>or you can use the built-in <a href="https://docs.python.org/3.3/library/functions.html#bool" rel="noreferrer" title="bool"><code>bool()</code></a> to assure a <a href="https://en.wikipedia.org/wiki/Boolean_data_type" rel="noreferrer" title="Boolean data type">Boolean</a> value:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb408-1"><a href="#cb408-1"></a>(falseValue, trueValue)[<span class="bu">bool</span>(<span class="op">&lt;</span>expression<span class="op">&gt;</span>)]</span></code></pre></div>
</section>
<section id="answer-3-score-303" class="level4">
<h4>Answer 3 (score 303)</h4>
<p>For versions prior to 2.5, there’s the trick:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb409-1"><a href="#cb409-1"></a>[expression] <span class="kw">and</span> [on_true] <span class="kw">or</span> [on_false]</span></code></pre></div>
<p>
It can give wrong results when <code>on_true</code> has a false boolean value.<sup>1</sup><br> Although it does have the benefit of evaluating expressions left to right, which is clearer in my opinion.
</p>
<p><sub>1. <a href="http://docs.python.org/3.3/faq/programming.html#is-there-an-equivalent-of-c-s-ternary-operator" rel="noreferrer">Is there an equivalent of C’s ”?:” ternary operator?</a></sub></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-make-a-flat-list-out-of-list-of-lists-score-1764924-in-2019" class="level3">
<h3>48: How to make a flat list out of list of lists? (score <a href="https://stackoverflow.com/q/952914.html">1764924</a> in 2019)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>I wonder whether there is a shortcut to make a simple list out of list of lists in Python.</p>
<p>I can do that in a <code>for</code> loop, but maybe there is some cool “one-liner”? I tried it with <code>reduce()</code>, but I get an error.</p>
<p><strong>Code</strong></p>
<div class="sourceCode" id="cb410"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb410-1"><a href="#cb410-1"></a>l <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], [<span class="dv">7</span>], [<span class="dv">8</span>, <span class="dv">9</span>]]</span>
<span id="cb410-2"><a href="#cb410-2"></a><span class="bu">reduce</span>(<span class="kw">lambda</span> x, y: x.extend(y), l)</span></code></pre></div>
<p><strong>Error message</strong></p>
<div class="sourceCode" id="cb411"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb411-1"><a href="#cb411-1"></a>Traceback (most recent call last):</span>
<span id="cb411-2"><a href="#cb411-2"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb411-3"><a href="#cb411-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;</span></span>
<span id="cb411-4"><a href="#cb411-4"></a><span class="pp">AttributeError</span>: <span class="st">&#39;NoneType&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;extend&#39;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-4134" class="level4">
<h4>Answer accepted (score 4134)</h4>
<p>Given a list of lists <code>l</code>,</p>
<p><code>flat_list = [item for sublist in l for item in sublist]</code></p>
<p>which means:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb412-1"><a href="#cb412-1"></a>flat_list <span class="op">=</span> []</span>
<span id="cb412-2"><a href="#cb412-2"></a><span class="cf">for</span> sublist <span class="kw">in</span> l:</span>
<span id="cb412-3"><a href="#cb412-3"></a>    <span class="cf">for</span> item <span class="kw">in</span> sublist:</span>
<span id="cb412-4"><a href="#cb412-4"></a>        flat_list.append(item)</span></code></pre></div>
<p>is faster than the shortcuts posted so far. (<code>l</code> is the list to flatten.)</p>
<p>Here is the corresponding function:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb413-1"><a href="#cb413-1"></a>flatten <span class="op">=</span> <span class="kw">lambda</span> l: [item <span class="cf">for</span> sublist <span class="kw">in</span> l <span class="cf">for</span> item <span class="kw">in</span> sublist]</span></code></pre></div>
<p>As evidence, you can use the <code>timeit</code> module in the standard library:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb414-1"><a href="#cb414-1"></a>$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;[item for sublist in l for item in sublist]&#39;</span></span>
<span id="cb414-2"><a href="#cb414-2"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">143</span> usec per loop</span>
<span id="cb414-3"><a href="#cb414-3"></a>$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;sum(l, [])&#39;</span></span>
<span id="cb414-4"><a href="#cb414-4"></a><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">969</span> usec per loop</span>
<span id="cb414-5"><a href="#cb414-5"></a>$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;reduce(lambda x,y: x+y,l)&#39;</span></span>
<span id="cb414-6"><a href="#cb414-6"></a><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="fl">1.1</span> msec per loop</span></code></pre></div>
<p>Explanation: the shortcuts based on <code>+</code> (including the implied use in <code>sum</code>) are, of necessity, <code>O(L**2)</code> when there are L sublists – as the intermediate result list keeps getting longer, at each step a new intermediate result list object gets allocated, and all the items in the previous intermediate result must be copied over (as well as a few new ones added at the end). So, for simplicity and without actual loss of generality, say you have L sublists of I items each: the first I items are copied back and forth L-1 times, the second I items L-2 times, and so on; total number of copies is I times the sum of x for x from 1 to L excluded, i.e., <code>I * (L**2)/2</code>.</p>
<p>The list comprehension just generates one list, once, and copies each item over (from its original place of residence to the result list) also exactly once.</p>
</section>
<section id="answer-2-score-1360" class="level4">
<h4>Answer 2 (score 1360)</h4>
<p>You can use <a href="http://docs.python.org/2/library/itertools.html#itertools.chain" rel="noreferrer"><code>itertools.chain()</code></a>:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb415-1"><a href="#cb415-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> itertools</span>
<span id="cb415-2"><a href="#cb415-2"></a><span class="op">&gt;&gt;&gt;</span> list2d <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">7</span>], [<span class="dv">8</span>,<span class="dv">9</span>]]</span>
<span id="cb415-3"><a href="#cb415-3"></a><span class="op">&gt;&gt;&gt;</span> merged <span class="op">=</span> <span class="bu">list</span>(itertools.chain(<span class="op">*</span>list2d))</span></code></pre></div>
<p>or, on Python &gt;=2.6, use <a href="http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable" rel="noreferrer"><code>itertools.chain.from_iterable()</code></a> which doesn’t require unpacking the list:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb416-1"><a href="#cb416-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> itertools</span>
<span id="cb416-2"><a href="#cb416-2"></a><span class="op">&gt;&gt;&gt;</span> list2d <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">7</span>], [<span class="dv">8</span>,<span class="dv">9</span>]]</span>
<span id="cb416-3"><a href="#cb416-3"></a><span class="op">&gt;&gt;&gt;</span> merged <span class="op">=</span> <span class="bu">list</span>(itertools.chain.from_iterable(list2d))</span></code></pre></div>
<p>This approach is arguably more readable than <code>[item for sublist in l for item in sublist]</code> and appears to be faster too:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb417-1"><a href="#cb417-1"></a>[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99;import itertools&#39;</span> <span class="st">&#39;list(itertools.chain.from_iterable(l))&#39;</span></span>
<span id="cb417-2"><a href="#cb417-2"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">24.2</span> usec per loop</span>
<span id="cb417-3"><a href="#cb417-3"></a>[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;[item for sublist in l for item in sublist]&#39;</span></span>
<span id="cb417-4"><a href="#cb417-4"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">45.2</span> usec per loop</span>
<span id="cb417-5"><a href="#cb417-5"></a>[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;sum(l, [])&#39;</span></span>
<span id="cb417-6"><a href="#cb417-6"></a><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">488</span> usec per loop</span>
<span id="cb417-7"><a href="#cb417-7"></a>[me<span class="op">@</span>home]$ python <span class="op">-</span>mtimeit <span class="op">-</span>s<span class="st">&#39;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&#39;</span> <span class="st">&#39;reduce(lambda x,y: x+y,l)&#39;</span></span>
<span id="cb417-8"><a href="#cb417-8"></a><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">522</span> usec per loop</span>
<span id="cb417-9"><a href="#cb417-9"></a>[me<span class="op">@</span>home]$ python <span class="op">--</span>version</span>
<span id="cb417-10"><a href="#cb417-10"></a>Python <span class="dv">2</span>.<span class="fl">7.3</span></span></code></pre></div>
</section>
<section id="answer-3-score-807" class="level4">
<h4>Answer 3 (score 807)</h4>
<p><strong>Note from the author</strong>: This is inefficient. But fun, because <a href="https://en.wikipedia.org/wiki/Monoid#Monoids_in_computer_science" rel="noreferrer">monoids</a> are awesome. It’s not appropriate for production Python code.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb418-1"><a href="#cb418-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">sum</span>(l, [])</span>
<span id="cb418-2"><a href="#cb418-2"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code></pre></div>
<p>This just sums the elements of iterable passed in the first argument, treating second argument as the initial value of the sum (if not given, <code>0</code> is used instead and this case will give you an error).</p>
<p>Because you are summing nested lists, you actually get <code>[1,3]+[2,4]</code> as a result of <code>sum([[1,3],[2,4]],[])</code>, which is equal to <code>[1,3,2,4]</code>.</p>
<p>Note that only works on lists of lists. For lists of lists of lists, you’ll need another solution.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-print-without-newline-or-space-score-1755449-in-2019" class="level3">
<h3>49: How to print without newline or space? (score <a href="https://stackoverflow.com/q/493386.html">1755449</a> in 2019)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<p>The question is in the title.</p>
<p>I’d like to do it in <a href="/questions/tagged/python" class="post-tag" title="show questions tagged &#39;python&#39;" rel="tag">python</a>. What I’d like to do in this example in <a href="/questions/tagged/c" class="post-tag" title="show questions tagged &#39;c&#39;" rel="tag">c</a>:</p>
<p>In C:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb419-1"><a href="#cb419-1"></a><span class="co">#include &lt;stdio.h&gt;</span></span>
<span id="cb419-2"><a href="#cb419-2"></a></span>
<span id="cb419-3"><a href="#cb419-3"></a><span class="bu">int</span> main() {</span>
<span id="cb419-4"><a href="#cb419-4"></a>    <span class="bu">int</span> i<span class="op">;</span></span>
<span id="cb419-5"><a href="#cb419-5"></a>    <span class="cf">for</span> (i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">10</span><span class="op">;</span> i<span class="op">++</span>) printf(<span class="st">&quot;.&quot;</span>)<span class="op">;</span></span>
<span id="cb419-6"><a href="#cb419-6"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb419-7"><a href="#cb419-7"></a>}</span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb420-1"><a href="#cb420-1"></a>..........</span></code></pre></div>
<p>In Python:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb421-1"><a href="#cb421-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">0</span>,<span class="dv">10</span>): <span class="bu">print</span> <span class="st">&#39;.&#39;</span></span>
<span id="cb421-2"><a href="#cb421-2"></a>.</span>
<span id="cb421-3"><a href="#cb421-3"></a>.</span>
<span id="cb421-4"><a href="#cb421-4"></a>.</span>
<span id="cb421-5"><a href="#cb421-5"></a>.</span>
<span id="cb421-6"><a href="#cb421-6"></a>.</span>
<span id="cb421-7"><a href="#cb421-7"></a>.</span>
<span id="cb421-8"><a href="#cb421-8"></a>.</span>
<span id="cb421-9"><a href="#cb421-9"></a>.</span>
<span id="cb421-10"><a href="#cb421-10"></a>.</span>
<span id="cb421-11"><a href="#cb421-11"></a>.</span>
<span id="cb421-12"><a href="#cb421-12"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">0</span>,<span class="dv">10</span>): <span class="bu">print</span> <span class="st">&#39;.&#39;</span>,</span>
<span id="cb421-13"><a href="#cb421-13"></a>. . . . . . . . . .</span></code></pre></div>
<p>In Python <code>print</code> will add a <code>\n</code> or space, how can I avoid that? Now, it’s just an example. Don’t tell me I can first build a string then print it. I’d like to know how to “append” strings to <code>stdout</code>.</p>
</section>
<section id="answer-accepted-score-2357" class="level4">
<h4>Answer accepted (score 2357)</h4>
<h5>
General way
</h2>
<div class="sourceCode" id="cb422"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb422-1"><a href="#cb422-1"></a><span class="im">import</span> sys</span>
<span id="cb422-2"><a href="#cb422-2"></a>sys.stdout.write(<span class="st">&#39;.&#39;</span>)</span></code></pre></div>
<p>You may also need to call</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb423-1"><a href="#cb423-1"></a>sys.stdout.flush()</span></code></pre></div>
<p>to ensure <code>stdout</code> is flushed immediately.</p>
<h5>
Python 2.6+
</h2>
<p>From Python 2.6 you can import the <code>print</code> function from Python 3:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb424-1"><a href="#cb424-1"></a><span class="im">from</span> __future__ <span class="im">import</span> print_function</span></code></pre></div>
<p>This allows you to use the Python 3 solution below.</p>
<h5>
Python 3
</h2>
<p>In Python 3, the <code>print</code> statement has been changed into a function. In Python 3, you can instead do:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb425-1"><a href="#cb425-1"></a><span class="bu">print</span>(<span class="st">&#39;.&#39;</span>, end<span class="op">=</span><span class="st">&#39;&#39;</span>)</span></code></pre></div>
<p>This also works in Python 2, provided that you’ve used <code>from __future__ import print_function</code>.</p>
<p>If you are having trouble with buffering, you can flush the output by adding <code>flush=True</code> keyword argument:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb426-1"><a href="#cb426-1"></a><span class="bu">print</span>(<span class="st">&#39;.&#39;</span>, end<span class="op">=</span><span class="st">&#39;&#39;</span>, flush<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>However, note that the <code>flush</code> keyword is not available in the version of the <code>print</code> function imported from <code>__future__</code> in Python 2; it only works in Python 3, more specifically 3.3 and later. In earlier versions you’ll still need to flush manually with a call to <code>sys.stdout.flush()</code>.</p>
<h5>
Sources
</h2>
<ol>
<li>
<a href="https://docs.python.org/2/library/functions.html#print" rel="noreferrer">https://docs.python.org/2/library/functions.html#print</a>
</li>
<li>
<a href="https://docs.python.org/2/library/__future__.html" rel="noreferrer">https://docs.python.org/2/library/<strong>future</strong>.html</a>
</li>
<li>
<a href="https://docs.python.org/3/library/functions.html#print" rel="noreferrer">https://docs.python.org/3/library/functions.html#print</a>
</li>
</ol>
</section>
<section id="answer-2-score-293" class="level4">
<h4>Answer 2 (score 293)</h4>
<p>It should be as simple as described at this link by Guido Van Rossum:</p>
<p>Re: How does one print without a c/r ?</p>
<p><a href="http://legacy.python.org/search/hypermail/python-1992/0115.html" rel="noreferrer">http://legacy.python.org/search/hypermail/python-1992/0115.html</a></p>
<blockquote>
<p>
Is it possible to print something but not automatically have a carriage return appended to it ?
</p>
</blockquote>
<p>
Yes, append a comma after the last argument to print. For instance, this loop prints the numbers 0..9 on a line separated by spaces. Note the parameterless “print” that adds the final newline:
</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb427-1"><a href="#cb427-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb427-2"><a href="#cb427-2"></a>...     <span class="bu">print</span> i,</span>
<span id="cb427-3"><a href="#cb427-3"></a>... <span class="cf">else</span>:</span>
<span id="cb427-4"><a href="#cb427-4"></a>...     <span class="bu">print</span></span>
<span id="cb427-5"><a href="#cb427-5"></a>...</span>
<span id="cb427-6"><a href="#cb427-6"></a><span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span></span>
<span id="cb427-7"><a href="#cb427-7"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre></div>
</section>
<section id="answer-3-score-164" class="level4">
<h4>Answer 3 (score 164)</h4>
<p><em>Note: The title of this question used to be something like “How to printf in python?”</em></p>
<p>Since people may come here looking for it based on the title, Python also supports printf-style substitution:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb428-1"><a href="#cb428-1"></a><span class="op">&gt;&gt;&gt;</span> strings <span class="op">=</span> [ <span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span> ]</span>
<span id="cb428-2"><a href="#cb428-2"></a><span class="op">&gt;&gt;&gt;</span></span>
<span id="cb428-3"><a href="#cb428-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">3</span>):</span>
<span id="cb428-4"><a href="#cb428-4"></a>...     <span class="bu">print</span> <span class="st">&quot;Item </span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> (i, strings[i])</span>
<span id="cb428-5"><a href="#cb428-5"></a>...</span>
<span id="cb428-6"><a href="#cb428-6"></a>Item <span class="dv">0</span>: one</span>
<span id="cb428-7"><a href="#cb428-7"></a>Item <span class="dv">1</span>: two</span>
<span id="cb428-8"><a href="#cb428-8"></a>Item <span class="dv">2</span>: three</span></code></pre></div>
<p>And, you can handily multiply string values:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb429-1"><a href="#cb429-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> <span class="st">&quot;.&quot;</span> <span class="op">*</span> <span class="dv">10</span></span>
<span id="cb429-2"><a href="#cb429-2"></a>..........</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="generate-random-integers-between-0-and-9-score-1740843-in-2018" class="level3">
<h3>50: Generate random integers between 0 and 9 (score <a href="https://stackoverflow.com/q/3996904.html">1740843</a> in 2018)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>How can I generate random integers between 0 and 9 (inclusive) in Python?</p>
<p>For example, <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>5</code>, <code>6</code>, <code>7</code>, <code>8</code>, <code>9</code></p>
</section>
<section id="answer-accepted-score-1891" class="level4">
<h4>Answer accepted (score 1891)</h4>
<p>Try:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb430-1"><a href="#cb430-1"></a><span class="im">from</span> random <span class="im">import</span> randrange</span>
<span id="cb430-2"><a href="#cb430-2"></a><span class="bu">print</span>(randrange(<span class="dv">10</span>))</span></code></pre></div>
<p>More info: <a href="http://docs.python.org/library/random.html#random.randrange" rel="noreferrer">http://docs.python.org/library/random.html#random.randrange</a></p>
</section>
<section id="answer-2-score-371" class="level4">
<h4>Answer 2 (score 371)</h4>
<div class="sourceCode" id="cb431"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb431-1"><a href="#cb431-1"></a><span class="im">import</span> random</span>
<span id="cb431-2"><a href="#cb431-2"></a><span class="bu">print</span>(random.randint(<span class="dv">0</span>,<span class="dv">9</span>))</span></code></pre></div>
<hr>
<div class="sourceCode" id="cb432"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb432-1"><a href="#cb432-1"></a>random.randint(a, b)</span></code></pre></div>
<p>Return a random integer N such that a &lt;= N &lt;= b.</p>
<p>Docs: <a href="https://docs.python.org/3.1/library/random.html#random.randint" rel="noreferrer">https://docs.python.org/3.1/library/random.html#random.randint</a></p>
</section>
<section id="answer-3-score-111" class="level4">
<h4>Answer 3 (score 111)</h4>
<p>Try this:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb433-1"><a href="#cb433-1"></a><span class="im">from</span> random <span class="im">import</span> randrange, uniform</span>
<span id="cb433-2"><a href="#cb433-2"></a></span>
<span id="cb433-3"><a href="#cb433-3"></a><span class="co"># randrange gives you an integral value</span></span>
<span id="cb433-4"><a href="#cb433-4"></a>irand <span class="op">=</span> randrange(<span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb433-5"><a href="#cb433-5"></a></span>
<span id="cb433-6"><a href="#cb433-6"></a><span class="co"># uniform gives you a floating-point value</span></span>
<span id="cb433-7"><a href="#cb433-7"></a>frand <span class="op">=</span> uniform(<span class="dv">0</span>, <span class="dv">10</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-copy-a-file-in-python-score-1692227-in-2018" class="level3">
<h3>51: How do I copy a file in Python? (score <a href="https://stackoverflow.com/q/123198.html">1692227</a> in 2018)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>How do I copy a file in Python?</p>
<p>I couldn’t find anything under <a href="https://docs.python.org/2/library/os.html" rel="noreferrer"><code>os</code></a>.</p>
</section>
<section id="answer-accepted-score-2597" class="level4">
<h4>Answer accepted (score 2597)</h4>
<p><a href="http://docs.python.org/3/library/shutil.html" rel="noreferrer"><code>shutil</code></a> has many methods you can use. One of which is:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb434-1"><a href="#cb434-1"></a><span class="im">from</span> shutil <span class="im">import</span> copyfile</span>
<span id="cb434-2"><a href="#cb434-2"></a></span>
<span id="cb434-3"><a href="#cb434-3"></a>copyfile(src, dst)</span></code></pre></div>
<p>Copy the contents of the file named <code>src</code> to a file named <code>dst</code>. The destination location must be writable; otherwise, an <code>IOError</code> exception will be raised. If <code>dst</code> already exists, it will be replaced. Special files such as character or block devices and pipes cannot be copied with this function. <code>src</code> and <code>dst</code> are path names given as strings.</p>
</section>
<section id="answer-2-score-976" class="level4">
<h4>Answer 2 (score 976)</h4>
<div class="sourceCode" id="cb435"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb435-1"><a href="#cb435-1"></a>┌──────────────────┬────────┬───────────┬───────┬────────────────┐</span>
<span id="cb435-2"><a href="#cb435-2"></a>│     Function     │ Copies │   Copies  │Can use│   Destination  │</span>
<span id="cb435-3"><a href="#cb435-3"></a>│                  │metadata│permissions│buffer │may be directory│</span>
<span id="cb435-4"><a href="#cb435-4"></a>├──────────────────┼────────┼───────────┼───────┼────────────────┤</span>
<span id="cb435-5"><a href="#cb435-5"></a>│shutil.copy       │   No   │    Yes    │   No  │      Yes       │</span>
<span id="cb435-6"><a href="#cb435-6"></a>│shutil.copyfile   │   No   │     No    │   No  │       No       │</span>
<span id="cb435-7"><a href="#cb435-7"></a>│shutil.copy2      │  Yes   │    Yes    │   No  │      Yes       │</span>
<span id="cb435-8"><a href="#cb435-8"></a>│shutil.copyfileobj│   No   │     No    │  Yes  │       No       │</span>
<span id="cb435-9"><a href="#cb435-9"></a>└──────────────────┴────────┴───────────┴───────┴────────────────┘</span></code></pre></div>
</section>
<section id="answer-3-score-681" class="level4">
<h4>Answer 3 (score 681)</h4>
<p><a href="https://docs.python.org/2/library/shutil.html#shutil.copy2" rel="noreferrer"><code>copy2(src,dst)</code></a> is often more useful than <a href="https://docs.python.org/2/library/shutil.html#shutil.copyfile" rel="noreferrer"><code>copyfile(src,dst)</code></a> because:</p>
<ul>
<li>
it allows <code>dst</code> to be a <em>directory</em> (instead of the complete target filename), in which case the <a href="https://docs.python.org/2/library/os.path.html#os.path.basename" rel="noreferrer">basename</a> of <code>src</code> is used for creating the new file;
</li>
<li>
it preserves the original modification and access info (mtime and atime) in the file metadata (however, this comes with a slight overhead).
</li>
</ul>
<p>Here is a short example:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb436-1"><a href="#cb436-1"></a><span class="im">import</span> shutil</span>
<span id="cb436-2"><a href="#cb436-2"></a>shutil.copy2(<span class="st">&#39;/src/dir/file.ext&#39;</span>, <span class="st">&#39;/dst/dir/newname.ext&#39;</span>) <span class="co"># complete target filename given</span></span>
<span id="cb436-3"><a href="#cb436-3"></a>shutil.copy2(<span class="st">&#39;/src/file.ext&#39;</span>, <span class="st">&#39;/dst/dir&#39;</span>) <span class="co"># target filename is /dst/dir/file.ext</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-declare-an-array-in-python-score-1679894-in-2014" class="level3">
<h3>52: How to declare an array in Python? (score <a href="https://stackoverflow.com/q/1514553.html">1679894</a> in 2014)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>How do I declare an array in <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a>?</p>
<p>I can’t find any reference to arrays in the documentation.</p>
</section>
<section id="answer-2-score-332" class="level4">
<h4>Answer 2 (score 332)</h4>
<div class="sourceCode" id="cb437"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb437-1"><a href="#cb437-1"></a>variable <span class="op">=</span> []</span></code></pre></div>
<p>Now <code>variable</code> refers to an empty list<sup>*</sup>.</p>
<p>Of course this is an assignment, not a declaration. There’s no way to say in Python “this variable should never refer to anything other than a list”, since Python is dynamically typed.</p>
<hr>
<p><sup>*</sup>The default built-in Python type is called a <em>list</em>, not an array. It is an ordered container of arbitrary length that can hold a heterogenous collection of objects (their types do not matter and can be freely mixed). This should not be confused with the <a href="https://docs.python.org/2/library/array.html" rel="noreferrer"><code>array</code> module</a>, which offers a type closer to the C <code>array</code> type; the contents must be homogenous (all of the same type), but the length is still dynamic.</p>
</section>
<section id="answer-3-score-118" class="level4">
<h4>Answer 3 (score 118)</h4>
<p>You don’t actually declare things, but this is how you create an array in Python:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb438-1"><a href="#cb438-1"></a><span class="im">from</span> array <span class="im">import</span> array</span>
<span id="cb438-2"><a href="#cb438-2"></a>intarray <span class="op">=</span> array(<span class="st">&#39;i&#39;</span>)</span></code></pre></div>
<p>For more info see the array module: <a href="http://docs.python.org/library/array.html" rel="noreferrer">http://docs.python.org/library/array.html</a></p>
<p>Now possible you don’t want an array, but a list, but others have answered that already. :)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-split-a-string-into-a-list-score-1677830-in-2019" class="level3">
<h3>53: How to split a string into a list? (score <a href="https://stackoverflow.com/q/743806.html">1677830</a> in 2019)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>I want my Python function to split a sentence (input) and store each word in a list. My current code splits the sentence, but does not store the words as a list. How do I do that?</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb439-1"><a href="#cb439-1"></a><span class="kw">def</span> split_line(text):</span>
<span id="cb439-2"><a href="#cb439-2"></a></span>
<span id="cb439-3"><a href="#cb439-3"></a>    <span class="co"># split the text</span></span>
<span id="cb439-4"><a href="#cb439-4"></a>    words <span class="op">=</span> text.split()</span>
<span id="cb439-5"><a href="#cb439-5"></a></span>
<span id="cb439-6"><a href="#cb439-6"></a>    <span class="co"># for each word in the line:</span></span>
<span id="cb439-7"><a href="#cb439-7"></a>    <span class="cf">for</span> word <span class="kw">in</span> words:</span>
<span id="cb439-8"><a href="#cb439-8"></a></span>
<span id="cb439-9"><a href="#cb439-9"></a>        <span class="co"># print the word</span></span>
<span id="cb439-10"><a href="#cb439-10"></a>        <span class="bu">print</span>(words)</span></code></pre></div>
</section>
<section id="answer-accepted-score-464" class="level4">
<h4>Answer accepted (score 464)</h4>
<div class="sourceCode" id="cb440"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb440-1"><a href="#cb440-1"></a>text.split()</span></code></pre></div>
<p>This should be enough to store each word in a list. <code>words</code> is already a list of the words from the sentence, so there is no need for the loop.</p>
<p>Second, it might be a typo, but you have your loop a little messed up. If you really did want to use append, it would be:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb441-1"><a href="#cb441-1"></a>words.append(word)</span></code></pre></div>
<p>not</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb442-1"><a href="#cb442-1"></a>word.append(words)</span></code></pre></div>
</section>
<section id="answer-2-score-429" class="level4">
<h4>Answer 2 (score 429)</h4>
<p>Splits the string in <code>text</code> on any consecutive runs of whitespace.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb443-1"><a href="#cb443-1"></a>words <span class="op">=</span> text.split()      </span></code></pre></div>
<p>Split the string in <code>text</code> on delimiter: <code>","</code>.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb444-1"><a href="#cb444-1"></a>words <span class="op">=</span> text.split(<span class="st">&quot;,&quot;</span>)   </span></code></pre></div>
<p>The words variable will be a <code>list</code> and contain the words from <code>text</code> split on the delimiter.</p>
</section>
<section id="answer-3-score-84" class="level4">
<h4>Answer 3 (score 84)</h4>
<p><a href="https://docs.python.org/2/library/stdtypes.html#str.split" rel="noreferrer">str.split()</a></p>
<blockquote>
<p>
Return a <strong>list of the words</strong> in the string, using sep as the delimiter … If sep is not specified or is None, a different splitting algorithm is applied: runs of consecutive whitespace are regarded as a single separator, and the result will contain no empty strings at the start or end if the string has leading or trailing whitespace.
</p>
</blockquote>
<div class="sourceCode" id="cb445"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb445-1"><a href="#cb445-1"></a><span class="op">&gt;&gt;&gt;</span> line<span class="op">=</span><span class="st">&quot;a sentence with a few words&quot;</span></span>
<span id="cb445-2"><a href="#cb445-2"></a><span class="op">&gt;&gt;&gt;</span> line.split()</span>
<span id="cb445-3"><a href="#cb445-3"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;sentence&#39;</span>, <span class="st">&#39;with&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;few&#39;</span>, <span class="st">&#39;words&#39;</span>]</span>
<span id="cb445-4"><a href="#cb445-4"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="fastest-way-to-check-if-a-value-exists-in-a-list-score-1650273-in-2019" class="level3">
<h3>54: Fastest way to check if a value exists in a list (score <a href="https://stackoverflow.com/q/7571635.html">1650273</a> in 2019)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>What is the fastest way to know if a value exists in a list (a list with millions of values in it) and what its index is?</p>
<p>I know that all values in the list are unique as in this example.</p>
<p><strong>The first method I try is (3.8 sec in my real code):</strong></p>
<div class="sourceCode" id="cb446"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb446-1"><a href="#cb446-1"></a>a <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb446-2"><a href="#cb446-2"></a></span>
<span id="cb446-3"><a href="#cb446-3"></a><span class="cf">if</span> a.count(<span class="dv">7</span>) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb446-4"><a href="#cb446-4"></a>    b<span class="op">=</span>a.index(<span class="dv">7</span>)</span>
<span id="cb446-5"><a href="#cb446-5"></a>    <span class="co">&quot;Do something with variable b&quot;</span></span></code></pre></div>
<p><strong>The second method I try is (2x faster: 1.9 sec for my real code):</strong></p>
<div class="sourceCode" id="cb447"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb447-1"><a href="#cb447-1"></a>a <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb447-2"><a href="#cb447-2"></a></span>
<span id="cb447-3"><a href="#cb447-3"></a><span class="cf">try</span>:</span>
<span id="cb447-4"><a href="#cb447-4"></a>    b<span class="op">=</span>a.index(<span class="dv">7</span>)</span>
<span id="cb447-5"><a href="#cb447-5"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb447-6"><a href="#cb447-6"></a>    <span class="co">&quot;Do nothing&quot;</span></span>
<span id="cb447-7"><a href="#cb447-7"></a><span class="cf">else</span>:</span>
<span id="cb447-8"><a href="#cb447-8"></a>    <span class="co">&quot;Do something with variable b&quot;</span></span></code></pre></div>
<p><strong>Proposed methods from Stack Overflow user (2.74 sec for my real code):</strong></p>
<div class="sourceCode" id="cb448"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb448-1"><a href="#cb448-1"></a>a <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb448-2"><a href="#cb448-2"></a><span class="cf">if</span> <span class="dv">7</span> <span class="kw">in</span> a:</span>
<span id="cb448-3"><a href="#cb448-3"></a>    a.index(<span class="dv">7</span>)</span></code></pre></div>
<p>
In my real code, the first method takes 3.81 sec and the second method takes 1.88 sec. It’s a good improvement, but:
</p>
<p>I’m a beginner with Python/scripting, and is there a faster way to do the same things and save more processing time?</p>
<p><strong>More specific explication for my application:</strong></p>
<p>In the Blender API I can access a list of particles:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb449-1"><a href="#cb449-1"></a>particles <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, etc.]</span></code></pre></div>
<p>From there, I can access a particle’s location:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb450-1"><a href="#cb450-1"></a>particles[x].location <span class="op">=</span> [x,y,z]</span></code></pre></div>
<p>And for each particle I test if a neighbour exists by searching each particle location like so:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb451-1"><a href="#cb451-1"></a><span class="cf">if</span> [x<span class="op">+</span><span class="dv">1</span>,y,z] <span class="kw">in</span> particles.location</span>
<span id="cb451-2"><a href="#cb451-2"></a>    <span class="co">&quot;Find the identity of this neighbour particle in x:the particle&#39;s index</span></span>
<span id="cb451-3"><a href="#cb451-3"></a><span class="co">    in the array&quot;</span></span>
<span id="cb451-4"><a href="#cb451-4"></a>    particles.index([x<span class="op">+</span><span class="dv">1</span>,y,z])</span></code></pre></div>
</section>
<section id="answer-accepted-score-1391" class="level4">
<h4>Answer accepted (score 1391)</h4>
<div class="sourceCode" id="cb452"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb452-1"><a href="#cb452-1"></a><span class="dv">7</span> <span class="kw">in</span> a</span></code></pre></div>
<p>Clearest and fastest way to do it.</p>
<p>You can also consider using a <code>set</code>, but constructing that set from your list may take more time than faster membership testing will save. The only way to be certain is to benchmark well. (this also depends on what operations you require)</p>
</section>
<section id="answer-2-score-178" class="level4">
<h4>Answer 2 (score 178)</h4>
<p>As stated by others, <code>in</code> can be very slow for large lists. Here are some comparisons of the performances for <code>in</code>, <code>set</code> and <code>bisect</code>. Note the time (in second) is in log scale.</p>
<p><a href="https://i.stack.imgur.com/HSRgg.png" rel="noreferrer"><img src="https://i.stack.imgur.com/HSRgg.png" alt="enter image description here"></a></p>
<p>Code for testing:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb453-1"><a href="#cb453-1"></a><span class="im">import</span> random</span>
<span id="cb453-2"><a href="#cb453-2"></a><span class="im">import</span> bisect</span>
<span id="cb453-3"><a href="#cb453-3"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb453-4"><a href="#cb453-4"></a><span class="im">import</span> math</span>
<span id="cb453-5"><a href="#cb453-5"></a><span class="im">import</span> time</span>
<span id="cb453-6"><a href="#cb453-6"></a></span>
<span id="cb453-7"><a href="#cb453-7"></a><span class="kw">def</span> method_in(a,b,c):</span>
<span id="cb453-8"><a href="#cb453-8"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb453-9"><a href="#cb453-9"></a>    <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(a):</span>
<span id="cb453-10"><a href="#cb453-10"></a>        <span class="cf">if</span> x <span class="kw">in</span> b:</span>
<span id="cb453-11"><a href="#cb453-11"></a>            c[i] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb453-12"><a href="#cb453-12"></a>    <span class="cf">return</span>(time.time()<span class="op">-</span>start_time)   </span>
<span id="cb453-13"><a href="#cb453-13"></a></span>
<span id="cb453-14"><a href="#cb453-14"></a><span class="kw">def</span> method_set_in(a,b,c):</span>
<span id="cb453-15"><a href="#cb453-15"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb453-16"><a href="#cb453-16"></a>    s <span class="op">=</span> <span class="bu">set</span>(b)</span>
<span id="cb453-17"><a href="#cb453-17"></a>    <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(a):</span>
<span id="cb453-18"><a href="#cb453-18"></a>        <span class="cf">if</span> x <span class="kw">in</span> s:</span>
<span id="cb453-19"><a href="#cb453-19"></a>            c[i] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb453-20"><a href="#cb453-20"></a>    <span class="cf">return</span>(time.time()<span class="op">-</span>start_time)</span>
<span id="cb453-21"><a href="#cb453-21"></a></span>
<span id="cb453-22"><a href="#cb453-22"></a><span class="kw">def</span> method_bisect(a,b,c):</span>
<span id="cb453-23"><a href="#cb453-23"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb453-24"><a href="#cb453-24"></a>    b.sort()</span>
<span id="cb453-25"><a href="#cb453-25"></a>    <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(a):</span>
<span id="cb453-26"><a href="#cb453-26"></a>        index <span class="op">=</span> bisect.bisect_left(b,x)</span>
<span id="cb453-27"><a href="#cb453-27"></a>        <span class="cf">if</span> index <span class="op">&lt;</span> <span class="bu">len</span>(a):</span>
<span id="cb453-28"><a href="#cb453-28"></a>            <span class="cf">if</span> x <span class="op">==</span> b[index]:</span>
<span id="cb453-29"><a href="#cb453-29"></a>                c[i] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb453-30"><a href="#cb453-30"></a>    <span class="cf">return</span>(time.time()<span class="op">-</span>start_time)</span>
<span id="cb453-31"><a href="#cb453-31"></a></span>
<span id="cb453-32"><a href="#cb453-32"></a><span class="kw">def</span> profile():</span>
<span id="cb453-33"><a href="#cb453-33"></a>    time_method_in <span class="op">=</span> []</span>
<span id="cb453-34"><a href="#cb453-34"></a>    time_method_set_in <span class="op">=</span> []</span>
<span id="cb453-35"><a href="#cb453-35"></a>    time_method_bisect <span class="op">=</span> []</span>
<span id="cb453-36"><a href="#cb453-36"></a></span>
<span id="cb453-37"><a href="#cb453-37"></a>    Nls <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>,<span class="dv">20000</span>,<span class="dv">1000</span>)]</span>
<span id="cb453-38"><a href="#cb453-38"></a>    <span class="cf">for</span> N <span class="kw">in</span> Nls:</span>
<span id="cb453-39"><a href="#cb453-39"></a>        a <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,N)]</span>
<span id="cb453-40"><a href="#cb453-40"></a>        random.shuffle(a)</span>
<span id="cb453-41"><a href="#cb453-41"></a>        b <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,N)]</span>
<span id="cb453-42"><a href="#cb453-42"></a>        random.shuffle(b)</span>
<span id="cb453-43"><a href="#cb453-43"></a>        c <span class="op">=</span> [<span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,N)]</span>
<span id="cb453-44"><a href="#cb453-44"></a></span>
<span id="cb453-45"><a href="#cb453-45"></a>        time_method_in.append(math.log(method_in(a,b,c)))</span>
<span id="cb453-46"><a href="#cb453-46"></a>        time_method_set_in.append(math.log(method_set_in(a,b,c)))</span>
<span id="cb453-47"><a href="#cb453-47"></a>        time_method_bisect.append(math.log(method_bisect(a,b,c)))</span>
<span id="cb453-48"><a href="#cb453-48"></a></span>
<span id="cb453-49"><a href="#cb453-49"></a>    plt.plot(Nls,time_method_in,marker<span class="op">=</span><span class="st">&#39;o&#39;</span>,color<span class="op">=</span><span class="st">&#39;r&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;-&#39;</span>,label<span class="op">=</span><span class="st">&#39;in&#39;</span>)</span>
<span id="cb453-50"><a href="#cb453-50"></a>    plt.plot(Nls,time_method_set_in,marker<span class="op">=</span><span class="st">&#39;o&#39;</span>,color<span class="op">=</span><span class="st">&#39;b&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;-&#39;</span>,label<span class="op">=</span><span class="st">&#39;set&#39;</span>)</span>
<span id="cb453-51"><a href="#cb453-51"></a>    plt.plot(Nls,time_method_bisect,marker<span class="op">=</span><span class="st">&#39;o&#39;</span>,color<span class="op">=</span><span class="st">&#39;g&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;-&#39;</span>,label<span class="op">=</span><span class="st">&#39;bisect&#39;</span>)</span>
<span id="cb453-52"><a href="#cb453-52"></a>    plt.xlabel(<span class="st">&#39;list size&#39;</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb453-53"><a href="#cb453-53"></a>    plt.ylabel(<span class="st">&#39;log(time)&#39;</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb453-54"><a href="#cb453-54"></a>    plt.legend(loc <span class="op">=</span> <span class="st">&#39;upper left&#39;</span>)</span>
<span id="cb453-55"><a href="#cb453-55"></a>    plt.show()</span></code></pre></div>
</section>
<section id="answer-3-score-32" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>You could put your items into a <a href="http://docs.python.org/library/stdtypes.html#set-types-set-frozenset" rel="noreferrer"><code>set</code></a>. Set lookups are very efficient.</p>
<p>Try:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb454-1"><a href="#cb454-1"></a>s <span class="op">=</span> <span class="bu">set</span>(a)</span>
<span id="cb454-2"><a href="#cb454-2"></a><span class="cf">if</span> <span class="dv">7</span> <span class="kw">in</span> s:</span>
<span id="cb454-3"><a href="#cb454-3"></a>  <span class="co"># do stuff</span></span></code></pre></div>
<p><strong>edit</strong> In a comment you say that you’d like to get the index of the element. Unfortunately, sets have no notion of element position. An alternative is to pre-sort your list and then use <a href="https://stackoverflow.com/questions/212358/binary-search-in-python">binary search</a> every time you need to find an element.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-merge-two-dictionaries-in-a-single-expression-score-1648573-in-2019" class="level3">
<h3>55: How do I merge two dictionaries in a single expression? (score <a href="https://stackoverflow.com/q/38987.html">1648573</a> in 2019)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>I have two Python dictionaries, and I want to write a single expression that returns these two dictionaries, merged. The <code>update()</code> method would be what I need, if it returned its result instead of modifying a dict in-place.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb455-1"><a href="#cb455-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</span>
<span id="cb455-2"><a href="#cb455-2"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</span>
<span id="cb455-3"><a href="#cb455-3"></a><span class="op">&gt;&gt;&gt;</span> z <span class="op">=</span> x.update(y)</span>
<span id="cb455-4"><a href="#cb455-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(z)</span>
<span id="cb455-5"><a href="#cb455-5"></a><span class="va">None</span></span>
<span id="cb455-6"><a href="#cb455-6"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb455-7"><a href="#cb455-7"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</span></code></pre></div>
<p>How can I get that final merged dict in <code>z</code>, not <code>x</code>?</p>
<p>(To be extra-clear, the last-one-wins conflict-handling of <code>dict.update()</code> is what I’m looking for as well.)</p>
</section>
<section id="answer-accepted-score-4917" class="level4">
<h4>Answer accepted (score 4917)</h4>
<blockquote>
<h5>
How can I merge two Python dictionaries in a single expression?
</h2>
</blockquote>
<p>For dictionaries <code>x</code> and <code>y</code>, <code>z</code> becomes a shallowly merged dictionary with values from <code>y</code> replacing those from <code>x</code>.</p>
<ul>
<li>
<p>
In Python 3.5 or greater:
</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb456-1"><a href="#cb456-1"></a>z <span class="op">=</span> {<span class="op">**</span>x, <span class="op">**</span>y}</span>
<span id="cb456-2"><a href="#cb456-2"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb456-3"><a href="#cb456-3"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>In Python <span class="dv">2</span>, (<span class="kw">or</span> <span class="fl">3.4</span> <span class="kw">or</span> lower) write a function:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb456-4"><a href="#cb456-4"></a></span>
<span id="cb456-5"><a href="#cb456-5"></a>```python</span>
<span id="cb456-6"><a href="#cb456-6"></a><span class="kw">def</span> merge_two_dicts(x, y):</span>
<span id="cb456-7"><a href="#cb456-7"></a>    z <span class="op">=</span> x.copy()   <span class="co"># start with x&#39;s keys and values</span></span>
<span id="cb456-8"><a href="#cb456-8"></a>    z.update(y)    <span class="co"># modifies z with y&#39;s keys and values &amp; returns None</span></span>
<span id="cb456-9"><a href="#cb456-9"></a>    <span class="cf">return</span> z</span></code></pre></div>
<p>and now:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb457-1"><a href="#cb457-1"></a>z <span class="op">=</span> merge_two_dicts(x, y)</span>
<span id="cb457-2"><a href="#cb457-2"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb457-3"><a href="#cb457-3"></a><span class="op">&lt;/</span>ul<span class="op">&gt;</span></span>
<span id="cb457-4"><a href="#cb457-4"></a></span>
<span id="cb457-5"><a href="#cb457-5"></a><span class="op">&lt;</span>h5<span class="op">&gt;</span>Explanation<span class="op">&lt;/</span>h3<span class="op">&gt;</span></span>
<span id="cb457-6"><a href="#cb457-6"></a></span>
<span id="cb457-7"><a href="#cb457-7"></a>Say you have two dicts <span class="kw">and</span> you want to merge them into a new <span class="bu">dict</span> without altering the original dicts:  </span>
<span id="cb457-8"><a href="#cb457-8"></a></span>
<span id="cb457-9"><a href="#cb457-9"></a>```python</span>
<span id="cb457-10"><a href="#cb457-10"></a>x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</span>
<span id="cb457-11"><a href="#cb457-11"></a>y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">4</span>}</span></code></pre></div>
<p>The desired result is to get a new dictionary (<code>z</code>) with the values merged, and the second dict’s values overwriting those from the first.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb458-1"><a href="#cb458-1"></a><span class="op">&gt;&gt;&gt;</span> z</span>
<span id="cb458-2"><a href="#cb458-2"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">4</span>}</span></code></pre></div>
<p>A new syntax for this, proposed in <a href="https://www.python.org/dev/peps/pep-0448" rel="noreferrer">PEP 448</a> and <a href="https://mail.python.org/pipermail/python-dev/2015-February/138564.html" rel="noreferrer">available as of Python 3.5</a>, is</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb459-1"><a href="#cb459-1"></a>z <span class="op">=</span> {<span class="op">**</span>x, <span class="op">**</span>y}</span></code></pre></div>
<p>And it is indeed a single expression.</p>
<p>Note that we can merge in with literal notation as well:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb460-1"><a href="#cb460-1"></a>z <span class="op">=</span> {<span class="op">**</span>x, <span class="st">&#39;foo&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;bar&#39;</span>: <span class="dv">2</span>, <span class="op">**</span>y}</span></code></pre></div>
<p>and now:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb461-1"><a href="#cb461-1"></a><span class="op">&gt;&gt;&gt;</span> z</span>
<span id="cb461-2"><a href="#cb461-2"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;foo&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;bar&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">4</span>}</span></code></pre></div>
<p>It is now showing as implemented in the <a href="https://www.python.org/dev/peps/pep-0478/#features-for-3-5" rel="noreferrer">release schedule for 3.5, PEP 478</a>, and it has now made its way into <a href="https://docs.python.org/dev/whatsnew/3.5.html#pep-448-additional-unpacking-generalizations" rel="noreferrer">What’s New in Python 3.5</a> document.</p>
<p>However, since many organizations are still on Python 2, you may wish to do this in a backwards compatible way. The classically Pythonic way, available in Python 2 and Python 3.0-3.4, is to do this as a two-step process:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb462-1"><a href="#cb462-1"></a>z <span class="op">=</span> x.copy()</span>
<span id="cb462-2"><a href="#cb462-2"></a>z.update(y) <span class="co"># which returns None since it mutates z</span></span></code></pre></div>
<p>In both approaches, <code>y</code> will come second and its values will replace <code>x</code>’s values, thus <code>'b'</code> will point to <code>3</code> in our final result.</p>
<h5>
Not yet on Python 3.5, but want a <em>single expression</em>
</h2>
<p>If you are not yet on Python 3.5, or need to write backward-compatible code, and you want this in a <em>single expression</em>, the most performant while correct approach is to put it in a function:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb463-1"><a href="#cb463-1"></a><span class="kw">def</span> merge_two_dicts(x, y):</span>
<span id="cb463-2"><a href="#cb463-2"></a>    <span class="co">&quot;&quot;&quot;Given two dicts, merge them into a new dict as a shallow copy.&quot;&quot;&quot;</span></span>
<span id="cb463-3"><a href="#cb463-3"></a>    z <span class="op">=</span> x.copy()</span>
<span id="cb463-4"><a href="#cb463-4"></a>    z.update(y)</span>
<span id="cb463-5"><a href="#cb463-5"></a>    <span class="cf">return</span> z</span></code></pre></div>
<p>and then you have a single expression:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb464-1"><a href="#cb464-1"></a>z <span class="op">=</span> merge_two_dicts(x, y)</span></code></pre></div>
<p>You can also make a function to merge an undefined number of dicts, from zero to a very large number:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb465-1"><a href="#cb465-1"></a><span class="kw">def</span> merge_dicts(<span class="op">*</span>dict_args):</span>
<span id="cb465-2"><a href="#cb465-2"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb465-3"><a href="#cb465-3"></a><span class="co">    Given any number of dicts, shallow copy and merge into a new dict,</span></span>
<span id="cb465-4"><a href="#cb465-4"></a><span class="co">    precedence goes to key value pairs in latter dicts.</span></span>
<span id="cb465-5"><a href="#cb465-5"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb465-6"><a href="#cb465-6"></a>    result <span class="op">=</span> {}</span>
<span id="cb465-7"><a href="#cb465-7"></a>    <span class="cf">for</span> dictionary <span class="kw">in</span> dict_args:</span>
<span id="cb465-8"><a href="#cb465-8"></a>        result.update(dictionary)</span>
<span id="cb465-9"><a href="#cb465-9"></a>    <span class="cf">return</span> result</span></code></pre></div>
<p>This function will work in Python 2 and 3 for all dicts. e.g. given dicts <code>a</code> to <code>g</code>:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb466-1"><a href="#cb466-1"></a>z <span class="op">=</span> merge_dicts(a, b, c, d, e, f, g) </span></code></pre></div>
<p>and key value pairs in <code>g</code> will take precedence over dicts <code>a</code> to <code>f</code>, and so on.</p>
<h5>
Critiques of Other Answers
</h2>
<p>Don’t use what you see in the formerly accepted answer:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb467-1"><a href="#cb467-1"></a>z <span class="op">=</span> <span class="bu">dict</span>(x.items() <span class="op">+</span> y.items())</span></code></pre></div>
<p>In Python 2, you create two lists in memory for each dict, create a third list in memory with length equal to the length of the first two put together, and then discard all three lists to create the dict. <strong>In Python 3, this will fail</strong> because you’re adding two <code>dict_items</code> objects together, not two lists -</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb468-1"><a href="#cb468-1"></a><span class="op">&gt;&gt;&gt;</span> c <span class="op">=</span> <span class="bu">dict</span>(a.items() <span class="op">+</span> b.items())</span>
<span id="cb468-2"><a href="#cb468-2"></a>Traceback (most recent call last):</span>
<span id="cb468-3"><a href="#cb468-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb468-4"><a href="#cb468-4"></a><span class="pp">TypeError</span>: unsupported operand <span class="bu">type</span>(s) <span class="cf">for</span> <span class="op">+</span>: <span class="st">&#39;dict_items&#39;</span> <span class="kw">and</span> <span class="st">&#39;dict_items&#39;</span></span></code></pre></div>
<p>and you would have to explicitly create them as lists, e.g. <code>z = dict(list(x.items()) + list(y.items()))</code>. This is a waste of resources and computation power.</p>
<p>Similarly, taking the union of <code>items()</code> in Python 3 (<code>viewitems()</code> in Python 2.7) will also fail when values are unhashable objects (like lists, for example). Even if your values are hashable, <strong>since sets are semantically unordered, the behavior is undefined in regards to precedence. So don’t do this:</strong></p>
<div class="sourceCode" id="cb469"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb469-1"><a href="#cb469-1"></a><span class="op">&gt;&gt;&gt;</span> c <span class="op">=</span> <span class="bu">dict</span>(a.items() <span class="op">|</span> b.items())</span></code></pre></div>
<p>This example demonstrates what happens when values are unhashable:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb470-1"><a href="#cb470-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: []}</span>
<span id="cb470-2"><a href="#cb470-2"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: []}</span>
<span id="cb470-3"><a href="#cb470-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">dict</span>(x.items() <span class="op">|</span> y.items())</span>
<span id="cb470-4"><a href="#cb470-4"></a>Traceback (most recent call last):</span>
<span id="cb470-5"><a href="#cb470-5"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb470-6"><a href="#cb470-6"></a><span class="pp">TypeError</span>: unhashable <span class="bu">type</span>: <span class="st">&#39;list&#39;</span></span></code></pre></div>
<p>Here’s an example where y should have precedence, but instead the value from x is retained due to the arbitrary order of sets:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb471-1"><a href="#cb471-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">2</span>}</span>
<span id="cb471-2"><a href="#cb471-2"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>}</span>
<span id="cb471-3"><a href="#cb471-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">dict</span>(x.items() <span class="op">|</span> y.items())</span>
<span id="cb471-4"><a href="#cb471-4"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">2</span>}</span></code></pre></div>
<p>Another hack you should not use:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb472-1"><a href="#cb472-1"></a>z <span class="op">=</span> <span class="bu">dict</span>(x, <span class="op">**</span>y)</span></code></pre></div>
<p>This uses the <code>dict</code> constructor, and is very fast and memory efficient (even slightly more-so than our two-step process) but unless you know precisely what is happening here (that is, the second dict is being passed as keyword arguments to the dict constructor), it’s difficult to read, it’s not the intended usage, and so it is not Pythonic.</p>
<p>Here’s an example of the usage being <a href="https://code.djangoproject.com/attachment/ticket/13357/django-pypy.2.diff" rel="noreferrer">remediated in django</a>.</p>
<p>Dicts are intended to take hashable keys (e.g. frozensets or tuples), but <strong>this method fails in Python 3 when keys are not strings.</strong></p>
<div class="sourceCode" id="cb473"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb473-1"><a href="#cb473-1"></a><span class="op">&gt;&gt;&gt;</span> c <span class="op">=</span> <span class="bu">dict</span>(a, <span class="op">**</span>b)</span>
<span id="cb473-2"><a href="#cb473-2"></a>Traceback (most recent call last):</span>
<span id="cb473-3"><a href="#cb473-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb473-4"><a href="#cb473-4"></a><span class="pp">TypeError</span>: keyword arguments must be strings</span></code></pre></div>
<p>From the <a href="https://mail.python.org/pipermail/python-dev/2010-April/099459.html" rel="noreferrer">mailing list</a>, Guido van Rossum, the creator of the language, wrote:</p>
<blockquote>
<p>
I am fine with declaring dict({}, <strong>{1:3}) illegal, since after all it is abuse of the </strong> mechanism.
</p>
</blockquote>
<p>and</p>
<blockquote>
<p>
Apparently dict(x, **y) is going around as “cool hack” for “call x.update(y) and return x”. Personally I find it more despicable than cool.
</p>
</blockquote>
<p>It is my understanding (as well as the understanding of the <a href="https://mail.python.org/pipermail/python-dev/2010-April/099485.html" rel="noreferrer">creator of the language</a>) that the intended usage for <code>dict(**y)</code> is for creating dicts for readability purposes, e.g.:</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb474-1"><a href="#cb474-1"></a><span class="bu">dict</span>(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">10</span>, c<span class="op">=</span><span class="dv">11</span>)</span></code></pre></div>
<p>instead of</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb475-1"><a href="#cb475-1"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</span></code></pre></div>
<h5>
Response to comments
</h2>
<blockquote>
Despite what Guido says, <code>dict(x, **y)</code> is in line with the dict specification, which btw. works for both Python 2 and 3. The fact that this only works for string keys is a direct consequence of how keyword parameters work and not a short-comming of dict. Nor is using the ** operator in this place an abuse of the mechanism, in fact ** was designed precisely to pass dicts as keywords.
</blockquote>
<p>Again, it doesn’t work for 3 when keys are non-strings. The implicit calling contract is that namespaces take ordinary dicts, while users must only pass keyword arguments that are strings. All other callables enforced it. <code>dict</code> broke this consistency in Python 2:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb476-1"><a href="#cb476-1"></a><span class="op">&gt;&gt;&gt;</span> foo(<span class="op">**</span>{(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>): <span class="va">None</span>})</span>
<span id="cb476-2"><a href="#cb476-2"></a>Traceback (most recent call last):</span>
<span id="cb476-3"><a href="#cb476-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb476-4"><a href="#cb476-4"></a><span class="pp">TypeError</span>: foo() keywords must be strings</span>
<span id="cb476-5"><a href="#cb476-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">dict</span>(<span class="op">**</span>{(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>): <span class="va">None</span>})</span>
<span id="cb476-6"><a href="#cb476-6"></a>{(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>): <span class="va">None</span>}</span></code></pre></div>
<p>This inconsistency was bad given other implementations of Python (Pypy, Jython, IronPython). Thus it was fixed in Python 3, as this usage could be a breaking change.</p>
<p>I submit to you that it is malicious incompetence to intentionally write code that only works in one version of a language or that only works given certain arbitrary constraints.</p>
<p>More comments:</p>
<blockquote>
<code>dict(x.items() + y.items())</code> is still the most readable solution for Python 2. Readability counts.
</blockquote>
<p>My response: <code>merge_two_dicts(x, y)</code> actually seems much clearer to me, if we’re actually concerned about readability. And it is not forward compatible, as Python 2 is increasingly deprecated.</p>
<blockquote>
<code>{**x, **y}</code> does not seem to handle nested dictionaries. the contents of nested keys are simply overwritten, not merged […] I ended up being burnt by these answers that do not merge recursively and I was surprised no one mentioned it. In my interpretation of the word “merging” these answers describe “updating one dict with another”, and not merging.
</blockquote>
<p>Yes. I must refer you back to the question, which is asking for a <em>shallow</em> merge of <strong><em>two</em></strong> dictionaries, with the first’s values being overwritten by the second’s - in a single expression.</p>
<p>Assuming two dictionary of dictionaries, one might recursively merge them in a single function, but you should be careful not to modify the dicts from either source, and the surest way to avoid that is to make a copy when assigning values. As keys must be hashable and are usually therefore immutable, it is pointless to copy them:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb477-1"><a href="#cb477-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb477-2"><a href="#cb477-2"></a></span>
<span id="cb477-3"><a href="#cb477-3"></a><span class="kw">def</span> dict_of_dicts_merge(x, y):</span>
<span id="cb477-4"><a href="#cb477-4"></a>    z <span class="op">=</span> {}</span>
<span id="cb477-5"><a href="#cb477-5"></a>    overlapping_keys <span class="op">=</span> x.keys() <span class="op">&amp;</span> y.keys()</span>
<span id="cb477-6"><a href="#cb477-6"></a>    <span class="cf">for</span> key <span class="kw">in</span> overlapping_keys:</span>
<span id="cb477-7"><a href="#cb477-7"></a>        z[key] <span class="op">=</span> dict_of_dicts_merge(x[key], y[key])</span>
<span id="cb477-8"><a href="#cb477-8"></a>    <span class="cf">for</span> key <span class="kw">in</span> x.keys() <span class="op">-</span> overlapping_keys:</span>
<span id="cb477-9"><a href="#cb477-9"></a>        z[key] <span class="op">=</span> deepcopy(x[key])</span>
<span id="cb477-10"><a href="#cb477-10"></a>    <span class="cf">for</span> key <span class="kw">in</span> y.keys() <span class="op">-</span> overlapping_keys:</span>
<span id="cb477-11"><a href="#cb477-11"></a>        z[key] <span class="op">=</span> deepcopy(y[key])</span>
<span id="cb477-12"><a href="#cb477-12"></a>    <span class="cf">return</span> z</span></code></pre></div>
<p>Usage:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb478-1"><a href="#cb478-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>:{<span class="dv">1</span>:{}}, <span class="st">&#39;b&#39;</span>: {<span class="dv">2</span>:{}}}</span>
<span id="cb478-2"><a href="#cb478-2"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>:{<span class="dv">10</span>:{}}, <span class="st">&#39;c&#39;</span>: {<span class="dv">11</span>:{}}}</span>
<span id="cb478-3"><a href="#cb478-3"></a><span class="op">&gt;&gt;&gt;</span> dict_of_dicts_merge(x, y)</span>
<span id="cb478-4"><a href="#cb478-4"></a>{<span class="st">&#39;b&#39;</span>: {<span class="dv">2</span>: {}, <span class="dv">10</span>: {}}, <span class="st">&#39;a&#39;</span>: {<span class="dv">1</span>: {}}, <span class="st">&#39;c&#39;</span>: {<span class="dv">11</span>: {}}}</span></code></pre></div>
<p>Coming up with contingencies for other value types is far beyond the scope of this question, so I will point you at <a href="https://stackoverflow.com/a/24088493/541136">my answer to the canonical question on a “Dictionaries of dictionaries merge”</a>.</p>
<h5>
Less Performant But Correct Ad-hocs
</h2>
<p>
These approaches are less performant, but they will provide correct behavior. They will be <em>much less</em> performant than <code>copy</code> and <code>update</code> or the new unpacking because they iterate through each key-value pair at a higher level of abstraction, but they <em>do</em> respect the order of precedence (latter dicts have precedence)
</p>
<p>You can also chain the dicts manually inside a dict comprehension:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb479-1"><a href="#cb479-1"></a>{k: v <span class="cf">for</span> d <span class="kw">in</span> dicts <span class="cf">for</span> k, v <span class="kw">in</span> d.items()} <span class="co"># iteritems in Python 2.7</span></span></code></pre></div>
<p>or in python 2.6 (and perhaps as early as 2.4 when generator expressions were introduced):</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb480-1"><a href="#cb480-1"></a><span class="bu">dict</span>((k, v) <span class="cf">for</span> d <span class="kw">in</span> dicts <span class="cf">for</span> k, v <span class="kw">in</span> d.items())</span></code></pre></div>
<p><code>itertools.chain</code> will chain the iterators over the key-value pairs in the correct order:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb481-1"><a href="#cb481-1"></a><span class="im">import</span> itertools</span>
<span id="cb481-2"><a href="#cb481-2"></a>z <span class="op">=</span> <span class="bu">dict</span>(itertools.chain(x.iteritems(), y.iteritems()))</span></code></pre></div>
<h5>
Performance Analysis
</h2>
<p>I’m only going to do the performance analysis of the usages known to behave correctly.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb482-1"><a href="#cb482-1"></a><span class="im">import</span> timeit</span></code></pre></div>
<p>The following is done on Ubuntu 14.04</p>
<p>In Python 2.7 (system Python):</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb483-1"><a href="#cb483-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: merge_two_dicts(x, y)))</span>
<span id="cb483-2"><a href="#cb483-2"></a><span class="fl">0.5726828575134277</span></span>
<span id="cb483-3"><a href="#cb483-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: {k: v <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items()} ))</span>
<span id="cb483-4"><a href="#cb483-4"></a><span class="fl">1.163769006729126</span></span>
<span id="cb483-5"><a href="#cb483-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>(itertools.chain(x.iteritems(), y.iteritems()))))</span>
<span id="cb483-6"><a href="#cb483-6"></a><span class="fl">1.1614501476287842</span></span>
<span id="cb483-7"><a href="#cb483-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>((k, v) <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items())))</span>
<span id="cb483-8"><a href="#cb483-8"></a><span class="fl">2.2345519065856934</span></span></code></pre></div>
<p>In Python 3.5 (deadsnakes PPA):</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb484-1"><a href="#cb484-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: {<span class="op">**</span>x, <span class="op">**</span>y}))</span>
<span id="cb484-2"><a href="#cb484-2"></a><span class="fl">0.4094954460160807</span></span>
<span id="cb484-3"><a href="#cb484-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: merge_two_dicts(x, y)))</span>
<span id="cb484-4"><a href="#cb484-4"></a><span class="fl">0.7881555100320838</span></span>
<span id="cb484-5"><a href="#cb484-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: {k: v <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items()} ))</span>
<span id="cb484-6"><a href="#cb484-6"></a><span class="fl">1.4525277839857154</span></span>
<span id="cb484-7"><a href="#cb484-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>(itertools.chain(x.items(), y.items()))))</span>
<span id="cb484-8"><a href="#cb484-8"></a><span class="fl">2.3143140770262107</span></span>
<span id="cb484-9"><a href="#cb484-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">min</span>(timeit.repeat(<span class="kw">lambda</span>: <span class="bu">dict</span>((k, v) <span class="cf">for</span> d <span class="kw">in</span> (x, y) <span class="cf">for</span> k, v <span class="kw">in</span> d.items())))</span>
<span id="cb484-10"><a href="#cb484-10"></a><span class="fl">3.2069112799945287</span></span></code></pre></div>
<h5>
Resources on Dictionaries
</h2>
<ul>
<li>
<a href="https://stackoverflow.com/questions/327311/how-are-pythons-built-in-dictionaries-implemented/44509302#44509302">My explanation of Python’s <strong>dictionary implementation</strong>, updated for 3.6.</a>
</li>
<li>
<a href="https://stackoverflow.com/questions/1024847/add-new-keys-to-a-dictionary/27208535#27208535">Answer on how to add new keys to a dictionary</a>
</li>
<li>
<a href="https://stackoverflow.com/questions/209840/map-two-lists-into-a-dictionary-in-python/33737067#33737067">Mapping two lists into a dictionary</a>
</li>
<li>
The official Python <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries" rel="noreferrer">docs on dictionaries</a>
</li>
<li>
<a href="https://www.youtube.com/watch?v=66P5FMkWoVU" rel="noreferrer">The Dictionary Even Mightier</a> - talk by Brandon Rhodes at Pycon 2017
</li>
<li>
<a href="https://www.youtube.com/watch?v=npw4s1QTmPg" rel="noreferrer">Modern Python Dictionaries, A Confluence of Great Ideas</a> - talk by Raymond Hettinger at Pycon 2017
</li>
</ul>
</section>
<section id="answer-2-score-1554" class="level4">
<h4>Answer 2 (score 1554)</h4>
<p>In your case, what you can do is:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb485-1"><a href="#cb485-1"></a>z <span class="op">=</span> <span class="bu">dict</span>(x.items() <span class="op">+</span> y.items())</span></code></pre></div>
<p>This will, as you want it, put the final dict in <code>z</code>, and make the value for key <code>b</code> be properly overridden by the second (<code>y</code>) dict’s value:</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb486-1"><a href="#cb486-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> {<span class="st">&#39;a&#39;</span>:<span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</span>
<span id="cb486-2"><a href="#cb486-2"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> {<span class="st">&#39;b&#39;</span>:<span class="dv">10</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>}</span>
<span id="cb486-3"><a href="#cb486-3"></a><span class="op">&gt;&gt;&gt;</span> z <span class="op">=</span> <span class="bu">dict</span>(x.items() <span class="op">+</span> y.items())</span>
<span id="cb486-4"><a href="#cb486-4"></a><span class="op">&gt;&gt;&gt;</span> z</span>
<span id="cb486-5"><a href="#cb486-5"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>}</span></code></pre></div>
<p>If you use Python 3, it is only a little more complicated. To create <code>z</code>:</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb487-1"><a href="#cb487-1"></a><span class="op">&gt;&gt;&gt;</span> z <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">list</span>(x.items()) <span class="op">+</span> <span class="bu">list</span>(y.items()))</span>
<span id="cb487-2"><a href="#cb487-2"></a><span class="op">&gt;&gt;&gt;</span> z</span>
<span id="cb487-3"><a href="#cb487-3"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;c&#39;</span>: <span class="dv">11</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">10</span>}</span></code></pre></div>
</section>
<section id="answer-3-score-605" class="level4">
<h4>Answer 3 (score 605)</h4>
<p>An alternative:</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb488-1"><a href="#cb488-1"></a>z <span class="op">=</span> x.copy()</span>
<span id="cb488-2"><a href="#cb488-2"></a>z.update(y)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="determine-the-type-of-an-object-score-1647494-in-2017" class="level3">
<h3>56: Determine the type of an object? (score <a href="https://stackoverflow.com/q/2225038.html">1647494</a> in 2017)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>Is there a simple way to determine if a variable is a list, dictionary, or something else? I am getting an object back that may be either type and I need to be able to tell the difference.</p>
</section>
<section id="answer-accepted-score-1876" class="level4">
<h4>Answer accepted (score 1876)</h4>
<p>To get the type of an object, you can use the built-in <a href="http://docs.python.org/3/library/functions.html#type" rel="noreferrer"><code>type()</code></a> function. Passing an object as the only parameter will return the type object of that object:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb489-1"><a href="#cb489-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>([]) <span class="kw">is</span> <span class="bu">list</span></span>
<span id="cb489-2"><a href="#cb489-2"></a><span class="va">True</span></span>
<span id="cb489-3"><a href="#cb489-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>({}) <span class="kw">is</span> <span class="bu">dict</span></span>
<span id="cb489-4"><a href="#cb489-4"></a><span class="va">True</span></span>
<span id="cb489-5"><a href="#cb489-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="st">&#39;&#39;</span>) <span class="kw">is</span> <span class="bu">str</span></span>
<span id="cb489-6"><a href="#cb489-6"></a><span class="va">True</span></span>
<span id="cb489-7"><a href="#cb489-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="dv">0</span>) <span class="kw">is</span> <span class="bu">int</span></span>
<span id="cb489-8"><a href="#cb489-8"></a><span class="va">True</span></span>
<span id="cb489-9"><a href="#cb489-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>({})</span>
<span id="cb489-10"><a href="#cb489-10"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;dict&#39;</span><span class="op">&gt;</span></span>
<span id="cb489-11"><a href="#cb489-11"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>([])</span>
<span id="cb489-12"><a href="#cb489-12"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;list&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p>This of course also works for custom types:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb490-1"><a href="#cb490-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Test1 (<span class="bu">object</span>):</span>
<span id="cb490-2"><a href="#cb490-2"></a>        <span class="cf">pass</span></span>
<span id="cb490-3"><a href="#cb490-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Test2 (Test1):</span>
<span id="cb490-4"><a href="#cb490-4"></a>        <span class="cf">pass</span></span>
<span id="cb490-5"><a href="#cb490-5"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> Test1()</span>
<span id="cb490-6"><a href="#cb490-6"></a><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> Test2()</span>
<span id="cb490-7"><a href="#cb490-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(a) <span class="kw">is</span> Test1</span>
<span id="cb490-8"><a href="#cb490-8"></a><span class="va">True</span></span>
<span id="cb490-9"><a href="#cb490-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(b) <span class="kw">is</span> Test2</span>
<span id="cb490-10"><a href="#cb490-10"></a><span class="va">True</span></span></code></pre></div>
<p>Note that <code>type()</code> will only return the immediate type of the object, but won’t be able to tell you about type inheritance.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb491-1"><a href="#cb491-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(b) <span class="kw">is</span> Test1</span>
<span id="cb491-2"><a href="#cb491-2"></a><span class="va">False</span></span></code></pre></div>
<p>To cover that, you should use the <a href="http://docs.python.org/3/library/functions.html#isinstance" rel="noreferrer"><code>isinstance</code></a> function. This of course also works for built-in types:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb492-1"><a href="#cb492-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>(b, Test1)</span>
<span id="cb492-2"><a href="#cb492-2"></a><span class="va">True</span></span>
<span id="cb492-3"><a href="#cb492-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>(b, Test2)</span>
<span id="cb492-4"><a href="#cb492-4"></a><span class="va">True</span></span>
<span id="cb492-5"><a href="#cb492-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>(a, Test1)</span>
<span id="cb492-6"><a href="#cb492-6"></a><span class="va">True</span></span>
<span id="cb492-7"><a href="#cb492-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>(a, Test2)</span>
<span id="cb492-8"><a href="#cb492-8"></a><span class="va">False</span></span>
<span id="cb492-9"><a href="#cb492-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>([], <span class="bu">list</span>)</span>
<span id="cb492-10"><a href="#cb492-10"></a><span class="va">True</span></span>
<span id="cb492-11"><a href="#cb492-11"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>({}, <span class="bu">dict</span>)</span>
<span id="cb492-12"><a href="#cb492-12"></a><span class="va">True</span></span></code></pre></div>
<p><code>isinstance()</code> is usually the preferred way to ensure the type of an object because it will also accept derived types. So unless you actually need the type object (for whatever reason), using <code>isinstance()</code> is preferred over <code>type()</code>.</p>
<p>The second parameter of <code>isinstance()</code> also accepts a tuple of types, so it’s possible to check for multiple types at once. <code>isinstance</code> will then return true, if the object is of any of those types:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb493-1"><a href="#cb493-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>([], (<span class="bu">tuple</span>, <span class="bu">list</span>, <span class="bu">set</span>))</span>
<span id="cb493-2"><a href="#cb493-2"></a><span class="va">True</span></span></code></pre></div>
</section>
<section id="answer-2-score-157" class="level4">
<h4>Answer 2 (score 157)</h4>
<p>You can do that using <code>type()</code>:</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb494-1"><a href="#cb494-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> []</span>
<span id="cb494-2"><a href="#cb494-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(a)</span>
<span id="cb494-3"><a href="#cb494-3"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;list&#39;</span><span class="op">&gt;</span></span>
<span id="cb494-4"><a href="#cb494-4"></a><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> ()</span>
<span id="cb494-5"><a href="#cb494-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(f)</span>
<span id="cb494-6"><a href="#cb494-6"></a><span class="op">&lt;</span><span class="bu">type</span> <span class="st">&#39;tuple&#39;</span><span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="answer-3-score-40" class="level4">
<h4>Answer 3 (score 40)</h4>
<p>It might be more Pythonic to use a <code>try</code>…<code>except</code> block. That way, if you have a class which quacks like a list, or quacks like a dict, it will behave properly regardless of what its type <em>really</em> is.</p>
<p>To clarify, the preferred method of “telling the difference” between variable types is with something called <a href="http://en.wikipedia.org/wiki/Duck_typing" rel="noreferrer">duck typing</a>: as long as the methods (and return types) that a variable responds to are what your subroutine expects, treat it like what you expect it to be. For example, if you have a class that overloads the bracket operators with <code>getattr</code> and <code>setattr</code>, but uses some funny internal scheme, it would be appropriate for it to behave as a dictionary if that’s what it’s trying to emulate.</p>
<p>The other problem with the <code>type(A) is type(B)</code> checking is that if <code>A</code> is a subclass of <code>B</code>, it evaluates to <code>false</code> when, programmatically, you would hope it would be <code>true</code>. If an object is a subclass of a list, it should work like a list: checking the type as presented in the other answer will prevent this. (<code>isinstance</code> will work, however).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-arr.__len__-the-preferred-way-to-get-the-length-of-an-array-in-python-score-1645889-in-2018" class="level3">
<h3>57: Is arr.__len__() the preferred way to get the length of an array in Python? (score <a href="https://stackoverflow.com/q/518021.html">1645889</a> in 2018)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<p>In <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a>, is the following the only way to get the number of elements?</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb495-1"><a href="#cb495-1"></a>arr.<span class="fu">__len__</span>()</span></code></pre></div>
<p>If so, why the strange syntax?</p>
</section>
<section id="answer-accepted-score-1204" class="level4">
<h4>Answer accepted (score 1204)</h4>
<div class="sourceCode" id="cb496"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb496-1"><a href="#cb496-1"></a>my_list <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</span>
<span id="cb496-2"><a href="#cb496-2"></a><span class="bu">len</span>(my_list)</span>
<span id="cb496-3"><a href="#cb496-3"></a><span class="co"># 5</span></span></code></pre></div>
<p>The same works for tuples:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb497-1"><a href="#cb497-1"></a>my_tuple <span class="op">=</span> (<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb497-2"><a href="#cb497-2"></a><span class="bu">len</span>(my_tuple)</span>
<span id="cb497-3"><a href="#cb497-3"></a><span class="co"># 5</span></span></code></pre></div>
<p>And strings, which are really just arrays of characters:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb498-1"><a href="#cb498-1"></a>my_string <span class="op">=</span> <span class="st">&#39;hello world&#39;</span></span>
<span id="cb498-2"><a href="#cb498-2"></a><span class="bu">len</span>(my_string)</span>
<span id="cb498-3"><a href="#cb498-3"></a><span class="co"># 11</span></span></code></pre></div>
<p>It was <a href="http://effbot.org/pyfaq/why-does-python-use-methods-for-some-functionality-e-g-list-index-but-functions-for-other-e-g-len-list.htm" rel="noreferrer">intentionally done this way</a> so that lists, tuples and other container types didn’t all need to explicitly implement a public <code>.length()</code> method, instead you can just check the <code>len()</code> of anything that implements the ‘magic’ <code>__len__()</code> method.</p>
<p>Sure, this may seem redundant, but length checking implementations can vary considerably, even within the same language. It’s not uncommon to see one collection type use a <code>.length()</code> method while another type uses a <code>.length</code> property, while yet another uses <code>.count()</code>. Having a language-level keyword unifies the entry point for all these types. So even objects you may not consider to be lists of elements could still be length-checked. This includes strings, queues, trees, etc.</p>
<p>The functional nature of <code>len()</code> also lends itself well to functional styles of programming.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb499-1"><a href="#cb499-1"></a>lengths <span class="op">=</span> <span class="bu">map</span>(<span class="bu">len</span>, list_of_containers)</span></code></pre></div>
</section>
<section id="answer-2-score-51" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>The way you take a length of anything for which that makes sense (a list, dictionary, tuple, string, …) is to call <code>len</code> on it.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb500-1"><a href="#cb500-1"></a>l <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</span>
<span id="cb500-2"><a href="#cb500-2"></a>s <span class="op">=</span> <span class="st">&#39;abcde&#39;</span></span>
<span id="cb500-3"><a href="#cb500-3"></a><span class="bu">len</span>(l) <span class="co">#returns 4</span></span>
<span id="cb500-4"><a href="#cb500-4"></a><span class="bu">len</span>(s) <span class="co">#returns 5</span></span></code></pre></div>
<p>The reason for the “strange” syntax is that internally python translates <code>len(object)</code> into <code>object.__len__()</code>. This applies to any object. So, if you are defining some class and it makes sense for it to have a length, just define a <code>__len__()</code> method on it and then one can call <code>len</code> on those instances.</p>
</section>
<section id="answer-3-score-23" class="level4">
<h4>Answer 3 (score 23)</h4>
<p>Python uses <a href="http://en.wikipedia.org/wiki/Duck_typing" rel="noreferrer">duck typing</a>: it doesn’t care about what an object <em>is</em>, as long as it has the appropriate interface for the situation at hand. When you call the built-in function len() on an object, you are actually calling its internal <strong>len</strong> method. A custom object can implement this interface and len() will return the answer, even if the object is not conceptually a sequence.</p>
<p>For a complete list of interfaces, have a look here: <a href="http://docs.python.org/reference/datamodel.html#basic-customization" rel="noreferrer">http://docs.python.org/reference/datamodel.html#basic-customization</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-ide-to-use-for-python-score-1633282-in-2014" class="level3">
<h3>58: What IDE to use for Python? (score <a href="https://stackoverflow.com/q/81584.html">1633282</a> in 2014)</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>What IDEs (“GUIs/editors”) do others use for Python coding?</p>
</section>
<section id="answer-2-score-1273" class="level4">
<h4>Answer 2 (score 1273)</h4>
<h5>
Results
</h2>
<p><a href="https://docs.google.com/spreadsheets/d/1l3x94P55qoxqYbq5GosWQ7IonZ4vR-4ZyCaImiVmCSk/pubhtml" rel="noreferrer">Spreadsheet version</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/1l3x94P55qoxqYbq5GosWQ7IonZ4vR-4ZyCaImiVmCSk/pubhtml" rel="noreferrer"><img src="https://i.stack.imgur.com/Jrc6C.png" alt="spreadsheet screenshot"></a></p>
<p>Alternatively, in plain text: (also available as a a <a href="https://i.stack.imgur.com/ItVKB.png" rel="noreferrer">screenshot</a>)</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb501-1"><a href="#cb501-1"></a>                         Bracket Matching <span class="op">-</span>.  .<span class="op">-</span> Line Numbering</span>
<span id="cb501-2"><a href="#cb501-2"></a>                          Smart Indent <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> UML Editing <span class="op">/</span> Viewing</span>
<span id="cb501-3"><a href="#cb501-3"></a>         Source Control Integration <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Code Folding</span>
<span id="cb501-4"><a href="#cb501-4"></a>                    Error Markup <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Code Templates</span>
<span id="cb501-5"><a href="#cb501-5"></a>  Integrated Python Debugging <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Unit Testing</span>
<span id="cb501-6"><a href="#cb501-6"></a>    Multi<span class="op">-</span>Language Support <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> GUI Designer (Qt, Eric, etc)</span>
<span id="cb501-7"><a href="#cb501-7"></a>   Auto Code Completion <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Integrated DB Support</span>
<span id="cb501-8"><a href="#cb501-8"></a>     Commercial<span class="op">/</span>Free <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  .<span class="op">-</span> Refactoring</span>
<span id="cb501-9"><a href="#cb501-9"></a>   Cross Platform <span class="op">-</span>.  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>     </span>
<span id="cb501-10"><a href="#cb501-10"></a>                  <span class="op">+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+</span></span>
<span id="cb501-11"><a href="#cb501-11"></a>Atom              <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>many plugins</span>
<span id="cb501-12"><a href="#cb501-12"></a>Editra            <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-13"><a href="#cb501-13"></a>Emacs             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-14"><a href="#cb501-14"></a>Eric Ide          <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-15"><a href="#cb501-15"></a>Geany             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>very limited</span>
<span id="cb501-16"><a href="#cb501-16"></a>Gedit             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y¹<span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y²<span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>¹with plugin<span class="op">;</span> ²sort of</span>
<span id="cb501-17"><a href="#cb501-17"></a>Idle              <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-18"><a href="#cb501-18"></a>IntelliJ          <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span></span>
<span id="cb501-19"><a href="#cb501-19"></a>JEdit             <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-20"><a href="#cb501-20"></a>KDevelop          <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>no <span class="bu">type</span> inference</span>
<span id="cb501-21"><a href="#cb501-21"></a>Komodo            <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-22"><a href="#cb501-22"></a>NetBeans<span class="op">*</span>         <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|*</span>pre<span class="op">-</span>v7<span class="fl">.0</span></span>
<span id="cb501-23"><a href="#cb501-23"></a>Notepad<span class="op">++</span>         <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y<span class="op">*|</span>Y<span class="op">*|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span><span class="cf">with</span> plugin</span>
<span id="cb501-24"><a href="#cb501-24"></a>Pfaide            <span class="op">|</span>W <span class="op">|</span>C <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-25"><a href="#cb501-25"></a>PIDA              <span class="op">|</span>LW<span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>VIM based</span>
<span id="cb501-26"><a href="#cb501-26"></a>PTVS              <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y<span class="op">*|</span>  <span class="op">|</span>Y <span class="op">|*</span>WPF bsed</span>
<span id="cb501-27"><a href="#cb501-27"></a>PyCharm           <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|*</span>JavaScript</span>
<span id="cb501-28"><a href="#cb501-28"></a>PyDev (Eclipse)   <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-29"><a href="#cb501-29"></a>PyScripter        <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-30"><a href="#cb501-30"></a>PythonWin         <span class="op">|</span>W <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-31"><a href="#cb501-31"></a>SciTE             <span class="op">|</span>Y <span class="op">|</span>F¹<span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>¹Mac version <span class="kw">is</span></span>
<span id="cb501-32"><a href="#cb501-32"></a>ScriptDev         <span class="op">|</span>W <span class="op">|</span>C <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>    commercial</span>
<span id="cb501-33"><a href="#cb501-33"></a>Spyder            <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-34"><a href="#cb501-34"></a>Sublime Text      <span class="op">|</span>Y <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>extensible w<span class="op">/</span>Python,</span>
<span id="cb501-35"><a href="#cb501-35"></a>TextMate          <span class="op">|</span>M <span class="op">|</span>F <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>    <span class="op">*</span>PythonTestRunner</span>
<span id="cb501-36"><a href="#cb501-36"></a>UliPad            <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-37"><a href="#cb501-37"></a>Vim               <span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-38"><a href="#cb501-38"></a>Visual Studio     <span class="op">|</span>W <span class="op">|</span>CF<span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span></span>
<span id="cb501-39"><a href="#cb501-39"></a>Visual Studio Code<span class="op">|</span>Y <span class="op">|</span>F <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>? <span class="op">|</span>Y <span class="op">|</span>uses plugins</span>
<span id="cb501-40"><a href="#cb501-40"></a>WingIde           <span class="op">|</span>Y <span class="op">|</span>C <span class="op">|</span>Y <span class="op">|</span>Y<span class="op">*|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|*</span>support <span class="cf">for</span> C</span>
<span id="cb501-41"><a href="#cb501-41"></a>Zeus              <span class="op">|</span>W <span class="op">|</span>C <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>Y <span class="op">|</span>Y <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span></span>
<span id="cb501-42"><a href="#cb501-42"></a>                  <span class="op">+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+</span></span>
<span id="cb501-43"><a href="#cb501-43"></a>   Cross Platform <span class="op">-</span><span class="st">&#39;  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |     </span></span>
<span id="cb501-44"><a href="#cb501-44"></a><span class="st">     Commercial/Free -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Refactoring</span></span>
<span id="cb501-45"><a href="#cb501-45"></a><span class="st">   Auto Code Completion -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Integrated DB Support</span></span>
<span id="cb501-46"><a href="#cb501-46"></a><span class="st">    Multi-Language Support -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- GUI Designer (Qt, Eric, etc)</span></span>
<span id="cb501-47"><a href="#cb501-47"></a><span class="st">  Integrated Python Debugging -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Unit Testing</span></span>
<span id="cb501-48"><a href="#cb501-48"></a><span class="st">                    Error Markup -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Code Templates</span></span>
<span id="cb501-49"><a href="#cb501-49"></a><span class="st">         Source Control Integration -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- Code Folding</span></span>
<span id="cb501-50"><a href="#cb501-50"></a><span class="st">                          Smart Indent -&#39;</span>  <span class="op">|</span>  <span class="op">|</span>  <span class="st">&#39;- UML Editing / Viewing</span></span>
<span id="cb501-51"><a href="#cb501-51"></a><span class="st">                         Bracket Matching -&#39;</span>  <span class="st">&#39;- Line Numbering</span></span></code></pre></div>
<hr>
<p>Acronyms used:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb502-1"><a href="#cb502-1"></a> L  <span class="op">-</span> Linux</span>
<span id="cb502-2"><a href="#cb502-2"></a> W  <span class="op">-</span> Windows</span>
<span id="cb502-3"><a href="#cb502-3"></a> M  <span class="op">-</span> Mac</span>
<span id="cb502-4"><a href="#cb502-4"></a> C  <span class="op">-</span> Commercial</span>
<span id="cb502-5"><a href="#cb502-5"></a> F  <span class="op">-</span> Free</span>
<span id="cb502-6"><a href="#cb502-6"></a> CF <span class="op">-</span> Commercial <span class="cf">with</span> Free limited edition</span>
<span id="cb502-7"><a href="#cb502-7"></a> ?  <span class="op">-</span> To be confirmed</span></code></pre></div>
<p>I don’t mention basics like syntax highlighting as I expect these by default.</p>
<hr>
<p>This is a just dry list reflecting your feedback and comments, I am not advocating any of these tools. I will keep updating this list as you keep posting your answers.</p>
<p><strong><em>PS. Can you help me to add features of the above editors to the list (like auto-complete, debugging, etc.)?</em></strong></p>
<p>We have a comprehensive wiki page for this question <a href="https://wiki.python.org/moin/IntegratedDevelopmentEnvironments" rel="noreferrer">https://wiki.python.org/moin/IntegratedDevelopmentEnvironments</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/1l3x94P55qoxqYbq5GosWQ7IonZ4vR-4ZyCaImiVmCSk/edit#gid=0&amp;fvid=1960281650" rel="noreferrer" title="Submit edits to the spreadsheet">Submit edits to the spreadsheet</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-remove-a-trailing-newline-score-1623884-in-2019" class="level3">
<h3>59: How can I remove a trailing newline? (score <a href="https://stackoverflow.com/q/275018.html">1623884</a> in 2019)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>What is the Python equivalent of Perl’s <code>chomp</code> function, which removes the last character of a string if it is a newline?</p>
</section>
<section id="answer-2-score-1715" class="level4">
<h4>Answer 2 (score 1715)</h4>
<p>Try the method <code>rstrip()</code> (see doc <a href="http://docs.python.org/2/library/stdtypes.html#str.rstrip" rel="noreferrer">Python 2</a> and <a href="https://docs.python.org/3/library/stdtypes.html#str.rstrip" rel="noreferrer">Python 3</a>)</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb503-1"><a href="#cb503-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;test string</span><span class="ch">\n</span><span class="st">&#39;</span>.rstrip()</span>
<span id="cb503-2"><a href="#cb503-2"></a><span class="co">&#39;test string&#39;</span></span></code></pre></div>
<p>Python’s <code>rstrip()</code> method strips <em>all</em> kinds of trailing whitespace by default, not just one newline as Perl does with <a href="http://perldoc.perl.org/functions/chomp.html" rel="noreferrer"><code>chomp</code></a>.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb504-1"><a href="#cb504-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;test string </span><span class="ch">\n</span><span class="st"> </span><span class="ch">\r\n\n\r</span><span class="st"> </span><span class="ch">\n\n</span><span class="st">&#39;</span>.rstrip()</span>
<span id="cb504-2"><a href="#cb504-2"></a><span class="co">&#39;test string&#39;</span></span></code></pre></div>
<p>To strip only newlines:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb505-1"><a href="#cb505-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;test string </span><span class="ch">\n</span><span class="st"> </span><span class="ch">\r\n\n\r</span><span class="st"> </span><span class="ch">\n\n</span><span class="st">&#39;</span>.rstrip(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>)</span>
<span id="cb505-2"><a href="#cb505-2"></a><span class="co">&#39;test string </span><span class="ch">\n</span><span class="co"> </span><span class="ch">\r\n\n\r</span><span class="co"> &#39;</span></span></code></pre></div>
<p>There are also the methods <code>lstrip()</code> and <code>strip()</code>:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb506-1"><a href="#cb506-1"></a><span class="op">&gt;&gt;&gt;</span> s <span class="op">=</span> <span class="st">&quot;   </span><span class="ch">\n\r\n</span><span class="st">  </span><span class="ch">\n</span><span class="st">  abc   def </span><span class="ch">\n\r\n</span><span class="st">  </span><span class="ch">\n</span><span class="st">  &quot;</span></span>
<span id="cb506-2"><a href="#cb506-2"></a><span class="op">&gt;&gt;&gt;</span> s.strip()</span>
<span id="cb506-3"><a href="#cb506-3"></a><span class="co">&#39;abc   def&#39;</span></span>
<span id="cb506-4"><a href="#cb506-4"></a><span class="op">&gt;&gt;&gt;</span> s.lstrip()</span>
<span id="cb506-5"><a href="#cb506-5"></a><span class="co">&#39;abc   def </span><span class="ch">\n\r\n</span><span class="co">  </span><span class="ch">\n</span><span class="co">  &#39;</span></span>
<span id="cb506-6"><a href="#cb506-6"></a><span class="op">&gt;&gt;&gt;</span> s.rstrip()</span>
<span id="cb506-7"><a href="#cb506-7"></a><span class="co">&#39;   </span><span class="ch">\n\r\n</span><span class="co">  </span><span class="ch">\n</span><span class="co">  abc   def&#39;</span></span></code></pre></div>
</section>
<section id="answer-3-score-153" class="level4">
<h4>Answer 3 (score 153)</h4>
<p>And I would say the “pythonic” way to get lines without trailing newline characters is splitlines().</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb507-1"><a href="#cb507-1"></a><span class="op">&gt;&gt;&gt;</span> text <span class="op">=</span> <span class="st">&quot;line 1</span><span class="ch">\n</span><span class="st">line 2</span><span class="ch">\r\n</span><span class="st">line 3</span><span class="ch">\n</span><span class="st">line 4&quot;</span></span>
<span id="cb507-2"><a href="#cb507-2"></a><span class="op">&gt;&gt;&gt;</span> text.splitlines()</span>
<span id="cb507-3"><a href="#cb507-3"></a>[<span class="st">&#39;line 1&#39;</span>, <span class="st">&#39;line 2&#39;</span>, <span class="st">&#39;line 3&#39;</span>, <span class="st">&#39;line 4&#39;</span>]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-strings-into-integers-in-python-score-1618410-in-2017" class="level3">
<h3>60: How to convert strings into integers in Python? (score <a href="https://stackoverflow.com/q/642154.html">1618410</a> in 2017)</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>I have a tuple of tuples from a MySQL query like this:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb508-1"><a href="#cb508-1"></a>T1 <span class="op">=</span> ((<span class="st">&#39;13&#39;</span>, <span class="st">&#39;17&#39;</span>, <span class="st">&#39;18&#39;</span>, <span class="st">&#39;21&#39;</span>, <span class="st">&#39;32&#39;</span>),</span>
<span id="cb508-2"><a href="#cb508-2"></a>      (<span class="st">&#39;07&#39;</span>, <span class="st">&#39;11&#39;</span>, <span class="st">&#39;13&#39;</span>, <span class="st">&#39;14&#39;</span>, <span class="st">&#39;28&#39;</span>),</span>
<span id="cb508-3"><a href="#cb508-3"></a>      (<span class="st">&#39;01&#39;</span>, <span class="st">&#39;05&#39;</span>, <span class="st">&#39;06&#39;</span>, <span class="st">&#39;08&#39;</span>, <span class="st">&#39;15&#39;</span>, <span class="st">&#39;16&#39;</span>))</span></code></pre></div>
<p>I’d like to convert all the string elements into integers and put them back into a list of lists:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb509-1"><a href="#cb509-1"></a>T2 <span class="op">=</span> [[<span class="dv">13</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">32</span>], [<span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">28</span>], [<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">16</span>]]</span></code></pre></div>
<p>I tried to achieve it with <code>eval</code> but didn’t get any decent result yet.</p>
</section>
<section id="answer-accepted-score-606" class="level4">
<h4>Answer accepted (score 606)</h4>
<p><a href="https://docs.python.org/3/library/functions.html#int" rel="noreferrer"><code>int()</code></a> is the Python standard built-in function to convert a string into an integer value. You call it with a string containing a number as the argument, and it returns the number converted to an integer:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb510-1"><a href="#cb510-1"></a><span class="bu">print</span> (<span class="bu">int</span>(<span class="st">&quot;1&quot;</span>) <span class="op">+</span> <span class="dv">1</span>)</span></code></pre></div>
<p>The above prints <code>2</code>.</p>
<p>If you know the structure of your list, T1 (that it simply contains lists, only one level), you could do this in Python 2:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb511-1"><a href="#cb511-1"></a>T2 <span class="op">=</span> [<span class="bu">map</span>(<span class="bu">int</span>, x) <span class="cf">for</span> x <span class="kw">in</span> T1]</span></code></pre></div>
<p>In Python 3:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb512-1"><a href="#cb512-1"></a>T2 <span class="op">=</span> [<span class="bu">list</span>(<span class="bu">map</span>(<span class="bu">int</span>, x)) <span class="cf">for</span> x <span class="kw">in</span> T1]</span></code></pre></div>
</section>
<section id="answer-2-score-28" class="level4">
<h4>Answer 2 (score 28)</h4>
<p>You can do this with a list comprehension:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb513-1"><a href="#cb513-1"></a>T2 <span class="op">=</span> [[<span class="bu">int</span>(column) <span class="cf">for</span> column <span class="kw">in</span> row] <span class="cf">for</span> row <span class="kw">in</span> T1]</span></code></pre></div>
<p>The inner list comprehension (<code>[int(column) for column in row]</code>) builds a <code>list</code> of <code>int</code>s from a sequence of <code>int</code>-able objects, like decimal strings, in <code>row</code>. The outer list comprehension (<code>[... for row in T1])</code>) builds a list of the results of the inner list comprehension applied to each item in <code>T1</code>.</p>
<p>The code snippet will fail if any of the rows contain objects that can’t be converted by <code>int</code>. You’ll need a smarter function if you want to process rows containing non-decimal strings.</p>
<p>If you know the structure of the rows, you can replace the inner list comprehension with a call to a function of the row. Eg.</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb514-1"><a href="#cb514-1"></a>T2 <span class="op">=</span> [parse_a_row_of_T1(row) <span class="cf">for</span> row <span class="kw">in</span> T1]</span></code></pre></div>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>I would rather prefer using only comprehension lists:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb515-1"><a href="#cb515-1"></a>[[<span class="bu">int</span>(y) <span class="cf">for</span> y <span class="kw">in</span> x] <span class="cf">for</span> x <span class="kw">in</span> T1]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-there-a-simple-way-to-delete-a-list-element-by-value-score-1596938-in-2019" class="level3">
<h3>61: Is there a simple way to delete a list element by value? (score <a href="https://stackoverflow.com/q/2793324.html">1596938</a> in 2019)</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<div class="sourceCode" id="cb516"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb516-1"><a href="#cb516-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb516-2"><a href="#cb516-2"></a>b <span class="op">=</span> a.index(<span class="dv">6</span>)</span>
<span id="cb516-3"><a href="#cb516-3"></a></span>
<span id="cb516-4"><a href="#cb516-4"></a><span class="kw">del</span> a[b]</span>
<span id="cb516-5"><a href="#cb516-5"></a><span class="bu">print</span> a</span></code></pre></div>
<p>The above shows the following error:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb517-1"><a href="#cb517-1"></a>Traceback (most recent call last):</span>
<span id="cb517-2"><a href="#cb517-2"></a>  File <span class="st">&quot;D:\zjm_code</span><span class="ch">\a</span><span class="st">.py&quot;</span>, line <span class="dv">6</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb517-3"><a href="#cb517-3"></a>    b <span class="op">=</span> a.index(<span class="dv">6</span>)</span>
<span id="cb517-4"><a href="#cb517-4"></a><span class="pp">ValueError</span>: <span class="bu">list</span>.index(x): x <span class="kw">not</span> <span class="kw">in</span> <span class="bu">list</span></span></code></pre></div>
<p>So I have to do this:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb518-1"><a href="#cb518-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb518-2"><a href="#cb518-2"></a></span>
<span id="cb518-3"><a href="#cb518-3"></a><span class="cf">try</span>:</span>
<span id="cb518-4"><a href="#cb518-4"></a>    b <span class="op">=</span> a.index(<span class="dv">6</span>)</span>
<span id="cb518-5"><a href="#cb518-5"></a>    <span class="kw">del</span> a[b]</span>
<span id="cb518-6"><a href="#cb518-6"></a><span class="cf">except</span>:</span>
<span id="cb518-7"><a href="#cb518-7"></a>    <span class="cf">pass</span></span>
<span id="cb518-8"><a href="#cb518-8"></a></span>
<span id="cb518-9"><a href="#cb518-9"></a><span class="bu">print</span> a</span></code></pre></div>
<p>But is there not a simpler way to do this?</p>
</section>
<section id="answer-accepted-score-1455" class="level4">
<h4>Answer accepted (score 1455)</h4>
<p>To remove an element’s first occurrence in a list, simply use <code>list.remove</code>:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb519-1"><a href="#cb519-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span>
<span id="cb519-2"><a href="#cb519-2"></a><span class="op">&gt;&gt;&gt;</span> a.remove(<span class="st">&#39;b&#39;</span>)</span>
<span id="cb519-3"><a href="#cb519-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> a</span>
<span id="cb519-4"><a href="#cb519-4"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span></code></pre></div>
<p>Mind that it does not remove all occurrences of your element. Use a list comprehension for that.</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb520-1"><a href="#cb520-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">70</span>, <span class="dv">20</span>]</span>
<span id="cb520-2"><a href="#cb520-2"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> a <span class="cf">if</span> x <span class="op">!=</span> <span class="dv">20</span>]</span>
<span id="cb520-3"><a href="#cb520-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> a</span>
<span id="cb520-4"><a href="#cb520-4"></a>[<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">70</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-171" class="level4">
<h4>Answer 2 (score 171)</h4>
<p>Usually Python will throw an Exception if you tell it to do something it can’t so you’ll have to do either:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb521-1"><a href="#cb521-1"></a><span class="cf">if</span> c <span class="kw">in</span> a:</span>
<span id="cb521-2"><a href="#cb521-2"></a>    a.remove(c)</span></code></pre></div>
<p>or:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb522-1"><a href="#cb522-1"></a><span class="cf">try</span>:</span>
<span id="cb522-2"><a href="#cb522-2"></a>    a.remove(c)</span>
<span id="cb522-3"><a href="#cb522-3"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb522-4"><a href="#cb522-4"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>An Exception isn’t necessarily a bad thing as long as it’s one you’re expecting and handle properly.</p>
</section>
<section id="answer-3-score-76" class="level4">
<h4>Answer 3 (score 76)</h4>
<p>You can do</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb523-1"><a href="#cb523-1"></a>a<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</span>
<span id="cb523-2"><a href="#cb523-2"></a><span class="cf">if</span> <span class="dv">6</span> <span class="kw">in</span> a:</span>
<span id="cb523-3"><a href="#cb523-3"></a>    a.remove(<span class="dv">6</span>)</span></code></pre></div>
<p>but above need to search 6 in list a 2 times, so try except would be faster</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb524-1"><a href="#cb524-1"></a><span class="cf">try</span>:</span>
<span id="cb524-2"><a href="#cb524-2"></a>    a.remove(<span class="dv">6</span>)</span>
<span id="cb524-3"><a href="#cb524-3"></a><span class="cf">except</span>:</span>
<span id="cb524-4"><a href="#cb524-4"></a>    <span class="cf">pass</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="python-find-in-list-score-1578399-in-2018" class="level3">
<h3>62: Python: Find in list (score <a href="https://stackoverflow.com/q/9542738.html">1578399</a> in 2018)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<p>I have come across this:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb525-1"><a href="#cb525-1"></a>item <span class="op">=</span> someSortOfSelection()</span>
<span id="cb525-2"><a href="#cb525-2"></a><span class="cf">if</span> item <span class="kw">in</span> myList:</span>
<span id="cb525-3"><a href="#cb525-3"></a>    doMySpecialFunction(item)</span></code></pre></div>
<p>but sometimes it does not work with all my items, as if they weren’t recognized in the list (when it’s a list of string).</p>
<p>Is this the most ‘pythonic’ way of finding an item in a list: <code>if x in l:</code>?</p>
</section>
<section id="answer-accepted-score-1039" class="level4">
<h4>Answer accepted (score 1039)</h4>
<p>As for your first question: that code is perfectly fine and should work if <code>item</code> equals one of the elements inside <code>myList</code>. Maybe you try to find a string that does not <em>exactly</em> match one of the items or maybe you are using a float value which suffers from inaccuracy.</p>
<p>As for your second question: There’s actually several possible ways if “finding” things in lists.</p>
<h5>
Checking if something is inside
</h3>
<p>This is the use case you describe: Checking whether something is inside a list or not. As you know, you can use the <code>in</code> operator for that:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb526-1"><a href="#cb526-1"></a><span class="dv">3</span> <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>] <span class="co"># =&gt; True</span></span></code></pre></div>
<h5>
Filtering a collection
</h3>
<p>That is, finding all elements in a sequence that meet a certain condition. You can use list comprehension or generator expressions for that:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb527-1"><a href="#cb527-1"></a>matches <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> fulfills_some_condition(x)]</span>
<span id="cb527-2"><a href="#cb527-2"></a>matches <span class="op">=</span> (x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">6</span>)</span></code></pre></div>
<p>The latter will return a <em>generator</em> which you can imagine as a sort of lazy list that will only be built as soon as you iterate through it. By the way, the first one is exactly equivalent to</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb528-1"><a href="#cb528-1"></a>matches <span class="op">=</span> <span class="bu">filter</span>(fulfills_some_condition, lst)</span></code></pre></div>
<p>in Python 2. Here you can see higher-order functions at work. In Python 3, <code>filter</code> doesn’t return a list, but a generator-like object.</p>
<h5>
Finding the first occurrence
</h3>
<p>If you only want the first thing that matches a condition (but you don’t know what it is yet), it’s fine to use a for loop (possibly using the <code>else</code> clause as well, which is not really well-known). You can also use</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb529-1"><a href="#cb529-1"></a><span class="bu">next</span>(x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> ...)</span></code></pre></div>
<p>which will return the first match or raise a <code>StopIteration</code> if none is found. Alternatively, you can use</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb530-1"><a href="#cb530-1"></a><span class="bu">next</span>((x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> ...), [default value])</span></code></pre></div>
<h5>
Finding the location of an item
</h3>
<p>For lists, there’s also the <code>index</code> method that can sometimes be useful if you want to know <em>where</em> a certain element is in the list:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb531-1"><a href="#cb531-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].index(<span class="dv">2</span>) <span class="co"># =&gt; 1</span></span>
<span id="cb531-2"><a href="#cb531-2"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].index(<span class="dv">4</span>) <span class="co"># =&gt; ValueError</span></span></code></pre></div>
<p>However, note that if you have duplicates, <code>.index</code> always returns the lowest index:……</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb532-1"><a href="#cb532-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>].index(<span class="dv">2</span>) <span class="co"># =&gt; 1</span></span></code></pre></div>
<p>If there are duplicates and you want all the indexes then you can use <code>enumerate()</code> instead:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb533-1"><a href="#cb533-1"></a>[i <span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>]) <span class="cf">if</span> x<span class="op">==</span><span class="dv">2</span>] <span class="co"># =&gt; [1, 3]</span></span></code></pre></div>
</section>
<section id="answer-2-score-168" class="level4">
<h4>Answer 2 (score 168)</h4>
<p>If you want to find one element or <code>None</code> use default in <code>next</code>, it won’t raise <code>StopIteration</code> if the item was not found in the list:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb534-1"><a href="#cb534-1"></a>first_or_default <span class="op">=</span> <span class="bu">next</span>((x <span class="cf">for</span> x <span class="kw">in</span> lst <span class="cf">if</span> ...), <span class="va">None</span>)</span></code></pre></div>
</section>
<section id="answer-3-score-18" class="level4">
<h4>Answer 3 (score 18)</h4>
<p>While the answer from Niklas B. is pretty comprehensive, when we want to find an item in a list it is sometimes useful to get its index:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb535-1"><a href="#cb535-1"></a><span class="bu">next</span>((i <span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(lst) <span class="cf">if</span> [condition on x]), [default value])</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="manually-raising-throwing-an-exception-in-python-score-1572164-in-2019" class="level3">
<h3>63: Manually raising (throwing) an exception in Python (score <a href="https://stackoverflow.com/q/2052390.html">1572164</a> in 2019)</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>How can I raise an exception in Python so that it can later be caught via an <code>except</code> block?</p>
</section>
<section id="answer-accepted-score-2620" class="level4">
<h4>Answer accepted (score 2620)</h4>
<blockquote>
<h5>
How do I manually throw/raise an exception in Python?
</h2>
</blockquote>
<p><a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" rel="noreferrer">Use the most specific Exception constructor that semantically fits your issue</a>.</p>
<p>Be specific in your message, e.g.:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb536-1"><a href="#cb536-1"></a><span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;A very specific bad thing happened.&#39;</span>)</span></code></pre></div>
<h5>
Don’t raise generic exceptions
</h2>
<p>Avoid raising a generic Exception. To catch it, you’ll have to catch all other more specific exceptions that subclass it.</p>
<h5>
Problem 1: Hiding bugs
</h3>
<div class="sourceCode" id="cb537"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb537-1"><a href="#cb537-1"></a><span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;I know Python!&#39;</span>) <span class="co"># Don&#39;t! If you catch, likely to hide bugs.</span></span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb538-1"><a href="#cb538-1"></a><span class="kw">def</span> demo_bad_catch():</span>
<span id="cb538-2"><a href="#cb538-2"></a>    <span class="cf">try</span>:</span>
<span id="cb538-3"><a href="#cb538-3"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;Represents a hidden bug, do not catch this&#39;</span>)</span>
<span id="cb538-4"><a href="#cb538-4"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;This is the exception you expect to handle&#39;</span>)</span>
<span id="cb538-5"><a href="#cb538-5"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> error:</span>
<span id="cb538-6"><a href="#cb538-6"></a>        <span class="bu">print</span>(<span class="st">&#39;Caught this error: &#39;</span> <span class="op">+</span> <span class="bu">repr</span>(error))</span>
<span id="cb538-7"><a href="#cb538-7"></a></span>
<span id="cb538-8"><a href="#cb538-8"></a><span class="op">&gt;&gt;&gt;</span> demo_bad_catch()</span>
<span id="cb538-9"><a href="#cb538-9"></a>Caught this error: <span class="pp">ValueError</span>(<span class="st">&#39;Represents a hidden bug, do not catch this&#39;</span>,)</span></code></pre></div>
<h5>
Problem 2: Won’t catch
</h3>
<p>and more specific catches won’t catch the general exception:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb539-1"><a href="#cb539-1"></a><span class="kw">def</span> demo_no_catch():</span>
<span id="cb539-2"><a href="#cb539-2"></a>    <span class="cf">try</span>:</span>
<span id="cb539-3"><a href="#cb539-3"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;general exceptions not caught by specific handling&#39;</span>)</span>
<span id="cb539-4"><a href="#cb539-4"></a>    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb539-5"><a href="#cb539-5"></a>        <span class="bu">print</span>(<span class="st">&#39;we will not catch exception: Exception&#39;</span>)</span>
<span id="cb539-6"><a href="#cb539-6"></a></span>
<span id="cb539-7"><a href="#cb539-7"></a></span>
<span id="cb539-8"><a href="#cb539-8"></a><span class="op">&gt;&gt;&gt;</span> demo_no_catch()</span>
<span id="cb539-9"><a href="#cb539-9"></a>Traceback (most recent call last):</span>
<span id="cb539-10"><a href="#cb539-10"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb539-11"><a href="#cb539-11"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">3</span>, <span class="kw">in</span> demo_no_catch</span>
<span id="cb539-12"><a href="#cb539-12"></a><span class="pp">Exception</span>: general exceptions <span class="kw">not</span> caught by specific handling</span></code></pre></div>
<h5>
Best Practices: <code>raise</code> statement
</h2>
<p><a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" rel="noreferrer">Instead, use the most specific Exception constructor that semantically fits your issue</a>.</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb540-1"><a href="#cb540-1"></a><span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;A very specific bad thing happened&#39;</span>)</span></code></pre></div>
<p>which also handily allows an arbitrary number of arguments to be passed to the constructor:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb541-1"><a href="#cb541-1"></a><span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;A very specific bad thing happened&#39;</span>, <span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>) </span></code></pre></div>
<p>These arguments are accessed by the <code>args</code> attribute on the Exception object. For example:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb542-1"><a href="#cb542-1"></a><span class="cf">try</span>:</span>
<span id="cb542-2"><a href="#cb542-2"></a>    some_code_that_may_raise_our_value_error()</span>
<span id="cb542-3"><a href="#cb542-3"></a><span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> err:</span>
<span id="cb542-4"><a href="#cb542-4"></a>    <span class="bu">print</span>(err.args)</span></code></pre></div>
<p>prints</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb543-1"><a href="#cb543-1"></a>(<span class="st">&#39;message&#39;</span>, <span class="st">&#39;foo&#39;</span>, <span class="st">&#39;bar&#39;</span>, <span class="st">&#39;baz&#39;</span>)    </span></code></pre></div>
<p>In Python 2.5, an actual <code>message</code> attribute was added to BaseException in favor of encouraging users to subclass Exceptions and stop using <code>args</code>, but <a href="http://www.python.org/dev/peps/pep-0352/#retracted-ideas" rel="noreferrer">the introduction of <code>message</code> and the original deprecation of args has been retracted</a>.</p>
<h5>
Best Practices: <code>except</code> clause
</h2>
<p>When inside an except clause, you might want to, for example, log that a specific type of error happened, and then re-raise. The best way to do this while preserving the stack trace is to use a bare raise statement. For example:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb544-1"><a href="#cb544-1"></a>logger <span class="op">=</span> logging.getLogger(<span class="va">__name__</span>)</span>
<span id="cb544-2"><a href="#cb544-2"></a></span>
<span id="cb544-3"><a href="#cb544-3"></a><span class="cf">try</span>:</span>
<span id="cb544-4"><a href="#cb544-4"></a>    do_something_in_app_that_breaks_easily()</span>
<span id="cb544-5"><a href="#cb544-5"></a><span class="cf">except</span> AppError <span class="im">as</span> error:</span>
<span id="cb544-6"><a href="#cb544-6"></a>    logger.error(error)</span>
<span id="cb544-7"><a href="#cb544-7"></a>    <span class="cf">raise</span>                 <span class="co"># just this!</span></span>
<span id="cb544-8"><a href="#cb544-8"></a>    <span class="co"># raise AppError      # Don&#39;t do this, you&#39;ll lose the stack trace!</span></span></code></pre></div>
<h5>
Don’t modify your errors… but if you insist.
</h3>
<p>You can preserve the stacktrace (and error value) with <code>sys.exc_info()</code>, but <strong>this is way more error prone</strong> and <strong>has compatibility problems between Python 2 and 3</strong>, prefer to use a bare <code>raise</code> to re-raise.</p>
<p>To explain - the <code>sys.exc_info()</code> returns the type, value, and traceback.</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb545-1"><a href="#cb545-1"></a><span class="bu">type</span>, value, traceback <span class="op">=</span> sys.exc_info()</span></code></pre></div>
<p>This is the syntax in Python 2 - note this is not compatible with Python 3:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb546-1"><a href="#cb546-1"></a>    <span class="cf">raise</span> AppError, error, sys.exc_info()[<span class="dv">2</span>] <span class="co"># avoid this.</span></span>
<span id="cb546-2"><a href="#cb546-2"></a>    <span class="co"># Equivalently, as error *is* the second object:</span></span>
<span id="cb546-3"><a href="#cb546-3"></a>    <span class="cf">raise</span> sys.exc_info()[<span class="dv">0</span>], sys.exc_info()[<span class="dv">1</span>], sys.exc_info()[<span class="dv">2</span>]</span></code></pre></div>
<p>If you want to, you can modify what happens with your new raise - e.g. setting new args for the instance:</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb547-1"><a href="#cb547-1"></a><span class="kw">def</span> error():</span>
<span id="cb547-2"><a href="#cb547-2"></a>    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;oops!&#39;</span>)</span>
<span id="cb547-3"><a href="#cb547-3"></a></span>
<span id="cb547-4"><a href="#cb547-4"></a><span class="kw">def</span> catch_error_modify_message():</span>
<span id="cb547-5"><a href="#cb547-5"></a>    <span class="cf">try</span>:</span>
<span id="cb547-6"><a href="#cb547-6"></a>        error()</span>
<span id="cb547-7"><a href="#cb547-7"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb547-8"><a href="#cb547-8"></a>        error_type, error_instance, traceback <span class="op">=</span> sys.exc_info()</span>
<span id="cb547-9"><a href="#cb547-9"></a>        error_instance.args <span class="op">=</span> (error_instance.args[<span class="dv">0</span>] <span class="op">+</span> <span class="st">&#39; &lt;modification&gt;&#39;</span>,)</span>
<span id="cb547-10"><a href="#cb547-10"></a>        <span class="cf">raise</span> error_type, error_instance, traceback</span></code></pre></div>
<p>And we have preserved the whole traceback while modifying the args. Note that this is <strong>not a best practice</strong> and it is <strong>invalid syntax</strong> in Python 3 (making keeping compatibility much harder to work around).</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb548-1"><a href="#cb548-1"></a><span class="op">&gt;&gt;&gt;</span> catch_error_modify_message()</span>
<span id="cb548-2"><a href="#cb548-2"></a>Traceback (most recent call last):</span>
<span id="cb548-3"><a href="#cb548-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb548-4"><a href="#cb548-4"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">3</span>, <span class="kw">in</span> catch_error_modify_message</span>
<span id="cb548-5"><a href="#cb548-5"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">2</span>, <span class="kw">in</span> error</span>
<span id="cb548-6"><a href="#cb548-6"></a><span class="pp">ValueError</span>: oops<span class="op">!</span> <span class="op">&lt;</span>modification<span class="op">&gt;</span></span></code></pre></div>
<p>In <a href="https://docs.python.org/3/reference/simple_stmts.html#the-raise-statement" rel="noreferrer">Python 3</a>:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb549-1"><a href="#cb549-1"></a>    <span class="cf">raise</span> error.with_traceback(sys.exc_info()[<span class="dv">2</span>])</span></code></pre></div>
<p>Again: avoid manually manipulating tracebacks. It’s <a href="https://docs.python.org/2/reference/simple_stmts.html#the-raise-statement" rel="noreferrer">less efficient</a> and more error prone. And if you’re using threading and <code>sys.exc_info</code> you may even get the wrong traceback (especially if you’re using exception handling for control flow - which I’d personally tend to avoid.)</p>
<h5>
Python 3, Exception chaining
</h3>
<p>In Python 3, you can chain Exceptions, which preserve tracebacks:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb550-1"><a href="#cb550-1"></a>    <span class="cf">raise</span> <span class="pp">RuntimeError</span>(<span class="st">&#39;specific message&#39;</span>) <span class="im">from</span> error</span></code></pre></div>
<p>Be aware:</p>
<ul>
<li>
this <em>does</em> allow changing the error type raised, and
</li>
<li>
this is <em>not</em> compatible with Python 2.
</li>
</ul>
<h5>
Deprecated Methods:
</h3>
<p>These can easily hide and even get into production code. You want to raise an exception, and doing them will raise an exception, <strong>but not the one intended!</strong></p>
<p><a href="http://www.python.org/dev/peps/pep-3109/" rel="noreferrer">Valid in Python 2, but not in Python 3</a> is the following:</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb551-1"><a href="#cb551-1"></a><span class="cf">raise</span> <span class="pp">ValueError</span>, <span class="st">&#39;message&#39;</span> <span class="co"># Don&#39;t do this, it&#39;s deprecated!</span></span></code></pre></div>
<p>Only <a href="https://docs.python.org/2/whatsnew/2.5.html#pep-352-exceptions-as-new-style-classes" rel="noreferrer">valid in much older versions of Python</a> (2.4 and lower), you may still see people raising strings:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb552-1"><a href="#cb552-1"></a><span class="cf">raise</span> <span class="st">&#39;message&#39;</span> <span class="co"># really really wrong. don&#39;t do this.</span></span></code></pre></div>
<p>In all modern versions, this will actually raise a TypeError, because you’re not raising a BaseException type. If you’re not checking for the right exception and don’t have a reviewer that’s aware of the issue, it could get into production.</p>
<h5>
Example Usage
</h2>
<p>I raise Exceptions to warn consumers of my API if they’re using it incorrectly:</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb553-1"><a href="#cb553-1"></a><span class="kw">def</span> api_func(foo):</span>
<span id="cb553-2"><a href="#cb553-2"></a>    <span class="co">&#39;&#39;&#39;foo should be either &#39;baz&#39; or &#39;bar&#39;. returns something very useful.&#39;&#39;&#39;</span></span>
<span id="cb553-3"><a href="#cb553-3"></a>    <span class="cf">if</span> foo <span class="kw">not</span> <span class="kw">in</span> _ALLOWED_ARGS:</span>
<span id="cb553-4"><a href="#cb553-4"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;</span><span class="sc">{foo}</span><span class="st"> wrong, use &quot;baz&quot; or &quot;bar&quot;&#39;</span>.<span class="bu">format</span>(foo<span class="op">=</span><span class="bu">repr</span>(foo)))</span></code></pre></div>
<h5>
Create your own error types when apropos
</h2>
<blockquote>
<strong>“I want to make an error on purpose, so that it would go into the except”</strong>
</blockquote>
<p>You can create your own error types, if you want to indicate something specific is wrong with your application, just subclass the appropriate point in the exception hierarchy:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb554-1"><a href="#cb554-1"></a><span class="kw">class</span> MyAppLookupError(<span class="pp">LookupError</span>):</span>
<span id="cb554-2"><a href="#cb554-2"></a>    <span class="co">&#39;&#39;&#39;raise this when there&#39;s a lookup error for my app&#39;&#39;&#39;</span></span></code></pre></div>
<p>and usage:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb555-1"><a href="#cb555-1"></a><span class="cf">if</span> important_key <span class="kw">not</span> <span class="kw">in</span> resource_dict <span class="kw">and</span> <span class="kw">not</span> ok_to_be_missing:</span>
<span id="cb555-2"><a href="#cb555-2"></a>    <span class="cf">raise</span> MyAppLookupError(<span class="st">&#39;resource is missing, and that is not ok.&#39;</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-529" class="level4">
<h4>Answer 2 (score 529)</h4>
<blockquote>
<strong>DON’T DO THIS</strong>. Raising a bare <code>Exception</code> is absolutely <strong>not</strong> the right thing to do; see <a href="https://stackoverflow.com/a/24065533">Aaron Hall’s excellent answer</a> instead.
</blockquote>
<p>Can’t get much more pythonic than this:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb556-1"><a href="#cb556-1"></a><span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&quot;I know python!&quot;</span>)</span></code></pre></div>
<p>See <a href="http://docs.python.org/reference/simple_stmts.html#the-raise-statement" rel="nofollow noreferrer">the raise statement docs</a> for python if you’d like more info.</p>
</section>
<section id="answer-3-score-41" class="level4">
<h4>Answer 3 (score 41)</h4>
<p>In Python3 there are 4 different syntaxes for rasing exceptions:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb557-1"><a href="#cb557-1"></a><span class="fl">1.</span> <span class="cf">raise</span> exception </span>
<span id="cb557-2"><a href="#cb557-2"></a><span class="fl">2.</span> <span class="cf">raise</span> exception (args) </span>
<span id="cb557-3"><a href="#cb557-3"></a><span class="fl">3.</span> <span class="cf">raise</span></span>
<span id="cb557-4"><a href="#cb557-4"></a><span class="fl">4.</span> <span class="cf">raise</span> exception (args) <span class="im">from</span> original_exception</span></code></pre></div>
<blockquote>
<strong>1. raise exception vs. 2. raise exception (args)</strong>
</blockquote>
<p>If you use <code>raise exception (args)</code> to raise an exception then the <code>args</code> will be printed when you print the exception object - as shown in the example below.</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb558-1"><a href="#cb558-1"></a>  <span class="co">#raise exception (args)</span></span>
<span id="cb558-2"><a href="#cb558-2"></a>    <span class="cf">try</span>:</span>
<span id="cb558-3"><a href="#cb558-3"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;I have raised an Exception&quot;</span>)</span>
<span id="cb558-4"><a href="#cb558-4"></a>    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> exp:</span>
<span id="cb558-5"><a href="#cb558-5"></a>        <span class="bu">print</span> (<span class="st">&quot;Error&quot;</span>, exp)     <span class="co"># Output -&gt; Error I have raised an Exception </span></span>
<span id="cb558-6"><a href="#cb558-6"></a></span>
<span id="cb558-7"><a href="#cb558-7"></a></span>
<span id="cb558-8"><a href="#cb558-8"></a></span>
<span id="cb558-9"><a href="#cb558-9"></a>  <span class="co">#raise execption </span></span>
<span id="cb558-10"><a href="#cb558-10"></a>    <span class="cf">try</span>:</span>
<span id="cb558-11"><a href="#cb558-11"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span></span>
<span id="cb558-12"><a href="#cb558-12"></a>    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> exp:</span>
<span id="cb558-13"><a href="#cb558-13"></a>        <span class="bu">print</span> (<span class="st">&quot;Error&quot;</span>, exp)     <span class="co"># Output -&gt; Error </span></span></code></pre></div>
<blockquote>
<strong>3.raise</strong>
</blockquote>
<p>
<code>raise</code> statement without any arguments re-raises the last exception. This is useful if you need to perform some actions after catching the exception and then want to re-raise it. But if there was no exception before, <code>raise</code> statement raises <code>TypeError</code> Exception.
</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb559-1"><a href="#cb559-1"></a><span class="kw">def</span> somefunction():</span>
<span id="cb559-2"><a href="#cb559-2"></a>    <span class="bu">print</span>(<span class="st">&quot;some cleaning&quot;</span>)</span>
<span id="cb559-3"><a href="#cb559-3"></a></span>
<span id="cb559-4"><a href="#cb559-4"></a>a<span class="op">=</span><span class="dv">10</span></span>
<span id="cb559-5"><a href="#cb559-5"></a>b<span class="op">=</span><span class="dv">0</span> </span>
<span id="cb559-6"><a href="#cb559-6"></a>result<span class="op">=</span><span class="va">None</span></span>
<span id="cb559-7"><a href="#cb559-7"></a></span>
<span id="cb559-8"><a href="#cb559-8"></a><span class="cf">try</span>:</span>
<span id="cb559-9"><a href="#cb559-9"></a>    result<span class="op">=</span>a<span class="op">/</span>b</span>
<span id="cb559-10"><a href="#cb559-10"></a>    <span class="bu">print</span>(result)</span>
<span id="cb559-11"><a href="#cb559-11"></a></span>
<span id="cb559-12"><a href="#cb559-12"></a><span class="cf">except</span> <span class="pp">Exception</span>:            <span class="co">#Output -&gt;</span></span>
<span id="cb559-13"><a href="#cb559-13"></a>    somefunction()           <span class="co">#some cleaning</span></span>
<span id="cb559-14"><a href="#cb559-14"></a>    <span class="cf">raise</span>                    <span class="co">#Traceback (most recent call last):</span></span>
<span id="cb559-15"><a href="#cb559-15"></a>                             <span class="co">#File &quot;python&quot;, line 8, in &lt;module&gt;</span></span>
<span id="cb559-16"><a href="#cb559-16"></a>                             <span class="co">#ZeroDivisionError: division by zero</span></span></code></pre></div>
<blockquote>
<strong>4. raise exception (args) from original_exception</strong>
</blockquote>
<p>This statement is used to create exception chaining in which an exception that is raised in response to another exception can contain the details of the original exception - as shown in the example below.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb560-1"><a href="#cb560-1"></a><span class="kw">class</span> MyCustomException(<span class="pp">Exception</span>):</span>
<span id="cb560-2"><a href="#cb560-2"></a><span class="cf">pass</span></span>
<span id="cb560-3"><a href="#cb560-3"></a></span>
<span id="cb560-4"><a href="#cb560-4"></a>a<span class="op">=</span><span class="dv">10</span></span>
<span id="cb560-5"><a href="#cb560-5"></a>b<span class="op">=</span><span class="dv">0</span> </span>
<span id="cb560-6"><a href="#cb560-6"></a>reuslt<span class="op">=</span><span class="va">None</span></span>
<span id="cb560-7"><a href="#cb560-7"></a><span class="cf">try</span>:</span>
<span id="cb560-8"><a href="#cb560-8"></a>    <span class="cf">try</span>:</span>
<span id="cb560-9"><a href="#cb560-9"></a>        result<span class="op">=</span>a<span class="op">/</span>b</span>
<span id="cb560-10"><a href="#cb560-10"></a></span>
<span id="cb560-11"><a href="#cb560-11"></a>    <span class="cf">except</span> <span class="pp">ZeroDivisionError</span> <span class="im">as</span> exp:</span>
<span id="cb560-12"><a href="#cb560-12"></a>        <span class="bu">print</span>(<span class="st">&quot;ZeroDivisionError -- &quot;</span>,exp)</span>
<span id="cb560-13"><a href="#cb560-13"></a>        <span class="cf">raise</span> MyCustomException(<span class="st">&quot;Zero Division &quot;</span>) <span class="im">from</span> exp</span>
<span id="cb560-14"><a href="#cb560-14"></a></span>
<span id="cb560-15"><a href="#cb560-15"></a><span class="cf">except</span> MyCustomException <span class="im">as</span> exp:</span>
<span id="cb560-16"><a href="#cb560-16"></a>        <span class="bu">print</span>(<span class="st">&quot;MyException&quot;</span>,exp)</span>
<span id="cb560-17"><a href="#cb560-17"></a>        <span class="bu">print</span>(exp.__cause__)</span></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb561"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb561-1"><a href="#cb561-1"></a><span class="pp">ZeroDivisionError</span> <span class="op">--</span>  division by zero</span>
<span id="cb561-2"><a href="#cb561-2"></a>MyException Zero Division </span>
<span id="cb561-3"><a href="#cb561-3"></a>division by zero</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-access-environment-variable-values-score-1565338-in-2019" class="level3">
<h3>64: How to access environment variable values? (score <a href="https://stackoverflow.com/q/4906977.html">1565338</a> in 2019)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>I set an environment variable that I want to access in my Python application. How do I get this value?</p>
</section>
<section id="answer-accepted-score-2745" class="level4">
<h4>Answer accepted (score 2745)</h4>
<p>Environment variables are accessed through <a href="https://docs.python.org/library/os.html#os.environ" rel="noreferrer">os.environ</a></p>
<div class="sourceCode" id="cb562"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb562-1"><a href="#cb562-1"></a><span class="im">import</span> os</span>
<span id="cb562-2"><a href="#cb562-2"></a><span class="bu">print</span>(os.environ[<span class="st">&#39;HOME&#39;</span>])</span></code></pre></div>
<p>Or you can see a list of all the environment variables using:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb563-1"><a href="#cb563-1"></a>os.environ</span></code></pre></div>
<p>As sometimes you might need to see a complete list!</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb564-1"><a href="#cb564-1"></a><span class="co"># using get will return `None` if a key is not present rather than raise a `KeyError`</span></span>
<span id="cb564-2"><a href="#cb564-2"></a><span class="bu">print</span>(os.environ.get(<span class="st">&#39;KEY_THAT_MIGHT_EXIST&#39;</span>))</span>
<span id="cb564-3"><a href="#cb564-3"></a></span>
<span id="cb564-4"><a href="#cb564-4"></a><span class="co"># os.getenv is equivalent, and can also give a default value instead of `None`</span></span>
<span id="cb564-5"><a href="#cb564-5"></a><span class="bu">print</span>(os.getenv(<span class="st">&#39;KEY_THAT_MIGHT_EXIST&#39;</span>, default_value))</span></code></pre></div>
<p><a href="https://docs.python.org/install/index.html#how-installation-works" rel="noreferrer">Python default installation</a> on Windows is <code>C:\Python</code>. If you want to find out while running python you can do:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb565-1"><a href="#cb565-1"></a><span class="im">import</span> sys</span>
<span id="cb565-2"><a href="#cb565-2"></a><span class="bu">print</span>(sys.prefix)</span></code></pre></div>
</section>
<section id="answer-2-score-209" class="level4">
<h4>Answer 2 (score 209)</h4>
<p>To check if the key exists (returns <code>True</code> or <code>False</code>)</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb566-1"><a href="#cb566-1"></a><span class="co">&#39;HOME&#39;</span> <span class="kw">in</span> os.environ</span></code></pre></div>
<p>You can also use <code>get()</code> when printing the key; useful if you want to use a default.</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb567-1"><a href="#cb567-1"></a><span class="bu">print</span>(os.environ.get(<span class="st">&#39;HOME&#39;</span>, <span class="st">&#39;/home/username/&#39;</span>))</span></code></pre></div>
<p>where <code>/home/username/</code> is the default</p>
</section>
<section id="answer-3-score-48" class="level4">
<h4>Answer 3 (score 48)</h4>
<p>The original question (first part) was “how to check environment variables in Python.”</p>
<p>Here’s how to check if $FOO is set:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb568-1"><a href="#cb568-1"></a><span class="cf">try</span>:  </span>
<span id="cb568-2"><a href="#cb568-2"></a>   os.environ[<span class="st">&quot;FOO&quot;</span>]</span>
<span id="cb568-3"><a href="#cb568-3"></a><span class="cf">except</span> <span class="pp">KeyError</span>: </span>
<span id="cb568-4"><a href="#cb568-4"></a>   <span class="bu">print</span> <span class="st">&quot;Please set the environment variable FOO&quot;</span></span>
<span id="cb568-5"><a href="#cb568-5"></a>   sys.exit(<span class="dv">1</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="understanding-python-super-with-init-methods-score-1561073-in-2018" class="level3">
<h3>65: Understanding Python super() with <strong>init</strong>() methods (score <a href="https://stackoverflow.com/q/576169.html">1561073</a> in 2018)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>I’m trying to understand the use of <code>super()</code>. From the looks of it, both child classes can be created, just fine.</p>
<p>I’m curious to know about the actual difference between the following 2 child classes.</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb569-1"><a href="#cb569-1"></a><span class="kw">class</span> Base(<span class="bu">object</span>):</span>
<span id="cb569-2"><a href="#cb569-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb569-3"><a href="#cb569-3"></a>        <span class="bu">print</span> <span class="st">&quot;Base created&quot;</span></span>
<span id="cb569-4"><a href="#cb569-4"></a></span>
<span id="cb569-5"><a href="#cb569-5"></a><span class="kw">class</span> ChildA(Base):</span>
<span id="cb569-6"><a href="#cb569-6"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb569-7"><a href="#cb569-7"></a>        Base.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb569-8"><a href="#cb569-8"></a></span>
<span id="cb569-9"><a href="#cb569-9"></a><span class="kw">class</span> ChildB(Base):</span>
<span id="cb569-10"><a href="#cb569-10"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb569-11"><a href="#cb569-11"></a>        <span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</span>
<span id="cb569-12"><a href="#cb569-12"></a></span>
<span id="cb569-13"><a href="#cb569-13"></a>ChildA() </span>
<span id="cb569-14"><a href="#cb569-14"></a>ChildB()</span></code></pre></div>
</section>
<section id="answer-accepted-score-1703" class="level4">
<h4>Answer accepted (score 1703)</h4>
<p><code>super()</code> lets you avoid referring to the base class explicitly, which can be nice. But the main advantage comes with multiple inheritance, where all sorts of <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=236275" rel="noreferrer">fun stuff</a> can happen. See the <a href="https://docs.python.org/2/library/functions.html#super" rel="noreferrer">standard docs on super</a> if you haven’t already.</p>
<p>Note that <a href="https://docs.python.org/3/library/functions.html#super" rel="noreferrer">the syntax changed in Python 3.0</a>: you can just say <code>super().__init__()</code> instead of <code>super(ChildB, self).__init__()</code> which IMO is quite a bit nicer. The standard docs also refer to a <a href="https://rhettinger.wordpress.com/2011/05/26/super-considered-super/" rel="noreferrer">guide to using super()</a> which is quite explanatory.</p>
</section>
<section id="answer-2-score-644" class="level4">
<h4>Answer 2 (score 644)</h4>
<blockquote>
<h5>
I’m trying to understand <code>super()</code>
</h2>
</blockquote>
<p>The reason we use <code>super</code> is so that child classes that may be using cooperative multiple inheritance will call the correct next parent class function in the Method Resolution Order (MRO).</p>
<p>In Python 3, we can call it like this:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb570-1"><a href="#cb570-1"></a><span class="kw">class</span> ChildB(Base):</span>
<span id="cb570-2"><a href="#cb570-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb570-3"><a href="#cb570-3"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>() </span></code></pre></div>
<p>In Python 2, we are required to use it like this:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb571-1"><a href="#cb571-1"></a><span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</span></code></pre></div>
<p>Without super, you are limited in your ability to use multiple inheritance:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb572-1"><a href="#cb572-1"></a>Base.<span class="fu">__init__</span>(<span class="va">self</span>) <span class="co"># Avoid this.</span></span></code></pre></div>
<p>I further explain below.</p>
<blockquote>
<h5>
“What difference is there actually in this code?:”
</h2>
</blockquote>
<div class="sourceCode" id="cb573"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb573-1"><a href="#cb573-1"></a><span class="kw">class</span> ChildA(Base):</span>
<span id="cb573-2"><a href="#cb573-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb573-3"><a href="#cb573-3"></a>        Base.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb573-4"><a href="#cb573-4"></a></span>
<span id="cb573-5"><a href="#cb573-5"></a><span class="kw">class</span> ChildB(Base):</span>
<span id="cb573-6"><a href="#cb573-6"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb573-7"><a href="#cb573-7"></a>        <span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</span>
<span id="cb573-8"><a href="#cb573-8"></a>        <span class="co"># super().__init__() # you can call super like this in Python 3!</span></span></code></pre></div>
<p>The primary difference in this code is that you get a layer of indirection in the <code>__init__</code> with <code>super</code>, which uses the current class to determine the next class’s <code>__init__</code> to look up in the MRO.</p>
<p>I illustrate this difference in an answer at the <a href="https://stackoverflow.com/a/33469090/541136">canonical question, How to use ‘super’ in Python?</a>, which demonstrates <strong>dependency injection</strong> and <strong>cooperative multiple inheritance</strong>.</p>
<h5>
If Python didn’t have <code>super</code>
</h2>
<p>Here’s code that’s actually closely equivalent to <code>super</code> (how it’s implemented in C, minus some checking and fallback behavior, and translated to Python):</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb574-1"><a href="#cb574-1"></a><span class="kw">class</span> ChildB(Base):</span>
<span id="cb574-2"><a href="#cb574-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb574-3"><a href="#cb574-3"></a>        mro <span class="op">=</span> <span class="bu">type</span>(<span class="va">self</span>).mro()             <span class="co"># Get the Method Resolution Order.</span></span>
<span id="cb574-4"><a href="#cb574-4"></a>        check_next <span class="op">=</span> mro.index(ChildB) <span class="op">+</span> <span class="dv">1</span> <span class="co"># Start looking after *this* class.</span></span>
<span id="cb574-5"><a href="#cb574-5"></a>        <span class="cf">while</span> check_next <span class="op">&lt;</span> <span class="bu">len</span>(mro):</span>
<span id="cb574-6"><a href="#cb574-6"></a>            next_class <span class="op">=</span> mro[check_next]</span>
<span id="cb574-7"><a href="#cb574-7"></a>            <span class="cf">if</span> <span class="st">&#39;__init__&#39;</span> <span class="kw">in</span> next_class.__dict__:</span>
<span id="cb574-8"><a href="#cb574-8"></a>                next_class.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb574-9"><a href="#cb574-9"></a>                <span class="cf">break</span></span>
<span id="cb574-10"><a href="#cb574-10"></a>            check_next <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
<p>Written a little more like native Python:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb575-1"><a href="#cb575-1"></a><span class="kw">class</span> ChildB(Base):</span>
<span id="cb575-2"><a href="#cb575-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb575-3"><a href="#cb575-3"></a>        mro <span class="op">=</span> <span class="bu">type</span>(<span class="va">self</span>).mro()</span>
<span id="cb575-4"><a href="#cb575-4"></a>        <span class="cf">for</span> next_class <span class="kw">in</span> mro[mro.index(ChildB) <span class="op">+</span> <span class="dv">1</span>:]: <span class="co"># slice to end</span></span>
<span id="cb575-5"><a href="#cb575-5"></a>            <span class="cf">if</span> <span class="bu">hasattr</span>(next_class, <span class="st">&#39;__init__&#39;</span>):</span>
<span id="cb575-6"><a href="#cb575-6"></a>                next_class.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb575-7"><a href="#cb575-7"></a>                <span class="cf">break</span></span></code></pre></div>
<p>If we didn’t have the <code>super</code> object, we’d have to write this manual code everywhere (or recreate it!) to ensure that we call the proper next method in the Method Resolution Order!</p>
<p>How does super do this in Python 3 without being told explicitly which class and instance from the method it was called from?</p>
<p>It gets the calling stack frame, and finds the class (implicitly stored as a local free variable, <code>__class__</code>, making the calling function a closure over the class) and the first argument to that function, which should be the instance or class that informs it which Method Resolution Order (MRO) to use.</p>
<p>Since it requires that first argument for the MRO, <a href="https://bugs.python.org/issue31118" rel="noreferrer">using <code>super</code> with static methods is impossible</a>.</p>
<h5>
Criticisms of other answers:
</h2>
<blockquote>
super() lets you avoid referring to the base class explicitly, which can be nice. . But the main advantage comes with multiple inheritance, where all sorts of fun stuff can happen. See the standard docs on super if you haven’t already.
</blockquote>
<p>It’s rather hand-wavey and doesn’t tell us much, but the point of <code>super</code> is not to avoid writing the parent class. The point is to ensure that the next method in line in the method resolution order (MRO) is called. This becomes important in multiple inheritance.</p>
<p>I’ll explain here.</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb576-1"><a href="#cb576-1"></a><span class="kw">class</span> Base(<span class="bu">object</span>):</span>
<span id="cb576-2"><a href="#cb576-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb576-3"><a href="#cb576-3"></a>        <span class="bu">print</span>(<span class="st">&quot;Base init&#39;ed&quot;</span>)</span>
<span id="cb576-4"><a href="#cb576-4"></a></span>
<span id="cb576-5"><a href="#cb576-5"></a><span class="kw">class</span> ChildA(Base):</span>
<span id="cb576-6"><a href="#cb576-6"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb576-7"><a href="#cb576-7"></a>        <span class="bu">print</span>(<span class="st">&quot;ChildA init&#39;ed&quot;</span>)</span>
<span id="cb576-8"><a href="#cb576-8"></a>        Base.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb576-9"><a href="#cb576-9"></a></span>
<span id="cb576-10"><a href="#cb576-10"></a><span class="kw">class</span> ChildB(Base):</span>
<span id="cb576-11"><a href="#cb576-11"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb576-12"><a href="#cb576-12"></a>        <span class="bu">print</span>(<span class="st">&quot;ChildB init&#39;ed&quot;</span>)</span>
<span id="cb576-13"><a href="#cb576-13"></a>        <span class="bu">super</span>(ChildB, <span class="va">self</span>).<span class="fu">__init__</span>()</span></code></pre></div>
<p>And let’s create a dependency that we want to be called after the Child:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb577-1"><a href="#cb577-1"></a><span class="kw">class</span> UserDependency(Base):</span>
<span id="cb577-2"><a href="#cb577-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb577-3"><a href="#cb577-3"></a>        <span class="bu">print</span>(<span class="st">&quot;UserDependency init&#39;ed&quot;</span>)</span>
<span id="cb577-4"><a href="#cb577-4"></a>        <span class="bu">super</span>(UserDependency, <span class="va">self</span>).<span class="fu">__init__</span>()</span></code></pre></div>
<p>Now remember, <code>ChildB</code> uses super, <code>ChildA</code> does not:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb578-1"><a href="#cb578-1"></a><span class="kw">class</span> UserA(ChildA, UserDependency):</span>
<span id="cb578-2"><a href="#cb578-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb578-3"><a href="#cb578-3"></a>        <span class="bu">print</span>(<span class="st">&quot;UserA init&#39;ed&quot;</span>)</span>
<span id="cb578-4"><a href="#cb578-4"></a>        <span class="bu">super</span>(UserA, <span class="va">self</span>).<span class="fu">__init__</span>()</span>
<span id="cb578-5"><a href="#cb578-5"></a></span>
<span id="cb578-6"><a href="#cb578-6"></a><span class="kw">class</span> UserB(ChildB, UserDependency):</span>
<span id="cb578-7"><a href="#cb578-7"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb578-8"><a href="#cb578-8"></a>        <span class="bu">print</span>(<span class="st">&quot;UserB init&#39;ed&quot;</span>)</span>
<span id="cb578-9"><a href="#cb578-9"></a>        <span class="bu">super</span>(UserB, <span class="va">self</span>).<span class="fu">__init__</span>()</span></code></pre></div>
<p>And <code>UserA</code> does not call the UserDependency method:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb579-1"><a href="#cb579-1"></a><span class="op">&gt;&gt;&gt;</span> UserA()</span>
<span id="cb579-2"><a href="#cb579-2"></a>UserA init<span class="st">&#39;ed</span></span>
<span id="cb579-3"><a href="#cb579-3"></a><span class="st">ChildA init&#39;</span>ed</span>
<span id="cb579-4"><a href="#cb579-4"></a>Base init<span class="st">&#39;ed</span></span>
<span id="cb579-5"><a href="#cb579-5"></a><span class="st">&lt;__main__.UserA object at 0x0000000003403BA8&gt;</span></span></code></pre></div>
<p>But <code>UserB</code>, because <code>ChildB</code> uses <code>super</code>, does!:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb580-1"><a href="#cb580-1"></a><span class="op">&gt;&gt;&gt;</span> UserB()</span>
<span id="cb580-2"><a href="#cb580-2"></a>UserB init<span class="st">&#39;ed</span></span>
<span id="cb580-3"><a href="#cb580-3"></a><span class="st">ChildB init&#39;</span>ed</span>
<span id="cb580-4"><a href="#cb580-4"></a>UserDependency init<span class="st">&#39;ed</span></span>
<span id="cb580-5"><a href="#cb580-5"></a><span class="st">Base init&#39;</span>ed</span>
<span id="cb580-6"><a href="#cb580-6"></a><span class="op">&lt;</span>__main__.UserB <span class="bu">object</span> at <span class="bn">0x0000000003403438</span><span class="op">&gt;</span></span></code></pre></div>
<h5>
Criticism for another answer
</h3>
<p>In no circumstance should you do the following, which another answer suggests, as you’ll definitely get errors when you subclass ChildB:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb581-1"><a href="#cb581-1"></a><span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>() <span class="co"># Don&#39;t do this. Ever.</span></span></code></pre></div>
<p><sub>(That answer is not clever or particularly interesting, but in spite of direct criticism in the comments and over 17 downvotes, the answerer persisted in suggesting it until a kind editor fixed his problem.)</sub></p>
<p>Explanation: That answer suggested calling super like this:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb582-1"><a href="#cb582-1"></a><span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>()</span></code></pre></div>
<p>This is <em>completely</em> wrong. <code>super</code> lets us look up the next parent in the MRO (see the first section of this answer) for child classes. If you tell <code>super</code> we’re in the child instance’s method, it will then lookup the next method in line (probably this one) resulting in recursion, probably causing a logical failure (in the answerer’s example, it does) or a <code>RuntimeError</code> when the recursion depth is exceeded.</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb583-1"><a href="#cb583-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Polygon(<span class="bu">object</span>):</span>
<span id="cb583-2"><a href="#cb583-2"></a>...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>):</span>
<span id="cb583-3"><a href="#cb583-3"></a>...         <span class="va">self</span>.<span class="bu">id</span> <span class="op">=</span> <span class="bu">id</span></span>
<span id="cb583-4"><a href="#cb583-4"></a>...</span>
<span id="cb583-5"><a href="#cb583-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Rectangle(Polygon):</span>
<span id="cb583-6"><a href="#cb583-6"></a>...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>, width, height):</span>
<span id="cb583-7"><a href="#cb583-7"></a>...         <span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>(<span class="bu">id</span>)</span>
<span id="cb583-8"><a href="#cb583-8"></a>...         <span class="va">self</span>.shape <span class="op">=</span> (width, height)</span>
<span id="cb583-9"><a href="#cb583-9"></a>...</span>
<span id="cb583-10"><a href="#cb583-10"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Square(Rectangle):</span>
<span id="cb583-11"><a href="#cb583-11"></a>...     <span class="cf">pass</span></span>
<span id="cb583-12"><a href="#cb583-12"></a>...</span>
<span id="cb583-13"><a href="#cb583-13"></a><span class="op">&gt;&gt;&gt;</span> Square(<span class="st">&#39;a&#39;</span>, <span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb583-14"><a href="#cb583-14"></a>Traceback (most recent call last):</span>
<span id="cb583-15"><a href="#cb583-15"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb583-16"><a href="#cb583-16"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">3</span>, <span class="kw">in</span> <span class="fu">__init__</span></span>
<span id="cb583-17"><a href="#cb583-17"></a><span class="pp">TypeError</span>: <span class="fu">__init__</span>() missing <span class="dv">2</span> required positional arguments: <span class="st">&#39;width&#39;</span> <span class="kw">and</span> <span class="st">&#39;height&#39;</span></span></code></pre></div>
</section>
<section id="answer-3-score-248" class="level4">
<h4>Answer 3 (score 248)</h4>
<p>It’s been noted that in Python 3.0+ you can use</p>
<p><code>super().__init__()</code></p>
<p>to make your call, which is concise and does not require you to reference the parent OR class names explicitly, which can be handy. I just want to add that for Python 2.7 or under, it is possible to get this name-insensitive behaviour by writing <code>self.__class__</code> instead of the class name, i.e. </p>
<div class="sourceCode" id="cb584"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb584-1"><a href="#cb584-1"></a><span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>()</span></code></pre></div>
<p>HOWEVER, this breaks calls to <code>super</code> for any classes that inherit from your class, where <code>self.__class__</code> could return a child class. For example:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb585-1"><a href="#cb585-1"></a><span class="kw">class</span> Polygon(<span class="bu">object</span>):</span>
<span id="cb585-2"><a href="#cb585-2"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>):</span>
<span id="cb585-3"><a href="#cb585-3"></a>        <span class="va">self</span>.<span class="bu">id</span> <span class="op">=</span> <span class="bu">id</span></span>
<span id="cb585-4"><a href="#cb585-4"></a></span>
<span id="cb585-5"><a href="#cb585-5"></a><span class="kw">class</span> Rectangle(Polygon):</span>
<span id="cb585-6"><a href="#cb585-6"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="bu">id</span>, width, height):</span>
<span id="cb585-7"><a href="#cb585-7"></a>        <span class="bu">super</span>(<span class="va">self</span>.__class__, <span class="va">self</span>).<span class="fu">__init__</span>(<span class="bu">id</span>)</span>
<span id="cb585-8"><a href="#cb585-8"></a>        <span class="va">self</span>.shape <span class="op">=</span> (width, height)</span>
<span id="cb585-9"><a href="#cb585-9"></a></span>
<span id="cb585-10"><a href="#cb585-10"></a><span class="kw">class</span> Square(Rectangle):</span>
<span id="cb585-11"><a href="#cb585-11"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>Here I have a class <code>Square</code>, which is a sub-class of <code>Rectangle</code>. Say I don’t want to write a separate constructor for <code>Square</code> because the constructor for <code>Rectangle</code> is good enough, but for whatever reason I want to implement a Square so I can reimplement some other method.</p>
<p>When I create a <code>Square</code> using <code>mSquare = Square('a', 10,10)</code>, Python calls the constructor for <code>Rectangle</code> because I haven’t given <code>Square</code> its own constructor. However, in the constructor for <code>Rectangle</code>, the call <code>super(self.__class__,self)</code> is going to return the superclass of <code>mSquare</code>, so it calls the constructor for <code>Rectangle</code> again. This is how the infinite loop happens, as was mentioned by <span class="citation" data-cites="S_C">@S_C</span>. In this case, when I run <code>super(...).__init__()</code> I am calling the constructor for <code>Rectangle</code> but since I give it no arguments, I will get an error.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="understanding-slice-notation-score-1550739-in-2019" class="level3">
<h3>66: Understanding slice notation (score <a href="https://stackoverflow.com/q/509211.html">1550739</a> in 2019)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>I need a good explanation (references are a plus) on Python’s slice notation.</p>
<p>To me, this notation needs a bit of picking up.</p>
<p>It looks extremely powerful, but I haven’t quite got my head around it.</p>
</section>
<section id="answer-accepted-score-4014" class="level4">
<h4>Answer accepted (score 4014)</h4>
<p>It’s pretty simple really:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb586-1"><a href="#cb586-1"></a>a[start:stop]  <span class="co"># items start through stop-1</span></span>
<span id="cb586-2"><a href="#cb586-2"></a>a[start:]      <span class="co"># items start through the rest of the array</span></span>
<span id="cb586-3"><a href="#cb586-3"></a>a[:stop]       <span class="co"># items from the beginning through stop-1</span></span>
<span id="cb586-4"><a href="#cb586-4"></a>a[:]           <span class="co"># a copy of the whole array</span></span></code></pre></div>
<p>There is also the <code>step</code> value, which can be used with any of the above:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb587-1"><a href="#cb587-1"></a>a[start:stop:step] <span class="co"># start through not past stop, by step</span></span></code></pre></div>
<p>The key point to remember is that the <code>:stop</code> value represents the first value that is <em>not</em> in the selected slice. So, the difference between <code>stop</code> and <code>start</code> is the number of elements selected (if <code>step</code> is 1, the default).</p>
<p>The other feature is that <code>start</code> or <code>stop</code> may be a <em>negative</em> number, which means it counts from the end of the array instead of the beginning. So:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb588-1"><a href="#cb588-1"></a>a[<span class="op">-</span><span class="dv">1</span>]    <span class="co"># last item in the array</span></span>
<span id="cb588-2"><a href="#cb588-2"></a>a[<span class="op">-</span><span class="dv">2</span>:]   <span class="co"># last two items in the array</span></span>
<span id="cb588-3"><a href="#cb588-3"></a>a[:<span class="op">-</span><span class="dv">2</span>]   <span class="co"># everything except the last two items</span></span></code></pre></div>
<p>Similarly, <code>step</code> may be a negative number:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb589-1"><a href="#cb589-1"></a>a[::<span class="op">-</span><span class="dv">1</span>]    <span class="co"># all items in the array, reversed</span></span>
<span id="cb589-2"><a href="#cb589-2"></a>a[<span class="dv">1</span>::<span class="op">-</span><span class="dv">1</span>]   <span class="co"># the first two items, reversed</span></span>
<span id="cb589-3"><a href="#cb589-3"></a>a[:<span class="op">-</span><span class="dv">3</span>:<span class="op">-</span><span class="dv">1</span>]  <span class="co"># the last two items, reversed</span></span>
<span id="cb589-4"><a href="#cb589-4"></a>a[<span class="op">-</span><span class="dv">3</span>::<span class="op">-</span><span class="dv">1</span>]  <span class="co"># everything except the last two items, reversed</span></span></code></pre></div>
<p>Python is kind to the programmer if there are fewer items than you ask for. For example, if you ask for <code>a[:-2]</code> and <code>a</code> only contains one element, you get an empty list instead of an error. Sometimes you would prefer the error, so you have to be aware that this may happen.</p>
<h5>
Relation to <code>slice()</code> object
</h3>
<p>The slicing operator <code>[]</code> is actually being used in the above code with a <code>slice()</code> object using the <code>:</code> notation (which is only valid within <code>[]</code>), i.e.:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb590-1"><a href="#cb590-1"></a>a[start:stop:step]</span></code></pre></div>
<p>is equivalent to:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb591-1"><a href="#cb591-1"></a>a[<span class="bu">slice</span>(start, stop, step)]</span></code></pre></div>
<p>
Slice objects also behave slightly differently depending on the number of arguments, similarly to <code>range()</code>, i.e. both <code>slice(stop)</code> and <code>slice(start, stop[, step])</code> are supported. To skip specifying a given argument, one might use <code>None</code>, so that e.g. <code>a[start:]</code> is equivalent to <code>a[slice(start, None)]</code> or <code>a[::-1]</code> is equivalent to <code>a[slice(None, None, -1)]</code>.
</p>
<p>While the <code>:</code>-based notation is very helpful for simple slicing, the explicit use of <code>slice()</code> objects simplifies the programmatic generation of slicing.</p>
</section>
<section id="answer-2-score-509" class="level4">
<h4>Answer 2 (score 509)</h4>
<p>The <a href="http://docs.python.org/tutorial/introduction.html#strings" rel="noreferrer">Python tutorial</a> talks about it (scroll down a bit until you get to the part about slicing).</p>
<p>The ASCII art diagram is helpful too for remembering how slices work:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb592-1"><a href="#cb592-1"></a> <span class="op">+---+---+---+---+---+---+</span></span>
<span id="cb592-2"><a href="#cb592-2"></a> <span class="op">|</span> P <span class="op">|</span> y <span class="op">|</span> t <span class="op">|</span> h <span class="op">|</span> o <span class="op">|</span> n <span class="op">|</span></span>
<span id="cb592-3"><a href="#cb592-3"></a> <span class="op">+---+---+---+---+---+---+</span></span>
<span id="cb592-4"><a href="#cb592-4"></a> <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">4</span>   <span class="dv">5</span>   <span class="dv">6</span></span>
<span id="cb592-5"><a href="#cb592-5"></a><span class="dv">-6</span>  <span class="dv">-5</span>  <span class="dv">-4</span>  <span class="dv">-3</span>  <span class="dv">-2</span>  <span class="dv">-1</span></span></code></pre></div>
<blockquote>
One way to remember how slices work is to think of the indices as pointing <em>between</em> characters, with the left edge of the first character numbered 0. Then the right edge of the last character of a string of <em>n</em> characters has index <em>n</em>.
</blockquote>
</section>
<section id="answer-3-score-391" class="level4">
<h4>Answer 3 (score 391)</h4>
<p>Enumerating the possibilities allowed by the grammar:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb593-1"><a href="#cb593-1"></a><span class="op">&gt;&gt;&gt;</span> seq[:]                <span class="co"># [seq[0],   seq[1],          ..., seq[-1]    ]</span></span>
<span id="cb593-2"><a href="#cb593-2"></a><span class="op">&gt;&gt;&gt;</span> seq[low:]             <span class="co"># [seq[low], seq[low+1],      ..., seq[-1]    ]</span></span>
<span id="cb593-3"><a href="#cb593-3"></a><span class="op">&gt;&gt;&gt;</span> seq[:high]            <span class="co"># [seq[0],   seq[1],          ..., seq[high-1]]</span></span>
<span id="cb593-4"><a href="#cb593-4"></a><span class="op">&gt;&gt;&gt;</span> seq[low:high]         <span class="co"># [seq[low], seq[low+1],      ..., seq[high-1]]</span></span>
<span id="cb593-5"><a href="#cb593-5"></a><span class="op">&gt;&gt;&gt;</span> seq[::stride]         <span class="co"># [seq[0],   seq[stride],     ..., seq[-1]    ]</span></span>
<span id="cb593-6"><a href="#cb593-6"></a><span class="op">&gt;&gt;&gt;</span> seq[low::stride]      <span class="co"># [seq[low], seq[low+stride], ..., seq[-1]    ]</span></span>
<span id="cb593-7"><a href="#cb593-7"></a><span class="op">&gt;&gt;&gt;</span> seq[:high:stride]     <span class="co"># [seq[0],   seq[stride],     ..., seq[high-1]]</span></span>
<span id="cb593-8"><a href="#cb593-8"></a><span class="op">&gt;&gt;&gt;</span> seq[low:high:stride]  <span class="co"># [seq[low], seq[low+stride], ..., seq[high-1]]</span></span></code></pre></div>
<p>Of course, if <code>(high-low)%stride != 0</code>, then the end point will be a little lower than <code>high-1</code>.</p>
<p>If <code>stride</code> is negative, the ordering is changed a bit since we’re counting down:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb594-1"><a href="#cb594-1"></a><span class="op">&gt;&gt;&gt;</span> seq[::<span class="op">-</span>stride]        <span class="co"># [seq[-1],   seq[-1-stride],   ..., seq[0]    ]</span></span>
<span id="cb594-2"><a href="#cb594-2"></a><span class="op">&gt;&gt;&gt;</span> seq[high::<span class="op">-</span>stride]    <span class="co"># [seq[high], seq[high-stride], ..., seq[0]    ]</span></span>
<span id="cb594-3"><a href="#cb594-3"></a><span class="op">&gt;&gt;&gt;</span> seq[:low:<span class="op">-</span>stride]     <span class="co"># [seq[-1],   seq[-1-stride],   ..., seq[low+1]]</span></span>
<span id="cb594-4"><a href="#cb594-4"></a><span class="op">&gt;&gt;&gt;</span> seq[high:low:<span class="op">-</span>stride] <span class="co"># [seq[high], seq[high-stride], ..., seq[low+1]]</span></span></code></pre></div>
<p>Extended slicing (with commas and ellipses) are mostly used only by special data structures (like NumPy); the basic sequences don’t support them.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb595-1"><a href="#cb595-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> slicee:</span>
<span id="cb595-2"><a href="#cb595-2"></a>...     <span class="kw">def</span> <span class="fu">__getitem__</span>(<span class="va">self</span>, item):</span>
<span id="cb595-3"><a href="#cb595-3"></a>...         <span class="cf">return</span> <span class="bu">repr</span>(item)</span>
<span id="cb595-4"><a href="#cb595-4"></a>...</span>
<span id="cb595-5"><a href="#cb595-5"></a><span class="op">&gt;&gt;&gt;</span> slicee()[<span class="dv">0</span>, <span class="dv">1</span>:<span class="dv">2</span>, ::<span class="dv">5</span>, ...]</span>
<span id="cb595-6"><a href="#cb595-6"></a><span class="co">&#39;(0, slice(1, 2, None), slice(None, None, 5), Ellipsis)&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-list-from-pandas-dataframe-column-headers-score-1535570-in-2019" class="level3">
<h3>67: Get list from pandas DataFrame column headers (score <a href="https://stackoverflow.com/q/19482970.html">1535570</a> in 2019)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>I want to get a list of the column headers from a pandas DataFrame. The DataFrame will come from user input so I won’t know how many columns there will be or what they will be called.</p>
<p>For example, if I’m given a DataFrame like this:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb596-1"><a href="#cb596-1"></a><span class="op">&gt;&gt;&gt;</span> my_dataframe</span>
<span id="cb596-2"><a href="#cb596-2"></a>    y  gdp  cap</span>
<span id="cb596-3"><a href="#cb596-3"></a><span class="dv">0</span>   <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">5</span></span>
<span id="cb596-4"><a href="#cb596-4"></a><span class="dv">1</span>   <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">9</span></span>
<span id="cb596-5"><a href="#cb596-5"></a><span class="dv">2</span>   <span class="dv">8</span>    <span class="dv">7</span>    <span class="dv">2</span></span>
<span id="cb596-6"><a href="#cb596-6"></a><span class="dv">3</span>   <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">7</span></span>
<span id="cb596-7"><a href="#cb596-7"></a><span class="dv">4</span>   <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">7</span></span>
<span id="cb596-8"><a href="#cb596-8"></a><span class="dv">5</span>   <span class="dv">4</span>    <span class="dv">8</span>    <span class="dv">3</span></span>
<span id="cb596-9"><a href="#cb596-9"></a><span class="dv">6</span>   <span class="dv">8</span>    <span class="dv">2</span>    <span class="dv">8</span></span>
<span id="cb596-10"><a href="#cb596-10"></a><span class="dv">7</span>   <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">10</span></span>
<span id="cb596-11"><a href="#cb596-11"></a><span class="dv">8</span>   <span class="dv">6</span>    <span class="dv">6</span>    <span class="dv">4</span></span>
<span id="cb596-12"><a href="#cb596-12"></a><span class="dv">9</span>  <span class="dv">10</span>   <span class="dv">10</span>    <span class="dv">7</span></span></code></pre></div>
<p>I would want to get a list like this:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb597-1"><a href="#cb597-1"></a><span class="op">&gt;&gt;&gt;</span> header_list</span>
<span id="cb597-2"><a href="#cb597-2"></a>[<span class="st">&#39;y&#39;</span>, <span class="st">&#39;gdp&#39;</span>, <span class="st">&#39;cap&#39;</span>]</span></code></pre></div>
</section>
<section id="answer-accepted-score-1476" class="level4">
<h4>Answer accepted (score 1476)</h4>
<p>You can get the values as a list by doing:</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb598-1"><a href="#cb598-1"></a><span class="bu">list</span>(my_dataframe.columns.values)</span></code></pre></div>
<p>Also you can simply use: (as shown in <a href="https://stackoverflow.com/a/19483602/4909087">Ed Chum’s answer</a>):</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb599-1"><a href="#cb599-1"></a><span class="bu">list</span>(my_dataframe)</span></code></pre></div>
</section>
<section id="answer-2-score-360" class="level4">
<h4>Answer 2 (score 360)</h4>
<p>There is a built in method which is the most performant:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb600-1"><a href="#cb600-1"></a>my_dataframe.columns.values.tolist()</span></code></pre></div>
<p><code>.columns</code> returns an Index, <code>.columns.values</code> returns an array and this has a helper function <code>.tolist</code> to return a list.</p>
<p>If performance is not as important to you, <code>Index</code> objects define a <code>.tolist()</code> method that you can call directly:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb601-1"><a href="#cb601-1"></a>my_dataframe.columns.tolist()</span></code></pre></div>
<p>The difference in performance is obvious:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb602-1"><a href="#cb602-1"></a><span class="op">%</span>timeit df.columns.tolist()</span>
<span id="cb602-2"><a href="#cb602-2"></a><span class="fl">16.7</span> µs ± <span class="dv">317</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">100000</span> loops each)</span>
<span id="cb602-3"><a href="#cb602-3"></a></span>
<span id="cb602-4"><a href="#cb602-4"></a><span class="op">%</span>timeit df.columns.values.tolist()</span>
<span id="cb602-5"><a href="#cb602-5"></a><span class="fl">1.24</span> µs ± <span class="fl">12.3</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000000</span> loops each)</span></code></pre></div>
<hr>
<p>For those who hate typing, you can just call <code>list</code> on <code>df</code>, as so:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb603-1"><a href="#cb603-1"></a><span class="bu">list</span>(df)</span></code></pre></div>
</section>
<section id="answer-3-score-80" class="level4">
<h4>Answer 3 (score 80)</h4>
<p>Did some quick tests, and perhaps unsurprisingly the built-in version using <code>dataframe.columns.values.tolist()</code> is the fastest:</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb604-1"><a href="#cb604-1"></a>In [<span class="dv">1</span>]: <span class="op">%</span>timeit [column <span class="cf">for</span> column <span class="kw">in</span> df]</span>
<span id="cb604-2"><a href="#cb604-2"></a><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="fl">81.6</span> µs per loop</span>
<span id="cb604-3"><a href="#cb604-3"></a></span>
<span id="cb604-4"><a href="#cb604-4"></a>In [<span class="dv">2</span>]: <span class="op">%</span>timeit df.columns.values.tolist()</span>
<span id="cb604-5"><a href="#cb604-5"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">16.1</span> µs per loop</span>
<span id="cb604-6"><a href="#cb604-6"></a></span>
<span id="cb604-7"><a href="#cb604-7"></a>In [<span class="dv">3</span>]: <span class="op">%</span>timeit <span class="bu">list</span>(df)</span>
<span id="cb604-8"><a href="#cb604-8"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">44.9</span> µs per loop</span>
<span id="cb604-9"><a href="#cb604-9"></a></span>
<span id="cb604-10"><a href="#cb604-10"></a>In [<span class="dv">4</span>]: <span class="op">%</span> timeit <span class="bu">list</span>(df.columns.values)</span>
<span id="cb604-11"><a href="#cb604-11"></a><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="fl">38.4</span> µs per loop</span></code></pre></div>
<p>(I still really like the <code>list(dataframe)</code> though, so thanks EdChum!)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-all-files-in-a-directory-with-extension-.txt-in-python-score-1534437-in-2017" class="level3">
<h3>68: Find all files in a directory with extension .txt in Python (score <a href="https://stackoverflow.com/q/3964681.html">1534437</a> in 2017)</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<p>How can I find all the files in a directory having the extension <code>.txt</code> in python?</p>
</section>
<section id="answer-accepted-score-2086" class="level4">
<h4>Answer accepted (score 2086)</h4>
<p>You can use <a href="https://docs.python.org/2/library/glob.html" rel="noreferrer"><code>glob</code></a>:</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb605-1"><a href="#cb605-1"></a><span class="im">import</span> glob, os</span>
<span id="cb605-2"><a href="#cb605-2"></a>os.chdir(<span class="st">&quot;/mydir&quot;</span>)</span>
<span id="cb605-3"><a href="#cb605-3"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> glob.glob(<span class="st">&quot;*.txt&quot;</span>):</span>
<span id="cb605-4"><a href="#cb605-4"></a>    <span class="bu">print</span>(<span class="bu">file</span>)</span></code></pre></div>
<p>or simply <a href="https://docs.python.org/2/library/os.html#os.listdir" rel="noreferrer"><code>os.listdir</code></a>:</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb606-1"><a href="#cb606-1"></a><span class="im">import</span> os</span>
<span id="cb606-2"><a href="#cb606-2"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> os.listdir(<span class="st">&quot;/mydir&quot;</span>):</span>
<span id="cb606-3"><a href="#cb606-3"></a>    <span class="cf">if</span> <span class="bu">file</span>.endswith(<span class="st">&quot;.txt&quot;</span>):</span>
<span id="cb606-4"><a href="#cb606-4"></a>        <span class="bu">print</span>(os.path.join(<span class="st">&quot;/mydir&quot;</span>, <span class="bu">file</span>))</span></code></pre></div>
<p>or if you want to traverse directory, use <a href="https://docs.python.org/2/library/os.html#os.walk" rel="noreferrer"><code>os.walk</code></a>:</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb607-1"><a href="#cb607-1"></a><span class="im">import</span> os</span>
<span id="cb607-2"><a href="#cb607-2"></a><span class="cf">for</span> root, dirs, files <span class="kw">in</span> os.walk(<span class="st">&quot;/mydir&quot;</span>):</span>
<span id="cb607-3"><a href="#cb607-3"></a>    <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files:</span>
<span id="cb607-4"><a href="#cb607-4"></a>        <span class="cf">if</span> <span class="bu">file</span>.endswith(<span class="st">&quot;.txt&quot;</span>):</span>
<span id="cb607-5"><a href="#cb607-5"></a>             <span class="bu">print</span>(os.path.join(root, <span class="bu">file</span>))</span></code></pre></div>
</section>
<section id="answer-2-score-214-1" class="level4">
<h4>Answer 2 (score 214)</h4>
<p>Use <a href="http://docs.python.org/library/glob.html" rel="noreferrer">glob</a>.</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb608-1"><a href="#cb608-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> glob</span>
<span id="cb608-2"><a href="#cb608-2"></a><span class="op">&gt;&gt;&gt;</span> glob.glob(<span class="st">&#39;./*.txt&#39;</span>)</span>
<span id="cb608-3"><a href="#cb608-3"></a>[<span class="st">&#39;./outline.txt&#39;</span>, <span class="st">&#39;./pip-log.txt&#39;</span>, <span class="st">&#39;./test.txt&#39;</span>, <span class="st">&#39;./testingvim.txt&#39;</span>]</span></code></pre></div>
</section>
<section id="answer-3-score-133" class="level4">
<h4>Answer 3 (score 133)</h4>
<p>Something like that should do the job</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb609-1"><a href="#cb609-1"></a><span class="cf">for</span> root, dirs, files <span class="kw">in</span> os.walk(directory):</span>
<span id="cb609-2"><a href="#cb609-2"></a>    <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files:</span>
<span id="cb609-3"><a href="#cb609-3"></a>        <span class="cf">if</span> <span class="bu">file</span>.endswith(<span class="st">&#39;.txt&#39;</span>):</span>
<span id="cb609-4"><a href="#cb609-4"></a>            <span class="bu">print</span> <span class="bu">file</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="unicodeencodeerror-ascii-codec-cant-encode-character-u-in-position-20-ordinal-not-in-range128-score-1532253-in-2016" class="level3">
<h3>69: UnicodeEncodeError: ‘ascii’ codec can’t encode character u’’ in position 20: ordinal not in range(128) (score <a href="https://stackoverflow.com/q/9942594.html">1532253</a> in 2016)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>I’m having problems dealing with unicode characters from text fetched from different web pages (on different sites). I am using BeautifulSoup.</p>
<p>The problem is that the error is not always reproducible; it sometimes works with some pages, and sometimes, it barfs by throwing a <code>UnicodeEncodeError</code>. I have tried just about everything I can think of, and yet I have not found anything that works consistently without throwing some kind of Unicode-related error.</p>
<p>One of the sections of code that is causing problems is shown below:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb610-1"><a href="#cb610-1"></a>agent_telno <span class="op">=</span> agent.find(<span class="st">&#39;div&#39;</span>, <span class="st">&#39;agent_contact_number&#39;</span>)</span>
<span id="cb610-2"><a href="#cb610-2"></a>agent_telno <span class="op">=</span> <span class="st">&#39;&#39;</span> <span class="cf">if</span> agent_telno <span class="kw">is</span> <span class="va">None</span> <span class="cf">else</span> agent_telno.contents[<span class="dv">0</span>]</span>
<span id="cb610-3"><a href="#cb610-3"></a>p.agent_info <span class="op">=</span> <span class="bu">str</span>(agent_contact <span class="op">+</span> <span class="st">&#39; &#39;</span> <span class="op">+</span> agent_telno).strip()</span></code></pre></div>
<p>Here is a stack trace produced on SOME strings when the snippet above is run:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb611-1"><a href="#cb611-1"></a>Traceback (most recent call last):</span>
<span id="cb611-2"><a href="#cb611-2"></a>  File <span class="st">&quot;foobar.py&quot;</span>, line <span class="dv">792</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb611-3"><a href="#cb611-3"></a>    p.agent_info <span class="op">=</span> <span class="bu">str</span>(agent_contact <span class="op">+</span> <span class="st">&#39; &#39;</span> <span class="op">+</span> agent_telno).strip()</span>
<span id="cb611-4"><a href="#cb611-4"></a><span class="pp">UnicodeEncodeError</span>: <span class="st">&#39;ascii&#39;</span> codec can<span class="st">&#39;t encode character u&#39;</span><span class="op">\</span>xa0<span class="st">&#39; in position 20: ordinal not in range(128)</span></span></code></pre></div>
<p>I suspect that this is because some pages (or more specifically, pages from some of the sites) may be encoded, whilst others may be unencoded. All the sites are based in the UK and provide data meant for UK consumption - so there are no issues relating to internalization or dealing with text written in anything other than English.</p>
<p>Does anyone have any ideas as to how to solve this so that I can CONSISTENTLY fix this problem?</p>
</section>
<section id="answer-accepted-score-1284" class="level4">
<h4>Answer accepted (score 1284)</h4>
<p>You need to read the Python <a href="https://docs.python.org/2.7/howto/unicode.html" rel="noreferrer">Unicode HOWTO</a>. This error is the <a href="https://docs.python.org/2.7/howto/unicode.html#the-unicode-type" rel="noreferrer">very first example</a>.</p>
<p>Basically, stop using <code>str</code> to convert from unicode to encoded text / bytes.</p>
<p>Instead, properly use <a href="http://docs.python.org/library/stdtypes.html#str.encode" rel="noreferrer"><code>.encode()</code></a> to encode the string:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb612-1"><a href="#cb612-1"></a>p.agent_info <span class="op">=</span> <span class="st">u&#39; &#39;</span>.join((agent_contact, agent_telno)).encode(<span class="st">&#39;utf-8&#39;</span>).strip()</span></code></pre></div>
<p>or work entirely in unicode.</p>
</section>
<section id="answer-2-score-421" class="level4">
<h4>Answer 2 (score 421)</h4>
<p>This is a classic python unicode pain point! Consider the following:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb613-1"><a href="#cb613-1"></a>a <span class="op">=</span> <span class="st">u&#39;bats</span><span class="ch">\u00E0</span><span class="st">&#39;</span></span>
<span id="cb613-2"><a href="#cb613-2"></a><span class="bu">print</span> a</span>
<span id="cb613-3"><a href="#cb613-3"></a> <span class="op">=&gt;</span> batsà</span></code></pre></div>
<p>All good so far, but if we call str(a), let’s see what happens:</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb614-1"><a href="#cb614-1"></a><span class="bu">str</span>(a)</span>
<span id="cb614-2"><a href="#cb614-2"></a>Traceback (most recent call last):</span>
<span id="cb614-3"><a href="#cb614-3"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb614-4"><a href="#cb614-4"></a><span class="pp">UnicodeEncodeError</span>: <span class="st">&#39;ascii&#39;</span> codec can<span class="st">&#39;t encode character u&#39;</span><span class="op">\</span>xe0<span class="st">&#39; in position 4: ordinal not in range(128)</span></span></code></pre></div>
<p>Oh dip, that’s not gonna do anyone any good! To fix the error, encode the bytes explicitly with .encode and tell python what codec to use:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb615-1"><a href="#cb615-1"></a>a.encode(<span class="st">&#39;utf-8&#39;</span>)</span>
<span id="cb615-2"><a href="#cb615-2"></a> <span class="op">=&gt;</span> <span class="st">&#39;bats</span><span class="ch">\xc3\xa0</span><span class="st">&#39;</span></span>
<span id="cb615-3"><a href="#cb615-3"></a><span class="bu">print</span> a.encode(<span class="st">&#39;utf-8&#39;</span>)</span>
<span id="cb615-4"><a href="#cb615-4"></a> <span class="op">=&gt;</span> batsà</span></code></pre></div>
<p>Voil!</p>
<p>The issue is that when you call str(), python uses the default character encoding to try and encode the bytes you gave it, which in your case are sometimes representations of unicode characters. To fix the problem, you have to tell python how to deal with the string you give it by using .encode(‘whatever_unicode’). Most of the time, you should be fine using utf-8.</p>
<p>For an excellent exposition on this topic, see Ned Batchelder’s PyCon talk here: <a href="http://nedbatchelder.com/text/unipain.html">http://nedbatchelder.com/text/unipain.html</a></p>
</section>
<section id="answer-3-score-200" class="level4">
<h4>Answer 3 (score 200)</h4>
<p>I found elegant work around for me to remove symbols and continue to keep string as string in follows:</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb616-1"><a href="#cb616-1"></a>yourstring <span class="op">=</span> yourstring.encode(<span class="st">&#39;ascii&#39;</span>, <span class="st">&#39;ignore&#39;</span>).decode(<span class="st">&#39;ascii&#39;</span>)</span></code></pre></div>
<p>It’s important to notice that using the ignore option is <strong>dangerous</strong> because it silently drops any unicode(and internationalization) support from the code that uses it, as seen here (convert unicode):</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb617-1"><a href="#cb617-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">u&#39;City: Malmö&#39;</span>.encode(<span class="st">&#39;ascii&#39;</span>, <span class="st">&#39;ignore&#39;</span>).decode(<span class="st">&#39;ascii&#39;</span>)</span>
<span id="cb617-2"><a href="#cb617-2"></a><span class="co">&#39;City: Malm&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-append-one-string-to-another-in-python-score-1511101-in-2019" class="level3">
<h3>70: How do I append one string to another in Python? (score <a href="https://stackoverflow.com/q/4435169.html">1511101</a> in 2019)</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>I want an efficient way to append one string to another in Python, other than the following.</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb618-1"><a href="#cb618-1"></a>var1 <span class="op">=</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb618-2"><a href="#cb618-2"></a>var2 <span class="op">=</span> <span class="st">&quot;bar&quot;</span></span>
<span id="cb618-3"><a href="#cb618-3"></a>var3 <span class="op">=</span> var1 <span class="op">+</span> var2</span></code></pre></div>
<p>Is there any good built-in method to use?</p>
</section>
<section id="answer-accepted-score-580" class="level4">
<h4>Answer accepted (score 580)</h4>
<p>If you only have one reference to a string and you concatenate another string to the end, CPython now special cases this and tries to extend the string in place.</p>
<p>The end result is that the operation is amortized O(n).</p>
<p>e.g. </p>
<div class="sourceCode" id="cb619"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb619-1"><a href="#cb619-1"></a>s <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb619-2"><a href="#cb619-2"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb619-3"><a href="#cb619-3"></a>    s<span class="op">+=</span><span class="bu">str</span>(i)</span></code></pre></div>
<p>used to be O(n^2), but now it is O(n).</p>
<p>From the source (bytesobject.c):</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb620-1"><a href="#cb620-1"></a>void</span>
<span id="cb620-2"><a href="#cb620-2"></a>PyBytes_ConcatAndDel(register PyObject <span class="op">**</span>pv, register PyObject <span class="op">*</span>w)</span>
<span id="cb620-3"><a href="#cb620-3"></a>{</span>
<span id="cb620-4"><a href="#cb620-4"></a>    PyBytes_Concat(pv, w)<span class="op">;</span></span>
<span id="cb620-5"><a href="#cb620-5"></a>    Py_XDECREF(w)<span class="op">;</span></span>
<span id="cb620-6"><a href="#cb620-6"></a>}</span>
<span id="cb620-7"><a href="#cb620-7"></a></span>
<span id="cb620-8"><a href="#cb620-8"></a></span>
<span id="cb620-9"><a href="#cb620-9"></a><span class="op">/*</span> The following function breaks the notion that strings are immutable:</span>
<span id="cb620-10"><a href="#cb620-10"></a>   it changes the size of a string.  We get away <span class="cf">with</span> this only <span class="cf">if</span> there</span>
<span id="cb620-11"><a href="#cb620-11"></a>   <span class="kw">is</span> only one module referencing the <span class="bu">object</span>.  You can also think of it</span>
<span id="cb620-12"><a href="#cb620-12"></a>   <span class="im">as</span> creating a new string <span class="bu">object</span> <span class="kw">and</span> destroying the old one, only</span>
<span id="cb620-13"><a href="#cb620-13"></a>   more efficiently.  In <span class="bu">any</span> case, don<span class="st">&#39;t use this if the string may</span></span>
<span id="cb620-14"><a href="#cb620-14"></a><span class="st">   already be known to some other part of the code...</span></span>
<span id="cb620-15"><a href="#cb620-15"></a><span class="st">   Note that if there&#39;</span>s <span class="kw">not</span> enough memory to resize the string, the original</span>
<span id="cb620-16"><a href="#cb620-16"></a>   string <span class="bu">object</span> at <span class="op">*</span>pv <span class="kw">is</span> deallocated, <span class="op">*</span>pv <span class="kw">is</span> <span class="bu">set</span> to NULL, an <span class="st">&quot;out of</span></span>
<span id="cb620-17"><a href="#cb620-17"></a><span class="st">   memory&quot;</span> exception <span class="kw">is</span> <span class="bu">set</span>, <span class="kw">and</span> <span class="dv">-1</span> <span class="kw">is</span> returned.  Else (on success) <span class="dv">0</span> <span class="kw">is</span></span>
<span id="cb620-18"><a href="#cb620-18"></a>   returned, <span class="kw">and</span> the value <span class="kw">in</span> <span class="op">*</span>pv may <span class="kw">or</span> may <span class="kw">not</span> be the same <span class="im">as</span> on <span class="bu">input</span>.</span>
<span id="cb620-19"><a href="#cb620-19"></a>   As always, an extra byte <span class="kw">is</span> allocated <span class="cf">for</span> a trailing <span class="op">\</span><span class="dv">0</span> byte (newsize</span>
<span id="cb620-20"><a href="#cb620-20"></a>   does <span class="op">*</span><span class="kw">not</span><span class="op">*</span> include that), <span class="kw">and</span> a trailing <span class="op">\</span><span class="dv">0</span> byte <span class="kw">is</span> stored.</span>
<span id="cb620-21"><a href="#cb620-21"></a><span class="op">*/</span></span>
<span id="cb620-22"><a href="#cb620-22"></a></span>
<span id="cb620-23"><a href="#cb620-23"></a><span class="bu">int</span></span>
<span id="cb620-24"><a href="#cb620-24"></a>_PyBytes_Resize(PyObject <span class="op">**</span>pv, Py_ssize_t newsize)</span>
<span id="cb620-25"><a href="#cb620-25"></a>{</span>
<span id="cb620-26"><a href="#cb620-26"></a>    register PyObject <span class="op">*</span>v<span class="op">;</span></span>
<span id="cb620-27"><a href="#cb620-27"></a>    register PyBytesObject <span class="op">*</span>sv<span class="op">;</span></span>
<span id="cb620-28"><a href="#cb620-28"></a>    v <span class="op">=</span> <span class="op">*</span>pv<span class="op">;</span></span>
<span id="cb620-29"><a href="#cb620-29"></a>    <span class="cf">if</span> (<span class="op">!</span>PyBytes_Check(v) <span class="op">||</span> Py_REFCNT(v) <span class="op">!=</span> <span class="dv">1</span> <span class="op">||</span> newsize <span class="op">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb620-30"><a href="#cb620-30"></a>        <span class="op">*</span>pv <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb620-31"><a href="#cb620-31"></a>        Py_DECREF(v)<span class="op">;</span></span>
<span id="cb620-32"><a href="#cb620-32"></a>        PyErr_BadInternalCall()<span class="op">;</span></span>
<span id="cb620-33"><a href="#cb620-33"></a>        <span class="cf">return</span> <span class="dv">-1</span><span class="op">;</span></span>
<span id="cb620-34"><a href="#cb620-34"></a>    }</span>
<span id="cb620-35"><a href="#cb620-35"></a>    <span class="op">/*</span> XXX UNREF<span class="op">/</span>NEWREF interface should be more symmetrical <span class="op">*/</span></span>
<span id="cb620-36"><a href="#cb620-36"></a>    _Py_DEC_REFTOTAL<span class="op">;</span></span>
<span id="cb620-37"><a href="#cb620-37"></a>    _Py_ForgetReference(v)<span class="op">;</span></span>
<span id="cb620-38"><a href="#cb620-38"></a>    <span class="op">*</span>pv <span class="op">=</span> (PyObject <span class="op">*</span>)</span>
<span id="cb620-39"><a href="#cb620-39"></a>        PyObject_REALLOC((char <span class="op">*</span>)v, PyBytesObject_SIZE <span class="op">+</span> newsize)<span class="op">;</span></span>
<span id="cb620-40"><a href="#cb620-40"></a>    <span class="cf">if</span> (<span class="op">*</span>pv <span class="op">==</span> NULL) {</span>
<span id="cb620-41"><a href="#cb620-41"></a>        PyObject_Del(v)<span class="op">;</span></span>
<span id="cb620-42"><a href="#cb620-42"></a>        PyErr_NoMemory()<span class="op">;</span></span>
<span id="cb620-43"><a href="#cb620-43"></a>        <span class="cf">return</span> <span class="dv">-1</span><span class="op">;</span></span>
<span id="cb620-44"><a href="#cb620-44"></a>    }</span>
<span id="cb620-45"><a href="#cb620-45"></a>    _Py_NewReference(<span class="op">*</span>pv)<span class="op">;</span></span>
<span id="cb620-46"><a href="#cb620-46"></a>    sv <span class="op">=</span> (PyBytesObject <span class="op">*</span>) <span class="op">*</span>pv<span class="op">;</span></span>
<span id="cb620-47"><a href="#cb620-47"></a>    Py_SIZE(sv) <span class="op">=</span> newsize<span class="op">;</span></span>
<span id="cb620-48"><a href="#cb620-48"></a>    sv<span class="op">-&gt;</span>ob_sval[newsize] <span class="op">=</span> <span class="st">&#39;</span><span class="ch">\0</span><span class="st">&#39;</span><span class="op">;</span></span>
<span id="cb620-49"><a href="#cb620-49"></a>    sv<span class="op">-&gt;</span>ob_shash <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span>          <span class="op">/*</span> invalidate cached <span class="bu">hash</span> value <span class="op">*/</span></span>
<span id="cb620-50"><a href="#cb620-50"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb620-51"><a href="#cb620-51"></a>}</span></code></pre></div>
<p>It’s easy enough to verify empirically.</p>
<pre>
$ python -m timeit -s"s=''" "for i in xrange(10):s+='a'"
1000000 loops, best of 3: 1.85 usec per loop
$ python -m timeit -s"s=''" "for i in xrange(100):s+='a'"
10000 loops, best of 3: 16.8 usec per loop
$ python -m timeit -s"s=''" "for i in xrange(1000):s+='a'"
10000 loops, best of 3: 158 usec per loop
$ python -m timeit -s"s=''" "for i in xrange(10000):s+='a'"
1000 loops, best of 3: 1.71 msec per loop
$ python -m timeit -s"s=''" "for i in xrange(100000):s+='a'"
10 loops, best of 3: 14.6 msec per loop
$ python -m timeit -s"s=''" "for i in xrange(1000000):s+='a'"
10 loops, best of 3: 173 msec per loop
</pre>
<p><strong>It’s important</strong> however to note that this optimisation isn’t part of the Python spec. It’s only in the cPython implementation as far as I know. The same empirical testing on pypy or jython for example might show the older O(n**2) performance .</p>
<pre>
$ pypy -m timeit -s"s=''" "for i in xrange(10):s+='a'"
10000 loops, best of 3: 90.8 usec per loop
$ pypy -m timeit -s"s=''" "for i in xrange(100):s+='a'"
1000 loops, best of 3: 896 usec per loop
$ pypy -m timeit -s"s=''" "for i in xrange(1000):s+='a'"
100 loops, best of 3: 9.03 msec per loop
$ pypy -m timeit -s"s=''" "for i in xrange(10000):s+='a'"
10 loops, best of 3: 89.5 msec per loop
</pre>
<p>So far so good, but then,</p>
<pre>
$ pypy -m timeit -s"s=''" "for i in xrange(100000):s+='a'"
10 loops, best of 3: 12.8 sec per loop
</pre>
<p>ouch even worse than quadratic. So pypy is doing something that works well with short strings, but performs poorly for larger strings.</p>
</section>
<section id="answer-2-score-274" class="level4">
<h4>Answer 2 (score 274)</h4>
<p>Don’t prematurely optimize. If you have no reason to believe there’s a speed bottleneck caused by string concatenations then just stick with <code>+</code> and <code>+=</code>:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb621-1"><a href="#cb621-1"></a>s  <span class="op">=</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb621-2"><a href="#cb621-2"></a>s <span class="op">+=</span> <span class="st">&#39;bar&#39;</span></span>
<span id="cb621-3"><a href="#cb621-3"></a>s <span class="op">+=</span> <span class="st">&#39;baz&#39;</span></span></code></pre></div>
<p>That said, if you’re aiming for something like Java’s StringBuilder, the canonical Python idiom is to add items to a list and then use <code>str.join</code> to concatenate them all at the end:</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb622-1"><a href="#cb622-1"></a>l <span class="op">=</span> []</span>
<span id="cb622-2"><a href="#cb622-2"></a>l.append(<span class="st">&#39;foo&#39;</span>)</span>
<span id="cb622-3"><a href="#cb622-3"></a>l.append(<span class="st">&#39;bar&#39;</span>)</span>
<span id="cb622-4"><a href="#cb622-4"></a>l.append(<span class="st">&#39;baz&#39;</span>)</span>
<span id="cb622-5"><a href="#cb622-5"></a></span>
<span id="cb622-6"><a href="#cb622-6"></a>s <span class="op">=</span> <span class="st">&#39;&#39;</span>.join(l)</span></code></pre></div>
</section>
<section id="answer-3-score-38" class="level4">
<h4>Answer 3 (score 38)</h4>
<p>Don’t.</p>
<p>That is, for most cases you are better off generating the whole string in one go rather then appending to an existing string.</p>
<p>For example, don’t do: <code>obj1.name + ":" + str(obj1.count)</code></p>
<p>Instead: use <code>"%s:%d" % (obj1.name, obj1.count)</code></p>
<p>That will be easier to read and more efficient.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="sum-a-list-of-numbers-in-python-score-1505579-in-2018" class="level3">
<h3>71: Sum a list of numbers in Python (score <a href="https://stackoverflow.com/q/4362586.html">1505579</a> in 2018)</h3>
<section id="question-69" class="level4">
<h4>Question</h4>
<p>
I have a list of numbers such as <code>[1,2,3,4,5...]</code>, and I want to calculate <code>(1+2)/2</code> and for the second, <code>(2+3)/2</code> and the third, <code>(3+4)/2</code>, and so on. How can I do that?
</p>
<p>I would like to sum the first number with the second and divide it by 2, then sum the second with the third and divide by 2, and so on.</p>
<p>Also, how can I sum a list of numbers?</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb623-1"><a href="#cb623-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, ...]</span></code></pre></div>
<p>Is it:</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb624-1"><a href="#cb624-1"></a>b <span class="op">=</span> <span class="bu">sum</span>(a)</span>
<span id="cb624-2"><a href="#cb624-2"></a><span class="bu">print</span> b</span></code></pre></div>
<p>to get one number?</p>
<p>This doesn’t work for me.</p>
</section>
<section id="answer-2-score-259" class="level4">
<h4>Answer 2 (score 259)</h4>
<p>Question 1: So you want (element 0 + element 1) / 2, (element 1 + element 2) / 2, … etc.</p>
<p>We make two lists: one of every element except the first, and one of every element except the last. Then the averages we want are the averages of each pair taken from the two lists. We use <code>zip</code> to take pairs from two lists.</p>
<p>I assume you want to see decimals in the result, even though your input values are integers. By default, Python does integer division: it discards the remainder. To divide things through all the way, we need to use floating-point numbers. Fortunately, dividing an int by a float will produce a float, so we just use <code>2.0</code> for our divisor instead of <code>2</code>.</p>
<p>Thus:</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb625-1"><a href="#cb625-1"></a>averages <span class="op">=</span> [(x <span class="op">+</span> y) <span class="op">/</span> <span class="fl">2.0</span> <span class="cf">for</span> (x, y) <span class="kw">in</span> <span class="bu">zip</span>(my_list[:<span class="op">-</span><span class="dv">1</span>], my_list[<span class="dv">1</span>:])]</span></code></pre></div>
<p>Question 2:</p>
<p>That use of <code>sum</code> should work fine. The following works:</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb626-1"><a href="#cb626-1"></a>a <span class="op">=</span> <span class="bu">range</span>(<span class="dv">10</span>)</span>
<span id="cb626-2"><a href="#cb626-2"></a><span class="co"># [0,1,2,3,4,5,6,7,8,9]</span></span>
<span id="cb626-3"><a href="#cb626-3"></a>b <span class="op">=</span> <span class="bu">sum</span>(a)</span>
<span id="cb626-4"><a href="#cb626-4"></a><span class="bu">print</span> b</span>
<span id="cb626-5"><a href="#cb626-5"></a><span class="co"># Prints 45</span></span></code></pre></div>
<p>Also, you don’t need to assign everything to a variable at every step along the way. <code>print sum(a)</code> works just fine.</p>
<p>You will have to be more specific about exactly what you wrote and how it isn’t working.</p>
</section>
<section id="answer-3-score-102" class="level4">
<h4>Answer 3 (score 102)</h4>
<p>Sum list of numbers:</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb627-1"><a href="#cb627-1"></a><span class="bu">sum</span>(list_of_nums)</span></code></pre></div>
<p>Calculating half of n and n - 1 (if I have the pattern correct), using a <a href="http://docs.python.org/release/2.7/tutorial/datastructures.html#list-comprehensions" rel="noreferrer">list comprehension</a>:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb628-1"><a href="#cb628-1"></a>[(x <span class="op">+</span> (x <span class="op">-</span> <span class="dv">1</span>)) <span class="op">/</span> <span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> list_of_nums]</span></code></pre></div>
<p>Sum adjacent elements, e.g. ((1 + 2) / 2) + ((2 + 3) / 2) + … using <a href="http://docs.python.org/release/2.7/tutorial/datastructures.html#functional-programming-tools" rel="noreferrer">reduce</a> and <a href="http://docs.python.org/release/2.7/tutorial/controlflow.html#lambda-forms" rel="noreferrer">lambdas</a></p>
<div class="sourceCode" id="cb629"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb629-1"><a href="#cb629-1"></a><span class="bu">reduce</span>(<span class="kw">lambda</span> x, y: (x <span class="op">+</span> y) <span class="op">/</span> <span class="dv">2</span>, list_of_nums)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="remove-all-whitespace-in-a-string-in-python-score-1504934-in-2018" class="level3">
<h3>72: Remove all whitespace in a string in Python (score <a href="https://stackoverflow.com/q/8270092.html">1504934</a> in 2018)</h3>
<section id="question-70" class="level4">
<h4>Question</h4>
<p>I want to eliminate all the whitespace from a string, on both ends, and in between words.</p>
<p>I have this Python code:</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb630-1"><a href="#cb630-1"></a><span class="kw">def</span> my_handle(<span class="va">self</span>):</span>
<span id="cb630-2"><a href="#cb630-2"></a>    sentence <span class="op">=</span> <span class="st">&#39; hello  apple  &#39;</span></span>
<span id="cb630-3"><a href="#cb630-3"></a>    sentence.strip()</span></code></pre></div>
<p>But that only eliminates the whitespace on both sides of the string. How do I remove all whitespace?</p>
</section>
<section id="answer-accepted-score-1506" class="level4">
<h4>Answer accepted (score 1506)</h4>
<p>If you want to remove leading and ending spaces, use <a href="http://docs.python.org/2/library/stdtypes.html#str.strip" rel="noreferrer"><code>str.strip()</code></a>:</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb631-1"><a href="#cb631-1"></a>sentence <span class="op">=</span> <span class="st">&#39; hello  apple&#39;</span></span>
<span id="cb631-2"><a href="#cb631-2"></a>sentence.strip()</span>
<span id="cb631-3"><a href="#cb631-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;hello  apple&#39;</span></span></code></pre></div>
<p>If you want to remove all spaces, use <a href="http://docs.python.org/2/library/stdtypes.html#str.replace" rel="noreferrer"><code>str.replace()</code></a>:</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb632-1"><a href="#cb632-1"></a>sentence <span class="op">=</span> <span class="st">&#39; hello  apple&#39;</span></span>
<span id="cb632-2"><a href="#cb632-2"></a>sentence.replace(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb632-3"><a href="#cb632-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;helloapple&#39;</span></span></code></pre></div>
<p>If you want to remove duplicated spaces, use <a href="http://docs.python.org/2/library/stdtypes.html#str.split" rel="noreferrer"><code>str.split()</code></a>:</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb633-1"><a href="#cb633-1"></a>sentence <span class="op">=</span> <span class="st">&#39; hello  apple&#39;</span></span>
<span id="cb633-2"><a href="#cb633-2"></a><span class="co">&quot; &quot;</span>.join(sentence.split())</span>
<span id="cb633-3"><a href="#cb633-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;hello apple&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-241" class="level4">
<h4>Answer 2 (score 241)</h4>
<p>To remove <em>only spaces</em> use <a href="http://docs.python.org/2/library/stdtypes.html#str.replace"><code>str.replace</code></a>:</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb634-1"><a href="#cb634-1"></a>sentence <span class="op">=</span> sentence.replace(<span class="st">&#39; &#39;</span>, <span class="st">&#39;&#39;</span>)</span></code></pre></div>
<p>To remove <em>all whitespace characters</em> (space, tab, newline, and so on) you can use <a href="http://docs.python.org/2/library/stdtypes.html#str.split"><code>split</code></a> then <a href="http://docs.python.org/2/library/stdtypes.html#str.join"><code>join</code></a>:</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb635-1"><a href="#cb635-1"></a>sentence <span class="op">=</span> <span class="st">&#39;&#39;</span>.join(sentence.split())</span></code></pre></div>
<p>or a regular expression:</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb636-1"><a href="#cb636-1"></a><span class="im">import</span> re</span>
<span id="cb636-2"><a href="#cb636-2"></a>pattern <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r&#39;\s+&#39;</span>)</span>
<span id="cb636-3"><a href="#cb636-3"></a>sentence <span class="op">=</span> re.sub(pattern, <span class="st">&#39;&#39;</span>, sentence)</span></code></pre></div>
<p>If you want to only remove whitespace from the beginning and end you can use <a href="http://docs.python.org/2/library/stdtypes.html#str.strip"><code>strip</code></a>:</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb637-1"><a href="#cb637-1"></a>sentence <span class="op">=</span> sentence.strip()</span></code></pre></div>
<p>You can also use <a href="http://docs.python.org/2/library/stdtypes.html#str.lstrip"><code>lstrip</code></a> to remove whitespace only from the beginning of the string, and <a href="http://docs.python.org/2/library/stdtypes.html#str.rstrip"><code>rstrip</code></a> to remove whitespace from the end of the string.</p>
</section>
<section id="answer-3-score-86-1" class="level4">
<h4>Answer 3 (score 86)</h4>
<p>An alternative is to use regular expressions and match <a href="http://en.wikipedia.org/wiki/Whitespace_character#Unicode" rel="noreferrer">these strange white-space characters</a> too. Here are some examples:</p>
<p><strong>Remove ALL spaces in a string, even between words:</strong></p>
<div class="sourceCode" id="cb638"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb638-1"><a href="#cb638-1"></a><span class="im">import</span> re</span>
<span id="cb638-2"><a href="#cb638-2"></a>sentence <span class="op">=</span> re.sub(<span class="vs">r&quot;\s+&quot;</span>, <span class="st">&quot;&quot;</span>, sentence, flags<span class="op">=</span>re.UNICODE)</span></code></pre></div>
<p><strong>Remove spaces in the BEGINNING of a string:</strong></p>
<div class="sourceCode" id="cb639"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb639-1"><a href="#cb639-1"></a><span class="im">import</span> re</span>
<span id="cb639-2"><a href="#cb639-2"></a>sentence <span class="op">=</span> re.sub(<span class="vs">r&quot;^\s+&quot;</span>, <span class="st">&quot;&quot;</span>, sentence, flags<span class="op">=</span>re.UNICODE)</span></code></pre></div>
<p><strong>Remove spaces in the END of a string:</strong></p>
<div class="sourceCode" id="cb640"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb640-1"><a href="#cb640-1"></a><span class="im">import</span> re</span>
<span id="cb640-2"><a href="#cb640-2"></a>sentence <span class="op">=</span> re.sub(<span class="vs">r&quot;\s+$&quot;</span>, <span class="st">&quot;&quot;</span>, sentence, flags<span class="op">=</span>re.UNICODE)</span></code></pre></div>
<p><strong>Remove spaces both in the BEGINNING and in the END of a string:</strong></p>
<div class="sourceCode" id="cb641"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb641-1"><a href="#cb641-1"></a><span class="im">import</span> re</span>
<span id="cb641-2"><a href="#cb641-2"></a>sentence <span class="op">=</span> re.sub(<span class="st">&quot;^\s+|\s+$&quot;</span>, <span class="st">&quot;&quot;</span>, sentence, flags<span class="op">=</span>re.UNICODE)</span></code></pre></div>
<p><strong>Remove ONLY DUPLICATE spaces:</strong></p>
<div class="sourceCode" id="cb642"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb642-1"><a href="#cb642-1"></a><span class="im">import</span> re</span>
<span id="cb642-2"><a href="#cb642-2"></a>sentence <span class="op">=</span> <span class="st">&quot; &quot;</span>.join(re.split(<span class="st">&quot;\s+&quot;</span>, sentence, flags<span class="op">=</span>re.UNICODE))</span></code></pre></div>
<p>(All examples work in both Python 2 and Python 3)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-there-a-not-equal-operator-in-python-score-1487533-in-2018" class="level3">
<h3>73: Is there a “not equal” operator in Python? (score <a href="https://stackoverflow.com/q/11060506.html">1487533</a> in 2018)</h3>
<section id="question-71" class="level4">
<h4>Question</h4>
<p>How would you say does not equal?</p>
<p>Like</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb643-1"><a href="#cb643-1"></a><span class="cf">if</span> hi <span class="op">==</span> hi:</span>
<span id="cb643-2"><a href="#cb643-2"></a>    <span class="bu">print</span> <span class="st">&quot;hi&quot;</span></span>
<span id="cb643-3"><a href="#cb643-3"></a><span class="cf">elif</span> hi (does <span class="kw">not</span> equal) bye:</span>
<span id="cb643-4"><a href="#cb643-4"></a>    <span class="bu">print</span> <span class="st">&quot;no hi&quot;</span></span></code></pre></div>
<p>Is there something equivalent to <code>==</code> that means “not equal”?</p>
</section>
<section id="answer-accepted-score-585" class="level4">
<h4>Answer accepted (score 585)</h4>
<p>Use <code>!=</code>. See <a href="http://docs.python.org/release/2.5.2/lib/comparisons.html" rel="noreferrer">comparison operators</a>. For comparing object identities, you can use the keyword <code>is</code> and its negation <code>is not</code>.</p>
<p>e.g. </p>
<div class="sourceCode" id="cb644"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb644-1"><a href="#cb644-1"></a><span class="dv">1</span> <span class="op">==</span> <span class="dv">1</span> <span class="co">#  -&gt; True</span></span>
<span id="cb644-2"><a href="#cb644-2"></a><span class="dv">1</span> <span class="op">!=</span> <span class="dv">1</span> <span class="co">#  -&gt; False</span></span>
<span id="cb644-3"><a href="#cb644-3"></a>[] <span class="kw">is</span> [] <span class="co">#-&gt; False (distinct objects)</span></span>
<span id="cb644-4"><a href="#cb644-4"></a>a <span class="op">=</span> b <span class="op">=</span> []<span class="op">;</span> a <span class="kw">is</span> b <span class="co"># -&gt; True (same object)</span></span></code></pre></div>
</section>
<section id="answer-2-score-56" class="level4">
<h4>Answer 2 (score 56)</h4>
<p>Not equal <code>!=</code> (vs equal <code>==</code>)</p>
<p>Are you asking about something like this?</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb645-1"><a href="#cb645-1"></a>answer <span class="op">=</span> <span class="st">&#39;hi&#39;</span></span>
<span id="cb645-2"><a href="#cb645-2"></a></span>
<span id="cb645-3"><a href="#cb645-3"></a><span class="cf">if</span> answer <span class="op">==</span> <span class="st">&#39;hi&#39;</span>:     <span class="co"># equal</span></span>
<span id="cb645-4"><a href="#cb645-4"></a>   <span class="bu">print</span> <span class="st">&quot;hi&quot;</span></span>
<span id="cb645-5"><a href="#cb645-5"></a><span class="cf">elif</span> answer <span class="op">!=</span> <span class="st">&#39;hi&#39;</span>:   <span class="co"># not equal</span></span>
<span id="cb645-6"><a href="#cb645-6"></a>   <span class="bu">print</span> <span class="st">&quot;no hi&quot;</span></span></code></pre></div>
<p>This <a href="http://www.tutorialspoint.com/python/python_basic_operators.htm" rel="noreferrer">Python - Basic Operators</a> chart might be helpful.</p>
</section>
<section id="answer-3-score-24" class="level4">
<h4>Answer 3 (score 24)</h4>
<p>There’s the <code>!=</code> (not equal) operator that returns <code>True</code> when two values differ, though be careful with the types because <code>"1" != 1</code>. This will always return True and <code>"1" == 1</code> will always return False, since the types differ. Python is dynamically, but strongly typed, and other statically typed languages would complain about comparing different types.</p>
<p>There’s also the <code>else</code> clause:</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb646-1"><a href="#cb646-1"></a><span class="co"># This will always print either &quot;hi&quot; or &quot;no hi&quot; unless something unforeseen happens.</span></span>
<span id="cb646-2"><a href="#cb646-2"></a><span class="cf">if</span> hi <span class="op">==</span> <span class="st">&quot;hi&quot;</span>:     <span class="co"># The variable hi is being compared to the string &quot;hi&quot;, strings are immutable in Python, so you could use the &#39;is&#39; operator.</span></span>
<span id="cb646-3"><a href="#cb646-3"></a>    <span class="bu">print</span> <span class="st">&quot;hi&quot;</span>     <span class="co"># If indeed it is the string &quot;hi&quot; then print &quot;hi&quot;</span></span>
<span id="cb646-4"><a href="#cb646-4"></a><span class="cf">else</span>:              <span class="co"># hi and &quot;hi&quot; are not the same</span></span>
<span id="cb646-5"><a href="#cb646-5"></a>    <span class="bu">print</span> <span class="st">&quot;no hi&quot;</span></span></code></pre></div>
<p>The <code>is</code> operator is the <em>object identity</em> operator used to check if two objects in fact are the same:</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb647-1"><a href="#cb647-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb647-2"><a href="#cb647-2"></a>b <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb647-3"><a href="#cb647-3"></a><span class="bu">print</span> a <span class="op">==</span> b <span class="co"># This will print True since they have the same values</span></span>
<span id="cb647-4"><a href="#cb647-4"></a><span class="bu">print</span> a <span class="kw">is</span> b <span class="co"># This will print False since they are different objects.</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-append-to-a-file-in-python-score-1477953-in-2019" class="level3">
<h3>74: How do you append to a file in Python? (score <a href="https://stackoverflow.com/q/4706499.html">1477953</a> in 2019)</h3>
<section id="question-72" class="level4">
<h4>Question</h4>
<p>How do you append to the file instead of overwriting it? Is there a special function that appends to the file?</p>
</section>
<section id="answer-accepted-score-2219" class="level4">
<h4>Answer accepted (score 2219)</h4>
<div class="sourceCode" id="cb648"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb648-1"><a href="#cb648-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;test.txt&quot;</span>, <span class="st">&quot;a&quot;</span>) <span class="im">as</span> myfile:</span>
<span id="cb648-2"><a href="#cb648-2"></a>    myfile.write(<span class="st">&quot;appended text&quot;</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-183" class="level4">
<h4>Answer 2 (score 183)</h4>
<p>You need to open the file in append mode, by setting “a” or “ab” as the mode. See <em><a href="https://docs.python.org/2/library/functions.html#open" rel="noreferrer">open()</a></em>.</p>
<p>When you open with “a” mode, the write position will <strong>always</strong> be at the end of the file (an append). You can open with “a+” to allow reading, seek backwards and read (but all writes will still be at the end of the file!).</p>
<p>Example:</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb649-1"><a href="#cb649-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;test1&#39;</span>,<span class="st">&#39;wb&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb649-2"><a href="#cb649-2"></a>        f.write(<span class="st">&#39;test&#39;</span>)</span>
<span id="cb649-3"><a href="#cb649-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;test1&#39;</span>,<span class="st">&#39;ab&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb649-4"><a href="#cb649-4"></a>        f.write(<span class="st">&#39;koko&#39;</span>)</span>
<span id="cb649-5"><a href="#cb649-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;test1&#39;</span>,<span class="st">&#39;rb&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb649-6"><a href="#cb649-6"></a>        f.read()</span>
<span id="cb649-7"><a href="#cb649-7"></a><span class="co">&#39;testkoko&#39;</span></span></code></pre></div>
<p><strong>Note</strong>: Using ‘a’ is not the same as opening with ‘w’ and seeking to the end of the file - consider what might happen if another program opened the file and started writing between the seek and the write. On some operating systems, opening the file with ‘a’ guarantees that all your following writes will be appended atomically to the end of the file (even as the file grows by other writes).</p>
<hr>
<p>A few more details about how the “a” mode operates (<em>tested on Linux only</em>). Even if you seek back, every write will append to the end of the file:</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb650-1"><a href="#cb650-1"></a><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;test&#39;</span>,<span class="st">&#39;a+&#39;</span>) <span class="co"># Not using &#39;with&#39; just to simplify the example REPL session</span></span>
<span id="cb650-2"><a href="#cb650-2"></a><span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;hi&#39;</span>)</span>
<span id="cb650-3"><a href="#cb650-3"></a><span class="op">&gt;&gt;&gt;</span> f.seek(<span class="dv">0</span>)</span>
<span id="cb650-4"><a href="#cb650-4"></a><span class="op">&gt;&gt;&gt;</span> f.read()</span>
<span id="cb650-5"><a href="#cb650-5"></a><span class="co">&#39;hi&#39;</span></span>
<span id="cb650-6"><a href="#cb650-6"></a><span class="op">&gt;&gt;&gt;</span> f.seek(<span class="dv">0</span>)</span>
<span id="cb650-7"><a href="#cb650-7"></a><span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;bye&#39;</span>) <span class="co"># Will still append despite the seek(0)!</span></span>
<span id="cb650-8"><a href="#cb650-8"></a><span class="op">&gt;&gt;&gt;</span> f.seek(<span class="dv">0</span>)</span>
<span id="cb650-9"><a href="#cb650-9"></a><span class="op">&gt;&gt;&gt;</span> f.read()</span>
<span id="cb650-10"><a href="#cb650-10"></a><span class="co">&#39;hibye&#39;</span></span></code></pre></div>
<p>In fact, the <code>fopen</code> <a href="http://www.manpagez.com/man/3/fopen/" rel="noreferrer">manpage</a> states:</p>
<blockquote>
<p>
Opening a file in append mode (a as the first character of mode) causes all subsequent write operations to this stream to occur at end-of-file, as if preceded the call:
</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb651-1"><a href="#cb651-1"></a>fseek(stream, <span class="dv">0</span>, SEEK_END)<span class="op">;</span></span></code></pre></div>
</blockquote>
<hr>
<h5>
Old simplified answer (not using <code>with</code>):
</h3>
<p>Example: (<em>in a real program <strong>use <code>with</code> to close the file</strong> - see <a href="http://docs.python.org/2/whatsnew/2.6.html#pep-343-the-with-statement" rel="noreferrer">the documentation</a></em>)</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb652-1"><a href="#cb652-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">open</span>(<span class="st">&quot;test&quot;</span>,<span class="st">&quot;wb&quot;</span>).write(<span class="st">&quot;test&quot;</span>)</span>
<span id="cb652-2"><a href="#cb652-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">open</span>(<span class="st">&quot;test&quot;</span>,<span class="st">&quot;a+b&quot;</span>).write(<span class="st">&quot;koko&quot;</span>)</span>
<span id="cb652-3"><a href="#cb652-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">open</span>(<span class="st">&quot;test&quot;</span>,<span class="st">&quot;rb&quot;</span>).read()</span>
<span id="cb652-4"><a href="#cb652-4"></a><span class="co">&#39;testkoko&#39;</span></span></code></pre></div>
</section>
<section id="answer-3-score-45" class="level4">
<h4>Answer 3 (score 45)</h4>
<p>I always do this,</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb653-1"><a href="#cb653-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;filename.txt&#39;</span>, <span class="st">&#39;a&#39;</span>)</span>
<span id="cb653-2"><a href="#cb653-2"></a>f.write(<span class="st">&quot;stuff&quot;</span>)</span>
<span id="cb653-3"><a href="#cb653-3"></a>f.close()</span></code></pre></div>
<p>It’s simple, but very useful.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="replacements-for-switch-statement-in-python-score-1472506-in-2018" class="level3">
<h3>75: Replacements for switch statement in Python? (score <a href="https://stackoverflow.com/q/60208.html">1472506</a> in 2018)</h3>
<section id="question-73" class="level4">
<h4>Question</h4>
<p>I want to write a function in Python that returns different fixed values based on the value of an input index.</p>
<p>In other languages I would use a <code>switch</code> or <code>case</code> statement, but Python does not appear to have a <code>switch</code> statement. What are the recommended Python solutions in this scenario?</p>
</section>
<section id="answer-accepted-score-1395" class="level4">
<h4>Answer accepted (score 1395)</h4>
<p>You could use a dictionary:</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb654-1"><a href="#cb654-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb654-2"><a href="#cb654-2"></a>    <span class="cf">return</span> {</span>
<span id="cb654-3"><a href="#cb654-3"></a>        <span class="st">&#39;a&#39;</span>: <span class="dv">1</span>,</span>
<span id="cb654-4"><a href="#cb654-4"></a>        <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>,</span>
<span id="cb654-5"><a href="#cb654-5"></a>    }[x]</span></code></pre></div>
</section>
<section id="answer-2-score-1299" class="level4">
<h4>Answer 2 (score 1299)</h4>
<p>If you’d like defaults you could use the dictionary <a href="https://docs.python.org/2/library/stdtypes.html#dict.get" rel="noreferrer"><code>get(key[, default])</code></a> method:</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb655-1"><a href="#cb655-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb655-2"><a href="#cb655-2"></a>    <span class="cf">return</span> {</span>
<span id="cb655-3"><a href="#cb655-3"></a>        <span class="st">&#39;a&#39;</span>: <span class="dv">1</span>,</span>
<span id="cb655-4"><a href="#cb655-4"></a>        <span class="st">&#39;b&#39;</span>: <span class="dv">2</span></span>
<span id="cb655-5"><a href="#cb655-5"></a>    }.get(x, <span class="dv">9</span>)    <span class="co"># 9 is default if x not found</span></span></code></pre></div>
</section>
<section id="answer-3-score-364-1" class="level4">
<h4>Answer 3 (score 364)</h4>
<p>I’ve always liked doing it this way</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb656-1"><a href="#cb656-1"></a>result <span class="op">=</span> {</span>
<span id="cb656-2"><a href="#cb656-2"></a>  <span class="st">&#39;a&#39;</span>: <span class="kw">lambda</span> x: x <span class="op">*</span> <span class="dv">5</span>,</span>
<span id="cb656-3"><a href="#cb656-3"></a>  <span class="st">&#39;b&#39;</span>: <span class="kw">lambda</span> x: x <span class="op">+</span> <span class="dv">7</span>,</span>
<span id="cb656-4"><a href="#cb656-4"></a>  <span class="st">&#39;c&#39;</span>: <span class="kw">lambda</span> x: x <span class="op">-</span> <span class="dv">2</span></span>
<span id="cb656-5"><a href="#cb656-5"></a>}[value](x.html)</span></code></pre></div>
<p><a href="http://blog.simonwillison.net/post/57956755106/switch" rel="noreferrer">From here</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-does-comparing-strings-using-either-or-is-sometimes-produce-a-different-result-score-1471340-in-2019" class="level3">
<h3>76: Why does comparing strings using either ‘==’ or ‘is’ sometimes produce a different result? (score <a href="https://stackoverflow.com/q/1504717.html">1471340</a> in 2019)</h3>
<section id="question-74" class="level4">
<h4>Question</h4>
<p>I’ve got a Python program where two variables are set to the value <code>'public'</code>. In a conditional expression I have the comparison <code>var1 is var2</code> which fails, but if I change it to <code>var1 == var2</code> it returns <code>True</code>.</p>
<p>Now if I open my Python interpreter and do the same “is” comparison, it succeeds.</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb657-1"><a href="#cb657-1"></a><span class="op">&gt;&gt;&gt;</span> s1 <span class="op">=</span> <span class="st">&#39;public&#39;</span></span>
<span id="cb657-2"><a href="#cb657-2"></a><span class="op">&gt;&gt;&gt;</span> s2 <span class="op">=</span> <span class="st">&#39;public&#39;</span></span>
<span id="cb657-3"><a href="#cb657-3"></a><span class="op">&gt;&gt;&gt;</span> s2 <span class="kw">is</span> s1</span>
<span id="cb657-4"><a href="#cb657-4"></a><span class="va">True</span></span></code></pre></div>
<p>What am I missing here?</p>
</section>
<section id="answer-accepted-score-1439" class="level4">
<h4>Answer accepted (score 1439)</h4>
<p><code>is</code> is identity testing, <code>==</code> is equality testing. what happens in your code would be emulated in the interpreter like this:</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb658-1"><a href="#cb658-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="st">&#39;pub&#39;</span></span>
<span id="cb658-2"><a href="#cb658-2"></a><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="st">&#39;&#39;</span>.join([<span class="st">&#39;p&#39;</span>, <span class="st">&#39;u&#39;</span>, <span class="st">&#39;b&#39;</span>])</span>
<span id="cb658-3"><a href="#cb658-3"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">==</span> b</span>
<span id="cb658-4"><a href="#cb658-4"></a><span class="va">True</span></span>
<span id="cb658-5"><a href="#cb658-5"></a><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</span>
<span id="cb658-6"><a href="#cb658-6"></a><span class="va">False</span></span></code></pre></div>
<p>so, no wonder they’re not the same, right?</p>
<p>In other words: <code>is</code> is the <code>id(a) == id(b)</code></p>
</section>
<section id="answer-2-score-534" class="level4">
<h4>Answer 2 (score 534)</h4>
<p>Other answers here are correct: <code>is</code> is used for <em>identity</em> comparison, while <code>==</code> is used for <em>equality</em> comparison. Since what you care about is equality (the two strings should contain the same characters), in this case the <code>is</code> operator is simply wrong and you should be using <code>==</code> instead.</p>
<p>The reason <code>is</code> works interactively is that (most) string literals are <a href="https://en.wikipedia.org/wiki/String_interning" rel="noreferrer">interned</a> by default. From Wikipedia:</p>
<blockquote>
<p>
Interned strings speed up string comparisons, which are sometimes a performance bottleneck in applications (such as compilers and dynamic programming language runtimes) that rely heavily on hash tables with string keys. Without interning, checking that two different strings are equal involves examining every character of both strings. This is slow for several reasons: it is inherently O(n) in the length of the strings; it typically requires reads from several regions of memory, which take time; and the reads fills up the processor cache, meaning there is less cache available for other needs. With interned strings, a simple object identity test suffices after the original intern operation; this is typically implemented as a pointer equality test, normally just a single machine instruction with no memory reference at all.
</p>
</blockquote>
<p>So, when you have two string literals (words that are literally typed into your program source code, surrounded by quotation marks) in your program that have the same value, the Python compiler will automatically intern the strings, making them both stored at the same memory location. (Note that this doesn’t <em>always</em> happen, and the rules for when this happens are quite convoluted, so please don’t rely on this behavior in production code!)</p>
<p>Since in your interactive session both strings are actually stored in the same memory location, they have the same <em>identity</em>, so the <code>is</code> operator works as expected. But if you construct a string by some other method (even if that string contains <em>exactly</em> the same characters), then the string may be <em>equal</em>, but it is not <em>the same string</em> – that is, it has a different <em>identity</em>, because it is stored in a different place in memory.</p>
</section>
<section id="answer-3-score-101" class="level4">
<h4>Answer 3 (score 101)</h4>
<p>The <code>is</code> keyword is a test for object identity while <code>==</code> is a value comparison.</p>
<p>If you use <code>is</code>, the result will be true if and only if the object is the same object. However, <code>==</code> will be true any time the values of the object are the same.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-count-the-occurrences-of-a-list-item-score-1467929-in-2018" class="level3">
<h3>77: How can I count the occurrences of a list item? (score <a href="https://stackoverflow.com/q/2600191.html">1467929</a> in 2018)</h3>
<section id="question-75" class="level4">
<h4>Question</h4>
<p>Given an item, how can I count its occurrences in a list in Python?</p>
</section>
<section id="answer-accepted-score-1702" class="level4">
<h4>Answer accepted (score 1702)</h4>
<p>If you only want one item’s count, use the <code>count</code> method:</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb659-1"><a href="#cb659-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">1</span>].count(<span class="dv">1</span>)</span>
<span id="cb659-2"><a href="#cb659-2"></a><span class="dv">3</span></span></code></pre></div>
<p><strong>Don’t</strong> use this if you want to count multiple items. Calling <code>count</code> in a loop requires a separate pass over the list for every <code>count</code> call, which can be catastrophic for performance. If you want to count all items, or even just multiple items, use <code>Counter</code>, as explained in the other answers.</p>
</section>
<section id="answer-2-score-1598" class="level4">
<h4>Answer 2 (score 1598)</h4>
<p>If you are using Python 2.7 or 3 and you want number of occurrences for each element:</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb660-1"><a href="#cb660-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb660-2"><a href="#cb660-2"></a><span class="op">&gt;&gt;&gt;</span> z <span class="op">=</span> [<span class="st">&#39;blue&#39;</span>, <span class="st">&#39;red&#39;</span>, <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;yellow&#39;</span>, <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;red&#39;</span>]</span>
<span id="cb660-3"><a href="#cb660-3"></a><span class="op">&gt;&gt;&gt;</span> Counter(z)</span>
<span id="cb660-4"><a href="#cb660-4"></a>Counter({<span class="st">&#39;blue&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;red&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;yellow&#39;</span>: <span class="dv">1</span>})</span></code></pre></div>
</section>
<section id="answer-3-score-237" class="level4">
<h4>Answer 3 (score 237)</h4>
<p><strong>Counting the occurrences of one item in a list</strong></p>
<p>For counting the occurrences of just one list item you can use <code>count()</code></p>
<div class="sourceCode" id="cb661"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb661-1"><a href="#cb661-1"></a><span class="op">&gt;&gt;&gt;</span> l <span class="op">=</span> [<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;b&quot;</span>]</span>
<span id="cb661-2"><a href="#cb661-2"></a><span class="op">&gt;&gt;&gt;</span> l.count(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb661-3"><a href="#cb661-3"></a><span class="dv">1</span></span>
<span id="cb661-4"><a href="#cb661-4"></a><span class="op">&gt;&gt;&gt;</span> l.count(<span class="st">&quot;b&quot;</span>)</span>
<span id="cb661-5"><a href="#cb661-5"></a><span class="dv">2</span></span></code></pre></div>
<p>Counting the occurrences of <em>all</em> items in a list is also known as “tallying” a list, or creating a tally counter.</p>
<p><strong>Counting all items with count()</strong></p>
<p>To count the occurrences of items in <code>l</code> one can simply use a list comprehension and the <code>count()</code> method</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb662-1"><a href="#cb662-1"></a>[[x,l.count(x)] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">set</span>(l)]</span></code></pre></div>
<p>(or similarly with a dictionary <code>dict((x,l.count(x)) for x in set(l))</code>)</p>
<p>Example:</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb663-1"><a href="#cb663-1"></a><span class="op">&gt;&gt;&gt;</span> l <span class="op">=</span> [<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;b&quot;</span>]</span>
<span id="cb663-2"><a href="#cb663-2"></a><span class="op">&gt;&gt;&gt;</span> [[x,l.count(x)] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">set</span>(l)]</span>
<span id="cb663-3"><a href="#cb663-3"></a>[[<span class="st">&#39;a&#39;</span>, <span class="dv">1</span>], [<span class="st">&#39;b&#39;</span>, <span class="dv">2</span>]]</span>
<span id="cb663-4"><a href="#cb663-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">dict</span>((x,l.count(x)) <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">set</span>(l))</span>
<span id="cb663-5"><a href="#cb663-5"></a>{<span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="dv">2</span>}</span></code></pre></div>
<p><strong>Counting all items with Counter()</strong></p>
<p>Alternatively, there’s the faster <code>Counter</code> class from the <code>collections</code> library</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb664-1"><a href="#cb664-1"></a>Counter(l)</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb665-1"><a href="#cb665-1"></a><span class="op">&gt;&gt;&gt;</span> l <span class="op">=</span> [<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;b&quot;</span>]</span>
<span id="cb665-2"><a href="#cb665-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb665-3"><a href="#cb665-3"></a><span class="op">&gt;&gt;&gt;</span> Counter(l)</span>
<span id="cb665-4"><a href="#cb665-4"></a>Counter({<span class="st">&#39;b&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;a&#39;</span>: <span class="dv">1</span>})</span></code></pre></div>
<p><strong>How much faster is Counter?</strong></p>
<p>I checked how much faster <code>Counter</code> is for tallying lists. I tried both methods out with a few values of <code>n</code> and it appears that <code>Counter</code> is faster by a constant factor of approximately 2.</p>
<p>Here is the script I used:</p>
<div class="sourceCode" id="cb666"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb666-1"><a href="#cb666-1"></a><span class="im">from</span> __future__ <span class="im">import</span> print_function</span>
<span id="cb666-2"><a href="#cb666-2"></a><span class="im">import</span> timeit</span>
<span id="cb666-3"><a href="#cb666-3"></a></span>
<span id="cb666-4"><a href="#cb666-4"></a>t1<span class="op">=</span>timeit.Timer(<span class="st">&#39;Counter(l)&#39;</span>, <span class="op">\</span></span>
<span id="cb666-5"><a href="#cb666-5"></a>                <span class="st">&#39;import random;import string;from collections import Counter;n=1000;l=[random.choice(string.ascii_letters) for x in range(n)]&#39;</span></span>
<span id="cb666-6"><a href="#cb666-6"></a>                )</span>
<span id="cb666-7"><a href="#cb666-7"></a></span>
<span id="cb666-8"><a href="#cb666-8"></a>t2<span class="op">=</span>timeit.Timer(<span class="st">&#39;[[x,l.count(x)] for x in set(l)]&#39;</span>,</span>
<span id="cb666-9"><a href="#cb666-9"></a>                <span class="st">&#39;import random;import string;n=1000;l=[random.choice(string.ascii_letters) for x in range(n)]&#39;</span></span>
<span id="cb666-10"><a href="#cb666-10"></a>                )</span>
<span id="cb666-11"><a href="#cb666-11"></a></span>
<span id="cb666-12"><a href="#cb666-12"></a><span class="bu">print</span>(<span class="st">&quot;Counter(): &quot;</span>, t1.repeat(repeat<span class="op">=</span><span class="dv">3</span>,number<span class="op">=</span><span class="dv">10000</span>))</span>
<span id="cb666-13"><a href="#cb666-13"></a><span class="bu">print</span>(<span class="st">&quot;count():   &quot;</span>, t2.repeat(repeat<span class="op">=</span><span class="dv">3</span>,number<span class="op">=</span><span class="dv">10000</span>)</span></code></pre></div>
<p>And the output:</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb667-1"><a href="#cb667-1"></a>Counter():  [<span class="fl">0.46062711701961234</span>, <span class="fl">0.4022796869976446</span>, <span class="fl">0.3974247490405105</span>]</span>
<span id="cb667-2"><a href="#cb667-2"></a>count():    [<span class="fl">7.779430688009597</span>, <span class="fl">7.962715800967999</span>, <span class="fl">8.420845870045014</span>]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-read-from-stdin-score-1462727-in-2018" class="level3">
<h3>78: How do you read from stdin? (score <a href="https://stackoverflow.com/q/1450393.html">1462727</a> in 2018)</h3>
<section id="question-76" class="level4">
<h4>Question</h4>
<p>I’m trying to do some of the <a href="http://en.wikipedia.org/wiki/Code_golf" rel="noreferrer">code golf</a> challenges, but they all require the input to be taken from <code>stdin</code>. How do I get that in Python?</p>
</section>
<section id="answer-2-score-899" class="level4">
<h4>Answer 2 (score 899)</h4>
<p>You could use the <a href="http://docs.python.org/library/fileinput.html" rel="noreferrer"><code>fileinput</code></a> module:</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb668-1"><a href="#cb668-1"></a><span class="im">import</span> fileinput</span>
<span id="cb668-2"><a href="#cb668-2"></a></span>
<span id="cb668-3"><a href="#cb668-3"></a><span class="cf">for</span> line <span class="kw">in</span> fileinput.<span class="bu">input</span>():</span>
<span id="cb668-4"><a href="#cb668-4"></a>    <span class="cf">pass</span></span></code></pre></div>
<p><a href="http://docs.python.org/library/fileinput.html" rel="noreferrer"><code>fileinput</code></a> will loop through all the lines in the input specified as file names given in command-line arguments, or the standard input if no arguments are provided.</p>
<p>Note: <code>line</code> will contain a trailing newline; to remove it use <code>line.rstrip()</code></p>
</section>
<section id="answer-3-score-681-1" class="level4">
<h4>Answer 3 (score 681)</h4>
<p>There’s a few ways to do it.</p>
<ul>
<li>
<p>
<a href="http://docs.python.org/library/sys.html#sys.stdin" rel="noreferrer"><code>sys.stdin</code></a> is a file-like object on which you can call functions <code>read</code> or <code>readlines</code> if you want to read everything or you want to read everything and split it by newline automatically. (You need to <code>import sys</code> for this to work.)
</p>
</li>
<li>
<p>
If you want to <em>prompt</em> the user for input, you can use <a href="https://docs.python.org/2.7/library/functions.html?highlight=raw_input#raw_input" rel="noreferrer"><code>raw_input</code></a> in Python 2.X, and just <a href="https://docs.python.org/3/library/functions.html#input" rel="noreferrer"><code>input</code></a> in Python 3.
</p>
</li>
<li>
<p>
If you actually just want to read command-line options, you can access them via the <a href="http://docs.python.org/library/sys.html#sys.argv" rel="noreferrer">sys.argv</a> list.
</p>
</li>
</ul>
<p>You will probably find <a href="http://en.wikibooks.org/wiki/Python_Programming/Input_and_output" rel="noreferrer">this Wikibook article on I/O in Python</a> to be a useful reference as well.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-the-row-count-of-a-pandas-dataframe-score-1456763-in-2019" class="level3">
<h3>79: How do I get the row count of a pandas DataFrame? (score <a href="https://stackoverflow.com/q/15943769.html">1456763</a> in 2019)</h3>
<section id="question-77" class="level4">
<h4>Question</h4>
<p>I’m trying to get the number of rows of dataframe df with Pandas, and here is my code.</p>
<h5>
Method 1:
</h3>
<div class="sourceCode" id="cb669"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb669-1"><a href="#cb669-1"></a>total_rows <span class="op">=</span> df.count</span>
<span id="cb669-2"><a href="#cb669-2"></a><span class="bu">print</span> total_rows <span class="op">+</span><span class="dv">1</span></span></code></pre></div>
<h5>
Method 2:
</h3>
<div class="sourceCode" id="cb670"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb670-1"><a href="#cb670-1"></a>total_rows <span class="op">=</span> df[<span class="st">&#39;First_columnn_label&#39;</span>].count</span>
<span id="cb670-2"><a href="#cb670-2"></a><span class="bu">print</span> total_rows <span class="op">+</span><span class="dv">1</span></span></code></pre></div>
<p>Both the code snippets give me this error:</p>
<blockquote>
TypeError: unsupported operand type(s) for +: ‘instancemethod’ and ‘int’
</blockquote>
<p>What am I doing wrong?</p>
</section>
<section id="answer-accepted-score-1024" class="level4">
<h4>Answer accepted (score 1024)</h4>
<p>You can use the <code>.shape</code> property or just <code>len(DataFrame.index)</code>. However, there are notable performance differences ( <code>len(DataFrame.index)</code> is fastest):</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb671-1"><a href="#cb671-1"></a>In [<span class="dv">1</span>]: <span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb671-2"><a href="#cb671-2"></a></span>
<span id="cb671-3"><a href="#cb671-3"></a>In [<span class="dv">2</span>]: <span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb671-4"><a href="#cb671-4"></a></span>
<span id="cb671-5"><a href="#cb671-5"></a>In [<span class="dv">3</span>]: df <span class="op">=</span> pd.DataFrame(np.arange(<span class="dv">12</span>).reshape(<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb671-6"><a href="#cb671-6"></a></span>
<span id="cb671-7"><a href="#cb671-7"></a>In [<span class="dv">4</span>]: df</span>
<span id="cb671-8"><a href="#cb671-8"></a>Out[<span class="dv">4</span>]: </span>
<span id="cb671-9"><a href="#cb671-9"></a>   <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span></span>
<span id="cb671-10"><a href="#cb671-10"></a><span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span></span>
<span id="cb671-11"><a href="#cb671-11"></a><span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span></span>
<span id="cb671-12"><a href="#cb671-12"></a><span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span></span>
<span id="cb671-13"><a href="#cb671-13"></a><span class="dv">3</span>  <span class="dv">9</span>  <span class="dv">10</span> <span class="dv">11</span></span>
<span id="cb671-14"><a href="#cb671-14"></a></span>
<span id="cb671-15"><a href="#cb671-15"></a>In [<span class="dv">5</span>]: df.shape</span>
<span id="cb671-16"><a href="#cb671-16"></a>Out[<span class="dv">5</span>]: (<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb671-17"><a href="#cb671-17"></a></span>
<span id="cb671-18"><a href="#cb671-18"></a>In [<span class="dv">6</span>]: timeit df.shape</span>
<span id="cb671-19"><a href="#cb671-19"></a><span class="fl">2.77</span> µs ± <span class="dv">644</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">100000</span> loops each)</span>
<span id="cb671-20"><a href="#cb671-20"></a></span>
<span id="cb671-21"><a href="#cb671-21"></a>In [<span class="dv">7</span>]: timeit df[<span class="dv">0</span>].count()</span>
<span id="cb671-22"><a href="#cb671-22"></a><span class="dv">348</span> µs ± <span class="fl">1.31</span> µs per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">1000</span> loops each)</span>
<span id="cb671-23"><a href="#cb671-23"></a></span>
<span id="cb671-24"><a href="#cb671-24"></a>In [<span class="dv">8</span>]: <span class="bu">len</span>(df.index)</span>
<span id="cb671-25"><a href="#cb671-25"></a>Out[<span class="dv">8</span>]: <span class="dv">4</span></span>
<span id="cb671-26"><a href="#cb671-26"></a></span>
<span id="cb671-27"><a href="#cb671-27"></a>In [<span class="dv">9</span>]: timeit <span class="bu">len</span>(df.index)</span>
<span id="cb671-28"><a href="#cb671-28"></a><span class="dv">990</span> ns ± <span class="fl">4.97</span> ns per loop (mean ± std. dev. of <span class="dv">7</span> runs, <span class="dv">100000</span> loops each)</span></code></pre></div>
<h5>
<a href="https://i.stack.imgur.com/xoTgt.png" rel="noreferrer"><img src="https://i.stack.imgur.com/xoTgt.png" alt="enter image description here"></a>
</h2>
<p>EDIT: As <span class="citation" data-cites="Dan">@Dan</span> Allen noted in the comments <code>len(df.index)</code> and <code>df[0].count()</code> are not interchangeable as <code>count</code> excludes <code>NaN</code>s,</p>
</section>
<section id="answer-2-score-237" class="level4">
<h4>Answer 2 (score 237)</h4>
<p>Suppose <code>df</code> is your dataframe then:</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb672-1"><a href="#cb672-1"></a>count_row <span class="op">=</span> df.shape[<span class="dv">0</span>]  <span class="co"># gives number of row count</span></span>
<span id="cb672-2"><a href="#cb672-2"></a>count_col <span class="op">=</span> df.shape[<span class="dv">1</span>]  <span class="co"># gives number of col count</span></span></code></pre></div>
<p>Or, more succinctly,</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb673-1"><a href="#cb673-1"></a>r, c <span class="op">=</span> df.shape</span></code></pre></div>
</section>
<section id="answer-3-score-120" class="level4">
<h4>Answer 3 (score 120)</h4>
<p>Use <code>len(df)</code>. This works as of pandas 0.11 or maybe even earlier.</p>
<p><code>__len__()</code> is currently (0.12) documented with <code>Returns length of index</code>. Timing info, set up the same way as in root’s answer:</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb674-1"><a href="#cb674-1"></a>In [<span class="dv">7</span>]: timeit <span class="bu">len</span>(df.index)</span>
<span id="cb674-2"><a href="#cb674-2"></a><span class="dv">1000000</span> loops, best of <span class="dv">3</span>: <span class="dv">248</span> ns per loop</span>
<span id="cb674-3"><a href="#cb674-3"></a></span>
<span id="cb674-4"><a href="#cb674-4"></a>In [<span class="dv">8</span>]: timeit <span class="bu">len</span>(df)</span>
<span id="cb674-5"><a href="#cb674-5"></a><span class="dv">1000000</span> loops, best of <span class="dv">3</span>: <span class="dv">573</span> ns per loop</span></code></pre></div>
<p>Due to one additional function call it is a bit slower than calling <code>len(df.index)</code> directly, but this should not play any role in most use cases.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="way-to-create-multiline-comments-in-python-score-1449100-in-2019" class="level3">
<h3>80: Way to create multiline comments in Python? (score <a href="https://stackoverflow.com/q/7696924.html">1449100</a> in 2019)</h3>
<section id="question-78" class="level4">
<h4>Question</h4>
<p>I have recently started studying <a href="http://en.wikipedia.org/wiki/Python_%28programming_language%29" rel="noreferrer">Python</a>, but I couldn’t find how to implement multi-line comments. Most languages have block comment symbols like</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb675-1"><a href="#cb675-1"></a><span class="op">/*</span> </span>
<span id="cb675-2"><a href="#cb675-2"></a></span>
<span id="cb675-3"><a href="#cb675-3"></a><span class="op">*/</span></span></code></pre></div>
<p>I tried this in Python, but it throws an error, so this probably is not the correct way. Does Python actually have a multiline comment feature?</p>
</section>
<section id="answer-accepted-score-1672" class="level4">
<h4>Answer accepted (score 1672)</h4>
<p>You can use triple-quoted strings. When they’re not a docstring (first thing in a class/function/module), they are ignored.</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb676-1"><a href="#cb676-1"></a><span class="co">&#39;&#39;&#39;</span></span>
<span id="cb676-2"><a href="#cb676-2"></a><span class="co">This is a multiline</span></span>
<span id="cb676-3"><a href="#cb676-3"></a><span class="co">comment.</span></span>
<span id="cb676-4"><a href="#cb676-4"></a><span class="co">&#39;&#39;&#39;</span></span></code></pre></div>
<p>(Make sure to indent the leading <code>'''</code> appropriately to avoid an <code>IndentationError</code>.)</p>
<p>Guido van Rossum (creator of Python) <a href="https://twitter.com/gvanrossum/status/112670605505077248" rel="noreferrer">tweeted this</a> as a “pro tip”.</p>
<p>However, Python’s style guide, PEP8, <a href="http://www.python.org/dev/peps/pep-0008/#block-comments" rel="noreferrer">favors using consecutive single-line comments</a>, and this is also what you’ll find in many projects. Editors usually have a shortcut to do this easily.</p>
</section>
<section id="answer-2-score-77" class="level4">
<h4>Answer 2 (score 77)</h4>
<p>Python does have a <a href="https://stackoverflow.com/a/7696966/190597">multiline string/comment syntax</a> in the sense that unless used as docstrings, <a href="https://twitter.com/gvanrossum/status/112670605505077248" rel="noreferrer">multiline strings <em>generate no bytecode</em></a> – just like <code>#</code>-prepended comments. In effect, it acts exactly like a comment.</p>
<p>
On the other hand, if you say this behavior must be documented in the official docs to be a true comment syntax, then yes, you would be right to say it is not guaranteed as part of the language specification.
</p>
<p>
In any case your editor should also be able to easily comment-out a selected region (by placing a <code>#</code> in front of each line individually). If not, switch to an editor that does.
</p>
<p>
Programming in Python without certain text editing features can be a painful experience. Finding the right editor (and knowing how to use it) can make a big difference in how the Python programming experience is perceived.
</p>
<p>
Not only should the editor be able to comment-out selected regions, it should also be able to shift blocks of code to the left and right easily, and should automatically place the cursor at the current indentation level when you press Enter. Code folding can also be useful.
</p>
<hr>
<p>To protect against link decay, here is the content of <a href="https://twitter.com/gvanrossum/status/112670605505077248" rel="noreferrer">Guido van Rossum’s tweet</a>:</p>
<blockquote>
<a href="https://twitter.com/BSUCSClub" rel="noreferrer"><span class="citation" data-cites="BSUCSClub">@BSUCSClub</span></a> Python tip: You can use multi-line strings as multi-line comments. Unless used as docstrings, they generate no code! :-)
</blockquote>
</section>
<section id="answer-3-score-41-1" class="level4">
<h4>Answer 3 (score 41)</h4>
<p>From the accepted answer…</p>
<blockquote>
You can use triple-quoted strings. When they’re not a docstring (first thing in a class/function/module), they are ignored.
</blockquote>
<p>This is simply not true. Unlike comments, triple-quoted strings are still parsed and must be syntactically valid, regardless of where they appear in the source code.</p>
<p>If you try to run this code…</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb677-1"><a href="#cb677-1"></a><span class="kw">def</span> parse_token(token):</span>
<span id="cb677-2"><a href="#cb677-2"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb677-3"><a href="#cb677-3"></a><span class="co">    This function parses a token.</span></span>
<span id="cb677-4"><a href="#cb677-4"></a><span class="co">    </span><span class="al">TODO</span><span class="co">: write a decent docstring :-)</span></span>
<span id="cb677-5"><a href="#cb677-5"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb677-6"><a href="#cb677-6"></a></span>
<span id="cb677-7"><a href="#cb677-7"></a>    <span class="cf">if</span> token <span class="op">==</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">and&#39;</span>:</span>
<span id="cb677-8"><a href="#cb677-8"></a>        do_something()</span>
<span id="cb677-9"><a href="#cb677-9"></a></span>
<span id="cb677-10"><a href="#cb677-10"></a>    <span class="cf">elif</span> token <span class="op">==</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">or&#39;</span>:</span>
<span id="cb677-11"><a href="#cb677-11"></a>        do_something_else()</span>
<span id="cb677-12"><a href="#cb677-12"></a></span>
<span id="cb677-13"><a href="#cb677-13"></a>    <span class="cf">elif</span> token <span class="op">==</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">xor&#39;</span>:</span>
<span id="cb677-14"><a href="#cb677-14"></a>        <span class="co">&#39;&#39;&#39;</span></span>
<span id="cb677-15"><a href="#cb677-15"></a><span class="co">        Note that we still need to provide support for the deprecated</span></span>
<span id="cb677-16"><a href="#cb677-16"></a><span class="co">        token \xor. Hopefully we can drop support in libfoo 2.0.</span></span>
<span id="cb677-17"><a href="#cb677-17"></a><span class="co">        &#39;&#39;&#39;</span></span>
<span id="cb677-18"><a href="#cb677-18"></a>        do_a_different_thing()</span>
<span id="cb677-19"><a href="#cb677-19"></a></span>
<span id="cb677-20"><a href="#cb677-20"></a>    <span class="cf">else</span>:</span>
<span id="cb677-21"><a href="#cb677-21"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span></span></code></pre></div>
<p>You’ll get either…</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb678-1"><a href="#cb678-1"></a><span class="pp">ValueError</span>: invalid <span class="op">\</span>x escape</span></code></pre></div>
<p>…on Python 2.x or…</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb679-1"><a href="#cb679-1"></a><span class="pp">SyntaxError</span>: (<span class="bu">unicode</span> error) <span class="st">&#39;unicodeescape&#39;</span> codec can<span class="st">&#39;t decode bytes in position 79-80: truncated \xXX escape</span></span></code></pre></div>
<p>…on Python 3.x.</p>
<p>The only way to do multi-line comments which are ignored by the parser is…</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb680-1"><a href="#cb680-1"></a><span class="cf">elif</span> token <span class="op">==</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">xor&#39;</span>:</span>
<span id="cb680-2"><a href="#cb680-2"></a>    <span class="co"># Note that we still need to provide support for the deprecated</span></span>
<span id="cb680-3"><a href="#cb680-3"></a>    <span class="co"># token \xor. Hopefully we can drop support in libfoo 2.0.</span></span>
<span id="cb680-4"><a href="#cb680-4"></a>    do_a_different_thing()</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-clone-or-copy-a-list-score-1446611-in-2019" class="level3">
<h3>81: How to clone or copy a list? (score <a href="https://stackoverflow.com/q/2612802.html">1446611</a> in 2019)</h3>
<section id="question-79" class="level4">
<h4>Question</h4>
<p>What are the options to clone or copy a list in Python?</p>
<p>
While using <code>new_list = my_list</code>, any modifications to <code>new_list</code> changes <code>my_list</code> everytime. Why is this?
</p>
</section>
<section id="answer-accepted-score-2973" class="level4">
<h4>Answer accepted (score 2973)</h4>
<p>With <code>new_list = my_list</code>, you don’t actually have two lists. The assignment just copies the reference to the list, not the actual list, so both <code>new_list</code> and <code>my_list</code> refer to the same list after the assignment.</p>
<p>To actually copy the list, you have various possibilities:</p>
<ul>
<li>
<p>
You can use the builtin <a href="https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types" rel="noreferrer"><code>list.copy()</code></a> method (available since Python 3.3):
</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb681-1"><a href="#cb681-1"></a>new_list <span class="op">=</span> old_list.copy()</span>
<span id="cb681-2"><a href="#cb681-2"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb681-3"><a href="#cb681-3"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>You can <span class="bu">slice</span> it: <span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb681-4"><a href="#cb681-4"></a></span>
<span id="cb681-5"><a href="#cb681-5"></a>```python</span>
<span id="cb681-6"><a href="#cb681-6"></a>new_list <span class="op">=</span> old_list[:]</span></code></pre></div>
<a href="https://en.wikipedia.org/wiki/Alex_Martelli" rel="noreferrer" title="Alex Martelli">Alex Martelli’s</a> opinion (at least <a href="https://www.youtube.com/watch?v=g7V89K8QfgQ" rel="noreferrer" title="Bay Area Python Interest Group August 2007 Meeting">back in 2007</a>) about this is, that <em>it is a weird syntax and it does not make sense to use it ever</em>. ;) (In his opinion, the next one is more readable).
</li>
<li>
<p>
You can use the built in <a href="https://docs.python.org/2/library/functions.html#list" rel="noreferrer" title="list"><code>list()</code></a> function:
</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb682-1"><a href="#cb682-1"></a>new_list <span class="op">=</span> <span class="bu">list</span>(old_list)</span>
<span id="cb682-2"><a href="#cb682-2"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb682-3"><a href="#cb682-3"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>You can use generic <span class="op">&lt;</span>a href<span class="op">=</span><span class="st">&quot;https://docs.python.org/2/library/copy.html#copy.copy&quot;</span> rel<span class="op">=</span><span class="st">&quot;noreferrer&quot;</span> title<span class="op">=</span><span class="st">&quot;copy.copy&quot;</span><span class="op">&gt;</span>`copy.copy()`<span class="op">&lt;/</span>a<span class="op">&gt;</span>:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb682-4"><a href="#cb682-4"></a></span>
<span id="cb682-5"><a href="#cb682-5"></a>```python</span>
<span id="cb682-6"><a href="#cb682-6"></a><span class="im">import</span> copy</span>
<span id="cb682-7"><a href="#cb682-7"></a>new_list <span class="op">=</span> copy.copy(old_list)</span></code></pre></div>
This is a little slower than <code>list()</code> because it has to find out the datatype of <code>old_list</code> first.
</li>
<li>
<p>
If the list contains objects and you want to copy them as well, use generic <a href="https://docs.python.org/2/library/copy.html#copy.deepcopy" rel="noreferrer" title="copy.deepcopy"><code>copy.deepcopy()</code></a>:
</p>
<div class="sourceCode" id="cb683"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb683-1"><a href="#cb683-1"></a><span class="im">import</span> copy</span>
<span id="cb683-2"><a href="#cb683-2"></a>new_list <span class="op">=</span> copy.deepcopy(old_list)</span></code></pre></div>
Obviously the slowest and most memory-needing method, but sometimes unavoidable.
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb684"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb684-1"><a href="#cb684-1"></a><span class="im">import</span> copy</span>
<span id="cb684-2"><a href="#cb684-2"></a></span>
<span id="cb684-3"><a href="#cb684-3"></a><span class="kw">class</span> Foo(<span class="bu">object</span>):</span>
<span id="cb684-4"><a href="#cb684-4"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, val):</span>
<span id="cb684-5"><a href="#cb684-5"></a>         <span class="va">self</span>.val <span class="op">=</span> val</span>
<span id="cb684-6"><a href="#cb684-6"></a></span>
<span id="cb684-7"><a href="#cb684-7"></a>    <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):</span>
<span id="cb684-8"><a href="#cb684-8"></a>        <span class="cf">return</span> <span class="bu">str</span>(<span class="va">self</span>.val)</span>
<span id="cb684-9"><a href="#cb684-9"></a></span>
<span id="cb684-10"><a href="#cb684-10"></a>foo <span class="op">=</span> Foo(<span class="dv">1</span>)</span>
<span id="cb684-11"><a href="#cb684-11"></a></span>
<span id="cb684-12"><a href="#cb684-12"></a>a <span class="op">=</span> [<span class="st">&#39;foo&#39;</span>, foo]</span>
<span id="cb684-13"><a href="#cb684-13"></a>b <span class="op">=</span> a.copy()</span>
<span id="cb684-14"><a href="#cb684-14"></a>c <span class="op">=</span> a[:]</span>
<span id="cb684-15"><a href="#cb684-15"></a>d <span class="op">=</span> <span class="bu">list</span>(a)</span>
<span id="cb684-16"><a href="#cb684-16"></a>e <span class="op">=</span> copy.copy(a)</span>
<span id="cb684-17"><a href="#cb684-17"></a>f <span class="op">=</span> copy.deepcopy(a)</span>
<span id="cb684-18"><a href="#cb684-18"></a></span>
<span id="cb684-19"><a href="#cb684-19"></a><span class="co"># edit orignal list and instance </span></span>
<span id="cb684-20"><a href="#cb684-20"></a>a.append(<span class="st">&#39;baz&#39;</span>)</span>
<span id="cb684-21"><a href="#cb684-21"></a>foo.val <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb684-22"><a href="#cb684-22"></a></span>
<span id="cb684-23"><a href="#cb684-23"></a><span class="bu">print</span>(<span class="st">&#39;original: </span><span class="sc">%r</span><span class="ch">\n</span><span class="st"> list.copy(): </span><span class="sc">%r</span><span class="ch">\n</span><span class="st"> slice: </span><span class="sc">%r</span><span class="ch">\n</span><span class="st"> list(): </span><span class="sc">%r</span><span class="ch">\n</span><span class="st"> copy: </span><span class="sc">%r</span><span class="ch">\n</span><span class="st"> deepcopy: </span><span class="sc">%r</span><span class="st">&#39;</span></span>
<span id="cb684-24"><a href="#cb684-24"></a>      <span class="op">%</span> (a, b, c, d, e, f))</span></code></pre></div>
<p>Result:</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb685-1"><a href="#cb685-1"></a>original: [<span class="st">&#39;foo&#39;</span>, <span class="dv">5</span>, <span class="st">&#39;baz&#39;</span>]</span>
<span id="cb685-2"><a href="#cb685-2"></a><span class="bu">list</span>.copy(): [<span class="st">&#39;foo&#39;</span>, <span class="dv">5</span>]</span>
<span id="cb685-3"><a href="#cb685-3"></a><span class="bu">slice</span>: [<span class="st">&#39;foo&#39;</span>, <span class="dv">5</span>]</span>
<span id="cb685-4"><a href="#cb685-4"></a><span class="bu">list</span>(): [<span class="st">&#39;foo&#39;</span>, <span class="dv">5</span>]</span>
<span id="cb685-5"><a href="#cb685-5"></a>copy: [<span class="st">&#39;foo&#39;</span>, <span class="dv">5</span>]</span>
<span id="cb685-6"><a href="#cb685-6"></a>deepcopy: [<span class="st">&#39;foo&#39;</span>, <span class="dv">1</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-551" class="level4">
<h4>Answer 2 (score 551)</h4>
<p>Felix already provided an excellent answer, but I thought I’d do a speed comparison of the various methods:</p>
<ol>
<li>
10.59 sec (105.9us/itn) - <a href="http://docs.python.org/library/copy.html#copy.deepcopy" rel="noreferrer"><code>copy.deepcopy(old_list)</code></a>
</li>
<li>
10.16 sec (101.6us/itn) - pure python <code>Copy()</code> method copying classes with deepcopy
</li>
<li>
1.488 sec (14.88us/itn) - pure python <code>Copy()</code> method not copying classes (only dicts/lists/tuples)
</li>
<li>
0.325 sec (3.25us/itn) - <code>for item in old_list: new_list.append(item)</code>
</li>
<li>
0.217 sec (2.17us/itn) - <code>[i for i in old_list]</code> (a <a href="http://docs.python.org/tutorial/datastructures.html#list-comprehensions" rel="noreferrer">list comprehension</a>)
</li>
<li>
0.186 sec (1.86us/itn) - <a href="http://docs.python.org/library/copy.html#copy.copy" rel="noreferrer"><code>copy.copy(old_list)</code></a>
</li>
<li>
0.075 sec (0.75us/itn) - <code>list(old_list)</code>
</li>
<li>
0.053 sec (0.53us/itn) - <code>new_list = []; new_list.extend(old_list)</code>
</li>
<li>
0.039 sec (0.39us/itn) - <code>old_list[:]</code> (<a href="http://docs.python.org/tutorial/introduction.html#lists" rel="noreferrer">list slicing</a>)
</li>
</ol>
<p>So the fastest is list slicing. But be aware that <code>copy.copy()</code>, <code>list[:]</code> and <code>list(list)</code>, unlike <code>copy.deepcopy()</code> and the python version don’t copy any lists, dictionaries and class instances in the list, so if the originals change, they will change in the copied list too and vice versa.</p>
<p>(Here’s the script if anyone’s interested or wants to raise any issues:)</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb686-1"><a href="#cb686-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb686-2"><a href="#cb686-2"></a></span>
<span id="cb686-3"><a href="#cb686-3"></a><span class="kw">class</span> old_class:</span>
<span id="cb686-4"><a href="#cb686-4"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb686-5"><a href="#cb686-5"></a>        <span class="va">self</span>.blah <span class="op">=</span> <span class="st">&#39;blah&#39;</span></span>
<span id="cb686-6"><a href="#cb686-6"></a></span>
<span id="cb686-7"><a href="#cb686-7"></a><span class="kw">class</span> new_class(<span class="bu">object</span>):</span>
<span id="cb686-8"><a href="#cb686-8"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb686-9"><a href="#cb686-9"></a>        <span class="va">self</span>.blah <span class="op">=</span> <span class="st">&#39;blah&#39;</span></span>
<span id="cb686-10"><a href="#cb686-10"></a></span>
<span id="cb686-11"><a href="#cb686-11"></a>dignore <span class="op">=</span> {<span class="bu">str</span>: <span class="va">None</span>, <span class="bu">unicode</span>: <span class="va">None</span>, <span class="bu">int</span>: <span class="va">None</span>, <span class="bu">type</span>(<span class="va">None</span>): <span class="va">None</span>}</span>
<span id="cb686-12"><a href="#cb686-12"></a></span>
<span id="cb686-13"><a href="#cb686-13"></a><span class="kw">def</span> Copy(obj, use_deepcopy<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb686-14"><a href="#cb686-14"></a>    t <span class="op">=</span> <span class="bu">type</span>(obj)</span>
<span id="cb686-15"><a href="#cb686-15"></a></span>
<span id="cb686-16"><a href="#cb686-16"></a>    <span class="cf">if</span> t <span class="kw">in</span> (<span class="bu">list</span>, <span class="bu">tuple</span>):</span>
<span id="cb686-17"><a href="#cb686-17"></a>        <span class="cf">if</span> t <span class="op">==</span> <span class="bu">tuple</span>:</span>
<span id="cb686-18"><a href="#cb686-18"></a>            <span class="co"># Convert to a list if a tuple to </span></span>
<span id="cb686-19"><a href="#cb686-19"></a>            <span class="co"># allow assigning to when copying</span></span>
<span id="cb686-20"><a href="#cb686-20"></a>            is_tuple <span class="op">=</span> <span class="va">True</span></span>
<span id="cb686-21"><a href="#cb686-21"></a>            obj <span class="op">=</span> <span class="bu">list</span>(obj)</span>
<span id="cb686-22"><a href="#cb686-22"></a>        <span class="cf">else</span>: </span>
<span id="cb686-23"><a href="#cb686-23"></a>            <span class="co"># Otherwise just do a quick slice copy</span></span>
<span id="cb686-24"><a href="#cb686-24"></a>            obj <span class="op">=</span> obj[:]</span>
<span id="cb686-25"><a href="#cb686-25"></a>            is_tuple <span class="op">=</span> <span class="va">False</span></span>
<span id="cb686-26"><a href="#cb686-26"></a></span>
<span id="cb686-27"><a href="#cb686-27"></a>        <span class="co"># Copy each item recursively</span></span>
<span id="cb686-28"><a href="#cb686-28"></a>        <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">xrange</span>(<span class="bu">len</span>(obj)):</span>
<span id="cb686-29"><a href="#cb686-29"></a>            <span class="cf">if</span> <span class="bu">type</span>(obj[x]) <span class="kw">in</span> dignore:</span>
<span id="cb686-30"><a href="#cb686-30"></a>                <span class="cf">continue</span></span>
<span id="cb686-31"><a href="#cb686-31"></a>            obj[x] <span class="op">=</span> Copy(obj[x], use_deepcopy)</span>
<span id="cb686-32"><a href="#cb686-32"></a></span>
<span id="cb686-33"><a href="#cb686-33"></a>        <span class="cf">if</span> is_tuple: </span>
<span id="cb686-34"><a href="#cb686-34"></a>            <span class="co"># Convert back into a tuple again</span></span>
<span id="cb686-35"><a href="#cb686-35"></a>            obj <span class="op">=</span> <span class="bu">tuple</span>(obj)</span>
<span id="cb686-36"><a href="#cb686-36"></a></span>
<span id="cb686-37"><a href="#cb686-37"></a>    <span class="cf">elif</span> t <span class="op">==</span> <span class="bu">dict</span>: </span>
<span id="cb686-38"><a href="#cb686-38"></a>        <span class="co"># Use the fast shallow dict copy() method and copy any </span></span>
<span id="cb686-39"><a href="#cb686-39"></a>        <span class="co"># values which aren&#39;t immutable (like lists, dicts etc)</span></span>
<span id="cb686-40"><a href="#cb686-40"></a>        obj <span class="op">=</span> obj.copy()</span>
<span id="cb686-41"><a href="#cb686-41"></a>        <span class="cf">for</span> k <span class="kw">in</span> obj:</span>
<span id="cb686-42"><a href="#cb686-42"></a>            <span class="cf">if</span> <span class="bu">type</span>(obj[k]) <span class="kw">in</span> dignore:</span>
<span id="cb686-43"><a href="#cb686-43"></a>                <span class="cf">continue</span></span>
<span id="cb686-44"><a href="#cb686-44"></a>            obj[k] <span class="op">=</span> Copy(obj[k], use_deepcopy)</span>
<span id="cb686-45"><a href="#cb686-45"></a></span>
<span id="cb686-46"><a href="#cb686-46"></a>    <span class="cf">elif</span> t <span class="kw">in</span> dignore: </span>
<span id="cb686-47"><a href="#cb686-47"></a>        <span class="co"># Numeric or string/unicode? </span></span>
<span id="cb686-48"><a href="#cb686-48"></a>        <span class="co"># It&#39;s immutable, so ignore it!</span></span>
<span id="cb686-49"><a href="#cb686-49"></a>        <span class="cf">pass</span> </span>
<span id="cb686-50"><a href="#cb686-50"></a></span>
<span id="cb686-51"><a href="#cb686-51"></a>    <span class="cf">elif</span> use_deepcopy: </span>
<span id="cb686-52"><a href="#cb686-52"></a>        obj <span class="op">=</span> deepcopy(obj)</span>
<span id="cb686-53"><a href="#cb686-53"></a>    <span class="cf">return</span> obj</span>
<span id="cb686-54"><a href="#cb686-54"></a></span>
<span id="cb686-55"><a href="#cb686-55"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb686-56"><a href="#cb686-56"></a>    <span class="im">import</span> copy</span>
<span id="cb686-57"><a href="#cb686-57"></a>    <span class="im">from</span> time <span class="im">import</span> time</span>
<span id="cb686-58"><a href="#cb686-58"></a></span>
<span id="cb686-59"><a href="#cb686-59"></a>    num_times <span class="op">=</span> <span class="dv">100000</span></span>
<span id="cb686-60"><a href="#cb686-60"></a>    L <span class="op">=</span> [<span class="va">None</span>, <span class="st">&#39;blah&#39;</span>, <span class="dv">1</span>, <span class="fl">543.4532</span>, </span>
<span id="cb686-61"><a href="#cb686-61"></a>         [<span class="st">&#39;foo&#39;</span>], (<span class="st">&#39;bar&#39;</span>,), {<span class="st">&#39;blah&#39;</span>: <span class="st">&#39;blah&#39;</span>},</span>
<span id="cb686-62"><a href="#cb686-62"></a>         old_class(), new_class()]</span>
<span id="cb686-63"><a href="#cb686-63"></a></span>
<span id="cb686-64"><a href="#cb686-64"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-65"><a href="#cb686-65"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-66"><a href="#cb686-66"></a>        Copy(L)</span>
<span id="cb686-67"><a href="#cb686-67"></a>    <span class="bu">print</span> <span class="st">&#39;Custom Copy:&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-68"><a href="#cb686-68"></a></span>
<span id="cb686-69"><a href="#cb686-69"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-70"><a href="#cb686-70"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-71"><a href="#cb686-71"></a>        Copy(L, use_deepcopy<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb686-72"><a href="#cb686-72"></a>    <span class="bu">print</span> <span class="st">&#39;Custom Copy Only Copying Lists/Tuples/Dicts (no classes):&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-73"><a href="#cb686-73"></a></span>
<span id="cb686-74"><a href="#cb686-74"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-75"><a href="#cb686-75"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-76"><a href="#cb686-76"></a>        copy.copy(L)</span>
<span id="cb686-77"><a href="#cb686-77"></a>    <span class="bu">print</span> <span class="st">&#39;copy.copy:&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-78"><a href="#cb686-78"></a></span>
<span id="cb686-79"><a href="#cb686-79"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-80"><a href="#cb686-80"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-81"><a href="#cb686-81"></a>        copy.deepcopy(L)</span>
<span id="cb686-82"><a href="#cb686-82"></a>    <span class="bu">print</span> <span class="st">&#39;copy.deepcopy:&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-83"><a href="#cb686-83"></a></span>
<span id="cb686-84"><a href="#cb686-84"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-85"><a href="#cb686-85"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-86"><a href="#cb686-86"></a>        L[:]</span>
<span id="cb686-87"><a href="#cb686-87"></a>    <span class="bu">print</span> <span class="st">&#39;list slicing [:]:&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-88"><a href="#cb686-88"></a></span>
<span id="cb686-89"><a href="#cb686-89"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-90"><a href="#cb686-90"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-91"><a href="#cb686-91"></a>        <span class="bu">list</span>(L)</span>
<span id="cb686-92"><a href="#cb686-92"></a>    <span class="bu">print</span> <span class="st">&#39;list(L):&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-93"><a href="#cb686-93"></a></span>
<span id="cb686-94"><a href="#cb686-94"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-95"><a href="#cb686-95"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-96"><a href="#cb686-96"></a>        [i <span class="cf">for</span> i <span class="kw">in</span> L]</span>
<span id="cb686-97"><a href="#cb686-97"></a>    <span class="bu">print</span> <span class="st">&#39;list expression(L):&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-98"><a href="#cb686-98"></a></span>
<span id="cb686-99"><a href="#cb686-99"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-100"><a href="#cb686-100"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-101"><a href="#cb686-101"></a>        a <span class="op">=</span> []</span>
<span id="cb686-102"><a href="#cb686-102"></a>        a.extend(L)</span>
<span id="cb686-103"><a href="#cb686-103"></a>    <span class="bu">print</span> <span class="st">&#39;list extend:&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-104"><a href="#cb686-104"></a></span>
<span id="cb686-105"><a href="#cb686-105"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-106"><a href="#cb686-106"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-107"><a href="#cb686-107"></a>        a <span class="op">=</span> []</span>
<span id="cb686-108"><a href="#cb686-108"></a>        <span class="cf">for</span> y <span class="kw">in</span> L:</span>
<span id="cb686-109"><a href="#cb686-109"></a>            a.append(y)</span>
<span id="cb686-110"><a href="#cb686-110"></a>    <span class="bu">print</span> <span class="st">&#39;list append:&#39;</span>, time()<span class="op">-</span>t</span>
<span id="cb686-111"><a href="#cb686-111"></a></span>
<span id="cb686-112"><a href="#cb686-112"></a>    t <span class="op">=</span> time()</span>
<span id="cb686-113"><a href="#cb686-113"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">xrange</span>(num_times):</span>
<span id="cb686-114"><a href="#cb686-114"></a>        a <span class="op">=</span> []</span>
<span id="cb686-115"><a href="#cb686-115"></a>        a.extend(i <span class="cf">for</span> i <span class="kw">in</span> L)</span>
<span id="cb686-116"><a href="#cb686-116"></a>    <span class="bu">print</span> <span class="st">&#39;generator expression extend:&#39;</span>, time()<span class="op">-</span>t</span></code></pre></div>
</section>
<section id="answer-3-score-138-1" class="level4">
<h4>Answer 3 (score 138)</h4>
<p>I’ve <a href="http://mail.python.org/pipermail/python-ideas/2013-July/022368.html" rel="noreferrer">been told</a> that Python 3.3+ <a href="http://bugs.python.org/issue10516" rel="noreferrer">adds <code>list.copy()</code></a> method, which should be as fast as slicing:</p>
<p><code>newlist = old_list.copy()</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="python-add-new-item-to-dictionary-score-1441083-in-2016" class="level3">
<h3>82: Python add new item to dictionary (score <a href="https://stackoverflow.com/q/6416131.html">1441083</a> in 2016)</h3>
<section id="question-80" class="level4">
<h4>Question</h4>
<p>I want to add an item to an existing dictionary in python. For example, this is my dictionary:</p>
<div class="sourceCode" id="cb687"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb687-1"><a href="#cb687-1"></a>default_data <span class="op">=</span> {</span>
<span id="cb687-2"><a href="#cb687-2"></a>            <span class="st">&#39;item1&#39;</span>: <span class="dv">1</span>,</span>
<span id="cb687-3"><a href="#cb687-3"></a>            <span class="st">&#39;item2&#39;</span>: <span class="dv">2</span>,</span>
<span id="cb687-4"><a href="#cb687-4"></a>}</span></code></pre></div>
<p>I want to add new item such that:</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb688-1"><a href="#cb688-1"></a>default_data <span class="op">=</span> default_data <span class="op">+</span> {<span class="st">&#39;item3&#39;</span>:<span class="dv">3</span>}</span></code></pre></div>
<p>How to achieve this?</p>
</section>
<section id="answer-accepted-score-1130" class="level4">
<h4>Answer accepted (score 1130)</h4>
<div class="sourceCode" id="cb689"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb689-1"><a href="#cb689-1"></a>default_data[<span class="st">&#39;item3&#39;</span>] <span class="op">=</span> <span class="dv">3</span></span></code></pre></div>
<p>Easy as py.</p>
<p>Another possible solution:</p>
<div class="sourceCode" id="cb690"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb690-1"><a href="#cb690-1"></a>default_data.update({<span class="st">&#39;item3&#39;</span>: <span class="dv">3</span>})</span></code></pre></div>
<p>which is nice if you want to insert multiple items at once.</p>
</section>
<section id="answer-2-score-68" class="level4">
<h4>Answer 2 (score 68)</h4>
<p>It can be as simple as:</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb691-1"><a href="#cb691-1"></a>default_data[<span class="st">&#39;item3&#39;</span>] <span class="op">=</span> <span class="dv">3</span></span></code></pre></div>
<p>As <a href="https://stackoverflow.com/questions/6416131/python-add-new-item-to-dictionary/6416142#6416142">Chris’ answer</a> says, you can use <a href="http://docs.python.org/library/stdtypes.html#dict.update" rel="noreferrer">update</a> to add more than one item. An example:</p>
<div class="sourceCode" id="cb692"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb692-1"><a href="#cb692-1"></a>default_data.update({<span class="st">&#39;item4&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;item5&#39;</span>: <span class="dv">5</span>})</span></code></pre></div>
<p>Please see the docs about <a href="http://docs.python.org/tutorial/datastructures.html#dictionaries" rel="noreferrer">dictionaries as data structures</a> and <a href="http://docs.python.org/library/stdtypes.html#mapping-types-dict" rel="noreferrer">dictionaries as built-in types</a>.</p>
</section>
<section id="answer-3-score-23-1" class="level4">
<h4>Answer 3 (score 23)</h4>
<p>It occurred to me that you may have actually be asking how to implement the <code>+</code> operator for dictionaries, the following seems to work:</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb693-1"><a href="#cb693-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Dict(<span class="bu">dict</span>):</span>
<span id="cb693-2"><a href="#cb693-2"></a>...     <span class="kw">def</span> <span class="fu">__add__</span>(<span class="va">self</span>, other):</span>
<span id="cb693-3"><a href="#cb693-3"></a>...         copy <span class="op">=</span> <span class="va">self</span>.copy()</span>
<span id="cb693-4"><a href="#cb693-4"></a>...         copy.update(other)</span>
<span id="cb693-5"><a href="#cb693-5"></a>...         <span class="cf">return</span> copy</span>
<span id="cb693-6"><a href="#cb693-6"></a>...     <span class="kw">def</span> <span class="fu">__radd__</span>(<span class="va">self</span>, other):</span>
<span id="cb693-7"><a href="#cb693-7"></a>...         copy <span class="op">=</span> other.copy()</span>
<span id="cb693-8"><a href="#cb693-8"></a>...         copy.update(<span class="va">self</span>)</span>
<span id="cb693-9"><a href="#cb693-9"></a>...         <span class="cf">return</span> copy</span>
<span id="cb693-10"><a href="#cb693-10"></a>... </span>
<span id="cb693-11"><a href="#cb693-11"></a><span class="op">&gt;&gt;&gt;</span> default_data <span class="op">=</span> Dict({<span class="st">&#39;item1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;item2&#39;</span>: <span class="dv">2</span>})</span>
<span id="cb693-12"><a href="#cb693-12"></a><span class="op">&gt;&gt;&gt;</span> default_data <span class="op">+</span> {<span class="st">&#39;item3&#39;</span>: <span class="dv">3</span>}</span>
<span id="cb693-13"><a href="#cb693-13"></a>{<span class="st">&#39;item2&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;item3&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;item1&#39;</span>: <span class="dv">1</span>}</span>
<span id="cb693-14"><a href="#cb693-14"></a><span class="op">&gt;&gt;&gt;</span> {<span class="st">&#39;test1&#39;</span>: <span class="dv">1</span>} <span class="op">+</span> Dict(test2<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb693-15"><a href="#cb693-15"></a>{<span class="st">&#39;test1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;test2&#39;</span>: <span class="dv">2</span>}</span></code></pre></div>
<p>Note that this is more overhead then using <code>dict[key] = value</code> or <code>dict.update()</code>, so I would recommend against using this solution unless you intend to create a new dictionary anyway.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="delete-column-from-pandas-dataframe-score-1437865-in-2019" class="level3">
<h3>83: Delete column from pandas DataFrame (score <a href="https://stackoverflow.com/q/13411544.html">1437865</a> in 2019)</h3>
<section id="question-81" class="level4">
<h4>Question</h4>
<p>When deleting a column in a DataFrame I use:</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb694-1"><a href="#cb694-1"></a><span class="kw">del</span> df[<span class="st">&#39;column_name&#39;</span>]</span></code></pre></div>
<p>And this works great. Why can’t I use the following?</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb695-1"><a href="#cb695-1"></a><span class="kw">del</span> df.column_name</span></code></pre></div>
<p><em>As you can access the column/Series as <code>df.column_name</code>, I expect this to work.</em></p>
</section>
<section id="answer-accepted-score-670" class="level4">
<h4>Answer accepted (score 670)</h4>
<p>As you’ve guessed, the right syntax is</p>
<div class="sourceCode" id="cb696"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb696-1"><a href="#cb696-1"></a><span class="kw">del</span> df[<span class="st">&#39;column_name&#39;</span>]</span></code></pre></div>
<p>It’s difficult to make <code>del df.column_name</code> work simply as the result of syntactic limitations in Python. <code>del df[name]</code> gets translated to <code>df.__delitem__(name)</code> under the covers by Python.</p>
</section>
<section id="answer-2-score-1873" class="level4">
<h4>Answer 2 (score 1873)</h4>
<p>The best way to do this in pandas is to use <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html" rel="noreferrer"><code>drop</code></a>:</p>
<div class="sourceCode" id="cb697"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb697-1"><a href="#cb697-1"></a>df <span class="op">=</span> df.drop(<span class="st">&#39;column_name&#39;</span>, <span class="dv">1</span>)</span></code></pre></div>
<p>where <code>1</code> is the <em>axis</em> number (<code>0</code> for rows and <code>1</code> for columns.)</p>
<p>To delete the column without having to reassign <code>df</code> you can do:</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb698-1"><a href="#cb698-1"></a>df.drop(<span class="st">&#39;column_name&#39;</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>Finally, to drop by column <em>number</em> instead of by column <em>label</em>, try this to delete, e.g. the 1st, 2nd and 4th columns:</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb699-1"><a href="#cb699-1"></a>df <span class="op">=</span> df.drop(df.columns[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">3</span>]], axis<span class="op">=</span><span class="dv">1</span>)  <span class="co"># df.columns is zero-based pd.Index </span></span></code></pre></div>
</section>
<section id="answer-3-score-216" class="level4">
<h4>Answer 3 (score 216)</h4>
<p>Use:</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb700-1"><a href="#cb700-1"></a>columns <span class="op">=</span> [<span class="st">&#39;Col1&#39;</span>, <span class="st">&#39;Col2&#39;</span>, ...]</span>
<span id="cb700-2"><a href="#cb700-2"></a>df.drop(columns, inplace<span class="op">=</span><span class="va">True</span>, axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<p>This will delete one or more columns in-place. Note that <code>inplace=True</code> was added in pandas v0.13 and won’t work on older versions. You’d have to assign the result back in that case:</p>
<div class="sourceCode" id="cb701"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb701-1"><a href="#cb701-1"></a>df <span class="op">=</span> df.drop(columns, axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-the-string-is-empty-score-1432962-in-2019" class="level3">
<h3>84: How to check if the string is empty? (score <a href="https://stackoverflow.com/q/9573244.html">1432962</a> in 2019)</h3>
<section id="question-82" class="level4">
<h4>Question</h4>
<p>Does Python have something like an empty string variable where you can do:</p>
<div class="sourceCode" id="cb702"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb702-1"><a href="#cb702-1"></a><span class="cf">if</span> myString <span class="op">==</span> string.empty:</span></code></pre></div>
<p>Regardless, what’s the most elegant way to check for empty string values? I find hard coding <code>""</code> every time for checking an empty string not as good.</p>
</section>
<section id="answer-accepted-score-1844" class="level4">
<h4>Answer accepted (score 1844)</h4>
<p>Empty strings are <a href="http://docs.python.org/2/library/stdtypes.html#truth-value-testing" rel="noreferrer">“falsy”</a> which means they are considered false in a Boolean context, so you can just do this:</p>
<div class="sourceCode" id="cb703"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb703-1"><a href="#cb703-1"></a><span class="cf">if</span> <span class="kw">not</span> myString:</span></code></pre></div>
<p>This is the preferred way if you know that your variable is a string. If your variable could also be some other type then you should use <code>myString == ""</code>. See the documentation on <a href="http://docs.python.org/library/stdtypes.html#truth-value-testing" rel="noreferrer">Truth Value Testing</a> for other values that are false in Boolean contexts.</p>
</section>
<section id="answer-2-score-374" class="level4">
<h4>Answer 2 (score 374)</h4>
<p>From <a href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a>, in the <a href="https://www.python.org/dev/peps/pep-0008/#programming-recommendations">“Programming Recommendations” section</a>:</p>
<blockquote>
For sequences, (strings, lists, tuples), use the fact that empty sequences are false.
</blockquote>
<p>So you should use:</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb704-1"><a href="#cb704-1"></a><span class="cf">if</span> <span class="kw">not</span> some_string:</span></code></pre></div>
<p>or:</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb705-1"><a href="#cb705-1"></a><span class="cf">if</span> some_string:</span></code></pre></div>
<p>Just to clarify, sequences are <strong>evaluated</strong> to <code>False</code> or <code>True</code> in a Boolean context if they are empty or not. They are <strong>not equal</strong> to <code>False</code> or <code>True</code>.</p>
</section>
<section id="answer-3-score-211" class="level4">
<h4>Answer 3 (score 211)</h4>
<p>The most elegant way would probably be to simply check if its true or falsy, e.g.:</p>
<div class="sourceCode" id="cb706"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb706-1"><a href="#cb706-1"></a><span class="cf">if</span> <span class="kw">not</span> my_string:</span></code></pre></div>
<p>However, you may want to strip white space because:</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb707-1"><a href="#cb707-1"></a> <span class="op">&gt;&gt;&gt;</span> <span class="bu">bool</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb707-2"><a href="#cb707-2"></a> <span class="va">False</span></span>
<span id="cb707-3"><a href="#cb707-3"></a> <span class="op">&gt;&gt;&gt;</span> <span class="bu">bool</span>(<span class="st">&quot;   &quot;</span>)</span>
<span id="cb707-4"><a href="#cb707-4"></a> <span class="va">True</span></span>
<span id="cb707-5"><a href="#cb707-5"></a> <span class="op">&gt;&gt;&gt;</span> <span class="bu">bool</span>(<span class="st">&quot;   &quot;</span>.strip())</span>
<span id="cb707-6"><a href="#cb707-6"></a> <span class="va">False</span></span></code></pre></div>
<p>You should probably be a bit more explicit in this however, unless you know for sure that this string has passed some kind of validation and is a string that can be tested this way.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="difference-between-del-remove-and-pop-on-lists-score-1429816-in-2012" class="level3">
<h3>85: Difference between del, remove and pop on lists (score <a href="https://stackoverflow.com/q/11520492.html">1429816</a> in 2012)</h3>
<section id="question-83" class="level4">
<h4>Question</h4>
<div class="sourceCode" id="cb708"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb708-1"><a href="#cb708-1"></a><span class="op">&gt;&gt;&gt;</span> a<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb708-2"><a href="#cb708-2"></a><span class="op">&gt;&gt;&gt;</span> a.remove(<span class="dv">2</span>)</span>
<span id="cb708-3"><a href="#cb708-3"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb708-4"><a href="#cb708-4"></a>[<span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb708-5"><a href="#cb708-5"></a><span class="op">&gt;&gt;&gt;</span> a<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb708-6"><a href="#cb708-6"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> a[<span class="dv">1</span>]</span>
<span id="cb708-7"><a href="#cb708-7"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb708-8"><a href="#cb708-8"></a>[<span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb708-9"><a href="#cb708-9"></a><span class="op">&gt;&gt;&gt;</span> a<span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb708-10"><a href="#cb708-10"></a><span class="op">&gt;&gt;&gt;</span> a.pop(<span class="dv">1</span>)</span>
<span id="cb708-11"><a href="#cb708-11"></a><span class="dv">2</span></span>
<span id="cb708-12"><a href="#cb708-12"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb708-13"><a href="#cb708-13"></a>[<span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb708-14"><a href="#cb708-14"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre></div>
<p>Is there any difference between the above three methods to remove an element from a list?</p>
</section>
<section id="answer-accepted-score-1119" class="level4">
<h4>Answer accepted (score 1119)</h4>
<p>Yes, <code>remove</code> removes the <em>first</em> matching <em>value</em>, not a specific index:</p>
<div class="sourceCode" id="cb709"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb709-1"><a href="#cb709-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>]</span>
<span id="cb709-2"><a href="#cb709-2"></a><span class="op">&gt;&gt;&gt;</span> a.remove(<span class="dv">2</span>)</span>
<span id="cb709-3"><a href="#cb709-3"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb709-4"><a href="#cb709-4"></a>[<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">2</span>]</span></code></pre></div>
<p><code>del</code> removes the item at a specific index:</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb710-1"><a href="#cb710-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb710-2"><a href="#cb710-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> a[<span class="dv">1</span>]</span>
<span id="cb710-3"><a href="#cb710-3"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb710-4"><a href="#cb710-4"></a>[<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span></code></pre></div>
<p>and <code>pop</code> removes the item at a specific index and returns it.</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb711-1"><a href="#cb711-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb711-2"><a href="#cb711-2"></a><span class="op">&gt;&gt;&gt;</span> a.pop(<span class="dv">1</span>)</span>
<span id="cb711-3"><a href="#cb711-3"></a><span class="dv">3</span></span>
<span id="cb711-4"><a href="#cb711-4"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb711-5"><a href="#cb711-5"></a>[<span class="dv">4</span>, <span class="dv">5</span>]</span></code></pre></div>
<p>Their error modes are different too:</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb712-1"><a href="#cb712-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span>
<span id="cb712-2"><a href="#cb712-2"></a><span class="op">&gt;&gt;&gt;</span> a.remove(<span class="dv">7</span>)</span>
<span id="cb712-3"><a href="#cb712-3"></a>Traceback (most recent call last):</span>
<span id="cb712-4"><a href="#cb712-4"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb712-5"><a href="#cb712-5"></a><span class="pp">ValueError</span>: <span class="bu">list</span>.remove(x): x <span class="kw">not</span> <span class="kw">in</span> <span class="bu">list</span></span>
<span id="cb712-6"><a href="#cb712-6"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> a[<span class="dv">7</span>]</span>
<span id="cb712-7"><a href="#cb712-7"></a>Traceback (most recent call last):</span>
<span id="cb712-8"><a href="#cb712-8"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb712-9"><a href="#cb712-9"></a><span class="pp">IndexError</span>: <span class="bu">list</span> assignment index out of <span class="bu">range</span></span>
<span id="cb712-10"><a href="#cb712-10"></a><span class="op">&gt;&gt;&gt;</span> a.pop(<span class="dv">7</span>)</span>
<span id="cb712-11"><a href="#cb712-11"></a>Traceback (most recent call last):</span>
<span id="cb712-12"><a href="#cb712-12"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb712-13"><a href="#cb712-13"></a><span class="pp">IndexError</span>: pop index out of <span class="bu">range</span></span></code></pre></div>
</section>
<section id="answer-2-score-145" class="level4">
<h4>Answer 2 (score 145)</h4>
<p>Use <code>del</code> to remove an element by index, <code>pop()</code> to remove it by index if you need the returned value, and <code>remove()</code> to delete an element by value. The latter requires searching the list, and raises <code>ValueError</code> if no such value occurs in the list.</p>
<p>When deleting index <code>i</code> from a list of <code>n</code> elements, the computational complexities of these methods are</p>
<div class="sourceCode" id="cb713"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb713-1"><a href="#cb713-1"></a><span class="kw">del</span>     O(n <span class="op">-</span> i)</span>
<span id="cb713-2"><a href="#cb713-2"></a>pop     O(n <span class="op">-</span> i)</span>
<span id="cb713-3"><a href="#cb713-3"></a>remove  O(n)</span></code></pre></div>
</section>
<section id="answer-3-score-78" class="level4">
<h4>Answer 3 (score 78)</h4>
<p>Since no-one else has mentioned it, note that <code>del</code> (unlike <code>pop</code>) allows the removal of a range of indexes because of list slicing:</p>
<div class="sourceCode" id="cb714"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb714-1"><a href="#cb714-1"></a><span class="op">&gt;&gt;&gt;</span> lst <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb714-2"><a href="#cb714-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> lst[<span class="dv">1</span>:]</span>
<span id="cb714-3"><a href="#cb714-3"></a><span class="op">&gt;&gt;&gt;</span> lst</span>
<span id="cb714-4"><a href="#cb714-4"></a>[<span class="dv">3</span>]</span></code></pre></div>
<p>This also allows avoidance of an <code>IndexError</code> if the index is not in the list:</p>
<div class="sourceCode" id="cb715"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb715-1"><a href="#cb715-1"></a><span class="op">&gt;&gt;&gt;</span> lst <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb715-2"><a href="#cb715-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> lst[<span class="dv">10</span>:]</span>
<span id="cb715-3"><a href="#cb715-3"></a><span class="op">&gt;&gt;&gt;</span> lst</span>
<span id="cb715-4"><a href="#cb715-4"></a>[<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="delete-an-element-from-a-dictionary-score-1418712-in-2019" class="level3">
<h3>86: Delete an element from a dictionary (score <a href="https://stackoverflow.com/q/5844672.html">1418712</a> in 2019)</h3>
<section id="question-84" class="level4">
<h4>Question</h4>
<p>Is there a way to delete an item from a dictionary in Python?</p>
<p>Additionally, how can I delete an item from a dictionary to return a copy (i.e., not modifying the original)?</p>
</section>
<section id="answer-accepted-score-1551" class="level4">
<h4>Answer accepted (score 1551)</h4>
<p>The <a href="http://docs.python.org/reference/simple_stmts.html#the-del-statement" rel="noreferrer"><code>del</code> statement</a> removes an element:</p>
<div class="sourceCode" id="cb716"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb716-1"><a href="#cb716-1"></a><span class="kw">del</span> d[key]</span></code></pre></div>
<p>However, this mutates the existing dictionary so the contents of the dictionary changes for anybody else who has a reference to the same instance. To return a <em>new</em> dictionary, make a copy of the dictionary:</p>
<div class="sourceCode" id="cb717"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb717-1"><a href="#cb717-1"></a><span class="kw">def</span> removekey(d, key):</span>
<span id="cb717-2"><a href="#cb717-2"></a>    r <span class="op">=</span> <span class="bu">dict</span>(d)</span>
<span id="cb717-3"><a href="#cb717-3"></a>    <span class="kw">del</span> r[key]</span>
<span id="cb717-4"><a href="#cb717-4"></a>    <span class="cf">return</span> r</span></code></pre></div>
<p>The <code>dict()</code> constructor makes a <em>shallow copy</em>. To make a deep copy, see the <a href="https://docs.python.org/library/copy.html" rel="noreferrer"><code>copy</code> module</a>.</p>
<hr>
<p>Note that making a copy for every dict <code>del</code>/assignment/etc. means you’re going from constant time to linear time, and also using linear space. For small dicts, this is not a problem. But if you’re planning to make lots of copies of large dicts, you probably want a different data structure, like a HAMT (as described in <a href="https://stackoverflow.com/a/50341031/908494">this answer</a>).</p>
</section>
<section id="answer-2-score-212" class="level4">
<h4>Answer 2 (score 212)</h4>
<p><a href="https://docs.python.org/library/stdtypes.html#dict.pop" rel="noreferrer"><code>pop</code></a> mutates the dictionary.</p>
<div class="sourceCode" id="cb718"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb718-1"><a href="#cb718-1"></a> <span class="op">&gt;&gt;&gt;</span>lol <span class="op">=</span> {<span class="st">&quot;hello&quot;</span>:<span class="st">&quot;gdbye&quot;</span>}</span>
<span id="cb718-2"><a href="#cb718-2"></a> <span class="op">&gt;&gt;&gt;</span>lol.pop(<span class="st">&quot;hello&quot;</span>)</span>
<span id="cb718-3"><a href="#cb718-3"></a>    <span class="co">&#39;gdbye&#39;</span></span>
<span id="cb718-4"><a href="#cb718-4"></a> <span class="op">&gt;&gt;&gt;</span> lol</span>
<span id="cb718-5"><a href="#cb718-5"></a>     {}</span></code></pre></div>
<p>If you want to keep the original you could just copy it.</p>
</section>
<section id="answer-3-score-70" class="level4">
<h4>Answer 3 (score 70)</h4>
<p>I think your solution is best way to do it. But if you want another solution, you can create a new dictionary with using the keys from old dictionary without including your specified key, like this:</p>
<div class="sourceCode" id="cb719"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb719-1"><a href="#cb719-1"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb719-2"><a href="#cb719-2"></a>{<span class="dv">0</span>: <span class="st">&#39;zero&#39;</span>, <span class="dv">1</span>: <span class="st">&#39;one&#39;</span>, <span class="dv">2</span>: <span class="st">&#39;two&#39;</span>, <span class="dv">3</span>: <span class="st">&#39;three&#39;</span>}</span>
<span id="cb719-3"><a href="#cb719-3"></a><span class="op">&gt;&gt;&gt;</span> {i:a[i] <span class="cf">for</span> i <span class="kw">in</span> a <span class="cf">if</span> i<span class="op">!=</span><span class="dv">0</span>}</span>
<span id="cb719-4"><a href="#cb719-4"></a>{<span class="dv">1</span>: <span class="st">&#39;one&#39;</span>, <span class="dv">2</span>: <span class="st">&#39;two&#39;</span>, <span class="dv">3</span>: <span class="st">&#39;three&#39;</span>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="null-object-in-python-score-1404774-in-2013" class="level3">
<h3>87: null object in Python? (score <a href="https://stackoverflow.com/q/3289601.html">1404774</a> in 2013)</h3>
<section id="question-85" class="level4">
<h4>Question</h4>
<p>How do I refer to the null object in Python?</p>
</section>
<section id="answer-accepted-score-1458" class="level4">
<h4>Answer accepted (score 1458)</h4>
<p>In Python, the ‘null’ object is the singleton <code>None</code>.</p>
<p>The best way to check things for “Noneness” is to use the identity operator, <code>is</code>:</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb720-1"><a href="#cb720-1"></a><span class="cf">if</span> foo <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb720-2"><a href="#cb720-2"></a>    ...</span></code></pre></div>
</section>
<section id="answer-2-score-100-1" class="level4">
<h4>Answer 2 (score 100)</h4>
<h5>
<code>None</code>, Python’s null?
</h1>
<p>There’s no <code>null</code> in Python, instead there’s <code>None</code>. As stated already the most accurate way to test that something has been given <code>None</code> as a value is to use the <code>is</code> identity operator, which tests that two variables refer to the same object.</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb721-1"><a href="#cb721-1"></a><span class="op">&gt;&gt;&gt;</span> foo <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb721-2"><a href="#cb721-2"></a><span class="va">True</span></span>
<span id="cb721-3"><a href="#cb721-3"></a><span class="op">&gt;&gt;&gt;</span> foo <span class="op">=</span> <span class="st">&#39;bar&#39;</span> </span>
<span id="cb721-4"><a href="#cb721-4"></a><span class="op">&gt;&gt;&gt;</span> foo <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb721-5"><a href="#cb721-5"></a><span class="va">False</span></span></code></pre></div>
<h5>
The basics
</h1>
<h5>
There is and can only be one <code>None</code>
</h2>
<p><code>None</code> is the sole instance of the class <code>NoneType</code> and any further attempts at instantiating that class will return the same object, which makes <code>None</code> a singleton. Newcomers to Python often see error messages that mention <code>NoneType</code> and wonder what it is. It’s my personal opinion that these messages could simply just mention <code>None</code> by name because, as we’ll see shortly, <code>None</code> leaves little room to ambiguity. So if you see some <code>TypeError</code> message that mentions that <code>NoneType</code> can’t do this or can’t do that, just know that it’s simply the one <code>None</code> that was being used in a way that it can’t.</p>
<p>Also, <code>None</code> is a built-in constant, as soon as you start Python it’s available to use from everywhere, whether in module, class, or function. <code>NoneType</code> by contrast is not, you’d need to get a reference to it first by querying <code>None</code> for its class.</p>
<div class="sourceCode" id="cb722"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb722-1"><a href="#cb722-1"></a><span class="op">&gt;&gt;&gt;</span> NoneType</span>
<span id="cb722-2"><a href="#cb722-2"></a><span class="pp">NameError</span>: name <span class="st">&#39;NoneType&#39;</span> <span class="kw">is</span> <span class="kw">not</span> defined</span>
<span id="cb722-3"><a href="#cb722-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="va">None</span>)</span>
<span id="cb722-4"><a href="#cb722-4"></a>NoneType</span></code></pre></div>
<p>You can check <code>None</code>’s uniqueness with Python’s identity function <code>id()</code>. It returns the unique number assigned to an object, each object has one. If the id of two variables is the same, then they point in fact to the same object.</p>
<div class="sourceCode" id="cb723"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb723-1"><a href="#cb723-1"></a><span class="op">&gt;&gt;&gt;</span> NoneType <span class="op">=</span> <span class="bu">type</span>(<span class="va">None</span>)</span>
<span id="cb723-2"><a href="#cb723-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(<span class="va">None</span>)</span>
<span id="cb723-3"><a href="#cb723-3"></a><span class="dv">10748000</span></span>
<span id="cb723-4"><a href="#cb723-4"></a><span class="op">&gt;&gt;&gt;</span> my_none <span class="op">=</span> NoneType()</span>
<span id="cb723-5"><a href="#cb723-5"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(my_none)</span>
<span id="cb723-6"><a href="#cb723-6"></a><span class="dv">10748000</span></span>
<span id="cb723-7"><a href="#cb723-7"></a><span class="op">&gt;&gt;&gt;</span> another_none <span class="op">=</span> NoneType()</span>
<span id="cb723-8"><a href="#cb723-8"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(another_none)</span>
<span id="cb723-9"><a href="#cb723-9"></a><span class="dv">10748000</span></span>
<span id="cb723-10"><a href="#cb723-10"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> function_that_does_nothing(): <span class="cf">pass</span></span>
<span id="cb723-11"><a href="#cb723-11"></a><span class="op">&gt;&gt;&gt;</span> return_value <span class="op">=</span> function_that_does_nothing()</span>
<span id="cb723-12"><a href="#cb723-12"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(return_value)</span>
<span id="cb723-13"><a href="#cb723-13"></a><span class="dv">10748000</span></span></code></pre></div>
<h5>
<code>None</code> cannot be overwritten
</h2>
<p>In much older version of Python (before 2.4) it was possible to reassign <code>None</code>, but not anymore. Not even as a class attribute or in the confines of a function.</p>
<div class="sourceCode" id="cb724"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb724-1"><a href="#cb724-1"></a><span class="co"># In Python 2.7</span></span>
<span id="cb724-2"><a href="#cb724-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> SomeClass(<span class="bu">object</span>):</span>
<span id="cb724-3"><a href="#cb724-3"></a>...     <span class="kw">def</span> my_fnc(<span class="va">self</span>):</span>
<span id="cb724-4"><a href="#cb724-4"></a>...             <span class="va">self</span>.<span class="va">None</span> <span class="op">=</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb724-5"><a href="#cb724-5"></a><span class="pp">SyntaxError</span>: cannot assign to <span class="va">None</span></span>
<span id="cb724-6"><a href="#cb724-6"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> my_fnc():</span>
<span id="cb724-7"><a href="#cb724-7"></a>        <span class="va">None</span> <span class="op">=</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb724-8"><a href="#cb724-8"></a><span class="pp">SyntaxError</span>: cannot assign to <span class="va">None</span></span>
<span id="cb724-9"><a href="#cb724-9"></a></span>
<span id="cb724-10"><a href="#cb724-10"></a><span class="co"># In Python 3.5</span></span>
<span id="cb724-11"><a href="#cb724-11"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> SomeClass:</span>
<span id="cb724-12"><a href="#cb724-12"></a>...     <span class="kw">def</span> my_fnc(<span class="va">self</span>):</span>
<span id="cb724-13"><a href="#cb724-13"></a>...             <span class="va">self</span>.<span class="va">None</span> <span class="op">=</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb724-14"><a href="#cb724-14"></a><span class="pp">SyntaxError</span>: invalid syntax</span>
<span id="cb724-15"><a href="#cb724-15"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> my_fnc():</span>
<span id="cb724-16"><a href="#cb724-16"></a>        <span class="va">None</span> <span class="op">=</span> <span class="st">&#39;foo&#39;</span></span>
<span id="cb724-17"><a href="#cb724-17"></a><span class="pp">SyntaxError</span>: cannot assign to keyword</span></code></pre></div>
<p>It’s therefore safe to assume that all <code>None</code> references are the same. There’s no “custom” <code>None</code>.</p>
<h5>
To test for <code>None</code> use the <code>is</code> operator
</h2>
<p>When writing code you might be tempted to test for <em>Noneness</em> like this:</p>
<div class="sourceCode" id="cb725"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb725-1"><a href="#cb725-1"></a><span class="cf">if</span> value<span class="op">==</span><span class="va">None</span>:</span>
<span id="cb725-2"><a href="#cb725-2"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>Or to test for falsehood like this</p>
<div class="sourceCode" id="cb726"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb726-1"><a href="#cb726-1"></a><span class="cf">if</span> <span class="kw">not</span> value:</span>
<span id="cb726-2"><a href="#cb726-2"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>You need to understand the implications and why it’s often a good idea to be explicit.</p>
<h5>
Case 1: testing if a value is <code>None</code>
</h3>
<p>why do this</p>
<div class="sourceCode" id="cb727"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb727-1"><a href="#cb727-1"></a>value <span class="kw">is</span> <span class="va">None</span></span></code></pre></div>
<p>rather than</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb728-1"><a href="#cb728-1"></a>value<span class="op">==</span><span class="va">None</span></span></code></pre></div>
<p>The first is equivalent to:</p>
<div class="sourceCode" id="cb729"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb729-1"><a href="#cb729-1"></a><span class="bu">id</span>(value)<span class="op">==</span><span class="bu">id</span>(<span class="va">None</span>)</span></code></pre></div>
<p>Whereas the expression <code>value==None</code> is in fact applied like this</p>
<div class="sourceCode" id="cb730"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb730-1"><a href="#cb730-1"></a>value.<span class="fu">__eq__</span>(<span class="va">None</span>)</span></code></pre></div>
<p>if the value really is <code>None</code> then you’ll get what you expected.</p>
<div class="sourceCode" id="cb731"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb731-1"><a href="#cb731-1"></a><span class="op">&gt;&gt;&gt;</span> nothing <span class="op">=</span> function_that_does_nothing()</span>
<span id="cb731-2"><a href="#cb731-2"></a><span class="op">&gt;&gt;&gt;</span> nothing.<span class="fu">__eq__</span>(<span class="va">None</span>)</span>
<span id="cb731-3"><a href="#cb731-3"></a><span class="va">True</span></span></code></pre></div>
<p>In most common cases the outcome will be the same, but the <code>__eq__()</code> method opens a door that voids any guarantee of accuracy, since it can be overridden in a class to provide special behavior.</p>
<p>Consider this class.</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb732-1"><a href="#cb732-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Empty(<span class="bu">object</span>):</span>
<span id="cb732-2"><a href="#cb732-2"></a>...     <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, other):</span>
<span id="cb732-3"><a href="#cb732-3"></a>...         <span class="cf">return</span> <span class="kw">not</span> other</span></code></pre></div>
<p>So you try it on <code>None</code> and it works</p>
<div class="sourceCode" id="cb733"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb733-1"><a href="#cb733-1"></a><span class="op">&gt;&gt;&gt;</span> empty <span class="op">=</span> Empty()</span>
<span id="cb733-2"><a href="#cb733-2"></a><span class="op">&gt;&gt;&gt;</span> empty<span class="op">==</span><span class="va">None</span></span>
<span id="cb733-3"><a href="#cb733-3"></a><span class="va">True</span></span></code></pre></div>
<p>But then it also works on the empty string</p>
<div class="sourceCode" id="cb734"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb734-1"><a href="#cb734-1"></a><span class="op">&gt;&gt;&gt;</span> empty<span class="op">==</span><span class="st">&#39;&#39;</span></span>
<span id="cb734-2"><a href="#cb734-2"></a><span class="va">True</span></span></code></pre></div>
<p>And yet</p>
<div class="sourceCode" id="cb735"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb735-1"><a href="#cb735-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;&#39;</span><span class="op">==</span><span class="va">None</span></span>
<span id="cb735-2"><a href="#cb735-2"></a><span class="va">False</span></span>
<span id="cb735-3"><a href="#cb735-3"></a><span class="op">&gt;&gt;&gt;</span> empty <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb735-4"><a href="#cb735-4"></a><span class="va">False</span></span></code></pre></div>
<h5>
Case 2: Using <code>None</code> as a boolean
</h3>
<p>The following two tests</p>
<div class="sourceCode" id="cb736"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb736-1"><a href="#cb736-1"></a><span class="cf">if</span> value:</span>
<span id="cb736-2"><a href="#cb736-2"></a>    <span class="co"># do something</span></span>
<span id="cb736-3"><a href="#cb736-3"></a></span>
<span id="cb736-4"><a href="#cb736-4"></a><span class="cf">if</span> <span class="kw">not</span> value:</span>
<span id="cb736-5"><a href="#cb736-5"></a>    <span class="co"># do something</span></span></code></pre></div>
<p>are in fact evaluated as</p>
<div class="sourceCode" id="cb737"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb737-1"><a href="#cb737-1"></a><span class="cf">if</span> <span class="bu">bool</span>(value):</span>
<span id="cb737-2"><a href="#cb737-2"></a>    <span class="co"># do something</span></span>
<span id="cb737-3"><a href="#cb737-3"></a></span>
<span id="cb737-4"><a href="#cb737-4"></a><span class="cf">if</span> <span class="kw">not</span> <span class="bu">bool</span>(value):</span>
<span id="cb737-5"><a href="#cb737-5"></a>    <span class="co"># do something</span></span></code></pre></div>
<p><code>None</code> is a “falsey”, meaning that if cast to a boolean it will return <code>False</code> and if applied the <code>not</code> operator it will return <code>True</code>. Note however that it’s not a property unique to <code>None</code>. In addition to <code>False</code> itself, the property is shared by empty lists, tuples, sets, dicts, strings, as well as 0, and all objects from classes that implement the <code>__bool__()</code> magic method to return <code>False</code>.</p>
<div class="sourceCode" id="cb738"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb738-1"><a href="#cb738-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">bool</span>(<span class="va">None</span>)</span>
<span id="cb738-2"><a href="#cb738-2"></a><span class="va">False</span></span>
<span id="cb738-3"><a href="#cb738-3"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">not</span> <span class="va">None</span></span>
<span id="cb738-4"><a href="#cb738-4"></a><span class="va">True</span></span>
<span id="cb738-5"><a href="#cb738-5"></a></span>
<span id="cb738-6"><a href="#cb738-6"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">bool</span>([])</span>
<span id="cb738-7"><a href="#cb738-7"></a><span class="va">False</span></span>
<span id="cb738-8"><a href="#cb738-8"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">not</span> []</span>
<span id="cb738-9"><a href="#cb738-9"></a><span class="va">True</span></span>
<span id="cb738-10"><a href="#cb738-10"></a></span>
<span id="cb738-11"><a href="#cb738-11"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> MyFalsey(<span class="bu">object</span>):</span>
<span id="cb738-12"><a href="#cb738-12"></a>...     <span class="kw">def</span> __bool__(<span class="va">self</span>):</span>
<span id="cb738-13"><a href="#cb738-13"></a>...         <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb738-14"><a href="#cb738-14"></a><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> MyFalsey()</span>
<span id="cb738-15"><a href="#cb738-15"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">bool</span>(f)</span>
<span id="cb738-16"><a href="#cb738-16"></a><span class="va">False</span></span>
<span id="cb738-17"><a href="#cb738-17"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">not</span> f</span>
<span id="cb738-18"><a href="#cb738-18"></a><span class="va">True</span></span></code></pre></div>
<p>So when testing for variables in the following way, be extra aware of what you’re including or excluding from the test:</p>
<div class="sourceCode" id="cb739"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb739-1"><a href="#cb739-1"></a><span class="kw">def</span> some_function(value<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb739-2"><a href="#cb739-2"></a>    <span class="cf">if</span> <span class="kw">not</span> value:</span>
<span id="cb739-3"><a href="#cb739-3"></a>        value <span class="op">=</span> init_value()</span></code></pre></div>
<p>In the above, did you mean to call <code>init_value()</code> when the value is set specifically to <code>None</code>, or did you mean that a value set to <code>0</code>, or the empty string, or an empty list should also trigger the initialization. Like I said, be mindful. As it’s often the case in Python <em>explicit is better than implicit</em>.</p>
<h5>
<code>None</code> in practice
</h1>
<h5>
<code>None</code> used as a signal value
</h2>
<p><code>None</code> has a special status in Python. It’s a favorite baseline value because many algorithms treat it as an exceptional value. In such scenarios it can be used as a flag to signal that a condition requires some special handling (such as the setting of a default value).</p>
<p>You can assign <code>None</code> to the keyword arguments of a function and then explicitly test for it.</p>
<div class="sourceCode" id="cb740"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb740-1"><a href="#cb740-1"></a><span class="kw">def</span> my_function(value, param<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb740-2"><a href="#cb740-2"></a>    <span class="cf">if</span> param <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb740-3"><a href="#cb740-3"></a>        <span class="co"># do something outrageous!</span></span></code></pre></div>
<p>You can return it as the default when trying to get to an object’s attribute and then explicitly test for it before doing something special.</p>
<div class="sourceCode" id="cb741"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb741-1"><a href="#cb741-1"></a>value <span class="op">=</span> <span class="bu">getattr</span>(some_obj, <span class="st">&#39;some_attribute&#39;</span>, <span class="va">None</span>)</span>
<span id="cb741-2"><a href="#cb741-2"></a><span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb741-3"><a href="#cb741-3"></a>    <span class="co"># do something spectacular!</span></span></code></pre></div>
<p>By default a dictionary’s <code>get()</code> method returns <code>None</code> when trying to access a non-existing key:</p>
<div class="sourceCode" id="cb742"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb742-1"><a href="#cb742-1"></a><span class="op">&gt;&gt;&gt;</span> some_dict <span class="op">=</span> {}</span>
<span id="cb742-2"><a href="#cb742-2"></a><span class="op">&gt;&gt;&gt;</span> value <span class="op">=</span> some_dict.get(<span class="st">&#39;foo&#39;</span>)</span>
<span id="cb742-3"><a href="#cb742-3"></a><span class="op">&gt;&gt;&gt;</span> value <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb742-4"><a href="#cb742-4"></a><span class="va">True</span></span></code></pre></div>
<p>If you were to try to access it by using the subscript notation a <code>KeyError</code> would be raised</p>
<div class="sourceCode" id="cb743"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb743-1"><a href="#cb743-1"></a><span class="op">&gt;&gt;&gt;</span> value <span class="op">=</span> some_dict[<span class="st">&#39;foo&#39;</span>]</span>
<span id="cb743-2"><a href="#cb743-2"></a><span class="pp">KeyError</span>: <span class="st">&#39;foo&#39;</span></span></code></pre></div>
<p>Likewise if you attempt to pop a non-existing item</p>
<div class="sourceCode" id="cb744"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb744-1"><a href="#cb744-1"></a><span class="op">&gt;&gt;&gt;</span> value <span class="op">=</span> some_dict.pop(<span class="st">&#39;foo&#39;</span>)</span>
<span id="cb744-2"><a href="#cb744-2"></a><span class="pp">KeyError</span>: <span class="st">&#39;foo&#39;</span></span></code></pre></div>
<p>which you can suppress with a default value that is usually set to <code>None</code></p>
<div class="sourceCode" id="cb745"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb745-1"><a href="#cb745-1"></a>value <span class="op">=</span> some_dict.pop(<span class="st">&#39;foo&#39;</span>, <span class="va">None</span>)</span>
<span id="cb745-2"><a href="#cb745-2"></a><span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb745-3"><a href="#cb745-3"></a>    <span class="co"># booom!</span></span></code></pre></div>
<h5>
<code>None</code> used as both a flag and valid value
</h2>
<p>The above described uses of <code>None</code> apply when it is not considered a valid value, but more like a signal to do something special. There are situations however where it sometimes matters to know where <code>None</code> came from because even though it’s used as a signal it could also be part of the data.</p>
<p>When you query an object for its attribute with <code>getattr(some_obj, 'attribute_name', None)</code> getting back <code>None</code> doesn’t tell you if the attribute you were trying to access was set to <code>None</code> or if it was altogether absent from the object. Same situation when accessing a key from a dictionary like <code>some_dict.get('some_key')</code>, you don’t know if <code>some_dict['some_key']</code> is missing or if it’s just set to <code>None</code>. If you need that information, the usual way to handle this is to directly attempt accessing the attribute or key from within a <code>try/except</code> construct:</p>
<div class="sourceCode" id="cb746"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb746-1"><a href="#cb746-1"></a><span class="cf">try</span>:</span>
<span id="cb746-2"><a href="#cb746-2"></a>    <span class="co"># equivalent to getattr() without specifying a default</span></span>
<span id="cb746-3"><a href="#cb746-3"></a>    <span class="co"># value = getattr(some_obj, &#39;some_attribute&#39;)</span></span>
<span id="cb746-4"><a href="#cb746-4"></a>    value <span class="op">=</span> some_obj.some_attribute</span>
<span id="cb746-5"><a href="#cb746-5"></a>    <span class="co"># now you handle `None` the data here</span></span>
<span id="cb746-6"><a href="#cb746-6"></a>    <span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb746-7"><a href="#cb746-7"></a>        <span class="co"># do something here because the attribute was set to None</span></span>
<span id="cb746-8"><a href="#cb746-8"></a><span class="cf">except</span> <span class="pp">AttributeError</span>:</span>
<span id="cb746-9"><a href="#cb746-9"></a>    <span class="co"># we&#39;re now hanling the exceptional situation from here.</span></span>
<span id="cb746-10"><a href="#cb746-10"></a>    <span class="co"># We could assign None as a default value if required.</span></span>
<span id="cb746-11"><a href="#cb746-11"></a>    value <span class="op">=</span> <span class="va">None</span> </span>
<span id="cb746-12"><a href="#cb746-12"></a>    <span class="co"># In addition, since we now know that some_obj doesn&#39;t have the</span></span>
<span id="cb746-13"><a href="#cb746-13"></a>    <span class="co"># attribute &#39;some_attribute&#39; we could do something about that.</span></span>
<span id="cb746-14"><a href="#cb746-14"></a>    log_something(some_obj)</span></code></pre></div>
<p>Similarly with dict:</p>
<div class="sourceCode" id="cb747"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb747-1"><a href="#cb747-1"></a><span class="cf">try</span>:</span>
<span id="cb747-2"><a href="#cb747-2"></a>    value <span class="op">=</span> some_dict[<span class="st">&#39;some_key&#39;</span>]</span>
<span id="cb747-3"><a href="#cb747-3"></a>    <span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb747-4"><a href="#cb747-4"></a>        <span class="co"># do something here because &#39;some_key&#39; is set to None</span></span>
<span id="cb747-5"><a href="#cb747-5"></a><span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb747-6"><a href="#cb747-6"></a>    <span class="co"># set a default </span></span>
<span id="cb747-7"><a href="#cb747-7"></a>    value <span class="op">=</span> <span class="va">None</span></span>
<span id="cb747-8"><a href="#cb747-8"></a>    <span class="co"># and do something because &#39;some_key&#39; was missing</span></span>
<span id="cb747-9"><a href="#cb747-9"></a>    <span class="co"># from the dict.</span></span>
<span id="cb747-10"><a href="#cb747-10"></a>    log_something(some_dict)</span></code></pre></div>
<p>The above two examples show how to handle object and dictionary cases, what about functions? Same thing, but we use the double asterisks keyword argument to that end:</p>
<div class="sourceCode" id="cb748"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb748-1"><a href="#cb748-1"></a><span class="kw">def</span> my_function(<span class="op">**</span>kwargs):</span>
<span id="cb748-2"><a href="#cb748-2"></a>    <span class="cf">try</span>:</span>
<span id="cb748-3"><a href="#cb748-3"></a>        value <span class="op">=</span> kwargs[<span class="st">&#39;some_key&#39;</span>] </span>
<span id="cb748-4"><a href="#cb748-4"></a>        <span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb748-5"><a href="#cb748-5"></a>            <span class="co"># do something because &#39;some_key&#39; is explicitly </span></span>
<span id="cb748-6"><a href="#cb748-6"></a>            <span class="co"># set to None</span></span>
<span id="cb748-7"><a href="#cb748-7"></a>    <span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb748-8"><a href="#cb748-8"></a>        <span class="co"># we assign the default</span></span>
<span id="cb748-9"><a href="#cb748-9"></a>        value <span class="op">=</span> <span class="va">None</span></span>
<span id="cb748-10"><a href="#cb748-10"></a>        <span class="co"># and since it&#39;s not coming from the caller.</span></span>
<span id="cb748-11"><a href="#cb748-11"></a>        log_something(<span class="st">&#39;did not receive &quot;some_key&quot;&#39;</span>)</span></code></pre></div>
<h5>
<code>None</code> used only as a valid value
</h2>
<p>If you find that your code is littered with the above <code>try/except</code> pattern simply to differentiate between <code>None</code> flags and <code>None</code> data, then just use another test value. There’s a pattern where a value that falls outside the set of valid values is inserted as part of the data in a data structure and is used to control and test special conditions (e.g. boundaries, state, etc). Such a value is called a <em>sentinel</em> and it can be used the way <code>None</code> is used as a signal. It’s trivial to create a sentinel in Python.</p>
<div class="sourceCode" id="cb749"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb749-1"><a href="#cb749-1"></a>undefined <span class="op">=</span> <span class="bu">object</span>()</span></code></pre></div>
<p>The <code>undefined</code> object above is unique and doesn’t do much of anything that might be of interest to a program, it’s thus an excellent replacement for <code>None</code> as a flag. Some caveats apply, more about that after the code.</p>
<p>With function</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb750-1"><a href="#cb750-1"></a><span class="kw">def</span> my_function(value, param1<span class="op">=</span>undefined, param2<span class="op">=</span>undefined):</span>
<span id="cb750-2"><a href="#cb750-2"></a>    <span class="cf">if</span> param1 <span class="kw">is</span> undefined:</span>
<span id="cb750-3"><a href="#cb750-3"></a>        <span class="co"># we know nothing was passed to it, not even None</span></span>
<span id="cb750-4"><a href="#cb750-4"></a>        log_something(<span class="st">&#39;param1 was missing&#39;</span>)</span>
<span id="cb750-5"><a href="#cb750-5"></a>        param1 <span class="op">=</span> <span class="va">None</span></span>
<span id="cb750-6"><a href="#cb750-6"></a></span>
<span id="cb750-7"><a href="#cb750-7"></a></span>
<span id="cb750-8"><a href="#cb750-8"></a>    <span class="cf">if</span> param2 <span class="kw">is</span> undefined:</span>
<span id="cb750-9"><a href="#cb750-9"></a>        <span class="co"># we got nothing here either</span></span>
<span id="cb750-10"><a href="#cb750-10"></a>        log_something(<span class="st">&#39;param2 was missing&#39;</span>)</span>
<span id="cb750-11"><a href="#cb750-11"></a>        param2 <span class="op">=</span> <span class="va">None</span></span></code></pre></div>
<p>With dict</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb751-1"><a href="#cb751-1"></a>value <span class="op">=</span> some_dict.get(<span class="st">&#39;some_key&#39;</span>, undefined)</span>
<span id="cb751-2"><a href="#cb751-2"></a><span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb751-3"><a href="#cb751-3"></a>    log_something(<span class="st">&quot;&#39;some_key&#39; was set to None&quot;</span>)</span>
<span id="cb751-4"><a href="#cb751-4"></a></span>
<span id="cb751-5"><a href="#cb751-5"></a><span class="cf">if</span> value <span class="kw">is</span> undefined:</span>
<span id="cb751-6"><a href="#cb751-6"></a>    <span class="co"># we know that the dict didn&#39;t have &#39;some_key&#39;</span></span>
<span id="cb751-7"><a href="#cb751-7"></a>    log_something(<span class="st">&quot;&#39;some_key&#39; was not set at all&quot;</span>)</span>
<span id="cb751-8"><a href="#cb751-8"></a>    value <span class="op">=</span> <span class="va">None</span></span></code></pre></div>
<p>With an object</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb752-1"><a href="#cb752-1"></a>value <span class="op">=</span> <span class="bu">getattr</span>(obj, <span class="st">&#39;some_attribute&#39;</span>, undefined) </span>
<span id="cb752-2"><a href="#cb752-2"></a><span class="cf">if</span> value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb752-3"><a href="#cb752-3"></a>    log_something(<span class="st">&quot;&#39;obj.some_attribute&#39; was set to None&quot;</span>)</span>
<span id="cb752-4"><a href="#cb752-4"></a><span class="cf">if</span> value <span class="kw">is</span> undefined:</span>
<span id="cb752-5"><a href="#cb752-5"></a>    <span class="co"># we know that there&#39;s no obj.some_attribute</span></span>
<span id="cb752-6"><a href="#cb752-6"></a>    log_something(<span class="st">&quot;no &#39;some_attribute&#39; set on obj&quot;</span>)</span>
<span id="cb752-7"><a href="#cb752-7"></a>    value <span class="op">=</span> <span class="va">None</span></span></code></pre></div>
<p>As I mentioned earlier custom sentinels come with some caveats. First, they’re not keywords like <code>None</code>, so python doesn’t protect them. You can overwrite your <code>undefined</code> above at any time, anywhere in the module it’s defined, so be careful how you expose and use them. Next, the instance returned by <code>object()</code> is not a singleton, if you make that call 10 times you get 10 different objects. Finally, usage of a sentinel is highly idiosyncratic. A sentinel is specific to the library it’s used in and as such its scope should generally be limited to the library’s internals. It shouldn’t “leak” out. External code should only become aware of it, if their purpose is to extend or supplement the library’s API.</p>
</section>
<section id="answer-3-score-64-1" class="level4">
<h4>Answer 3 (score 64)</h4>
<p>It’s not called null as in other languages, but <a href="http://docs.python.org/library/constants.html?highlight=none#None" rel="noreferrer"><code>None</code></a>. There is always only one instance of this object, so you can check for equivalence with <code>x is None</code> (identity comparison) instead of <code>x == None</code>, if you want.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-do-a-line-break-line-continuation-in-python-score-1403503-in-2018" class="level3">
<h3>88: How can I do a line break (line continuation) in Python? (score <a href="https://stackoverflow.com/q/53162.html">1403503</a> in 2018)</h3>
<section id="question-86" class="level4">
<h4>Question</h4>
<p>I have a long line of code that I want to break up among multiple lines. What do I use and what is the syntax?</p>
<p>For example, adding a bunch of strings,</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb753-1"><a href="#cb753-1"></a>e <span class="op">=</span> <span class="st">&#39;a&#39;</span> <span class="op">+</span> <span class="st">&#39;b&#39;</span> <span class="op">+</span> <span class="st">&#39;c&#39;</span> <span class="op">+</span> <span class="st">&#39;d&#39;</span></span></code></pre></div>
<p>and have it in two lines like this:</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb754-1"><a href="#cb754-1"></a>e <span class="op">=</span> <span class="st">&#39;a&#39;</span> <span class="op">+</span> <span class="st">&#39;b&#39;</span> <span class="op">+</span></span>
<span id="cb754-2"><a href="#cb754-2"></a>    <span class="co">&#39;c&#39;</span> <span class="op">+</span> <span class="st">&#39;d&#39;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1092" class="level4">
<h4>Answer accepted (score 1092)</h4>
<p>What is the line? You can just have arguments on the next line without any problems:</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb755-1"><a href="#cb755-1"></a>a <span class="op">=</span> dostuff(blahblah1, blahblah2, blahblah3, blahblah4, blahblah5, </span>
<span id="cb755-2"><a href="#cb755-2"></a>            blahblah6, blahblah7)</span></code></pre></div>
<p>Otherwise you can do something like this:</p>
<div class="sourceCode" id="cb756"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb756-1"><a href="#cb756-1"></a><span class="cf">if</span> a <span class="op">==</span> <span class="va">True</span> <span class="kw">and</span> <span class="op">\</span></span>
<span id="cb756-2"><a href="#cb756-2"></a>   b <span class="op">==</span> <span class="va">False</span></span></code></pre></div>
<p>Check the <a href="http://www.python.org/dev/peps/pep-0008/" rel="noreferrer">style guide</a> for more information.</p>
<p>From your example line:</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb757-1"><a href="#cb757-1"></a>a <span class="op">=</span> <span class="st">&#39;1&#39;</span> <span class="op">+</span> <span class="st">&#39;2&#39;</span> <span class="op">+</span> <span class="st">&#39;3&#39;</span> <span class="op">+</span> <span class="op">\</span></span>
<span id="cb757-2"><a href="#cb757-2"></a>    <span class="co">&#39;4&#39;</span> <span class="op">+</span> <span class="st">&#39;5&#39;</span></span></code></pre></div>
<p>Or:</p>
<div class="sourceCode" id="cb758"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb758-1"><a href="#cb758-1"></a>a <span class="op">=</span> (<span class="st">&#39;1&#39;</span> <span class="op">+</span> <span class="st">&#39;2&#39;</span> <span class="op">+</span> <span class="st">&#39;3&#39;</span> <span class="op">+</span></span>
<span id="cb758-2"><a href="#cb758-2"></a>    <span class="st">&#39;4&#39;</span> <span class="op">+</span> <span class="st">&#39;5&#39;</span>)</span></code></pre></div>
<p>Note that the style guide says that using the implicit continuation with parentheses is preferred, but in this particular case just adding parentheses around your expression is probably the wrong way to go.</p>
</section>
<section id="answer-2-score-211" class="level4">
<h4>Answer 2 (score 211)</h4>
<p>From <em><a href="http://www.python.org/dev/peps/pep-0008/" rel="nofollow noreferrer">PEP 8 – Style Guide for Python Code</a></em>:</p>
<blockquote>
<p><strong>The preferred way of wrapping long lines is by using Python’s implied line continuation inside parentheses, brackets and braces.</strong> Long lines can be broken over multiple lines by wrapping expressions in parentheses. These should be used in preference to using a backslash for line continuation.</p>
<p>Backslashes may still be appropriate at times. For example, long, multiple with-statements cannot use implicit continuation, so backslashes are acceptable:</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb759-1"><a href="#cb759-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;/path/to/some/file/you/want/to/read&#39;</span>) <span class="im">as</span> file_1, <span class="op">\</span></span>
<span id="cb759-2"><a href="#cb759-2"></a>        <span class="bu">open</span>(<span class="st">&#39;/path/to/some/file/being/written&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> file_2:</span>
<span id="cb759-3"><a href="#cb759-3"></a>    file_2.write(file_1.read())</span></code></pre></div>
<p>Another such case is with assert statements.</p>
<p>Make sure to indent the continued line appropriately. The preferred place to break around a binary operator is <strong>after</strong> the operator, not before it. Some examples:</p>
<div class="sourceCode" id="cb760"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb760-1"><a href="#cb760-1"></a><span class="kw">class</span> Rectangle(Blob):</span>
<span id="cb760-2"><a href="#cb760-2"></a></span>
<span id="cb760-3"><a href="#cb760-3"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, width, height,</span>
<span id="cb760-4"><a href="#cb760-4"></a>                 color<span class="op">=</span><span class="st">&#39;black&#39;</span>, emphasis<span class="op">=</span><span class="va">None</span>, highlight<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb760-5"><a href="#cb760-5"></a>        <span class="cf">if</span> (width <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> height <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span></span>
<span id="cb760-6"><a href="#cb760-6"></a>                color <span class="op">==</span> <span class="st">&#39;red&#39;</span> <span class="kw">and</span> emphasis <span class="op">==</span> <span class="st">&#39;strong&#39;</span> <span class="kw">or</span></span>
<span id="cb760-7"><a href="#cb760-7"></a>                highlight <span class="op">&gt;</span> <span class="dv">100</span>):</span>
<span id="cb760-8"><a href="#cb760-8"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;sorry, you lose&quot;</span>)</span>
<span id="cb760-9"><a href="#cb760-9"></a>        <span class="cf">if</span> width <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> height <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> (color <span class="op">==</span> <span class="st">&#39;red&#39;</span> <span class="kw">or</span></span>
<span id="cb760-10"><a href="#cb760-10"></a>                                           emphasis <span class="kw">is</span> <span class="va">None</span>):</span>
<span id="cb760-11"><a href="#cb760-11"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;I don&#39;t think so -- values are </span><span class="sc">%s</span><span class="st">, </span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span></span>
<span id="cb760-12"><a href="#cb760-12"></a>                             (width, height))</span>
<span id="cb760-13"><a href="#cb760-13"></a>        Blob.<span class="fu">__init__</span>(<span class="va">self</span>, width, height,</span>
<span id="cb760-14"><a href="#cb760-14"></a>                      color, emphasis, highlight)</span></code></pre></div>
</blockquote>
<p>PEP8 now recommends the <em>opposite convention</em> (for breaking at binary operations) used by mathematicians and their publishers to improve readability.</p>
<p>Donald Knuth’s style of breaking <strong>before</strong> a binary operator aligns operators vertically, thus reducing the eye’s workload when determining which items are added and subtracted.</p>
<p>From <a href="http://legacy.python.org/dev/peps/pep-0008/#should-a-line-break-before-or-after-a-binary-operator" rel="nofollow noreferrer">PEP8: <em>Should a line break before or after a binary operator?</em></a>:</p>
<blockquote>
<p>Donald Knuth explains the traditional rule in his Computers and Typesetting series: “Although formulas within a paragraph always break after binary operations and relations, displayed formulas always break before binary operations”<a href="Donald%20Knuth&#39;s%20The%20TeXBook,%20pages%20195%20and%20196">3</a>.</p>
<p>Following the tradition from mathematics usually results in more readable code:</p>
<div class="sourceCode" id="cb761"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb761-1"><a href="#cb761-1"></a><span class="co"># Yes: easy to match operators with operands</span></span>
<span id="cb761-2"><a href="#cb761-2"></a>income <span class="op">=</span> (gross_wages</span>
<span id="cb761-3"><a href="#cb761-3"></a>          <span class="op">+</span> taxable_interest</span>
<span id="cb761-4"><a href="#cb761-4"></a>          <span class="op">+</span> (dividends <span class="op">-</span> qualified_dividends)</span>
<span id="cb761-5"><a href="#cb761-5"></a>          <span class="op">-</span> ira_deduction</span>
<span id="cb761-6"><a href="#cb761-6"></a>          <span class="op">-</span> student_loan_interest)</span></code></pre></div>
In Python code, it is permissible to break before or after a binary operator, as long as the convention is consistent locally. For new code Knuth’s style is suggested.
</blockquote>
</section>
<section id="answer-3-score-67" class="level4">
<h4>Answer 3 (score 67)</h4>
<p>The danger in using a backslash to end a line is that if whitespace is added after the backslash (which, of course, is very hard to see), the backslash is no longer doing what you thought it was.</p>
<p>See Python Idioms and Anti-Idioms (for <a href="https://docs.python.org/2/howto/doanddont.html#using-backslash-to-continue-statements" rel="noreferrer">Python 2</a> or <a href="https://docs.python.org/3.1/howto/doanddont.html#using-backslash-to-continue-statements" rel="noreferrer">Python 3</a>) for more.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="save-plot-to-image-file-instead-of-displaying-it-using-matplotlib-score-1400228-in-2018" class="level3">
<h3>89: Save plot to image file instead of displaying it using Matplotlib (score <a href="https://stackoverflow.com/q/9622163.html">1400228</a> in 2018)</h3>
<section id="question-87" class="level4">
<h4>Question</h4>
<p>I am writing a quick-and-dirty script to generate plots on the fly. I am using the code below (from <a href="http://en.wikipedia.org/wiki/Matplotlib" rel="noreferrer">Matplotlib</a> documentation) as a starting point:</p>
<div class="sourceCode" id="cb762"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb762-1"><a href="#cb762-1"></a><span class="im">from</span> pylab <span class="im">import</span> figure, axes, pie, title, show</span>
<span id="cb762-2"><a href="#cb762-2"></a></span>
<span id="cb762-3"><a href="#cb762-3"></a><span class="co"># Make a square figure and axes</span></span>
<span id="cb762-4"><a href="#cb762-4"></a>figure(<span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>))</span>
<span id="cb762-5"><a href="#cb762-5"></a>ax <span class="op">=</span> axes([<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.8</span>, <span class="fl">0.8</span>])</span>
<span id="cb762-6"><a href="#cb762-6"></a></span>
<span id="cb762-7"><a href="#cb762-7"></a>labels <span class="op">=</span> <span class="st">&#39;Frogs&#39;</span>, <span class="st">&#39;Hogs&#39;</span>, <span class="st">&#39;Dogs&#39;</span>, <span class="st">&#39;Logs&#39;</span></span>
<span id="cb762-8"><a href="#cb762-8"></a>fracs <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">45</span>, <span class="dv">10</span>]</span>
<span id="cb762-9"><a href="#cb762-9"></a></span>
<span id="cb762-10"><a href="#cb762-10"></a>explode <span class="op">=</span> (<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb762-11"><a href="#cb762-11"></a>pie(fracs, explode<span class="op">=</span>explode, labels<span class="op">=</span>labels, autopct<span class="op">=</span><span class="st">&#39;</span><span class="sc">%1.1f%%</span><span class="st">&#39;</span>, shadow<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb762-12"><a href="#cb762-12"></a>title(<span class="st">&#39;Raining Hogs and Dogs&#39;</span>, bbox<span class="op">=</span>{<span class="st">&#39;facecolor&#39;</span>: <span class="st">&#39;0.8&#39;</span>, <span class="st">&#39;pad&#39;</span>: <span class="dv">5</span>})</span>
<span id="cb762-13"><a href="#cb762-13"></a></span>
<span id="cb762-14"><a href="#cb762-14"></a>show()  <span class="co"># Actually, don&#39;t show, just save to foo.png</span></span></code></pre></div>
<p>I don’t want to display the plot on a GUI, instead, I want to save the plot to a file (say foo.png), so that, for example, it can be used in batch scripts. How do I do that?</p>
</section>
<section id="answer-accepted-score-1267" class="level4">
<h4>Answer accepted (score 1267)</h4>
<p>While the question has been answered, I’d like to add some useful tips when using <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.savefig.html#matplotlib.pyplot.savefig" rel="noreferrer">matplotlib.pyplot.savefig</a>. The file format can be specified by the extension:</p>
<div class="sourceCode" id="cb763"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb763-1"><a href="#cb763-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb763-2"><a href="#cb763-2"></a></span>
<span id="cb763-3"><a href="#cb763-3"></a>plt.savefig(<span class="st">&#39;foo.png&#39;</span>)</span>
<span id="cb763-4"><a href="#cb763-4"></a>plt.savefig(<span class="st">&#39;foo.pdf&#39;</span>)</span></code></pre></div>
<p>Will give a rasterized or vectorized output respectively, both which could be useful. In addition, you’ll find that <code>pylab</code> leaves a generous, often undesirable, whitespace around the image. Remove it with:</p>
<div class="sourceCode" id="cb764"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb764-1"><a href="#cb764-1"></a>savefig(<span class="st">&#39;foo.png&#39;</span>, bbox_inches<span class="op">=</span><span class="st">&#39;tight&#39;</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-178-1" class="level4">
<h4>Answer 2 (score 178)</h4>
<p>As others have said, <code>plt.savefig()</code> or <code>fig1.savefig()</code> is indeed the way to save an image.</p>
<p>However I’ve found that in certain cases <strong>the figure is always shown</strong>. (eg. with Spyder having <code>plt.ion()</code>: interactive mode = On.) I work around this by forcing the closing of the figure window in my giant loop with <code>plt.close(figure_object)</code> (see <a href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.close.html" rel="nofollow noreferrer">documentation</a>), so I don’t have a million open figures during the loop:</p>
<div class="sourceCode" id="cb765"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb765-1"><a href="#cb765-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb765-2"><a href="#cb765-2"></a>fig, ax <span class="op">=</span> plt.subplots( nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">1</span> )  <span class="co"># create figure &amp; 1 axis</span></span>
<span id="cb765-3"><a href="#cb765-3"></a>ax.plot([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">3</span>])</span>
<span id="cb765-4"><a href="#cb765-4"></a>fig.savefig(<span class="st">&#39;path/to/save/image/to.png&#39;</span>)   <span class="co"># save the figure to file</span></span>
<span id="cb765-5"><a href="#cb765-5"></a>plt.close(fig)    <span class="co"># close the figure window</span></span></code></pre></div>
<p>You should be able to re-open the figure later if needed to with <code>fig.show()</code> (didn’t test myself).</p>
</section>
<section id="answer-3-score-156" class="level4">
<h4>Answer 3 (score 156)</h4>
<p>The solution is:</p>
<div class="sourceCode" id="cb766"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb766-1"><a href="#cb766-1"></a>pylab.savefig(<span class="st">&#39;foo.png&#39;</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-check-what-version-of-python-is-running-my-script-score-1394392-in-2011" class="level3">
<h3>90: How do I check what version of Python is running my script? (score <a href="https://stackoverflow.com/q/1093322.html">1394392</a> in 2011)</h3>
<section id="question-88" class="level4">
<h4>Question</h4>
<p>How can I check what version of the Python Interpreter is interpreting my script?</p>
</section>
<section id="answer-accepted-score-1281" class="level4">
<h4>Answer accepted (score 1281)</h4>
<p>This information is available in the <a href="http://docs.python.org/2/library/sys.html#sys.version" rel="noreferrer">sys.version</a> string in the <a href="http://docs.python.org/2/library/sys.html" rel="noreferrer">sys</a> module:</p>
<div class="sourceCode" id="cb767"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb767-1"><a href="#cb767-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> sys</span></code></pre></div>
<p>Human readable:</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb768-1"><a href="#cb768-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(sys.version)  <span class="co"># parentheses necessary in python 3.       </span></span>
<span id="cb768-2"><a href="#cb768-2"></a><span class="dv">2</span>.<span class="fl">5.2</span> (r252:<span class="dv">60911</span>, Jul <span class="dv">31</span> <span class="dv">2008</span>, <span class="dv">17</span>:<span class="dv">28</span>:<span class="dv">52</span>) </span>
<span id="cb768-3"><a href="#cb768-3"></a>[GCC <span class="dv">4</span>.<span class="fl">2.3</span> (Ubuntu <span class="dv">4</span>.<span class="fl">2.3</span><span class="op">-</span>2ubuntu7)]</span></code></pre></div>
<p>For further processing:</p>
<div class="sourceCode" id="cb769"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb769-1"><a href="#cb769-1"></a><span class="op">&gt;&gt;&gt;</span> sys.version_info</span>
<span id="cb769-2"><a href="#cb769-2"></a>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="st">&#39;final&#39;</span>, <span class="dv">0</span>)</span>
<span id="cb769-3"><a href="#cb769-3"></a><span class="co"># or</span></span>
<span id="cb769-4"><a href="#cb769-4"></a><span class="op">&gt;&gt;&gt;</span> sys.hexversion</span>
<span id="cb769-5"><a href="#cb769-5"></a><span class="dv">34014192</span></span></code></pre></div>
<p>To ensure a script runs with a minimal version requirement of the Python interpreter add this to your code:</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb770-1"><a href="#cb770-1"></a><span class="cf">assert</span> sys.version_info <span class="op">&gt;=</span> (<span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>This compares major and minor version information. Add micro (=<code>0</code>, <code>1</code>, etc) and even releaselevel (=<code>'alpha'</code>,<code>'final'</code>, etc) to the tuple as you like. Note however, that it is almost always better to “duck” check if a certain feature is there, and if not, workaround (or bail out). Sometimes features go away in newer releases, being replaced by others.</p>
</section>
<section id="answer-2-score-344" class="level4">
<h4>Answer 2 (score 344)</h4>
<p>From the command line (note the capital ‘V’):</p>
<div class="sourceCode" id="cb771"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb771-1"><a href="#cb771-1"></a>python <span class="op">-</span>V</span></code></pre></div>
<p>This is documented in ‘man python’.</p>
</section>
<section id="answer-3-score-95" class="level4">
<h4>Answer 3 (score 95)</h4>
<p>I like <code>sys.hexversion</code> for stuff like this.</p>
<p><a href="http://docs.python.org/library/sys.html#sys.hexversion" rel="noreferrer">http://docs.python.org/library/sys.html#sys.hexversion</a></p>
<div class="sourceCode" id="cb772"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb772-1"><a href="#cb772-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> sys</span>
<span id="cb772-2"><a href="#cb772-2"></a><span class="op">&gt;&gt;&gt;</span> sys.hexversion</span>
<span id="cb772-3"><a href="#cb772-3"></a><span class="dv">33883376</span></span>
<span id="cb772-4"><a href="#cb772-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;</span><span class="sc">%x</span><span class="st">&#39;</span> <span class="op">%</span> sys.hexversion</span>
<span id="cb772-5"><a href="#cb772-5"></a><span class="co">&#39;20504f0&#39;</span></span>
<span id="cb772-6"><a href="#cb772-6"></a><span class="op">&gt;&gt;&gt;</span> sys.hexversion <span class="op">&lt;</span> <span class="bn">0x02060000</span></span>
<span id="cb772-7"><a href="#cb772-7"></a><span class="va">True</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="writing-a-list-to-a-file-with-python-score-1386411-in-2016" class="level3">
<h3>91: Writing a list to a file with Python (score <a href="https://stackoverflow.com/q/899103.html">1386411</a> in 2016)</h3>
<section id="question-89" class="level4">
<h4>Question</h4>
<p>Is this the cleanest way to write a list to a file, since <code>writelines()</code> doesn’t insert newline characters?</p>
<div class="sourceCode" id="cb773"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb773-1"><a href="#cb773-1"></a><span class="bu">file</span>.writelines([<span class="st">&quot;</span><span class="sc">%s</span><span class="ch">\n</span><span class="st">&quot;</span> <span class="op">%</span> item  <span class="cf">for</span> item <span class="kw">in</span> <span class="bu">list</span>])</span></code></pre></div>
<p>It seems like there would be a standard way…</p>
</section>
<section id="answer-accepted-score-793" class="level4">
<h4>Answer accepted (score 793)</h4>
<p>You can use a loop:</p>
<div class="sourceCode" id="cb774"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb774-1"><a href="#cb774-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;your_file.txt&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb774-2"><a href="#cb774-2"></a>    <span class="cf">for</span> item <span class="kw">in</span> my_list:</span>
<span id="cb774-3"><a href="#cb774-3"></a>        f.write(<span class="st">&quot;</span><span class="sc">%s</span><span class="ch">\n</span><span class="st">&quot;</span> <span class="op">%</span> item)</span></code></pre></div>
<p>In Python 2, you can also use</p>
<div class="sourceCode" id="cb775"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb775-1"><a href="#cb775-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;your_file.txt&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb775-2"><a href="#cb775-2"></a>    <span class="cf">for</span> item <span class="kw">in</span> my_list:</span>
<span id="cb775-3"><a href="#cb775-3"></a>        <span class="bu">print</span> <span class="op">&gt;&gt;</span> f, item</span></code></pre></div>
<p>If you’re keen on a single function call, at least remove the square brackets <code>[]</code>, so that the strings to be printed get made one at a time (a genexp rather than a listcomp) – no reason to take up all the memory required to materialize the whole list of strings.</p>
</section>
<section id="answer-2-score-341" class="level4">
<h4>Answer 2 (score 341)</h4>
<p>What are you going to do with the file? Does this file exist for humans, or other programs with clear interoperability requirements?</p>
<p>If you are just trying to serialize a list to disk for later use by the same python app, you should be <a href="http://docs.python.org/library/pickle.html" rel="noreferrer">pickleing</a> the list.</p>
<div class="sourceCode" id="cb776"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb776-1"><a href="#cb776-1"></a><span class="im">import</span> pickle</span>
<span id="cb776-2"><a href="#cb776-2"></a></span>
<span id="cb776-3"><a href="#cb776-3"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;outfile&#39;</span>, <span class="st">&#39;wb&#39;</span>) <span class="im">as</span> fp:</span>
<span id="cb776-4"><a href="#cb776-4"></a>    pickle.dump(itemlist, fp)</span></code></pre></div>
<p>To read it back:</p>
<div class="sourceCode" id="cb777"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb777-1"><a href="#cb777-1"></a><span class="cf">with</span> <span class="bu">open</span> (<span class="st">&#39;outfile&#39;</span>, <span class="st">&#39;rb&#39;</span>) <span class="im">as</span> fp:</span>
<span id="cb777-2"><a href="#cb777-2"></a>    itemlist <span class="op">=</span> pickle.load(fp)</span></code></pre></div>
</section>
<section id="answer-3-score-254" class="level4">
<h4>Answer 3 (score 254)</h4>
<p>The simpler way is:</p>
<div class="sourceCode" id="cb778"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb778-1"><a href="#cb778-1"></a>outfile.write(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>.join(itemlist))</span></code></pre></div>
<p>You could ensure that all items in item list are strings using a generator expression:</p>
<div class="sourceCode" id="cb779"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb779-1"><a href="#cb779-1"></a>outfile.write(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>.join(<span class="bu">str</span>(item) <span class="cf">for</span> item <span class="kw">in</span> itemlist))</span></code></pre></div>
<p>Remember that all <code>itemlist</code> list need to be in memory, so, take care about the memory consumption.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-delete-a-character-from-a-string-using-python-score-1381554-in-2018" class="level3">
<h3>92: How to delete a character from a string using Python (score <a href="https://stackoverflow.com/q/3559559.html">1381554</a> in 2018)</h3>
<section id="question-90" class="level4">
<h4>Question</h4>
<p>There is a string, for example. <code>EXAMPLE</code>.</p>
<p>How can I remove the middle character, i.e., <code>M</code> from it? I don’t need the code. I want to know:</p>
<ul>
<li>
Do strings in Python end in any special character?
</li>
<li>
Which is a better way - shifting everything right to left starting from the middle character OR creation of a new string and not copying the middle character?
</li>
</ul>
</section>
<section id="answer-accepted-score-583" class="level4">
<h4>Answer accepted (score 583)</h4>
<p>In Python, strings are immutable, so you have to create a new string. You have a few options of how to create the new string. If you want to remove the ‘M’ wherever it appears:</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb780-1"><a href="#cb780-1"></a>newstr <span class="op">=</span> oldstr.replace(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p>If you want to remove the central character:</p>
<div class="sourceCode" id="cb781"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb781-1"><a href="#cb781-1"></a>midlen <span class="op">=</span> <span class="bu">len</span>(oldstr)<span class="op">/</span><span class="dv">2</span>   <span class="co"># //2 in python 3</span></span>
<span id="cb781-2"><a href="#cb781-2"></a>newstr <span class="op">=</span> oldstr[:midlen] <span class="op">+</span> oldstr[midlen<span class="op">+</span><span class="dv">1</span>:]</span></code></pre></div>
<p>You asked if strings end with a special character. No, you are thinking like a C programmer. In Python, strings are stored with their length, so any byte value, including <code>\0</code>, can appear in a string.</p>
</section>
<section id="answer-2-score-64" class="level4">
<h4>Answer 2 (score 64)</h4>
<p>This is probably the best way:</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb782-1"><a href="#cb782-1"></a>original <span class="op">=</span> <span class="st">&quot;EXAMPLE&quot;</span></span>
<span id="cb782-2"><a href="#cb782-2"></a>removed <span class="op">=</span> original.replace(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p>Don’t worry about shifting characters and such. Most Python code takes place on a much higher level of abstraction.</p>
</section>
<section id="answer-3-score-57" class="level4">
<h4>Answer 3 (score 57)</h4>
<p>To replace a specific position:</p>
<div class="sourceCode" id="cb783"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb783-1"><a href="#cb783-1"></a>s <span class="op">=</span> s[:pos] <span class="op">+</span> s[(pos<span class="op">+</span><span class="dv">1</span>):]</span></code></pre></div>
<p>To replace a specific character:</p>
<div class="sourceCode" id="cb784"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb784-1"><a href="#cb784-1"></a>s <span class="op">=</span> s.replace(<span class="st">&#39;M&#39;</span>,<span class="st">&#39;&#39;</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-comment-out-a-block-of-code-in-python-score-1371641-in-2018" class="level3">
<h3>93: How to comment out a block of code in Python (score <a href="https://stackoverflow.com/q/675442.html">1371641</a> in 2018)</h3>
<section id="question-91" class="level4">
<h4>Question</h4>
<p>Is there a mechanism to comment out large blocks of Python code?</p>
<p>Right now, the only ways I can see of commenting out code are to either start every line with a <code>#</code>, or to enclose the code in triple quotes: <code>"""</code>.</p>
<p>The problem with these is that inserting <code>#</code> before every line is cumbersome and <code>"""</code> makes the string I want to use as a comment show up in generated documentation.</p>
<p>After reading all comments, the answer seems to be “No”.</p>
</section>
<section id="answer-accepted-score-414" class="level4">
<h4>Answer accepted (score 414)</h4>
<p>Python does not have such a mechanism. Prepend a <code>#</code> to each line to block comment. For more information see <a href="http://www.python.org/dev/peps/pep-0008/" rel="noreferrer">PEP 8</a>. Most Python IDEs support a mechanism to do the block-commenting-with-pound-signs automatically for you. For example, in IDLE on my machine, it’s <kbd>Alt</kbd>+<kbd>3</kbd> and <kbd>Alt</kbd>+<kbd>4</kbd>.</p>
<p><strong>Don’t use triple-quotes;</strong> as you discovered, this is for documentation strings not block comments, although it has a similar effect. If you’re just commenting things out temporarily, this is fine as a temporary measure.</p>
</section>
<section id="answer-2-score-92" class="level4">
<h4>Answer 2 (score 92)</h4>
<p>The only cure I know for this is a good editor. Sorry.</p>
</section>
<section id="answer-3-score-75" class="level4">
<h4>Answer 3 (score 75)</h4>
<p>Hide the triple quotes in a context that won’t be mistaken for a docstring, eg:</p>
<div class="sourceCode" id="cb785"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb785-1"><a href="#cb785-1"></a><span class="co">&#39;&#39;&#39;</span></span>
<span id="cb785-2"><a href="#cb785-2"></a><span class="co">...statements...</span></span>
<span id="cb785-3"><a href="#cb785-3"></a><span class="co">&#39;&#39;&#39;</span> <span class="kw">and</span> <span class="va">None</span></span></code></pre></div>
<p>or:</p>
<div class="sourceCode" id="cb786"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb786-1"><a href="#cb786-1"></a><span class="cf">if</span> <span class="va">False</span>: <span class="st">&#39;&#39;&#39;</span></span>
<span id="cb786-2"><a href="#cb786-2"></a><span class="st">...statements...</span></span>
<span id="cb786-3"><a href="#cb786-3"></a><span class="st">&#39;&#39;&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="terminating-a-python-script-score-1362795-in-2016" class="level3">
<h3>94: Terminating a Python script (score <a href="https://stackoverflow.com/q/73663.html">1362795</a> in 2016)</h3>
<section id="question-92" class="level4">
<h4>Question</h4>
<p>I am aware of the <code>die()</code> command in PHP which stops a script early.</p>
<p>How can I do this in Python?</p>
</section>
<section id="answer-accepted-score-1281-1" class="level4">
<h4>Answer accepted (score 1281)</h4>
<div class="sourceCode" id="cb787"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb787-1"><a href="#cb787-1"></a><span class="im">import</span> sys</span>
<span id="cb787-2"><a href="#cb787-2"></a>sys.exit()</span></code></pre></div>
<p>details from the <a href="https://docs.python.org/2/library/constants.html#exit" rel="noreferrer" title="exit"><code>sys</code> module documentation</a>:</p>
<blockquote>
<p><code>sys.&lt;strong&gt;exit&lt;/strong&gt;([&lt;em&gt;arg&lt;/em&gt;])</code></p>
<blockquote>
<p>
Exit from Python. This is implemented by raising the <a href="https://docs.python.org/2/library/exceptions.html#SystemExit" rel="noreferrer" title="SystemExit"><code>SystemExit</code></a> exception, so cleanup actions specified by finally clauses of <a href="https://docs.python.org/2/reference/compound_stmts.html#try" rel="noreferrer" title="try"><code>try</code></a> statements are honored, and it is possible to intercept the exit attempt at an outer level.
</p>
<p>
The optional argument <em>arg</em> can be an integer giving the exit status (defaulting to zero), or another type of object. If it is an integer, zero is considered “successful termination” and any nonzero value is considered “abnormal termination” by shells and the like. Most systems require it to be in the range 0-127, and produce undefined results otherwise. Some systems have a convention for assigning specific meanings to specific exit codes, but these are generally underdeveloped; Unix programs generally use 2 for command line syntax errors and 1 for all other kind of errors. If another type of object is passed, None is equivalent to passing zero, and any other object is printed to <a href="https://docs.python.org/2/library/sys.html#sys.stderr" rel="noreferrer" title="sys.stderr"><code>stderr</code></a> and results in an exit code of 1. In particular, <code>sys.exit("some error message")</code> is a quick way to exit a program when an error occurs.
</p>
<p>
Since <a href="https://docs.python.org/2/library/constants.html#exit" rel="noreferrer" title="exit"><code>exit()</code></a> ultimately “only” raises an exception, it will only exit the process when called from the main thread, and the exception is not intercepted.
</p>
</blockquote>
</blockquote>
<p>Note that this is the ‘nice’ way to exit. @<a href="https://stackoverflow.com/questions/73663/terminating-a-python-script#76374">glyphtwistedmatrix</a> below points out that if you want a ‘hard exit’, you can use os._exit(<em>errorcode</em>), though it’s likely os-specific to some extent (it might not take an errorcode under windows, for example), and it definitely is less friendly since it doesn’t let the interpreter do any cleanup before the process dies.</p>
</section>
<section id="answer-2-score-292" class="level4">
<h4>Answer 2 (score 292)</h4>
<p>A simple way to terminate a Python script early is to use the built-in function quit(). There is no need to import any library, and it is efficient and simple.</p>
<p>Example:</p>
<div class="sourceCode" id="cb788"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb788-1"><a href="#cb788-1"></a><span class="co">#do stuff</span></span>
<span id="cb788-2"><a href="#cb788-2"></a><span class="cf">if</span> this <span class="op">==</span> that:</span>
<span id="cb788-3"><a href="#cb788-3"></a>  quit()</span></code></pre></div>
</section>
<section id="answer-3-score-113" class="level4">
<h4>Answer 3 (score 113)</h4>
<p>Another way is:</p>
<div class="sourceCode" id="cb789"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb789-1"><a href="#cb789-1"></a><span class="cf">raise</span> <span class="pp">SystemExit</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-import-other-python-files-score-1351747-in-2018" class="level3">
<h3>95: How to import other Python files? (score <a href="https://stackoverflow.com/q/2349991.html">1351747</a> in 2018)</h3>
<section id="question-93" class="level4">
<h4>Question</h4>
<p>How do I import other files in Python?</p>
<ol>
<li>
How exactly can I import a specific python file like <code>import file.py</code>?
</li>
<li>
How can I import a folder instead of a specific file?
</li>
<li>
I want to load a Python file dynamically at runtime, based on user input.
</li>
<li>
I want to know how to load just one specific part from the file.
</li>
</ol>
<p>For example, in <code>main.py</code> I have:</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb790-1"><a href="#cb790-1"></a><span class="im">from</span> extra <span class="im">import</span> <span class="op">*</span> </span></code></pre></div>
<p>Although this gives me all the definitions in <code>extra.py</code>, when maybe all I want is a single definition:</p>
<div class="sourceCode" id="cb791"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb791-1"><a href="#cb791-1"></a><span class="kw">def</span> gap():</span>
<span id="cb791-2"><a href="#cb791-2"></a>    <span class="bu">print</span></span>
<span id="cb791-3"><a href="#cb791-3"></a>    <span class="bu">print</span></span></code></pre></div>
<p>What do I add to the <code>import</code> statement to just get <code>gap</code> from <code>extra.py</code>?</p>
</section>
<section id="answer-accepted-score-382" class="level4">
<h4>Answer accepted (score 382)</h4>
<p>
<code>importlib</code> is recent addition in Python to programmatically import a module. It just a wrapper around <code>__import__</code> See <a href="https://docs.python.org/3/library/importlib.html#module-importlib" rel="noreferrer">https://docs.python.org/3/library/importlib.html#module-importlib</a>
</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb792-1"><a href="#cb792-1"></a><span class="im">import</span> importlib</span>
<span id="cb792-2"><a href="#cb792-2"></a></span>
<span id="cb792-3"><a href="#cb792-3"></a>moduleName <span class="op">=</span> <span class="bu">input</span>(<span class="st">&#39;Enter module name:&#39;</span>)</span>
<span id="cb792-4"><a href="#cb792-4"></a>importlib.import_module(moduleName)</span></code></pre></div>
<hr>
<p><strong>Update: Answer below is outdated</strong>. Use the more recent alternative above.</p>
<ol>
<li>
<p>
Just <code>import file</code> without the ‘.py’ extension.
</p>
</li>
<li>
<p>
You can mark a folder as a package, by adding an empty file named <code>__init__.py</code>.
</p>
</li>
<li>
<p>
You can use the <code>__import__</code> function. It takes the module name as a string. (Again: module name without the ‘.py’ extension.)
</p>
<div class="sourceCode" id="cb793"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb793-1"><a href="#cb793-1"></a>pmName <span class="op">=</span> <span class="bu">input</span>(<span class="st">&#39;Enter module name:&#39;</span>)</span>
<span id="cb793-2"><a href="#cb793-2"></a>pm <span class="op">=</span> <span class="bu">__import__</span>(pmName)</span>
<span id="cb793-3"><a href="#cb793-3"></a><span class="bu">print</span>(<span class="bu">dir</span>(pm))</span></code></pre></div>
Type <code>help(__import__)</code> for more details.
</li>
</ol>
</section>
<section id="answer-2-score-914" class="level4">
<h4>Answer 2 (score 914)</h4>
<h5>
There are many ways to import a python file, all with their pros and cons.
</h2>
<p>Don’t just hastily pick the first import strategy that works for you or else you’ll have to rewrite the codebase later on when you find it doesn’t meet your needs.</p>
<p>I’ll start out explaining the easiest example #1, then I’ll move toward the most professional and robust example #7</p>
<p><strong>Example 1, Import a python module with python interpreter:</strong></p>
<ol>
<li>
<p>
Put this in /home/el/foo/fox.py:
</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb794-1"><a href="#cb794-1"></a><span class="kw">def</span> what_does_the_fox_say():</span>
<span id="cb794-2"><a href="#cb794-2"></a>  <span class="bu">print</span>(<span class="st">&quot;vixens cry&quot;</span>)</span>
<span id="cb794-3"><a href="#cb794-3"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb794-4"><a href="#cb794-4"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Get into the python interpreter: <span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb794-5"><a href="#cb794-5"></a></span>
<span id="cb794-6"><a href="#cb794-6"></a>```python</span>
<span id="cb794-7"><a href="#cb794-7"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo$ python</span>
<span id="cb794-8"><a href="#cb794-8"></a>Python <span class="dv">2</span>.<span class="fl">7.3</span> (default, Sep <span class="dv">26</span> <span class="dv">2013</span>, <span class="dv">20</span>:<span class="dv">03</span>:<span class="dv">06</span>) </span>
<span id="cb794-9"><a href="#cb794-9"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> fox</span>
<span id="cb794-10"><a href="#cb794-10"></a><span class="op">&gt;&gt;&gt;</span> fox.what_does_the_fox_say()</span>
<span id="cb794-11"><a href="#cb794-11"></a>vixens cry</span>
<span id="cb794-12"><a href="#cb794-12"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre></div>
You imported fox through the python interpreter, invoked the python function <code>what_does_the_fox_say()</code> from within fox.py.
</li>
</ol>
<p><strong>Example 2, Use <code>execfile</code> or (<a href="https://stackoverflow.com/q/6357361/55075"><code>exec</code> in Python 3</a>) in a script to execute the other python file in place:</strong></p>
<ol>
<li>
<p>
Put this in /home/el/foo2/mylib.py:
</p>
<div class="sourceCode" id="cb795"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb795-1"><a href="#cb795-1"></a><span class="kw">def</span> moobar():</span>
<span id="cb795-2"><a href="#cb795-2"></a>  <span class="bu">print</span>(<span class="st">&quot;hi&quot;</span>)</span>
<span id="cb795-3"><a href="#cb795-3"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb795-4"><a href="#cb795-4"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Put this <span class="kw">in</span> <span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo2<span class="op">/</span>main.py:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb795-5"><a href="#cb795-5"></a></span>
<span id="cb795-6"><a href="#cb795-6"></a>```python</span>
<span id="cb795-7"><a href="#cb795-7"></a><span class="bu">execfile</span>(<span class="st">&quot;/home/el/foo2/mylib.py&quot;</span>)</span>
<span id="cb795-8"><a href="#cb795-8"></a>moobar()</span>
<span id="cb795-9"><a href="#cb795-9"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb795-10"><a href="#cb795-10"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>run the <span class="bu">file</span>:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb795-11"><a href="#cb795-11"></a></span>
<span id="cb795-12"><a href="#cb795-12"></a>```python</span>
<span id="cb795-13"><a href="#cb795-13"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo$ python main.py</span>
<span id="cb795-14"><a href="#cb795-14"></a>hi</span></code></pre></div>
The function moobar was imported from mylib.py and made available in main.py
</li>
</ol>
<p><strong>Example 3, Use from … import … functionality:</strong></p>
<ol>
<li>
<p>
Put this in /home/el/foo3/chekov.py:
</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb796-1"><a href="#cb796-1"></a><span class="kw">def</span> question():</span>
<span id="cb796-2"><a href="#cb796-2"></a>  <span class="bu">print</span> <span class="st">&quot;where are the nuclear wessels?&quot;</span></span>
<span id="cb796-3"><a href="#cb796-3"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb796-4"><a href="#cb796-4"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Put this <span class="kw">in</span> <span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo3<span class="op">/</span>main.py:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb796-5"><a href="#cb796-5"></a></span>
<span id="cb796-6"><a href="#cb796-6"></a>```python</span>
<span id="cb796-7"><a href="#cb796-7"></a><span class="im">from</span> chekov <span class="im">import</span> question</span>
<span id="cb796-8"><a href="#cb796-8"></a>question()</span>
<span id="cb796-9"><a href="#cb796-9"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb796-10"><a href="#cb796-10"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Run it like this:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb796-11"><a href="#cb796-11"></a></span>
<span id="cb796-12"><a href="#cb796-12"></a>```python</span>
<span id="cb796-13"><a href="#cb796-13"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo3$ python main.py </span>
<span id="cb796-14"><a href="#cb796-14"></a>where are the nuclear wessels?</span></code></pre></div>
If you defined other functions in chekov.py, they would not be available unless you <code>import *</code>
</li>
</ol>
<p><strong>Example 4, Import riaa.py if it’s in a different file location from where it is imported</strong></p>
<ol>
<li>
<p>
Put this in /home/el/foo4/stuff/riaa.py:
</p>
<div class="sourceCode" id="cb797"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb797-1"><a href="#cb797-1"></a><span class="kw">def</span> watchout():</span>
<span id="cb797-2"><a href="#cb797-2"></a>  <span class="bu">print</span> <span class="st">&quot;computers are transforming into a noose and a yoke for humans&quot;</span></span>
<span id="cb797-3"><a href="#cb797-3"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb797-4"><a href="#cb797-4"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Put this <span class="kw">in</span> <span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo4<span class="op">/</span>main.py:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb797-5"><a href="#cb797-5"></a></span>
<span id="cb797-6"><a href="#cb797-6"></a>```python</span>
<span id="cb797-7"><a href="#cb797-7"></a><span class="im">import</span> sys </span>
<span id="cb797-8"><a href="#cb797-8"></a><span class="im">import</span> os</span>
<span id="cb797-9"><a href="#cb797-9"></a>sys.path.append(os.path.abspath(<span class="st">&quot;/home/el/foo4/stuff&quot;</span>))</span>
<span id="cb797-10"><a href="#cb797-10"></a><span class="im">from</span> riaa <span class="im">import</span> <span class="op">*</span></span>
<span id="cb797-11"><a href="#cb797-11"></a>watchout()</span>
<span id="cb797-12"><a href="#cb797-12"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb797-13"><a href="#cb797-13"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Run it:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb797-14"><a href="#cb797-14"></a></span>
<span id="cb797-15"><a href="#cb797-15"></a>```python</span>
<span id="cb797-16"><a href="#cb797-16"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo4$ python main.py </span>
<span id="cb797-17"><a href="#cb797-17"></a>computers are transforming into a noose <span class="kw">and</span> a yoke <span class="cf">for</span> humans</span></code></pre></div>
That imports everything in the foreign file from a different directory.
</li>
</ol>
<p><strong>Example 5, use <code>os.system("python yourfile.py")</code></strong></p>
<div class="sourceCode" id="cb798"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb798-1"><a href="#cb798-1"></a><span class="im">import</span> os</span>
<span id="cb798-2"><a href="#cb798-2"></a>os.system(<span class="st">&quot;python yourfile.py&quot;</span>)</span></code></pre></div>
<p><strong>Example 6, import your file via piggybacking the python startuphook:</strong></p>
<p><strong>Update:</strong> This example used to work for both python2 and 3, but now only works for python2. python3 got rid of this user startuphook feature set because it was abused by low-skill python library writers, using it to impolitely inject their code into the global namespace, before all user-defined programs. If you want this to work for python3, you’ll have to get more creative. If I tell you how to do it, python developers will disable that feature set as well, so you’re on your own.</p>
<p>See: <a href="https://docs.python.org/2/library/user.html" rel="noreferrer">https://docs.python.org/2/library/user.html</a></p>
<p>Put this code into your home directory in <code>~/.pythonrc.py</code></p>
<div class="sourceCode" id="cb799"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb799-1"><a href="#cb799-1"></a><span class="kw">class</span> secretclass:</span>
<span id="cb799-2"><a href="#cb799-2"></a>    <span class="kw">def</span> secretmessage(cls, myarg):</span>
<span id="cb799-3"><a href="#cb799-3"></a>        <span class="cf">return</span> myarg <span class="op">+</span> <span class="st">&quot; is if.. up in the sky, the sky&quot;</span></span>
<span id="cb799-4"><a href="#cb799-4"></a>    secretmessage <span class="op">=</span> <span class="bu">classmethod</span>( secretmessage )</span>
<span id="cb799-5"><a href="#cb799-5"></a></span>
<span id="cb799-6"><a href="#cb799-6"></a>    <span class="kw">def</span> skycake(cls):</span>
<span id="cb799-7"><a href="#cb799-7"></a>        <span class="cf">return</span> <span class="st">&quot;cookie and sky pie people can&#39;t go up and &quot;</span></span>
<span id="cb799-8"><a href="#cb799-8"></a>    skycake <span class="op">=</span> <span class="bu">classmethod</span>( skycake )</span></code></pre></div>
<p>Put this code into your main.py (can be anywhere):</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb800-1"><a href="#cb800-1"></a><span class="im">import</span> user</span>
<span id="cb800-2"><a href="#cb800-2"></a>msg <span class="op">=</span> <span class="st">&quot;The only way skycake tates good&quot;</span> </span>
<span id="cb800-3"><a href="#cb800-3"></a>msg <span class="op">=</span> user.secretclass.secretmessage(msg)</span>
<span id="cb800-4"><a href="#cb800-4"></a>msg <span class="op">+=</span> user.secretclass.skycake()</span>
<span id="cb800-5"><a href="#cb800-5"></a><span class="bu">print</span>(msg <span class="op">+</span> <span class="st">&quot; have the sky pie! SKYCAKE!&quot;</span>)</span></code></pre></div>
<p>Run it, you should get this:</p>
<div class="sourceCode" id="cb801"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb801-1"><a href="#cb801-1"></a>$ python main.py</span>
<span id="cb801-2"><a href="#cb801-2"></a>The only way skycake tates good <span class="kw">is</span> <span class="cf">if</span>.. up <span class="kw">in</span> the sky, </span>
<span id="cb801-3"><a href="#cb801-3"></a>the skycookie <span class="kw">and</span> sky pie people can<span class="st">&#39;t go up and  have the sky pie! </span></span>
<span id="cb801-4"><a href="#cb801-4"></a><span class="st">SKYCAKE!</span></span></code></pre></div>
<p>If you get an error here: <code>ModuleNotFoundError: No module named 'user'</code> then it means you’re using python3, startuphooks are disabled there by default.</p>
<p>Credit for this jist goes to: <a href="https://github.com/docwhat/homedir-examples/blob/master/python-commandline/.pythonrc.py" rel="noreferrer">https://github.com/docwhat/homedir-examples/blob/master/python-commandline/.pythonrc.py</a> Send along your up-boats.</p>
<p><strong>Example 7, Most Robust: Import files in python with the bare import command:</strong></p>
<ol>
<li>
Make a new directory <code>/home/el/foo5/</code>
</li>
<li>
Make a new directory <code>/home/el/foo5/herp</code>
</li>
<li>
<p>
Make an empty file named <code>__init__.py</code> under herp:
</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb802-1"><a href="#cb802-1"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>herp$ touch <span class="fu">__init__</span>.py</span>
<span id="cb802-2"><a href="#cb802-2"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>herp$ ls</span>
<span id="cb802-3"><a href="#cb802-3"></a><span class="fu">__init__</span>.py</span>
<span id="cb802-4"><a href="#cb802-4"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb802-5"><a href="#cb802-5"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Make a new directory <span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>herp<span class="op">/</span>derp<span class="op">&lt;/</span>p<span class="op">&gt;&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb802-6"><a href="#cb802-6"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Under derp, make another `__init__.py` <span class="bu">file</span>:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb802-7"><a href="#cb802-7"></a></span>
<span id="cb802-8"><a href="#cb802-8"></a>```python</span>
<span id="cb802-9"><a href="#cb802-9"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>herp<span class="op">/</span>derp$ touch <span class="fu">__init__</span>.py</span>
<span id="cb802-10"><a href="#cb802-10"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>herp<span class="op">/</span>derp$ ls</span>
<span id="cb802-11"><a href="#cb802-11"></a><span class="fu">__init__</span>.py</span>
<span id="cb802-12"><a href="#cb802-12"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb802-13"><a href="#cb802-13"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Under <span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>herp<span class="op">/</span>derp make a new <span class="bu">file</span> called `yolo.py` Put this <span class="kw">in</span> there:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb802-14"><a href="#cb802-14"></a></span>
<span id="cb802-15"><a href="#cb802-15"></a>```python</span>
<span id="cb802-16"><a href="#cb802-16"></a><span class="kw">def</span> skycake():</span>
<span id="cb802-17"><a href="#cb802-17"></a>  <span class="bu">print</span> <span class="st">&quot;SkyCake evolves to stay just beyond the cognitive reach of &quot;</span> <span class="op">+</span></span>
<span id="cb802-18"><a href="#cb802-18"></a>  <span class="co">&quot;the bulk of men. SKYCAKE!!&quot;</span></span>
<span id="cb802-19"><a href="#cb802-19"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb802-20"><a href="#cb802-20"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>The moment of truth, Make the new <span class="bu">file</span> `<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5<span class="op">/</span>main.py`, put this <span class="kw">in</span> there<span class="op">;&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb802-21"><a href="#cb802-21"></a></span>
<span id="cb802-22"><a href="#cb802-22"></a>```python</span>
<span id="cb802-23"><a href="#cb802-23"></a><span class="im">from</span> herp.derp.yolo <span class="im">import</span> skycake</span>
<span id="cb802-24"><a href="#cb802-24"></a>skycake()</span>
<span id="cb802-25"><a href="#cb802-25"></a>```<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb802-26"><a href="#cb802-26"></a><span class="op">&lt;</span>li<span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Run it:<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb802-27"><a href="#cb802-27"></a></span>
<span id="cb802-28"><a href="#cb802-28"></a>```python</span>
<span id="cb802-29"><a href="#cb802-29"></a>el<span class="op">@</span>apollo:<span class="op">/</span>home<span class="op">/</span>el<span class="op">/</span>foo5$ python main.py</span>
<span id="cb802-30"><a href="#cb802-30"></a>SkyCake evolves to stay just beyond the cognitive reach of the bulk </span>
<span id="cb802-31"><a href="#cb802-31"></a>of men. SKYCAKE<span class="op">!!</span></span></code></pre></div>
The empty <code>__init__.py</code> file communicates to the python interpreter that the developer intends this directory to be an importable package.
</li>
</ol>
<p>If you want to see my post on how to include ALL .py files under a directory see here: <a href="https://stackoverflow.com/a/20753073/445131">https://stackoverflow.com/a/20753073/445131</a></p>
</section>
<section id="answer-3-score-55" class="level4">
<h4>Answer 3 (score 55)</h4>
<p>To import a specific Python file at ‘runtime’ with a known name:</p>
<div class="sourceCode" id="cb803"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb803-1"><a href="#cb803-1"></a><span class="im">import</span> os</span>
<span id="cb803-2"><a href="#cb803-2"></a><span class="im">import</span> sys</span></code></pre></div>
<p>…</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb804-1"><a href="#cb804-1"></a>scriptpath <span class="op">=</span> <span class="st">&quot;../Test/MyModule.py&quot;</span></span>
<span id="cb804-2"><a href="#cb804-2"></a></span>
<span id="cb804-3"><a href="#cb804-3"></a><span class="co"># Add the directory containing your module to the Python path (wants absolute paths)</span></span>
<span id="cb804-4"><a href="#cb804-4"></a>sys.path.append(os.path.abspath(scriptpath))</span>
<span id="cb804-5"><a href="#cb804-5"></a></span>
<span id="cb804-6"><a href="#cb804-6"></a><span class="co"># Do the import</span></span>
<span id="cb804-7"><a href="#cb804-7"></a><span class="im">import</span> MyModule</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-reverse-a-list-in-python-score-1346403-in-2018" class="level3">
<h3>96: How can I reverse a list in Python? (score <a href="https://stackoverflow.com/q/3940128.html">1346403</a> in 2018)</h3>
<section id="question-94" class="level4">
<h4>Question</h4>
<p>How can I do the following in Python?</p>
<div class="sourceCode" id="cb805"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb805-1"><a href="#cb805-1"></a>array <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">40</span>]</span>
<span id="cb805-2"><a href="#cb805-2"></a><span class="cf">for</span> (i <span class="op">=</span> array.length() <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--</span>)</span></code></pre></div>
<p>I need to have the elements of an array, but from the end to the beginning.</p>
</section>
<section id="answer-accepted-score-1203" class="level4">
<h4>Answer accepted (score 1203)</h4>
<p>You can make use of the <a href="https://www.python.org/dev/peps/pep-0322/" rel="noreferrer"><code>reversed</code></a> function for this as:</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb806-1"><a href="#cb806-1"></a><span class="op">&gt;&gt;&gt;</span> array<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">40</span>]</span>
<span id="cb806-2"><a href="#cb806-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(array):</span>
<span id="cb806-3"><a href="#cb806-3"></a>...     <span class="bu">print</span>(i)</span></code></pre></div>
<p>Note that <code>reversed(...)</code> does not return a list. You can get a reversed list using <code>list(reversed(array))</code>.</p>
</section>
<section id="answer-2-score-1175" class="level4">
<h4>Answer 2 (score 1175)</h4>
<div class="sourceCode" id="cb807"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb807-1"><a href="#cb807-1"></a><span class="op">&gt;&gt;&gt;</span> L <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">40</span>]</span>
<span id="cb807-2"><a href="#cb807-2"></a><span class="op">&gt;&gt;&gt;</span> L[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb807-3"><a href="#cb807-3"></a>[<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">0</span>]</span></code></pre></div>
<p>Extended slice syntax is explained well in the Python <a href="http://docs.python.org/release/2.3.5/whatsnew/section-slices.html" rel="noreferrer">What’s new Entry for release <code>2.3.5</code></a></p>
<p>By special request in a comment <a href="http://docs.python.org/library/functions.html#slice" rel="noreferrer">this is the most current slice documentation</a>.</p>
</section>
<section id="answer-3-score-346" class="level4">
<h4>Answer 3 (score 346)</h4>
<div class="sourceCode" id="cb808"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb808-1"><a href="#cb808-1"></a><span class="op">&gt;&gt;&gt;</span> L <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">40</span>]</span>
<span id="cb808-2"><a href="#cb808-2"></a><span class="op">&gt;&gt;&gt;</span> L.reverse()</span>
<span id="cb808-3"><a href="#cb808-3"></a><span class="op">&gt;&gt;&gt;</span> L</span>
<span id="cb808-4"><a href="#cb808-4"></a>[<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">0</span>]</span></code></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb809"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb809-1"><a href="#cb809-1"></a><span class="op">&gt;&gt;&gt;</span> L[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb809-2"><a href="#cb809-2"></a>[<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">0</span>]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-specify-new-lines-on-python-when-writing-on-files-score-1343781-in-2019" class="level3">
<h3>97: How do I specify new lines on Python, when writing on files? (score <a href="https://stackoverflow.com/q/11497376.html">1343781</a> in 2019)</h3>
<section id="question-95" class="level4">
<h4>Question</h4>
<p>In comparison to Java (in a String), you would do something like <code>"First Line\r\nSecond Line"</code>.</p>
<p>So how would you do that in Python, for purposes of writing multiple lines on a regular file?</p>
</section>
<section id="answer-accepted-score-312" class="level4">
<h4>Answer accepted (score 312)</h4>
<p>It depends on how correct you want to be. <code>\n</code> will usually do the job. If you really want to get it right, you look up the newline character in the <a href="http://docs.python.org/library/os.html" rel="noreferrer"><code>os</code> package</a>. (It’s actually called <code>linesep</code>.)</p>
<p>Note: when writing to files using the Python API, do not use the <code>os.linesep</code>. Just use <code>\n</code>; Python automatically translates that to the proper newline character for your platform.</p>
</section>
<section id="answer-2-score-43" class="level4">
<h4>Answer 2 (score 43)</h4>
<p>The new line character is <code>\n</code>. It is used inside a string.</p>
<p>Example:</p>
<div class="sourceCode" id="cb810"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb810-1"><a href="#cb810-1"></a>    <span class="bu">print</span> <span class="st">&#39;First line </span><span class="ch">\n</span><span class="st"> Second line&#39;</span> </span></code></pre></div>
<p>where <code>\n</code> is the newline character.</p>
<p>This would yield the result:</p>
<div class="sourceCode" id="cb811"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb811-1"><a href="#cb811-1"></a>First line</span>
<span id="cb811-2"><a href="#cb811-2"></a> Second line</span></code></pre></div>
</section>
<section id="answer-3-score-18-1" class="level4">
<h4>Answer 3 (score 18)</h4>
<p>You can either write in the new lines separately or within a single string, which is easier.</p>
<h5>
Example 1
</h1>
<h5>
Input
</h2>
<div class="sourceCode" id="cb812"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb812-1"><a href="#cb812-1"></a>line1 <span class="op">=</span> <span class="st">&quot;hello how are you&quot;</span></span>
<span id="cb812-2"><a href="#cb812-2"></a>line2 <span class="op">=</span> <span class="st">&quot;I am testing the new line escape sequence&quot;</span></span>
<span id="cb812-3"><a href="#cb812-3"></a>line3 <span class="op">=</span> <span class="st">&quot;this seems to work&quot;</span></span></code></pre></div>
<p>You can write the ‘’ separately:</p>
<div class="sourceCode" id="cb813"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb813-1"><a href="#cb813-1"></a><span class="bu">file</span>.write(line1)</span>
<span id="cb813-2"><a href="#cb813-2"></a><span class="bu">file</span>.write(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb813-3"><a href="#cb813-3"></a><span class="bu">file</span>.write(line2)</span>
<span id="cb813-4"><a href="#cb813-4"></a><span class="bu">file</span>.write(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb813-5"><a href="#cb813-5"></a><span class="bu">file</span>.write(line3)</span>
<span id="cb813-6"><a href="#cb813-6"></a><span class="bu">file</span>.write(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<h5>
Output
</h2>
<div class="sourceCode" id="cb814"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb814-1"><a href="#cb814-1"></a>hello how are you</span>
<span id="cb814-2"><a href="#cb814-2"></a>I am testing the new line escape sequence</span>
<span id="cb814-3"><a href="#cb814-3"></a>this seems to work</span></code></pre></div>
<h5>
Example 2
</h1>
<h5>
Input
</h2>
<p>As others have pointed out in the previous answers, place the at the relevant points in your string:</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb815-1"><a href="#cb815-1"></a>line <span class="op">=</span> <span class="st">&quot;hello how are you</span><span class="ch">\n</span><span class="st">I am testing the new line escape sequence</span><span class="ch">\n</span><span class="st">this seems to work&quot;</span></span>
<span id="cb815-2"><a href="#cb815-2"></a></span>
<span id="cb815-3"><a href="#cb815-3"></a><span class="bu">file</span>.write(line)</span></code></pre></div>
<h5>
Output
</h2>
<div class="sourceCode" id="cb816"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb816-1"><a href="#cb816-1"></a>hello how are you</span>
<span id="cb816-2"><a href="#cb816-2"></a>I am testing the new line escape sequence</span>
<span id="cb816-3"><a href="#cb816-3"></a>this seems to work</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="removing-duplicates-in-lists-score-1337045-in-2019" class="level3">
<h3>98: Removing duplicates in lists (score <a href="https://stackoverflow.com/q/7961363.html">1337045</a> in 2019)</h3>
<section id="question-96" class="level4">
<h4>Question</h4>
<p>Pretty much I need to write a program to check if a list has any duplicates and if it does it removes them and returns a new list with the items that weren’t duplicated/removed. This is what I have but to be honest I do not know what to do.</p>
<div class="sourceCode" id="cb817"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb817-1"><a href="#cb817-1"></a><span class="kw">def</span> remove_duplicates():</span>
<span id="cb817-2"><a href="#cb817-2"></a>    t <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span>
<span id="cb817-3"><a href="#cb817-3"></a>    t2 <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span>
<span id="cb817-4"><a href="#cb817-4"></a>    <span class="cf">for</span> t <span class="kw">in</span> t2:</span>
<span id="cb817-5"><a href="#cb817-5"></a>        t.append(t.remove())</span>
<span id="cb817-6"><a href="#cb817-6"></a>    <span class="cf">return</span> t</span></code></pre></div>
</section>
<section id="answer-accepted-score-1446" class="level4">
<h4>Answer accepted (score 1446)</h4>
<p>The common approach to get a unique collection of items is to use a <a href="http://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset" rel="noreferrer"><code>set</code></a>. Sets are <em>unordered</em> collections of <em>distinct</em> objects. To create a set from any iterable, you can simply pass it to the built-in <a href="http://docs.python.org/3/library/functions.html#func-set" rel="noreferrer"><code>set()</code></a> function. If you later need a real list again, you can similarly pass the set to the <a href="http://docs.python.org/3/library/functions.html#func-list" rel="noreferrer"><code>list()</code></a> function.</p>
<p>The following example should cover whatever you are trying to do:</p>
<div class="sourceCode" id="cb818"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb818-1"><a href="#cb818-1"></a><span class="op">&gt;&gt;&gt;</span> t <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb818-2"><a href="#cb818-2"></a><span class="op">&gt;&gt;&gt;</span> t</span>
<span id="cb818-3"><a href="#cb818-3"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb818-4"><a href="#cb818-4"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">set</span>(t))</span>
<span id="cb818-5"><a href="#cb818-5"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb818-6"><a href="#cb818-6"></a><span class="op">&gt;&gt;&gt;</span> s <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb818-7"><a href="#cb818-7"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">set</span>(t) <span class="op">-</span> <span class="bu">set</span>(s))</span>
<span id="cb818-8"><a href="#cb818-8"></a>[<span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>]</span></code></pre></div>
<p>As you can see from the example result, <em>the original order is not maintained</em>. As mentioned above, sets themselves are unordered collections, so the order is lost. When converting a set back to a list, an arbitrary order is created.</p>
<h5>
Maintaining order
</h3>
<p>If order is important to you, then you will have to use a different mechanism. A very common solution for this is to rely on <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="noreferrer"><code>OrderedDict</code></a> to keep the order of keys during insertion:</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb819-1"><a href="#cb819-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> collections <span class="im">import</span> OrderedDict</span>
<span id="cb819-2"><a href="#cb819-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(OrderedDict.fromkeys(t))</span>
<span id="cb819-3"><a href="#cb819-3"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span></code></pre></div>
<p><a href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" rel="noreferrer">Starting with Python 3.7</a>, the built-in dictionary is guaranteed to maintain the insertion order as well, so you can also use that directly if you are on Python 3.7 or later (or CPython 3.6):</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb820-1"><a href="#cb820-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">dict</span>.fromkeys(t))</span>
<span id="cb820-2"><a href="#cb820-2"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span></code></pre></div>
<p>Note that this has the overhead of creating a dictionary first, and then creating a list from it. If you don’t actually need to preserve the order, you’re better off using a set. Check out <a href="https://stackoverflow.com/q/480214/216074">this question</a> for more details and alternative ways to preserve the order when removing duplicates.</p>
<hr>
<p>Finally note that both the <code>set</code> as well as the <code>OrderedDict</code>/<code>dict</code> solutions require your items to be <em>hashable</em>. This usually means that they have to be immutable. If you have to deal with items that are not hashable (e.g. list objects), then you will have to use a slow approach in which you will basically have to compare every item with every other item in a nested loop.</p>
</section>
<section id="answer-2-score-383" class="level4">
<h4>Answer 2 (score 383)</h4>
<p><strong>In Python 2.7</strong>, the new way of removing duplicates from an iterable while keeping it in the original order is:</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb821-1"><a href="#cb821-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> collections <span class="im">import</span> OrderedDict</span>
<span id="cb821-2"><a href="#cb821-2"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(OrderedDict.fromkeys(<span class="st">&#39;abracadabra&#39;</span>))</span>
<span id="cb821-3"><a href="#cb821-3"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;r&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span></code></pre></div>
<p><strong>In Python 3.5</strong>, the OrderedDict has a C implementation. My timings show that this is now both the fastest and shortest of the various approaches for Python 3.5.</p>
<p><strong>In Python 3.6</strong>, the regular dict became both ordered and compact. (This feature is holds for CPython and PyPy but may not present in other implementations). That gives us a new fastest way of deduping while retaining order:</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb822-1"><a href="#cb822-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">dict</span>.fromkeys(<span class="st">&#39;abracadabra&#39;</span>))</span>
<span id="cb822-2"><a href="#cb822-2"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;r&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span></code></pre></div>
<p><strong>In Python 3.7</strong>, the regular dict is guaranteed to both ordered across all implementations. <strong>So, the shortest and fastest solution is:</strong></p>
<div class="sourceCode" id="cb823"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb823-1"><a href="#cb823-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">dict</span>.fromkeys(<span class="st">&#39;abracadabra&#39;</span>))</span>
<span id="cb823-2"><a href="#cb823-2"></a>[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;r&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]</span></code></pre></div>
</section>
<section id="answer-3-score-180" class="level4">
<h4>Answer 3 (score 180)</h4>
<p>It’s a one-liner: <code>list(set(source_list))</code> will do the trick.</p>
<p>A <code>set</code> is something that can’t possibly have duplicates.</p>
<p>Update: an order-preserving approach is two lines:</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb824-1"><a href="#cb824-1"></a><span class="im">from</span> collections <span class="im">import</span> OrderedDict</span>
<span id="cb824-2"><a href="#cb824-2"></a>OrderedDict((x, <span class="va">True</span>) <span class="cf">for</span> x <span class="kw">in</span> source_list).keys()</span></code></pre></div>
<p>Here we use the fact that <code>OrderedDict</code> remembers the insertion order of keys, and does not change it when a value at a particular key is updated. We insert <code>True</code> as values, but we could insert anything, values are just not used. (<code>set</code> works a lot like a <code>dict</code> with ignored values, too.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-unique-values-from-a-list-in-python-score-1335592-in-2019" class="level3">
<h3>99: Get unique values from a list in python (score <a href="https://stackoverflow.com/q/12897374.html">1335592</a> in 2019)</h3>
<section id="question-97" class="level4">
<h4>Question</h4>
<p>I want to get the unique values from the following list:</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb825-1"><a href="#cb825-1"></a>[<span class="st">&#39;nowplaying&#39;</span>, <span class="st">&#39;PBS&#39;</span>, <span class="st">&#39;PBS&#39;</span>, <span class="st">&#39;nowplaying&#39;</span>, <span class="st">&#39;job&#39;</span>, <span class="st">&#39;debate&#39;</span>, <span class="st">&#39;thenandnow&#39;</span>]</span></code></pre></div>
<p>The output which I require is:</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb826-1"><a href="#cb826-1"></a>[<span class="st">&#39;nowplaying&#39;</span>, <span class="st">&#39;PBS&#39;</span>, <span class="st">&#39;job&#39;</span>, <span class="st">&#39;debate&#39;</span>, <span class="st">&#39;thenandnow&#39;</span>]</span></code></pre></div>
<p>This code works:</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb827-1"><a href="#cb827-1"></a>output <span class="op">=</span> []</span>
<span id="cb827-2"><a href="#cb827-2"></a><span class="cf">for</span> x <span class="kw">in</span> trends:</span>
<span id="cb827-3"><a href="#cb827-3"></a>    <span class="cf">if</span> x <span class="kw">not</span> <span class="kw">in</span> output:</span>
<span id="cb827-4"><a href="#cb827-4"></a>        output.append(x)</span>
<span id="cb827-5"><a href="#cb827-5"></a><span class="bu">print</span>(output)</span></code></pre></div>
<p>is there a better solution I should use?</p>
</section>
<section id="answer-2-score-894" class="level4">
<h4>Answer 2 (score 894)</h4>
<p>First declare your list properly, separated by commas. You can get the unique values by converting the list to a set.</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb828-1"><a href="#cb828-1"></a>mylist <span class="op">=</span> [<span class="st">&#39;nowplaying&#39;</span>, <span class="st">&#39;PBS&#39;</span>, <span class="st">&#39;PBS&#39;</span>, <span class="st">&#39;nowplaying&#39;</span>, <span class="st">&#39;job&#39;</span>, <span class="st">&#39;debate&#39;</span>, <span class="st">&#39;thenandnow&#39;</span>]</span>
<span id="cb828-2"><a href="#cb828-2"></a>myset <span class="op">=</span> <span class="bu">set</span>(mylist)</span>
<span id="cb828-3"><a href="#cb828-3"></a><span class="bu">print</span>(myset)</span></code></pre></div>
<p>If you use it further as a list, you should convert it back to a list by doing:</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb829-1"><a href="#cb829-1"></a>mynewlist <span class="op">=</span> <span class="bu">list</span>(myset)</span></code></pre></div>
<p>Another possibility, probably faster would be to use a set from the beginning, instead of a list. Then your code should be:</p>
<div class="sourceCode" id="cb830"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb830-1"><a href="#cb830-1"></a>output <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb830-2"><a href="#cb830-2"></a><span class="cf">for</span> x <span class="kw">in</span> trends:</span>
<span id="cb830-3"><a href="#cb830-3"></a>    output.add(x)</span>
<span id="cb830-4"><a href="#cb830-4"></a><span class="bu">print</span>(output)</span></code></pre></div>
<p>As it has been pointed out, sets do not maintain the original order. If you need that, you should look for an <a href="http://code.activestate.com/recipes/576694/" rel="noreferrer">ordered set</a> implementation (see <a href="https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set">this question</a> for more).</p>
</section>
<section id="answer-3-score-290" class="level4">
<h4>Answer 3 (score 290)</h4>
<p>To be consistent with the type I would use:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb831-1"><a href="#cb831-1"></a>mylist <span class="op">=</span> <span class="bu">list</span>(<span class="bu">set</span>(mylist))</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="python-error-importerror-no-module-named-score-1319040-in-2017" class="level3">
<h3>100: Python error “ImportError: No module named” (score <a href="https://stackoverflow.com/q/338768.html">1319040</a> in 2017)</h3>
<section id="question-98" class="level4">
<h4>Question</h4>
<p>Python is installed in a local directory.</p>
<p>My directory tree looks like this:</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb832-1"><a href="#cb832-1"></a>(local directory)<span class="op">/</span>site<span class="op">-</span>packages<span class="op">/</span>toolkit<span class="op">/</span>interface.py</span></code></pre></div>
<p>My code is in here:</p>
<div class="sourceCode" id="cb833"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb833-1"><a href="#cb833-1"></a>(local directory)<span class="op">/</span>site<span class="op">-</span>packages<span class="op">/</span>toolkit<span class="op">/</span>examples<span class="op">/</span>mountain.py</span></code></pre></div>
<p>To run the example, I write <code>python mountain.py</code>, and in the code I have:</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb834-1"><a href="#cb834-1"></a><span class="im">from</span> toolkit.interface <span class="im">import</span> interface</span></code></pre></div>
<p>And I get the error:</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb835-1"><a href="#cb835-1"></a>Traceback (most recent call last):</span>
<span id="cb835-2"><a href="#cb835-2"></a>  File <span class="st">&quot;mountain.py&quot;</span>, line <span class="dv">28</span>, <span class="kw">in</span> ?</span>
<span id="cb835-3"><a href="#cb835-3"></a>    <span class="im">from</span> toolkit.interface <span class="im">import</span> interface</span>
<span id="cb835-4"><a href="#cb835-4"></a><span class="pp">ImportError</span>: No module named toolkit.interface</span></code></pre></div>
<p>I have already checked <code>sys.path</code> and there I have the directory <code>/site-packages</code>. Also, I have the file <code>__init__.py.bin</code> in the toolkit folder to indicate to Python that this is a package. I also have a <code>__init__.py.bin</code> in the examples directory.</p>
<p>I do not know why Python cannot find the file when it is in <code>sys.path</code>. Any ideas? Can it be a permissions problem? Do I need some execution permission?</p>
</section>
<section id="answer-accepted-score-246" class="level4">
<h4>Answer accepted (score 246)</h4>
<p>Based on your comments to orip’s post, I guess this is what happened:</p>
<ol>
<li>
You edited <code>__init__.py</code> on windows.
</li>
<li>
The windows editor added something non-printing, perhaps a carriage-return (end-of-line in Windows is CR/LF; in unix it is LF only), or perhaps a CTRL-Z (windows end-of-file).
</li>
<li>
You used WinSCP to copy the file to your unix box.
</li>
<li>
WinSCP thought: “This has something that’s not basic text; I’ll put a .bin extension to indicate binary data.”
</li>
<li>
The missing <code>__init__.py</code> (now called <code>__init__.py.bin</code>) means python doesn’t understand toolkit as a package.
</li>
<li>
You create <code>__init__.py</code> in the appropriate directory and everything works… ?
</li>
</ol>
</section>
<section id="answer-2-score-64-1" class="level4">
<h4>Answer 2 (score 64)</h4>
<p>Does</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb836-1"><a href="#cb836-1"></a>(local directory)<span class="op">/</span>site<span class="op">-</span>packages<span class="op">/</span>toolkit</span></code></pre></div>
<p>have a <code>__init__.py</code>?</p>
<p>To make import <em>walk</em> through your directories every directory must have a <code>__init__.py</code> file.</p>
</section>
<section id="answer-3-score-42" class="level4">
<h4>Answer 3 (score 42)</h4>
<p>I ran into something very similar when I did this exercise in LPTHW; I could never get Python to recognise that I had files in the directory I was calling from. But I was able to get it to work in the end. What I did, and what I recommend, is to try this:</p>
<p>(NOTE: From your initial post, I am assuming you are using an *NIX-based machine and are running things from the command line, so this advice is tailored to that. Since I run Ubuntu, this is what I did)</p>
<ol type="1">
<li><p>Change directory (cd) to the directory <em>above</em> the directory where your files are. In this case, you’re trying to run the <code>mountain.py</code> file, and trying to call the <code>toolkit.interface.py</code> module, which are in separate directories. In this case, you would go to the directory that contains paths to both those files (or in other words, the closest directory that the paths of both those files share). Which in this case is the <code>toolkit</code> directory.</p></li>
<li><p>When you are in the <code>tookit</code> directory, enter this line of code on your command line:</p></li>
</ol>
<p><code>export PYTHONPATH=.</code></p>
<p>This sets your PYTHONPATH to “.”, which basically means that your PYTHONPATH will now look for any called files within the directory you are currently in, (and more to the point, in the <em>sub-directory branches</em> of the directory you are in. So it doesn’t just look in your current directory, but in all the directories that are <strong>in</strong> your current directory).</p>
<ol start="3" type="1">
<li>After you’ve set your PYTHONPATH in the step above, run your module from your current directory (the <code>toolkit</code> directory). Python should now find and load the modules you specified.</li>
</ol>
Hope this helps. I was quite frustrated with this myself.<br />

</section>
</section>
</section>
</body>
</html>
