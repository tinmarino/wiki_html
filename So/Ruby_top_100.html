<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Ruby_top_100.md – Ruby &lt;- StackOverflow top 100</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #232629;
        color: #7a7c7d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
    div.sourceCode
      { color: #cfcfc2; background-color: #232629; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span. { color: #cfcfc2; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #3f8058; } /* Annotation */
    code span.at { color: #2980b9; } /* Attribute */
    code span.bn { color: #f67400; } /* BaseN */
    code span.bu { color: #7f8c8d; } /* BuiltIn */
    code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #3daee9; } /* Char */
    code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
    code span.co { color: #7a7c7d; } /* Comment */
    code span.cv { color: #7f8c8d; } /* CommentVar */
    code span.do { color: #a43340; } /* Documentation */
    code span.dt { color: #2980b9; } /* DataType */
    code span.dv { color: #f67400; } /* DecVal */
    code span.er { color: #da4453; text-decoration: underline; } /* Error */
    code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
    code span.fl { color: #f67400; } /* Float */
    code span.fu { color: #8e44ad; } /* Function */
    code span.im { color: #27ae60; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
    code span.op { color: #cfcfc2; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #27ae60; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #f44f4f; } /* String */
    code span.va { color: #27aeae; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../Css/color_dark_solarized.css" />
  <link rel="stylesheet" href="../Css/layout_toc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script type="text/javascript" src="../Css/js_masonry_desandro.js"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Ruby &lt;- StackOverflow top 100</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#how-to-write-a-switch-statement-in-ruby-score-809157-in-2018">1: How to write a switch statement in Ruby (score <span>809157</span> in 2018)</a></li>
<li><a href="#check-if-a-value-exists-in-an-array-in-ruby-score-802557-in-2015">2: Check if a value exists in an array in Ruby (score <span>802557</span> in 2015)</a></li>
<li><a href="#how-to-check-whether-a-string-contains-a-substring-in-ruby-score-684461-in-2013">3: How to check whether a string contains a substring in Ruby? (score <span>684461</span> in 2013)</a></li>
<li><a href="#how-to-convert-a-string-to-lower-or-upper-case-in-ruby-score-638074-in-2016">4: How to convert a string to lower or upper case in Ruby (score <span>638074</span> in 2016)</a></li>
<li><a href="#how-to-write-to-file-in-ruby-score-560295-in-2016">5: How to write to file in Ruby? (score <span>560295</span> in 2016)</a></li>
<li><a href="#string-concatenation-in-ruby-score-536211-in-2015">6: String concatenation in Ruby (score <span>536211</span> in 2015)</a></li>
<li><a href="#execute-a-command-line-binary-with-node.js-score-516439-in-2015">7: Execute a command line binary with Node.js (score <span>516439</span> in 2015)</a></li>
<li><a href="#how-to-get-a-random-number-in-ruby-score-515026-in-2018">8: How to get a random number in Ruby (score <span>515026</span> in 2018)</a></li>
<li><a href="#calling-shell-commands-from-ruby-score-504395-in-2015">9: Calling shell commands from Ruby (score <span>504395</span> in 2015)</a></li>
<li><a href="#ruby-function-to-remove-all-white-spaces-score-503134-in-2014">10: Ruby function to remove all white spaces? (score <span>503134</span> in 2014)</a></li>
<li><a href="#what-is-the-right-way-to-iterate-through-an-array-in-ruby-score-497256-in-2011">11: What is the “right” way to iterate through an array in Ruby? (score <span>497256</span> in 2011)</a></li>
<li><a href="#how-do-i-get-the-current-absolute-url-in-ruby-on-rails-score-464615-in-2017">12: How do I get the current absolute URL in Ruby on Rails? (score <span>464615</span> in 2017)</a></li>
<li><a href="#how-to-install-a-gem-or-updatie-rubygems-if-it-fails-with-a-permissions-error-score-459294-in-2019">13: How to install a gem or updatie RubyGems if it fails with a permissions error (score <span>459294</span> in 2019)</a></li>
<li><a href="#what-is-attr_accessor-in-ruby-score-443423-in-2017">14: What is attr_accessor in Ruby? (score <span>443423</span> in 2017)</a></li>
<li><a href="#parsing-a-json-string-in-ruby-score-425311-in-2016">15: Parsing a JSON string in Ruby (score <span>425311</span> in 2016)</a></li>
<li><a href="#what-ruby-ide-do-you-prefer-score-424357-in-2008">16: What Ruby IDE do you prefer? (score <span>424357</span> in 2008)</a></li>
<li><a href="#checking-if-a-variable-is-not-nil-and-not-zero-in-ruby-score-422191-in-2015">17: Checking if a variable is not nil and not zero in ruby (score <span>422191</span> in 2015)</a></li>
<li><a href="#how-to-sum-array-of-numbers-in-ruby-score-412523-in-2014">18: How to sum array of numbers in Ruby? (score <span>412523</span> in 2014)</a></li>
<li><a href="#determining-type-of-an-object-in-ruby-score-395964-in-2016">19: Determining type of an object in ruby (score <span>395964</span> in 2016)</a></li>
<li><a href="#how-to-generate-a-random-string-in-ruby-score-394882-in-2017">20: How to generate a random string in Ruby (score <span>394882</span> in 2017)</a></li>
<li><a href="#begin-rescue-and-ensure-in-ruby-score-391402-in-2014">21: Begin, Rescue and Ensure in Ruby? (score <span>391402</span> in 2014)</a></li>
<li><a href="#multi-line-comments-in-ruby-score-387437-in-2015">22: Multi-Line Comments in Ruby? (score <span>387437</span> in 2015)</a></li>
<li><a href="#how-to-install-a-specific-version-of-a-ruby-gem-score-385296-in">23: How to install a specific version of a ruby gem? (score <span>385296</span> in )</a></li>
<li><a href="#how-to-check-if-a-specific-key-is-present-in-a-hash-or-not-score-379134-in-2016">24: How to check if a specific key is present in a hash or not? (score <span>379134</span> in 2016)</a></li>
<li><a href="#how-to-remove-a-key-from-hash-and-get-the-remaining-hash-in-rubyrails-score-369464-in-2017">25: How to remove a key from Hash and get the remaining hash in Ruby/Rails? (score <span>369464</span> in 2017)</a></li>
<li><a href="#how-do-you-add-an-array-to-another-array-in-ruby-and-not-end-up-with-a-multi-dimensional-result-score-347066-in-2009">26: How do you add an array to another array in Ruby and not end up with a multi-dimensional result? (score <span>347066</span> in 2009)</a></li>
<li><a href="#how-to-drop-columns-using-rails-migration-score-341510-in-2019">27: How to drop columns using Rails migration (score <span>341510</span> in 2019)</a></li>
<li><a href="#how-to-update-ruby-version-2.0.0-to-the-latest-version-in-mac-osx-yosemite-score-341177-in-2016">28: How to update Ruby Version 2.0.0 to the latest version in Mac OSX Yosemite? (score <span>341177</span> in 2016)</a></li>
<li><a href="#what-are-all-the-common-ways-to-read-a-file-in-ruby-score-330735-in-2013">29: What are all the common ways to read a file in Ruby? (score <span>330735</span> in 2013)</a></li>
<li><a href="#difference-between-rake-dbmigrate-dbreset-and-dbschemaload-score-328333-in-2014">30: Difference between rake db:migrate db:reset and db:schema:load (score <span>328333</span> in 2014)</a></li>
<li><a href="#how-do-i-use-the-conditional-operator-in-ruby-score-327740-in-2014">31: How do I use the conditional operator (? :) in Ruby? (score <span>327740</span> in 2014)</a></li>
<li><a href="#what-does-warray-mean-score-326817-in-2016">32: What does %w(array) mean? (score <span>326817</span> in 2016)</a></li>
<li><a href="#checking-if-a-variable-is-defined-score-323815-in-2014">33: Checking if a variable is defined? (score <span>323815</span> in 2014)</a></li>
<li><a href="#how-to-pass-command-line-arguments-to-a-rake-task-score-321914-in-2016">34: How to pass command line arguments to a rake task (score <span>321914</span> in 2016)</a></li>
<li><a href="#replace-words-in-a-string---ruby-score-320293-in-2018">35: Replace words in a string - Ruby (score <span>320293</span> in 2018)</a></li>
<li><a href="#how-can-i-delete-one-element-from-an-array-by-value-score-319020-in-2019">36: How can I delete one element from an array by value (score <span>319020</span> in 2019)</a></li>
<li><a href="#ruby-can-i-write-multi-line-string-with-no-concatenation-score-313943-in-2012">37: Ruby: Can I write multi-line string with no concatenation? (score <span>313943</span> in 2012)</a></li>
<li><a href="#how-to-execute-a-ruby-script-in-terminal-score-309118-in-2014">38: How to execute a Ruby script in Terminal? (score <span>309118</span> in 2014)</a></li>
<li><a href="#how-can-i-install-a-local-gem-score-305796-in-2013">39: How can I install a local gem? (score <span>305796</span> in 2013)</a></li>
<li><a href="#what-does-the-map-method-do-in-ruby-score-305419-in-2014">40: What does the “map” method do in Ruby? (score <span>305419</span> in 2014)</a></li>
<li><a href="#how-to-split-a-delimited-string-in-ruby-and-convert-it-to-an-array-score-301478-in-2017">41: How to split a delimited string in Ruby and convert it to an array? (score <span>301478</span> in 2017)</a></li>
<li><a href="#how-to-break-out-from-a-ruby-block-score-300787-in-2016">42: How to break out from a ruby block? (score <span>300787</span> in 2016)</a></li>
<li><a href="#a-concise-explanation-of-nil-v.-empty-v.-blank-in-ruby-on-rails-score-298526-in-2013">43: A concise explanation of nil v. empty v. blank in Ruby on Rails (score <span>298526</span> in 2013)</a></li>
<li><a href="#why-use-rubys-attr_accessor-attr_reader-and-attr_writer-score-296881-in-2013">44: Why use Ruby’s attr_accessor, attr_reader and attr_writer? (score <span>296881</span> in 2013)</a></li>
<li><a href="#tell-ruby-program-to-wait-some-amount-of-time-score-296044-in-2016">45: Tell Ruby Program to Wait some amount of time (score <span>296044</span> in 2016)</a></li>
<li><a href="#how-to-read-lines-of-a-file-in-ruby-score-287879-in-2016">46: How to read lines of a file in Ruby (score <span>287879</span> in 2016)</a></li>
<li><a href="#rails-4-list-of-available-datatypes-score-277783-in-2016">47: Rails 4: List of available datatypes (score <span>277783</span> in 2016)</a></li>
<li><a href="#how-to-uninstall-rvm-score-277193-in-2018">48: How to Uninstall RVM? (score <span>277193</span> in 2018)</a></li>
<li><a href="#why-is-it-bad-style-to-rescue-exception-e-in-ruby-score-276074-in-2017">49: Why is it bad style to <code>rescue Exception =&gt; e</code> in Ruby? (score <span>276074</span> in 2017)</a></li>
<li><a href="#failed-to-build-gem-native-extension-installing-compass-score-276002-in-2014">50: Failed to build gem native extension (installing Compass) (score <span>276002</span> in 2014)</a></li>
<li><a href="#how-to-get-a-specific-output-iterating-a-hash-in-ruby-score-273875-in-2018">51: How to get a specific output iterating a hash in Ruby? (score <span>273875</span> in 2018)</a></li>
<li><a href="#how-do-i-parse-json-with-ruby-on-rails-score-272587-in-2015">52: How do I parse JSON with Ruby on Rails? (score <span>272587</span> in 2015)</a></li>
<li><a href="#what-is-the-difference-between-print-and-puts-score-271853-in-2014">53: What is the difference between print and puts? (score <span>271853</span> in 2014)</a></li>
<li><a href="#how-to-add-new-item-to-hash-score-271685-in-2018">54: How to add new item to hash (score <span>271685</span> in 2018)</a></li>
<li><a href="#how-can-i-pretty-format-my-json-output-in-ruby-on-rails-score-271430-in-2016">55: How can I “pretty” format my JSON output in Ruby on Rails? (score <span>271430</span> in 2016)</a></li>
<li><a href="#how-to-convert-a-ruby-hash-object-to-json-score-265343-in-2016">56: How to convert a ruby hash object to JSON? (score <span>265343</span> in 2016)</a></li>
<li><a href="#could-not-locate-gemfile-score-262557-in">57: Could not locate Gemfile (score <span>262557</span> in )</a></li>
<li><a href="#uninstall-old-versions-of-ruby-gems-score-255332-in-2015">58: Uninstall old versions of Ruby gems (score <span>255332</span> in 2015)</a></li>
<li><a href="#pass-variables-to-ruby-script-via-command-line-score-250980-in-2014">59: Pass variables to Ruby script via command line (score <span>250980</span> in 2014)</a></li>
<li><a href="#is-there-a-do-while-loop-in-ruby-score-249266-in">60: Is there a “do … while” loop in Ruby? (score <span>249266</span> in )</a></li>
<li><a href="#error-installing-mysql2-failed-to-build-gem-native-extension-score-248014-in-2017">61: Error installing mysql2: Failed to build gem native extension (score <span>248014</span> in 2017)</a></li>
<li><a href="#ssl_connect-returned1-errno0-statesslv3-read-server-certificate-b-certificate-verify-failed-score-247830-in">62: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (score <span>247830</span> in )</a></li>
<li><a href="#ruby-array-to-string-conversion-score-246800-in-2015">63: Ruby array to string conversion (score <span>246800</span> in 2015)</a></li>
<li><a href="#how-do-i-pick-randomly-from-an-array-score-244689-in-2011">64: How do I pick randomly from an array? (score <span>244689</span> in 2011)</a></li>
<li><a href="#getting-output-of-system-calls-in-ruby-score-243524-in-2015">65: Getting output of system() calls in Ruby (score <span>243524</span> in 2015)</a></li>
<li><a href="#how-to-make-a-http-request-using-ruby-on-rails-score-242680-in-2017">66: How to make a HTTP request using Ruby on Rails? (score <span>242680</span> in 2017)</a></li>
<li><a href="#one-line-if-statement-not-working-score-241210-in-2015">67: One line if statement not working (score <span>241210</span> in 2015)</a></li>
<li><a href="#how-to-make-no-ri-no-rdoc-the-default-for-gem-install-score-237851-in-2014">68: How to make –no-ri –no-rdoc the default for gem install? (score <span>237851</span> in 2014)</a></li>
<li><a href="#how-do-i-update-ruby-gems-from-behind-a-proxy-isa-ntlm-score-237459-in-2016">69: How do I update Ruby Gems from behind a Proxy (ISA-NTLM) (score <span>237459</span> in 2016)</a></li>
<li><a href="#how-do-i-get-the-name-of-a-ruby-class-score-235678-in-2014">70: How do I get the name of a Ruby class? (score <span>235678</span> in 2014)</a></li>
<li><a href="#how-do-you-find-a-min-max-with-ruby-score-235414-in-2012">71: How do you find a min / max with Ruby? (score <span>235414</span> in 2012)</a></li>
<li><a href="#gem-install-failed-to-build-gem-native-extension-cant-find-header-files-score-228909-in-2016">72: gem install: Failed to build gem native extension (can’t find header files) (score <span>228909</span> in 2016)</a></li>
<li><a href="#for-vs-each-in-ruby-score-224935-in-2014">73: “for” vs “each” in Ruby (score <span>224935</span> in 2014)</a></li>
<li><a href="#equivalent-of-continue-in-ruby-score-223168-in-2012">74: Equivalent of “continue” in Ruby (score <span>223168</span> in 2012)</a></li>
<li><a href="#what-is-the-difference-between-include-and-require-in-ruby-score-221607-in-2017">75: What is the difference between include and require in Ruby? (score <span>221607</span> in 2017)</a></li>
<li><a href="#check-for-array-not-empty-any-score-219644-in-2012">76: Check for array not empty: any? (score <span>219644</span> in 2012)</a></li>
<li><a href="#get-names-of-all-files-from-a-folder-with-ruby-score-218927-in">77: Get names of all files from a folder with Ruby (score <span>218927</span> in )</a></li>
<li><a href="#pgconnectionbad---could-not-connect-to-server-connection-refused-score-217377-in-2019">78: PG::ConnectionBad - could not connect to server: Connection refused (score <span>217377</span> in 2019)</a></li>
<li><a href="#how-to-redirect-to-a-404-in-rails-score-217141-in-2017">79: How to redirect to a 404 in Rails? (score <span>217141</span> in 2017)</a></li>
<li><a href="#remove-substring-from-the-string-score-215430-in-2011">80: Remove substring from the string (score <span>215430</span> in 2011)</a></li>
<li><a href="#ruby-require-error-cannot-load-such-file-score-213382-in-2014">81: Ruby ‘require’ error: cannot load such file (score <span>213382</span> in 2014)</a></li>
<li><a href="#map-and-remove-nil-values-in-ruby-score-211476-in-2019">82: Map and Remove nil values in Ruby (score <span>211476</span> in 2019)</a></li>
<li><a href="#how-to-find-a-hash-key-containing-a-matching-value-score-209106-in-2013">83: How to find a hash key containing a matching value (score <span>209106</span> in 2013)</a></li>
<li><a href="#how-do-you-round-a-float-to-two-decimal-places-in-jruby-score-208509-in-2012">84: How do you round a float to two decimal places in jruby (score <span>208509</span> in 2012)</a></li>
<li><a href="#how-do-i-parse-a-yaml-file-score-208179-in-2012">85: How do I parse a YAML file? (score <span>208179</span> in 2012)</a></li>
<li><a href="#how-to-get-the-current-working-directorys-absolute-path-from-irb-score-207448-in-2015">86: how to get the current working directory’s absolute path from irb (score <span>207448</span> in 2015)</a></li>
<li><a href="#how-to-upgrade-rubygems-score-207239-in">87: How to upgrade rubygems (score <span>207239</span> in )</a></li>
<li><a href="#read-binary-file-as-string-in-ruby-score-207228-in-2017">88: Read binary file as string in Ruby (score <span>207228</span> in 2017)</a></li>
<li><a href="#how-to-convert-a-unix-timestamp-seconds-since-epoch-to-ruby-datetime-score-206812-in-2015">89: How to convert a unix timestamp (seconds since epoch) to Ruby DateTime? (score <span>206812</span> in 2015)</a></li>
<li><a href="#sorting-an-array-in-descending-order-in-ruby-score-206431-in">90: Sorting an array in descending order in Ruby (score <span>206431</span> in )</a></li>
<li><a href="#error-while-installing-json-gem-mkmf.rb-cant-find-header-files-for-ruby-score-200434-in-2017">91: Error while installing json gem ‘mkmf.rb can’t find header files for ruby’ (score <span>200434</span> in 2017)</a></li>
<li><a href="#what-is-the-canonical-way-to-trim-a-string-in-ruby-without-creating-a-new-string-score-199484-in-2009">92: What is the canonical way to trim a string in Ruby without creating a new string? (score <span>199484</span> in 2009)</a></li>
<li><a href="#how-to-find-where-gem-files-are-installed-score-198624-in-2019">93: How to find where gem files are installed (score <span>198624</span> in 2019)</a></li>
<li><a href="#ruby---test-for-array-score-197783-in">94: Ruby - test for array (score <span>197783</span> in )</a></li>
<li><a href="#remove-duplicate-elements-from-array-in-ruby-score-197438-in-2017">95: Remove duplicate elements from array in Ruby (score <span>197438</span> in 2017)</a></li>
<li><a href="#whats-the-difference-between-equal-eql-and-score-196839-in-2014">96: What’s the difference between equal?, eql?, ===, and ==? (score <span>196839</span> in 2014)</a></li>
<li><a href="#how-do-you-run-a-single-testspec-file-in-rspec-score-196194-in-2012">97: How do you run a single test/spec file in RSpec? (score <span>196194</span> in 2012)</a></li>
<li><a href="#how-to-map-with-index-in-ruby-score-195350-in-2015">98: How to map with index in Ruby? (score <span>195350</span> in 2015)</a></li>
<li><a href="#learning-ruby-on-rails-score-189430-in-2011">99: Learning Ruby on Rails (score <span>189430</span> in 2011)</a></li>
<li><a href="#how-can-i-remove-rvm-ruby-version-manager-from-my-system-score-188959-in-2014">100: How can I remove RVM (Ruby Version Manager) from my system? (score <span>188959</span> in 2014)</a></li>
</ul>
</nav>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="how-to-write-a-switch-statement-in-ruby-score-809157-in-2018" class="level3">
<h3>1: How to write a switch statement in Ruby (score <a href="https://stackoverflow.com/q/948135.html">809157</a> in 2018)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>How do I write a switch statement in Ruby?</p>
</section>
<section id="answer-accepted-score-2579" class="level4">
<h4>Answer accepted (score 2579)</h4>
<p>Ruby uses the <a href="http://ruby-doc.com/docs/ProgrammingRuby/html/tut_expressions.html#S5" rel="noreferrer"><code>case</code> expression</a> instead.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">case</span> x</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">when</span> <span class="dv">1</span>..<span class="dv">5</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="st">&quot;It&#39;s between 1 and 5&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">when</span> <span class="dv">6</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="st">&quot;It&#39;s 6&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw">when</span> <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="st">&quot;It&#39;s either foo or bar&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">when</span> <span class="dt">String</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>  <span class="st">&quot;You passed a string&quot;</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="kw">else</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="st">&quot;You gave me </span><span class="ot">#{</span>x<span class="ot">}</span><span class="st"> -- I have no idea what to do with that.&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="kw">end</span></span></code></pre></div>
<p>Ruby compares the object in the <code>when</code> clause with the object in the <code>case</code> clause using the <code>===</code> operator. For example, <code>1..5 === x</code>, and not <code>x === 1..5</code>.</p>
<p>This allows for sophisticated <code>when</code> clauses as seen above. Ranges, classes and all sorts of things can be tested for rather than just equality.</p>
<p>Unlike <code>switch</code> statements in many other languages, Ruby’s <code>case</code> does not have <a href="https://en.wikipedia.org/wiki/Switch_statement#Fallthrough" rel="noreferrer">fall-through</a>, so there is no need to end each <code>when</code> with a <code>break</code>. You can also specify multiple matches in a single <code>when</code> clause like <code>when "foo", "bar"</code>.</p>
</section>
<section id="answer-2-score-429" class="level4">
<h4>Answer 2 (score 429)</h4>
<p><code>case...when</code> behaves a bit unexpectedly when handling classes. This is due to the fact that it uses the <code>===</code> operator.</p>
<p>That operator works as expected with literals, but not with classes:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb2-1"><a href="#cb2-1"></a><span class="dv">1</span> === <span class="dv">1</span>           <span class="co"># =&gt; true</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="dt">Fixnum</span> === <span class="dt">Fixnum</span> <span class="co"># =&gt; false</span></span></code></pre></div>
<p>This means that if you want to do a <code>case ... when</code> over an object’s class, this will not work:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb3-1"><a href="#cb3-1"></a>obj = <span class="st">&#39;hello&#39;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">case</span> obj.class</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">when</span> <span class="dt">String</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  print(<span class="st">&#39;It is a string&#39;</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="kw">when</span> <span class="dt">Fixnum</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  print(<span class="st">&#39;It is a number&#39;</span>)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="kw">else</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  print(<span class="st">&#39;It is not a string or number&#39;</span>)</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="kw">end</span></span></code></pre></div>
<p>Will print “It is not a string or number”.</p>
<p>Fortunately, this is easily solved. The <code>===</code> operator has been defined so that it returns <code>true</code> if you use it with a class and supply an instance of that class as the second operand:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb4-1"><a href="#cb4-1"></a><span class="dt">Fixnum</span> === <span class="dv">1</span> <span class="co"># =&gt; true</span></span></code></pre></div>
<p>In short, the code above can be fixed by removing the <code>.class</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb5-1"><a href="#cb5-1"></a>obj = <span class="st">&#39;hello&#39;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">case</span> obj  <span class="co"># was case obj.class</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw">when</span> <span class="dt">String</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  print(<span class="st">&#39;It is a string&#39;</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw">when</span> <span class="dt">Fixnum</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  print(<span class="st">&#39;It is a number&#39;</span>)</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="kw">else</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  print(<span class="st">&#39;It is not a string or number&#39;</span>)</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="kw">end</span></span></code></pre></div>
<p>I hit this problem today while looking for an answer, and this was the first appearing page, so I figured it would be useful to others in my same situation.</p>
</section>
<section id="answer-3-score-207" class="level4">
<h4>Answer 3 (score 207)</h4>
<p>It is done by <a href="http://www.techotopia.com/index.php/The_Ruby_case_Statement" rel="noreferrer">case</a> in Ruby. Also see <a href="http://en.wikipedia.org/wiki/Switch_statement#Ruby" rel="noreferrer">this article on Wikipedia</a>.</p>
<p>Quoted:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">case</span> n</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw">when</span> <span class="dv">0</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  puts <span class="st">&#39;You typed zero&#39;</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="kw">when</span> <span class="dv">1</span>, <span class="dv">9</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>  puts <span class="st">&#39;n is a perfect square&#39;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="kw">when</span> <span class="dv">2</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>  puts <span class="st">&#39;n is a prime number&#39;</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  puts <span class="st">&#39;n is an even number&#39;</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="kw">when</span> <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>  puts <span class="st">&#39;n is a prime number&#39;</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="kw">when</span> <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  puts <span class="st">&#39;n is an even number&#39;</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="kw">else</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  puts <span class="st">&#39;Only single-digit numbers are allowed&#39;</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="kw">end</span></span></code></pre></div>
<p>Another example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb7-1"><a href="#cb7-1"></a>score = <span class="dv">70</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>result = <span class="kw">case</span> score</span>
<span id="cb7-4"><a href="#cb7-4"></a>   <span class="kw">when</span> <span class="dv">0</span>..<span class="dv">40</span> <span class="kw">then</span> <span class="st">&quot;Fail&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>   <span class="kw">when</span> <span class="dv">41</span>..<span class="dv">60</span> <span class="kw">then</span> <span class="st">&quot;Pass&quot;</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>   <span class="kw">when</span> <span class="dv">61</span>..<span class="dv">70</span> <span class="kw">then</span> <span class="st">&quot;Pass with Merit&quot;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>   <span class="kw">when</span> <span class="dv">71</span>..<span class="dv">100</span> <span class="kw">then</span> <span class="st">&quot;Pass with Distinction&quot;</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>   <span class="kw">else</span> <span class="st">&quot;Invalid Score&quot;</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="kw">end</span></span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a>puts result</span></code></pre></div>
<p>On around page 123 (I am using Kindle) of <em>The Ruby Programming Lanugage</em> (1st Edition, O’Reilly), it says the <code>then</code> keyword following the <code>when</code> clauses can be replaced with a newline or semicolon (just like in the <code>if then else</code> syntax). (Ruby 1.8 also allows a colon in place of <code>then</code>… But this syntax is no longer allowed in Ruby 1.9.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-if-a-value-exists-in-an-array-in-ruby-score-802557-in-2015" class="level3">
<h3>2: Check if a value exists in an array in Ruby (score <a href="https://stackoverflow.com/q/1986386.html">802557</a> in 2015)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>I have a value <code>'Dog'</code> and an array <code>['Cat', 'Dog', 'Bird']</code>.</p>
<p>How do I check if it exists in the array without looping through it? Is there a simple way of checking if the value exists, nothing more?</p>
</section>
<section id="answer-accepted-score-1856" class="level4">
<h4>Answer accepted (score 1856)</h4>
<p>You’re looking for <a href="http://ruby-doc.org/core-2.3.1/Array.html#method-i-include-3F" rel="noreferrer"><code>include?</code></a>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb8-1"><a href="#cb8-1"></a>&gt;&gt; [<span class="st">&#39;Cat&#39;</span>, <span class="st">&#39;Dog&#39;</span>, <span class="st">&#39;Bird&#39;</span>].include? <span class="st">&#39;Dog&#39;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>=&gt; <span class="dv">true</span></span></code></pre></div>
</section>
<section id="answer-2-score-240" class="level4">
<h4>Answer 2 (score 240)</h4>
<p>There is an <a href="https://apidock.com/rails/Object/in%3F" rel="noreferrer"><code>in?</code> method</a> in <code>ActiveSupport</code> (part of Rails) since v3.1, as pointed out by <span class="citation" data-cites="campaterson">@campaterson</span>. So within Rails, or if you <code>require 'active_support'</code>, you can write:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">&#39;Unicorn&#39;</span>.in?([<span class="st">&#39;Cat&#39;</span>, <span class="st">&#39;Dog&#39;</span>, <span class="st">&#39;Bird&#39;</span>]) <span class="co"># =&gt; false</span></span></code></pre></div>
<p>OTOH, there is no <code>in</code> operator or <code>#in?</code> method in Ruby itself, even though it has been proposed before, <a href="http://bugs.ruby-lang.org/issues/3845" rel="noreferrer">in particular by Yusuke Endoh</a> a top notch member of ruby-core.</p>
<p>As pointed out by others, the reverse method <a href="http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F" rel="noreferrer"><code>include?</code></a> exists, for all <code>Enumerable</code>s including <code>Array</code>, <code>Hash</code>, <code>Set</code>, <code>Range</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb10-1"><a href="#cb10-1"></a>[<span class="st">&#39;Cat&#39;</span>, <span class="st">&#39;Dog&#39;</span>, <span class="st">&#39;Bird&#39;</span>].include?(<span class="st">&#39;Unicorn&#39;</span>) <span class="co"># =&gt; false</span></span></code></pre></div>
<hr>
<p>Note that if you have many values in your array, they will all be checked one after the other (i.e. <code>O(n)</code>), while that lookup for a hash will be constant time (i.e <code>O(1)</code>). So if you array is constant, for example, it is a good idea to use a <a href="http://ruby-doc.org/stdlib-2.2.2/libdoc/set/rdoc/Set.html" rel="noreferrer">Set</a> instead. E.g:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb11-1"><a href="#cb11-1"></a>require <span class="st">&#39;set&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="dt">ALLOWED_METHODS</span> = <span class="dt">Set</span>[<span class="st">:to_s</span>, <span class="st">:to_i</span>, <span class="st">:upcase</span>, <span class="st">:downcase</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>                       <span class="co"># etc</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>                     ]</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="kw">def</span> foo(what)</span>
<span id="cb11-7"><a href="#cb11-7"></a>  raise <span class="st">&quot;Not allowed&quot;</span> <span class="kw">unless</span> <span class="dt">ALLOWED_METHODS</span>.include?(what.to_sym)</span>
<span id="cb11-8"><a href="#cb11-8"></a>  bar.send(what)</span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="kw">end</span></span></code></pre></div>
<p>A <a href="http://pastie.org/3913273" rel="noreferrer">quick test</a> reveals that calling <code>include?</code> on a 10 element <code>Set</code> is about 3.5x faster than calling it on the equivalent <code>Array</code> (if the element is not found).</p>
<p>A final closing note: be wary when using <code>include?</code> on a <code>Range</code>, there are subtleties, so refer to <a href="http://ruby-doc.org/core-1.9.3/Range.html#method-i-include-3F" rel="noreferrer">the doc</a> and compare with <a href="http://ruby-doc.org/core-1.9.3/Range.html#method-i-cover-3F" rel="noreferrer"><code>cover?</code></a>…</p>
</section>
<section id="answer-3-score-164" class="level4">
<h4>Answer 3 (score 164)</h4>
<p>Try</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb12-1"><a href="#cb12-1"></a>[<span class="st">&#39;Cat&#39;</span>, <span class="st">&#39;Dog&#39;</span>, <span class="st">&#39;Bird&#39;</span>].include?(<span class="st">&#39;Dog&#39;</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-whether-a-string-contains-a-substring-in-ruby-score-684461-in-2013" class="level3">
<h3>3: How to check whether a string contains a substring in Ruby? (score <a href="https://stackoverflow.com/q/8258517.html">684461</a> in 2013)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>I have a string variable with content as follows:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb13-1"><a href="#cb13-1"></a>varMessage =   </span>
<span id="cb13-2"><a href="#cb13-2"></a>            <span class="st">&quot;hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a>            <span class="st">&quot;/my/name/is/balaji.so\n&quot;</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>            <span class="st">&quot;call::myFunction(int const&amp;)\n&quot;</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>            <span class="st">&quot;void::secondFunction(char const&amp;)\n&quot;</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>             .</span>
<span id="cb13-9"><a href="#cb13-9"></a>             .</span>
<span id="cb13-10"><a href="#cb13-10"></a>             .</span>
<span id="cb13-11"><a href="#cb13-11"></a>            <span class="st">&quot;this/is/last/line/liobrary.so&quot;</span></span></code></pre></div>
<p>in above string i have to find a sub string i.e. </p>
<div class="sourceCode" id="cb14"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb14-1"><a href="#cb14-1"></a><span class="st">&quot;hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n&quot;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="st">&quot;/my/name/is/balaji.so\n&quot;</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="st">&quot;call::myFunction(int const&amp;)\n&quot;</span></span></code></pre></div>
<p>How can I find it? I just need to determine whether the substring is present or not.</p>
</section>
<section id="answer-accepted-score-1282" class="level4">
<h4>Answer accepted (score 1282)</h4>
<p>You can use the <a href="https://ruby-doc.org/core-1.9.3/String.html#method-i-include-3F" rel="noreferrer"><code>include?</code></a> method:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb15-1"><a href="#cb15-1"></a>my_string = <span class="st">&quot;abcdefg&quot;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">if</span> my_string.include? <span class="st">&quot;cde&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>   puts <span class="st">&quot;String includes &#39;cde&#39;&quot;</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-2-score-82" class="level4">
<h4>Answer 2 (score 82)</h4>
<p>If case is irrelevant, then a <strong>case-insensitive regular expression</strong> is a good solution:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb16-1"><a href="#cb16-1"></a><span class="st">&#39;aBcDe&#39;</span> =~ <span class="ot">/bcd/i</span>  <span class="co"># evaluates as true</span></span></code></pre></div>
<p>This will also work for multi-line strings.</p>
<p>See Ruby’s <a href="http://docs.ruby-lang.org/en/trunk/Regexp.html">Regexp</a> class.</p>
</section>
<section id="answer-3-score-41" class="level4">
<h4>Answer 3 (score 41)</h4>
<p>You can also do this…</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb17-1"><a href="#cb17-1"></a>my_string = <span class="st">&quot;Hello world&quot;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="kw">if</span> my_string[<span class="st">&quot;Hello&quot;</span>]</span>
<span id="cb17-4"><a href="#cb17-4"></a>  puts <span class="st">&#39;It has &quot;Hello&quot;&#39;</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="kw">else</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>  puts <span class="st">&#39;No &quot;Hello&quot; found&#39;</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="kw">end</span></span>
<span id="cb17-8"><a href="#cb17-8"></a></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co"># =&gt; &#39;It has &quot;Hello&quot;&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-a-string-to-lower-or-upper-case-in-ruby-score-638074-in-2016" class="level3">
<h3>4: How to convert a string to lower or upper case in Ruby (score <a href="https://stackoverflow.com/q/1020568.html">638074</a> in 2016)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>How do I take a string and convert it to lower or upper case in Ruby?</p>
</section>
<section id="answer-accepted-score-1543" class="level4">
<h4>Answer accepted (score 1543)</h4>
<p>Ruby has a few methods for changing the case of strings. To convert to lowercase, use <code>downcase</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb18-1"><a href="#cb18-1"></a><span class="st">&quot;hello James!&quot;</span>.downcase    <span class="co">#=&gt; &quot;hello james!&quot;</span></span></code></pre></div>
<p>Similarly, <code>upcase</code> capitalizes every letter and <code>capitalize</code> capitalizes the first letter of the string but lowercases the rest:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb19-1"><a href="#cb19-1"></a><span class="st">&quot;hello James!&quot;</span>.upcase      <span class="co">#=&gt; &quot;HELLO JAMES!&quot;</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="st">&quot;hello James!&quot;</span>.capitalize  <span class="co">#=&gt; &quot;Hello james!&quot;</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="st">&quot;hello James!&quot;</span>.titleize    <span class="co">#=&gt; &quot;Hello James!&quot;</span></span></code></pre></div>
<p>If you want to modify a string in place, you can add an exclamation point to any of those methods:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb20-1"><a href="#cb20-1"></a>string = <span class="st">&quot;hello James!&quot;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>string.downcase!</span>
<span id="cb20-3"><a href="#cb20-3"></a>string   <span class="co">#=&gt; &quot;hello james!&quot;</span></span></code></pre></div>
<p>Refer to the <a href="http://www.ruby-doc.org/core/String.html" rel="noreferrer">documentation for String</a> for more information.</p>
</section>
<section id="answer-2-score-121" class="level4">
<h4>Answer 2 (score 121)</h4>
<p>You can find out all the methods available on a String by opening irb and running:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb21-1"><a href="#cb21-1"></a><span class="st">&quot;MyString&quot;</span>.methods.sort</span></code></pre></div>
<p>And for a list of the methods available for strings in particular:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb22-1"><a href="#cb22-1"></a><span class="st">&quot;MyString&quot;</span>.own_methods.sort</span></code></pre></div>
<p>I use this to find out new and interesting things about objects which I might not otherwise have known existed.</p>
</section>
<section id="answer-3-score-39" class="level4">
<h4>Answer 3 (score 39)</h4>
<p>Like <span class="citation" data-cites="endeR">@endeR</span> mentioned, if internationalization is a concern, the unicode_utils gem is more than adequate.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb23-1"><a href="#cb23-1"></a>$ gem install unicode_utils</span>
<span id="cb23-2"><a href="#cb23-2"></a>$ irb</span>
<span id="cb23-3"><a href="#cb23-3"></a>&gt; require <span class="st">&#39;unicode_utils&#39;</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>=&gt; <span class="dv">true</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>&gt; <span class="dt">UnicodeUtils</span>.downcase(<span class="st">&quot;FEN BİLİMLERİ&quot;</span>, <span class="st">:tr</span>)</span>
<span id="cb23-6"><a href="#cb23-6"></a>=&gt; <span class="st">&quot;fen bilimleri&quot;</span></span></code></pre></div>
<hr>
<p>String manipulations in Ruby 2.4 are now unicode-sensitive.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-write-to-file-in-ruby-score-560295-in-2016" class="level3">
<h3>5: How to write to file in Ruby? (score <a href="https://stackoverflow.com/q/2777802.html">560295</a> in 2016)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<p>I need to read the data out of database and then save it in a text file.</p>
<p>How can I do that in Ruby? Is there any file management system in Ruby?</p>
</section>
<section id="answer-accepted-score-174" class="level4">
<h4>Answer accepted (score 174)</h4>
<p>The Ruby <a href="http://ruby-doc.org/core/classes/File.html" rel="noreferrer">File class</a> will give you the ins and outs of <code>::new</code> and <code>::open</code> but its parent, the <a href="http://ruby-doc.org/core/classes/IO.html" rel="noreferrer">IO class</a>, gets into the depth of <code>#read</code> and <code>#write</code>.</p>
</section>
<section id="answer-2-score-904" class="level4">
<h4>Answer 2 (score 904)</h4>
<p>Are you looking for the following?</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb24-1"><a href="#cb24-1"></a><span class="dt">File</span>.open(yourfile, <span class="ch">&#39;w&#39;</span>) { |file| file.write(<span class="st">&quot;your text&quot;</span>) }</span></code></pre></div>
</section>
<section id="answer-3-score-602" class="level4">
<h4>Answer 3 (score 602)</h4>
<p>You can use the short version:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb25-1"><a href="#cb25-1"></a><span class="dt">File</span>.write(<span class="st">&#39;/path/to/file&#39;</span>, <span class="st">&#39;Some glorious content&#39;</span>)</span></code></pre></div>
<p>It returns the length written; see <a href="http://ruby-doc.org/core-1.9.3/IO.html#method-c-write" rel="noreferrer">::write</a> for more details and options.</p>
<p>To append to the file, if it already exists, use:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb26-1"><a href="#cb26-1"></a><span class="dt">File</span>.write(<span class="st">&#39;/path/to/file&#39;</span>, <span class="st">&#39;Some glorious content&#39;</span>, <span class="st">mode: </span><span class="ch">&#39;a&#39;</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="string-concatenation-in-ruby-score-536211-in-2015" class="level3">
<h3>6: String concatenation in Ruby (score <a href="https://stackoverflow.com/q/377768.html">536211</a> in 2015)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p>I am looking for a more elegant way of concatenating strings in Ruby.</p>
<p>I have the following line:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb27-1"><a href="#cb27-1"></a>source = <span class="st">&quot;</span><span class="ot">#{</span><span class="dt">ROOT_DIR</span><span class="ot">}</span><span class="st">/&quot;</span> &lt;&lt; project &lt;&lt; <span class="st">&quot;/App.config&quot;</span></span></code></pre></div>
<p>Is there a nicer way of doing this?</p>
<p>And for that matter what is the difference between <code>&amp;lt;&amp;lt;</code> and <code>+</code>?</p>
</section>
<section id="answer-accepted-score-553" class="level4">
<h4>Answer accepted (score 553)</h4>
<p>You can do that in several ways:</p>
<ol>
<li>
As you shown with <code>&amp;lt;&amp;lt;</code> but that is not the <em>usual</em> way
</li>
<li>
<p>
With string interpolation
</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb28-1"><a href="#cb28-1"></a>source = <span class="st">&quot;</span><span class="ot">#{</span><span class="dt">ROOT_DIR</span><span class="ot">}</span><span class="st">/</span><span class="ot">#{</span>project<span class="ot">}</span><span class="st">/App.config&quot;</span></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="st">&lt;li&gt;&lt;p&gt;with `</span>+<span class="st">`&lt;/p&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4"></a></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="st">```</span>ruby</span>
<span id="cb28-6"><a href="#cb28-6"></a>source = <span class="st">&quot;</span><span class="ot">#{</span><span class="dt">ROOT_DIR</span><span class="ot">}</span><span class="st">/&quot;</span> + project + <span class="st">&quot;/App.config&quot;</span></span>
<span id="cb28-7"><a href="#cb28-7"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="st">&lt;/ol&gt;</span></span>
<span id="cb28-9"><a href="#cb28-9"></a></span>
<span id="cb28-10"><a href="#cb28-10"></a><span class="st">The second method seems to be more efficient in term of memory/speed from what I&#39;ve seen (not measured though). All three methods will throw an uninitialized constant error when ROOT_DIR is nil.  </span></span>
<span id="cb28-11"><a href="#cb28-11"></a></span>
<span id="cb28-12"><a href="#cb28-12"></a><span class="st">When dealing with pathnames, you may want to use `</span><span class="dt">File</span>.join<span class="st">` to avoid messing up with pathname separator.  </span></span>
<span id="cb28-13"><a href="#cb28-13"></a></span>
<span id="cb28-14"><a href="#cb28-14"></a><span class="st">In the end, it is a matter of taste.  </span></span>
<span id="cb28-15"><a href="#cb28-15"></a></span>
<span id="cb28-16"><a href="#cb28-16"></a><span class="st">#### Answer 2 (score 92)</span></span>
<span id="cb28-17"><a href="#cb28-17"></a><span class="st">The `</span>+<span class="st">` operator is the normal concatenation choice, and is probably the fastest way to concatenate strings.  </span></span>
<span id="cb28-18"><a href="#cb28-18"></a></span>
<span id="cb28-19"><a href="#cb28-19"></a><span class="st">The difference between `</span>+<span class="st">` and `</span>&amp;lt;&amp;lt;<span class="st">` is that `</span>&amp;lt;&amp;lt;<span class="st">` changes the object on its left hand side, and `</span>+<span class="st">` doesn&#39;t.  </span></span>
<span id="cb28-20"><a href="#cb28-20"></a></span>
<span id="cb28-21"><a href="#cb28-21"></a><span class="st">```</span>ruby</span>
<span id="cb28-22"><a href="#cb28-22"></a>irb(main):<span class="dv">001</span>:<span class="dv">0</span>&gt; s = <span class="ch">&#39;a&#39;</span></span>
<span id="cb28-23"><a href="#cb28-23"></a>=&gt; <span class="st">&quot;a&quot;</span></span>
<span id="cb28-24"><a href="#cb28-24"></a>irb(main):<span class="dv">002</span>:<span class="dv">0</span>&gt; s + <span class="ch">&#39;b&#39;</span></span>
<span id="cb28-25"><a href="#cb28-25"></a>=&gt; <span class="st">&quot;ab&quot;</span></span>
<span id="cb28-26"><a href="#cb28-26"></a>irb(main):<span class="dv">003</span>:<span class="dv">0</span>&gt; s</span>
<span id="cb28-27"><a href="#cb28-27"></a>=&gt; <span class="st">&quot;a&quot;</span></span>
<span id="cb28-28"><a href="#cb28-28"></a>irb(main):<span class="dv">004</span>:<span class="dv">0</span>&gt; s &lt;&lt; <span class="ch">&#39;b&#39;</span></span>
<span id="cb28-29"><a href="#cb28-29"></a>=&gt; <span class="st">&quot;ab&quot;</span></span>
<span id="cb28-30"><a href="#cb28-30"></a>irb(main):<span class="dv">005</span>:<span class="dv">0</span>&gt; s</span>
<span id="cb28-31"><a href="#cb28-31"></a>=&gt; <span class="st">&quot;ab&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-77" class="level4">
<h4>Answer 3 (score 77)</h4>
<p>If you are just concatenating paths you can use Ruby’s own File.join method.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb29-1"><a href="#cb29-1"></a>source = <span class="dt">File</span>.join(<span class="dt">ROOT_DIR</span>, project, <span class="st">&#39;App.config&#39;</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="execute-a-command-line-binary-with-node.js-score-516439-in-2015" class="level3">
<h3>7: Execute a command line binary with Node.js (score <a href="https://stackoverflow.com/q/20643470.html">516439</a> in 2015)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>I am in the process of porting a CLI library from Ruby over to Node.js. In my code I execute several third party binaries when necessary. I am not sure how best to accomplish this in Node.</p>
<p>Here’s an example in Ruby where I call PrinceXML to convert a file to a PDF:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb30-1"><a href="#cb30-1"></a>cmd = system(<span class="st">&quot;prince -v builds/pdf/book.html -o builds/pdf/book.pdf&quot;</span>)</span></code></pre></div>
<p>What is the equivalent code in Node?</p>
</section>
<section id="answer-2-score-965" class="level4">
<h4>Answer 2 (score 965)</h4>
<p>For even newer version of Node.js (v8.1.4), the events and calls are similar or identical to older versions, but it’s encouraged to use the standard newer language features. Examples:</p>
<p>For buffered, non-stream formatted output (you get it all at once), use <a href="https://nodejs.org/docs/v8.1.4/api/child_process.html#child_process_child_process_exec_command_options_callback" rel="noreferrer"><code>child_process.exec</code></a>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb31-1"><a href="#cb31-1"></a>const { exec } = require(<span class="st">&#39;child_process&#39;</span>);</span>
<span id="cb31-2"><a href="#cb31-2"></a>exec(<span class="st">&#39;cat *.js bad_file | wc -l&#39;</span>, (err, stdout, stderr) =&gt; {</span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="kw">if</span> (err) {</span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="ot">//</span> node couldn<span class="st">&#39;t execute the command</span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="st">    return;</span></span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="st">  }</span></span>
<span id="cb31-7"><a href="#cb31-7"></a></span>
<span id="cb31-8"><a href="#cb31-8"></a><span class="st">  // the *entire* stdout and stderr (buffered)</span></span>
<span id="cb31-9"><a href="#cb31-9"></a><span class="st">  console.log(`stdout: ${stdout}`);</span></span>
<span id="cb31-10"><a href="#cb31-10"></a><span class="st">  console.log(`stderr: ${stderr}`);</span></span>
<span id="cb31-11"><a href="#cb31-11"></a><span class="st">});</span></span></code></pre></div>
<p>You can also use it with Promises:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb32-1"><a href="#cb32-1"></a>const util = require(<span class="st">&#39;util&#39;</span>);</span>
<span id="cb32-2"><a href="#cb32-2"></a>const exec = util.promisify(require(<span class="st">&#39;child_process&#39;</span>).exec);</span>
<span id="cb32-3"><a href="#cb32-3"></a></span>
<span id="cb32-4"><a href="#cb32-4"></a>async function ls() {</span>
<span id="cb32-5"><a href="#cb32-5"></a>  const { stdout, stderr } = await exec(<span class="st">&#39;ls&#39;</span>);</span>
<span id="cb32-6"><a href="#cb32-6"></a>  console.log(<span class="st">&#39;stdout:&#39;</span>, stdout);</span>
<span id="cb32-7"><a href="#cb32-7"></a>  console.log(<span class="st">&#39;stderr:&#39;</span>, stderr);</span>
<span id="cb32-8"><a href="#cb32-8"></a>}</span>
<span id="cb32-9"><a href="#cb32-9"></a>ls();</span></code></pre></div>
<p>If you wish to receive the data gradually in chunks (output as a stream), use <a href="https://nodejs.org/docs/v8.1.4/api/child_process.html#child_process_child_process_spawn_command_args_options" rel="noreferrer"><code>child_process.spawn</code></a>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb33-1"><a href="#cb33-1"></a>const { spawn } = require(<span class="st">&#39;child_process&#39;</span>);</span>
<span id="cb33-2"><a href="#cb33-2"></a>const child = spawn(<span class="st">&#39;ls&#39;</span>, [<span class="st">&#39;-lh&#39;</span>, <span class="st">&#39;/usr&#39;</span>]);</span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="ot">//</span> use child.stdout.setEncoding(<span class="st">&#39;utf8&#39;</span>)<span class="kw">; if</span> you want text chunks</span>
<span id="cb33-5"><a href="#cb33-5"></a>child.stdout.on(<span class="st">&#39;data&#39;</span>, (chunk) =&gt; {</span>
<span id="cb33-6"><a href="#cb33-6"></a>  <span class="ot">//</span> data from standard output is here as buffers</span>
<span id="cb33-7"><a href="#cb33-7"></a>});</span>
<span id="cb33-8"><a href="#cb33-8"></a></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="ot">//</span> since these are streams, you can pipe them elsewhere</span>
<span id="cb33-10"><a href="#cb33-10"></a>child.stderr.pipe(dest);</span>
<span id="cb33-11"><a href="#cb33-11"></a></span>
<span id="cb33-12"><a href="#cb33-12"></a>child.on(<span class="st">&#39;close&#39;</span>, (code) =&gt; {</span>
<span id="cb33-13"><a href="#cb33-13"></a>  console.log(<span class="st">`child process exited with code ${code}`</span>);</span>
<span id="cb33-14"><a href="#cb33-14"></a>});</span></code></pre></div>
<p>Both of these functions have a synchronous counterpart. An example for <a href="https://nodejs.org/docs/v8.1.4/api/child_process.html#child_process_child_process_execsync_command_options" rel="noreferrer"><code>child_process.execSync</code></a>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb34-1"><a href="#cb34-1"></a>const { execSync } = require(<span class="st">&#39;child_process&#39;</span>);</span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="ot">//</span> stderr is sent to stderr of parent process</span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="ot">//</span> you can set options.stdio <span class="kw">if</span> you want it to go elsewhere</span>
<span id="cb34-4"><a href="#cb34-4"></a>let stdout = execSync(<span class="st">&#39;ls&#39;</span>);</span></code></pre></div>
<p>As well as <a href="https://nodejs.org/docs/v8.1.4/api/child_process.html#child_process_child_process_spawnsync_command_args_options" rel="noreferrer"><code>child_process.spawnSync</code></a>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb35-1"><a href="#cb35-1"></a>const { spawnSync} = require(<span class="st">&#39;child_process&#39;</span>);</span>
<span id="cb35-2"><a href="#cb35-2"></a>const child = spawnSync(<span class="st">&#39;ls&#39;</span>, [<span class="st">&#39;-lh&#39;</span>, <span class="st">&#39;/usr&#39;</span>]);</span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a>console.log(<span class="st">&#39;error&#39;</span>, child.error);</span>
<span id="cb35-5"><a href="#cb35-5"></a>console.log(<span class="st">&#39;stdout &#39;</span>, child.stdout);</span>
<span id="cb35-6"><a href="#cb35-6"></a>console.log(<span class="st">&#39;stderr &#39;</span>, child.stderr);</span></code></pre></div>
<hr>
<p><strong>Note:</strong> The following code is still functional, but is primarily targeted at users of ES5 and before.</p>
<p>The module for spawning child processes with Node.js is well documented in the <a href="http://nodejs.org/docs/v5.0.0/api/child_process.html" rel="noreferrer">documentation</a> (v5.0.0). To execute a command and fetch its complete output as a buffer, use <a href="https://nodejs.org/docs/v5.0.0/api/child_process.html#child_process_child_process_exec_command_options_callback" rel="noreferrer"><code>child_process.exec</code></a>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb36-1"><a href="#cb36-1"></a>var exec = require(<span class="st">&#39;child_process&#39;</span>).exec;</span>
<span id="cb36-2"><a href="#cb36-2"></a>var cmd = <span class="st">&#39;prince -v builds/pdf/book.html -o builds/pdf/book.pdf&#39;</span>;</span>
<span id="cb36-3"><a href="#cb36-3"></a></span>
<span id="cb36-4"><a href="#cb36-4"></a>exec(cmd, function(error, stdout, stderr) {</span>
<span id="cb36-5"><a href="#cb36-5"></a>  <span class="ot">//</span> command output is <span class="kw">in</span> stdout</span>
<span id="cb36-6"><a href="#cb36-6"></a>});</span></code></pre></div>
<p>If you need to use handle process I/O with streams, such as when you are expecting large amounts of output, use <a href="https://nodejs.org/docs/v5.0.0/api/child_process.html#child_process_child_process_spawn_command_args_options" rel="noreferrer"><code>child_process.spawn</code></a>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb37-1"><a href="#cb37-1"></a>var spawn = require(<span class="st">&#39;child_process&#39;</span>).spawn;</span>
<span id="cb37-2"><a href="#cb37-2"></a>var child = spawn(<span class="st">&#39;prince&#39;</span>, [</span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="st">&#39;-v&#39;</span>, <span class="st">&#39;builds/pdf/book.html&#39;</span>,</span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="st">&#39;-o&#39;</span>, <span class="st">&#39;builds/pdf/book.pdf&#39;</span></span>
<span id="cb37-5"><a href="#cb37-5"></a>]);</span>
<span id="cb37-6"><a href="#cb37-6"></a></span>
<span id="cb37-7"><a href="#cb37-7"></a>child.stdout.on(<span class="st">&#39;data&#39;</span>, function(chunk) {</span>
<span id="cb37-8"><a href="#cb37-8"></a>  <span class="ot">//</span> output will be here <span class="kw">in</span> chunks</span>
<span id="cb37-9"><a href="#cb37-9"></a>});</span>
<span id="cb37-10"><a href="#cb37-10"></a></span>
<span id="cb37-11"><a href="#cb37-11"></a><span class="ot">//</span> <span class="kw">or</span> <span class="kw">if</span> you want to send output elsewhere</span>
<span id="cb37-12"><a href="#cb37-12"></a>child.stdout.pipe(dest);</span></code></pre></div>
<p>If you are executing a file rather than a command, you might want to use <a href="https://nodejs.org/docs/v5.0.0/api/child_process.html#child_process_child_process_execfile_file_args_options_callback" rel="noreferrer"><code>child_process.execFile</code></a>, which parameters which are almost identical to <code>spawn</code>, but has a fourth callback parameter like <code>exec</code> for retrieving output buffers. That might look a bit like this:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb38-1"><a href="#cb38-1"></a>var execFile = require(<span class="st">&#39;child_process&#39;</span>).execFile;</span>
<span id="cb38-2"><a href="#cb38-2"></a>execFile(file, args, options, function(error, stdout, stderr) {</span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="ot">//</span> command output is <span class="kw">in</span> stdout</span>
<span id="cb38-4"><a href="#cb38-4"></a>});</span></code></pre></div>
<hr>
<p>As of <a href="https://nodejs.org/en/blog/release/v0.11.12/" rel="noreferrer">v0.11.12</a>, Node now supports synchronous <code>spawn</code> and <code>exec</code>. All of the methods described above are asynchronous, and have a synchronous counterpart. Documentation for them can be found <a href="https://nodejs.org/docs/v5.0.0/api/child_process.html#child_process_synchronous_process_creation" rel="noreferrer">here</a>. While they are useful for scripting, do note that unlike the methods used to spawn child processes asynchronously, the synchronous methods do not return an instance of <a href="https://nodejs.org/docs/v5.0.0/api/child_process.html#child_process_class_childprocess" rel="noreferrer"><code>ChildProcess</code></a>.</p>
</section>
<section id="answer-3-score-234" class="level4">
<h4>Answer 3 (score 234)</h4>
<h5>
Node JS <code>v12.9.1</code>, LTS <code>v10.16.3</code>, and <code>v8.16.1</code> — Aug 2019
</h3>
<p><strong>Async method (Unix):</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb39-1"><a href="#cb39-1"></a><span class="st">&#39;use strict&#39;</span>;</span>
<span id="cb39-2"><a href="#cb39-2"></a></span>
<span id="cb39-3"><a href="#cb39-3"></a>const { spawn } = require( <span class="st">&#39;child_process&#39;</span> );</span>
<span id="cb39-4"><a href="#cb39-4"></a>const ls = spawn( <span class="st">&#39;ls&#39;</span>, [ <span class="st">&#39;-lh&#39;</span>, <span class="st">&#39;/usr&#39;</span> ] );</span>
<span id="cb39-5"><a href="#cb39-5"></a></span>
<span id="cb39-6"><a href="#cb39-6"></a>ls.stdout.on( <span class="st">&#39;data&#39;</span>, data =&gt; {</span>
<span id="cb39-7"><a href="#cb39-7"></a>    console.log( <span class="st">`stdout: ${data}`</span> );</span>
<span id="cb39-8"><a href="#cb39-8"></a>} );</span>
<span id="cb39-9"><a href="#cb39-9"></a></span>
<span id="cb39-10"><a href="#cb39-10"></a>ls.stderr.on( <span class="st">&#39;data&#39;</span>, data =&gt; {</span>
<span id="cb39-11"><a href="#cb39-11"></a>    console.log( <span class="st">`stderr: ${data}`</span> );</span>
<span id="cb39-12"><a href="#cb39-12"></a>} );</span>
<span id="cb39-13"><a href="#cb39-13"></a></span>
<span id="cb39-14"><a href="#cb39-14"></a>ls.on( <span class="st">&#39;close&#39;</span>, code =&gt; {</span>
<span id="cb39-15"><a href="#cb39-15"></a>    console.log( <span class="st">`child process exited with code ${code}`</span> );</span>
<span id="cb39-16"><a href="#cb39-16"></a>} );</span></code></pre></div>
<p><br/></p>
<p><strong>Async method (Windows):</strong></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb40-1"><a href="#cb40-1"></a><span class="st">&#39;use strict&#39;</span>;</span>
<span id="cb40-2"><a href="#cb40-2"></a></span>
<span id="cb40-3"><a href="#cb40-3"></a>const { spawn } = require( <span class="st">&#39;child_process&#39;</span> );</span>
<span id="cb40-4"><a href="#cb40-4"></a>const dir = spawn( <span class="st">&#39;dir&#39;</span>, [ <span class="ch">&#39;.&#39;</span> ] );</span>
<span id="cb40-5"><a href="#cb40-5"></a></span>
<span id="cb40-6"><a href="#cb40-6"></a>dir.stdout.on( <span class="st">&#39;data&#39;</span>, data =&gt; console.log( <span class="st">`stdout: ${data}`</span> ) );</span>
<span id="cb40-7"><a href="#cb40-7"></a>dir.stderr.on( <span class="st">&#39;data&#39;</span>, data =&gt; console.log( <span class="st">`stderr: ${data}`</span> ) );</span>
<span id="cb40-8"><a href="#cb40-8"></a>dir.on( <span class="st">&#39;close&#39;</span>, code =&gt; console.log( <span class="st">`child process exited with code ${code}`</span> ) );</span></code></pre></div>
<p><br/></p>
<p><strong>Sync:</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb41-1"><a href="#cb41-1"></a><span class="st">&#39;use strict&#39;</span>;</span>
<span id="cb41-2"><a href="#cb41-2"></a></span>
<span id="cb41-3"><a href="#cb41-3"></a>const { spawnSync } = require( <span class="st">&#39;child_process&#39;</span> );</span>
<span id="cb41-4"><a href="#cb41-4"></a>const ls = spawnSync( <span class="st">&#39;ls&#39;</span>, [ <span class="st">&#39;-lh&#39;</span>, <span class="st">&#39;/usr&#39;</span> ] );</span>
<span id="cb41-5"><a href="#cb41-5"></a></span>
<span id="cb41-6"><a href="#cb41-6"></a>console.log( <span class="st">`stderr: ${ls.stderr.toString()}`</span> );</span>
<span id="cb41-7"><a href="#cb41-7"></a>console.log( <span class="st">`stdout: ${ls.stdout.toString()}`</span> );</span></code></pre></div>
<p>From <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options" rel="nofollow noreferrer">Node.js v12.9.1 Documentation</a></p>
<p>The same goes for <a href="https://nodejs.org/docs/latest-v10.x/api/child_process.html#child_process_child_process_spawn_command_args_options" rel="nofollow noreferrer">Node.js v10.16.3 Documentation</a> and <a href="https://nodejs.org/docs/latest-v8.x/api/child_process.html#child_process_child_process_spawn_command_args_options" rel="nofollow noreferrer">Node.js v8.16.1 Documentation</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-a-random-number-in-ruby-score-515026-in-2018" class="level3">
<h3>8: How to get a random number in Ruby (score <a href="https://stackoverflow.com/q/198460.html">515026</a> in 2018)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>How do I generate a random number between <code>0</code> and <code>n</code>?</p>
</section>
<section id="answer-accepted-score-941" class="level4">
<h4>Answer accepted (score 941)</h4>
<p>Use <a href="http://www.ruby-doc.org/core-2.1.3/Kernel.html#method-i-rand" rel="noreferrer"><code>rand(range)</code></a></p>
<p>From <a href="http://www.codeodor.com/index.cfm/2007/3/25/Ruby-random-numbers/1042" rel="noreferrer">Ruby Random Numbers</a>:</p>
<blockquote>
<p>If you needed a random integer to simulate a roll of a six-sided die, you’d use: <code>1 + rand(6)</code>. A roll in craps could be simulated with <code>2 + rand(6) + rand(6)</code>.</p>
Finally, if you just need a random float, just call <code>rand</code> with no arguments.
</blockquote>
<hr>
<p>As <a href="https://stackoverflow.com/users/8279/marc-andre-lafortune">Marc-André Lafortune</a> mentions in <a href="https://stackoverflow.com/questions/198460/how-to-get-a-random-number-in-ruby/2773866#2773866">his answer below (go upvote it)</a>, <a href="http://www.ruby-lang.org/en/news/2009/07/20/ruby-1-9-2-preview-1-released/" rel="noreferrer">Ruby 1.9.2 has its own <code>Random</code> class</a> (that Marc-André himself <a href="http://redmine.ruby-lang.org/issues/show/3104" rel="noreferrer">helped to debug</a>, hence the <a href="http://redmine.ruby-lang.org/versions/show/11" rel="noreferrer">1.9.2 target</a> for that feature).</p>
<p>For instance, in this <a href="http://www.eggheadcafe.com/software/aspnet/35817496/random-integer-within-a-r.aspx" rel="noreferrer">game where you need to guess 10 numbers</a>, you can initialize them with:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb42-1"><a href="#cb42-1"></a><span class="dv">10</span>.times.map{ <span class="dv">20</span> + <span class="dt">Random</span>.rand(<span class="dv">11</span>) } </span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="co">#=&gt; [26, 26, 22, 20, 30, 26, 23, 23, 25, 22]</span></span></code></pre></div>
<p>Note:</p>
<ul>
<li>
<p>
Using <code>Random.new.rand(20..30)</code> (using <code>Random.new</code>) generally would not be a good idea, as explained in detail (again) by <a href="https://stackoverflow.com/users/8279/marc-andre-lafortune">Marc-André Lafortune</a>, in <a href="https://stackoverflow.com/questions/198460/how-to-get-a-random-number-in-ruby/2773866#2773866">his answer</a> (again).
</p>
</li>
<li>
<p>
But if you don’t use <code>Random.new</code>, then the <a href="http://www.ruby-doc.org/core/classes/Random.src/M000693.html" rel="noreferrer">class method <code>rand</code></a> only takes a <code>max</code> value, not a <code>Range</code>, as <a href="https://stackoverflow.com/users/66725/banister">banister</a> (energetically) points out in the comment (and as documented in the <a href="http://www.ruby-doc.org/core/classes/Random.html" rel="noreferrer">docs for <code>Random</code></a>). Only the <a href="http://www.ruby-doc.org/core/classes/Random.src/M000688.html" rel="noreferrer">instance method</a> can take a <code>Range</code>, as illustrated by <a href="https://stackoverflow.com/questions/5722881/generate-a-random-number-with-7-digits/5723105#5723105">generate a random number with 7 digits</a>.
</p>
</li>
</ul>
<p>This is why the equivalent of <code>Random.new.rand(20..30)</code> would be <code>20 + Random.rand(11)</code>, since <code>Random.rand(int)</code> returns “a random integer greater than or equal to zero and <em>less than the argument</em>.” <code>20..30</code> includes 30, I need to come up with a random number between 0 and 11, excluding 11.</p>
</section>
<section id="answer-2-score-588" class="level4">
<h4>Answer 2 (score 588)</h4>
<p>While you can use <code>rand(42-10) + 10</code> to get a random number between <code>10</code> and <code>42</code> (where 10 is inclusive and 42 exclusive), there’s a better way since Ruby 1.9.3, where you are able to call:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb43-1"><a href="#cb43-1"></a>rand(<span class="dv">10</span>...<span class="dv">42</span>) <span class="co"># =&gt; 13</span></span></code></pre></div>
<p>Available for all versions of Ruby by requiring my <a href="http://github.com/marcandre/backports" rel="noreferrer"><code>backports</code></a> gem.</p>
<p>Ruby 1.9.2 also introduced the <code>Random</code> class so you can create your own random number generator objects and has a nice API:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb44-1"><a href="#cb44-1"></a>r = <span class="dt">Random</span>.new</span>
<span id="cb44-2"><a href="#cb44-2"></a>r.rand(<span class="dv">10</span>...<span class="dv">42</span>) <span class="co"># =&gt; 22</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>r.bytes(<span class="dv">3</span>) <span class="co"># =&gt; &quot;rnd&quot;</span></span></code></pre></div>
<p>The <code>Random</code> class itself acts as a random generator, so you call directly:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb45-1"><a href="#cb45-1"></a><span class="dt">Random</span>.rand(<span class="dv">10</span>...<span class="dv">42</span>) <span class="co"># =&gt; same as rand(10...42)</span></span></code></pre></div>
<p><strong><em>Notes on <code>Random.new</code></em></strong></p>
<p>In most cases, the simplest is to use <code>rand</code> or <code>Random.rand</code>. Creating a new random generator each time you want a random number is a <em>really bad idea</em>. If you do this, you will get the random properties of the initial seeding algorithm which are atrocious compared to the properties of the <a href="http://en.wikipedia.org/wiki/Mersenne_twister" rel="noreferrer">random generator itself</a>.</p>
<p>If you use <code>Random.new</code>, you should thus call it <em>as rarely as possible</em>, for example once as <code>MyApp::Random = Random.new</code> and use it everywhere else.</p>
<p>The cases where <code>Random.new</code> is helpful are the following:</p>
<ul>
<li>
you are writing a gem and don’t want to interfere with the sequence of <code>rand</code>/<code>Random.rand</code> that the main programs might be relying on
</li>
<li>
you want separate reproducible sequences of random numbers (say one per thread)
</li>
<li>
you want to be able to save and resume a reproducible sequence of random numbers (easy as <code>Random</code> objects can marshalled)
</li>
</ul>
</section>
<section id="answer-3-score-46" class="level4">
<h4>Answer 3 (score 46)</h4>
<p>If you’re not only seeking for a number but also hex or uuid it’s worth mentioning that the <code>SecureRandom</code> module found its way from <code>ActiveSupport</code> to the ruby core in 1.9.2+. So without the need for a full blown framework:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb46-1"><a href="#cb46-1"></a>require <span class="st">&#39;securerandom&#39;</span></span>
<span id="cb46-2"><a href="#cb46-2"></a></span>
<span id="cb46-3"><a href="#cb46-3"></a>p <span class="dt">SecureRandom</span>.random_number(<span class="dv">100</span>) <span class="co">#=&gt; 15</span></span>
<span id="cb46-4"><a href="#cb46-4"></a>p <span class="dt">SecureRandom</span>.random_number(<span class="dv">100</span>) <span class="co">#=&gt; 88</span></span>
<span id="cb46-5"><a href="#cb46-5"></a></span>
<span id="cb46-6"><a href="#cb46-6"></a>p <span class="dt">SecureRandom</span>.random_number <span class="co">#=&gt; 0.596506046187744</span></span>
<span id="cb46-7"><a href="#cb46-7"></a>p <span class="dt">SecureRandom</span>.random_number <span class="co">#=&gt; 0.350621695741409</span></span>
<span id="cb46-8"><a href="#cb46-8"></a></span>
<span id="cb46-9"><a href="#cb46-9"></a>p <span class="dt">SecureRandom</span>.hex <span class="co">#=&gt; &quot;eb693ec8252cd630102fd0d0fb7c3485&quot;</span></span></code></pre></div>
<p>It’s documented here: <a href="http://rubydoc.info/stdlib/securerandom/1.9.3/SecureRandom" rel="noreferrer">Ruby 1.9.3 - Module: SecureRandom (lib/securerandom.rb) </a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="calling-shell-commands-from-ruby-score-504395-in-2015" class="level3">
<h3>9: Calling shell commands from Ruby (score <a href="https://stackoverflow.com/q/2232.html">504395</a> in 2015)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>How do I call shell commands from inside of a Ruby program? How do I then get output from these commands back into Ruby?</p>
</section>
<section id="answer-accepted-score-1269" class="level4">
<h4>Answer accepted (score 1269)</h4>
<p>This explanation is based on a commented <a href="http://gist.github.com/4069" rel="noreferrer">Ruby script</a> from a friend of mine. If you want to improve the script, feel free to update it at the link.</p>
<p>First, note that when Ruby calls out to a shell, it typically calls <code>/bin/sh</code>, <em>not</em> Bash. Some Bash syntax is not supported by <code>/bin/sh</code> on all systems.</p>
<p>Here are ways to execute a shell script:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb47-1"><a href="#cb47-1"></a>cmd = <span class="st">&quot;echo &#39;hi&#39;&quot;</span> <span class="co"># Sample string that can be used</span></span></code></pre></div>
<ol>
<li>
<p>
`Kernel#<code>, commonly called backticks –</code>cmd``
</p>
<p>This is like many other languages, including Bash, PHP, and Perl.</p>
<p>Returns the result (i.e. standard output) of the shell command.</p>
<p>Docs: <a href="http://ruby-doc.org/core/Kernel.html#method-i-60" rel="noreferrer">http://ruby-doc.org/core/Kernel.html#method-i-60</a></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb48-1"><a href="#cb48-1"></a>value = <span class="st">`echo &#39;hi&#39;`</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>value = <span class="st">`</span><span class="ot">#{</span>cmd<span class="ot">}</span><span class="st">`</span></span>
<span id="cb48-3"><a href="#cb48-3"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb48-4"><a href="#cb48-4"></a><span class="st">&lt;li&gt;&lt;p&gt;Built-in syntax, `</span>%x( cmd )<span class="st">`&lt;/p&gt;</span></span>
<span id="cb48-5"><a href="#cb48-5"></a></span>
<span id="cb48-6"><a href="#cb48-6"></a><span class="st">&lt;p&gt;Following the `</span>x<span class="st">` character is a delimiter, which can be any character.</span></span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="st">If the delimiter is one of the characters `</span>(<span class="st">`, `</span>[<span class="st">`, `</span>{<span class="st">`, or `</span>&amp;lt;<span class="st">`,</span></span>
<span id="cb48-8"><a href="#cb48-8"></a><span class="st">the literal consists of the characters up to the matching closing delimiter,</span></span>
<span id="cb48-9"><a href="#cb48-9"></a><span class="st">taking account of nested delimiter pairs. For all other delimiters, the</span></span>
<span id="cb48-10"><a href="#cb48-10"></a><span class="st">literal comprises the characters up to the next occurrence of the</span></span>
<span id="cb48-11"><a href="#cb48-11"></a><span class="st">delimiter character.  String interpolation `</span><span class="co">#{ ... }` is allowed.&lt;/p&gt;</span></span>
<span id="cb48-12"><a href="#cb48-12"></a></span>
<span id="cb48-13"><a href="#cb48-13"></a><span class="dt">Returns</span> the result (i.e. standard output) of the shell command, just like the backticks.  </span>
<span id="cb48-14"><a href="#cb48-14"></a></span>
<span id="cb48-15"><a href="#cb48-15"></a><span class="dt">Docs</span>: &lt;a href=<span class="st">&quot;http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;http:<span class="ot">//</span>www.ruby-doc.org/docs/<span class="dt">ProgrammingRuby</span>/html/language.html&lt;<span class="ot">/a&gt;  </span></span>
<span id="cb48-16"><a href="#cb48-16"></a></span>
<span id="cb48-17"><a href="#cb48-17"></a><span class="ot">```ruby</span></span>
<span id="cb48-18"><a href="#cb48-18"></a><span class="ot">value = %x( echo &#39;hi&#39; )</span></span>
<span id="cb48-19"><a href="#cb48-19"></a><span class="ot">value = %x[ #{</span>cmd<span class="ot">} ]</span></span>
<span id="cb48-20"><a href="#cb48-20"></a><span class="ot">```&lt;/</span>li&gt;</span>
<span id="cb48-21"><a href="#cb48-21"></a>&lt;li&gt;&lt;p&gt;<span class="st">`Kernel#system`</span>&lt;<span class="ot">/p&gt;</span></span>
<span id="cb48-22"><a href="#cb48-22"></a></span>
<span id="cb48-23"><a href="#cb48-23"></a><span class="ot">Executes the given command in a subshell.   </span></span>
<span id="cb48-24"><a href="#cb48-24"></a></span>
<span id="cb48-25"><a href="#cb48-25"></a><span class="ot">Returns `true` if the command was found and run successfully, `false` otherwise.  </span></span>
<span id="cb48-26"><a href="#cb48-26"></a></span>
<span id="cb48-27"><a href="#cb48-27"></a><span class="ot">Docs: &lt;a href=&quot;http:/</span>/ruby-doc.org/core/<span class="dt">Kernel</span>.html<span class="co">#method-i-system&quot; rel=&quot;noreferrer&quot;&gt;http://ruby-doc.org/core/Kernel.html#method-i-system&lt;/a&gt;  </span></span>
<span id="cb48-28"><a href="#cb48-28"></a></span>
<span id="cb48-29"><a href="#cb48-29"></a><span class="st">```ruby</span></span>
<span id="cb48-30"><a href="#cb48-30"></a><span class="st">wasGood = system( &quot;echo &#39;hi&#39;&quot; )</span></span>
<span id="cb48-31"><a href="#cb48-31"></a><span class="st">wasGood = system( cmd )</span></span>
<span id="cb48-32"><a href="#cb48-32"></a><span class="st">```</span>&lt;<span class="ot">/li&gt;</span></span>
<span id="cb48-33"><a href="#cb48-33"></a><span class="ot">&lt;li&gt;&lt;p&gt;`Kernel#exec`&lt;/</span>p&gt;</span>
<span id="cb48-34"><a href="#cb48-34"></a></span>
<span id="cb48-35"><a href="#cb48-35"></a><span class="dt">Replaces</span> the current process by running the given external command.  </span>
<span id="cb48-36"><a href="#cb48-36"></a></span>
<span id="cb48-37"><a href="#cb48-37"></a><span class="dt">Returns</span> none, the current process is replaced <span class="kw">and</span> never continues.  </span>
<span id="cb48-38"><a href="#cb48-38"></a></span>
<span id="cb48-39"><a href="#cb48-39"></a><span class="dt">Docs</span>: &lt;a href=<span class="st">&quot;http://ruby-doc.org/core/Kernel.html#method-i-exec&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;http:<span class="ot">//</span>ruby-doc.org/core/<span class="dt">Kernel</span>.html<span class="co">#method-i-exec&lt;/a&gt;  </span></span>
<span id="cb48-40"><a href="#cb48-40"></a></span>
<span id="cb48-41"><a href="#cb48-41"></a><span class="st">```ruby</span></span>
<span id="cb48-42"><a href="#cb48-42"></a><span class="st">exec( &quot;echo &#39;hi&#39;&quot; )</span></span>
<span id="cb48-43"><a href="#cb48-43"></a><span class="st">exec( cmd ) # Note: this will never be reached because of the line above</span></span>
<span id="cb48-44"><a href="#cb48-44"></a><span class="st">```</span>&lt;<span class="ot">/li&gt;</span></span>
<span id="cb48-45"><a href="#cb48-45"></a><span class="ot">&lt;/o</span>l&gt;</span>
<span id="cb48-46"><a href="#cb48-46"></a></span>
<span id="cb48-47"><a href="#cb48-47"></a>&lt;p&gt;<span class="dt">Here</span><span class="st">&#39;s some extra advice:</span></span>
<span id="cb48-48"><a href="#cb48-48"></a><span class="st">`$?`, which is the same as `$CHILD_STATUS`, accesses the status of the last system executed command if you use the backticks, `system()` or `%x{}`.</span></span>
<span id="cb48-49"><a href="#cb48-49"></a><span class="st">You can then access the `exitstatus` and `pid` properties:&lt;/p&gt;</span></span>
<span id="cb48-50"><a href="#cb48-50"></a></span>
<span id="cb48-51"><a href="#cb48-51"></a><span class="st">```ruby</span></span>
<span id="cb48-52"><a href="#cb48-52"></a><span class="st">$?.exitstatus</span></span></code></pre></div>
<p>For more reading see:</p>
<ul>
<li>
<a href="http://www.elctech.com/blog/i-m-in-ur-commandline-executin-ma-commands" rel="noreferrer">http://www.elctech.com/blog/i-m-in-ur-commandline-executin-ma-commands</a>
</li>
<li>
<a href="http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html" rel="noreferrer">http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html</a>
</li>
<li>
<a href="http://tech.natemurray.com/2007/03/ruby-shell-commands.html" rel="noreferrer">http://tech.natemurray.com/2007/03/ruby-shell-commands.html</a>
</li>
</ul>
</section>
<section id="answer-2-score-234" class="level4">
<h4>Answer 2 (score 234)</h4>
<p>Here’s a flowchart based on <a href="https://stackoverflow.com/a/7263556/2063546">this answer</a>. See also, <a href="https://stackoverflow.com/a/1402389/2063546">using <code>script</code> to emulate a terminal</a>.</p>
<p><a href="https://i.stack.imgur.com/1Vuvp.png" rel="noreferrer"><img src="https://i.stack.imgur.com/1Vuvp.png" alt="enter image description here"></a></p>
</section>
<section id="answer-3-score-158" class="level4">
<h4>Answer 3 (score 158)</h4>
<p>The way I like to do this is using the <code>%x</code> literal, which makes it easy (and readable!) to use quotes in a command, like so:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb49-1"><a href="#cb49-1"></a>directorylist =<span class="ot"> %x[</span><span class="st">find . -name &#39;*test.rb&#39; | sort</span><span class="ot">]</span></span></code></pre></div>
<p>Which, in this case, will populate file list with all test files under the current directory, which you can process as expected:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb50-1"><a href="#cb50-1"></a>directorylist.each <span class="kw">do</span> |filename|</span>
<span id="cb50-2"><a href="#cb50-2"></a>  filename.chomp!</span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="co"># work with file</span></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="kw">end</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ruby-function-to-remove-all-white-spaces-score-503134-in-2014" class="level3">
<h3>10: Ruby function to remove all white spaces? (score <a href="https://stackoverflow.com/q/1634750.html">503134</a> in 2014)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>What is the Ruby function to remove <strong>all</strong> white space? Kind of like php’s <code>trim()</code>?</p>
</section>
<section id="answer-2-score-818" class="level4">
<h4>Answer 2 (score 818)</h4>
<p>If you want to remove only leading and trailing whitespace (like PHP’s trim) you can use <code>.strip</code>, but if you want to remove <strong><em>all</em></strong> whitespace, you can use <code>.gsub(/\s+/, "")</code> instead .</p>
</section>
<section id="answer-3-score-478" class="level4">
<h4>Answer 3 (score 478)</h4>
<div class="sourceCode" id="cb51"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb51-1"><a href="#cb51-1"></a>s = <span class="st">&quot;I have white space&quot;</span>.delete(<span class="ch">&#39; &#39;</span>)</span></code></pre></div>
<p>And to emulate PHP’s <code>trim()</code> function:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb52-1"><a href="#cb52-1"></a>s = <span class="st">&quot;   I have leading and trailing white space   &quot;</span>.strip</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-right-way-to-iterate-through-an-array-in-ruby-score-497256-in-2011" class="level3">
<h3>11: What is the “right” way to iterate through an array in Ruby? (score <a href="https://stackoverflow.com/q/310634.html">497256</a> in 2011)</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>PHP, for all its warts, is pretty good on this count. There’s no difference between an array and a hash (maybe I’m naive, but this seems obviously right to me), and to iterate through either you just do</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb53-1"><a href="#cb53-1"></a>foreach (array/hash as <span class="dt">$key</span> =&gt; <span class="dt">$value</span>)</span></code></pre></div>
<p>In Ruby there are a bunch of ways to do this sort of thing:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb54-1"><a href="#cb54-1"></a>array.length.times <span class="kw">do</span> |i|</span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="kw">end</span></span>
<span id="cb54-3"><a href="#cb54-3"></a></span>
<span id="cb54-4"><a href="#cb54-4"></a>array.each</span>
<span id="cb54-5"><a href="#cb54-5"></a></span>
<span id="cb54-6"><a href="#cb54-6"></a>array.each_index</span>
<span id="cb54-7"><a href="#cb54-7"></a></span>
<span id="cb54-8"><a href="#cb54-8"></a><span class="kw">for</span> i <span class="kw">in</span> array</span></code></pre></div>
<p>Hashes make more sense, since I just always use</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb55-1"><a href="#cb55-1"></a>hash.each <span class="kw">do</span> |key, value|</span></code></pre></div>
<p>Why can’t I do this for arrays? If I want to remember just one method, I guess I can use <code>each_index</code> (since it makes both the index and value available), but it’s annoying to have to do <code>array[index]</code> instead of just <code>value</code>.</p>
<hr>
<p>Oh right, I forgot about <code>array.each_with_index</code>. However, this one sucks because it goes <code>|value, key|</code> and <code>hash.each</code> goes <code>|key, value|</code>! Is this not insane?</p>
</section>
<section id="answer-accepted-score-540" class="level4">
<h4>Answer accepted (score 540)</h4>
<p>This will iterate through all the elements:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb56-1"><a href="#cb56-1"></a>array = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span>
<span id="cb56-2"><a href="#cb56-2"></a>array.each { |x| puts x }</span></code></pre></div>
<p>Prints:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb57-1"><a href="#cb57-1"></a><span class="dv">1</span></span>
<span id="cb57-2"><a href="#cb57-2"></a><span class="dv">2</span></span>
<span id="cb57-3"><a href="#cb57-3"></a><span class="dv">3</span></span>
<span id="cb57-4"><a href="#cb57-4"></a><span class="dv">4</span></span>
<span id="cb57-5"><a href="#cb57-5"></a><span class="dv">5</span></span>
<span id="cb57-6"><a href="#cb57-6"></a><span class="dv">6</span></span></code></pre></div>
<p>This will iterate through all the elements giving you the value and the index:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb58-1"><a href="#cb58-1"></a>array = [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>]</span>
<span id="cb58-2"><a href="#cb58-2"></a>array.each_with_index {|val, index| puts <span class="st">&quot;</span><span class="ot">#{</span>val<span class="ot">}</span><span class="st"> =&gt; </span><span class="ot">#{</span>index<span class="ot">}</span><span class="st">&quot;</span> }</span></code></pre></div>
<p>Prints:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb59-1"><a href="#cb59-1"></a>A =&gt; <span class="dv">0</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>B =&gt; <span class="dv">1</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>C =&gt; <span class="dv">2</span></span></code></pre></div>
<p>I’m not quite sure from your question which one you are looking for.</p>
</section>
<section id="answer-2-score-81" class="level4">
<h4>Answer 2 (score 81)</h4>
<p>I think there is no one <em>right</em> way. There are a lot of different ways to iterate, and each has its own niche.</p>
<ul>
<li>
<code>each</code> is sufficient for many usages, since I don’t often care about the indexes.
</li>
<li>
<code>each_ with _index</code> acts like Hash#each - you get the value and the index.
</li>
<li>
<code>each_index</code> - just the indexes. I don’t use this one often. Equivalent to “length.times”.
</li>
<li>
<code>map</code> is another way to iterate, useful when you want to transform one array into another.
</li>
<li>
<code>select</code> is the iterator to use when you want to choose a subset.
</li>
<li>
<code>inject</code> is useful for generating sums or products, or collecting a single result.
</li>
</ul>
<p>It may seem like a lot to remember, but don’t worry, you can get by without knowing all of them. But as you start to learn and use the different methods, your code will become cleaner and clearer, and you’ll be on your way to Ruby mastery.</p>
</section>
<section id="answer-3-score-59" class="level4">
<h4>Answer 3 (score 59)</h4>
<p>I’m not saying that <code>Array</code> -&gt; <code>|value,index|</code> and <code>Hash</code> -&gt; <code>|key,value|</code> is not insane (see Horace Loeb’s comment), but I am saying that there is a sane way to expect this arrangement.</p>
<p>When I am dealing with arrays, I am focused on the elements in the array (not the index because the index is transitory). The method is each with index, i.e. each+index, or |each,index|, or <code>|value,index|</code>. This is also consistent with the index being viewed as an optional argument, e.g. |value| is equivalent to |value,index=nil| which is consistent with |value,index|.</p>
<p>When I am dealing with hashes, I am often more focused on the keys than the values, and I am usually dealing with keys and values in that order, either <code>key =&amp;gt; value</code> or <code>hash[key] = value</code>.</p>
<p>If you want duck-typing, then either explicitly use a defined method as Brent Longborough showed, or an implicit method as maxhawkins showed.</p>
<p>Ruby is all about accommodating the language to suit the programmer, not about the programmer accommodating to suit the language. This is why there are so many ways. There are so many ways to think about something. In Ruby, you choose the closest and the rest of the code usually falls out extremely neatly and concisely.</p>
<p>As for the original question, “What is the “right” way to iterate through an array in Ruby?", well, I think the core way (i.e. without powerful syntactic sugar or object oriented power) is to do:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb60-1"><a href="#cb60-1"></a><span class="kw">for</span> index <span class="kw">in</span> <span class="dv">0</span> ... array.size</span>
<span id="cb60-2"><a href="#cb60-2"></a>  puts <span class="st">&quot;array[</span><span class="ot">#{</span>index<span class="ot">}</span><span class="st">] = </span><span class="ot">#{</span>array[index].inspect<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb60-3"><a href="#cb60-3"></a><span class="kw">end</span></span></code></pre></div>
<p>But Ruby is all about powerful syntactic sugar and object oriented power, but anyway here is the equivalent for hashes, and the keys can be ordered or not:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb61-1"><a href="#cb61-1"></a><span class="kw">for</span> key <span class="kw">in</span> hash.keys.sort</span>
<span id="cb61-2"><a href="#cb61-2"></a>  puts <span class="st">&quot;hash[</span><span class="ot">#{</span>key.inspect<span class="ot">}</span><span class="st">] = </span><span class="ot">#{</span>hash[key].inspect<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb61-3"><a href="#cb61-3"></a><span class="kw">end</span></span></code></pre></div>
<p>So, my answer is, “The “right” way to iterate through an array in Ruby depends on you (i.e. the programmer or the programming team) and the project.". The better Ruby programmer makes the better choice (of which syntactic power and/or which object oriented approach). The better Ruby programmer continues to look for more ways.</p>
<hr>
<p>Now, I want to ask another question, “What is the “right” way to iterate through a Range in Ruby backwards?"! (This question is how I came to this page.)</p>
<p>It is nice to do (for the forwards):</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb62-1"><a href="#cb62-1"></a>(<span class="dv">1</span>..<span class="dv">10</span>).each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span></code></pre></div>
<p>but I don’t like to do (for the backwards):</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb63-1"><a href="#cb63-1"></a>(<span class="dv">1</span>..<span class="dv">10</span>).to_a.reverse.each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span></code></pre></div>
<p>
Well, I don’t actually mind doing that too much, but when I am teaching going backwards, I want to show my students a nice symmetry (i.e. with minimal difference, e.g. only adding a reverse, or a step -1, but without modifying anything else). You can do (for symmetry):
</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb64-1"><a href="#cb64-1"></a>(a=*<span class="dv">1</span>..<span class="dv">10</span>).each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb65-1"><a href="#cb65-1"></a>(a=*<span class="dv">1</span>..<span class="dv">10</span>).reverse.each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span></code></pre></div>
<p>which I don’t like much, but you can’t do</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb66-1"><a href="#cb66-1"></a>(*<span class="dv">1</span>..<span class="dv">10</span>).each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span>
<span id="cb66-2"><a href="#cb66-2"></a>(*<span class="dv">1</span>..<span class="dv">10</span>).reverse.each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span>
<span id="cb66-3"><a href="#cb66-3"></a><span class="co">#</span></span>
<span id="cb66-4"><a href="#cb66-4"></a>(<span class="dv">1</span>..<span class="dv">10</span>).step(<span class="dv">1</span>){|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span>
<span id="cb66-5"><a href="#cb66-5"></a>(<span class="dv">1</span>..<span class="dv">10</span>).step(-<span class="dv">1</span>){|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span>
<span id="cb66-6"><a href="#cb66-6"></a><span class="co">#</span></span>
<span id="cb66-7"><a href="#cb66-7"></a>(<span class="dv">1</span>..<span class="dv">10</span>).each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }</span>
<span id="cb66-8"><a href="#cb66-8"></a>(<span class="dv">10</span>..<span class="dv">1</span>).each{|i| puts <span class="st">&quot;i=</span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span> }   <span class="co"># I don&#39;t want this though.  It&#39;s dangerous</span></span></code></pre></div>
<p>You could ultimately do</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb67-1"><a href="#cb67-1"></a><span class="kw">class</span> <span class="dt">Range</span></span>
<span id="cb67-2"><a href="#cb67-2"></a></span>
<span id="cb67-3"><a href="#cb67-3"></a>  <span class="kw">def</span> each_reverse(&amp;block)</span>
<span id="cb67-4"><a href="#cb67-4"></a>    <span class="dv">self</span>.to_a.reverse.each(&amp;block)</span>
<span id="cb67-5"><a href="#cb67-5"></a>  <span class="kw">end</span></span>
<span id="cb67-6"><a href="#cb67-6"></a></span>
<span id="cb67-7"><a href="#cb67-7"></a><span class="kw">end</span></span></code></pre></div>
<p>but I want to teach pure Ruby rather than object oriented approaches (just yet). I would like to iterate backwards:</p>
<ul>
<li>
without creating an array (consider 0..1000000000)
</li>
<li>
working for any Range (e.g. Strings, not just Integers)
</li>
<li>
without using any extra object oriented power (i.e. no class modification)
</li>
</ul>
<p>I believe this is impossible without defining a <code>pred</code> method, which means modifying the Range class to use it. If you can do this please let me know, otherwise confirmation of impossibility would be appreciated though it would be disappointing. Perhaps Ruby 1.9 addresses this.</p>
<p>(Thanks for your time in reading this.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-the-current-absolute-url-in-ruby-on-rails-score-464615-in-2017" class="level3">
<h3>12: How do I get the current absolute URL in Ruby on Rails? (score <a href="https://stackoverflow.com/q/2165665.html">464615</a> in 2017)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>How can I get the current <strong>absolute URL</strong> in my Ruby on Rails view?</p>
<p>The <code>request.request_uri</code> only returns the relative URL.</p>
</section>
<section id="answer-accepted-score-1412" class="level4">
<h4>Answer accepted (score 1412)</h4>
<h5>
For Rails 3.2 or Rails 4+
</h3>
<p>You should use <code>request.original_url</code> to get the current URL.</p>
<p>This method is documented at <a href="http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-original_url" rel="noreferrer">original_url method</a>, but if you’re curious, the implementation is:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb68-1"><a href="#cb68-1"></a><span class="kw">def</span> original_url</span>
<span id="cb68-2"><a href="#cb68-2"></a>  base_url + original_fullpath</span>
<span id="cb68-3"><a href="#cb68-3"></a><span class="kw">end</span></span></code></pre></div>
<hr>
<h5>
For Rails 3:
</h3>
<p>You can write <code>"#{request.protocol}#{request.host_with_port}#{request.fullpath}"</code>, since <code>request.url</code> is now deprecated.</p>
<hr>
<h5>
For Rails 2:
</h3>
<p>You can write <code>request.url</code> instead of <code>request.request_uri</code>. This combines the protocol (usually http://) with the host, and request_uri to give you the full address.</p>
</section>
<section id="answer-2-score-133" class="level4">
<h4>Answer 2 (score 133)</h4>
<p>I think that the Ruby on Rails 3.0 method is now <code>request.fullpath</code>.</p>
</section>
<section id="answer-3-score-117" class="level4">
<h4>Answer 3 (score 117)</h4>
<p>You could use <code>url_for(only_path: false)</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-install-a-gem-or-updatie-rubygems-if-it-fails-with-a-permissions-error-score-459294-in-2019" class="level3">
<h3>13: How to install a gem or updatie RubyGems if it fails with a permissions error (score <a href="https://stackoverflow.com/q/14607193.html">459294</a> in 2019)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>I’m trying to install a gem using <code>gem install mygem</code> or update RubyGems using <code>gem update --system</code>, and it fails with this error:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb69-1"><a href="#cb69-1"></a><span class="dt">ERROR</span>:  <span class="dt">While</span> executing gem ... (<span class="dt">Gem</span>::<span class="dt">FilePermissionError</span>)</span>
<span id="cb69-2"><a href="#cb69-2"></a><span class="dt">You</span> don<span class="st">&#39;t have write permissions for the /Library/Ruby/Gems/2.0.0 directory.</span></span></code></pre></div>
<p>Does anyone have an idea how to solve this?</p>
</section>
<section id="answer-accepted-score-310" class="level4">
<h4>Answer accepted (score 310)</h4>
<blockquote>
You don’t have write permissions into the /Library/Ruby/Gems/1.8 directory.
</blockquote>
<p>means exactly that, you don’t have permission to write there.</p>
<p>That is the version of Ruby installed by Apple, for their own use. While it’s OK to make minor modifications to that <em>if you know what you’re doing</em>, because you are not sure about the permissions problem, I’d say it’s not a good idea to continue along that track.</p>
<p>Instead, I’ll strongly suggest you look into using either <a href="https://github.com/sstephenson/rbenv/" rel="noreferrer">rbenv</a> or <a href="https://rvm.io/rvm/install/" rel="noreferrer">RVM</a> to manage a separate Ruby, installed into a sandbox in your home directory, that you can modify/fold/spindle/change without worrying about messing up the system Ruby.</p>
<p>Between the two, I use rbenv, though I used RVM a lot in the past. rbenv takes a more “hands-off” approach to managing your Ruby installation. RVM has a lot of features and is very powerful, but, as a result is more intrusive. In either case, <em>READ</em> the installation documentation for them a couple times before starting to install whichever you pick.</p>
</section>
<section id="answer-2-score-394" class="level4">
<h4>Answer 2 (score 394)</h4>
<p>Try adding <code>--user-install</code> instead of using <code>sudo</code>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb70-1"><a href="#cb70-1"></a>gem install mygem --user-install</span></code></pre></div>
</section>
<section id="answer-3-score-89" class="level4">
<h4>Answer 3 (score 89)</h4>
<p>You really should be using a Ruby version manager.</p>
<p>Using one properly would prevent and can resolve your permission problem when executing a <code>gem update</code> command.</p>
<p>I recommend <em>rbenv</em>.</p>
<p>However, even when you use a Ruby version manager, you may still get that same error message.</p>
<p>If you do, and you are using rbenv, just verify that the <code>~/.rbenv/shims</code> directory is before the path for the system Ruby.</p>
<p><code>$ echo $PATH</code> will show you the order of your load path.</p>
<p>If you find that your shims directory comes after your system Ruby bin directory, then edit your <code>~/.bashrc</code> file and put this as your last export PATH command: <code>export PATH=$HOME/.rbenv/shims:$PATH</code></p>
<p><code>$ ruby -v</code> shows you what version of Ruby you are using</p>
<p>This shows that I’m currently using the system version of Ruby (usually not good)</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb71-1"><a href="#cb71-1"></a>$ ruby -v</span>
<span id="cb71-2"><a href="#cb71-2"></a>ruby <span class="fl">1.8</span>.<span class="dv">7</span> (<span class="dv">2012-02-08</span> patchlevel <span class="dv">358</span>) [universal-darwin12.<span class="dv">0</span>]</span></code></pre></div>
<p><code>$ rbenv global 1.9.3-p448</code> switches me to a newer, pre-installed version (see references below).</p>
<p>This shows that I’m using a newer version of Ruby (that likely won’t cause the Gem::FilePermissionError)</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb72-1"><a href="#cb72-1"></a>$ ruby -v</span>
<span id="cb72-2"><a href="#cb72-2"></a>ruby <span class="fl">1.9</span>.3p448 (<span class="dv">2013-06-27</span> revision <span class="dv">41675</span>) [x86_64-darwin12.<span class="fl">4.0</span>]</span></code></pre></div>
<p>You typically should not need to preface a gem command with sudo. If you feel the need to do so, something is probably misconfigured.</p>
<p>For details about rbenv see the following:</p>
<ul>
<li>
<a href="https://github.com/sstephenson/rbenv">https://github.com/sstephenson/rbenv</a>
</li>
<li>
<a href="http://robots.thoughtbot.com/post/47273164981/using-rbenv-to-manage-rubies-and-gems">http://robots.thoughtbot.com/post/47273164981/using-rbenv-to-manage-rubies-and-gems</a>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-attr_accessor-in-ruby-score-443423-in-2017" class="level3">
<h3>14: What is attr_accessor in Ruby? (score <a href="https://stackoverflow.com/q/4370960.html">443423</a> in 2017)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>I am having a hard time understanding <code>attr_accessor</code> in Ruby. Can someone explain this to me?</p>
</section>
<section id="answer-accepted-score-2266" class="level4">
<h4>Answer accepted (score 2266)</h4>
<p>Let’s say you have a class <code>Person</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb73-1"><a href="#cb73-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb73-2"><a href="#cb73-2"></a><span class="kw">end</span></span>
<span id="cb73-3"><a href="#cb73-3"></a></span>
<span id="cb73-4"><a href="#cb73-4"></a>person = <span class="dt">Person</span>.new</span>
<span id="cb73-5"><a href="#cb73-5"></a>person.name <span class="co"># =&gt; no method error</span></span></code></pre></div>
<p>Obviously we never defined method <code>name</code>. Let’s do that.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb74-1"><a href="#cb74-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>  <span class="kw">def</span> name</span>
<span id="cb74-3"><a href="#cb74-3"></a>    <span class="ot">@name</span> <span class="co"># simply returning an instance variable @name</span></span>
<span id="cb74-4"><a href="#cb74-4"></a>  <span class="kw">end</span></span>
<span id="cb74-5"><a href="#cb74-5"></a><span class="kw">end</span></span>
<span id="cb74-6"><a href="#cb74-6"></a></span>
<span id="cb74-7"><a href="#cb74-7"></a>person = <span class="dt">Person</span>.new</span>
<span id="cb74-8"><a href="#cb74-8"></a>person.name <span class="co"># =&gt; nil</span></span>
<span id="cb74-9"><a href="#cb74-9"></a>person.name = <span class="st">&quot;Dennis&quot;</span> <span class="co"># =&gt; no method error</span></span></code></pre></div>
<p>Aha, we can read the name, but that doesn’t mean we can assign the name. Those are two different methods. The former is called <em>reader</em> and latter is called <em>writer</em>. We didn’t create the writer yet so let’s do that.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb75-1"><a href="#cb75-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>  <span class="kw">def</span> name</span>
<span id="cb75-3"><a href="#cb75-3"></a>    <span class="ot">@name</span></span>
<span id="cb75-4"><a href="#cb75-4"></a>  <span class="kw">end</span></span>
<span id="cb75-5"><a href="#cb75-5"></a></span>
<span id="cb75-6"><a href="#cb75-6"></a>  <span class="kw">def</span> name=(str)</span>
<span id="cb75-7"><a href="#cb75-7"></a>    <span class="ot">@name</span> = str</span>
<span id="cb75-8"><a href="#cb75-8"></a>  <span class="kw">end</span></span>
<span id="cb75-9"><a href="#cb75-9"></a><span class="kw">end</span></span>
<span id="cb75-10"><a href="#cb75-10"></a></span>
<span id="cb75-11"><a href="#cb75-11"></a>person = <span class="dt">Person</span>.new</span>
<span id="cb75-12"><a href="#cb75-12"></a>person.name = <span class="st">&#39;Dennis&#39;</span></span>
<span id="cb75-13"><a href="#cb75-13"></a>person.name <span class="co"># =&gt; &quot;Dennis&quot;</span></span></code></pre></div>
<p>Awesome. Now we can write and read instance variable <code>@name</code> using reader and writer methods. Except, this is done so frequently, why waste time writing these methods every time? We can do it easier.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb76-1"><a href="#cb76-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>  <span class="ot">attr_reader</span> <span class="st">:name</span></span>
<span id="cb76-3"><a href="#cb76-3"></a>  <span class="ot">attr_writer</span> <span class="st">:name</span></span>
<span id="cb76-4"><a href="#cb76-4"></a><span class="kw">end</span></span></code></pre></div>
<p>Even this can get repetitive. When you want both reader and writer just use accessor!</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb77-1"><a href="#cb77-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>  <span class="ot">attr_accessor</span> <span class="st">:name</span></span>
<span id="cb77-3"><a href="#cb77-3"></a><span class="kw">end</span></span>
<span id="cb77-4"><a href="#cb77-4"></a></span>
<span id="cb77-5"><a href="#cb77-5"></a>person = <span class="dt">Person</span>.new</span>
<span id="cb77-6"><a href="#cb77-6"></a>person.name = <span class="st">&quot;Dennis&quot;</span></span>
<span id="cb77-7"><a href="#cb77-7"></a>person.name <span class="co"># =&gt; &quot;Dennis&quot;</span></span></code></pre></div>
<p>Works the same way! And guess what: the instance variable <code>@name</code> in our person object will be set just like when we did it manually, so you can use it in other methods.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb78-1"><a href="#cb78-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb78-2"><a href="#cb78-2"></a>  <span class="ot">attr_accessor</span> <span class="st">:name</span></span>
<span id="cb78-3"><a href="#cb78-3"></a></span>
<span id="cb78-4"><a href="#cb78-4"></a>  <span class="kw">def</span> greeting</span>
<span id="cb78-5"><a href="#cb78-5"></a>    <span class="st">&quot;Hello </span><span class="ot">#{@name}</span><span class="st">&quot;</span></span>
<span id="cb78-6"><a href="#cb78-6"></a>  <span class="kw">end</span></span>
<span id="cb78-7"><a href="#cb78-7"></a><span class="kw">end</span></span>
<span id="cb78-8"><a href="#cb78-8"></a></span>
<span id="cb78-9"><a href="#cb78-9"></a>person = <span class="dt">Person</span>.new</span>
<span id="cb78-10"><a href="#cb78-10"></a>person.name = <span class="st">&quot;Dennis&quot;</span></span>
<span id="cb78-11"><a href="#cb78-11"></a>person.greeting <span class="co"># =&gt; &quot;Hello Dennis&quot;</span></span></code></pre></div>
<p>That’s it. In order to understand how <code>attr_reader</code>, <code>attr_writer</code>, and <code>attr_accessor</code> methods actually generate methods for you, read other answers, books, ruby docs.</p>
</section>
<section id="answer-2-score-125" class="level4">
<h4>Answer 2 (score 125)</h4>
<p><a href="http://www.ruby-doc.org/core-2.0.0/Module.html#method-i-attr_accessor" rel="noreferrer">attr_accessor</a> is <em>just a method</em>. (The link should provide more insight with how it works - look at the pairs of methods generated, and a tutorial should show you how to use it.)</p>
<p>The trick is that <code>class</code> is <em>not a definition</em> in Ruby (it is “just a definition” in languages like C++ and Java), but it is an <em>expression that evaluates</em>. It is during this evaluation when the <code>attr_accessor</code> method is invoked which in turn modifies the current class - remember the implicit receiver: <code>self.attr_accessor</code>, where <code>self</code> is the “open” class object at this point.</p>
<p>The need for <code>attr_accessor</code> and friends, is, well:</p>
<ol>
<li>
<p>
Ruby, like Smalltalk, does not allow instance variables to be accessed outside of methods<sup>1</sup> for that object. That is, instance variables cannot be accessed in the <code>x.y</code> form as is common in say, Java or even Python. In Ruby <code>y</code> is always taken as a message to send (or “method to call”). Thus the <code>attr_*</code> methods create wrappers which proxy the instance <code>@variable</code> access through dynamically created methods.
</p>
</li>
<li>
<p>
Boilerplate sucks
</p>
</li>
</ol>
<p>Hope this clarifies some of the little details. Happy coding.</p>
<hr>
<p><sup>1</sup> This isn’t strictly true and there are <a href="https://stackoverflow.com/questions/1074729/get-the-value-of-an-instance-variable-given-its-name">some “techniques” around this</a>, but there is no syntax support for “public instance variable” access.</p>
</section>
<section id="answer-3-score-67" class="level4">
<h4>Answer 3 (score 67)</h4>
<p><code>attr_accessor</code> is (as <span class="citation" data-cites="pst">@pst</span> stated) just a method. What it does is create more methods for you.</p>
<p>So this code here:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb79-1"><a href="#cb79-1"></a><span class="kw">class</span> <span class="dt">Foo</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="ot">attr_accessor</span> <span class="st">:bar</span></span>
<span id="cb79-3"><a href="#cb79-3"></a><span class="kw">end</span></span></code></pre></div>
<p>is equivalent to this code:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb80-1"><a href="#cb80-1"></a><span class="kw">class</span> <span class="dt">Foo</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>  <span class="kw">def</span> bar</span>
<span id="cb80-3"><a href="#cb80-3"></a>    <span class="ot">@bar</span></span>
<span id="cb80-4"><a href="#cb80-4"></a>  <span class="kw">end</span></span>
<span id="cb80-5"><a href="#cb80-5"></a>  <span class="kw">def</span> bar=( new_value )</span>
<span id="cb80-6"><a href="#cb80-6"></a>    <span class="ot">@bar</span> = new_value</span>
<span id="cb80-7"><a href="#cb80-7"></a>  <span class="kw">end</span></span>
<span id="cb80-8"><a href="#cb80-8"></a><span class="kw">end</span></span></code></pre></div>
<p>You can write this sort of method yourself in Ruby:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb81-1"><a href="#cb81-1"></a><span class="kw">class</span> <span class="dt">Module</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>  <span class="kw">def</span> var( method_name )</span>
<span id="cb81-3"><a href="#cb81-3"></a>    inst_variable_name = <span class="st">&quot;@</span><span class="ot">#{</span>method_name<span class="ot">}</span><span class="st">&quot;</span>.to_sym</span>
<span id="cb81-4"><a href="#cb81-4"></a>    define_method method_name <span class="kw">do</span></span>
<span id="cb81-5"><a href="#cb81-5"></a>      instance_variable_get inst_variable_name</span>
<span id="cb81-6"><a href="#cb81-6"></a>    <span class="kw">end</span></span>
<span id="cb81-7"><a href="#cb81-7"></a>    define_method <span class="st">&quot;</span><span class="ot">#{</span>method_name<span class="ot">}</span><span class="st">=&quot;</span> <span class="kw">do</span> |new_value|</span>
<span id="cb81-8"><a href="#cb81-8"></a>      instance_variable_set inst_variable_name, new_value</span>
<span id="cb81-9"><a href="#cb81-9"></a>    <span class="kw">end</span></span>
<span id="cb81-10"><a href="#cb81-10"></a>  <span class="kw">end</span></span>
<span id="cb81-11"><a href="#cb81-11"></a><span class="kw">end</span></span>
<span id="cb81-12"><a href="#cb81-12"></a></span>
<span id="cb81-13"><a href="#cb81-13"></a><span class="kw">class</span> <span class="dt">Foo</span></span>
<span id="cb81-14"><a href="#cb81-14"></a>  var <span class="st">:bar</span></span>
<span id="cb81-15"><a href="#cb81-15"></a><span class="kw">end</span></span>
<span id="cb81-16"><a href="#cb81-16"></a></span>
<span id="cb81-17"><a href="#cb81-17"></a>f = <span class="dt">Foo</span>.new</span>
<span id="cb81-18"><a href="#cb81-18"></a>p f.bar     <span class="co">#=&gt; nil</span></span>
<span id="cb81-19"><a href="#cb81-19"></a>f.bar = <span class="dv">42</span></span>
<span id="cb81-20"><a href="#cb81-20"></a>p f.bar     <span class="co">#=&gt; 42</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="parsing-a-json-string-in-ruby-score-425311-in-2016" class="level3">
<h3>15: Parsing a JSON string in Ruby (score <a href="https://stackoverflow.com/q/5410682.html">425311</a> in 2016)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p>I have a string that I want to parse in Ruby:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb82-1"><a href="#cb82-1"></a>string = <span class="st">&#39;{&quot;desc&quot;:{&quot;someKey&quot;:&quot;someValue&quot;,&quot;anotherKey&quot;:&quot;value&quot;},&quot;main_item&quot;:{&quot;stats&quot;:{&quot;a&quot;:8,&quot;b&quot;:12,&quot;c&quot;:10}}}&#39;</span></span></code></pre></div>
<p>Is there an easy way to extract the data?</p>
</section>
<section id="answer-accepted-score-523" class="level4">
<h4>Answer accepted (score 523)</h4>
<p>This looks like <a href="http://www.json.org" rel="noreferrer">JavaScript Object Notation (JSON)</a>. You can parse JSON that resides in some variable, e.g. <code>json_string</code>, like so:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb83-1"><a href="#cb83-1"></a>require <span class="st">&#39;json&#39;</span></span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="dt">JSON</span>.parse(json_string)</span></code></pre></div>
<p>If you’re using an older Ruby, you may need to install the <a href="https://rubygems.org/gems/json" rel="noreferrer">json gem</a>.</p>
<hr>
<p>There are also other implementations of JSON for Ruby that may fit some use-cases better:</p>
<ul>
<li>
<a href="https://rubygems.org/gems/yajl-ruby" rel="noreferrer">YAJL C Bindings for Ruby</a>
</li>
<li>
<a href="https://rubygems.org/gems/json-stream" rel="noreferrer">JSON::Stream</a>
</li>
</ul>
</section>
<section id="answer-2-score-200" class="level4">
<h4>Answer 2 (score 200)</h4>
<p>Just to extend the answers a bit with what to do with the parsed object:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb84-1"><a href="#cb84-1"></a><span class="co"># JSON Parsing example</span></span>
<span id="cb84-2"><a href="#cb84-2"></a>require <span class="st">&quot;rubygems&quot;</span></span>
<span id="cb84-3"><a href="#cb84-3"></a>require <span class="st">&quot;json&quot;</span></span>
<span id="cb84-4"><a href="#cb84-4"></a></span>
<span id="cb84-5"><a href="#cb84-5"></a>string = <span class="st">&#39;{&quot;desc&quot;:{&quot;someKey&quot;:&quot;someValue&quot;,&quot;anotherKey&quot;:&quot;value&quot;},&quot;main_item&quot;:{&quot;stats&quot;:{&quot;a&quot;:8,&quot;b&quot;:12,&quot;c&quot;:10}}}&#39;</span></span>
<span id="cb84-6"><a href="#cb84-6"></a>parsed = <span class="dt">JSON</span>.parse(string) <span class="co"># returns a hash</span></span>
<span id="cb84-7"><a href="#cb84-7"></a></span>
<span id="cb84-8"><a href="#cb84-8"></a>p parsed[<span class="st">&quot;desc&quot;</span>][<span class="st">&quot;someKey&quot;</span>]</span>
<span id="cb84-9"><a href="#cb84-9"></a>p parsed[<span class="st">&quot;main_item&quot;</span>][<span class="st">&quot;stats&quot;</span>][<span class="st">&quot;a&quot;</span>]</span>
<span id="cb84-10"><a href="#cb84-10"></a></span>
<span id="cb84-11"><a href="#cb84-11"></a><span class="co"># Read JSON from a file, iterate over objects</span></span>
<span id="cb84-12"><a href="#cb84-12"></a>file = open(<span class="st">&quot;shops.json&quot;</span>)</span>
<span id="cb84-13"><a href="#cb84-13"></a>json = file.read</span>
<span id="cb84-14"><a href="#cb84-14"></a></span>
<span id="cb84-15"><a href="#cb84-15"></a>parsed = <span class="dt">JSON</span>.parse(json)</span>
<span id="cb84-16"><a href="#cb84-16"></a></span>
<span id="cb84-17"><a href="#cb84-17"></a>parsed[<span class="st">&quot;shop&quot;</span>].each <span class="kw">do</span> |shop|</span>
<span id="cb84-18"><a href="#cb84-18"></a>  p shop[<span class="st">&quot;id&quot;</span>]</span>
<span id="cb84-19"><a href="#cb84-19"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-3-score-37" class="level4">
<h4>Answer 3 (score 37)</h4>
<p>As of Ruby v1.9.3 you don’t need to install any Gems in order to parse JSON, simply use <code>require 'json'</code>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb85-1"><a href="#cb85-1"></a>require <span class="st">&#39;json&#39;</span></span>
<span id="cb85-2"><a href="#cb85-2"></a></span>
<span id="cb85-3"><a href="#cb85-3"></a>json = <span class="dt">JSON</span>.parse <span class="st">&#39;{&quot;foo&quot;:&quot;bar&quot;, &quot;ping&quot;:&quot;pong&quot;}&#39;</span></span>
<span id="cb85-4"><a href="#cb85-4"></a>puts json[<span class="st">&#39;foo&#39;</span>] <span class="co"># prints &quot;bar&quot;</span></span></code></pre></div>
<p>See <a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html" rel="noreferrer">JSON</a> at Ruby-Doc.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-ruby-ide-do-you-prefer-score-424357-in-2008" class="level3">
<h3>16: What Ruby IDE do you prefer? (score <a href="https://stackoverflow.com/q/16991.html">424357</a> in 2008)</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>I’ve been using Eclipse with RDT (not RadRails) a lot lately, and I’m quite happy with it, but I’m wondering if you guys know any decent alternatives. I know NetBeans also supports Ruby these days, but I’m not sure what it has to offer over Eclipse.</p>
<p>Please, list any features you think are brilliant or useful when suggesting an IDE, makes it easier to compare.</p>
<p>Also, I said Ruby, not Rails. While Rails support is a plus, I prefer things to be none Rails-centric. It should also be available on Linux and optionally Solaris.</p>
</section>
<section id="answer-accepted-score-28" class="level4">
<h4>Answer accepted (score 28)</h4>
<p>Have you tried <a href="http://www.aptana.com/" rel="nofollow noreferrer">Aptana</a>? It’s based on Eclipse and they have a sweet <a href="http://www.aptana.com/rails" rel="nofollow noreferrer">Rails</a> plugin.</p>
</section>
<section id="answer-2-score-76" class="level4">
<h4>Answer 2 (score 76)</h4>
<p><a href="http://jetbrains.com/ruby/index.html" rel="nofollow noreferrer">RubyMine</a> from JetBrains. (Also available as a plugin to <a href="http://jetbrains.com/idea/index.html" rel="nofollow noreferrer">IntelliJ IDEA</a>)</p>
</section>
<section id="answer-3-score-26" class="level4">
<h4>Answer 3 (score 26)</h4>
<p><a href="http://redcareditor.com/" rel="nofollow noreferrer">Redcar</a> has been getting some attention lately, as well. Still early in its life, but it shows promise.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="checking-if-a-variable-is-not-nil-and-not-zero-in-ruby-score-422191-in-2015" class="level3">
<h3>17: Checking if a variable is not nil and not zero in ruby (score <a href="https://stackoverflow.com/q/252203.html">422191</a> in 2015)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>I am using the following code to check if a variable is not nil and not zero</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb86-1"><a href="#cb86-1"></a><span class="kw">if</span>(discount != <span class="dv">nil</span> &amp;&amp; discount != <span class="dv">0</span>) </span>
<span id="cb86-2"><a href="#cb86-2"></a>  ...</span>
<span id="cb86-3"><a href="#cb86-3"></a><span class="kw">end</span></span></code></pre></div>
<p>Is there a better way to do this?</p>
</section>
<section id="answer-accepted-score-397" class="level4">
<h4>Answer accepted (score 397)</h4>
<pre>
unless discount.nil? || discount == 0
  # ...
end
</pre>
</section>
<section id="answer-2-score-40" class="level4">
<h4>Answer 2 (score 40)</h4>
<div class="sourceCode" id="cb87"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb87-1"><a href="#cb87-1"></a><span class="kw">class</span> <span class="dt">Object</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>  <span class="kw">def</span> nil_zero?</span>
<span id="cb87-3"><a href="#cb87-3"></a>    <span class="dv">self</span>.nil? || <span class="dv">self</span> == <span class="dv">0</span></span>
<span id="cb87-4"><a href="#cb87-4"></a>  <span class="kw">end</span></span>
<span id="cb87-5"><a href="#cb87-5"></a><span class="kw">end</span></span>
<span id="cb87-6"><a href="#cb87-6"></a></span>
<span id="cb87-7"><a href="#cb87-7"></a><span class="co"># which lets you do</span></span>
<span id="cb87-8"><a href="#cb87-8"></a><span class="dv">nil</span>.nil_zero? <span class="co"># returns true</span></span>
<span id="cb87-9"><a href="#cb87-9"></a><span class="dv">0</span>.nil_zero?   <span class="co"># returns true</span></span>
<span id="cb87-10"><a href="#cb87-10"></a><span class="dv">1</span>.nil_zero?   <span class="co"># returns false</span></span>
<span id="cb87-11"><a href="#cb87-11"></a><span class="st">&quot;a&quot;</span>.nil_zero? <span class="co"># returns false</span></span>
<span id="cb87-12"><a href="#cb87-12"></a></span>
<span id="cb87-13"><a href="#cb87-13"></a><span class="kw">unless</span> discount.nil_zero?</span>
<span id="cb87-14"><a href="#cb87-14"></a>  <span class="co"># do stuff...</span></span>
<span id="cb87-15"><a href="#cb87-15"></a><span class="kw">end</span></span></code></pre></div>
<p>Beware of the usual disclaimers… great power/responsibility, monkey patching leading to the dark side etc.</p>
</section>
<section id="answer-3-score-28" class="level4">
<h4>Answer 3 (score 28)</h4>
<pre>
unless [nil, 0].include?(discount) 
  # ...
end
</pre>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-sum-array-of-numbers-in-ruby-score-412523-in-2014" class="level3">
<h3>18: How to sum array of numbers in Ruby? (score <a href="https://stackoverflow.com/q/1538789.html">412523</a> in 2014)</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>I have an array of integers.</p>
<p>For example:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb88-1"><a href="#cb88-1"></a>array = [<span class="dv">123</span>,<span class="dv">321</span>,<span class="dv">12389</span>]</span></code></pre></div>
<p>Is there any nice way to get the sum of them?</p>
<p>I know, that</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb89-1"><a href="#cb89-1"></a>sum = <span class="dv">0</span></span>
<span id="cb89-2"><a href="#cb89-2"></a>array.each { |a| sum+=a }</span></code></pre></div>
<p>would work.</p>
</section>
<section id="answer-accepted-score-598" class="level4">
<h4>Answer accepted (score 598)</h4>
<p>Try this:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb90-1"><a href="#cb90-1"></a>array.inject(<span class="dv">0</span>){|sum,x| sum + x }</span></code></pre></div>
<p><a href="https://ruby-doc.org/core/Enumerable.html#method-i-inject" rel="nofollow noreferrer">See Ruby’s Enumerable Documentation</a></p>
<p>(note: the <code>0</code> base case is needed so that <code>0</code> will be returned on an empty array instead of <code>nil</code>)</p>
</section>
<section id="answer-2-score-795" class="level4">
<h4>Answer 2 (score 795)</h4>
<p>Or try the Ruby 1.9 way:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb91-1"><a href="#cb91-1"></a>array.inject(<span class="dv">0</span>, :+)</span></code></pre></div>
<p>Note: the <code>0</code> base case is needed otherwise <code>nil</code> will be returned on empty arrays:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb92-1"><a href="#cb92-1"></a>&gt; [].inject(:+)</span>
<span id="cb92-2"><a href="#cb92-2"></a><span class="dv">nil</span></span>
<span id="cb92-3"><a href="#cb92-3"></a>&gt; [].inject(<span class="dv">0</span>, :+)</span>
<span id="cb92-4"><a href="#cb92-4"></a><span class="dv">0</span></span></code></pre></div>
</section>
<section id="answer-3-score-280" class="level4">
<h4>Answer 3 (score 280)</h4>
<div class="sourceCode" id="cb93"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb93-1"><a href="#cb93-1"></a>array.reduce(<span class="dv">0</span>, :+)</span></code></pre></div>
<p>While equivalent to <code>array.inject(0, :+)</code>, the term <strong>reduce</strong> is entering a more common vernacular with the rise of <a href="http://en.wikipedia.org/wiki/MapReduce">MapReduce programming models</a>.</p>
<p><strong>inject</strong>, <strong>reduce</strong>, <strong>fold</strong>, <strong>accumulate</strong>, and <strong>compress</strong> are all synonymous as a class of <a href="http://en.wikipedia.org/wiki/Reduce_%28higher-order_function%29">folding functions</a>. I find consistency across your code base most important, but since various communities tend to prefer one word over another, it’s nonetheless useful to know the alternatives.</p>
<p>To emphasize the map-reduce verbiage, here’s a version that is a little bit more forgiving on what ends up in that array.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb94-1"><a href="#cb94-1"></a>array.map(&amp;<span class="st">:to_i</span>).reduce(<span class="dv">0</span>, :+)</span></code></pre></div>
<p>Some additional relevant reading:</p>
<ul>
<li>
<a href="http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject">http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject</a>
</li>
<li>
<a href="http://en.wikipedia.org/wiki/MapReduce">http://en.wikipedia.org/wiki/MapReduce</a>
</li>
<li>
<a href="http://en.wikipedia.org/wiki/Fold_(higher-order_function)">http://en.wikipedia.org/wiki/Fold_(higher-order_function)</a>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="determining-type-of-an-object-in-ruby-score-395964-in-2016" class="level3">
<h3>19: Determining type of an object in ruby (score <a href="https://stackoverflow.com/q/15769739.html">395964</a> in 2016)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>I’ll use python as an example of what I’m looking for (you can think of it as pseudocode if you don’t know Python):</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb95-1"><a href="#cb95-1"></a>&gt;&gt;&gt; a = <span class="dv">1</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>&gt;&gt;&gt; type(a)</span>
<span id="cb95-3"><a href="#cb95-3"></a>&lt;type <span class="st">&#39;int&#39;</span>&gt;</span></code></pre></div>
<p>I know in ruby I can do :</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb96-1"><a href="#cb96-1"></a><span class="fl">1.9</span>.3p194 :<span class="dv">002</span> &gt; <span class="dv">1</span>.class</span>
<span id="cb96-2"><a href="#cb96-2"></a> =&gt; <span class="dt">Fixnum</span> </span></code></pre></div>
<p>But is this the proper way to determine the type of the object?</p>
</section>
<section id="answer-accepted-score-550" class="level4">
<h4>Answer accepted (score 550)</h4>
<p>The proper way to determine the “type” of an object, which is a wobbly term in the Ruby world, is to call <code>object.class</code>.</p>
<p>Since classes can inherit from other classes, if you want to determine if an object is “of a particular type” you might call <code>object.is_a?(ClassName)</code> to see if <code>object</code> is of type <code>ClassName</code> or derived from it.</p>
<p>Normally type checking is not done in Ruby, but instead objects are assessed based on their ability to respond to particular methods, commonly called “<a href="http://en.wikipedia.org/wiki/Duck_typing" rel="noreferrer">Duck typing</a>”. In other words, if it responds to the methods you want, there’s no reason to be particular about the type.</p>
<p>For example, <code>object.is_a?(String)</code> is too rigid since another class might implement methods that convert it into a string, or make it behave identically to how String behaves. <code>object.respond_to?(:to_s)</code> would be a better way to test that the object in question does what you want.</p>
</section>
<section id="answer-2-score-71" class="level4">
<h4>Answer 2 (score 71)</h4>
<p>you could also try: <a href="http://ruby-doc.org/core-2.0/Object.html#method-i-instance_of-3F"><code>instance_of?</code></a></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb97-1"><a href="#cb97-1"></a>p <span class="dv">1</span>.instance_of? <span class="dt">Fixnum</span>    <span class="co">#=&gt; True</span></span>
<span id="cb97-2"><a href="#cb97-2"></a>p <span class="st">&quot;1&quot;</span>.instance_of? <span class="dt">String</span>  <span class="co">#=&gt; True</span></span>
<span id="cb97-3"><a href="#cb97-3"></a>p [<span class="dv">1</span>,<span class="dv">2</span>].instance_of? <span class="dt">Array</span> <span class="co">#=&gt; True</span></span></code></pre></div>
</section>
<section id="answer-3-score-40" class="level4">
<h4>Answer 3 (score 40)</h4>
<p>Oftentimes in Ruby, you don’t actually care what the object’s class is, per se, you just care that it responds to a certain method. This is known as <a href="http://en.wikipedia.org/wiki/Duck_typing">Duck Typing</a> and you’ll see it in all sorts of Ruby codebases.</p>
<p>So in many (if not most) cases, its best to use Duck Typing using <a href="http://ruby-doc.org/core-2.0/Object.html#method-i-respond_to-3F"><code>#respond_to?(method)</code></a>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb98-1"><a href="#cb98-1"></a>object.respond_to?(<span class="st">:to_i</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-generate-a-random-string-in-ruby-score-394882-in-2017" class="level3">
<h3>20: How to generate a random string in Ruby (score <a href="https://stackoverflow.com/q/88311.html">394882</a> in 2017)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>I’m currently generating an 8-character pseudo-random uppercase string for “A” .. “Z”:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb99-1"><a href="#cb99-1"></a>value = <span class="st">&quot;&quot;</span>; <span class="dv">8</span>.times{value  &lt;&lt; (<span class="dv">65</span> + rand(<span class="dv">25</span>)).chr}</span></code></pre></div>
<p>but it doesn’t look clean, and it can’t be passed as an argument since it isn’t a single statement. To get a mixed-case string “a” .. “z” plus “A” .. “Z”, I changed it to:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb100-1"><a href="#cb100-1"></a>value = <span class="st">&quot;&quot;</span>; <span class="dv">8</span>.times{value &lt;&lt; ((rand(<span class="dv">2</span>)==<span class="dv">1</span>?<span class="dv">65</span>:<span class="dv">97</span>) + rand(<span class="dv">25</span>)).chr}</span></code></pre></div>
<p>but it looks like trash.</p>
<p>Does anyone have a better method?</p>
</section>
<section id="answer-accepted-score-941-1" class="level4">
<h4>Answer accepted (score 941)</h4>
<div class="sourceCode" id="cb101"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb101-1"><a href="#cb101-1"></a>(<span class="dv">0</span>...<span class="dv">8</span>).map { (<span class="dv">65</span> + rand(<span class="dv">26</span>)).chr }.join</span></code></pre></div>
<p>I spend too much time golfing.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb102-1"><a href="#cb102-1"></a>(<span class="dv">0</span>...<span class="dv">50</span>).map { (<span class="ch">&#39;a&#39;</span>..<span class="ch">&#39;z&#39;</span>).to_a[rand(<span class="dv">26</span>)] }.join</span></code></pre></div>
<p>And a last one that’s even more confusing, but more flexible and wastes fewer cycles:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb103-1"><a href="#cb103-1"></a>o = [(<span class="ch">&#39;a&#39;</span>..<span class="ch">&#39;z&#39;</span>), (<span class="ch">&#39;A&#39;</span>..<span class="ch">&#39;Z&#39;</span>)].map(&amp;<span class="st">:to_a</span>).flatten</span>
<span id="cb103-2"><a href="#cb103-2"></a>string = (<span class="dv">0</span>...<span class="dv">50</span>).map { o[rand(o.length)] }.join</span></code></pre></div>
</section>
<section id="answer-2-score-778" class="level4">
<h4>Answer 2 (score 778)</h4>
<p>Why not use SecureRandom?</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb104-1"><a href="#cb104-1"></a>require <span class="st">&#39;securerandom&#39;</span></span>
<span id="cb104-2"><a href="#cb104-2"></a>random_string = <span class="dt">SecureRandom</span>.hex</span>
<span id="cb104-3"><a href="#cb104-3"></a></span>
<span id="cb104-4"><a href="#cb104-4"></a><span class="co"># outputs: 5b5cd0da3121fc53b4bc84d0c8af2e81 (i.e. 32 chars of 0..9, a..f)</span></span></code></pre></div>
<p>SecureRandom also has methods for:</p>
<ul>
<li>
base64
</li>
<li>
random_bytes
</li>
<li>
random_number
</li>
</ul>
<p>see: <a href="http://ruby-doc.org/stdlib-1.9.2/libdoc/securerandom/rdoc/SecureRandom.html" rel="noreferrer">http://ruby-doc.org/stdlib-1.9.2/libdoc/securerandom/rdoc/SecureRandom.html</a></p>
</section>
<section id="answer-3-score-245" class="level4">
<h4>Answer 3 (score 245)</h4>
<p>I use this for generating random URL friendly strings with a guaranteed maximum length:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb105-1"><a href="#cb105-1"></a>rand(<span class="dv">36</span>**length).to_s(<span class="dv">36</span>)</span></code></pre></div>
<p>It generates random strings of lowercase a-z and 0-9. It’s not very customizable but it’s short and clean.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="begin-rescue-and-ensure-in-ruby-score-391402-in-2014" class="level3">
<h3>21: Begin, Rescue and Ensure in Ruby? (score <a href="https://stackoverflow.com/q/2191632.html">391402</a> in 2014)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>I’ve recently started programming in Ruby, and I am looking at exception handling.</p>
<p>I was wondering if <code>ensure</code> was the Ruby equivalent of <code>finally</code> in C#? Should I have:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb106-1"><a href="#cb106-1"></a>file = <span class="dt">File</span>.open(<span class="st">&quot;myFile.txt&quot;</span>, <span class="st">&quot;w&quot;</span>)</span>
<span id="cb106-2"><a href="#cb106-2"></a></span>
<span id="cb106-3"><a href="#cb106-3"></a><span class="kw">begin</span></span>
<span id="cb106-4"><a href="#cb106-4"></a>  file &lt;&lt; <span class="st">&quot;</span><span class="ot">#{</span>content<span class="ot">}</span><span class="st"> \n&quot;</span></span>
<span id="cb106-5"><a href="#cb106-5"></a><span class="kw">rescue</span></span>
<span id="cb106-6"><a href="#cb106-6"></a>  <span class="co">#handle the error here</span></span>
<span id="cb106-7"><a href="#cb106-7"></a><span class="kw">ensure</span></span>
<span id="cb106-8"><a href="#cb106-8"></a>  file.close <span class="kw">unless</span> file.nil?</span>
<span id="cb106-9"><a href="#cb106-9"></a><span class="kw">end</span></span></code></pre></div>
<p>or should I do this?</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb107-1"><a href="#cb107-1"></a><span class="co">#store the file</span></span>
<span id="cb107-2"><a href="#cb107-2"></a>file = <span class="dt">File</span>.open(<span class="st">&quot;myFile.txt&quot;</span>, <span class="st">&quot;w&quot;</span>)</span>
<span id="cb107-3"><a href="#cb107-3"></a></span>
<span id="cb107-4"><a href="#cb107-4"></a><span class="kw">begin</span></span>
<span id="cb107-5"><a href="#cb107-5"></a>  file &lt;&lt; <span class="st">&quot;</span><span class="ot">#{</span>content<span class="ot">}</span><span class="st"> \n&quot;</span></span>
<span id="cb107-6"><a href="#cb107-6"></a>  file.close</span>
<span id="cb107-7"><a href="#cb107-7"></a><span class="kw">rescue</span></span>
<span id="cb107-8"><a href="#cb107-8"></a>  <span class="co">#handle the error here</span></span>
<span id="cb107-9"><a href="#cb107-9"></a><span class="kw">ensure</span></span>
<span id="cb107-10"><a href="#cb107-10"></a>  file.close <span class="kw">unless</span> file.nil?</span>
<span id="cb107-11"><a href="#cb107-11"></a><span class="kw">end</span></span></code></pre></div>
<p>Does <code>ensure</code> get called no matter what, even if an exception isn’t raised?</p>
</section>
<section id="answer-accepted-score-1142" class="level4">
<h4>Answer accepted (score 1142)</h4>
<p>Yes, <code>ensure</code> ensures that the code is always evaluated. That’s why it’s called <code>ensure</code>. So, it is equivalent to Java’s and C#’s <code>finally</code>.</p>
<p>The general flow of <code>begin</code>/<code>rescue</code>/<code>else</code>/<code>ensure</code>/<code>end</code> looks like this:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb108-1"><a href="#cb108-1"></a><span class="kw">begin</span></span>
<span id="cb108-2"><a href="#cb108-2"></a>  <span class="co"># something which might raise an exception</span></span>
<span id="cb108-3"><a href="#cb108-3"></a><span class="kw">rescue</span> <span class="dt">SomeExceptionClass</span> =&gt; some_variable</span>
<span id="cb108-4"><a href="#cb108-4"></a>  <span class="co"># code that deals with some exception</span></span>
<span id="cb108-5"><a href="#cb108-5"></a><span class="kw">rescue</span> <span class="dt">SomeOtherException</span> =&gt; some_other_variable</span>
<span id="cb108-6"><a href="#cb108-6"></a>  <span class="co"># code that deals with some other exception</span></span>
<span id="cb108-7"><a href="#cb108-7"></a><span class="kw">else</span></span>
<span id="cb108-8"><a href="#cb108-8"></a>  <span class="co"># code that runs only if *no* exception was raised</span></span>
<span id="cb108-9"><a href="#cb108-9"></a><span class="kw">ensure</span></span>
<span id="cb108-10"><a href="#cb108-10"></a>  <span class="co"># ensure that this code always runs, no matter what</span></span>
<span id="cb108-11"><a href="#cb108-11"></a>  <span class="co"># does not change the final value of the block</span></span>
<span id="cb108-12"><a href="#cb108-12"></a><span class="kw">end</span></span></code></pre></div>
<p>You can leave out <code>rescue</code>, <code>ensure</code> or <code>else</code>. You can also leave out the variables in which case you won’t be able to inspect the exception in your exception handling code. (Well, you can always use the global exception variable to access the last exception that was raised, but that’s a little bit hacky.) And you can leave out the exception class, in which case all exceptions that inherit from <code>StandardError</code> will be caught. (Please note that this does not mean that <em>all</em> exceptions are caught, because there are exceptions which are instances of <code>Exception</code> but not <code>StandardError</code>. Mostly very severe exceptions that compromise the integrity of the program such as <code>SystemStackError</code>, <code>NoMemoryError</code>, <code>SecurityError</code>, <code>NotImplementedError</code>, <code>LoadError</code>, <code>SyntaxError</code>, <code>ScriptError</code>, <code>Interrupt</code>, <code>SignalException</code> or <code>SystemExit</code>.)</p>
<p>Some blocks form implicit exception blocks. For example, method definitions are implicitly also exception blocks, so instead of writing</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb109-1"><a href="#cb109-1"></a><span class="kw">def</span> foo</span>
<span id="cb109-2"><a href="#cb109-2"></a>  <span class="kw">begin</span></span>
<span id="cb109-3"><a href="#cb109-3"></a>    <span class="co"># ...</span></span>
<span id="cb109-4"><a href="#cb109-4"></a>  <span class="kw">rescue</span></span>
<span id="cb109-5"><a href="#cb109-5"></a>    <span class="co"># ...</span></span>
<span id="cb109-6"><a href="#cb109-6"></a>  <span class="kw">end</span></span>
<span id="cb109-7"><a href="#cb109-7"></a><span class="kw">end</span></span></code></pre></div>
<p>you write just</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb110-1"><a href="#cb110-1"></a><span class="kw">def</span> foo</span>
<span id="cb110-2"><a href="#cb110-2"></a>  <span class="co"># ...</span></span>
<span id="cb110-3"><a href="#cb110-3"></a><span class="kw">rescue</span></span>
<span id="cb110-4"><a href="#cb110-4"></a>  <span class="co"># ...</span></span>
<span id="cb110-5"><a href="#cb110-5"></a><span class="kw">end</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb111-1"><a href="#cb111-1"></a><span class="kw">def</span> foo</span>
<span id="cb111-2"><a href="#cb111-2"></a>  <span class="co"># ...</span></span>
<span id="cb111-3"><a href="#cb111-3"></a><span class="kw">ensure</span></span>
<span id="cb111-4"><a href="#cb111-4"></a>  <span class="co"># ...</span></span>
<span id="cb111-5"><a href="#cb111-5"></a><span class="kw">end</span></span></code></pre></div>
<p>The same applies to <code>class</code> definitions and <code>module</code> definitions.</p>
<p>However, in the specific case you are asking about, there is actually a much better idiom. In general, when you work with some resource which you need to clean up at the end, you do that by passing a block to a method which does all the cleanup for you. It’s similar to a <code>using</code> block in C#, except that Ruby is actually powerful enough that you don’t have to wait for the high priests of Microsoft to come down from the mountain and graciously change their compiler for you. In Ruby, you can just implement it yourself:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb112-1"><a href="#cb112-1"></a><span class="co"># This is what you want to do:</span></span>
<span id="cb112-2"><a href="#cb112-2"></a><span class="dt">File</span>.open(<span class="st">&#39;myFile.txt&#39;</span>, <span class="ch">&#39;w&#39;</span>) <span class="kw">do</span> |file|</span>
<span id="cb112-3"><a href="#cb112-3"></a>  file.puts content</span>
<span id="cb112-4"><a href="#cb112-4"></a><span class="kw">end</span></span>
<span id="cb112-5"><a href="#cb112-5"></a></span>
<span id="cb112-6"><a href="#cb112-6"></a><span class="co"># And this is how you might implement it:</span></span>
<span id="cb112-7"><a href="#cb112-7"></a><span class="kw">def</span> <span class="dt">File</span>.open(filename, mode=<span class="ch">&#39;r&#39;</span>, perm=<span class="dv">nil</span>, opt=<span class="dv">nil</span>)</span>
<span id="cb112-8"><a href="#cb112-8"></a>  <span class="kw">yield</span> filehandle = new(filename, mode, perm, opt)</span>
<span id="cb112-9"><a href="#cb112-9"></a><span class="kw">ensure</span></span>
<span id="cb112-10"><a href="#cb112-10"></a>  filehandle&amp;.close</span>
<span id="cb112-11"><a href="#cb112-11"></a><span class="kw">end</span></span></code></pre></div>
<p>And what do you know: this is <em>already</em> available in the core library as <code>File.open</code>. But it is a general pattern that you can use in your own code as well, for implementing any kind of resource cleanup (à la <code>using</code> in C#) or transactions or whatever else you might think of.</p>
<p>The only case where this doesn’t work, if acquiring and releasing the resource are distributed over different parts of the program. But if it is localized, as in your example, then you can easily use these resource blocks.</p>
<hr>
<p>BTW: in modern C#, <code>using</code> is actually superfluous, because you can implement Ruby-style resource blocks yourself:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb113-1"><a href="#cb113-1"></a><span class="kw">class</span> <span class="dt">File</span></span>
<span id="cb113-2"><a href="#cb113-2"></a>{</span>
<span id="cb113-3"><a href="#cb113-3"></a>    static T open&lt;T&gt;(string filename, string mode, <span class="dt">Func</span>&lt;<span class="dt">File</span>, T&gt; block)</span>
<span id="cb113-4"><a href="#cb113-4"></a>    {</span>
<span id="cb113-5"><a href="#cb113-5"></a>        var handle = new <span class="dt">File</span>(filename, mode);</span>
<span id="cb113-6"><a href="#cb113-6"></a>        try</span>
<span id="cb113-7"><a href="#cb113-7"></a>        {</span>
<span id="cb113-8"><a href="#cb113-8"></a>            <span class="kw">return</span> block(handle);</span>
<span id="cb113-9"><a href="#cb113-9"></a>        }</span>
<span id="cb113-10"><a href="#cb113-10"></a>        finally</span>
<span id="cb113-11"><a href="#cb113-11"></a>        {</span>
<span id="cb113-12"><a href="#cb113-12"></a>            handle.<span class="dt">Dispose</span>();</span>
<span id="cb113-13"><a href="#cb113-13"></a>        }</span>
<span id="cb113-14"><a href="#cb113-14"></a>    }</span>
<span id="cb113-15"><a href="#cb113-15"></a>}</span>
<span id="cb113-16"><a href="#cb113-16"></a></span>
<span id="cb113-17"><a href="#cb113-17"></a><span class="ot">//</span> <span class="dt">Usage</span>:</span>
<span id="cb113-18"><a href="#cb113-18"></a></span>
<span id="cb113-19"><a href="#cb113-19"></a><span class="dt">File</span>.open(<span class="st">&quot;myFile.txt&quot;</span>, <span class="st">&quot;w&quot;</span>, (file) =&gt;</span>
<span id="cb113-20"><a href="#cb113-20"></a>{</span>
<span id="cb113-21"><a href="#cb113-21"></a>    file.<span class="dt">WriteLine</span>(contents);</span>
<span id="cb113-22"><a href="#cb113-22"></a>});</span></code></pre></div>
</section>
<section id="answer-2-score-34" class="level4">
<h4>Answer 2 (score 34)</h4>
<p>FYI, even if an exception is re-raised in the <code>rescue</code> section, the <code>ensure</code> block will be executed before the code execution continues to the next exception handler. For instance:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb114-1"><a href="#cb114-1"></a><span class="kw">begin</span></span>
<span id="cb114-2"><a href="#cb114-2"></a>  raise <span class="st">&quot;Error!!&quot;</span></span>
<span id="cb114-3"><a href="#cb114-3"></a><span class="kw">rescue</span></span>
<span id="cb114-4"><a href="#cb114-4"></a>  puts <span class="st">&quot;test1&quot;</span></span>
<span id="cb114-5"><a href="#cb114-5"></a>  raise <span class="co"># Reraise exception</span></span>
<span id="cb114-6"><a href="#cb114-6"></a><span class="kw">ensure</span></span>
<span id="cb114-7"><a href="#cb114-7"></a>  puts <span class="st">&quot;Ensure block&quot;</span></span>
<span id="cb114-8"><a href="#cb114-8"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-3-score-14" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>If you want to ensure a file is closed you should use the block form of <code>File.open</code>:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb115-1"><a href="#cb115-1"></a><span class="dt">File</span>.open(<span class="st">&quot;myFile.txt&quot;</span>, <span class="st">&quot;w&quot;</span>) <span class="kw">do</span> |file|</span>
<span id="cb115-2"><a href="#cb115-2"></a>  <span class="kw">begin</span></span>
<span id="cb115-3"><a href="#cb115-3"></a>    file &lt;&lt; <span class="st">&quot;</span><span class="ot">#{</span>content<span class="ot">}</span><span class="st"> \n&quot;</span></span>
<span id="cb115-4"><a href="#cb115-4"></a>  <span class="kw">rescue</span></span>
<span id="cb115-5"><a href="#cb115-5"></a>  <span class="co">#handle the error here</span></span>
<span id="cb115-6"><a href="#cb115-6"></a>  <span class="kw">end</span></span>
<span id="cb115-7"><a href="#cb115-7"></a><span class="kw">end</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="multi-line-comments-in-ruby-score-387437-in-2015" class="level3">
<h3>22: Multi-Line Comments in Ruby? (score <a href="https://stackoverflow.com/q/2989762.html">387437</a> in 2015)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>How can I comment multiple lines in Ruby?</p>
</section>
<section id="answer-accepted-score-1311" class="level4">
<h4>Answer accepted (score 1311)</h4>
<div class="sourceCode" id="cb116"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb116-1"><a href="#cb116-1"></a><span class="kw">#!/usr/bin/env ruby</span></span>
<span id="cb116-2"><a href="#cb116-2"></a></span>
<span id="cb116-3"><a href="#cb116-3"></a><span class="co">=begin</span></span>
<span id="cb116-4"><a href="#cb116-4"></a><span class="co">Every body mentioned this way</span></span>
<span id="cb116-5"><a href="#cb116-5"></a><span class="co">to have multiline comments.</span></span>
<span id="cb116-6"><a href="#cb116-6"></a></span>
<span id="cb116-7"><a href="#cb116-7"></a><span class="co">The =begin and =end must be at the beginning of the line or</span></span>
<span id="cb116-8"><a href="#cb116-8"></a><span class="co">it will be a syntax error.</span></span>
<span id="cb116-9"><a href="#cb116-9"></a><span class="co">=end</span></span>
<span id="cb116-10"><a href="#cb116-10"></a></span>
<span id="cb116-11"><a href="#cb116-11"></a>puts <span class="st">&quot;Hello world!&quot;</span></span>
<span id="cb116-12"><a href="#cb116-12"></a></span>
<span id="cb116-13"><a href="#cb116-13"></a>&lt;&lt;-<span class="kw">DOC</span></span>
<span id="cb116-14"><a href="#cb116-14"></a><span class="ot">Also, you could create a docstring.</span></span>
<span id="cb116-15"><a href="#cb116-15"></a><span class="ot">which...</span></span>
<span id="cb116-16"><a href="#cb116-16"></a><span class="kw">DOC</span></span>
<span id="cb116-17"><a href="#cb116-17"></a></span>
<span id="cb116-18"><a href="#cb116-18"></a>puts <span class="st">&quot;Hello world!&quot;</span></span>
<span id="cb116-19"><a href="#cb116-19"></a></span>
<span id="cb116-20"><a href="#cb116-20"></a><span class="st">&quot;..is kinda ugly and creates</span></span>
<span id="cb116-21"><a href="#cb116-21"></a><span class="st">a String instance, but I know one guy</span></span>
<span id="cb116-22"><a href="#cb116-22"></a><span class="st">with a Smalltalk background, who</span></span>
<span id="cb116-23"><a href="#cb116-23"></a><span class="st">does this.&quot;</span></span>
<span id="cb116-24"><a href="#cb116-24"></a></span>
<span id="cb116-25"><a href="#cb116-25"></a>puts <span class="st">&quot;Hello world!&quot;</span></span>
<span id="cb116-26"><a href="#cb116-26"></a></span>
<span id="cb116-27"><a href="#cb116-27"></a><span class="co">##</span></span>
<span id="cb116-28"><a href="#cb116-28"></a><span class="co"># most</span></span>
<span id="cb116-29"><a href="#cb116-29"></a><span class="co"># people</span></span>
<span id="cb116-30"><a href="#cb116-30"></a><span class="co"># do</span></span>
<span id="cb116-31"><a href="#cb116-31"></a><span class="co"># this</span></span>
<span id="cb116-32"><a href="#cb116-32"></a></span>
<span id="cb116-33"><a href="#cb116-33"></a></span>
<span id="cb116-34"><a href="#cb116-34"></a><span class="kw">__END__</span></span>
<span id="cb116-35"><a href="#cb116-35"></a></span>
<span id="cb116-36"><a href="#cb116-36"></a>But all forgot there is another option.</span>
<span id="cb116-37"><a href="#cb116-37"></a>Only at the end of a file, of course.</span></code></pre></div>
<ul>
<li>
This is how it looks (via screenshot) - otherwise it’s hard to interpret how the above comments will look. <strong>Click to Zoom-in</strong>:
</li>
</ul>
<p><a href="https://i.stack.imgur.com/AnchE.png" rel="noreferrer"><img src="https://i.stack.imgur.com/AnchE.png" alt="Comments in a text-editor"></a></p>
</section>
<section id="answer-2-score-122" class="level4">
<h4>Answer 2 (score 122)</h4>
<div class="sourceCode" id="cb117"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb117-1"><a href="#cb117-1"></a><span class="co">=begin</span></span>
<span id="cb117-2"><a href="#cb117-2"></a><span class="co">My </span></span>
<span id="cb117-3"><a href="#cb117-3"></a><span class="co">multiline</span></span>
<span id="cb117-4"><a href="#cb117-4"></a><span class="co">comment</span></span>
<span id="cb117-5"><a href="#cb117-5"></a><span class="co">here</span></span>
<span id="cb117-6"><a href="#cb117-6"></a><span class="co">=end</span></span></code></pre></div>
</section>
<section id="answer-3-score-54" class="level4">
<h4>Answer 3 (score 54)</h4>
<p>Despite the existence of <code>=begin</code> and <code>=end</code>, the normal and a more correct way to comment is to use <code>#</code>’s on each line. If you read the source of any ruby library, you will see that this is the way multi-line comments are done in almost all cases.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-install-a-specific-version-of-a-ruby-gem-score-385296-in" class="level3">
<h3>23: How to install a specific version of a ruby gem? (score <a href="https://stackoverflow.com/q/17026441.html">385296</a> in )</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>Using the command-line <code>gem</code> tool, how can I install a specific version of a gem?</p>
</section>
<section id="answer-accepted-score-1085" class="level4">
<h4>Answer accepted (score 1085)</h4>
<p>Use the <code>-v</code> flag:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb118-1"><a href="#cb118-1"></a>$ gem install fog -v <span class="fl">1.8</span></span></code></pre></div>
</section>
<section id="answer-2-score-184" class="level4">
<h4>Answer 2 (score 184)</h4>
<p>Use the <code>--version</code> parameter (shortcut <code>-v</code>):</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb119-1"><a href="#cb119-1"></a>$ gem install rails -v <span class="fl">0.14</span>.<span class="dv">1</span></span></code></pre></div>
<hr>
<p>You can also use version comparators like <code>&amp;gt;=</code> or <code>~&amp;gt;</code></p>
<div class="sourceCode" id="cb120"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb120-1"><a href="#cb120-1"></a>$ gem install rails -v <span class="st">&#39;~&gt; 0.14.0&#39;</span></span></code></pre></div>
<hr>
<p>Or with newer versions of <em>gem</em> even:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb121-1"><a href="#cb121-1"></a>$ gem install rails:<span class="fl">0.14</span>.<span class="dv">4</span> rubyzip:<span class="st">&#39;&lt; 1&#39;</span></span>
<span id="cb121-2"><a href="#cb121-2"></a>…</span>
<span id="cb121-3"><a href="#cb121-3"></a><span class="dt">Successfully</span> installed rails<span class="dv">-0</span>.<span class="fl">14.4</span></span>
<span id="cb121-4"><a href="#cb121-4"></a><span class="dt">Successfully</span> installed rubyzip<span class="dv">-0</span>.<span class="fl">9.9</span></span></code></pre></div>
</section>
<section id="answer-3-score-78" class="level4">
<h4>Answer 3 (score 78)</h4>
<p>
For installing <code>gem install gemname -v versionnumber</code>
</p>
<p>
For uninstall <code>gem uninstall gemname -v versionnumber</code>
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-a-specific-key-is-present-in-a-hash-or-not-score-379134-in-2016" class="level3">
<h3>24: How to check if a specific key is present in a hash or not? (score <a href="https://stackoverflow.com/q/4528506.html">379134</a> in 2016)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>I want to check whether the “user” key is present or not in the session hash. How can I do this?</p>
<p>Note that I don’t want to check whether the key’s value is nil or not. I just want to check whether the “user” <em>key</em> is present.</p>
</section>
<section id="answer-accepted-score-893" class="level4">
<h4>Answer accepted (score 893)</h4>
<p><code>Hash</code>’s <code>key?</code> method tells you whether a given key is present or not.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb122-1"><a href="#cb122-1"></a>session.key?(<span class="st">&quot;user&quot;</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-283" class="level4">
<h4>Answer 2 (score 283)</h4>
<p>While <code>Hash#has_key?</code> gets the job done, as Matz notes <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/43765" rel="noreferrer">here</a>, it has been deprecated in favour of <code>Hash#key?</code>.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb123-1"><a href="#cb123-1"></a>hash.key?(some_key)</span></code></pre></div>
</section>
<section id="answer-3-score-37-1" class="level4">
<h4>Answer 3 (score 37)</h4>
<p>In latest Ruby versions Hash instance has a <a href="http://ruby-doc.org/core-2.1.5/Hash.html#method-i-key-3F"><code>key?</code></a> method:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb124-1"><a href="#cb124-1"></a>{<span class="st">a: </span><span class="dv">1</span>}.key?(<span class="st">:a</span>)</span>
<span id="cb124-2"><a href="#cb124-2"></a>=&gt; <span class="dv">true</span></span></code></pre></div>
<p>Be sure to use the symbol key or a string key depending on what you have in your hash:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb125-1"><a href="#cb125-1"></a>{<span class="ch">&#39;a&#39;</span> =&gt; <span class="dv">2</span>}.key?(<span class="st">:a</span>)</span>
<span id="cb125-2"><a href="#cb125-2"></a>=&gt; <span class="dv">false</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-remove-a-key-from-hash-and-get-the-remaining-hash-in-rubyrails-score-369464-in-2017" class="level3">
<h3>25: How to remove a key from Hash and get the remaining hash in Ruby/Rails? (score <a href="https://stackoverflow.com/q/6227600.html">369464</a> in 2017)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>To add a new pair to Hash I do:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb126-1"><a href="#cb126-1"></a>{<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>}.merge!({<span class="st">:c</span> =&gt; <span class="dv">3</span>})   <span class="co">#=&gt; {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3}</span></span></code></pre></div>
<p>Is there a similar way to delete a key from Hash ?</p>
<p>This works:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb127-1"><a href="#cb127-1"></a>{<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>}.reject! { |k| k == <span class="st">:a</span> }   <span class="co">#=&gt; {:b =&gt; 2}</span></span></code></pre></div>
<p>but I would expect to have something like:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb128-1"><a href="#cb128-1"></a>{<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>}.delete!(<span class="st">:a</span>)   <span class="co">#=&gt; {:b =&gt; 2}</span></span></code></pre></div>
<p>It is important that the returning value will be the remaining hash, so I could do things like:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb129-1"><a href="#cb129-1"></a>foo(my_hash.reject! { |k| k == my_key })</span></code></pre></div>
<p>in one line.</p>
</section>
<section id="answer-accepted-score-701" class="level4">
<h4>Answer accepted (score 701)</h4>
<p><a href="http://api.rubyonrails.org/classes/Hash.html#method-i-except">Rails has an except/except! method</a> that returns the hash with those keys removed. If you’re already using Rails, there’s no sense in creating your own version of this.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb130-1"><a href="#cb130-1"></a><span class="kw">class</span> <span class="dt">Hash</span></span>
<span id="cb130-2"><a href="#cb130-2"></a>  <span class="co"># Returns a hash that includes everything but the given keys.</span></span>
<span id="cb130-3"><a href="#cb130-3"></a>  <span class="co">#   hash = { a: true, b: false, c: nil}</span></span>
<span id="cb130-4"><a href="#cb130-4"></a>  <span class="co">#   hash.except(:c) # =&gt; { a: true, b: false}</span></span>
<span id="cb130-5"><a href="#cb130-5"></a>  <span class="co">#   hash # =&gt; { a: true, b: false, c: nil}</span></span>
<span id="cb130-6"><a href="#cb130-6"></a>  <span class="co">#</span></span>
<span id="cb130-7"><a href="#cb130-7"></a>  <span class="co"># This is useful for limiting a set of parameters to everything but a few known toggles:</span></span>
<span id="cb130-8"><a href="#cb130-8"></a>  <span class="co">#   @person.update(params[:person].except(:admin))</span></span>
<span id="cb130-9"><a href="#cb130-9"></a>  <span class="kw">def</span> except(*keys)</span>
<span id="cb130-10"><a href="#cb130-10"></a>    dup.except!(*keys)</span>
<span id="cb130-11"><a href="#cb130-11"></a>  <span class="kw">end</span></span>
<span id="cb130-12"><a href="#cb130-12"></a></span>
<span id="cb130-13"><a href="#cb130-13"></a>  <span class="co"># Replaces the hash without the given keys.</span></span>
<span id="cb130-14"><a href="#cb130-14"></a>  <span class="co">#   hash = { a: true, b: false, c: nil}</span></span>
<span id="cb130-15"><a href="#cb130-15"></a>  <span class="co">#   hash.except!(:c) # =&gt; { a: true, b: false}</span></span>
<span id="cb130-16"><a href="#cb130-16"></a>  <span class="co">#   hash # =&gt; { a: true, b: false }</span></span>
<span id="cb130-17"><a href="#cb130-17"></a>  <span class="kw">def</span> except!(*keys)</span>
<span id="cb130-18"><a href="#cb130-18"></a>    keys.each { |key| delete(key) }</span>
<span id="cb130-19"><a href="#cb130-19"></a>    <span class="dv">self</span></span>
<span id="cb130-20"><a href="#cb130-20"></a>  <span class="kw">end</span></span>
<span id="cb130-21"><a href="#cb130-21"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-2-score-196" class="level4">
<h4>Answer 2 (score 196)</h4>
<p>Oneliner plain ruby, it works only with ruby &gt; 1.9.x:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb131-1"><a href="#cb131-1"></a><span class="fl">1.9</span>.3p0 :<span class="dv">002</span> &gt; h = {<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>}</span>
<span id="cb131-2"><a href="#cb131-2"></a> =&gt; {<span class="st">:a=</span>&gt;<span class="dv">1</span>, <span class="st">:b=</span>&gt;<span class="dv">2</span>} </span>
<span id="cb131-3"><a href="#cb131-3"></a><span class="fl">1.9</span>.3p0 :<span class="dv">003</span> &gt; h.tap { |hs| hs.delete(<span class="st">:a</span>) }</span>
<span id="cb131-4"><a href="#cb131-4"></a> =&gt; {<span class="st">:b=</span>&gt;<span class="dv">2</span>} </span></code></pre></div>
<p><a href="http://blog.moertel.com/articles/2007/02/07/ruby-1-9-gets-handy-new-method-object-tap" rel="noreferrer">Tap</a> method always return the object on which is invoked…</p>
<p>Otherwise if you have required <code>active_support/core_ext/hash</code> (which is automatically required in every Rails application) you can use one of the following methods depending on your needs:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb132-1"><a href="#cb132-1"></a>➜  ~  irb</span>
<span id="cb132-2"><a href="#cb132-2"></a><span class="fl">1.9</span>.3p125 :<span class="dv">001</span> &gt; require <span class="st">&#39;active_support/core_ext/hash&#39;</span> =&gt; <span class="dv">true</span> </span>
<span id="cb132-3"><a href="#cb132-3"></a><span class="fl">1.9</span>.3p125 :<span class="dv">002</span> &gt; h = {<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>, <span class="st">:c</span> =&gt; <span class="dv">3</span>}</span>
<span id="cb132-4"><a href="#cb132-4"></a> =&gt; {<span class="st">:a=</span>&gt;<span class="dv">1</span>, <span class="st">:b=</span>&gt;<span class="dv">2</span>, <span class="st">:c=</span>&gt;<span class="dv">3</span>} </span>
<span id="cb132-5"><a href="#cb132-5"></a><span class="fl">1.9</span>.3p125 :<span class="dv">003</span> &gt; h.except(<span class="st">:a</span>)</span>
<span id="cb132-6"><a href="#cb132-6"></a> =&gt; {<span class="st">:b=</span>&gt;<span class="dv">2</span>, <span class="st">:c=</span>&gt;<span class="dv">3</span>} </span>
<span id="cb132-7"><a href="#cb132-7"></a><span class="fl">1.9</span>.3p125 :<span class="dv">004</span> &gt; h.slice(<span class="st">:a</span>)</span>
<span id="cb132-8"><a href="#cb132-8"></a> =&gt; {<span class="st">:a=</span>&gt;<span class="dv">1</span>} </span></code></pre></div>
<p><a href="http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Hash/Except.html" rel="noreferrer">except</a> uses a blacklist approach, so it removes all the keys listed as args, while <a href="http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Hash/Slice.html" rel="noreferrer">slice</a> uses a whitelist approach, so it removes all keys that aren’t listed as arguments. There also exist the bang version of those method (<code>except!</code> and <code>slice!</code>) which modify the given hash but their return value is different both of them return an hash. It represents the removed keys for <code>slice!</code> and the keys that are kept for the <code>except!</code>:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb133-1"><a href="#cb133-1"></a><span class="fl">1.9</span>.3p125 :<span class="bn">011</span> &gt; {<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>, <span class="st">:c</span> =&gt; <span class="dv">3</span>}.except!(<span class="st">:a</span>)</span>
<span id="cb133-2"><a href="#cb133-2"></a> =&gt; {<span class="st">:b=</span>&gt;<span class="dv">2</span>, <span class="st">:c=</span>&gt;<span class="dv">3</span>} </span>
<span id="cb133-3"><a href="#cb133-3"></a><span class="fl">1.9</span>.3p125 :<span class="bn">012</span> &gt; {<span class="st">:a</span> =&gt; <span class="dv">1</span>, <span class="st">:b</span> =&gt; <span class="dv">2</span>, <span class="st">:c</span> =&gt; <span class="dv">3</span>}.slice!(<span class="st">:a</span>)</span>
<span id="cb133-4"><a href="#cb133-4"></a> =&gt; {<span class="st">:b=</span>&gt;<span class="dv">2</span>, <span class="st">:c=</span>&gt;<span class="dv">3</span>} </span></code></pre></div>
</section>
<section id="answer-3-score-169" class="level4">
<h4>Answer 3 (score 169)</h4>
<p>Why not just use:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb134-1"><a href="#cb134-1"></a>hash.delete(key)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-add-an-array-to-another-array-in-ruby-and-not-end-up-with-a-multi-dimensional-result-score-347066-in-2009" class="level3">
<h3>26: How do you add an array to another array in Ruby and not end up with a multi-dimensional result? (score <a href="https://stackoverflow.com/q/1801516.html">347066</a> in 2009)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<div class="sourceCode" id="cb135"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb135-1"><a href="#cb135-1"></a>somearray = [<span class="st">&quot;some&quot;</span>, <span class="st">&quot;thing&quot;</span>]</span>
<span id="cb135-2"><a href="#cb135-2"></a></span>
<span id="cb135-3"><a href="#cb135-3"></a>anotherarray = [<span class="st">&quot;another&quot;</span>, <span class="st">&quot;thing&quot;</span>]</span>
<span id="cb135-4"><a href="#cb135-4"></a></span>
<span id="cb135-5"><a href="#cb135-5"></a>somearray.push(anotherarray.flatten!)</span></code></pre></div>
<p>I expected</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb136-1"><a href="#cb136-1"></a>[<span class="st">&quot;some&quot;</span>,<span class="st">&quot;thing&quot;</span>,<span class="st">&quot;another&quot;</span>,<span class="st">&quot;thing&quot;</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-674" class="level4">
<h4>Answer 2 (score 674)</h4>
<p>You’ve got a workable idea, but the <code>#flatten!</code> is in the wrong place – it flattens its receiver, so you could use it to turn <code>[1, 2, ['foo', 'bar']]</code> into <code>[1,2,'foo','bar']</code>.</p>
<p>I’m doubtless forgetting some approaches, but you can <strong>concatenate</strong>:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb137-1"><a href="#cb137-1"></a>a1.concat a2</span>
<span id="cb137-2"><a href="#cb137-2"></a>a1 + a2              <span class="co"># creates a new array, as does a1 += a2</span></span></code></pre></div>
<p>or <strong>prepend/append</strong>:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb138-1"><a href="#cb138-1"></a>a1.push(*a2)         <span class="co"># note the asterisk</span></span>
<span id="cb138-2"><a href="#cb138-2"></a>a2.unshift(*a1)      <span class="co"># note the asterisk, and that a2 is the receiver</span></span></code></pre></div>
<p>or <strong>splice</strong>:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb139-1"><a href="#cb139-1"></a>a1[a1.length, <span class="dv">0</span>] = a2</span>
<span id="cb139-2"><a href="#cb139-2"></a>a1[a1.length..<span class="dv">0</span>] = a2</span>
<span id="cb139-3"><a href="#cb139-3"></a>a1.insert(a1.length, *a2)</span></code></pre></div>
<p>or <strong>append and flatten</strong>:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb140-1"><a href="#cb140-1"></a>(a1 &lt;&lt; a2).flatten!  <span class="co"># a call to #flatten instead would return a new array</span></span></code></pre></div>
</section>
<section id="answer-3-score-199" class="level4">
<h4>Answer 3 (score 199)</h4>
<p>You can just use the <code>+</code> operator!</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb141-1"><a href="#cb141-1"></a>irb(main):<span class="dv">001</span>:<span class="dv">0</span>&gt; a = [<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb141-2"><a href="#cb141-2"></a>=&gt; [<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb141-3"><a href="#cb141-3"></a>irb(main):<span class="dv">002</span>:<span class="dv">0</span>&gt; b = [<span class="dv">3</span>,<span class="dv">4</span>]</span>
<span id="cb141-4"><a href="#cb141-4"></a>=&gt; [<span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb141-5"><a href="#cb141-5"></a>irb(main):<span class="dv">003</span>:<span class="dv">0</span>&gt; a + b</span>
<span id="cb141-6"><a href="#cb141-6"></a>=&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span></code></pre></div>
<p>
You can read all about the array class here: <a href="http://ruby-doc.org/core/classes/Array.html" rel="noreferrer">http://ruby-doc.org/core/classes/Array.html</a>
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-drop-columns-using-rails-migration-score-341510-in-2019" class="level3">
<h3>27: How to drop columns using Rails migration (score <a href="https://stackoverflow.com/q/2831059.html">341510</a> in 2019)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>What’s the syntax for dropping a database table column through a Rails migration?</p>
</section>
<section id="answer-accepted-score-868" class="level4">
<h4>Answer accepted (score 868)</h4>
<div class="sourceCode" id="cb142"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb142-1"><a href="#cb142-1"></a>remove_column <span class="st">:table_name</span>, <span class="st">:column_name</span></span></code></pre></div>
<p>For instance:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb143-1"><a href="#cb143-1"></a>remove_column <span class="st">:users</span>, <span class="st">:hobby</span></span></code></pre></div>
<p>would remove the hobby Column from the users table.</p>
</section>
<section id="answer-2-score-359" class="level4">
<h4>Answer 2 (score 359)</h4>
<p>For older versions of Rails</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb144-1"><a href="#cb144-1"></a>ruby script/generate migration <span class="dt">RemoveFieldNameFromTableName</span> field_name<span class="st">:datatype</span></span></code></pre></div>
<p>For Rails 3 and up</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb145-1"><a href="#cb145-1"></a>rails generate migration <span class="dt">RemoveFieldNameFromTableName</span> field_name<span class="st">:datatype</span></span></code></pre></div>
</section>
<section id="answer-3-score-115" class="level4">
<h4>Answer 3 (score 115)</h4>
<p>Rails 4 has been updated, so the change method can be used in the migration to drop a column and the migration will successfully rollback. Please read the following warning for Rails 3 applications:</p>
<p><strong>Rails 3 Warning</strong></p>
<p>Please note that when you use this command:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb146-1"><a href="#cb146-1"></a>rails generate migration <span class="dt">RemoveFieldNameFromTableName</span> field_name<span class="st">:datatype</span></span></code></pre></div>
<p>The generated migration will look something like this:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb147-1"><a href="#cb147-1"></a>  <span class="kw">def</span> up</span>
<span id="cb147-2"><a href="#cb147-2"></a>    remove_column <span class="st">:table_name</span>, <span class="st">:field_name</span></span>
<span id="cb147-3"><a href="#cb147-3"></a>  <span class="kw">end</span></span>
<span id="cb147-4"><a href="#cb147-4"></a></span>
<span id="cb147-5"><a href="#cb147-5"></a>  <span class="kw">def</span> down</span>
<span id="cb147-6"><a href="#cb147-6"></a>    add_column <span class="st">:table_name</span>, <span class="st">:field_name</span>, <span class="st">:datatype</span></span>
<span id="cb147-7"><a href="#cb147-7"></a>  <span class="kw">end</span></span></code></pre></div>
<p>Make sure to not use the change method when removing columns from a database table (example of what you don’t want in the migration file in Rails 3 apps):</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb148-1"><a href="#cb148-1"></a>  <span class="kw">def</span> change</span>
<span id="cb148-2"><a href="#cb148-2"></a>    remove_column <span class="st">:table_name</span>, <span class="st">:field_name</span></span>
<span id="cb148-3"><a href="#cb148-3"></a>  <span class="kw">end</span></span></code></pre></div>
<p>The change method in Rails 3 is not smart when it comes to remove_column, so you will not be able to rollback this migration.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-update-ruby-version-2.0.0-to-the-latest-version-in-mac-osx-yosemite-score-341177-in-2016" class="level3">
<h3>28: How to update Ruby Version 2.0.0 to the latest version in Mac OSX Yosemite? (score <a href="https://stackoverflow.com/q/38194032.html">341177</a> in 2016)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>
I need to update my ruby version from 2.0.0 to the latest version, I can not use some gems because my version is not updated. I had used Homebrew to install Ruby some time ago, How can i update my Ruby version?
</p>
</section>
<section id="answer-accepted-score-635" class="level4">
<h4>Answer accepted (score 635)</h4>
<p>Open your terminal and run</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb149-1"><a href="#cb149-1"></a>curl -sSL https:<span class="ot">//</span>raw.githubusercontent.com/rvm/rvm/master/binscripts/rvm-installer | bash -s stable</span></code></pre></div>
<p>When this is complete, <strong>you need to restart your terminal</strong> for the <code>rvm</code> command to work.</p>
<p>Now, run <code>rvm list known</code></p>
<p>This shows the list of versions of the ruby.</p>
<p>Now, run <code>rvm install ruby-2.4.2</code></p>
<p>If you type <code>ruby -v</code> in the terminal, you should see <code>ruby 2.4.2</code>.</p>
<p>If it still shows you <code>ruby 2.0.</code>, run <code>rvm use ruby-2.4.2 --default</code>.</p>
</section>
<section id="answer-2-score-195" class="level4">
<h4>Answer 2 (score 195)</h4>
<h5>
Brew only solution
</h1>
<p><strong>Update:</strong></p>
<p>From the comments (kudos to Maksim Luzik), I haven’t tested but seems like a more elegant solution:</p>
<blockquote>
After installing ruby through brew, run following command to update the links to the latest ruby installation: <code>brew link --overwrite ruby</code>
</blockquote>
<p><strong>Original answer:</strong></p>
<p>Late to the party, but using brew is enough. It’s not necessary to install rvm and for me it just complicated things.</p>
<p>By <code>brew install ruby</code> you’re actually installing the latest (currently v2.4.0). However, your path finds 2.0.0 first. To avoid this just change precedence (<a href="https://stackoverflow.com/a/8731098/2628257">source</a>). I did this by changing <code>~/.profile</code> and setting:</p>
<p><code>export PATH=/usr/local/bin:$PATH</code></p>
<p>After this I found that bundler gem was still using version 2.0.0, just install it again: <code>gem install bundler</code></p>
</section>
<section id="answer-3-score-95" class="level4">
<h4>Answer 3 (score 95)</h4>
<p>I recommend <strong>rbenv</strong>* <a href="https://github.com/rbenv/rbenv" rel="noreferrer">https://github.com/rbenv/rbenv</a></p>
<ul>
<li>If this meets your criteria: <a href="https://github.com/rbenv/rbenv/wiki/Why-rbenv%3F" rel="noreferrer">https://github.com/rbenv/rbenv/wiki/Why-rbenv?</a>:</li>
</ul>
<blockquote>
<h5>
rbenv <em>does…</em>
</h3>
<ul>
<li>
Provide support for specifying <strong>application-specific Ruby versions</strong>.
</li>
<li>
Let you <strong>change the global Ruby version</strong> on a per-user basis.
</li>
<li>
Allow you to <strong>override the Ruby version</strong> with an environment variable.
</li>
</ul>
<h5>
In contrast with RVM, rbenv <em>does not…</em>
</h3>
<ul>
<li>
<strong>Need to be loaded into your shell.</strong> Instead, rbenv’s shim approach works by adding a directory to your <code>$PATH</code>.
</li>
<li>
<strong>Override shell commands like <code>cd</code> or require prompt hacks.</strong> That’s dangerous and error-prone.
</li>
<li>
<strong>Have a configuration file.</strong> There’s nothing to configure except which version of Ruby you want to use.
</li>
<li>
<strong>Install Ruby.</strong> You can build and install Ruby yourself, or use <a href="https://github.com/sstephenson/ruby-build" rel="noreferrer">ruby-build</a> to automate the process.
</li>
<li>
<strong>Manage gemsets.</strong> <a href="http://gembundler.com/" rel="noreferrer">Bundler</a> is a better way to manage application dependencies. If you have projects that are not yet using Bundler you can install the <a href="https://github.com/jf/rbenv-gemset" rel="noreferrer">rbenv-gemset</a> plugin.
</li>
<li>
<strong>Require changes to Ruby libraries for compatibility.</strong> The simplicity of rbenv means as long as it’s in your <code>$PATH</code>, <a href="https://rvm.io/integration/bundler/" rel="noreferrer">nothing</a> <a href="https://rvm.io/integration/capistrano/" rel="noreferrer">else</a> needs to know about it.
</li>
</ul>
</blockquote>
<hr>
<p><strong>INSTALLATION</strong></p>
<p>Install <strong>Homebrew</strong> <a href="http://brew.sh" rel="noreferrer">http://brew.sh</a></p>
<p>Then:</p>
<pre>
$ brew update
<strike>$ brew install rbenv </strike>
$ brew install rbenv ruby-build

# Add rbenv to bash so that it loads every time you open a terminal
echo 'if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi' >> ~/.bash_profile
source ~/.bash_profile
</pre>
<p><strike></p>
<blockquote>
<p>
<em><strong>UPDATE</strong></em><br> There’s one additional step after <code>brew install rbenv</code> Run <code>rbenv init</code> and add one line to <code>.bash_profile</code> as it states. After that reopen your terminal window […] SGI Sep 30 at 12:01 —<a href="https://stackoverflow.com/users/119770">https://stackoverflow.com/users/119770</a> </strike>
</p>
</blockquote>
<pre>
$ rbenv install --list
Available versions:
 1.8.5-p113
 1.8.5-p114
 […]
 2.3.1
 2.4.0-dev
 jruby-1.5.6
 […]
$ rbenv install 2.3.1
[…]
</pre>
<p>Set the global version:</p>
<pre>
$ rbenv global 2.3.1
$ ruby -v
ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]
</pre>
<p>Set the local version of your repo by adding <code>.ruby-version</code> to your repo’s root dir:</p>
<pre>
$ cd ~/whatevs/projects/new_repo
$ echo "2.3.1" > .ruby-version
</pre>
<p>For MacOS visit this <a href="https://gorails.com/setup/osx/10.12-sierra" rel="noreferrer">link</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-are-all-the-common-ways-to-read-a-file-in-ruby-score-330735-in-2013" class="level3">
<h3>29: What are all the common ways to read a file in Ruby? (score <a href="https://stackoverflow.com/q/5545068.html">330735</a> in 2013)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>What are all the common ways to read a file in Ruby?</p>
<p>For instance, here is one method:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb150-1"><a href="#cb150-1"></a>fileObj = <span class="dt">File</span>.new(<span class="dt">$fileName</span>, <span class="st">&quot;r&quot;</span>)</span>
<span id="cb150-2"><a href="#cb150-2"></a><span class="kw">while</span> (line = fileObj.gets)</span>
<span id="cb150-3"><a href="#cb150-3"></a>  puts(line)</span>
<span id="cb150-4"><a href="#cb150-4"></a><span class="kw">end</span></span>
<span id="cb150-5"><a href="#cb150-5"></a>fileObj.close</span></code></pre></div>
<p>I know Ruby is extremely flexible. What are the benefits/drawbacks of each approach?</p>
</section>
<section id="answer-accepted-score-250" class="level4">
<h4>Answer accepted (score 250)</h4>
<div class="sourceCode" id="cb151"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb151-1"><a href="#cb151-1"></a><span class="dt">File</span>.open(<span class="st">&quot;my/file/path&quot;</span>, <span class="st">&quot;r&quot;</span>) <span class="kw">do</span> |f|</span>
<span id="cb151-2"><a href="#cb151-2"></a>  f.each_line <span class="kw">do</span> |line|</span>
<span id="cb151-3"><a href="#cb151-3"></a>    puts line</span>
<span id="cb151-4"><a href="#cb151-4"></a>  <span class="kw">end</span></span>
<span id="cb151-5"><a href="#cb151-5"></a><span class="kw">end</span></span>
<span id="cb151-6"><a href="#cb151-6"></a><span class="co"># File is closed automatically at end of block</span></span></code></pre></div>
<p>It is also possible to explicitly close file after as above (pass a block to <code>open</code> closes it for you):</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb152-1"><a href="#cb152-1"></a>f = <span class="dt">File</span>.open(<span class="st">&quot;my/file/path&quot;</span>, <span class="st">&quot;r&quot;</span>)</span>
<span id="cb152-2"><a href="#cb152-2"></a>f.each_line <span class="kw">do</span> |line|</span>
<span id="cb152-3"><a href="#cb152-3"></a>  puts line</span>
<span id="cb152-4"><a href="#cb152-4"></a><span class="kw">end</span></span>
<span id="cb152-5"><a href="#cb152-5"></a>f.close</span></code></pre></div>
</section>
<section id="answer-2-score-316" class="level4">
<h4>Answer 2 (score 316)</h4>
<p>The easiest way if the file isn’t too long is:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb153-1"><a href="#cb153-1"></a>puts <span class="dt">File</span>.read(file_name)</span></code></pre></div>
<p>Indeed, <code>IO.read</code> or <code>File.read</code> automatically close the file, so there is no need to use <code>File.open</code> with a block.</p>
</section>
<section id="answer-3-score-221" class="level4">
<h4>Answer 3 (score 221)</h4>
<p>Be wary of “slurping” files. That’s when you read the entire file into memory at once.</p>
<p>The problem is that it doesn’t scale well. You could be developing code with a reasonably sized file, then put it into production and suddenly find you’re trying to read files measuring in gigabytes, and your host is freezing up as it tries to read and allocate memory.</p>
<p>Line-by-line I/O is very fast, and almost always as effective as slurping. It’s surprisingly fast actually.</p>
<p>I like to use:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb154-1"><a href="#cb154-1"></a><span class="dt">IO</span>.foreach(<span class="st">&quot;testfile&quot;</span>) {|x| print <span class="st">&quot;GOT &quot;</span>, x }</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb155-1"><a href="#cb155-1"></a><span class="dt">File</span>.foreach(<span class="st">&#39;testfile&#39;</span>) {|x| print <span class="st">&quot;GOT&quot;</span>, x }</span></code></pre></div>
<p>File inherits from IO, and <code>foreach</code> is in IO, so you can use either.</p>
<p>I have some benchmarks showing the impact of trying to read big files via <code>read</code> vs. line-by-line I/O at “<a href="https://stackoverflow.com/q/25189262/128421">Why is”slurping" a file not a good practice?</a>".</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="difference-between-rake-dbmigrate-dbreset-and-dbschemaload-score-328333-in-2014" class="level3">
<h3>30: Difference between rake db:migrate db:reset and db:schema:load (score <a href="https://stackoverflow.com/q/10301794.html">328333</a> in 2014)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>The difference between <code>rake db:migrate</code> and <code>rake db:reset</code> is pretty clear in my head. The thing which I don’t understand is how <code>rake db:schema:load</code> different from the former two.</p>
<p>Just to be sure that I am on the same page:</p>
<ul>
<li>
<code>rake db:migrate</code> - Runs the migrations which haven’t been run yet.
</li>
<li>
<code>rake db:reset</code> - Clears the database (presumably does a <code>rake db:drop</code> + <code>rake db:create</code> + <code>rake db:migrate</code>) and runs migration on a fresh database.
</li>
</ul>
<p>Please help to clarify, if my understanding has gone wrong.</p>
</section>
<section id="answer-accepted-score-1248" class="level4">
<h4>Answer accepted (score 1248)</h4>
<ul>
<li>
<strong>db:migrate</strong> runs (single) migrations that have not run yet.
</li>
<li>
<strong>db:create</strong> creates the database
</li>
<li>
<strong>db:drop</strong> deletes the database
</li>
<li>
<p>
<strong>db:schema:load</strong> creates tables and columns within the (existing) database following schema.rb
</p>
</li>
<li>
<p>
<strong>db:setup</strong> does db:create, db:schema:load, db:seed
</p>
</li>
<li>
<strong>db:reset</strong> does db:drop, db:setup
</li>
</ul>
<p>Typically, you would use db:migrate after having made changes to the schema via new migration files (this makes sense only if there is already data in the database). db:schema:load is used when you setup a new instance of your app.</p>
<p>I hope that helps.</p>
<hr>
<p>UPDATE for rails 3.2.12:</p>
<p>I just checked the source and the dependencies are like this now:</p>
<ul>
<li>
<strong>db:create</strong> creates the database for the current env
</li>
<li>
<strong>db:create:all</strong> creates the databases for all envs
</li>
<li>
<strong>db:drop</strong> drops the database for the current env
</li>
<li>
<strong>db:drop:all</strong> drops the databases for all envs
</li>
<li>
<strong>db:migrate</strong> runs migrations for the current env that have not run yet
</li>
<li>
<strong>db:migrate:up</strong> runs one specific migration
</li>
<li>
<strong>db:migrate:down</strong> rolls back one specific migration
</li>
<li>
<strong>db:migrate:status</strong> shows current migration status
</li>
<li>
<strong>db:rollback</strong> rolls back the last migration
</li>
<li>
<strong>db:forward</strong> advances the current schema version to the next one
</li>
<li>
<strong>db:seed</strong> (only) runs the db/seed.rb file
</li>
<li>
<strong>db:schema:load</strong> loads the schema into the current env’s database
</li>
<li>
<p>
<strong>db:schema:dump</strong> dumps the current env’s schema (and seems to create the db as well)
</p>
</li>
<li>
<p>
<strong>db:setup</strong> runs db:schema:load, db:seed
</p>
</li>
<li>
<strong>db:reset</strong> runs db:drop db:setup
</li>
<li>
<strong>db:migrate:redo</strong> runs (db:migrate:down db:migrate:up) or (db:rollback db:migrate) depending on the specified migration
</li>
<li>
<strong>db:migrate:reset</strong> runs db:drop db:create db:migrate
</li>
</ul>
<p>For further information please have a look at <a href="https://github.com/rails/rails/blob/v3.2.12/activerecord/lib/active_record/railties/databases.rake">https://github.com/rails/rails/blob/v3.2.12/activerecord/lib/active_record/railties/databases.rake</a> (for Rails 3.2.x) and <a href="https://github.com/rails/rails/blob/v4.0.5/activerecord/lib/active_record/railties/databases.rake">https://github.com/rails/rails/blob/v4.0.5/activerecord/lib/active_record/railties/databases.rake</a> (for Rails 4.0.x)</p>
</section>
<section id="answer-2-score-21" class="level4">
<h4>Answer 2 (score 21)</h4>
<h5>
TLDR
</h2>
<p>Use</p>
<ul>
<li>
<code>rake db:migrate</code> If you wanna make changes to the schema
</li>
<li>
<code>rake db:reset</code> If you wanna drop the database, reload the schema from <code>schema.rb</code>, and reseed the database
</li>
<li>
<code>rake db:schema:load</code> If you wanna reset database to schema as provided in <code>schema.rb</code> (This will delete all data)
</li>
</ul>
<h5>
Explanations
</h2>
<p><code>rake db:schema:load</code> will set up the schema as provided in <code>schema.rb</code> file. This is useful for a fresh install of app as it doesn’t take as much time as <code>db:migrate</code></p>
<blockquote>
Important note, <code>db:schema:load</code> will <strong>delete</strong> data on server.
</blockquote>
<p><code>rake db:migrate</code> makes changes to the existing schema. Its like creating versions of schema. <code>db:migrate</code> will look in <code>db/migrate/</code> for any ruby files and execute the migrations that aren’t run yet starting with the oldest. Rails knows which file is the oldest by looking at the timestamp at the beginning of the migration filename. <code>db:migrate</code> comes with a benefit that data can also be put in the database. This is actually not a good practice. Its better to use <code>rake db:seed</code> to add data.</p>
<p><code>rake db:migrate</code> provides tasks <a href="https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake#L93" rel="noreferrer">up</a>, <a href="https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake#L100" rel="noreferrer">down</a> etc which enables commands like <code>rake db:rollback</code> and makes it the most useful command.</p>
<p>
<code>rake db:reset</code> does a <code>db:drop</code> and <code>db:setup</code><br> It drops the database, create it again, loads the schema, and initializes with the seed data
</p>
<h5>
Relevant part of the commands from <a href="https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake" rel="noreferrer">databases.rake</a>
</h3>
<hr>
<div class="sourceCode" id="cb156"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb156-1"><a href="#cb156-1"></a>namespace <span class="st">:schema</span> <span class="kw">do</span></span>
<span id="cb156-2"><a href="#cb156-2"></a>  desc <span class="st">&#39;Creates a db/schema.rb file that is portable against any DB supported by Active Record&#39;</span></span>
<span id="cb156-3"><a href="#cb156-3"></a>  task <span class="st">:dump</span> =&gt; [<span class="st">:environment</span>, <span class="st">:load_config</span>] <span class="kw">do</span></span>
<span id="cb156-4"><a href="#cb156-4"></a>    require <span class="st">&#39;active_record/schema_dumper&#39;</span></span>
<span id="cb156-5"><a href="#cb156-5"></a>    filename = <span class="dt">ENV</span>[<span class="st">&#39;SCHEMA&#39;</span>] || <span class="dt">File</span>.join(<span class="dt">ActiveRecord</span>::<span class="dt">Tasks</span>::<span class="dt">DatabaseTasks</span>.db_dir, <span class="st">&#39;schema.rb&#39;</span>)</span>
<span id="cb156-6"><a href="#cb156-6"></a>    <span class="dt">File</span>.open(filename, <span class="st">&quot;w:utf-8&quot;</span>) <span class="kw">do</span> |file|</span>
<span id="cb156-7"><a href="#cb156-7"></a>      <span class="dt">ActiveRecord</span>::<span class="dt">SchemaDumper</span>.dump(<span class="dt">ActiveRecord</span>::<span class="dt">Base</span>.connection, file)</span>
<span id="cb156-8"><a href="#cb156-8"></a>    <span class="kw">end</span></span>
<span id="cb156-9"><a href="#cb156-9"></a>    db_namespace[<span class="st">&#39;schema:dump&#39;</span>].reenable</span>
<span id="cb156-10"><a href="#cb156-10"></a>  <span class="kw">end</span></span>
<span id="cb156-11"><a href="#cb156-11"></a></span>
<span id="cb156-12"><a href="#cb156-12"></a>  desc <span class="st">&#39;Loads a schema.rb file into the database&#39;</span></span>
<span id="cb156-13"><a href="#cb156-13"></a>  task <span class="st">:load</span> =&gt; [<span class="st">:environment</span>, <span class="st">:load_config</span>, <span class="st">:check_protected_environments</span>] <span class="kw">do</span></span>
<span id="cb156-14"><a href="#cb156-14"></a>    <span class="dt">ActiveRecord</span>::<span class="dt">Tasks</span>::<span class="dt">DatabaseTasks</span>.load_schema_current(<span class="st">:ruby</span>, <span class="dt">ENV</span>[<span class="st">&#39;SCHEMA&#39;</span>])</span>
<span id="cb156-15"><a href="#cb156-15"></a>  <span class="kw">end</span></span></code></pre></div>
<hr>
<div class="sourceCode" id="cb157"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb157-1"><a href="#cb157-1"></a>  <span class="co"># desc &#39;Drops and recreates the database from db/schema.rb for the current environment and loads the seeds.&#39;</span></span>
<span id="cb157-2"><a href="#cb157-2"></a>  task <span class="st">:reset</span> =&gt; [ <span class="st">&#39;db:drop&#39;</span>, <span class="st">&#39;db:setup&#39;</span> ]</span></code></pre></div>
<hr>
<div class="sourceCode" id="cb158"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb158-1"><a href="#cb158-1"></a>namespace <span class="st">:migrate</span> <span class="kw">do</span></span>
<span id="cb158-2"><a href="#cb158-2"></a>  <span class="co"># desc  &#39;Rollbacks the database one migration and re migrate up (options: STEP=x, VERSION=x).&#39;</span></span>
<span id="cb158-3"><a href="#cb158-3"></a>  task <span class="st">:redo</span> =&gt; [<span class="st">:environment</span>, <span class="st">:load_config</span>] <span class="kw">do</span></span>
<span id="cb158-4"><a href="#cb158-4"></a>    <span class="kw">if</span> <span class="dt">ENV</span>[<span class="st">&#39;VERSION&#39;</span>]</span>
<span id="cb158-5"><a href="#cb158-5"></a>      db_namespace[<span class="st">&#39;migrate:down&#39;</span>].invoke</span>
<span id="cb158-6"><a href="#cb158-6"></a>      db_namespace[<span class="st">&#39;migrate:up&#39;</span>].invoke</span>
<span id="cb158-7"><a href="#cb158-7"></a>    <span class="kw">else</span></span>
<span id="cb158-8"><a href="#cb158-8"></a>      db_namespace[<span class="st">&#39;rollback&#39;</span>].invoke</span>
<span id="cb158-9"><a href="#cb158-9"></a>      db_namespace[<span class="st">&#39;migrate&#39;</span>].invoke</span>
<span id="cb158-10"><a href="#cb158-10"></a>    <span class="kw">end</span></span>
<span id="cb158-11"><a href="#cb158-11"></a>  <span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-3-score-2" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>As far as I understand, it is going to drop your database and re-create it based on your <code>db/schema.rb</code> file. That is why you need to make sure that your <code>schema.rb</code> file is always up to date and under version control.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-use-the-conditional-operator-in-ruby-score-327740-in-2014" class="level3">
<h3>31: How do I use the conditional operator (? :) in Ruby? (score <a href="https://stackoverflow.com/q/4252936.html">327740</a> in 2014)</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>How is the conditional operator (<code>? :</code>) used in Ruby?</p>
<p>For example, is this correct?</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb159-1"><a href="#cb159-1"></a>&lt;% question = question.size &gt; <span class="dv">20</span> ? question.question.slice(<span class="dv">0</span>, <span class="dv">20</span>)+<span class="st">&quot;...&quot;</span> : question.question <span class="ot">%&gt;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-480" class="level4">
<h4>Answer accepted (score 480)</h4>
<p>It is the <a href="http://en.wikipedia.org/wiki/Ternary_operation">ternary operator</a>, and it works like in C (the parenthesis are not required). It’s an expression that works like:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb160-1"><a href="#cb160-1"></a>if_this_is_a_true_value ? then_the_result_is_this : else_it_is_this</span></code></pre></div>
<p>However, in Ruby, <code>if</code> is also an expression so: <code>if a then b else c end</code> === <code>a ? b : c</code>, except for precedence issues. Both are expressions.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb161-1"><a href="#cb161-1"></a>puts <span class="kw">(if</span> <span class="dv">1</span> <span class="kw">then</span> <span class="dv">2</span> <span class="kw">else</span> <span class="dv">3</span> <span class="kw">end</span>) <span class="co"># =&gt; 2</span></span>
<span id="cb161-2"><a href="#cb161-2"></a></span>
<span id="cb161-3"><a href="#cb161-3"></a>puts <span class="dv">1</span> ? <span class="dv">2</span> : <span class="dv">3</span>                <span class="co"># =&gt; 2</span></span>
<span id="cb161-4"><a href="#cb161-4"></a></span>
<span id="cb161-5"><a href="#cb161-5"></a>x <span class="kw">= if</span> <span class="dv">1</span> <span class="kw">then</span> <span class="dv">2</span> <span class="kw">else</span> <span class="dv">3</span> <span class="kw">end</span></span>
<span id="cb161-6"><a href="#cb161-6"></a>puts x                        <span class="co"># =&gt; 2</span></span></code></pre></div>
<p>Note that in the first case parenthesis are required (otherwise Ruby is confused because it thinks it is <code>puts if 1</code> with some extra junk after it), but they are not required in the last case as said issue does not arise.</p>
<p>You can use the “long-if” form for readability on multiple lines:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb162-1"><a href="#cb162-1"></a>question <span class="kw">= if</span> question.size &gt; <span class="dv">20</span> <span class="kw">then</span></span>
<span id="cb162-2"><a href="#cb162-2"></a>  question.slice(<span class="dv">0</span>, <span class="dv">20</span>) + <span class="st">&quot;...&quot;</span></span>
<span id="cb162-3"><a href="#cb162-3"></a><span class="kw">else</span> </span>
<span id="cb162-4"><a href="#cb162-4"></a>  question</span>
<span id="cb162-5"><a href="#cb162-5"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-2-score-34-1" class="level4">
<h4>Answer 2 (score 34)</h4>
<div class="sourceCode" id="cb163"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb163-1"><a href="#cb163-1"></a>puts <span class="dv">true</span> ? <span class="st">&quot;true&quot;</span> : <span class="st">&quot;false&quot;</span></span>
<span id="cb163-2"><a href="#cb163-2"></a>=&gt; <span class="st">&quot;true&quot;</span></span>
<span id="cb163-3"><a href="#cb163-3"></a></span>
<span id="cb163-4"><a href="#cb163-4"></a></span>
<span id="cb163-5"><a href="#cb163-5"></a>puts <span class="dv">false</span> ? <span class="st">&quot;true&quot;</span> : <span class="st">&quot;false&quot;</span></span>
<span id="cb163-6"><a href="#cb163-6"></a>=&gt; <span class="st">&quot;false&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-26-1" class="level4">
<h4>Answer 3 (score 26)</h4>
<p>Your use of ERB suggests that you are in Rails. If so, then consider <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate" rel="noreferrer"><code>truncate</code></a>, a built-in helper which will do the job for you:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb164-1"><a href="#cb164-1"></a>&lt;% question = truncate(question, <span class="st">:length=</span>&gt;<span class="dv">30</span>) %&gt;</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-warray-mean-score-326817-in-2016" class="level3">
<h3>32: What does %w(array) mean? (score <a href="https://stackoverflow.com/q/1274675.html">326817</a> in 2016)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>I’m looking at the documentation for FileUtils. I’m confused by the following line:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb165-1"><a href="#cb165-1"></a><span class="dt">FileUtils</span>.cp <span class="ot">%w(</span><span class="st">cgi.rb complex.rb date.rb</span><span class="ot">)</span>, <span class="st">&#39;/usr/lib/ruby/1.6&#39;</span></span></code></pre></div>
<p>What does the <code>%w</code> mean? Can you point me to the documentation?</p>
</section>
<section id="answer-accepted-score-1185" class="level4">
<h4>Answer accepted (score 1185)</h4>
<p><code>%w(foo bar)</code> is a shortcut for <code>["foo", "bar"]</code>. Meaning it’s a notation to write an array of strings separated by spaces instead of commas and without quotes around them. You can find a list of ways of writing literals in <a href="http://www.zenspider.com/ruby/quickref.html#types" rel="noreferrer">zenspider’s quickref</a>.</p>
</section>
<section id="answer-2-score-448" class="level4">
<h4>Answer 2 (score 448)</h4>
<p>I think of <code>%w()</code> as a “word array” - the elements are delimited by spaces and it returns an array of strings.</p>
<p>There are other % literals:</p>
<ul>
<li>
<code>%r()</code> is another way to write a regular expression.
</li>
<li>
<code>%q()</code> is another way to write a single-quoted string (and can be multi-line, which is useful)
</li>
<li>
<code>%Q()</code> gives a double-quoted string
</li>
<li>
<code>%x()</code> is a shell command
</li>
<li>
<code>%i()</code> gives an array of symbols (Ruby &gt;= 2.0.0)
</li>
<li>
<code>%s()</code> turns <code>foo</code> into a symbol (<code>:foo</code>)
</li>
</ul>
<p>I don’t know any others, but there may be some lurking around in there…</p>
</section>
<section id="answer-3-score-58" class="level4">
<h4>Answer 3 (score 58)</h4>
<p>There is also <code>%s</code> that allows you to create any symbols, for example:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb166-1"><a href="#cb166-1"></a><span class="ot">%</span>s<span class="ot">|</span><span class="st">some</span><span class="ot"> </span>words|          <span class="co">#Same as :&#39;some words&#39;</span></span>
<span id="cb166-2"><a href="#cb166-2"></a><span class="ot">%</span>s<span class="ot">[</span><span class="st">other words</span><span class="ot">]</span>         <span class="co">#Same as :&#39;other words&#39;</span></span>
<span id="cb166-3"><a href="#cb166-3"></a><span class="ot">%</span>s_last example_        <span class="ot">#</span><span class="st">Same as :&#39;last example&#39;</span></span></code></pre></div>
<p>Since Ruby 2.0.0 you also have:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb167-1"><a href="#cb167-1"></a><span class="ot">%</span>i<span class="ot">(</span><span class="st"> a b c </span><span class="ot">)</span>   <span class="co"># =&gt; [ :a, :b, :c ]</span></span>
<span id="cb167-2"><a href="#cb167-2"></a><span class="ot">%</span>i<span class="ot">[</span><span class="st"> a b c </span><span class="ot">]</span>   <span class="co"># =&gt; [ :a, :b, :c ]</span></span>
<span id="cb167-3"><a href="#cb167-3"></a><span class="ot">%</span>i_ a b c _   <span class="ot">#</span><span class="st"> =&gt; [ :a, :b, :c ]</span></span>
<span id="cb167-4"><a href="#cb167-4"></a><span class="ot">#</span> etc...</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="checking-if-a-variable-is-defined-score-323815-in-2014" class="level3">
<h3>33: Checking if a variable is defined? (score <a href="https://stackoverflow.com/q/288715.html">323815</a> in 2014)</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>How can I check whether a variable is defined in Ruby? Is there an <code>isset</code>-type method available?</p>
</section>
<section id="answer-accepted-score-778" class="level4">
<h4>Answer accepted (score 778)</h4>
<p>Use the <code>defined?</code> keyword (<a href="http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-defined-3F" rel="noreferrer">documentation</a>). It will return a String with the kind of the item, or <code>nil</code> if it doesn’t exist.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb168-1"><a href="#cb168-1"></a>&gt;&gt; a = <span class="dv">1</span></span>
<span id="cb168-2"><a href="#cb168-2"></a> =&gt; <span class="dv">1</span></span>
<span id="cb168-3"><a href="#cb168-3"></a>&gt;&gt; <span class="kw">defined?</span> a</span>
<span id="cb168-4"><a href="#cb168-4"></a> =&gt; <span class="st">&quot;local-variable&quot;</span></span>
<span id="cb168-5"><a href="#cb168-5"></a>&gt;&gt; <span class="kw">defined?</span> b</span>
<span id="cb168-6"><a href="#cb168-6"></a> =&gt; <span class="dv">nil</span></span>
<span id="cb168-7"><a href="#cb168-7"></a>&gt;&gt; <span class="kw">defined?</span> <span class="dv">nil</span></span>
<span id="cb168-8"><a href="#cb168-8"></a> =&gt; <span class="st">&quot;nil&quot;</span></span>
<span id="cb168-9"><a href="#cb168-9"></a>&gt;&gt; <span class="kw">defined?</span> <span class="dt">String</span></span>
<span id="cb168-10"><a href="#cb168-10"></a> =&gt; <span class="st">&quot;constant&quot;</span></span>
<span id="cb168-11"><a href="#cb168-11"></a>&gt;&gt; <span class="kw">defined?</span> <span class="dv">1</span></span>
<span id="cb168-12"><a href="#cb168-12"></a> =&gt; <span class="st">&quot;expression&quot;</span></span></code></pre></div>
<p>As skalee commented: “It is worth noting that variable which is set to nil is initialized.”</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb169-1"><a href="#cb169-1"></a>&gt;&gt; n = <span class="dv">nil</span>  </span>
<span id="cb169-2"><a href="#cb169-2"></a>&gt;&gt; <span class="kw">defined?</span> n</span>
<span id="cb169-3"><a href="#cb169-3"></a> =&gt; <span class="st">&quot;local-variable&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-91" class="level4">
<h4>Answer 2 (score 91)</h4>
<p>This is useful if you want to do nothing if it does exist but create it if it doesn’t exist.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb170-1"><a href="#cb170-1"></a><span class="kw">def</span> get_var</span>
<span id="cb170-2"><a href="#cb170-2"></a>  <span class="ot">@var</span> ||= <span class="dt">SomeClass</span>.new()</span>
<span id="cb170-3"><a href="#cb170-3"></a><span class="kw">end</span></span></code></pre></div>
<p>This only creates the new instance once. After that it just keeps returning the var.</p>
</section>
<section id="answer-3-score-70" class="level4">
<h4>Answer 3 (score 70)</h4>
<p>The correct syntax for the above statement is:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb171-1"><a href="#cb171-1"></a><span class="kw">if</span> (<span class="kw">defined?</span>(var)).nil? <span class="co"># will now return true or false</span></span>
<span id="cb171-2"><a href="#cb171-2"></a> print <span class="st">&quot;var is not defined\n&quot;</span>.color(<span class="st">:red</span>)</span>
<span id="cb171-3"><a href="#cb171-3"></a><span class="kw">else</span></span>
<span id="cb171-4"><a href="#cb171-4"></a> print <span class="st">&quot;var is defined\n&quot;</span>.color(<span class="st">:green</span>)</span>
<span id="cb171-5"><a href="#cb171-5"></a><span class="kw">end</span></span></code></pre></div>
<p>substituting (<code>var</code>) with your variable. This syntax will return a true/false value for evaluation in the if statement.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-pass-command-line-arguments-to-a-rake-task-score-321914-in-2016" class="level3">
<h3>34: How to pass command line arguments to a rake task (score <a href="https://stackoverflow.com/q/825748.html">321914</a> in 2016)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>I have a rake task that needs to insert a value into multiple databases.</p>
<p>I’d like to pass this value into the rake task from the command line, or from <em>another</em> rake task.</p>
<p>How can I do this?</p>
</section>
<section id="answer-accepted-score-334" class="level4">
<h4>Answer accepted (score 334)</h4>
<p>options and dependencies need to be inside arrays:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb172-1"><a href="#cb172-1"></a>namespace <span class="st">:thing</span> <span class="kw">do</span></span>
<span id="cb172-2"><a href="#cb172-2"></a>  desc <span class="st">&quot;it does a thing&quot;</span></span>
<span id="cb172-3"><a href="#cb172-3"></a>  task <span class="st">:work</span>, [<span class="st">:option</span>, <span class="st">:foo</span>, <span class="st">:bar</span>] <span class="kw">do</span> |task, args|</span>
<span id="cb172-4"><a href="#cb172-4"></a>    puts <span class="st">&quot;work&quot;</span>, args</span>
<span id="cb172-5"><a href="#cb172-5"></a>  <span class="kw">end</span></span>
<span id="cb172-6"><a href="#cb172-6"></a></span>
<span id="cb172-7"><a href="#cb172-7"></a>  task <span class="st">:another</span>, [<span class="st">:option</span>, <span class="st">:foo</span>, <span class="st">:bar</span>] <span class="kw">do</span> |task, args|</span>
<span id="cb172-8"><a href="#cb172-8"></a>    puts <span class="st">&quot;another </span><span class="ot">#{</span>args<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb172-9"><a href="#cb172-9"></a>    <span class="dt">Rake</span>::<span class="dt">Task</span>[<span class="st">&quot;thing:work&quot;</span>].invoke(args[<span class="st">:option</span>], args[<span class="st">:foo</span>], args[<span class="st">:bar</span>])</span>
<span id="cb172-10"><a href="#cb172-10"></a>    <span class="co"># or splat the args</span></span>
<span id="cb172-11"><a href="#cb172-11"></a>    <span class="co"># Rake::Task[&quot;thing:work&quot;].invoke(*args)</span></span>
<span id="cb172-12"><a href="#cb172-12"></a>  <span class="kw">end</span></span>
<span id="cb172-13"><a href="#cb172-13"></a></span>
<span id="cb172-14"><a href="#cb172-14"></a><span class="kw">end</span></span></code></pre></div>
<p>Then</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb173-1"><a href="#cb173-1"></a>rake thing<span class="st">:work</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb173-2"><a href="#cb173-2"></a>=&gt; <span class="st">work: </span>{<span class="st">:option=</span>&gt;<span class="st">&quot;1&quot;</span>, <span class="st">:foo=</span>&gt;<span class="st">&quot;2&quot;</span>, <span class="st">:bar=</span>&gt;<span class="st">&quot;3&quot;</span>}</span>
<span id="cb173-3"><a href="#cb173-3"></a></span>
<span id="cb173-4"><a href="#cb173-4"></a>rake thing<span class="st">:another</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb173-5"><a href="#cb173-5"></a>=&gt; another {<span class="st">:option=</span>&gt;<span class="st">&quot;1&quot;</span>, <span class="st">:foo=</span>&gt;<span class="st">&quot;2&quot;</span>, <span class="st">:bar=</span>&gt;<span class="st">&quot;3&quot;</span>}</span>
<span id="cb173-6"><a href="#cb173-6"></a>=&gt; <span class="st">work: </span>{<span class="st">:option=</span>&gt;<span class="st">&quot;1&quot;</span>, <span class="st">:foo=</span>&gt;<span class="st">&quot;2&quot;</span>, <span class="st">:bar=</span>&gt;<span class="st">&quot;3&quot;</span>}</span></code></pre></div>
<blockquote>
NOTE: variable <code>task</code> is the the task object, not very helpful unless you know/care about Rake internals.
</blockquote>
<p><strong>RAILS NOTE:</strong></p>
<blockquote>
If running the task from rails, its best to preload the environment by adding <code>=&amp;gt; [:environment]</code> which is a way to setup <em>dependent</em> tasks.
</blockquote>
<div class="sourceCode" id="cb174"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb174-1"><a href="#cb174-1"></a>  task <span class="st">:work</span>, [<span class="st">:option</span>, <span class="st">:foo</span>, <span class="st">:bar</span>] =&gt; [<span class="st">:environment</span>] <span class="kw">do</span> |task, args|</span>
<span id="cb174-2"><a href="#cb174-2"></a>    puts <span class="st">&quot;work&quot;</span>, args</span>
<span id="cb174-3"><a href="#cb174-3"></a>  <span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-2-score-1117" class="level4">
<h4>Answer 2 (score 1117)</h4>
<p>You can specify formal arguments in rake by adding symbol arguments to the task call. For example:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb175-1"><a href="#cb175-1"></a>require <span class="st">&#39;rake&#39;</span></span>
<span id="cb175-2"><a href="#cb175-2"></a></span>
<span id="cb175-3"><a href="#cb175-3"></a>task <span class="st">:my_task</span>, [<span class="st">:arg1</span>, <span class="st">:arg2</span>] <span class="kw">do</span> |t, args|</span>
<span id="cb175-4"><a href="#cb175-4"></a>  puts <span class="st">&quot;Args were: </span><span class="ot">#{</span>args<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb175-5"><a href="#cb175-5"></a><span class="kw">end</span></span>
<span id="cb175-6"><a href="#cb175-6"></a></span>
<span id="cb175-7"><a href="#cb175-7"></a>task <span class="st">:invoke_my_task</span> <span class="kw">do</span></span>
<span id="cb175-8"><a href="#cb175-8"></a>  <span class="dt">Rake</span>.application.invoke_task(<span class="st">&quot;my_task[1, 2]&quot;</span>)</span>
<span id="cb175-9"><a href="#cb175-9"></a><span class="kw">end</span></span>
<span id="cb175-10"><a href="#cb175-10"></a></span>
<span id="cb175-11"><a href="#cb175-11"></a><span class="co"># or if you prefer this syntax...</span></span>
<span id="cb175-12"><a href="#cb175-12"></a>task <span class="st">:invoke_my_task_2</span> <span class="kw">do</span></span>
<span id="cb175-13"><a href="#cb175-13"></a>  <span class="dt">Rake</span>::<span class="dt">Task</span>[<span class="st">:my_task</span>].invoke(<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb175-14"><a href="#cb175-14"></a><span class="kw">end</span></span>
<span id="cb175-15"><a href="#cb175-15"></a></span>
<span id="cb175-16"><a href="#cb175-16"></a><span class="co"># a task with prerequisites passes its </span></span>
<span id="cb175-17"><a href="#cb175-17"></a><span class="co"># arguments to it prerequisites</span></span>
<span id="cb175-18"><a href="#cb175-18"></a>task <span class="st">:with_prerequisite</span>, [<span class="st">:arg1</span>, <span class="st">:arg2</span>] =&gt; <span class="st">:my_task</span> <span class="co">#&lt;- name of prerequisite task</span></span>
<span id="cb175-19"><a href="#cb175-19"></a></span>
<span id="cb175-20"><a href="#cb175-20"></a><span class="co"># to specify default values, </span></span>
<span id="cb175-21"><a href="#cb175-21"></a><span class="co"># we take advantage of args being a Rake::TaskArguments object</span></span>
<span id="cb175-22"><a href="#cb175-22"></a>task <span class="st">:with_defaults</span>, <span class="st">:arg1</span>, <span class="st">:arg2</span> <span class="kw">do</span> |t, args|</span>
<span id="cb175-23"><a href="#cb175-23"></a>  args.with_defaults(<span class="st">:arg1</span> =&gt; <span class="st">:default_1</span>, <span class="st">:arg2</span> =&gt; <span class="st">:default_2</span>)</span>
<span id="cb175-24"><a href="#cb175-24"></a>  puts <span class="st">&quot;Args with defaults were: </span><span class="ot">#{</span>args<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb175-25"><a href="#cb175-25"></a><span class="kw">end</span></span></code></pre></div>
<p>Then, from the command line:</p>
<pre>
> rake my_task[1,2]
Args were: {:arg1=>"1", :arg2=>"2"}

> rake "my_task[1, 2]"
Args were: {:arg1=>"1", :arg2=>"2"}

> rake invoke_my_task
Args were: {:arg1=>"1", :arg2=>"2"}

> rake invoke_my_task_2
Args were: {:arg1=>3, :arg2=>4}

> rake with_prerequisite[5,6]
Args were: {:arg1=>"5", :arg2=>"6"}

> rake with_defaults
Args with defaults were: {:arg1=>:default_1, :arg2=>:default_2}

> rake with_defaults['x','y']
Args with defaults were: {:arg1=>"x", :arg2=>"y"}
</pre>
<p>As demonstrated in the second example, if you want to use spaces, the quotes around the target name are necessary to keep the shell from splitting up the arguments at the space.</p>
<p>Looking at the code in <strong>rake.rb</strong>, it appears that rake does not parse task strings to extract arguments for prerequisites, so you can’t do <code>task :t1 =&amp;gt; "dep[1,2]"</code>. The only way to specify different arguments for a prerequisite would be to invoke it explicitly within the dependent task action, as in <code>:invoke_my_task</code> and <code>:invoke_my_task_2</code>.</p>
<p>Note that some shells (like zsh) require you to escape the brackets: <code>rake my_task\['arg1'\]</code></p>
</section>
<section id="answer-3-score-327" class="level4">
<h4>Answer 3 (score 327)</h4>
<p>In addition to answer by kch (I didn’t find how to leave a comment to that, sorry):</p>
<p>You don’t have to specify variables as <code>ENV</code> variables before the <code>rake</code> command. You can just set them as usual command line parameters like that:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb176-1"><a href="#cb176-1"></a>rake mytask var=foo</span></code></pre></div>
<p>and access those from your rake file as ENV variables like such:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb177-1"><a href="#cb177-1"></a>p <span class="dt">ENV</span>[<span class="st">&#39;var&#39;</span>] <span class="co"># =&gt; &quot;foo&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="replace-words-in-a-string---ruby-score-320293-in-2018" class="level3">
<h3>35: Replace words in a string - Ruby (score <a href="https://stackoverflow.com/q/8381499.html">320293</a> in 2018)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>I have a string in Ruby:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb178-1"><a href="#cb178-1"></a>sentence = <span class="st">&quot;My name is Robert&quot;</span></span></code></pre></div>
<p>How can I replace any one word in this sentence easily without using complex code or a loop?</p>
</section>
<section id="answer-accepted-score-51" class="level4">
<h4>Answer accepted (score 51)</h4>
<p>You can try using this way :</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb179-1"><a href="#cb179-1"></a>sentence [<span class="st">&quot;Robert&quot;</span>] = <span class="st">&quot;Roger&quot;</span></span></code></pre></div>
<p>Then the sentence will become :</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb180-1"><a href="#cb180-1"></a>sentence = <span class="st">&quot;My name is Roger&quot;</span> <span class="co"># Robert is replaced with Roger</span></span></code></pre></div>
</section>
<section id="answer-2-score-467" class="level4">
<h4>Answer 2 (score 467)</h4>
<div class="sourceCode" id="cb181"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb181-1"><a href="#cb181-1"></a>sentence.sub! <span class="st">&#39;Robert&#39;</span>, <span class="st">&#39;Joe&#39;</span></span></code></pre></div>
<p>Won’t cause an exception if the replaced word isn’t in the sentence (the <code>[]=</code> variant will).</p>
<h5>
How to replace all instances?
</h2>
<p>The above replaces only the first instance of “Robert”.</p>
<p>To replace all instances use <code>gsub</code>/<code>gsub!</code> (ie. “global substitution”):</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb182-1"><a href="#cb182-1"></a>sentence.gsub! <span class="st">&#39;Robert&#39;</span>, <span class="st">&#39;Joe&#39;</span></span></code></pre></div>
<p>The above will replace all instances of Robert with Joe.</p>
</section>
<section id="answer-3-score-120" class="level4">
<h4>Answer 3 (score 120)</h4>
<p>If you’re dealing with natural language text and need to replace a word, not just part of a string, you have to add a pinch of regular expressions to your gsub as a plain text substitution can lead to disastrous results:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb183-1"><a href="#cb183-1"></a><span class="st">&#39;mislocated cat, vindicating&#39;</span>.gsub(<span class="st">&#39;cat&#39;</span>, <span class="st">&#39;dog&#39;</span>)</span>
<span id="cb183-2"><a href="#cb183-2"></a>=&gt; <span class="st">&quot;mislodoged dog, vindidoging&quot;</span></span></code></pre></div>
<p>Regular expressions have word boundaries, such as <code>\b</code> which matches start or end of a word. Thus,</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb184-1"><a href="#cb184-1"></a><span class="st">&#39;mislocated cat, vindicating&#39;</span>.gsub(<span class="ot">/\bcat\b/</span>, <span class="st">&#39;dog&#39;</span>)</span>
<span id="cb184-2"><a href="#cb184-2"></a>=&gt; <span class="st">&quot;mislocated dog, vindicating&quot;</span></span></code></pre></div>
<p>In Ruby, unlike some other languages like Javascript, word boundaries are UTF-8-compatible, so you can use it for languages with non-Latin or extended Latin alphabets:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb185-1"><a href="#cb185-1"></a><span class="st">&#39;сіль у кисіль, для весіль&#39;</span>.gsub(<span class="ot">/\bсіль\b/</span>, <span class="st">&#39;цукор&#39;</span>)</span>
<span id="cb185-2"><a href="#cb185-2"></a>=&gt; <span class="st">&quot;цукор у кисіль, для весіль&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-delete-one-element-from-an-array-by-value-score-319020-in-2019" class="level3">
<h3>36: How can I delete one element from an array by value (score <a href="https://stackoverflow.com/q/10034678.html">319020</a> in 2019)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I have an array of elements in Ruby</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb186-1"><a href="#cb186-1"></a>[<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">8</span>]</span></code></pre></div>
<p>I need to remove elements with value <code>3</code> for example</p>
<p>How do I do that?</p>
</section>
<section id="answer-accepted-score-446" class="level4">
<h4>Answer accepted (score 446)</h4>
<p>I think I’ve figured it out:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb187-1"><a href="#cb187-1"></a>a = [<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">8</span>]</span>
<span id="cb187-2"><a href="#cb187-2"></a>a.delete(<span class="dv">3</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-211" class="level4">
<h4>Answer 2 (score 211)</h4>
<p>Borrowing from <strong>Travis</strong> in the comments, this is a better answer:</p>
<blockquote>
I personally like <code>[1, 2, 7, 4, 5] - [7]</code> which results in <code>=&amp;gt; [1, 2, 4, 5]</code> from <code>irb</code>
</blockquote>
<p><em>I modified his answer seeing that 3 was the third element in his example array. This could lead to some confusion for those who don’t realize that 3 is in position 2 in the array.</em></p>
</section>
<section id="answer-3-score-64" class="level4">
<h4>Answer 3 (score 64)</h4>
<p>Another option:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb188-1"><a href="#cb188-1"></a>a = [<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">8</span>]</span>
<span id="cb188-2"><a href="#cb188-2"></a></span>
<span id="cb188-3"><a href="#cb188-3"></a>a -= [<span class="dv">3</span>]</span></code></pre></div>
<p>which results in</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb189-1"><a href="#cb189-1"></a>=&gt; [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>] </span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ruby-can-i-write-multi-line-string-with-no-concatenation-score-313943-in-2012" class="level3">
<h3>37: Ruby: Can I write multi-line string with no concatenation? (score <a href="https://stackoverflow.com/q/2337510.html">313943</a> in 2012)</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>Is there a way to make this look a little better?</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb190-1"><a href="#cb190-1"></a>conn.exec <span class="st">&#39;select attr1, attr2, attr3, attr4, attr5, attr6, attr7 &#39;</span> +</span>
<span id="cb190-2"><a href="#cb190-2"></a>          <span class="st">&#39;from table1, table2, table3, etc, etc, etc, etc, etc, &#39;</span> +</span>
<span id="cb190-3"><a href="#cb190-3"></a>          <span class="st">&#39;where etc etc etc etc etc etc etc etc etc etc etc etc etc&#39;</span></span></code></pre></div>
<p>Like, is there a way to imply concatenation?</p>
</section>
<section id="answer-accepted-score-552" class="level4">
<h4>Answer accepted (score 552)</h4>
<p>There are pieces to this answer that helped me get what I needed (easy multi-line concatenation WITHOUT extra whitespace), but since none of the actual answers had it, I’m compiling them here:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb191-1"><a href="#cb191-1"></a>str = <span class="st">&#39;this is a multi-line string&#39;</span>\</span>
<span id="cb191-2"><a href="#cb191-2"></a>  <span class="st">&#39; using implicit concatenation&#39;</span>\</span>
<span id="cb191-3"><a href="#cb191-3"></a>  <span class="st">&#39; to prevent spare \n\&#39;s&#39;</span></span>
<span id="cb191-4"><a href="#cb191-4"></a></span>
<span id="cb191-5"><a href="#cb191-5"></a>=&gt; <span class="st">&quot;this is a multi-line string using implicit concatenation to eliminate spare</span></span>
<span id="cb191-6"><a href="#cb191-6"></a><span class="st">\\n&#39;s&quot;</span></span></code></pre></div>
<p>As a bonus, here’s a version using funny HEREDOC syntax (via <a href="http://graysoftinc.com/ruby-voodoo/working-with-multiline-strings" rel="noreferrer">this link</a>):</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb192-1"><a href="#cb192-1"></a>p &lt;&lt;<span class="kw">END_SQL</span><span class="ot">.gsub(/\s+/, &quot; &quot;).strip</span></span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="ot">SELECT * FROM     users</span></span>
<span id="cb192-3"><a href="#cb192-3"></a><span class="ot">         ORDER BY users.id DESC</span></span>
<span id="cb192-4"><a href="#cb192-4"></a><span class="kw">END_SQL</span></span>
<span id="cb192-5"><a href="#cb192-5"></a><span class="co"># &gt;&gt; &quot;SELECT * FROM users ORDER BY users.id DESC&quot;</span></span></code></pre></div>
<p>The latter would mostly be for situations that required more flexibility in the processing. I personally don’t like it, it puts the processing in a weird place w.r.t. the string (i.e., in front of it, but using instance methods that usually come afterward), but it’s there. Note that if you are indenting the last <code>END_SQL</code> identifier (which is common, since this is probably inside a function or module), you will need to use the hyphenated syntax (that is, <code>p &amp;lt;&amp;lt;-END_SQL</code> instead of <code>p &amp;lt;&amp;lt;END_SQL</code>). Otherwise, the indenting whitespace causes the identifier to be interpreted as a continuation of the string.</p>
<p>This doesn’t save much typing, but it looks nicer than using + signs, to me.</p>
<p>EDIT: Adding one more:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb193-1"><a href="#cb193-1"></a>p <span class="ot">%{</span></span>
<span id="cb193-2"><a href="#cb193-2"></a><span class="st">SELECT * FROM     users</span></span>
<span id="cb193-3"><a href="#cb193-3"></a><span class="st">         ORDER BY users.id DESC</span></span>
<span id="cb193-4"><a href="#cb193-4"></a><span class="ot">}</span>.gsub(<span class="ot">/\s+/</span>, <span class="st">&quot; &quot;</span>).strip</span>
<span id="cb193-5"><a href="#cb193-5"></a><span class="co"># &gt;&gt; &quot;SELECT * FROM users ORDER BY users.id DESC&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-165" class="level4">
<h4>Answer 2 (score 165)</h4>
<p>Yes, if you don’t mind the extra newlines being inserted:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb194-1"><a href="#cb194-1"></a> conn.exec <span class="st">&#39;select attr1, attr2, attr3, attr4, attr5, attr6, attr7</span></span>
<span id="cb194-2"><a href="#cb194-2"></a><span class="st">            from table1, table2, table3, etc, etc, etc, etc, etc,</span></span>
<span id="cb194-3"><a href="#cb194-3"></a><span class="st">            where etc etc etc etc etc etc etc etc etc etc etc etc etc&#39;</span></span></code></pre></div>
<p>Alternatively you can use a <a href="http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#here_doc" rel="noreferrer">heredoc</a>:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb195-1"><a href="#cb195-1"></a>conn.exec &lt;&lt;-<span class="kw">eos</span></span>
<span id="cb195-2"><a href="#cb195-2"></a><span class="ot">   select attr1, attr2, attr3, attr4, attr5, attr6, attr7</span></span>
<span id="cb195-3"><a href="#cb195-3"></a><span class="ot">   from table1, table2, table3, etc, etc, etc, etc, etc,</span></span>
<span id="cb195-4"><a href="#cb195-4"></a><span class="ot">   where etc etc etc etc etc etc etc etc etc etc etc etc etc</span></span>
<span id="cb195-5"><a href="#cb195-5"></a><span class="kw">eos</span></span></code></pre></div>
</section>
<section id="answer-3-score-163" class="level4">
<h4>Answer 3 (score 163)</h4>
<p>In ruby 2.0 you can now just use <code>%</code></p>
<p>For example:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb196-1"><a href="#cb196-1"></a><span class="dt">SQL</span> =<span class="ot"> %{</span></span>
<span id="cb196-2"><a href="#cb196-2"></a><span class="st">SELECT user, name</span></span>
<span id="cb196-3"><a href="#cb196-3"></a><span class="st">FROM users</span></span>
<span id="cb196-4"><a href="#cb196-4"></a><span class="st">WHERE users.id = </span><span class="ot">#{</span>var<span class="ot">}</span></span>
<span id="cb196-5"><a href="#cb196-5"></a><span class="st">LIMIT </span><span class="ot">#{</span>var2<span class="ot">}</span></span>
<span id="cb196-6"><a href="#cb196-6"></a><span class="ot">}</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-execute-a-ruby-script-in-terminal-score-309118-in-2014" class="level3">
<h3>38: How to execute a Ruby script in Terminal? (score <a href="https://stackoverflow.com/q/8721369.html">309118</a> in 2014)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>I’ve set everything up that I need on my Mac (Ruby, Rails, Homebrew, Git, etc), and I’ve even written a small program. Now, how do I execute it in Terminal? I wrote the program in Redcar and saved it as a .rb, but I don’t know how to execute it through Terminal. I want to run the program and see if it actually works. How do I do this?</p>
</section>
<section id="answer-2-score-229" class="level4">
<h4>Answer 2 (score 229)</h4>
<p>Just call: <code>ruby your_program.rb</code></p>
<p>or</p>
<ul>
<li>
start your program with <code>#!/usr/bin/env ruby</code>,
</li>
<li>
make your file executable by running <code>chmod +x your_program.rb</code>
</li>
<li>
and do <code>./your_program.rb some_param</code>
</li>
</ul>
</section>
<section id="answer-3-score-32" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>
Open your terminal and open folder where file is saved.<br> Ex <code>/home/User1/program/test.rb</code><br>
</p>
<ol>
<li>
Open terminal
</li>
<li>
<code>cd /home/User1/program</code>
</li>
<li>
<code>ruby test.rb</code>
</li>
</ol>
<p>format or test.rb</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb197-1"><a href="#cb197-1"></a><span class="kw">class</span> <span class="dt">Test</span> </span>
<span id="cb197-2"><a href="#cb197-2"></a>  <span class="kw">def</span> initialize</span>
<span id="cb197-3"><a href="#cb197-3"></a>   puts <span class="st">&quot;I love India&quot;</span></span>
<span id="cb197-4"><a href="#cb197-4"></a>  <span class="kw">end</span></span>
<span id="cb197-5"><a href="#cb197-5"></a><span class="kw">end</span></span>
<span id="cb197-6"><a href="#cb197-6"></a></span>
<span id="cb197-7"><a href="#cb197-7"></a><span class="co"># initialize object</span></span>
<span id="cb197-8"><a href="#cb197-8"></a><span class="dt">Test</span>.new</span></code></pre></div>
<p><strong>output</strong></p>
<div class="sourceCode" id="cb198"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb198-1"><a href="#cb198-1"></a>I love <span class="dt">India</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-install-a-local-gem-score-305796-in-2013" class="level3">
<h3>39: How can I install a local gem? (score <a href="https://stackoverflow.com/q/220176.html">305796</a> in 2013)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>If I download a .gem file to a folder in my computer, can I install it later using <code>gem install</code>?</p>
</section>
<section id="answer-accepted-score-281" class="level4">
<h4>Answer accepted (score 281)</h4>
<p>Yup, when you do <code>gem install</code>, it will search the current directory first, so if your .gem file is there, it will pick it up. I found it on the <a href="https://guides.rubygems.org/command-reference/#gem-install" rel="noreferrer">gem reference</a>, which you may find handy as well:</p>
<blockquote>
<p>
gem install will install the named gem. It will attempt a local installation (i.e. a .gem file in the current directory), and if that fails, it will attempt to download and install the most recent version of the gem you want.
</p>
</blockquote>
</section>
<section id="answer-2-score-323" class="level4">
<h4>Answer 2 (score 323)</h4>
<p>Also, you can use <code>gem install --local path_to_gem/filename.gem</code></p>
<p>This will skip the usual gem repository scan that happens when you leave off <code>--local</code>.</p>
<p>You can find other magic with <code>gem install --help</code>.</p>
</section>
<section id="answer-3-score-60" class="level4">
<h4>Answer 3 (score 60)</h4>
<p>you can also <strong>use the full filename to your gem file:</strong></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb199-1"><a href="#cb199-1"></a>gem install <span class="ot">/full/</span>path/to/your.gem</span></code></pre></div>
<p>this works as well – it’s probably the easiest way</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-does-the-map-method-do-in-ruby-score-305419-in-2014" class="level3">
<h3>40: What does the “map” method do in Ruby? (score <a href="https://stackoverflow.com/q/12084507.html">305419</a> in 2014)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>I’m new to programming. Can someone explain what <code>.map</code> would do in:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb200-1"><a href="#cb200-1"></a>params = (<span class="dv">0</span>...param_count).map</span></code></pre></div>
</section>
<section id="answer-accepted-score-420" class="level4">
<h4>Answer accepted (score 420)</h4>
<p>The <code>map</code> method takes an enumerable object and a block, and runs the block for each element, outputting each returned value from the block (the original object is unchanged unless you use <code>map!)</code>:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb201-1"><a href="#cb201-1"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>].map { |n| n * n } <span class="co">#=&gt; [1, 4, 9]</span></span></code></pre></div>
<p><code>Array</code> and <code>Range</code> are enumerable types. <code>map</code> with a block returns an Array. <code>map!</code> mutates the original array.</p>
<p>Where is this helpful, and what is the difference between <code>map!</code> and <code>each</code>? Here is an example:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb202-1"><a href="#cb202-1"></a>names = [<span class="st">&#39;danil&#39;</span>, <span class="st">&#39;edmund&#39;</span>]</span>
<span id="cb202-2"><a href="#cb202-2"></a></span>
<span id="cb202-3"><a href="#cb202-3"></a><span class="co"># here we map one array to another, convert each element by some rule</span></span>
<span id="cb202-4"><a href="#cb202-4"></a>names.map! {|name| name.capitalize } <span class="co"># now names contains [&#39;Danil&#39;, &#39;Edmund&#39;]</span></span>
<span id="cb202-5"><a href="#cb202-5"></a></span>
<span id="cb202-6"><a href="#cb202-6"></a>names.each { |name| puts name + <span class="st">&#39; is a programmer&#39;</span> } <span class="co"># here we just do something with each element</span></span></code></pre></div>
<p>The output:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb203-1"><a href="#cb203-1"></a><span class="dt">Danil</span> is a programmer</span>
<span id="cb203-2"><a href="#cb203-2"></a><span class="dt">Edmund</span> is a programmer</span></code></pre></div>
</section>
<section id="answer-2-score-64" class="level4">
<h4>Answer 2 (score 64)</h4>
<p><code>map</code>, along with <code>select</code> and <code>each</code> is one of Ruby’s workhorses in my code.</p>
<p>It allows you to run an operation on each of your array’s objects and return them all in the same place. An example would be to increment an array of numbers by one:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb204-1"><a href="#cb204-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].map {|x| x + <span class="dv">1</span> }</span>
<span id="cb204-2"><a href="#cb204-2"></a><span class="co">#=&gt; [2,3,4]</span></span></code></pre></div>
<p>If you can run a single method on your array’s elements you can do it in a shorthand-style like so:</p>
<ol>
<li>
<p>
To do this with the above example you’d have to do something like this
</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb205-1"><a href="#cb205-1"></a><span class="kw">class</span> <span class="dt">Numeric</span></span>
<span id="cb205-2"><a href="#cb205-2"></a>  <span class="kw">def</span> plusone</span>
<span id="cb205-3"><a href="#cb205-3"></a>    <span class="dv">self</span> + <span class="dv">1</span></span>
<span id="cb205-4"><a href="#cb205-4"></a>  <span class="kw">end</span></span>
<span id="cb205-5"><a href="#cb205-5"></a><span class="kw">end</span></span>
<span id="cb205-6"><a href="#cb205-6"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].map(&amp;<span class="st">:plusone</span>)</span>
<span id="cb205-7"><a href="#cb205-7"></a><span class="co">#=&gt; [2,3,4]</span></span>
<span id="cb205-8"><a href="#cb205-8"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb205-9"><a href="#cb205-9"></a><span class="st">&lt;li&gt;&lt;p&gt;To more simply use the ampersand shortcut technique, let&#39;s use a different example:&lt;/p&gt;</span></span>
<span id="cb205-10"><a href="#cb205-10"></a></span>
<span id="cb205-11"><a href="#cb205-11"></a><span class="st">```</span>ruby</span>
<span id="cb205-12"><a href="#cb205-12"></a>[<span class="st">&quot;vanessa&quot;</span>, <span class="st">&quot;david&quot;</span>, <span class="st">&quot;thomas&quot;</span>].map(&amp;<span class="st">:upcase</span>)</span>
<span id="cb205-13"><a href="#cb205-13"></a><span class="co">#=&gt; [&quot;VANESSA&quot;, &quot;DAVID&quot;, &quot;THOMAS&quot;]</span></span>
<span id="cb205-14"><a href="#cb205-14"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb205-15"><a href="#cb205-15"></a><span class="st">&lt;/ol&gt;</span></span>
<span id="cb205-16"><a href="#cb205-16"></a></span>
<span id="cb205-17"><a href="#cb205-17"></a><span class="st">Transforming data in Ruby often involves a cascade of `</span>map<span class="st">` operations. Study `</span>map<span class="st">` &amp;amp; `</span>select<span class="st">`, they are some of the most useful Ruby methods in the primary library. They&#39;re just as important as `</span>each<span class="st">`.  </span></span>
<span id="cb205-18"><a href="#cb205-18"></a></span>
<span id="cb205-19"><a href="#cb205-19"></a><span class="st">(`</span>map<span class="st">` is also an alias for `</span>collect<span class="st">`. Use whatever works best for you conceptually.)  </span></span>
<span id="cb205-20"><a href="#cb205-20"></a></span>
<span id="cb205-21"><a href="#cb205-21"></a><span class="st">&lt;strong&gt;More helpful information:&lt;/strong&gt;  </span></span>
<span id="cb205-22"><a href="#cb205-22"></a></span>
<span id="cb205-23"><a href="#cb205-23"></a><span class="st">If the &lt;a href=&quot;http://ruby-doc.org/core-2.2.3/Enumerable.html&quot; rel=&quot;noreferrer&quot;&gt;Enumerable&lt;/a&gt; object you&#39;re running `</span>each<span class="st">` or `</span>map<span class="st">` on contains a set of Enumerable elements (hashes, arrays), you can declare each of those elements inside your block pipes like so:  </span></span>
<span id="cb205-24"><a href="#cb205-24"></a></span>
<span id="cb205-25"><a href="#cb205-25"></a><span class="st">```</span>ruby</span>
<span id="cb205-26"><a href="#cb205-26"></a>[[<span class="st">&quot;audi&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="dv">2008</span>], [<span class="st">&quot;bmw&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="dv">2014</span>]].each <span class="kw">do</span> |make, color, year|</span>
<span id="cb205-27"><a href="#cb205-27"></a>  puts <span class="st">&quot;make: </span><span class="ot">#{</span>make<span class="ot">}</span><span class="st">, color: </span><span class="ot">#{</span>color<span class="ot">}</span><span class="st">, year: </span><span class="ot">#{</span>year<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb205-28"><a href="#cb205-28"></a><span class="kw">end</span></span>
<span id="cb205-29"><a href="#cb205-29"></a><span class="co"># Output:</span></span>
<span id="cb205-30"><a href="#cb205-30"></a><span class="co"># make: audi, color: black, year: 2008</span></span>
<span id="cb205-31"><a href="#cb205-31"></a><span class="co"># make: bmw, color: red, year: 2014</span></span></code></pre></div>
<p>In the case of a Hash (also an <code>Enumerable</code> object, a Hash is simply an array of tuples with special instructions for the interpreter). The first “pipe parameter” is the key, the second is the value.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb206-1"><a href="#cb206-1"></a>{<span class="st">:make</span> =&gt; <span class="st">&quot;audi&quot;</span>, <span class="st">:color</span> =&gt; <span class="st">&quot;black&quot;</span>, <span class="st">:year</span> =&gt; <span class="dv">2008</span>}.each <span class="kw">do</span> |k,v|</span>
<span id="cb206-2"><a href="#cb206-2"></a>    puts <span class="st">&quot;</span><span class="ot">#{</span>k<span class="ot">}</span><span class="st"> is </span><span class="ot">#{</span>v<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb206-3"><a href="#cb206-3"></a><span class="kw">end</span></span>
<span id="cb206-4"><a href="#cb206-4"></a><span class="co">#make is audi</span></span>
<span id="cb206-5"><a href="#cb206-5"></a><span class="co">#color is black</span></span>
<span id="cb206-6"><a href="#cb206-6"></a><span class="co">#year is 2008</span></span></code></pre></div>
<p><strong>To answer the actual question:</strong></p>
<p>Assuming that <code>params</code> is a hash, this would be the best way to map through it: Use two block parameters instead of one to capture the key &amp; value pair for each interpreted tuple in the hash.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb207-1"><a href="#cb207-1"></a>params = {<span class="st">&quot;one&quot;</span> =&gt; <span class="dv">1</span>, <span class="st">&quot;two&quot;</span> =&gt; <span class="dv">2</span>, <span class="st">&quot;three&quot;</span> =&gt; <span class="dv">3</span>}</span>
<span id="cb207-2"><a href="#cb207-2"></a>params.each <span class="kw">do</span> |k,v|</span>
<span id="cb207-3"><a href="#cb207-3"></a>  puts <span class="st">&quot;</span><span class="ot">#{</span>k<span class="ot">}</span><span class="st">=</span><span class="ot">#{</span>v<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb207-4"><a href="#cb207-4"></a><span class="kw">end</span></span>
<span id="cb207-5"><a href="#cb207-5"></a><span class="co"># one=1</span></span>
<span id="cb207-6"><a href="#cb207-6"></a><span class="co"># two=2</span></span>
<span id="cb207-7"><a href="#cb207-7"></a><span class="co"># three=3</span></span></code></pre></div>
</section>
<section id="answer-3-score-6" class="level4">
<h4>Answer 3 (score 6)</h4>
<p>Using ruby 2.4 you can do the same thing using <code>transform_values</code>, this feature extracted from rails to ruby.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb208-1"><a href="#cb208-1"></a>h = {<span class="st">a: </span><span class="dv">1</span>, <span class="st">b: </span><span class="dv">2</span>, <span class="st">c: </span><span class="dv">3</span>}</span>
<span id="cb208-2"><a href="#cb208-2"></a></span>
<span id="cb208-3"><a href="#cb208-3"></a>h.transform_values { |v| v * <span class="dv">10</span> }</span>
<span id="cb208-4"><a href="#cb208-4"></a> <span class="co">#=&gt; {a: 10, b: 20, c: 30}</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-split-a-delimited-string-in-ruby-and-convert-it-to-an-array-score-301478-in-2017" class="level3">
<h3>41: How to split a delimited string in Ruby and convert it to an array? (score <a href="https://stackoverflow.com/q/975769.html">301478</a> in 2017)</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>I have a string</p>
<p><code>"1,2,3,4"</code></p>
<p>and I’d like to convert it into an array:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb209-1"><a href="#cb209-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</span></code></pre></div>
<p>How?</p>
</section>
<section id="answer-accepted-score-401" class="level4">
<h4>Answer accepted (score 401)</h4>
<div class="sourceCode" id="cb210"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb210-1"><a href="#cb210-1"></a>&gt;&gt; <span class="st">&quot;1,2,3,4&quot;</span>.split(<span class="st">&quot;,&quot;</span>)</span>
<span id="cb210-2"><a href="#cb210-2"></a>=&gt; [<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>]</span></code></pre></div>
<p>Or for integers:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb211-1"><a href="#cb211-1"></a>&gt;&gt; <span class="st">&quot;1,2,3,4&quot;</span>.split(<span class="st">&quot;,&quot;</span>).map { |s| s.to_i }</span>
<span id="cb211-2"><a href="#cb211-2"></a>=&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span></code></pre></div>
<p>Or for later versions of ruby (&gt;= 1.9 - as pointed out by Alex):</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb212-1"><a href="#cb212-1"></a>&gt;&gt; <span class="st">&quot;1,2,3,4&quot;</span>.split(<span class="st">&quot;,&quot;</span>).map(&amp;<span class="st">:to_i</span>)</span>
<span id="cb212-2"><a href="#cb212-2"></a>=&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-31" class="level4">
<h4>Answer 2 (score 31)</h4>
<p><code>"1,2,3,4".split(",")</code> as strings</p>
<p><code>"1,2,3,4".split(",").map { |s| s.to_i }</code> as integers</p>
</section>
<section id="answer-3-score-17" class="level4">
<h4>Answer 3 (score 17)</h4>
<h5>
For <code>String Integer</code> without space as <code>String</code>
</h3>
<div class="sourceCode" id="cb213"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb213-1"><a href="#cb213-1"></a>arr = <span class="st">&quot;12345&quot;</span></span>
<span id="cb213-2"><a href="#cb213-2"></a></span>
<span id="cb213-3"><a href="#cb213-3"></a>arr.split(<span class="st">&#39;&#39;</span>)</span>
<span id="cb213-4"><a href="#cb213-4"></a></span>
<span id="cb213-5"><a href="#cb213-5"></a><span class="st">output: </span>[<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;5&quot;</span>]</span></code></pre></div>
<h5>
For <code>String Integer</code> with space as <code>String</code>
</h3>
<div class="sourceCode" id="cb214"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb214-1"><a href="#cb214-1"></a>arr = <span class="st">&quot;1 2 3 4 5&quot;</span></span>
<span id="cb214-2"><a href="#cb214-2"></a></span>
<span id="cb214-3"><a href="#cb214-3"></a>arr.split(<span class="ch">&#39; &#39;</span>)</span>
<span id="cb214-4"><a href="#cb214-4"></a></span>
<span id="cb214-5"><a href="#cb214-5"></a><span class="st">output: </span>[<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;5&quot;</span>]</span></code></pre></div>
<h5>
For <code>String Integer</code> without space as <code>Integer</code>
</h3>
<div class="sourceCode" id="cb215"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb215-1"><a href="#cb215-1"></a>arr = <span class="st">&quot;12345&quot;</span></span>
<span id="cb215-2"><a href="#cb215-2"></a></span>
<span id="cb215-3"><a href="#cb215-3"></a>arr.split(<span class="st">&#39;&#39;</span>).map(&amp;<span class="st">:to_i</span>)</span>
<span id="cb215-4"><a href="#cb215-4"></a></span>
<span id="cb215-5"><a href="#cb215-5"></a><span class="st">output: </span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</span></code></pre></div>
<h5>
For String
</h3>
<div class="sourceCode" id="cb216"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb216-1"><a href="#cb216-1"></a>arr = <span class="st">&quot;abc&quot;</span></span>
<span id="cb216-2"><a href="#cb216-2"></a></span>
<span id="cb216-3"><a href="#cb216-3"></a>arr.split(<span class="st">&#39;&#39;</span>)</span>
<span id="cb216-4"><a href="#cb216-4"></a></span>
<span id="cb216-5"><a href="#cb216-5"></a><span class="st">output: </span>[<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>]</span></code></pre></div>
<p><strong>Explanation</strong>:</p>
<ol>
<li>
<code>arr</code> -&gt; string which you’re going to perform any action.
</li>
<li>
<code>split()</code> -&gt; is an method, which split the input and store it as array.
</li>
<li>
<code>''</code> or <code>' '</code> or <code>','</code> -&gt; is an value, which is needed to be removed from given string.
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-break-out-from-a-ruby-block-score-300787-in-2016" class="level3">
<h3>42: How to break out from a ruby block? (score <a href="https://stackoverflow.com/q/1402757.html">300787</a> in 2016)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>Here is <code>Bar#do_things</code>:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb217-1"><a href="#cb217-1"></a><span class="kw">class</span> <span class="dt">Bar</span>   </span>
<span id="cb217-2"><a href="#cb217-2"></a>  <span class="kw">def</span> <span class="kw">do</span>_things</span>
<span id="cb217-3"><a href="#cb217-3"></a>    <span class="dt">Foo</span>.some_method(x) <span class="kw">do</span> |x|</span>
<span id="cb217-4"><a href="#cb217-4"></a>      y = x.do_something</span>
<span id="cb217-5"><a href="#cb217-5"></a>      <span class="kw">return</span> y_is_bad <span class="kw">if</span> y.bad? <span class="co"># how do i tell it to stop and return do_things? </span></span>
<span id="cb217-6"><a href="#cb217-6"></a>      y.do_something_else</span>
<span id="cb217-7"><a href="#cb217-7"></a>    <span class="kw">end</span></span>
<span id="cb217-8"><a href="#cb217-8"></a>    keep_doing_more_things</span>
<span id="cb217-9"><a href="#cb217-9"></a>  <span class="kw">end</span></span>
<span id="cb217-10"><a href="#cb217-10"></a><span class="kw">end</span></span></code></pre></div>
<p>And here is <code>Foo#some_method</code>:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb218-1"><a href="#cb218-1"></a><span class="kw">class</span> <span class="dt">Foo</span></span>
<span id="cb218-2"><a href="#cb218-2"></a>  <span class="kw">def</span> <span class="dv">self</span>.some_method(targets, &amp;block)</span>
<span id="cb218-3"><a href="#cb218-3"></a>    targets.each <span class="kw">do</span> |target|</span>
<span id="cb218-4"><a href="#cb218-4"></a>      <span class="kw">begin</span></span>
<span id="cb218-5"><a href="#cb218-5"></a>        r = <span class="kw">yield</span>(target)</span>
<span id="cb218-6"><a href="#cb218-6"></a>      <span class="kw">rescue</span> </span>
<span id="cb218-7"><a href="#cb218-7"></a>        failed &lt;&lt; target</span>
<span id="cb218-8"><a href="#cb218-8"></a>      <span class="kw">end</span></span>
<span id="cb218-9"><a href="#cb218-9"></a>    <span class="kw">end</span></span>
<span id="cb218-10"><a href="#cb218-10"></a>  <span class="kw">end</span></span>
<span id="cb218-11"><a href="#cb218-11"></a><span class="kw">end</span></span></code></pre></div>
<p>I thought about using raise, but I am trying to make it generic, so I don’t want to put anything any specific in <code>Foo</code>.</p>
</section>
<section id="answer-accepted-score-723" class="level4">
<h4>Answer accepted (score 723)</h4>
<p>Use the keyword <code>next</code>. If you do not want to continue to the next item, use <code>break</code>.</p>
<p>When <code>next</code> is used within a block, it causes the block to exit immediately, returning control to the iterator method, which may then begin a new iteration by invoking the block again:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb219-1"><a href="#cb219-1"></a>f.each <span class="kw">do</span> |line|              <span class="co"># Iterate over the lines in file f</span></span>
<span id="cb219-2"><a href="#cb219-2"></a>  <span class="kw">next</span> <span class="kw">if</span> line[<span class="dv">0</span>,<span class="dv">1</span>] == <span class="st">&quot;#&quot;</span>    <span class="co"># If this line is a comment, go to the next</span></span>
<span id="cb219-3"><a href="#cb219-3"></a>  puts eval(line)</span>
<span id="cb219-4"><a href="#cb219-4"></a><span class="kw">end</span></span></code></pre></div>
<p>When used in a block, <code>break</code> transfers control out of the block, out of the iterator that invoked the block, and to the first expression following the invocation of the iterator:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb220-1"><a href="#cb220-1"></a>f.each <span class="kw">do</span> |line|             <span class="co"># Iterate over the lines in file f</span></span>
<span id="cb220-2"><a href="#cb220-2"></a>  <span class="kw">break</span> <span class="kw">if</span> line == <span class="st">&quot;quit\n&quot;</span>  <span class="co"># If this break statement is executed...</span></span>
<span id="cb220-3"><a href="#cb220-3"></a>  puts eval(line)</span>
<span id="cb220-4"><a href="#cb220-4"></a><span class="kw">end</span></span>
<span id="cb220-5"><a href="#cb220-5"></a>puts <span class="st">&quot;Good bye&quot;</span>              <span class="co"># ...then control is transferred here</span></span></code></pre></div>
<p>And finally, the usage of <code>return</code> in a block:</p>
<p><code>return</code> always causes the enclosing method to return, regardless of how deeply nested within blocks it is (except in the case of lambdas):</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb221-1"><a href="#cb221-1"></a><span class="kw">def</span> find(array, target)</span>
<span id="cb221-2"><a href="#cb221-2"></a>  array.each_with_index <span class="kw">do</span> |element,index|</span>
<span id="cb221-3"><a href="#cb221-3"></a>    <span class="kw">return</span> index <span class="kw">if</span> (element == target)  <span class="co"># return from find</span></span>
<span id="cb221-4"><a href="#cb221-4"></a>  <span class="kw">end</span></span>
<span id="cb221-5"><a href="#cb221-5"></a>  <span class="dv">nil</span>  <span class="co"># If we didn&#39;t find the element, return nil</span></span>
<span id="cb221-6"><a href="#cb221-6"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-2-score-55" class="level4">
<h4>Answer 2 (score 55)</h4>
<p>I wanted to just be able to break out of a block - sort of like a forward goto, not really related to a loop. In fact, I want to break of of a block that is in a loop without terminating the loop. To do that, I made the block a one-iteration loop:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb222-1"><a href="#cb222-1"></a><span class="kw">for</span> b <span class="kw">in</span> <span class="dv">1</span>..<span class="dv">2</span> <span class="kw">do</span></span>
<span id="cb222-2"><a href="#cb222-2"></a>    puts b</span>
<span id="cb222-3"><a href="#cb222-3"></a>    <span class="kw">begin</span></span>
<span id="cb222-4"><a href="#cb222-4"></a>        puts <span class="st">&#39;want this to run&#39;</span></span>
<span id="cb222-5"><a href="#cb222-5"></a>        <span class="kw">break</span></span>
<span id="cb222-6"><a href="#cb222-6"></a>        puts <span class="st">&#39;but not this&#39;</span></span>
<span id="cb222-7"><a href="#cb222-7"></a>    <span class="kw">end</span> <span class="kw">while</span> <span class="dv">false</span></span>
<span id="cb222-8"><a href="#cb222-8"></a>    puts <span class="st">&#39;also want this to run&#39;</span></span>
<span id="cb222-9"><a href="#cb222-9"></a><span class="kw">end</span></span></code></pre></div>
<p>Hope this helps the next googler that lands here based on the subject line.</p>
</section>
<section id="answer-3-score-38" class="level4">
<h4>Answer 3 (score 38)</h4>
<p>If you want your block to return a useful value (e.g. when using <code>#map</code>, <code>#inject</code>, etc.), <code>next</code> and <code>break</code> also accept an argument.</p>
<p>Consider the following:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb223-1"><a href="#cb223-1"></a><span class="kw">def</span> contrived_example(numbers)</span>
<span id="cb223-2"><a href="#cb223-2"></a>  numbers.inject(<span class="dv">0</span>) <span class="kw">do</span> |count, x|</span>
<span id="cb223-3"><a href="#cb223-3"></a>    <span class="kw">if</span> x % <span class="dv">3</span> == <span class="dv">0</span></span>
<span id="cb223-4"><a href="#cb223-4"></a>      count + <span class="dv">2</span></span>
<span id="cb223-5"><a href="#cb223-5"></a>    <span class="kw">elsif</span> x.odd?</span>
<span id="cb223-6"><a href="#cb223-6"></a>      count + <span class="dv">1</span></span>
<span id="cb223-7"><a href="#cb223-7"></a>    <span class="kw">else</span> </span>
<span id="cb223-8"><a href="#cb223-8"></a>      count</span>
<span id="cb223-9"><a href="#cb223-9"></a>    <span class="kw">end</span></span>
<span id="cb223-10"><a href="#cb223-10"></a>  <span class="kw">end</span></span>
<span id="cb223-11"><a href="#cb223-11"></a><span class="kw">end</span></span></code></pre></div>
<p>The equivalent using <code>next</code>:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb224-1"><a href="#cb224-1"></a><span class="kw">def</span> contrived_example(numbers)</span>
<span id="cb224-2"><a href="#cb224-2"></a>  numbers.inject(<span class="dv">0</span>) <span class="kw">do</span> |count, x|</span>
<span id="cb224-3"><a href="#cb224-3"></a>    <span class="kw">next</span> count <span class="kw">if</span> x.even?</span>
<span id="cb224-4"><a href="#cb224-4"></a>    <span class="kw">next</span> (count + <span class="dv">2</span>) <span class="kw">if</span> x % <span class="dv">3</span> == <span class="dv">0</span></span>
<span id="cb224-5"><a href="#cb224-5"></a>    count + <span class="dv">1</span></span>
<span id="cb224-6"><a href="#cb224-6"></a>  <span class="kw">end</span></span>
<span id="cb224-7"><a href="#cb224-7"></a><span class="kw">end</span></span></code></pre></div>
<p>Of course, you could always extract the logic needed into a method and call that from inside your block:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb225-1"><a href="#cb225-1"></a><span class="kw">def</span> contrived_example(numbers)</span>
<span id="cb225-2"><a href="#cb225-2"></a>  numbers.inject(<span class="dv">0</span>) { |count, x| count + extracted_logic(x) }</span>
<span id="cb225-3"><a href="#cb225-3"></a><span class="kw">end</span></span>
<span id="cb225-4"><a href="#cb225-4"></a></span>
<span id="cb225-5"><a href="#cb225-5"></a><span class="kw">def</span> extracted_logic(x)</span>
<span id="cb225-6"><a href="#cb225-6"></a>  <span class="kw">return</span> <span class="dv">0</span> <span class="kw">if</span> x.even?</span>
<span id="cb225-7"><a href="#cb225-7"></a>  <span class="kw">return</span> <span class="dv">2</span> <span class="kw">if</span> x % <span class="dv">3</span> == <span class="dv">0</span></span>
<span id="cb225-8"><a href="#cb225-8"></a>  <span class="dv">1</span></span>
<span id="cb225-9"><a href="#cb225-9"></a><span class="kw">end</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="a-concise-explanation-of-nil-v.-empty-v.-blank-in-ruby-on-rails-score-298526-in-2013" class="level3">
<h3>43: A concise explanation of nil v. empty v. blank in Ruby on Rails (score <a href="https://stackoverflow.com/q/885414.html">298526</a> in 2013)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>I find myself repeatedly looking for a clear definition of the differences of <code>nil?</code>, <code>blank?</code>, and <code>empty?</code> in Ruby on Rails. Here’s the closest I’ve come:</p>
<ul>
<li>
<p>
<code>blank?</code> objects are false, empty, or a whitespace string. For example, <code>""</code>, <code>" "</code>, <code>nil</code>, <code>[]</code>, and <code>{}</code> are blank.
</p>
</li>
<li>
<p>
<code>nil?</code> objects are instances of NilClass.
</p>
</li>
<li>
<p>
<code>empty?</code> objects are class-specific, and the definition varies from class to class. A string is empty if it has no characters, and an array is empty if it contains no items.
</p>
</li>
</ul>
<p>Is there anything missing, or a tighter comparison that can be made?</p>
</section>
<section id="answer-accepted-score-1394" class="level4">
<h4>Answer accepted (score 1394)</h4>
<p><code>.nil?</code> can be used on any object and is true if the object is nil.</p>
<p><code>.empty?</code> can be used on strings, arrays and hashes and returns true if:</p>
<ul>
<li>
String length == 0
</li>
<li>
Array length == 0
</li>
<li>
Hash length == 0
</li>
</ul>
<p>Running <code>.empty?</code> on something that is nil will throw a <code>NoMethodError</code>.</p>
<p>That is where <code>.blank?</code> comes in. It is <a href="http://apidock.com/rails/Object/blank%3F" rel="noreferrer">implemented by Rails</a> and will operate on any object as well as work like <code>.empty?</code> on strings, arrays and hashes.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb226-1"><a href="#cb226-1"></a><span class="dv">nil</span>.blank? == <span class="dv">true</span></span>
<span id="cb226-2"><a href="#cb226-2"></a><span class="dv">false</span>.blank? == <span class="dv">true</span></span>
<span id="cb226-3"><a href="#cb226-3"></a>[].blank? == <span class="dv">true</span></span>
<span id="cb226-4"><a href="#cb226-4"></a>{}.blank? == <span class="dv">true</span></span>
<span id="cb226-5"><a href="#cb226-5"></a><span class="st">&quot;&quot;</span>.blank? == <span class="dv">true</span></span>
<span id="cb226-6"><a href="#cb226-6"></a><span class="dv">5</span>.blank? == <span class="dv">false</span></span>
<span id="cb226-7"><a href="#cb226-7"></a><span class="dv">0</span>.blank? == <span class="dv">false</span></span></code></pre></div>
<p><code>.blank?</code> also evaluates true on strings which are non-empty but contain only whitespace:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb227-1"><a href="#cb227-1"></a><span class="st">&quot;  &quot;</span>.blank? == <span class="dv">true</span></span>
<span id="cb227-2"><a href="#cb227-2"></a><span class="st">&quot;  &quot;</span>.empty? == <span class="dv">false</span></span></code></pre></div>
<p><a href="http://apidock.com/rails/Object/presence" rel="noreferrer">Rails also provides</a> <code>.present?</code>, which returns the negation of <code>.blank?</code>.</p>
<p>Array gotcha: <code>blank?</code> will return <code>false</code> even if all <em>elements</em> of an array are blank. To determine blankness in this case, use <code>all?</code> with <code>blank?</code>, for example:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb228-1"><a href="#cb228-1"></a>[ <span class="dv">nil</span>, <span class="st">&#39;&#39;</span> ].blank? == <span class="dv">false</span></span>
<span id="cb228-2"><a href="#cb228-2"></a>[ <span class="dv">nil</span>, <span class="st">&#39;&#39;</span> ].all? &amp;<span class="st">:blank?</span> == <span class="dv">true</span> </span></code></pre></div>
</section>
<section id="answer-2-score-657" class="level4">
<h4>Answer 2 (score 657)</h4>
<p>I made this useful table with all the cases:</p>
<p><img src="https://i.stack.imgur.com/oXuhJ.png" alt="enter image description here"></p>
<p><code>blank?</code>, <code>present?</code> are provided by Rails.</p>
</section>
<section id="answer-3-score-209" class="level4">
<h4>Answer 3 (score 209)</h4>
<p>Just extend Julian’s table:</p>
<p><a href="https://i.stack.imgur.com/qbe46.png"><img src="https://i.stack.imgur.com/qbe46.png" alt="enter image description here"></a></p>
<p>Ref: <a href="http://sibevin.github.io/posts/2014-11-11-103928-rails-empty-vs-blank-vs-nil">empty?blank?nil?傻傻分不清楚</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-use-rubys-attr_accessor-attr_reader-and-attr_writer-score-296881-in-2013" class="level3">
<h3>44: Why use Ruby’s attr_accessor, attr_reader and attr_writer? (score <a href="https://stackoverflow.com/q/5046831.html">296881</a> in 2013)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>Ruby has this handy and convenient way to share instance variables by using keys like</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb229-1"><a href="#cb229-1"></a><span class="ot">attr_accessor</span> <span class="st">:var</span></span>
<span id="cb229-2"><a href="#cb229-2"></a><span class="ot">attr_reader</span> <span class="st">:var</span></span>
<span id="cb229-3"><a href="#cb229-3"></a><span class="ot">attr_writer</span> <span class="st">:var</span></span></code></pre></div>
<p>Why would I choose <code>attr_reader</code> or <code>attr_writer</code> if I could simply use <code>attr_accessor</code>? Is there something like performance (which I doubt)? I guess there is a reason, otherwise they wouldn’t have made such keys.</p>
</section>
<section id="answer-accepted-score-734" class="level4">
<h4>Answer accepted (score 734)</h4>
<p>You may use the different accessors to communicate your intent to someone reading your code, and make it easier to write classes which will work correctly no matter how their public API is called.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb230-1"><a href="#cb230-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb230-2"><a href="#cb230-2"></a>  <span class="ot">attr_accessor</span> <span class="st">:age</span></span>
<span id="cb230-3"><a href="#cb230-3"></a>  ...</span>
<span id="cb230-4"><a href="#cb230-4"></a><span class="kw">end</span></span></code></pre></div>
<p>Here, I can see that I may both read and write the age.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb231-1"><a href="#cb231-1"></a><span class="kw">class</span> <span class="dt">Person</span></span>
<span id="cb231-2"><a href="#cb231-2"></a>  <span class="ot">attr_reader</span> <span class="st">:age</span></span>
<span id="cb231-3"><a href="#cb231-3"></a>  ...</span>
<span id="cb231-4"><a href="#cb231-4"></a><span class="kw">end</span></span></code></pre></div>
<p>Here, I can see that I may only read the age. Imagine that it is set by the constructor of this class and after that remains constant. If there were a mutator (writer) for age and the class were written assuming that age, once set, does not change, then a bug could result from code calling that mutator.</p>
<p>But what is happening behind the scenes?</p>
<p>If you write:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb232-1"><a href="#cb232-1"></a><span class="ot">attr_writer</span> <span class="st">:age</span></span></code></pre></div>
<p>That gets translated into:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb233-1"><a href="#cb233-1"></a><span class="kw">def</span> age=(value)</span>
<span id="cb233-2"><a href="#cb233-2"></a>  <span class="ot">@age</span> = value</span>
<span id="cb233-3"><a href="#cb233-3"></a><span class="kw">end</span></span></code></pre></div>
<p>If you write:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb234-1"><a href="#cb234-1"></a><span class="ot">attr_reader</span> <span class="st">:age</span></span></code></pre></div>
<p>That gets translated into:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb235-1"><a href="#cb235-1"></a><span class="kw">def</span> age</span>
<span id="cb235-2"><a href="#cb235-2"></a>  <span class="ot">@age</span></span>
<span id="cb235-3"><a href="#cb235-3"></a><span class="kw">end</span></span></code></pre></div>
<p>If you write:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb236-1"><a href="#cb236-1"></a><span class="ot">attr_accessor</span> <span class="st">:age</span></span></code></pre></div>
<p>That gets translated into:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb237-1"><a href="#cb237-1"></a><span class="kw">def</span> age=(value)</span>
<span id="cb237-2"><a href="#cb237-2"></a>  <span class="ot">@age</span> = value</span>
<span id="cb237-3"><a href="#cb237-3"></a><span class="kw">end</span></span>
<span id="cb237-4"><a href="#cb237-4"></a></span>
<span id="cb237-5"><a href="#cb237-5"></a><span class="kw">def</span> age</span>
<span id="cb237-6"><a href="#cb237-6"></a>  <span class="ot">@age</span></span>
<span id="cb237-7"><a href="#cb237-7"></a><span class="kw">end</span></span></code></pre></div>
<p>Knowing that, here’s another way to think about it: If you did not have the attr_… helpers, and had to write the accessors yourself, would you write any more accessors than your class needed? For example, if age only needed to be read, would you also write a method allowing it to be written?</p>
</section>
<section id="answer-2-score-23" class="level4">
<h4>Answer 2 (score 23)</h4>
<p>All of the answers above are correct; <code>attr_reader</code> and <code>attr_writer</code> are more convenient to write than manually typing the methods they are shorthands for. Apart from that they offer much better performance than writing the method definition yourself. For more info see slide 152 onwards from <a href="http://www.slideshare.net/tenderlove/zomg-why-is-this-code-so-slow/152">this talk</a> (<a href="http://tenderlovemaking.com/RubyConf2010.pdf">PDF</a>) by Aaron Patterson.</p>
</section>
<section id="answer-3-score-15" class="level4">
<h4>Answer 3 (score 15)</h4>
<p>Not all attributes of an object are meant to be directly set from outside the class. Having writers for all your instance variables is generally a sign of weak encapsulation and a warning that you’re introducing too much coupling between your classes.</p>
<p>As a practical example: I wrote a design program where you put items inside containers. The item had <code>attr_reader :container</code>, but it didn’t make sense to offer a writer, since the only time the item’s container should change is when it’s placed in a new one, which also requires positioning information.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="tell-ruby-program-to-wait-some-amount-of-time-score-296044-in-2016" class="level3">
<h3>45: Tell Ruby Program to Wait some amount of time (score <a href="https://stackoverflow.com/q/1329967.html">296044</a> in 2016)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>How do you tell a Ruby program to wait an arbitrary amount of time before moving on to the next line of code?</p>
</section>
<section id="answer-accepted-score-627" class="level4">
<h4>Answer accepted (score 627)</h4>
<p>Like this:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb238-1"><a href="#cb238-1"></a>sleep(num_secs)</span></code></pre></div>
<p>The <code>num_secs</code> value can be an integer or float.</p>
<p>Also, if you’re writing this within a Rails app, or have included the ActiveSupport library in your project, you can construct longer intervals using the following convenience syntax:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb239-1"><a href="#cb239-1"></a>sleep(<span class="dv">4</span>.minutes)</span>
<span id="cb239-2"><a href="#cb239-2"></a><span class="co"># or, even longer...</span></span>
<span id="cb239-3"><a href="#cb239-3"></a>sleep(<span class="dv">2</span>.hours); sleep(<span class="dv">3</span>.days) <span class="co"># etc., etc.</span></span>
<span id="cb239-4"><a href="#cb239-4"></a><span class="co"># or shorter</span></span>
<span id="cb239-5"><a href="#cb239-5"></a>sleep(<span class="fl">0.5</span>) <span class="co"># half a second</span></span></code></pre></div>
</section>
<section id="answer-2-score-112" class="level4">
<h4>Answer 2 (score 112)</h4>
<p>Use <a href="http://apidock.com/ruby/Kernel/sleep" rel="noreferrer">sleep</a> like so:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb240-1"><a href="#cb240-1"></a>sleep <span class="dv">2</span></span></code></pre></div>
<p>That’ll sleep for 2 seconds.</p>
<p>Be careful to give an argument. If you just run <code>sleep</code>, the process will sleep forever. (This is useful when you want a thread to sleep until it’s woken.)</p>
</section>
<section id="answer-3-score-2-1" class="level4">
<h4>Answer 3 (score 2)</h4>
<p>I find <code>until</code> very useful with sleep. example:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb241-1"><a href="#cb241-1"></a>&gt; time = <span class="dt">Time</span>.now</span>
<span id="cb241-2"><a href="#cb241-2"></a>&gt; sleep <span class="dv">2</span>.seconds <span class="kw">until</span> <span class="dt">Time</span>.now &gt; time + <span class="dv">10</span>.seconds <span class="co"># breaks when true</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-read-lines-of-a-file-in-ruby-score-287879-in-2016" class="level3">
<h3>46: How to read lines of a file in Ruby (score <a href="https://stackoverflow.com/q/6012930.html">287879</a> in 2016)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>I was trying to use the following code to read lines from a file. But when reading a <a href="http://dl.dropbox.com/u/559353/rss20.xml.txt">file</a>, the contents are all in one line:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb242-1"><a href="#cb242-1"></a>line_num=<span class="dv">0</span></span>
<span id="cb242-2"><a href="#cb242-2"></a><span class="dt">File</span>.open(<span class="st">&#39;xxx.txt&#39;</span>).each <span class="kw">do</span> |line|</span>
<span id="cb242-3"><a href="#cb242-3"></a>  print <span class="st">&quot;</span><span class="ot">#{</span>line_num += <span class="dv">1</span><span class="ot">}</span><span class="st"> </span><span class="ot">#{</span>line<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb242-4"><a href="#cb242-4"></a><span class="kw">end</span></span></code></pre></div>
<p>But this <a href="http://dl.dropbox.com/u/559353/new.txt">file</a> prints each line separately.</p>
<hr>
<p>I have to use stdin, like <code>ruby my_prog.rb &amp;lt; file.txt</code>, where I can’t assume what the line-ending character is that the file uses. How can I handle it?</p>
</section>
<section id="answer-accepted-score-144" class="level4">
<h4>Answer accepted (score 144)</h4>
<p>I believe my answer covers your new concerns about handling any type of line endings since both <code>"\r\n"</code> and <code>"\r"</code> are converted to Linux standard <code>"\n"</code> before parsing the lines.</p>
<p>To support the <code>"\r"</code> EOL character along with the regular <code>"\n"</code>, and <code>"\r\n"</code> from Windows, here’s what I would do:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb243-1"><a href="#cb243-1"></a>line_num=<span class="dv">0</span></span>
<span id="cb243-2"><a href="#cb243-2"></a>text=<span class="dt">File</span>.open(<span class="st">&#39;xxx.txt&#39;</span>).read</span>
<span id="cb243-3"><a href="#cb243-3"></a>text.gsub!(<span class="ot">/\r\n?/</span>, <span class="st">&quot;\n&quot;</span>)</span>
<span id="cb243-4"><a href="#cb243-4"></a>text.each_line <span class="kw">do</span> |line|</span>
<span id="cb243-5"><a href="#cb243-5"></a>  print <span class="st">&quot;</span><span class="ot">#{</span>line_num += <span class="dv">1</span><span class="ot">}</span><span class="st"> </span><span class="ot">#{</span>line<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb243-6"><a href="#cb243-6"></a><span class="kw">end</span></span></code></pre></div>
<p>Of course this could be a bad idea on very large files since it means loading the whole file into memory.</p>
</section>
<section id="answer-2-score-503" class="level4">
<h4>Answer 2 (score 503)</h4>
<p>Ruby does have a method for this:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb244-1"><a href="#cb244-1"></a><span class="dt">File</span>.readlines(<span class="st">&#39;foo&#39;</span>).each <span class="kw">do</span> |line|</span></code></pre></div>
<p><a href="http://ruby-doc.org/core-1.9.3/IO.html#method-c-readlines" rel="noreferrer">http://ruby-doc.org/core-1.9.3/IO.html#method-c-readlines</a></p>
</section>
<section id="answer-3-score-372" class="level4">
<h4>Answer 3 (score 372)</h4>
<div class="sourceCode" id="cb245"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb245-1"><a href="#cb245-1"></a><span class="dt">File</span>.foreach(filename).with_index <span class="kw">do</span> |line, line_num|</span>
<span id="cb245-2"><a href="#cb245-2"></a>   puts <span class="st">&quot;</span><span class="ot">#{</span>line_num<span class="ot">}</span><span class="st">: </span><span class="ot">#{</span>line<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb245-3"><a href="#cb245-3"></a><span class="kw">end</span></span></code></pre></div>
<p>This will execute the given block for each line in the file without slurping the entire file into memory. See: <a href="https://ruby-doc.org/core-2.3.1/IO.html#method-c-foreach">IO::foreach</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="rails-4-list-of-available-datatypes-score-277783-in-2016" class="level3">
<h3>47: Rails 4: List of available datatypes (score <a href="https://stackoverflow.com/q/17918117.html">277783</a> in 2016)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>
Where can I find a list of data types that can be used in Ruby on Rails 4? Such as
</p>
<ul>
<li>
<code>text</code>
</li>
<li>
<code>string</code>
</li>
<li>
<code>integer</code>
</li>
<li>
<code>float</code>
</li>
<li>
<code>date</code>
</li>
</ul>
<p>I keep learning about new ones and I’d love to have a list I could easily refer to.</p>
</section>
<section id="answer-accepted-score-641" class="level4">
<h4>Answer accepted (score 641)</h4>
<p>Here are all the Rails 4 (ActiveRecord migration) datatypes:</p>
<ul>
<li>
<code>:binary</code>
</li>
<li>
<code>:boolean</code>
</li>
<li>
<code>:date</code>
</li>
<li>
<code>:datetime</code>
</li>
<li>
<code>:decimal</code>
</li>
<li>
<code>:float</code>
</li>
<li>
<code>:integer</code>
</li>
<li>
<code>:bigint</code>
</li>
<li>
<code>:primary_key</code>
</li>
<li>
<code>:references</code>
</li>
<li>
<code>:string</code>
</li>
<li>
<code>:text</code>
</li>
<li>
<code>:time</code>
</li>
<li>
<code>:timestamp</code>
</li>
</ul>
<p>
Source: <a href="http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_column" rel="noreferrer">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_column</a><br> These are the same as with <a href="https://stackoverflow.com/questions/4685009/rails-3-datatypes">Rails 3</a>.
</p>
<p>If you use PostgreSQL, you can also take advantage of these:</p>
<ul>
<li>
<code>:hstore</code>
</li>
<li>
<code>:json</code>
</li>
<li>
<code>:jsonb</code>
</li>
<li>
<code>:array</code>
</li>
<li>
<code>:cidr_address</code>
</li>
<li>
<code>:ip_address</code>
</li>
<li>
<code>:mac_address</code>
</li>
</ul>
<p>They are stored as strings if you run your app with a not-PostgreSQL database.</p>
<p><strong>Edit, 2016-Sep-19:</strong></p>
<p>There’s <a href="https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L76" rel="noreferrer">a lot more</a> postgres specific datatypes in Rails 4 and <a href="https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L69" rel="noreferrer">even more</a> in Rails 5.</p>
</section>
<section id="answer-2-score-240-1" class="level4">
<h4>Answer 2 (score 240)</h4>
<p>You might also find it useful to know generally what these data types are used for:</p>
<ul>
<li>
<code>:string</code> - is for small data types such as a title. (<a href="https://stackoverflow.com/questions/3354330/difference-between-string-and-text-in-rails">Should you choose string or text?</a>)
</li>
<li>
<code>:text</code> - is for longer pieces of textual data, such as a paragraph of information
</li>
<li>
<code>:binary</code> - is for storing data such as images, audio, or movies.
</li>
<li>
<code>:boolean</code> - is for storing true or false values.
</li>
<li>
<code>:date</code> - store only the date
</li>
<li>
<code>:datetime</code> - store the date and time into a column.
</li>
<li>
<code>:time</code> - is for time only
</li>
<li>
<code>:timestamp</code> - for storing date and time into a column.(<a href="https://stackoverflow.com/questions/409286/datetime-vs-timestamp">What’s the difference between datetime and timestamp?</a>)
</li>
<li>
<code>:decimal</code> - is for decimals (<a href="https://stackoverflow.com/questions/813287/how-to-store-decimal-values-in-sql-server">example of how to use decimals</a>).
</li>
<li>
<code>:float</code> - is for decimals. (<a href="https://stackoverflow.com/questions/8514167/float-vs-decimal-in-activerecord">What’s the difference between decimal and float?</a>)
</li>
<li>
<code>:integer</code> - is for whole numbers.
</li>
<li>
<code>:primary_key</code> - unique key that can uniquely identify each row in a table
</li>
</ul>
<p>There’s also references used to create associations. But, <a href="https://stackoverflow.com/questions/6242100/what-is-and-examples-of-using-data-type-references">I’m not sure this is an actual data type</a>.</p>
<p>New Rails 4 datatypes available in PostgreSQL:</p>
<ul>
<li>
<code>:hstore</code> - storing key/value pairs within a single value (<a href="http://www.postgresql.org/docs/9.1/static/hstore.html" rel="noreferrer">learn more about this new data type</a>)
</li>
<li>
<code>:array</code> - an arrangement of numbers or strings in a particular row (<a href="http://reefpoints.dockyard.com/ruby/2012/09/18/rails-4-sneak-peek-postgresql-array-support.html" rel="noreferrer">learn more about it and see examples</a>)
</li>
<li>
<code>:cidr_address</code> - used for IPv4 or IPv6 host addresses
</li>
<li>
<code>:inet_address</code> - used for IPv4 or IPv6 host addresses, same as cidr_address but it also accepts values with nonzero bits to the right of the netmask
</li>
<li>
<code>:mac_address</code> - used for MAC host addresses
</li>
</ul>
<p>Learn more about the address datatypes <a href="http://reefpoints.dockyard.com/ruby/2012/05/18/rails-4-sneak-peek-expanded-activerecord-support-for-postgresql-datatype.html" rel="noreferrer">here</a> and <a href="http://blog.remarkablelabs.com/2012/12/a-love-affair-with-postgresql-rails-4-countdown-to-2013" rel="noreferrer">here</a>.</p>
<p>Also, here’s the official guide on migrations: <a href="http://edgeguides.rubyonrails.org/migrations.html" rel="noreferrer">http://edgeguides.rubyonrails.org/migrations.html</a></p>
</section>
<section id="answer-3-score-155" class="level4">
<h4>Answer 3 (score 155)</h4>
<p>It is important to know not only the types but the mapping of these types to the database types, too:</p>
<p><img src="https://i.stack.imgur.com/Q0j0x.png" alt="enter image description here"></p>
<p><img src="https://i.stack.imgur.com/tuRiZ.png" alt="enter image description here"></p>
<hr>
<p>Source added - <a href="https://pragprog.com/book/rails4/agile-web-development-with-rails-4">Agile Web Development with Rails 4</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-uninstall-rvm-score-277193-in-2018" class="level3">
<h3>48: How to Uninstall RVM? (score <a href="https://stackoverflow.com/q/3950260.html">277193</a> in 2018)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<blockquote>
<p>
<strong>Possible Duplicate:</strong><br> <a href="https://stackoverflow.com/questions/3558656/how-to-remove-rvm-ruby-version-manager-from-my-system">How to remove rvm (ruby version manager) from my system?</a>
</p>
</blockquote>
<p>How can I uninstall (or reinstall) RVM on Ubuntu 9.10? I messed up my current installation.</p>
</section>
<section id="answer-accepted-score-835" class="level4">
<h4>Answer accepted (score 835)</h4>
<p>It’s easy; just do the following:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb246-1"><a href="#cb246-1"></a>rvm implode</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb247-1"><a href="#cb247-1"></a>rm -rf ~<span class="ot">/.rvm</span></span></code></pre></div>
<p>And don’t forget to remove the script calls in the following files:</p>
<ul>
<li>
<code>~/.bashrc</code>
</li>
<li>
<code>~/.bash_profile</code>
</li>
<li>
<code>~/.profile</code>
</li>
</ul>
<p>And maybe others depending on whatever shell you’re using.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-is-it-bad-style-to-rescue-exception-e-in-ruby-score-276074-in-2017" class="level3">
<h3>49: Why is it bad style to <code>rescue Exception =&gt; e</code> in Ruby? (score <a href="https://stackoverflow.com/q/10048173.html">276074</a> in 2017)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>Ryan Davis’s <a href="http://www.zenspider.com/ruby/quickref.html#general-tips" rel="noreferrer">Ruby QuickRef</a> says (without explanation):</p>
<blockquote>
Don’t rescue Exception. EVER. or I will stab you.
</blockquote>
<p>Why not? What’s the right thing to do?</p>
</section>
<section id="answer-accepted-score-1342" class="level4">
<h4>Answer accepted (score 1342)</h4>
<p><strong>TL;DR</strong>: Use <code>StandardError</code> instead for general exception catching. When the original exception is re-raised (e.g. when rescuing to log the exception only), rescuing <code>Exception</code> is probably okay.</p>
<hr>
<p><code>Exception</code> is the root of <a href="http://rubylearning.com/images/exception.jpg" rel="noreferrer">Ruby’s exception hierarchy</a>, so when you <code>rescue Exception</code> you rescue from <em>everything</em>, including subclasses such as <code>SyntaxError</code>, <code>LoadError</code>, and <code>Interrupt</code>.</p>
<p>Rescuing <code>Interrupt</code> prevents the user from using <kbd>CTRL</kbd><kbd>C</kbd> to exit the program.</p>
<p>Rescuing <code>SignalException</code> prevents the program from responding correctly to signals. It will be unkillable except by <code>kill -9</code>.</p>
<p>Rescuing <code>SyntaxError</code> means that <code>eval</code>s that fail will do so silently.</p>
<p>All of these can be shown by running this program, and trying to <kbd>CTRL</kbd><kbd>C</kbd> or <code>kill</code> it:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb248-1"><a href="#cb248-1"></a>loop <span class="kw">do</span></span>
<span id="cb248-2"><a href="#cb248-2"></a>  <span class="kw">begin</span></span>
<span id="cb248-3"><a href="#cb248-3"></a>    sleep <span class="dv">1</span></span>
<span id="cb248-4"><a href="#cb248-4"></a>    eval <span class="st">&quot;djsakru3924r9eiuorwju3498 += 5u84fior8u8t4ruyf8ihiure&quot;</span></span>
<span id="cb248-5"><a href="#cb248-5"></a>  <span class="kw">rescue</span> <span class="dt">Exception</span></span>
<span id="cb248-6"><a href="#cb248-6"></a>    puts <span class="st">&quot;I refuse to fail or be stopped!&quot;</span></span>
<span id="cb248-7"><a href="#cb248-7"></a>  <span class="kw">end</span></span>
<span id="cb248-8"><a href="#cb248-8"></a><span class="kw">end</span></span></code></pre></div>
<p>Rescuing from <code>Exception</code> isn’t even the default. Doing</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb249-1"><a href="#cb249-1"></a><span class="kw">begin</span></span>
<span id="cb249-2"><a href="#cb249-2"></a>  <span class="co"># iceberg!</span></span>
<span id="cb249-3"><a href="#cb249-3"></a><span class="kw">rescue</span></span>
<span id="cb249-4"><a href="#cb249-4"></a>  <span class="co"># lifeboats</span></span>
<span id="cb249-5"><a href="#cb249-5"></a><span class="kw">end</span></span></code></pre></div>
<p>does not rescue from <code>Exception</code>, it rescues from <code>StandardError</code>. You should generally specify something more specific than the default <code>StandardError</code>, but rescuing from <code>Exception</code> <em>broadens</em> the scope rather than narrowing it, and can have catastrophic results and make bug-hunting extremely difficult.</p>
<hr>
<p>If you have a situation where you do want to rescue from <code>StandardError</code> and you need a variable with the exception, you can use this form:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb250-1"><a href="#cb250-1"></a><span class="kw">begin</span></span>
<span id="cb250-2"><a href="#cb250-2"></a>  <span class="co"># iceberg!</span></span>
<span id="cb250-3"><a href="#cb250-3"></a><span class="kw">rescue</span> =&gt; e</span>
<span id="cb250-4"><a href="#cb250-4"></a>  <span class="co"># lifeboats</span></span>
<span id="cb250-5"><a href="#cb250-5"></a><span class="kw">end</span></span></code></pre></div>
<p>which is equivalent to:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb251-1"><a href="#cb251-1"></a><span class="kw">begin</span></span>
<span id="cb251-2"><a href="#cb251-2"></a>  <span class="co"># iceberg!</span></span>
<span id="cb251-3"><a href="#cb251-3"></a><span class="kw">rescue</span> <span class="dt">StandardError</span> =&gt; e</span>
<span id="cb251-4"><a href="#cb251-4"></a>  <span class="co"># lifeboats</span></span>
<span id="cb251-5"><a href="#cb251-5"></a><span class="kw">end</span></span></code></pre></div>
<hr>
<p>One of the few common cases where it’s sane to rescue from <code>Exception</code> is for logging/reporting purposes, in which case you should immediately re-raise the exception:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb252-1"><a href="#cb252-1"></a><span class="kw">begin</span></span>
<span id="cb252-2"><a href="#cb252-2"></a>  <span class="co"># iceberg?</span></span>
<span id="cb252-3"><a href="#cb252-3"></a><span class="kw">rescue</span> <span class="dt">Exception</span> =&gt; e</span>
<span id="cb252-4"><a href="#cb252-4"></a>  <span class="co"># do some logging</span></span>
<span id="cb252-5"><a href="#cb252-5"></a>  raise e  <span class="co"># not enough lifeboats ;)</span></span>
<span id="cb252-6"><a href="#cb252-6"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-2-score-81-1" class="level4">
<h4>Answer 2 (score 81)</h4>
<p>The <em>real</em> rule is: Don’t throw away exceptions. The objectivity of the author of your quote is questionable, as evidenced by the fact that it ends with</p>
<blockquote>
or I will stab you
</blockquote>
<p>Of course, be aware that signals (by default) throw exceptions, and normally long-running processes are terminated through a signal, so catching Exception and not terminating on signal exceptions will make your program very hard to stop. So don’t do this:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb253-1"><a href="#cb253-1"></a><span class="co">#! /usr/bin/ruby</span></span>
<span id="cb253-2"><a href="#cb253-2"></a></span>
<span id="cb253-3"><a href="#cb253-3"></a>while <span class="dv">true</span> <span class="kw">do</span></span>
<span id="cb253-4"><a href="#cb253-4"></a>  <span class="kw">begin</span></span>
<span id="cb253-5"><a href="#cb253-5"></a>    line = <span class="dt">STDIN</span>.gets</span>
<span id="cb253-6"><a href="#cb253-6"></a>    <span class="co"># heavy processing</span></span>
<span id="cb253-7"><a href="#cb253-7"></a>  <span class="kw">rescue</span> <span class="dt">Exception</span> =&gt; e</span>
<span id="cb253-8"><a href="#cb253-8"></a>    puts <span class="st">&quot;caught exception </span><span class="ot">#{</span>e<span class="ot">}</span><span class="st">! ohnoes!&quot;</span></span>
<span id="cb253-9"><a href="#cb253-9"></a>  <span class="kw">end</span></span>
<span id="cb253-10"><a href="#cb253-10"></a><span class="kw">end</span></span></code></pre></div>
<p>No, really, don’t do it. Don’t even run that to see if it works.</p>
<p>However, say you have a threaded server and you want all exceptions to not:</p>
<ol>
<li>
be ignored (the default)
</li>
<li>
stop the server (which happens if you say <code>thread.abort_on_exception = true</code>).
</li>
</ol>
<p>Then this is perfectly acceptable in your connection handling thread:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb254-1"><a href="#cb254-1"></a><span class="kw">begin</span></span>
<span id="cb254-2"><a href="#cb254-2"></a>  <span class="co"># do stuff</span></span>
<span id="cb254-3"><a href="#cb254-3"></a><span class="kw">rescue</span> <span class="dt">Exception</span> =&gt; e</span>
<span id="cb254-4"><a href="#cb254-4"></a>  myLogger.error(<span class="st">&quot;uncaught </span><span class="ot">#{</span>e<span class="ot">}</span><span class="st"> exception while handling connection: </span><span class="ot">#{</span>e.message<span class="ot">}</span><span class="st">&quot;</span>)</span>
<span id="cb254-5"><a href="#cb254-5"></a>    myLogger.error(<span class="st">&quot;Stack trace: </span><span class="ot">#{</span>backtrace.map {|l| <span class="st">&quot;  </span><span class="ot">#{</span>l<span class="ot">}</span><span class="st">\n&quot;</span>}.join<span class="ot">}</span><span class="st">&quot;</span>)</span>
<span id="cb254-6"><a href="#cb254-6"></a><span class="kw">end</span></span></code></pre></div>
<p>The above works out to a variation of Ruby’s default exception handler, with the advantage that it doesn’t also kill your program. Rails does this in its request handler.</p>
<p>Signal exceptions are raised in the main thread. Background threads won’t get them, so there is no point in trying to catch them there.</p>
<p>This is particularly useful in a production environment, where you do <em>not</em> want your program to simply stop whenever something goes wrong. Then you can take the stack dumps in your logs and add to your code to deal with specific exception further down the call chain and in a more graceful manner.</p>
<p>Note also that there is another Ruby idiom which has much the same effect:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb255-1"><a href="#cb255-1"></a>a = <span class="kw">do</span>_something <span class="kw">rescue</span> <span class="st">&quot;something else&quot;</span></span></code></pre></div>
<p>In this line, if <code>do_something</code> raises an exception, it is caught by Ruby, thrown away, and <code>a</code> is assigned <code>"something else"</code>.</p>
<p>Generally, don’t do that, except in special cases where you <em>know</em> you don’t need to worry. One example:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb256-1"><a href="#cb256-1"></a>debugger <span class="kw">rescue</span> <span class="dv">nil</span></span></code></pre></div>
<p>The <code>debugger</code> function is a rather nice way to set a breakpoint in your code, but if running outside a debugger, and Rails, it raises an exception. Now theoretically you shouldn’t be leaving debug code lying around in your program (pff! nobody does that!) but you might want to keep it there for a while for some reason, but not continually run your debugger.</p>
<p>Note:</p>
<ol>
<li>
<p>
If you’ve run someone else’s program that catches signal exceptions and ignores them, (say the code above) then:
</p>
<ul>
<li>
in Linux, in a shell, type <code>pgrep ruby</code>, or <code>ps | grep ruby</code>, look for your offending program’s PID, and then run <code>kill -9 &amp;lt;PID&amp;gt;</code>.
</li>
<li>
in Windows, use the Task Manager (<kbd>CTRL</kbd>-<kbd>SHIFT</kbd>-<kbd>ESC</kbd>), go to the “processes” tab, find your process, right click it and select “End process”.
</li>
</ul>
</li>
<li>
<p>
If you are working with someone else’s program which is, for whatever reason, peppered with these ignore-exception blocks, then putting this at the top of the mainline is one possible cop-out:
</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb257-1"><a href="#cb257-1"></a><span class="ot">%W/</span><span class="st">INT QUIT TERM</span><span class="ot">/</span>.each { |sig| trap sig,<span class="st">&quot;SYSTEM_DEFAULT&quot;</span> }</span></code></pre></div>
This causes the program to respond to the normal termination signals by immediately terminating, bypassing exception handlers, <em>with no cleanup</em>. So it could cause data loss or similar. Be careful!
</li>
<li>
<p>
If you need to do this:
</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb258-1"><a href="#cb258-1"></a><span class="kw">begin</span></span>
<span id="cb258-2"><a href="#cb258-2"></a>  <span class="kw">do</span>_something</span>
<span id="cb258-3"><a href="#cb258-3"></a><span class="kw">rescue</span> <span class="dt">Exception</span> =&gt; e</span>
<span id="cb258-4"><a href="#cb258-4"></a>  critical_cleanup</span>
<span id="cb258-5"><a href="#cb258-5"></a>  raise</span>
<span id="cb258-6"><a href="#cb258-6"></a><span class="kw">end</span></span></code></pre></div>
<p>you can actually do this:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb259-1"><a href="#cb259-1"></a><span class="kw">begin</span></span>
<span id="cb259-2"><a href="#cb259-2"></a>  <span class="kw">do</span>_something</span>
<span id="cb259-3"><a href="#cb259-3"></a><span class="kw">ensure</span></span>
<span id="cb259-4"><a href="#cb259-4"></a>  critical_cleanup</span>
<span id="cb259-5"><a href="#cb259-5"></a><span class="kw">end</span></span></code></pre></div>
In the second case, <code>critical cleanup</code> will be called every time, whether or not an exception is thrown.
</li>
</ol>
</section>
<section id="answer-3-score-63" class="level4">
<h4>Answer 3 (score 63)</h4>
<p>Let’s say you are in a car (running Ruby). You recently installed a new steering wheel with the over-the-air upgrade system (which uses <code>eval</code>), but you didn’t know one of the programmers messed up on syntax.</p>
<p>You are on a bridge, and realize you are going a bit towards the railing, so you turn left.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb260-1"><a href="#cb260-1"></a><span class="kw">def</span> turn_left</span>
<span id="cb260-2"><a href="#cb260-2"></a>  <span class="dv">self</span>.turn left:</span>
<span id="cb260-3"><a href="#cb260-3"></a><span class="kw">end</span></span></code></pre></div>
<p>oops! That’s probably <em>Not Good</em>™, luckily, Ruby raises a <code>SyntaxError</code>.</p>
<p>The car should stop immediately - right?</p>
<p>Nope.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb261-1"><a href="#cb261-1"></a><span class="kw">begin</span></span>
<span id="cb261-2"><a href="#cb261-2"></a>  <span class="co">#...</span></span>
<span id="cb261-3"><a href="#cb261-3"></a>  eval <span class="dv">self</span>.steering_wheel</span>
<span id="cb261-4"><a href="#cb261-4"></a>  <span class="co">#...</span></span>
<span id="cb261-5"><a href="#cb261-5"></a><span class="kw">rescue</span> <span class="dt">Exception</span> =&gt; e</span>
<span id="cb261-6"><a href="#cb261-6"></a>  <span class="dv">self</span>.beep</span>
<span id="cb261-7"><a href="#cb261-7"></a>  <span class="dv">self</span>.log <span class="st">&quot;Caught </span><span class="ot">#{</span>e<span class="ot">}</span><span class="st">.&quot;</span>, <span class="st">:warn</span></span>
<span id="cb261-8"><a href="#cb261-8"></a>  <span class="dv">self</span>.log <span class="st">&quot;Logged Error - Continuing Process.&quot;</span>, <span class="st">:info</span></span>
<span id="cb261-9"><a href="#cb261-9"></a><span class="kw">end</span></span></code></pre></div>
<blockquote>
<p><strong>beep beep</strong></p>
<p>Warning: Caught SyntaxError Exception.</p>
Info: Logged Error - Continuing Process.
</blockquote>
<p>You notice something is wrong, and you slam on the emergency breaks (<code>^C</code>: <code>Interrupt</code>)</p>
<blockquote>
<p><strong>beep beep</strong></p>
<p>Warning: Caught Interrupt Exception.</p>
Info: Logged Error - Continuing Process.
</blockquote>
<p>Yeah - that didn’t help much. You’re pretty close to the rail, so you put the car in park (<code>kill</code>ing: <code>SignalException</code>).</p>
<blockquote>
<p><strong>beep beep</strong></p>
<p>Warning: Caught SignalException Exception.</p>
Info: Logged Error - Continuing Process.
</blockquote>
<p>At the last second, you pull out the keys (<code>kill -9</code>), and the car stops, you slam forward into the steering wheel (the airbag can’t inflate because you didn’t gracefully stop the program - you terminated it), and the computer in the back of your car slams into the seat in front of it. A half-full can of Coke spills over the papers. The groceries in the back are crushed, and most are covered in egg yolk and milk. The car needs serious repair and cleaning. (Data Loss)</p>
<p>Hopefully you have insurance (Backups). Oh yeah - because the airbag didn’t inflate, you’re probably hurt (getting fired, etc).</p>
<hr>
<p>But wait! There’s <del>more</del> reasons why you might want to use <code>rescue Exception =&amp;gt; e</code>!</p>
<p>Let’s say you’re that car, and you want to make sure the airbag inflates if the car is exceeding its safe stopping momentum.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb262-1"><a href="#cb262-1"></a> <span class="kw">begin</span> </span>
<span id="cb262-2"><a href="#cb262-2"></a>    <span class="co"># do driving stuff</span></span>
<span id="cb262-3"><a href="#cb262-3"></a> <span class="kw">rescue</span> <span class="dt">Exception</span> =&gt; e</span>
<span id="cb262-4"><a href="#cb262-4"></a>    <span class="dv">self</span>.airbags.inflate <span class="kw">if</span> <span class="dv">self</span>.exceeding_safe_stopping_momentum?</span>
<span id="cb262-5"><a href="#cb262-5"></a>    raise</span>
<span id="cb262-6"><a href="#cb262-6"></a> <span class="kw">end</span></span></code></pre></div>
<p>Here’s the exception to the rule: You can catch <code>Exception</code> <strong>only if you re-raise the exception</strong>. So, a better rule is to never swallow <code>Exception</code>, and always re-raise the error.</p>
<p>But adding rescue is both easy to forget in a language like Ruby, and putting a rescue statement right before re-raising an issue feels a little non-DRY. And you <strong>do not</strong> want to forget the <code>raise</code> statement. And if you do, good luck trying to find that error.</p>
<p>Thankfully, Ruby is awesome, you can just use the <code>ensure</code> keyword, which makes sure the code runs. The <code>ensure</code> keyword will run the code no matter what - if an exception is thrown, if one isn’t, the only exception being if the world ends (or other unlikely events).</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb263-1"><a href="#cb263-1"></a> <span class="kw">begin</span> </span>
<span id="cb263-2"><a href="#cb263-2"></a>    <span class="co"># do driving stuff</span></span>
<span id="cb263-3"><a href="#cb263-3"></a> <span class="kw">ensure</span></span>
<span id="cb263-4"><a href="#cb263-4"></a>    <span class="dv">self</span>.airbags.inflate <span class="kw">if</span> <span class="dv">self</span>.exceeding_safe_stopping_momentum?</span>
<span id="cb263-5"><a href="#cb263-5"></a> <span class="kw">end</span></span></code></pre></div>
<p>Boom! And that code should run anyways. The only reason you should use <code>rescue Exception =&amp;gt; e</code> is if you need access to the exception, or if you only want code to run on an exception. And remember to re-raise the error. Every time.</p>
<p>Note: As <span class="citation" data-cites="Niall">@Niall</span> pointed out, ensure <strong>always</strong> runs. This is good because sometimes your program can lie to you and not throw exceptions, even when issues occur. With critical tasks, like inflating airbags, you need to make sure it happens no matter what. Because of this, checking every time the car stops, whether an exception is thrown or not, is a good idea. Even though inflating airbags is a bit of an uncommon task in most programming contexts, this is actually pretty common with most cleanup tasks.</p>
<hr>
<h5>
TL;DR
</h2>
<p>Don’t <code>rescue Exception =&amp;gt; e</code> (and not re-raise the exception) - or you <em>might</em> drive off a bridge.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="failed-to-build-gem-native-extension-installing-compass-score-276002-in-2014" class="level3">
<h3>50: Failed to build gem native extension (installing Compass) (score <a href="https://stackoverflow.com/q/22544754.html">276002</a> in 2014)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>When I attempt to install the latest version of compass (<a href="https://rubygems.org/gems/compass/versions/1.0.0.alpha.17">https://rubygems.org/gems/compass/versions/1.0.0.alpha.17</a>), I get the following error.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb264-1"><a href="#cb264-1"></a><span class="dt">ERROR</span>:  <span class="dt">Error</span> installing compass:</span>
<span id="cb264-2"><a href="#cb264-2"></a><span class="dt">ERROR</span>: <span class="dt">Failed</span> to build gem native extension.</span>
<span id="cb264-3"><a href="#cb264-3"></a></span>
<span id="cb264-4"><a href="#cb264-4"></a> <span class="dt">ERROR</span>:  <span class="dt">Error</span> installing compass:</span>
<span id="cb264-5"><a href="#cb264-5"></a>  <span class="dt">ERROR</span>: <span class="dt">Failed</span> to build gem native extension.</span>
<span id="cb264-6"><a href="#cb264-6"></a></span>
<span id="cb264-7"><a href="#cb264-7"></a>    <span class="ot">/System/</span><span class="dt">Library</span>/<span class="dt">Frameworks</span>/<span class="dt">Ruby</span>.framework/<span class="dt">Versions</span>/<span class="fl">2.0</span>/usr/bin/ruby extconf.rb</span>
<span id="cb264-8"><a href="#cb264-8"></a>checking <span class="kw">for</span> ffi.h... no</span>
<span id="cb264-9"><a href="#cb264-9"></a>checking <span class="kw">for</span> ffi.h <span class="kw">in</span> <span class="ot">/usr/</span>local/include,<span class="ot">/usr/in</span>clude/ffi... yes</span>
<span id="cb264-10"><a href="#cb264-10"></a>checking <span class="kw">for</span> ffi_call() <span class="kw">in</span> -lffi... yes</span>
<span id="cb264-11"><a href="#cb264-11"></a>checking <span class="kw">for</span> ffi_prep_closure()... yes</span>
<span id="cb264-12"><a href="#cb264-12"></a>checking <span class="kw">for</span> ffi_raw_call()... no</span>
<span id="cb264-13"><a href="#cb264-13"></a>checking <span class="kw">for</span> rb_thread_blocking_region()... yes</span>
<span id="cb264-14"><a href="#cb264-14"></a>checking <span class="kw">for</span> rb_thread_call_with_gvl()... yes</span>
<span id="cb264-15"><a href="#cb264-15"></a>checking <span class="kw">for</span> rb_thread_call_without_gvl()... yes</span>
<span id="cb264-16"><a href="#cb264-16"></a>checking <span class="kw">for</span> ffi_prep_cif_var()... no</span>
<span id="cb264-17"><a href="#cb264-17"></a>creating extconf.h</span>
<span id="cb264-18"><a href="#cb264-18"></a>creating <span class="dt">Makefile</span></span>
<span id="cb264-19"><a href="#cb264-19"></a></span>
<span id="cb264-20"><a href="#cb264-20"></a>make <span class="st">&quot;DESTDIR=&quot;</span> clean</span>
<span id="cb264-21"><a href="#cb264-21"></a></span>
<span id="cb264-22"><a href="#cb264-22"></a>make <span class="st">&quot;DESTDIR=&quot;</span></span>
<span id="cb264-23"><a href="#cb264-23"></a>compiling <span class="dt">AbstractMemory</span>.c</span>
<span id="cb264-24"><a href="#cb264-24"></a>compiling <span class="dt">ArrayType</span>.c</span>
<span id="cb264-25"><a href="#cb264-25"></a>compiling <span class="dt">Buffer</span>.c</span>
<span id="cb264-26"><a href="#cb264-26"></a>compiling <span class="dt">Call</span>.c</span>
<span id="cb264-27"><a href="#cb264-27"></a><span class="dt">Call</span>.c:<span class="dv">303</span>:<span class="dv">5</span>: <span class="st">warning: </span>implicit declaration of function <span class="st">&#39;rb_thread_call_without_gvl&#39;</span> is invalid <span class="kw">in</span> <span class="dt">C99</span> [-<span class="dt">Wimplicit</span>-function-declaration]</span>
<span id="cb264-28"><a href="#cb264-28"></a>    rbffi_thread_blocking_region(call_blocking_function, data, (void *) <span class="dv">-1</span>, <span class="dt">NULL</span>);</span>
<span id="cb264-29"><a href="#cb264-29"></a>    ^</span>
<span id="cb264-30"><a href="#cb264-30"></a>.<span class="ot">/Thread.h:78:39: note: expanded from macro &#39;rbffi_thread_blocking_region&#39;</span></span>
<span id="cb264-31"><a href="#cb264-31"></a><span class="ot"># define rbffi_thread_blocking_region rb_thread_call_without_gvl</span></span>
<span id="cb264-32"><a href="#cb264-32"></a><span class="ot">                                      ^</span></span>
<span id="cb264-33"><a href="#cb264-33"></a><span class="ot">1 warning generated.</span></span>
<span id="cb264-34"><a href="#cb264-34"></a><span class="ot">compiling ClosurePool.c</span></span>
<span id="cb264-35"><a href="#cb264-35"></a><span class="ot">compiling DataConverter.c</span></span>
<span id="cb264-36"><a href="#cb264-36"></a><span class="ot">DataConverter.c:43:1: warning: control may reach end of non-void function [-Wreturn-type]</span></span>
<span id="cb264-37"><a href="#cb264-37"></a><span class="ot">}</span></span>
<span id="cb264-38"><a href="#cb264-38"></a><span class="ot">^</span></span>
<span id="cb264-39"><a href="#cb264-39"></a><span class="ot">1 warning generated.</span></span>
<span id="cb264-40"><a href="#cb264-40"></a><span class="ot">compiling DynamicLibrary.c</span></span>
<span id="cb264-41"><a href="#cb264-41"></a><span class="ot">compiling ffi.c</span></span>
<span id="cb264-42"><a href="#cb264-42"></a><span class="ot">compiling Function.c</span></span>
<span id="cb264-43"><a href="#cb264-43"></a><span class="ot">Function.c:479:33: warning: incompatible pointer types passing &#39;VALUE (void *)&#39; to parameter of type &#39;void *(*)(void *)&#39; [-Wincompatible-pointer-types]</span></span>
<span id="cb264-44"><a href="#cb264-44"></a><span class="ot">        rb_thread_call_with_gvl(callback_with_gvl, &amp;cb);</span></span>
<span id="cb264-45"><a href="#cb264-45"></a><span class="ot">                                ^~~~~~~~~~~~~~~~~</span></span>
<span id="cb264-46"><a href="#cb264-46"></a><span class="ot">Function.c:102:46: note: passing argument to parameter &#39;func&#39; here</span></span>
<span id="cb264-47"><a href="#cb264-47"></a><span class="ot">extern void *rb_thread_call_with_gvl(void *(*func)(void *), void *data1);</span></span>
<span id="cb264-48"><a href="#cb264-48"></a><span class="ot">                                             ^</span></span>
<span id="cb264-49"><a href="#cb264-49"></a><span class="ot">Function.c:563:9: warning: implicit declaration of function &#39;rb_thread_call_without_gvl&#39; is invalid in C99 [-Wimplicit-function-declaration]</span></span>
<span id="cb264-50"><a href="#cb264-50"></a><span class="ot">        rb_thread_call_without_gvl(async_cb_wait, &amp;w, async_cb_stop, &amp;w);</span></span>
<span id="cb264-51"><a href="#cb264-51"></a><span class="ot">        ^</span></span>
<span id="cb264-52"><a href="#cb264-52"></a><span class="ot">Function.c:738:1: warning: control reaches end of non-void function [-Wreturn-type]</span></span>
<span id="cb264-53"><a href="#cb264-53"></a><span class="ot">}</span></span>
<span id="cb264-54"><a href="#cb264-54"></a><span class="ot">^</span></span>
<span id="cb264-55"><a href="#cb264-55"></a><span class="ot">3 warnings generated.</span></span>
<span id="cb264-56"><a href="#cb264-56"></a><span class="ot">compiling FunctionInfo.c</span></span>
<span id="cb264-57"><a href="#cb264-57"></a><span class="ot">compiling LastError.c</span></span>
<span id="cb264-58"><a href="#cb264-58"></a><span class="ot">compiling LongDouble.c</span></span>
<span id="cb264-59"><a href="#cb264-59"></a><span class="ot">compiling MappedType.c</span></span>
<span id="cb264-60"><a href="#cb264-60"></a><span class="ot">compiling MemoryPointer.c</span></span>
<span id="cb264-61"><a href="#cb264-61"></a><span class="ot">compiling MethodHandle.c</span></span>
<span id="cb264-62"><a href="#cb264-62"></a><span class="ot">compiling Platform.c</span></span>
<span id="cb264-63"><a href="#cb264-63"></a><span class="ot">compiling Pointer.c</span></span>
<span id="cb264-64"><a href="#cb264-64"></a><span class="ot">compiling Struct.c</span></span>
<span id="cb264-65"><a href="#cb264-65"></a><span class="ot">compiling StructByReference.c</span></span>
<span id="cb264-66"><a href="#cb264-66"></a><span class="ot">compiling StructByValue.c</span></span>
<span id="cb264-67"><a href="#cb264-67"></a><span class="ot">compiling StructLayout.c</span></span>
<span id="cb264-68"><a href="#cb264-68"></a><span class="ot">compiling Thread.c</span></span>
<span id="cb264-69"><a href="#cb264-69"></a><span class="ot">compiling Type.c</span></span>
<span id="cb264-70"><a href="#cb264-70"></a><span class="ot">compiling Types.c</span></span>
<span id="cb264-71"><a href="#cb264-71"></a><span class="ot">compiling Variadic.c</span></span>
<span id="cb264-72"><a href="#cb264-72"></a><span class="ot">linking shared-object ffi_c.bundle</span></span>
<span id="cb264-73"><a href="#cb264-73"></a><span class="ot">clang: error: unknown argument: &#39;-multiply_definedsuppress&#39; [-Wunused-command-line-argument-hard-error-in-future]</span></span>
<span id="cb264-74"><a href="#cb264-74"></a><span class="ot">clang: note: this will be a hard error (cannot be downgraded to a warning) in the future</span></span>
<span id="cb264-75"><a href="#cb264-75"></a><span class="ot">make: *** [ffi_c.bundle] Error 1</span></span>
<span id="cb264-76"><a href="#cb264-76"></a></span>
<span id="cb264-77"><a href="#cb264-77"></a><span class="ot">make failed, exit code 2</span></span>
<span id="cb264-78"><a href="#cb264-78"></a></span>
<span id="cb264-79"><a href="#cb264-79"></a><span class="ot">Gem files will remain installed in /</span><span class="dt">Library</span>/<span class="dt">Ruby</span>/<span class="dt">Gems</span>/<span class="fl">2.0</span>.<span class="dv">0</span>/gems/ffi<span class="dv">-1</span>.<span class="fl">9.3</span> <span class="kw">for</span> inspection.</span>
<span id="cb264-80"><a href="#cb264-80"></a><span class="dt">Results</span> logged to <span class="ot">/Library/</span><span class="dt">Ruby</span>/<span class="dt">Gems</span>/<span class="fl">2.0</span>.<span class="dv">0</span>/extensions/universal-darwin<span class="dv">-13</span>/<span class="fl">2.0</span>.<span class="dv">0</span>/ffi<span class="dv">-1</span>.<span class="fl">9.3</span>/gem_make.out</span></code></pre></div>
<p>What’s going on here? How do I install the latest compass without error?</p>
</section>
<section id="answer-2-score-555" class="level4">
<h4>Answer 2 (score 555)</h4>
<p>Try this, then try to install compass again</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb265-1"><a href="#cb265-1"></a>apt-get install ruby-dev</span></code></pre></div>
</section>
<section id="answer-3-score-119" class="level4">
<h4>Answer 3 (score 119)</h4>
<p>In order to install compass On Mac OS X 10.10 (Yosemite)had to perform the following:</p>
<p><strong>1. Set Up Ruby Environment</strong></p>
<ul>
<li>
Ensure ruby is installed and up to date: <code>ruby -v</code>
</li>
<li>
Update gem’s <code>sudo gem update --system</code>
</li>
</ul>
<p><strong>2. Set Up MAC Environment</strong></p>
<p>Install the <strong>Xcode Command Line Tools</strong> this is the key to install Compass.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb266-1"><a href="#cb266-1"></a>xcode-select --install</span></code></pre></div>
<p>Installing the Xcode Command Line Tools are the key to getting Compass working on OS X</p>
<p><strong>3. Install Compass</strong></p>
<div class="sourceCode" id="cb267"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb267-1"><a href="#cb267-1"></a>sudo gem install compass</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-a-specific-output-iterating-a-hash-in-ruby-score-273875-in-2018" class="level3">
<h3>51: How to get a specific output iterating a hash in Ruby? (score <a href="https://stackoverflow.com/q/1227571.html">273875</a> in 2018)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>I want to get a specific output iterating a Ruby Hash.</p>
<p>This is the Hash I want to iterate over:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb268-1"><a href="#cb268-1"></a>hash = {</span>
<span id="cb268-2"><a href="#cb268-2"></a>  <span class="dv">1</span> =&gt; [<span class="ch">&#39;a&#39;</span>, <span class="ch">&#39;b&#39;</span>], </span>
<span id="cb268-3"><a href="#cb268-3"></a>  <span class="dv">2</span> =&gt; [<span class="ch">&#39;c&#39;</span>], </span>
<span id="cb268-4"><a href="#cb268-4"></a>  <span class="dv">3</span> =&gt; [<span class="ch">&#39;d&#39;</span>, <span class="ch">&#39;e&#39;</span>, <span class="ch">&#39;f&#39;</span>, <span class="ch">&#39;g&#39;</span>], </span>
<span id="cb268-5"><a href="#cb268-5"></a>  <span class="dv">4</span> =&gt; [<span class="ch">&#39;h&#39;</span>]</span>
<span id="cb268-6"><a href="#cb268-6"></a>}</span></code></pre></div>
<p>This is the output I would like to get:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb269-1"><a href="#cb269-1"></a><span class="dv">1</span>-----</span>
<span id="cb269-2"><a href="#cb269-2"></a></span>
<span id="cb269-3"><a href="#cb269-3"></a>a</span>
<span id="cb269-4"><a href="#cb269-4"></a></span>
<span id="cb269-5"><a href="#cb269-5"></a>b</span>
<span id="cb269-6"><a href="#cb269-6"></a></span>
<span id="cb269-7"><a href="#cb269-7"></a><span class="dv">2</span>-----</span>
<span id="cb269-8"><a href="#cb269-8"></a></span>
<span id="cb269-9"><a href="#cb269-9"></a>c</span>
<span id="cb269-10"><a href="#cb269-10"></a></span>
<span id="cb269-11"><a href="#cb269-11"></a><span class="dv">3</span>-----</span>
<span id="cb269-12"><a href="#cb269-12"></a></span>
<span id="cb269-13"><a href="#cb269-13"></a>d </span>
<span id="cb269-14"><a href="#cb269-14"></a></span>
<span id="cb269-15"><a href="#cb269-15"></a>e</span>
<span id="cb269-16"><a href="#cb269-16"></a></span>
<span id="cb269-17"><a href="#cb269-17"></a>f</span>
<span id="cb269-18"><a href="#cb269-18"></a></span>
<span id="cb269-19"><a href="#cb269-19"></a>g</span>
<span id="cb269-20"><a href="#cb269-20"></a></span>
<span id="cb269-21"><a href="#cb269-21"></a><span class="dv">4</span>-----</span>
<span id="cb269-22"><a href="#cb269-22"></a></span>
<span id="cb269-23"><a href="#cb269-23"></a>h</span></code></pre></div>
<p>In Ruby, how can I get such an output with my Hash ?</p>
</section>
<section id="answer-2-score-313" class="level4">
<h4>Answer 2 (score 313)</h4>
<div class="sourceCode" id="cb270"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb270-1"><a href="#cb270-1"></a>hash.each <span class="kw">do</span> |key, array|</span>
<span id="cb270-2"><a href="#cb270-2"></a>  puts <span class="st">&quot;</span><span class="ot">#{</span>key<span class="ot">}</span><span class="st">-----&quot;</span></span>
<span id="cb270-3"><a href="#cb270-3"></a>  puts array</span>
<span id="cb270-4"><a href="#cb270-4"></a><span class="kw">end</span></span></code></pre></div>
<p>Regarding order I should add, that in 1.8 the items will be iterated in random order (well, actually in an order defined by Fixnum’s hashing function), while in 1.9 it will be iterated in the order of the literal.</p>
</section>
<section id="answer-3-score-81" class="level4">
<h4>Answer 3 (score 81)</h4>
<p>The most basic way to iterate over a hash is as follows:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb271-1"><a href="#cb271-1"></a>hash.each <span class="kw">do</span> |key, value|</span>
<span id="cb271-2"><a href="#cb271-2"></a>  puts key</span>
<span id="cb271-3"><a href="#cb271-3"></a>  puts value</span>
<span id="cb271-4"><a href="#cb271-4"></a><span class="kw">end</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-parse-json-with-ruby-on-rails-score-272587-in-2015" class="level3">
<h3>52: How do I parse JSON with Ruby on Rails? (score <a href="https://stackoverflow.com/q/1826727.html">272587</a> in 2015)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>I’m looking for a simple way to parse JSON, extract a value and write it into a database in Rails.</p>
<p>Specifically what I’m looking for, is a way to extract <code>shortUrl</code> from the JSON returned from the bit.ly API:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb272-1"><a href="#cb272-1"></a>{</span>
<span id="cb272-2"><a href="#cb272-2"></a>  <span class="st">&quot;errorCode&quot;</span>: <span class="dv">0</span>,</span>
<span id="cb272-3"><a href="#cb272-3"></a>  <span class="st">&quot;errorMessage&quot;</span>: <span class="st">&quot;&quot;</span>,</span>
<span id="cb272-4"><a href="#cb272-4"></a>  <span class="st">&quot;results&quot;</span>:</span>
<span id="cb272-5"><a href="#cb272-5"></a>  {</span>
<span id="cb272-6"><a href="#cb272-6"></a>    <span class="st">&quot;http://www.foo.com&quot;</span>:</span>
<span id="cb272-7"><a href="#cb272-7"></a>    {</span>
<span id="cb272-8"><a href="#cb272-8"></a>       <span class="st">&quot;hash&quot;</span>: <span class="st">&quot;e5TEd&quot;</span>,</span>
<span id="cb272-9"><a href="#cb272-9"></a>       <span class="st">&quot;shortKeywordUrl&quot;</span>: <span class="st">&quot;&quot;</span>,</span>
<span id="cb272-10"><a href="#cb272-10"></a>       <span class="st">&quot;shortUrl&quot;</span>: <span class="st">&quot;http://bit.ly/1a0p8G&quot;</span>,</span>
<span id="cb272-11"><a href="#cb272-11"></a>       <span class="st">&quot;userHash&quot;</span>: <span class="st">&quot;1a0p8G&quot;</span></span>
<span id="cb272-12"><a href="#cb272-12"></a>    }</span>
<span id="cb272-13"><a href="#cb272-13"></a>  },</span>
<span id="cb272-14"><a href="#cb272-14"></a>  <span class="st">&quot;statusCode&quot;</span>: <span class="st">&quot;OK&quot;</span></span>
<span id="cb272-15"><a href="#cb272-15"></a>}</span></code></pre></div>
<p>And then take that shortUrl and write it into an ActiveRecord object associated with the long URL.</p>
<p>This is one of those things that I can think through entirely in concept and when I sit down to execute I realize I’ve got a lot to learn.</p>
</section>
<section id="answer-2-score-444" class="level4">
<h4>Answer 2 (score 444)</h4>
<p>These answers are a bit dated. Therefore I give you:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb273-1"><a href="#cb273-1"></a>hash = <span class="dt">JSON</span>.parse string</span></code></pre></div>
<p>Rails should automagically load the <code>json</code> module for you, so you <em>don’t</em> need to add <code>require 'json'</code>.</p>
</section>
<section id="answer-3-score-187" class="level4">
<h4>Answer 3 (score 187)</h4>
<p>Parsing JSON in Rails is quite straightforward:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb274-1"><a href="#cb274-1"></a>parsed_json = <span class="dt">ActiveSupport</span>::<span class="dt">JSON</span>.decode(your_json_string)</span></code></pre></div>
<p>Let’s suppose, the object you want to associate the shortUrl with is a Site object, which has two attributes - short_url and long_url. Than, to get the shortUrl and associate it with the appropriate Site object, you can do something like:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb275-1"><a href="#cb275-1"></a>parsed_json[<span class="st">&quot;results&quot;</span>].each <span class="kw">do</span> |longUrl, convertedUrl|</span>
<span id="cb275-2"><a href="#cb275-2"></a>  site = <span class="dt">Site</span>.find_by_long_url(longUrl)</span>
<span id="cb275-3"><a href="#cb275-3"></a>  site.short_url = convertedUrl[<span class="st">&quot;shortUrl&quot;</span>]</span>
<span id="cb275-4"><a href="#cb275-4"></a>  site.save</span>
<span id="cb275-5"><a href="#cb275-5"></a><span class="kw">end</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-print-and-puts-score-271853-in-2014" class="level3">
<h3>53: What is the difference between print and puts? (score <a href="https://stackoverflow.com/q/5018633.html">271853</a> in 2014)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>For example in this line of code I wrote, <code>print</code> and <code>puts</code> produce different results.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb276-1"><a href="#cb276-1"></a><span class="dv">1</span>.upto(<span class="dv">1000</span>).each { |i| print i <span class="kw">if</span> i % <span class="dv">2</span> == <span class="dv">0</span> }</span></code></pre></div>
</section>
<section id="answer-accepted-score-368" class="level4">
<h4>Answer accepted (score 368)</h4>
<p><code>puts</code> adds a new line to the end of each argument if there is not one already.</p>
<p><code>print</code> does not add a new line.</p>
<hr>
<p><strong>For example:</strong></p>
<p><code>puts [[1,2,3], [4,5,nil]]</code> Would return:</p>
<pre>
1
2
3
4
5
</pre>
<p>
Whereas <code>print [[1,2,3], [4,5,nil]]</code> would return:
</p>
<pre>[[1,2,3], [4,5,nil]]</pre>
<blockquote>
<i>Notice how puts does not output the nil value whereas print does.</i>
</blockquote>
</section>
<section id="answer-2-score-61" class="level4">
<h4>Answer 2 (score 61)</h4>
<p>
A big difference is if you are displaying arrays. Especially ones with NIL. For example:
</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb277-1"><a href="#cb277-1"></a>print [<span class="dv">nil</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span></code></pre></div>
<p>gives</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb278-1"><a href="#cb278-1"></a>[<span class="dv">nil</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span></code></pre></div>
<p>but</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb279-1"><a href="#cb279-1"></a>puts [<span class="dv">nil</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span></code></pre></div>
<p>gives</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb280-1"><a href="#cb280-1"></a><span class="dv">1</span></span>
<span id="cb280-2"><a href="#cb280-2"></a><span class="dv">2</span></span></code></pre></div>
<p>Note, no appearing nil item (just a blank line) and each item on a different line.</p>
</section>
<section id="answer-3-score-41-1" class="level4">
<h4>Answer 3 (score 41)</h4>
<p><code>print</code> outputs each argument, followed by <code>$,</code>, to <code>$stdout</code>, followed by <code>$\</code>. It is equivalent to <code>args.join($,) + $\</code></p>
<p><code>puts</code> sets both <code>$,</code> and <code>$\</code> to “” and then does the same thing as <code>print</code>. The key difference being that <em>each argument</em> is a new line with <code>puts</code>.</p>
<p>You can <code>require 'english'</code> to access those global variables with <a href="http://ruby-doc.org/stdlib-2.0/libdoc/English/rdoc/English.html" rel="noreferrer">user-friendly names</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-add-new-item-to-hash-score-271685-in-2018" class="level3">
<h3>54: How to add new item to hash (score <a href="https://stackoverflow.com/q/9571768.html">271685</a> in 2018)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>I’m new to Ruby and don’t know how to add new item to already existing hash. For example, first I construct hash:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb281-1"><a href="#cb281-1"></a>hash = {<span class="st">item1: </span><span class="dv">1</span>}</span></code></pre></div>
<p>after that a want to add item2 so after this I have hash like this:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb282-1"><a href="#cb282-1"></a>{<span class="st">item1: </span><span class="dv">1</span>, <span class="st">item2: </span><span class="dv">2</span>}</span></code></pre></div>
<p>I don’t know what method to do on hash, could someone help me?</p>
</section>
<section id="answer-accepted-score-277" class="level4">
<h4>Answer accepted (score 277)</h4>
<p>Create the hash:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb283-1"><a href="#cb283-1"></a>hash = {<span class="st">:item1</span> =&gt; <span class="dv">1</span>}</span></code></pre></div>
<p>Add a new item to it:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb284-1"><a href="#cb284-1"></a>hash[<span class="st">:item2</span>] = <span class="dv">2</span></span></code></pre></div>
</section>
<section id="answer-2-score-65" class="level4">
<h4>Answer 2 (score 65)</h4>
<p>If you want to add new items from another hash - use <code>merge</code> method:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb285-1"><a href="#cb285-1"></a>hash = {<span class="st">:item1</span> =&gt; <span class="dv">1</span>}</span>
<span id="cb285-2"><a href="#cb285-2"></a>another_hash = {<span class="st">:item2</span> =&gt; <span class="dv">2</span>, <span class="st">:item3</span> =&gt; <span class="dv">3</span>}</span>
<span id="cb285-3"><a href="#cb285-3"></a>hash.merge(another_hash) <span class="co"># {:item1=&gt;1, :item2=&gt;2, :item3=&gt;3}</span></span></code></pre></div>
<p>In your specific case it could be:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb286-1"><a href="#cb286-1"></a>hash = {<span class="st">:item1</span> =&gt; <span class="dv">1</span>}</span>
<span id="cb286-2"><a href="#cb286-2"></a>hash.merge({<span class="st">:item2</span> =&gt; <span class="dv">2</span>}) <span class="co"># {:item1=&gt;1, :item2=&gt;2}</span></span></code></pre></div>
<p>but it’s not wise to use it when you should to add just one element more.</p>
<p>Pay attention that <code>merge</code> will replace the values with the existing keys:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb287-1"><a href="#cb287-1"></a>hash = {<span class="st">:item1</span> =&gt; <span class="dv">1</span>}</span>
<span id="cb287-2"><a href="#cb287-2"></a>hash.merge({<span class="st">:item1</span> =&gt; <span class="dv">2</span>}) <span class="co"># {:item1=&gt;2}</span></span></code></pre></div>
<p>exactly like <code>hash[:item1] = 2</code></p>
<p>Also you should pay attention that <code>merge</code> method (of course) doesn’t effect the original value of hash variable - it returns a new merged hash. If you want to replace the value of the hash variable then use <code>merge!</code> instead:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb288-1"><a href="#cb288-1"></a>hash = {<span class="st">:item1</span> =&gt; <span class="dv">1</span>}</span>
<span id="cb288-2"><a href="#cb288-2"></a>hash.merge!({<span class="st">:item2</span> =&gt; <span class="dv">2</span>})</span>
<span id="cb288-3"><a href="#cb288-3"></a><span class="co"># now hash == {:item1=&gt;1, :item2=&gt;2}</span></span></code></pre></div>
</section>
<section id="answer-3-score-27" class="level4">
<h4>Answer 3 (score 27)</h4>
<p><strong>hash.store(key, value)</strong> - Stores a key-value pair in hash.</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb289"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb289-1"><a href="#cb289-1"></a>hash   <span class="co">#=&gt; {&quot;a&quot;=&gt;9, &quot;b&quot;=&gt;200, &quot;c&quot;=&gt;4}</span></span>
<span id="cb289-2"><a href="#cb289-2"></a>hash.store(<span class="st">&quot;d&quot;</span>, <span class="dv">42</span>) <span class="co">#=&gt; 42</span></span>
<span id="cb289-3"><a href="#cb289-3"></a>hash   <span class="co">#=&gt; {&quot;a&quot;=&gt;9, &quot;b&quot;=&gt;200, &quot;c&quot;=&gt;4, &quot;d&quot;=&gt;42}</span></span></code></pre></div>
<p><kbd><a href="http://ruby-doc.org/core-2.3.0/Hash.html#method-i-store" rel="noreferrer">Documentation</a></kbd></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-pretty-format-my-json-output-in-ruby-on-rails-score-271430-in-2016" class="level3">
<h3>55: How can I “pretty” format my JSON output in Ruby on Rails? (score <a href="https://stackoverflow.com/q/86653.html">271430</a> in 2016)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>I would like my JSON output in Ruby on Rails to be “pretty” or nicely formatted.</p>
<p>Right now, I call <code>to_json</code> and my JSON is all on one line. At times this can be difficult to see if there is a problem in the JSON output stream.</p>
<p>Is there way to configure or a method to make my JSON “pretty” or nicely formatted in Rails?</p>
</section>
<section id="answer-accepted-score-938" class="level4">
<h4>Answer accepted (score 938)</h4>
<p>Use the <code>pretty_generate()</code> function, built into later versions of JSON. For example:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb290-1"><a href="#cb290-1"></a>require <span class="st">&#39;json&#39;</span></span>
<span id="cb290-2"><a href="#cb290-2"></a>my_object = { <span class="st">:array</span> =&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, { <span class="st">:sample</span> =&gt; <span class="st">&quot;hash&quot;</span>} ], <span class="st">:foo</span> =&gt; <span class="st">&quot;bar&quot;</span> }</span>
<span id="cb290-3"><a href="#cb290-3"></a>puts <span class="dt">JSON</span>.pretty_generate(my_object)</span></code></pre></div>
<p>Which gets you:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb291-1"><a href="#cb291-1"></a>{</span>
<span id="cb291-2"><a href="#cb291-2"></a>  <span class="st">&quot;array&quot;</span>: [</span>
<span id="cb291-3"><a href="#cb291-3"></a>    <span class="dv">1</span>,</span>
<span id="cb291-4"><a href="#cb291-4"></a>    <span class="dv">2</span>,</span>
<span id="cb291-5"><a href="#cb291-5"></a>    <span class="dv">3</span>,</span>
<span id="cb291-6"><a href="#cb291-6"></a>    {</span>
<span id="cb291-7"><a href="#cb291-7"></a>      <span class="st">&quot;sample&quot;</span>: <span class="st">&quot;hash&quot;</span></span>
<span id="cb291-8"><a href="#cb291-8"></a>    }</span>
<span id="cb291-9"><a href="#cb291-9"></a>  ],</span>
<span id="cb291-10"><a href="#cb291-10"></a>  <span class="st">&quot;foo&quot;</span>: <span class="st">&quot;bar&quot;</span></span>
<span id="cb291-11"><a href="#cb291-11"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-72" class="level4">
<h4>Answer 2 (score 72)</h4>
<p>Thanks to Rack Middleware and Rails 3 you can output pretty JSON for every request without changing any controller of your app. I have written such middleware snippet and I get nicely printed JSON in browser and <code>curl</code> output.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb292-1"><a href="#cb292-1"></a><span class="kw">class</span> <span class="dt">PrettyJsonResponse</span></span>
<span id="cb292-2"><a href="#cb292-2"></a>  <span class="kw">def</span> initialize(app)</span>
<span id="cb292-3"><a href="#cb292-3"></a>    <span class="ot">@app</span> = app</span>
<span id="cb292-4"><a href="#cb292-4"></a>  <span class="kw">end</span></span>
<span id="cb292-5"><a href="#cb292-5"></a></span>
<span id="cb292-6"><a href="#cb292-6"></a>  <span class="kw">def</span> call(env)</span>
<span id="cb292-7"><a href="#cb292-7"></a>    status, headers, response = <span class="ot">@app</span>.call(env)</span>
<span id="cb292-8"><a href="#cb292-8"></a>    <span class="kw">if</span> headers[<span class="st">&quot;Content-Type&quot;</span>] =~ <span class="ot">/^application\/json/</span></span>
<span id="cb292-9"><a href="#cb292-9"></a>      obj = <span class="dt">JSON</span>.parse(response.body)</span>
<span id="cb292-10"><a href="#cb292-10"></a>      pretty_str = <span class="dt">JSON</span>.pretty_unparse(obj)</span>
<span id="cb292-11"><a href="#cb292-11"></a>      response = [pretty_str]</span>
<span id="cb292-12"><a href="#cb292-12"></a>      headers[<span class="st">&quot;Content-Length&quot;</span>] = pretty_str.bytesize.to_s</span>
<span id="cb292-13"><a href="#cb292-13"></a>    <span class="kw">end</span></span>
<span id="cb292-14"><a href="#cb292-14"></a>    [status, headers, response]</span>
<span id="cb292-15"><a href="#cb292-15"></a>  <span class="kw">end</span></span>
<span id="cb292-16"><a href="#cb292-16"></a><span class="kw">end</span></span></code></pre></div>
<p>
The above code should be placed in <code>app/middleware/pretty_json_response.rb</code> of your Rails project. And the final step is to register the middleware in <code>config/environments/development.rb</code>:
</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb293-1"><a href="#cb293-1"></a>config.middleware.use <span class="dt">PrettyJsonResponse</span></span></code></pre></div>
<p><strong>I don’t recommend to use it in <code>production.rb</code></strong>. The JSON reparsing may degrade response time and throughput of your production app. Eventually extra logic such as ‘X-Pretty-Json: true’ header may be introduced to trigger formatting for manual curl requests on demand.</p>
<p>(Tested with Rails 3.2.8-5.0.0, Ruby 1.9.3-2.2.0, Linux)</p>
</section>
<section id="answer-3-score-66" class="level4">
<h4>Answer 3 (score 66)</h4>
<p>The <code>&amp;lt;pre&amp;gt;</code> tag in HTML, used with <code>JSON.pretty_generate</code>, will render the JSON pretty in your view. I was so happy when my illustrious boss showed me this:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb294-1"><a href="#cb294-1"></a>&lt;% <span class="kw">if</span> <span class="ot">@data</span>.present? <span class="ot">%&gt;</span></span>
<span id="cb294-2"><a href="#cb294-2"></a><span class="st">   &lt;pre</span><span class="ot">&gt;</span>&lt;%= <span class="dt">JSON</span>.pretty_generate(<span class="ot">@data</span>) %&gt;&lt;<span class="ot">/pre&gt;</span></span>
<span id="cb294-3"><a href="#cb294-3"></a><span class="ot">&lt;% end %&gt;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-a-ruby-hash-object-to-json-score-265343-in-2016" class="level3">
<h3>56: How to convert a ruby hash object to JSON? (score <a href="https://stackoverflow.com/q/3183786.html">265343</a> in 2016)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<p>How to convert a ruby hash object to JSON? So I am trying this example below &amp; it doesn’t work?</p>
<p>I was looking at the RubyDoc and obviously <code>Hash</code> object doesn’t have a <code>to_json</code> method. But I am reading on blogs that Rails supports <code>active_record.to_json</code> and also supports <code>hash#to_json</code>. I can understand <code>ActiveRecord</code> is a Rails object, but <code>Hash</code> is not native to Rails, it’s a pure Ruby object. So in Rails you can do a <code>hash.to_json</code>, but not in pure Ruby??</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb295-1"><a href="#cb295-1"></a>car = {<span class="st">:make</span> =&gt; <span class="st">&quot;bmw&quot;</span>, <span class="st">:year</span> =&gt; <span class="st">&quot;2003&quot;</span>}</span>
<span id="cb295-2"><a href="#cb295-2"></a>car.to_json</span></code></pre></div>
</section>
<section id="answer-accepted-score-533" class="level4">
<h4>Answer accepted (score 533)</h4>
<p>One of the numerous niceties of Ruby is the possibility to extend existing classes with your own methods. That’s called “class reopening” or monkey-patching (the meaning of the latter <a href="https://stackoverflow.com/questions/394144/what-does-monkey-patching-exactly-mean-in-ruby">can vary</a>, though).</p>
<p>So, take a look here:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb296-1"><a href="#cb296-1"></a>car = {<span class="st">:make</span> =&gt; <span class="st">&quot;bmw&quot;</span>, <span class="st">:year</span> =&gt; <span class="st">&quot;2003&quot;</span>}</span>
<span id="cb296-2"><a href="#cb296-2"></a><span class="co"># =&gt; {:make=&gt;&quot;bmw&quot;, :year=&gt;&quot;2003&quot;}</span></span>
<span id="cb296-3"><a href="#cb296-3"></a>car.to_json</span>
<span id="cb296-4"><a href="#cb296-4"></a><span class="co"># NoMethodError: undefined method `to_json&#39; for {:make=&gt;&quot;bmw&quot;, :year=&gt;&quot;2003&quot;}:Hash</span></span>
<span id="cb296-5"><a href="#cb296-5"></a><span class="co">#   from (irb):11</span></span>
<span id="cb296-6"><a href="#cb296-6"></a><span class="co">#   from /usr/bin/irb:12:in `&lt;main&gt;&#39;</span></span>
<span id="cb296-7"><a href="#cb296-7"></a>require <span class="st">&#39;json&#39;</span></span>
<span id="cb296-8"><a href="#cb296-8"></a><span class="co"># =&gt; true</span></span>
<span id="cb296-9"><a href="#cb296-9"></a>car.to_json</span>
<span id="cb296-10"><a href="#cb296-10"></a><span class="co"># =&gt; &quot;{&quot;make&quot;:&quot;bmw&quot;,&quot;year&quot;:&quot;2003&quot;}&quot;</span></span></code></pre></div>
<p>As you can see, requiring <code>json</code> has magically brought method <code>to_json</code> to our <code>Hash</code>.</p>
</section>
<section id="answer-2-score-17" class="level4">
<h4>Answer 2 (score 17)</h4>
<div class="sourceCode" id="cb297"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb297-1"><a href="#cb297-1"></a>require <span class="st">&#39;json/ext&#39;</span> <span class="co"># to use the C based extension instead of json/pure</span></span>
<span id="cb297-2"><a href="#cb297-2"></a></span>
<span id="cb297-3"><a href="#cb297-3"></a>puts {<span class="st">hash: </span><span class="dv">123</span>}.to_json</span></code></pre></div>
</section>
<section id="answer-3-score-1" class="level4">
<h4>Answer 3 (score 1)</h4>
<p>You can also use <code>JSON.generate</code>:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb298-1"><a href="#cb298-1"></a>require <span class="st">&#39;json&#39;</span></span>
<span id="cb298-2"><a href="#cb298-2"></a></span>
<span id="cb298-3"><a href="#cb298-3"></a><span class="dt">JSON</span>.generate({ <span class="st">foo: &quot;bar&quot;</span> })</span>
<span id="cb298-4"><a href="#cb298-4"></a>=&gt; <span class="st">&quot;{\&quot;foo\&quot;:\&quot;bar\&quot;}&quot;</span></span></code></pre></div>
<p>Or its alias, <code>JSON.unparse</code>:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb299-1"><a href="#cb299-1"></a>require <span class="st">&#39;json&#39;</span></span>
<span id="cb299-2"><a href="#cb299-2"></a></span>
<span id="cb299-3"><a href="#cb299-3"></a><span class="dt">JSON</span>.unparse({ <span class="st">foo: &quot;bar&quot;</span> })</span>
<span id="cb299-4"><a href="#cb299-4"></a>=&gt; <span class="st">&quot;{\&quot;foo\&quot;:\&quot;bar\&quot;}&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="could-not-locate-gemfile-score-262557-in" class="level3">
<h3>57: Could not locate Gemfile (score <a href="https://stackoverflow.com/q/3329953.html">262557</a> in )</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>I’m certainly no Ruby developer but I have an application on my server using Ruby, Gems, and Bundler. I am trying to install another Ruby on under a different user account but on the same VPS. When I go to run</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb300-1"><a href="#cb300-1"></a>bundle install</span></code></pre></div>
<p>I get the following error:</p>
<blockquote>
Could not locate Gemfile
</blockquote>
<p>I could remove the contents of the ./bundle directory so that all Gems are re-fetched to clear the error but will this have an impact on my other application using the same Gems and Bundler? I don’t want to risk taking the other app down.</p>
</section>
<section id="answer-accepted-score-157" class="level4">
<h4>Answer accepted (score 157)</h4>
<p>
You do not have <code>Gemfile</code> in a directory where you run that command. <code>Gemfile</code> is a file containing your <code>gem</code> settings for a <em>current</em> program.
</p>
</section>
<section id="answer-2-score-77" class="level4">
<h4>Answer 2 (score 77)</h4>
<p>Make sure you are in the project directory before running <code>bundle install</code>. For example, after running <code>rails new myproject</code>, you will want to <code>cd myproject</code> before running <code>bundle install</code>.</p>
</section>
<section id="answer-3-score-6-1" class="level4">
<h4>Answer 3 (score 6)</h4>
<p>I had the same problem and got it solved by using a different directory.</p>
<pre>
bash-4.2$ bundle install
Could not locate Gemfile
bash-4.2$ pwd
/home/amit/redmine/redmine-2.2.2-0/apps/redmine
bash-4.2$ cd htdocs/
bash-4.2$ ls
app  config db   extra  Gemfile   lib  plugins  Rakefile     script  tmp
bin  config.ru  doc  files  Gemfile.lock  log  public   README.rdoc  test    vendor
bash-4.2$ cd plugins/
bash-4.2$ bundle install
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.6) 
Using activesupport (3.2.11) 
Using builder (3.0.0) 
Using activemodel (3.2.11) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.1) 
Using actionpack (3.2.11) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.11) 
Using activeresource (3.2.11) 
Using coderay (1.0.6) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.15.4) 
Using railties (3.2.11) 
Using jquery-rails (2.0.3) 
Using mysql2 (0.3.11) 
Using net-ldap (0.3.1) 
Using ruby-openid (2.1.8) 
Using rack-openid (1.3.1) 
Using bundler (1.2.3) 
Using rails (3.2.11) 
Using rmagick (2.13.1) 
Your bundle i
</pre>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="uninstall-old-versions-of-ruby-gems-score-255332-in-2015" class="level3">
<h3>58: Uninstall old versions of Ruby gems (score <a href="https://stackoverflow.com/q/5902488.html">255332</a> in 2015)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>I have several versions of a Ruby gem:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb301-1"><a href="#cb301-1"></a>$ gem list</span>
<span id="cb301-2"><a href="#cb301-2"></a>rjb (<span class="fl">1.3</span>.<span class="dv">4</span>, <span class="fl">1.3</span>.<span class="dv">3</span>, <span class="fl">1.1</span>.<span class="dv">9</span>)</span></code></pre></div>
<p>How can I remove old versions but keep the most recent?</p>
</section>
<section id="answer-accepted-score-616" class="level4">
<h4>Answer accepted (score 616)</h4>
<div class="sourceCode" id="cb302"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb302-1"><a href="#cb302-1"></a><span class="co"># remove all old versions of the gem</span></span>
<span id="cb302-2"><a href="#cb302-2"></a>gem cleanup rjb</span>
<span id="cb302-3"><a href="#cb302-3"></a></span>
<span id="cb302-4"><a href="#cb302-4"></a><span class="co"># choose which ones you want to remove</span></span>
<span id="cb302-5"><a href="#cb302-5"></a>gem uninstall rjb</span>
<span id="cb302-6"><a href="#cb302-6"></a></span>
<span id="cb302-7"><a href="#cb302-7"></a><span class="co"># remove version 1.1.9 only</span></span>
<span id="cb302-8"><a href="#cb302-8"></a>gem uninstall rjb --version <span class="fl">1.1</span>.<span class="dv">9</span></span>
<span id="cb302-9"><a href="#cb302-9"></a></span>
<span id="cb302-10"><a href="#cb302-10"></a><span class="co"># remove all versions less than 1.3.4</span></span>
<span id="cb302-11"><a href="#cb302-11"></a>gem uninstall rjb --version <span class="st">&#39;&lt;1.3.4&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-248" class="level4">
<h4>Answer 2 (score 248)</h4>
<p>For removing older versions of <em>all</em> installed gems, following 2 commands are useful:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb303-1"><a href="#cb303-1"></a> gem cleanup --dryrun</span></code></pre></div>
<p>
Above command will preview what gems are going to be removed. <br><br>
</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb304-1"><a href="#cb304-1"></a> gem cleanup</span></code></pre></div>
<p>Above command will actually remove them.</p>
</section>
<section id="answer-3-score-12" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>Try something like <code>gem uninstall rjb --version 1.3.4</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="pass-variables-to-ruby-script-via-command-line-score-250980-in-2014" class="level3">
<h3>59: Pass variables to Ruby script via command line (score <a href="https://stackoverflow.com/q/4244611.html">250980</a> in 2014)</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>I’ve installed RubyInstaller on Windows and I’m running <a href="http://wonko.com/post/ruby_script_to_sync_email_from_any_imap_server_to_gmail" rel="noreferrer">IMAP Sync</a> but I need to use it to sync hundreds of accounts. If I could pass these variables to it via command line I could automate the whole process better.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb305-1"><a href="#cb305-1"></a><span class="co"># Source server connection info.</span></span>
<span id="cb305-2"><a href="#cb305-2"></a><span class="dt">SOURCE_NAME</span> = <span class="st">&#39;username@example.com&#39;</span></span>
<span id="cb305-3"><a href="#cb305-3"></a><span class="dt">SOURCE_HOST</span> = <span class="st">&#39;mail.example.com&#39;</span></span>
<span id="cb305-4"><a href="#cb305-4"></a><span class="dt">SOURCE_PORT</span> = <span class="dv">143</span></span>
<span id="cb305-5"><a href="#cb305-5"></a><span class="dt">SOURCE_SSL</span>  = <span class="dv">false</span></span>
<span id="cb305-6"><a href="#cb305-6"></a><span class="dt">SOURCE_USER</span> = <span class="st">&#39;username&#39;</span></span>
<span id="cb305-7"><a href="#cb305-7"></a><span class="dt">SOURCE_PASS</span> = <span class="st">&#39;password&#39;</span></span>
<span id="cb305-8"><a href="#cb305-8"></a></span>
<span id="cb305-9"><a href="#cb305-9"></a><span class="co"># Destination server connection info.</span></span>
<span id="cb305-10"><a href="#cb305-10"></a><span class="dt">DEST_NAME</span> = <span class="st">&#39;username@gmail.com&#39;</span></span>
<span id="cb305-11"><a href="#cb305-11"></a><span class="dt">DEST_HOST</span> = <span class="st">&#39;imap.gmail.com&#39;</span></span>
<span id="cb305-12"><a href="#cb305-12"></a><span class="dt">DEST_PORT</span> = <span class="dv">993</span></span>
<span id="cb305-13"><a href="#cb305-13"></a><span class="dt">DEST_SSL</span>  = <span class="dv">true</span></span>
<span id="cb305-14"><a href="#cb305-14"></a><span class="dt">DEST_USER</span> = <span class="st">&#39;username@gmail.com&#39;</span></span>
<span id="cb305-15"><a href="#cb305-15"></a><span class="dt">DEST_PASS</span> = <span class="st">&#39;password&#39;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-446-1" class="level4">
<h4>Answer accepted (score 446)</h4>
<p>Something like this:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb306-1"><a href="#cb306-1"></a><span class="dt">ARGV</span>.each <span class="kw">do</span>|a|</span>
<span id="cb306-2"><a href="#cb306-2"></a>  puts <span class="st">&quot;Argument: </span><span class="ot">#{</span>a<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb306-3"><a href="#cb306-3"></a><span class="kw">end</span></span></code></pre></div>
<p>then</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb307-1"><a href="#cb307-1"></a>$ .<span class="ot">/test.rb &quot;test1 test2&quot;</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb308-1"><a href="#cb308-1"></a>v1 = <span class="dt">ARGV</span>[<span class="dv">0</span>]</span>
<span id="cb308-2"><a href="#cb308-2"></a>v2 = <span class="dt">ARGV</span>[<span class="dv">1</span>]</span>
<span id="cb308-3"><a href="#cb308-3"></a>puts v1       <span class="co">#prints test1</span></span>
<span id="cb308-4"><a href="#cb308-4"></a>puts v2       <span class="co">#prints test2</span></span></code></pre></div>
</section>
<section id="answer-2-score-186" class="level4">
<h4>Answer 2 (score 186)</h4>
<p>Don’t reinvent the wheel; check out Ruby’s way-cool <a href="http://ruby-doc.org/stdlib/libdoc/optparse/rdoc/OptionParser.html">OptionParser</a> library.</p>
<p>It offers parsing of flags/switches, parameters with optional or required values, can parse lists of parameters into a single option and can generate your help for you.</p>
<p>Also, if any of your information being passed in is pretty static, that doesn’t change between runs, put it into a YAML file that gets parsed. That way you can have things that change every time on the command-line, and things that change occasionally configured outside your code. That separation of data and code is nice for maintenance.</p>
<p>Here are some samples to play with:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb309-1"><a href="#cb309-1"></a>require <span class="st">&#39;optparse&#39;</span></span>
<span id="cb309-2"><a href="#cb309-2"></a>require <span class="st">&#39;yaml&#39;</span></span>
<span id="cb309-3"><a href="#cb309-3"></a></span>
<span id="cb309-4"><a href="#cb309-4"></a>options = {}</span>
<span id="cb309-5"><a href="#cb309-5"></a><span class="dt">OptionParser</span>.new <span class="kw">do</span> |opts|</span>
<span id="cb309-6"><a href="#cb309-6"></a>  opts.banner = <span class="st">&quot;Usage: example.rb [options]&quot;</span></span>
<span id="cb309-7"><a href="#cb309-7"></a></span>
<span id="cb309-8"><a href="#cb309-8"></a>  opts.on(<span class="st">&#39;-n&#39;</span>, <span class="st">&#39;--sourcename NAME&#39;</span>, <span class="st">&#39;Source name&#39;</span>) { |v| options[<span class="st">:source_name</span>] = v }</span>
<span id="cb309-9"><a href="#cb309-9"></a>  opts.on(<span class="st">&#39;-h&#39;</span>, <span class="st">&#39;--sourcehost HOST&#39;</span>, <span class="st">&#39;Source host&#39;</span>) { |v| options[<span class="st">:source_host</span>] = v }</span>
<span id="cb309-10"><a href="#cb309-10"></a>  opts.on(<span class="st">&#39;-p&#39;</span>, <span class="st">&#39;--sourceport PORT&#39;</span>, <span class="st">&#39;Source port&#39;</span>) { |v| options[<span class="st">:source_port</span>] = v }</span>
<span id="cb309-11"><a href="#cb309-11"></a></span>
<span id="cb309-12"><a href="#cb309-12"></a><span class="kw">end</span>.parse!</span>
<span id="cb309-13"><a href="#cb309-13"></a></span>
<span id="cb309-14"><a href="#cb309-14"></a>dest_options = <span class="dt">YAML</span>.load_file(<span class="st">&#39;destination_config.yaml&#39;</span>)</span>
<span id="cb309-15"><a href="#cb309-15"></a>puts dest_options[<span class="st">&#39;dest_name&#39;</span>]</span></code></pre></div>
<p>This is a sample YAML file if your destinations are pretty static:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb310-1"><a href="#cb310-1"></a>--- </span>
<span id="cb310-2"><a href="#cb310-2"></a><span class="st">dest_name: </span>username<span class="ot">@gmail</span>.com</span>
<span id="cb310-3"><a href="#cb310-3"></a><span class="st">dest_host: </span>imap.gmail.com</span>
<span id="cb310-4"><a href="#cb310-4"></a><span class="st">dest_port: </span><span class="dv">993</span></span>
<span id="cb310-5"><a href="#cb310-5"></a><span class="st">dest_ssl: </span><span class="dv">true</span></span>
<span id="cb310-6"><a href="#cb310-6"></a><span class="st">dest_user: </span>username<span class="ot">@gmail</span>.com</span>
<span id="cb310-7"><a href="#cb310-7"></a><span class="st">dest_pass: </span>password</span></code></pre></div>
<p>This will let you easily generate a YAML file:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb311-1"><a href="#cb311-1"></a>require <span class="st">&#39;yaml&#39;</span></span>
<span id="cb311-2"><a href="#cb311-2"></a></span>
<span id="cb311-3"><a href="#cb311-3"></a>yaml = {</span>
<span id="cb311-4"><a href="#cb311-4"></a>  <span class="st">&#39;dest_name&#39;</span> =&gt; <span class="st">&#39;username@gmail.com&#39;</span>,</span>
<span id="cb311-5"><a href="#cb311-5"></a>  <span class="st">&#39;dest_host&#39;</span> =&gt; <span class="st">&#39;imap.gmail.com&#39;</span>,</span>
<span id="cb311-6"><a href="#cb311-6"></a>  <span class="st">&#39;dest_port&#39;</span> =&gt; <span class="dv">993</span>,</span>
<span id="cb311-7"><a href="#cb311-7"></a>  <span class="st">&#39;dest_ssl&#39;</span>  =&gt; <span class="dv">true</span>,</span>
<span id="cb311-8"><a href="#cb311-8"></a>  <span class="st">&#39;dest_user&#39;</span> =&gt; <span class="st">&#39;username@gmail.com&#39;</span>,</span>
<span id="cb311-9"><a href="#cb311-9"></a>  <span class="st">&#39;dest_pass&#39;</span> =&gt; <span class="st">&#39;password&#39;</span></span>
<span id="cb311-10"><a href="#cb311-10"></a>}</span>
<span id="cb311-11"><a href="#cb311-11"></a></span>
<span id="cb311-12"><a href="#cb311-12"></a>puts <span class="dt">YAML</span>.dump(yaml)</span></code></pre></div>
</section>
<section id="answer-3-score-26-2" class="level4">
<h4>Answer 3 (score 26)</h4>
<p>Unfortunately, Ruby does not support such passing mechanism as e.g. AWK:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb312-1"><a href="#cb312-1"></a>&gt; awk -v a=<span class="dv">1</span> <span class="st">&#39;BEGIN {print a}&#39;</span></span>
<span id="cb312-2"><a href="#cb312-2"></a>&gt; <span class="dv">1</span></span></code></pre></div>
<p>It means you cannot pass named values into your script directly.</p>
<p>Using cmd options may help:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb313-1"><a href="#cb313-1"></a>&gt; ruby script.rb val_0 val_1 val_2</span>
<span id="cb313-2"><a href="#cb313-2"></a></span>
<span id="cb313-3"><a href="#cb313-3"></a><span class="co"># script.rb</span></span>
<span id="cb313-4"><a href="#cb313-4"></a>puts <span class="dt">ARGV</span>[<span class="dv">0</span>] <span class="co"># =&gt; val_0</span></span>
<span id="cb313-5"><a href="#cb313-5"></a>puts <span class="dt">ARGV</span>[<span class="dv">1</span>] <span class="co"># =&gt; val_1</span></span>
<span id="cb313-6"><a href="#cb313-6"></a>puts <span class="dt">ARGV</span>[<span class="dv">2</span>] <span class="co"># =&gt; val_2</span></span></code></pre></div>
<p>Ruby stores all cmd arguments in the <code>ARGV</code> array, the scriptname itself can be captured using the <code>$PROGRAM_NAME</code> variable.</p>
<p>The obvious disadvantage is that you depend on the order of values.</p>
<p>If you need only Boolean switches use the option <code>-s</code> of the Ruby interpreter:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb314-1"><a href="#cb314-1"></a>&gt; ruby -s -e <span class="st">&#39;puts &quot;So do I!&quot; if $agreed&#39;</span> -- -agreed</span>
<span id="cb314-2"><a href="#cb314-2"></a>&gt; <span class="dt">So</span> <span class="kw">do</span> I!</span></code></pre></div>
<p>Please note the <code>--</code> switch, otherwise Ruby will complain about a nonexistent option <code>-agreed</code>, so pass it as a switch to your cmd invokation. You don’t need it in the following case:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb315-1"><a href="#cb315-1"></a>&gt; ruby -s script_with_switches.rb -agreed</span>
<span id="cb315-2"><a href="#cb315-2"></a>&gt; <span class="dt">So</span> <span class="kw">do</span> I!</span></code></pre></div>
<p>The disadvantage is that you mess with global variables and have only logical true/false values.</p>
<p>You can access values from environment variables:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb316-1"><a href="#cb316-1"></a>&gt; <span class="dt">FIRST_NAME</span>=<span class="st">&#39;Andy Warhol&#39;</span> ruby -e <span class="st">&#39;puts ENV[&quot;FIRST_NAME&quot;]&#39;</span></span>
<span id="cb316-2"><a href="#cb316-2"></a>&gt; <span class="dt">Andy</span> <span class="dt">Warhol</span></span></code></pre></div>
<p>Drawbacks are present here to, you have to set all the variables before the script invocation (only for your ruby process) or to export them (shells like BASH):</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb317-1"><a href="#cb317-1"></a>&gt; export <span class="dt">FIRST_NAME</span>=<span class="st">&#39;Andy Warhol&#39;</span></span>
<span id="cb317-2"><a href="#cb317-2"></a>&gt; ruby -e <span class="st">&#39;puts ENV[&quot;FIRST_NAME&quot;]&#39;</span></span></code></pre></div>
<p>In the latter case, your data will be readable for everybody in the same shell session and for all subprocesses, which can be a serious security implication.</p>
<p>And at least you can implement an option parser using <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/getoptlong/rdoc/index.html">getoptlong</a> and <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/index.html">optparse</a>.</p>
<p>Happy hacking!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-there-a-do-while-loop-in-ruby-score-249266-in" class="level3">
<h3>60: Is there a “do … while” loop in Ruby? (score <a href="https://stackoverflow.com/q/136793.html">249266</a> in )</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<p>I’m using this code to let the user enter in names while the program stores them in an array until they enter an empty string (they must press enter after each name):</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb318-1"><a href="#cb318-1"></a>people = []</span>
<span id="cb318-2"><a href="#cb318-2"></a>info = <span class="ch">&#39;a&#39;</span> <span class="co"># must fill variable with something, otherwise loop won&#39;t execute</span></span>
<span id="cb318-3"><a href="#cb318-3"></a></span>
<span id="cb318-4"><a href="#cb318-4"></a><span class="kw">while</span> <span class="kw">not</span> info.empty?</span>
<span id="cb318-5"><a href="#cb318-5"></a>    info = gets.chomp</span>
<span id="cb318-6"><a href="#cb318-6"></a>    people += [<span class="dt">Person</span>.new(info)] <span class="kw">if</span> <span class="kw">not</span> info.empty?</span>
<span id="cb318-7"><a href="#cb318-7"></a><span class="kw">end</span></span></code></pre></div>
<p>This code would look much nicer in a do … while loop:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb319-1"><a href="#cb319-1"></a>people = []</span>
<span id="cb319-2"><a href="#cb319-2"></a></span>
<span id="cb319-3"><a href="#cb319-3"></a><span class="kw">do</span></span>
<span id="cb319-4"><a href="#cb319-4"></a>    info = gets.chomp</span>
<span id="cb319-5"><a href="#cb319-5"></a>    people += [<span class="dt">Person</span>.new(info)] <span class="kw">if</span> <span class="kw">not</span> info.empty?</span>
<span id="cb319-6"><a href="#cb319-6"></a><span class="kw">while</span> <span class="kw">not</span> info.empty?</span></code></pre></div>
<p>In this code I don’t have to assign info to some random string.</p>
<p>Unfortunately this type of loop doesn’t seem to exist in Ruby. Can anybody suggest a better way of doing this?</p>
</section>
<section id="answer-accepted-score-629" class="level4">
<h4>Answer accepted (score 629)</h4>
<p><strong>CAUTION</strong>:</p>
<p>The <code>begin &amp;lt;code&amp;gt; end while &amp;lt;condition&amp;gt;</code> is rejected by Ruby’s author Matz. Instead he suggests using <code>Kernel#loop</code>, e.g. </p>
<div class="sourceCode" id="cb320"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb320-1"><a href="#cb320-1"></a>loop <span class="kw">do</span> </span>
<span id="cb320-2"><a href="#cb320-2"></a>  <span class="co"># some code here</span></span>
<span id="cb320-3"><a href="#cb320-3"></a>  <span class="kw">break</span> <span class="kw">if</span> &lt;condition&gt;</span>
<span id="cb320-4"><a href="#cb320-4"></a><span class="kw">end</span> </span></code></pre></div>
<p>Here’s <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/6745" rel="noreferrer">an email exchange</a> in 23 Nov 2005 where Matz states:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb321-1"><a href="#cb321-1"></a>|&gt; <span class="dt">Don</span><span class="st">&#39;t use it please.  I&#39;</span>m regretting this feature, <span class="kw">and</span> I<span class="st">&#39;d like to</span></span>
<span id="cb321-2"><a href="#cb321-2"></a><span class="st">|&gt; remove it in the future if it&#39;</span>s possible.</span>
<span id="cb321-3"><a href="#cb321-3"></a>|</span>
<span id="cb321-4"><a href="#cb321-4"></a>|I<span class="st">&#39;m surprised.  What do you regret about it?</span></span>
<span id="cb321-5"><a href="#cb321-5"></a></span>
<span id="cb321-6"><a href="#cb321-6"></a><span class="st">Because it&#39;</span>s hard <span class="kw">for</span> users to tell</span>
<span id="cb321-7"><a href="#cb321-7"></a></span>
<span id="cb321-8"><a href="#cb321-8"></a>  <span class="kw">begin</span> &lt;code&gt; <span class="kw">end</span> <span class="kw">while</span> &lt;cond&gt;</span>
<span id="cb321-9"><a href="#cb321-9"></a></span>
<span id="cb321-10"><a href="#cb321-10"></a>works differently from</span>
<span id="cb321-11"><a href="#cb321-11"></a></span>
<span id="cb321-12"><a href="#cb321-12"></a>  &lt;code&gt; <span class="kw">while</span> &lt;cond&gt;</span></code></pre></div>
<p><a href="http://rosettacode.org/wiki/Loops/Do-while#Ruby" rel="noreferrer">RosettaCode wiki</a> has a similar story:</p>
<blockquote>
During November 2005, Yukihiro Matsumoto, the creator of Ruby, regretted this loop feature and suggested using Kernel#loop.
</blockquote>
</section>
<section id="answer-2-score-188" class="level4">
<h4>Answer 2 (score 188)</h4>
<blockquote>
<p>I found the following snippet while reading the source for <code>Tempfile#initialize</code> in the Ruby core library:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb322-1"><a href="#cb322-1"></a><span class="kw">begin</span></span>
<span id="cb322-2"><a href="#cb322-2"></a>  tmpname = <span class="dt">File</span>.join(tmpdir, make_tmpname(basename, n))</span>
<span id="cb322-3"><a href="#cb322-3"></a>  lock = tmpname + <span class="st">&#39;.lock&#39;</span></span>
<span id="cb322-4"><a href="#cb322-4"></a>  n += <span class="dv">1</span></span>
<span id="cb322-5"><a href="#cb322-5"></a><span class="kw">end</span> <span class="kw">while</span> <span class="ot">@@cleanlist</span>.include?(tmpname) <span class="kw">or</span></span>
<span id="cb322-6"><a href="#cb322-6"></a>  <span class="dt">File</span>.exist?(lock) <span class="kw">or</span> <span class="dt">File</span>.exist?(tmpname)</span></code></pre></div>
<p>At first glance, I assumed the while modifier would be evaluated before the contents of begin…end, but that is not the case. Observe:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb323-1"><a href="#cb323-1"></a>&gt;&gt; <span class="kw">begin</span></span>
<span id="cb323-2"><a href="#cb323-2"></a>?&gt;   puts <span class="st">&quot;do {} while ()&quot;</span> </span>
<span id="cb323-3"><a href="#cb323-3"></a>&gt;&gt; <span class="kw">end</span> <span class="kw">while</span> <span class="dv">false</span></span>
<span id="cb323-4"><a href="#cb323-4"></a><span class="kw">do</span> {} <span class="kw">while</span> ()</span>
<span id="cb323-5"><a href="#cb323-5"></a>=&gt; <span class="dv">nil</span></span></code></pre></div>
<p>As you would expect, the loop will continue to execute while the modifier is true.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb324-1"><a href="#cb324-1"></a>&gt;&gt; n = <span class="dv">3</span></span>
<span id="cb324-2"><a href="#cb324-2"></a>=&gt; <span class="dv">3</span></span>
<span id="cb324-3"><a href="#cb324-3"></a>&gt;&gt; <span class="kw">begin</span></span>
<span id="cb324-4"><a href="#cb324-4"></a>?&gt;   puts n</span>
<span id="cb324-5"><a href="#cb324-5"></a>&gt;&gt;   n -= <span class="dv">1</span></span>
<span id="cb324-6"><a href="#cb324-6"></a>&gt;&gt; <span class="kw">end</span> <span class="kw">while</span> n &gt; <span class="dv">0</span></span>
<span id="cb324-7"><a href="#cb324-7"></a><span class="dv">3</span></span>
<span id="cb324-8"><a href="#cb324-8"></a><span class="dv">2</span></span>
<span id="cb324-9"><a href="#cb324-9"></a><span class="dv">1</span></span>
<span id="cb324-10"><a href="#cb324-10"></a>=&gt; <span class="dv">nil</span></span></code></pre></div>
<p>While I would be happy to never see this idiom again, begin…end is quite powerful. The following is a common idiom to memoize a one-liner method with no params:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb325-1"><a href="#cb325-1"></a><span class="kw">def</span> expensive</span>
<span id="cb325-2"><a href="#cb325-2"></a>  <span class="ot">@expensive</span> ||= <span class="dv">2</span> + <span class="dv">2</span></span>
<span id="cb325-3"><a href="#cb325-3"></a><span class="kw">end</span></span></code></pre></div>
<p>Here is an ugly, but quick way to memoize something more complex:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb326-1"><a href="#cb326-1"></a><span class="kw">def</span> expensive</span>
<span id="cb326-2"><a href="#cb326-2"></a>  <span class="ot">@expensive</span> ||=</span>
<span id="cb326-3"><a href="#cb326-3"></a>    <span class="kw">begin</span></span>
<span id="cb326-4"><a href="#cb326-4"></a>      n = <span class="dv">99</span></span>
<span id="cb326-5"><a href="#cb326-5"></a>      buf = <span class="st">&quot;&quot;</span> </span>
<span id="cb326-6"><a href="#cb326-6"></a>      <span class="kw">begin</span></span>
<span id="cb326-7"><a href="#cb326-7"></a>        buf &lt;&lt; <span class="st">&quot;</span><span class="ot">#{</span>n<span class="ot">}</span><span class="st"> bottles of beer on the wall\n&quot;</span> </span>
<span id="cb326-8"><a href="#cb326-8"></a>        <span class="co"># ...</span></span>
<span id="cb326-9"><a href="#cb326-9"></a>        n -= <span class="dv">1</span></span>
<span id="cb326-10"><a href="#cb326-10"></a>      <span class="kw">end</span> <span class="kw">while</span> n &gt; <span class="dv">0</span></span>
<span id="cb326-11"><a href="#cb326-11"></a>      buf &lt;&lt; <span class="st">&quot;no more bottles of beer&quot;</span> </span>
<span id="cb326-12"><a href="#cb326-12"></a>    <span class="kw">end</span></span>
<span id="cb326-13"><a href="#cb326-13"></a><span class="kw">end</span></span></code></pre></div>
</blockquote>
<p><em>Originally written by <a href="https://twitter.com/jvoorhis" rel="nofollow noreferrer">Jeremy Voorhis</a>. The content has been copied here because it seems to have been taken down from the originating site. Copies can also be found in the <a href="http://web.archive.org/web/20080206125158/http://archive.jvoorhis.com/articles/2007/06/13/ruby-hidden-do-while-loop" rel="nofollow noreferrer">Web Archive</a> and at <a href="http://www.artima.com/forums/flat.jsp?forum=123&amp;thread=208036" rel="nofollow noreferrer">Ruby Buzz Forum</a>. -Bill the Lizard</em></p>
</section>
<section id="answer-3-score-101" class="level4">
<h4>Answer 3 (score 101)</h4>
<p>Like this:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb327-1"><a href="#cb327-1"></a>people = []</span>
<span id="cb327-2"><a href="#cb327-2"></a></span>
<span id="cb327-3"><a href="#cb327-3"></a><span class="kw">begin</span></span>
<span id="cb327-4"><a href="#cb327-4"></a>  info = gets.chomp</span>
<span id="cb327-5"><a href="#cb327-5"></a>  people += [<span class="dt">Person</span>.new(info)] <span class="kw">if</span> <span class="kw">not</span> info.empty?</span>
<span id="cb327-6"><a href="#cb327-6"></a><span class="kw">end</span> <span class="kw">while</span> <span class="kw">not</span> info.empty?</span></code></pre></div>
<p>Reference: <a href="http://web.archive.org/web/20080206125158/http://archive.jvoorhis.com/articles/2007/06/13/ruby-hidden-do-while-loop" rel="noreferrer">Ruby’s Hidden do {} while () Loop</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="error-installing-mysql2-failed-to-build-gem-native-extension-score-248014-in-2017" class="level3">
<h3>61: Error installing mysql2: Failed to build gem native extension (score <a href="https://stackoverflow.com/q/3608287.html">248014</a> in 2017)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<p>I am having some problems when trying to install <code>mysql2</code> gem for Rails. When I try to install it by running <code>bundle install</code> or <code>gem install mysql2</code> it gives me the following error:</p>
<blockquote>
Error installing mysql2: ERROR: Failed to build gem native extension.
</blockquote>
<p>How can I fix this and successfully install <code>mysql2</code>?</p>
</section>
<section id="answer-accepted-score-898" class="level4">
<h4>Answer accepted (score 898)</h4>
<p>On Ubuntu/Debian and other distributions using aptitude:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb328-1"><a href="#cb328-1"></a>sudo apt-get install libmysql-ruby libmysqlclient-dev</span></code></pre></div>
<p>Package <code>libmysql-ruby</code> has been phased out and replaced by <code>ruby-mysql</code>. <a href="https://askubuntu.com/a/641953">This</a> is where I found the solution.</p>
<p>If the above command doesn’t work because <code>libmysql-ruby</code> cannot be found, the following should be sufficient:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb329-1"><a href="#cb329-1"></a>sudo apt-get install libmysqlclient-dev</span></code></pre></div>
<p>On Red Hat/CentOS and other distributions using yum:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb330-1"><a href="#cb330-1"></a>sudo yum install mysql-devel</span></code></pre></div>
<p>On Mac OS X with <a href="https://brew.sh/" rel="noreferrer">Homebrew</a>:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb331-1"><a href="#cb331-1"></a>brew install mysql</span></code></pre></div>
</section>
<section id="answer-2-score-60" class="level4">
<h4>Answer 2 (score 60)</h4>
<p>I’m on a mac and use <a href="https://brew.sh/" rel="nofollow noreferrer">homebrew</a> to install open source programs. I did have to install mac Dev tools in order to install homebrew, but after that it was a simple:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb332-1"><a href="#cb332-1"></a>brew install mysql</span></code></pre></div>
<p>to install mysql. I haven’t had a mysql gem problem since.</p>
</section>
<section id="answer-3-score-34" class="level4">
<h4>Answer 3 (score 34)</h4>
<p><em>here is a solution for the <strong>windows users</strong>, hope it helps!</em></p>
<h5>
Using MySQL with Rails 3 on Windows
</h2>
<ul>
<li>
<p>
<strong>Install railsinstaller</strong> -&gt; <em>www.railsinstaller.org</em> (I installed it to c:)
</p>
</li>
<li>
<p>
<strong>Install MySQL</strong> (I used MySQL 5.5) -&gt; <em>dev.mysql.com/downloads/installer/</em>
</p>
</li>
</ul>
<blockquote>
<p>
<strong>— for mySQL installation —</strong> <br /><br /> If you dont already have <strong>these two files</strong> installed you might need them to get your MySQL going<br /><br /> vcredist_x86.exe -&gt; <a href="http://www.microsoft.com/download/en/details.aspx?id=5555" rel="noreferrer">http://www.microsoft.com/download/en/details.aspx?id=5555</a> dotNetFx40_Full_x86_x64.exe -&gt; <a href="http://www.microsoft.com/download/en/details.aspx?id=17718" rel="noreferrer">http://www.microsoft.com/download/en/details.aspx?id=17718</a> <br /><br /> Use default install Developer Machine
</p>
<p>
<strong>-MySQL Server Config-</strong><br /> port: 3306<br /> windows service name: MySQL55<br /> mysql root pass: root (you can change this later)<br /> (username: root)<br /> <strong>-MySQL Server Config-</strong>
</p>
<strong>— for mySQL installation —</strong>
</blockquote>
<p><br /></p>
<blockquote>
<p>
<strong>— Install the mysql2 Gem —</strong><br /><br /> Important: <strong>Do this with Git Bash Command Line</strong>(this was installed with railsinstaller) -&gt; start/Git Bash<br /><br /> <i><strong>gem install mysql2 – ’–with-mysql-lib=“c:FilesServer 5.5” –with-mysql-include="c:FilesServer 5.5
"’</strong></i> <br /><br> Now the gem should have installed correctly <br /><br> Lastly copy the libmysql.dll file from<br /> C:FilesServer 5.5<br /> to<br /> C:.2<br /><br /> <strong>— Install the mysql2 Gem —</strong>
</p>
</blockquote>
<p>
<br /> <em>You will now be able to use your Rails app with MySQL, if you are not sure how to create a Rails 3 app with MySQL read on…</em>
</p>
<hr />
<p>
<strong>— Get a Rails 3 app going with MySQL —</strong><br /><br /> Open command prompt(not Git Bash) -&gt; start/cmd<br /> Navigate to your folder (c:)<br /> Create new rails app<br />
</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb333-1"><a href="#cb333-1"></a>rails new world</span></code></pre></div>
<p>
Delete the file c:.html<br /> Edit the file c:.rb<br /> add this line -&gt; root :to =&gt; ‘cities#index’<br /><br />
</p>
<p>Open command prompt (generate views and controllers)<br /></p>
<div class="sourceCode" id="cb334"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb334-1"><a href="#cb334-1"></a>rails generate scaffold city <span class="dt">ID</span><span class="st">:integer</span> <span class="dt">Name</span><span class="st">:string</span> <span class="dt">CountryCode</span><span class="st">:string</span> <span class="dt">District</span><span class="st">:string</span> <span class="dt">Population</span><span class="st">:integer</span></span></code></pre></div>
<p>
<br /><br> Edit the file c:.rb to look like this
</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb335-1"><a href="#cb335-1"></a><span class="kw">class</span> <span class="dt">City</span> &lt; <span class="dt">ActiveRecord</span>::<span class="dt">Base</span></span>
<span id="cb335-2"><a href="#cb335-2"></a> set_table_name <span class="st">&quot;city&quot;</span></span>
<span id="cb335-3"><a href="#cb335-3"></a><span class="kw">end</span></span></code></pre></div>
<p>Edit the file c:.yml to look like this</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb336-1"><a href="#cb336-1"></a>development:</span>
<span id="cb336-2"><a href="#cb336-2"></a><span class="st">adapter: </span>mysql2</span>
<span id="cb336-3"><a href="#cb336-3"></a><span class="st">encoding: </span>utf8</span>
<span id="cb336-4"><a href="#cb336-4"></a><span class="st">database: </span>world</span>
<span id="cb336-5"><a href="#cb336-5"></a><span class="st">pool: </span><span class="dv">5</span></span>
<span id="cb336-6"><a href="#cb336-6"></a><span class="st">username: </span>root</span>
<span id="cb336-7"><a href="#cb336-7"></a><span class="st">password: </span>root</span>
<span id="cb336-8"><a href="#cb336-8"></a><span class="st">socket: </span><span class="ot">/tmp/m</span>ysql.sock</span></code></pre></div>
<p>add to gemfile</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb337-1"><a href="#cb337-1"></a>gem <span class="st">&#39;mysql2&#39;</span></span></code></pre></div>
<p>
Open <strong>command prompt</strong> windows cmd, not Git Bash(run your app!)<br /> Navigate to your app folder (c:)<br />
</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb338-1"><a href="#cb338-1"></a>rails s</span></code></pre></div>
<p>Open your browser here -&gt; <em><a href="http://localhost:3000" rel="noreferrer">http://localhost:3000</a></em></p>
<p><strong>— Get a Rails 3 app going with MySQL —</strong></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ssl_connect-returned1-errno0-statesslv3-read-server-certificate-b-certificate-verify-failed-score-247830-in" class="level3">
<h3>62: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (score <a href="https://stackoverflow.com/q/4528101.html">247830</a> in )</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>I am using <a href="https://github.com/viatropos/authlogic-connect" rel="noreferrer">Authlogic-Connect</a> for third party logins. After running appropriate migrations, Twitter/Google/yahoo logins seem to work fine but the facebook login throws exception:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb339-1"><a href="#cb339-1"></a><span class="dt">SSL_connect</span> returned=<span class="dv">1</span> errno=<span class="dv">0</span> state=<span class="dt">SSLv3</span> read server certificate <span class="st">B: </span>certificate verify failed</span></code></pre></div>
<p>The dev log shows</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb340-1"><a href="#cb340-1"></a><span class="dt">OpenSSL</span>::<span class="dt">SSL</span>::<span class="dt">SSLError</span> (<span class="dt">SSL_connect</span> returned=<span class="dv">1</span> errno=<span class="dv">0</span> state=<span class="dt">SSLv3</span> read server certificate <span class="st">B: </span>certificate verify failed):</span>
<span id="cb340-2"><a href="#cb340-2"></a>  app/controllers/users_controller.rb:<span class="dv">37</span><span class="st">:in</span> <span class="st">`update&#39;</span></span></code></pre></div>
<p>Please suggest..</p>
</section>
<section id="answer-2-score-135" class="level4">
<h4>Answer 2 (score 135)</h4>
<p>I ran into a similar problem when trying to use the JQuery generator for Rails 3</p>
<p>I solved it like this:</p>
<ol>
<li>
<p>
<strong>Get the CURL Certificate Authority (CA) bundle.</strong> You can do this with:
</p>
<ul>
<li>
<code>sudo port install curl-ca-bundle</code> [if you are using MacPorts]
</li>
<li>
or just pull it down directly <code>wget http://curl.haxx.se/ca/cacert.pem</code>
</li>
</ul>
</li>
<li>
<p>
Execute the ruby code that is trying to verify the SSL certification: <code>SSL_CERT_FILE=/opt/local/etc/certs/cacert.pem rails generate jquery:install</code>. In your case, you want to either set this as an environment variable somewhere the server picks it up or add something like <code>ENV['SSL_CERT_FILE'] = /path/to/your/new/cacert.pem</code> in your environment.rb file.
</p>
</li>
</ol>
<p>You can also just install the CA files (I haven’t tried this) to the OS – there are lengthy instructions <a href="http://gagravarr.org/writing/openssl-certs/others.shtml">here</a> – this should work in a similar fashion, but I have not tried this personally.</p>
<p>Basically, the issue you are hitting is that some web service is responding with a certificate signed against a CA that OpenSSL cannot verify.</p>
</section>
<section id="answer-3-score-134" class="level4">
<h4>Answer 3 (score 134)</h4>
<p>If you’re using RVM on OS X, you probably need to run this:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb341-1"><a href="#cb341-1"></a>rvm osx-ssl-certs update all</span></code></pre></div>
<p>More information here: <a href="http://rvm.io/support/fixing-broken-ssl-certificates" rel="noreferrer">http://rvm.io/support/fixing-broken-ssl-certificates</a></p>
<p>And here is the full explanation: <a href="https://github.com/wayneeseguin/rvm/blob/master/help/osx-ssl-certs.md" rel="noreferrer">https://github.com/wayneeseguin/rvm/blob/master/help/osx-ssl-certs.md</a></p>
<hr>
<h5>
Update
</h2>
<p>On Ruby 2.2, you may have to reinstall Ruby from source to fix this. Here’s how (replace <code>2.2.3</code> with your Ruby version):</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb342-1"><a href="#cb342-1"></a>rvm reinstall <span class="fl">2.2</span>.<span class="dv">3</span> --disable-binary</span></code></pre></div>
<p>Credit to <a href="https://stackoverflow.com/a/32363597/4353">https://stackoverflow.com/a/32363597/4353</a> and <a href="https://stackoverflow.com/users/2063319/ian-connor">Ian Connor</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ruby-array-to-string-conversion-score-246800-in-2015" class="level3">
<h3>63: Ruby array to string conversion (score <a href="https://stackoverflow.com/q/3500814.html">246800</a> in 2015)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>I have a ruby array like <code>['12','34','35','231']</code>.</p>
<p>I want to convert it to a string like <code>'12','34','35','231'</code>.</p>
<p>How can I do that?</p>
</section>
<section id="answer-accepted-score-293" class="level4">
<h4>Answer accepted (score 293)</h4>
<p>I’ll join the fun with:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb343-1"><a href="#cb343-1"></a>[<span class="st">&#39;12&#39;</span>,<span class="st">&#39;34&#39;</span>,<span class="st">&#39;35&#39;</span>,<span class="st">&#39;231&#39;</span>].join(<span class="st">&#39;, &#39;</span>)</span></code></pre></div>
<p><strong>EDIT:</strong></p>
<div class="sourceCode" id="cb344"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb344-1"><a href="#cb344-1"></a><span class="st">&quot;&#39;</span><span class="ot">#{</span>[<span class="st">&#39;12&#39;</span>,<span class="st">&#39;34&#39;</span>,<span class="st">&#39;35&#39;</span>,<span class="st">&#39;231&#39;</span>].join(<span class="st">&quot;&#39;, &#39;&quot;</span>)<span class="ot">}</span><span class="st">&#39;&quot;</span></span></code></pre></div>
<p>Some string interpolation to add the first and last single quote :P</p>
</section>
<section id="answer-2-score-41" class="level4">
<h4>Answer 2 (score 41)</h4>
<div class="sourceCode" id="cb345"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb345-1"><a href="#cb345-1"></a>&gt; a = [<span class="st">&#39;12&#39;</span>,<span class="st">&#39;34&#39;</span>,<span class="st">&#39;35&#39;</span>,<span class="st">&#39;231&#39;</span>]</span>
<span id="cb345-2"><a href="#cb345-2"></a>&gt; a.map { |i| <span class="st">&quot;&#39;&quot;</span> + i.to_s + <span class="st">&quot;&#39;&quot;</span> }.join(<span class="st">&quot;,&quot;</span>)</span>
<span id="cb345-3"><a href="#cb345-3"></a>=&gt; <span class="st">&quot;&#39;12&#39;,&#39;34&#39;,&#39;35&#39;,&#39;231&#39;&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-29" class="level4">
<h4>Answer 3 (score 29)</h4>
<p>try this code <code>['12','34','35','231']*","</code></p>
<p>will give you result <strong>“12,34,35,231”</strong></p>
<p>I hope this is the result you, let me know</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-pick-randomly-from-an-array-score-244689-in-2011" class="level3">
<h3>64: How do I pick randomly from an array? (score <a href="https://stackoverflow.com/q/3482149.html">244689</a> in 2011)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>I want to know if there is a much cleaner way of doing this. Basically, I want to pick a random element from an array of variable length. Normally, I would do it like this:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb346-1"><a href="#cb346-1"></a>myArray = [<span class="st">&quot;stuff&quot;</span>, <span class="st">&quot;widget&quot;</span>, <span class="st">&quot;ruby&quot;</span>, <span class="st">&quot;goodies&quot;</span>, <span class="st">&quot;java&quot;</span>, <span class="st">&quot;emerald&quot;</span>, <span class="st">&quot;etc&quot;</span> ]</span>
<span id="cb346-2"><a href="#cb346-2"></a>item = myArray[rand(myarray.length)]</span></code></pre></div>
<p>Is there something that is more readable / simpler to replace the second line? Or is that the best way to do it. I suppose you could do <code>myArray.shuffle.first</code>, but I only saw <code>#shuffle</code> a few minutes ago on SO, I haven’t actually used it yet.</p>
</section>
<section id="answer-accepted-score-1089" class="level4">
<h4>Answer accepted (score 1089)</h4>
<p>Just use <a href="http://ruby-doc.org/core-1.9.3/Array.html#method-i-sample" rel="noreferrer"><code>Array#sample</code></a>:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb347-1"><a href="#cb347-1"></a>[<span class="st">:foo</span>, <span class="st">:bar</span>].sample <span class="co"># =&gt; :foo, or :bar :-)</span></span></code></pre></div>
<p>It is available in Ruby 1.9.1+. To be also able to use it with an earlier version of Ruby, you could <a href="https://github.com/marcandre/backports" rel="noreferrer"><code>require "backports/1.9.1/array/sample"</code></a>.</p>
<p>Note that in Ruby 1.8.7 it exists under the unfortunate name <code>choice</code>; it was renamed in later version so you shouldn’t use that.</p>
<p>Although not useful in this case, <code>sample</code> accepts a number argument in case you want a number of distinct samples.</p>
</section>
<section id="answer-2-score-80" class="level4">
<h4>Answer 2 (score 80)</h4>
<p><code>myArray.sample(x)</code> can also help you to get x random elements from the array.</p>
</section>
<section id="answer-3-score-12-1" class="level4">
<h4>Answer 3 (score 12)</h4>
<h5>
Random Number of Random Items from an Array
</h1>
<div class="sourceCode" id="cb348"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb348-1"><a href="#cb348-1"></a><span class="kw">def</span> random_items(array)</span>
<span id="cb348-2"><a href="#cb348-2"></a>  array.sample(<span class="dv">1</span> + rand(array.count))</span>
<span id="cb348-3"><a href="#cb348-3"></a><span class="kw">end</span></span></code></pre></div>
<hr>
<h5>
Examples of possible results:
</h3>
<div class="sourceCode" id="cb349"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb349-1"><a href="#cb349-1"></a>my_array = [<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>]</span>
<span id="cb349-2"><a href="#cb349-2"></a>my_array.sample(<span class="dv">1</span> + rand(my_array.count))</span>
<span id="cb349-3"><a href="#cb349-3"></a></span>
<span id="cb349-4"><a href="#cb349-4"></a>=&gt; [<span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>]</span>
<span id="cb349-5"><a href="#cb349-5"></a>=&gt; [<span class="st">&quot;one&quot;</span>, <span class="st">&quot;three&quot;</span>, <span class="st">&quot;two&quot;</span>]</span>
<span id="cb349-6"><a href="#cb349-6"></a>=&gt; [<span class="st">&quot;two&quot;</span>]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="getting-output-of-system-calls-in-ruby-score-243524-in-2015" class="level3">
<h3>65: Getting output of system() calls in Ruby (score <a href="https://stackoverflow.com/q/690151.html">243524</a> in 2015)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>If I call a command using <a href="http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-system" rel="noreferrer">Kernel#system</a> in Ruby, how do I get its output?</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb350-1"><a href="#cb350-1"></a>system(<span class="st">&quot;ls&quot;</span>)</span></code></pre></div>
</section>
<section id="answer-accepted-score-339" class="level4">
<h4>Answer accepted (score 339)</h4>
<p>I’d like to expand &amp; clarify <a href="https://stackoverflow.com/a/690174/56763">chaos’s answer</a> a bit.</p>
<p>If you surround your command with backticks, then you don’t need to (explicitly) call system() at all. The backticks execute the command and return the output as a string. You can then assign the value to a variable like so:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb351-1"><a href="#cb351-1"></a>output = <span class="st">`ls`</span></span>
<span id="cb351-2"><a href="#cb351-2"></a>p output</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb352-1"><a href="#cb352-1"></a>printf output <span class="co"># escapes newline chars</span></span></code></pre></div>
</section>
<section id="answer-2-score-238" class="level4">
<h4>Answer 2 (score 238)</h4>
<p>Be aware that all the solutions where you pass a string containing user provided values to <code>system</code>, <code>%x[]</code> etc. are unsafe! Unsafe actually means: the user may trigger code to run in the context and with all permissions of the program.</p>
<p>As far as I can say only <code>system</code> and <code>Open3.popen3</code> do provide a secure/escaping variant in Ruby 1.8. In Ruby 1.9 <code>IO::popen</code> also accepts an array.</p>
<p>Simply pass every option and argument as an array to one of these calls.</p>
<p>If you need not just the exit status but also the result you probably want to use <code>Open3.popen3</code>:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb353-1"><a href="#cb353-1"></a>require <span class="st">&#39;open3&#39;</span></span>
<span id="cb353-2"><a href="#cb353-2"></a>stdin, stdout, stderr, wait_thr = <span class="dt">Open3</span>.popen3(<span class="st">&#39;usermod&#39;</span>, <span class="st">&#39;-p&#39;</span>, <span class="ot">@options</span>[<span class="st">&#39;shadow&#39;</span>], <span class="ot">@options</span>[<span class="st">&#39;username&#39;</span>])</span>
<span id="cb353-3"><a href="#cb353-3"></a>stdout.gets(<span class="dv">nil</span>)</span>
<span id="cb353-4"><a href="#cb353-4"></a>stdout.close</span>
<span id="cb353-5"><a href="#cb353-5"></a>stderr.gets(<span class="dv">nil</span>)</span>
<span id="cb353-6"><a href="#cb353-6"></a>stderr.close</span>
<span id="cb353-7"><a href="#cb353-7"></a>exit_code = wait_thr.value</span></code></pre></div>
<p>Note that the block form will auto-close stdin, stdout and stderr- otherwise they’d have to be <a href="http://www.ruby-doc.org/stdlib-2.0/libdoc/open3/rdoc/Open3.html#method-c-popen3" rel="noreferrer">closed explicitly</a>.</p>
<p>More information here: <a href="https://stackoverflow.com/questions/4650636/forming-sanitary-shell-commands-or-system-calls-in-ruby">Forming sanitary shell commands or system calls in Ruby</a></p>
</section>
<section id="answer-3-score-163-1" class="level4">
<h4>Answer 3 (score 163)</h4>
<p>Just for the record, if you want both (output and operation result) you can do:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb354-1"><a href="#cb354-1"></a>output=<span class="st">`ls no_existing_file`</span> ;  result=<span class="dt">$?</span>.success?</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-make-a-http-request-using-ruby-on-rails-score-242680-in-2017" class="level3">
<h3>66: How to make a HTTP request using Ruby on Rails? (score <a href="https://stackoverflow.com/q/4581075.html">242680</a> in 2017)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>I would like to take information from another website. Therefore (maybe) I should make a request to that website (in my case a HTTP GET request) and receive the response.</p>
<p>How can I make this in Ruby on Rails?</p>
<p>If it is possible, is it a correct approach to use in my controllers?</p>
</section>
<section id="answer-accepted-score-321" class="level4">
<h4>Answer accepted (score 321)</h4>
<p>You can use Ruby’s <a href="http://ruby-doc.org/stdlib/libdoc/net/http/rdoc/index.html" rel="noreferrer"><strong><code>Net::HTTP</code></strong></a> class:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb355-1"><a href="#cb355-1"></a>require <span class="st">&#39;net/http&#39;</span></span>
<span id="cb355-2"><a href="#cb355-2"></a></span>
<span id="cb355-3"><a href="#cb355-3"></a>url = <span class="dt">URI</span>.parse(<span class="st">&#39;http://www.example.com/index.html&#39;</span>)</span>
<span id="cb355-4"><a href="#cb355-4"></a>req = <span class="dt">Net</span>::<span class="dt">HTTP</span>::<span class="dt">Get</span>.new(url.to_s)</span>
<span id="cb355-5"><a href="#cb355-5"></a>res = <span class="dt">Net</span>::<span class="dt">HTTP</span>.start(url.host, url.port) {|http|</span>
<span id="cb355-6"><a href="#cb355-6"></a>  http.request(req)</span>
<span id="cb355-7"><a href="#cb355-7"></a>}</span>
<span id="cb355-8"><a href="#cb355-8"></a>puts res.body</span></code></pre></div>
</section>
<section id="answer-2-score-106" class="level4">
<h4>Answer 2 (score 106)</h4>
<p>Net::HTTP is built into Ruby, but let’s face it, often it’s easier <em>not</em> to use its cumbersome 1980s style and try a higher level alternative:</p>
<ul>
<li>
<a href="https://github.com/httprb/http" rel="noreferrer">HTTP Gem</a>
</li>
<li>
<a href="https://github.com/jnunemaker/httparty" rel="noreferrer">HTTParty</a>
</li>
<li>
<a href="https://github.com/rest-client/rest-client" rel="noreferrer">RestClient</a>
</li>
<li>
<a href="https://github.com/excon/excon" rel="noreferrer">Excon</a>
</li>
<li>
<a href="https://github.com/feedjira/feedjira" rel="noreferrer">Feedjira </a> (RSS only)
</li>
</ul>
</section>
<section id="answer-3-score-90" class="level4">
<h4>Answer 3 (score 90)</h4>
<p>OpenURI is the best; it’s as simple as</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb356-1"><a href="#cb356-1"></a>require <span class="st">&#39;open-uri&#39;</span></span>
<span id="cb356-2"><a href="#cb356-2"></a>response = open(<span class="st">&#39;http://example.com&#39;</span>).read</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="one-line-if-statement-not-working-score-241210-in-2015" class="level3">
<h3>67: One line if statement not working (score <a href="https://stackoverflow.com/q/3827874.html">241210</a> in 2015)</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<div class="sourceCode" id="cb357"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb357-1"><a href="#cb357-1"></a>&lt;<span class="ot">%</span>if <span class="ot">@</span><span class="st">item.rigged %&gt;Yes&lt;%else%&gt;No&lt;%end%&gt;</span></span></code></pre></div>
<p>I was thinking of something like this?</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb358-1"><a href="#cb358-1"></a><span class="kw">if</span> <span class="ot">@item</span>.rigged ? <span class="st">&quot;Yes&quot;</span> : <span class="st">&quot;No&quot;</span> </span></code></pre></div>
<p>But it doesn’t work. Ruby has the <code>||=</code> but I"m not even sure how to use that thing.</p>
</section>
<section id="answer-accepted-score-385" class="level4">
<h4>Answer accepted (score 385)</h4>
<p>Remove <code>if</code> from <code>if @item.rigged ? "Yes" : "No"</code></p>
<p>Ternary operator has form <code>condition ? if_true : if_false</code></p>
</section>
<section id="answer-2-score-175" class="level4">
<h4>Answer 2 (score 175)</h4>
<p>In Ruby, the condition and the <code>then</code> part of an <code>if</code> expression must be separated by either an expression separator (i.e. <code>;</code> or a newline) or the <code>then</code> keyword.</p>
<p>So, all of these would work:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb359-1"><a href="#cb359-1"></a><span class="kw">if</span> <span class="ot">@item</span>.rigged <span class="kw">then</span> <span class="st">&#39;Yes&#39;</span> <span class="kw">else</span> <span class="st">&#39;No&#39;</span> <span class="kw">end</span></span>
<span id="cb359-2"><a href="#cb359-2"></a></span>
<span id="cb359-3"><a href="#cb359-3"></a><span class="kw">if</span> <span class="ot">@item</span>.rigged; <span class="st">&#39;Yes&#39;</span> <span class="kw">else</span> <span class="st">&#39;No&#39;</span> <span class="kw">end</span></span>
<span id="cb359-4"><a href="#cb359-4"></a></span>
<span id="cb359-5"><a href="#cb359-5"></a><span class="kw">if</span> <span class="ot">@item</span>.rigged</span>
<span id="cb359-6"><a href="#cb359-6"></a>  <span class="st">&#39;Yes&#39;</span> <span class="kw">else</span> <span class="st">&#39;No&#39;</span> <span class="kw">end</span></span></code></pre></div>
<p>There is also a conditional operator in Ruby, but that is completely unnecessary. The conditional operator is needed in C, because it is an operator: in C, <code>if</code> is a statement and thus cannot return a value, so if you want to return a value, you need to use something which <em>can</em> return a value. And the only things in C that can return a value are functions and operators, and since it is impossible to make <code>if</code> a function in C, you need an operator.</p>
<p>In Ruby, however, <code>if</code> is an expression. In fact, <em>everything</em> is an expression in Ruby, so it <em>already</em> can return a value. There is no need for the conditional operator to even <em>exist</em>, let alone use it.</p>
<p>BTW: it is customary to name methods which are used to ask a question with a question mark at the end, like this:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb360-1"><a href="#cb360-1"></a><span class="ot">@item</span>.rigged?</span></code></pre></div>
<p>This shows another problem with using the conditional operator in Ruby:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb361-1"><a href="#cb361-1"></a><span class="ot">@item</span>.rigged? ? <span class="st">&#39;Yes&#39;</span> : <span class="st">&#39;No&#39;</span></span></code></pre></div>
<p>It’s simply hard to read with the multiple question marks that close to each other.</p>
</section>
<section id="answer-3-score-62" class="level4">
<h4>Answer 3 (score 62)</h4>
<p>One line if:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb362-1"><a href="#cb362-1"></a>&lt;statement&gt; <span class="kw">if</span> &lt;condition&gt;</span></code></pre></div>
<p>Your case:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb363-1"><a href="#cb363-1"></a><span class="st">&quot;Yes&quot;</span> <span class="kw">if</span> <span class="ot">@item</span>.rigged</span>
<span id="cb363-2"><a href="#cb363-2"></a></span>
<span id="cb363-3"><a href="#cb363-3"></a><span class="st">&quot;No&quot;</span> <span class="kw">if</span> !<span class="ot">@item</span>.rigged <span class="co"># or: &quot;No&quot; unless @item.rigged</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-make-no-ri-no-rdoc-the-default-for-gem-install-score-237851-in-2014" class="level3">
<h3>68: How to make –no-ri –no-rdoc the default for gem install? (score <a href="https://stackoverflow.com/q/1381725.html">237851</a> in 2014)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>I don’t use the RI or RDoc output from the gems I install in my machine or in the servers I handle (I use other means of documentation).</p>
<p>Every gem I install installs RI and RDoc documentation by default, because I forget to set <code>--no-ri --no-rdoc</code>.</p>
<p>Is there a way to make those two flags the default?</p>
</section>
<section id="answer-accepted-score-1184" class="level4">
<h4>Answer accepted (score 1184)</h4>
<p>You just add following line to your local <code>~/.gemrc</code> file (it is in your <em>home</em> folder)</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb364-1"><a href="#cb364-1"></a><span class="st">gem: </span>--no-document</span></code></pre></div>
<p>or you can add this line to the global gemrc config file. Here is how to find it (in Linux)</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb365-1"><a href="#cb365-1"></a>strace gem source <span class="dv">2</span>&gt;&amp;<span class="dv">1</span> | grep gemrc</span></code></pre></div>
</section>
<section id="answer-2-score-486" class="level4">
<h4>Answer 2 (score 486)</h4>
<p>From <a href="https://rvm.io/gemsets/basics/">RVM’s documentation</a>:</p>
<blockquote>
Just add this line to your <code>~/.gemrc</code> or <code>/etc/gemrc</code>:
</blockquote>
<div class="sourceCode" id="cb366"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb366-1"><a href="#cb366-1"></a><span class="st">gem: </span>--no-rdoc --no-ri </span></code></pre></div>
<hr>
<p><strong>Note:</strong> The original answer was:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb367-1"><a href="#cb367-1"></a><span class="st">install: </span>--no-rdoc --no-ri </span>
<span id="cb367-2"><a href="#cb367-2"></a><span class="st">update: </span>--no-rdoc --no-ri </span></code></pre></div>
<p>This is no longer valid; the RVM docs have since been updated, thus the current answer to only include the <code>gem</code> directive is the correct one.</p>
</section>
<section id="answer-3-score-179" class="level4">
<h4>Answer 3 (score 179)</h4>
<p>Note that <code>--no-ri</code> and <code>--no-rdoc</code> have been deprecated according to the new <a href="http://guides.rubygems.org/command-reference/#gem_install" rel="noreferrer">guides</a>. The recommended way is to use <code>--no-document</code> in <code>~/.gemrc</code> or <code>/etc/gemrc</code>.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb368-1"><a href="#cb368-1"></a><span class="st">install: </span>--no-document</span>
<span id="cb368-2"><a href="#cb368-2"></a><span class="st">update: </span>--no-document</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb369-1"><a href="#cb369-1"></a><span class="st">gem: </span>--no-document</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-update-ruby-gems-from-behind-a-proxy-isa-ntlm-score-237459-in-2016" class="level3">
<h3>69: How do I update Ruby Gems from behind a Proxy (ISA-NTLM) (score <a href="https://stackoverflow.com/q/4418.html">237459</a> in 2016)</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>The firewall I’m behind is running Microsoft ISA server in NTLM-only mode. Hash anyone have success getting their Ruby gems to install/update via Ruby SSPI gem or other method?</p>
<p>… or am I just being lazy?</p>
<p>Note: rubysspi-1.2.4 does not work.</p>
<p>This also works for “igem”, part of the IronRuby project</p>
</section>
<section id="answer-accepted-score-210" class="level4">
<h4>Answer accepted (score 210)</h4>
<p>I wasn’t able to get mine working from the command-line switch but I have been able to do it just by setting my <code>HTTP_PROXY</code> environment variable. (Note that case seems to be important). I have a batch file that has a line like this in it:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb370-1"><a href="#cb370-1"></a><span class="dt">SET</span> <span class="dt">HTTP_PROXY</span>=http:<span class="ot">//</span>%<span class="dt">USER</span>%:<span class="ot">%</span>PASSWORD<span class="ot">%</span><span class="st">@</span><span class="ot">%</span><span class="dt">SERVER</span>%:<span class="ot">%</span>PORT<span class="ot">%</span></span></code></pre></div>
<p>I set the four referenced variables before I get to this line obviously. As an example if my username is “wolfbyte”, my password is “secret” and my proxy is called “pigsy” and operates on port 8080:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb371-1"><a href="#cb371-1"></a><span class="dt">SET</span> <span class="dt">HTTP_PROXY</span>=http:<span class="ot">//</span>wolfbyte<span class="st">:secret</span><span class="ot">@pigsy</span>:<span class="dv">8080</span></span></code></pre></div>
<p>You might want to be careful how you manage that because it stores your password in plain text in the machine’s session but I don’t think it should be too much of an issue.</p>
</section>
<section id="answer-2-score-212" class="level4">
<h4>Answer 2 (score 212)</h4>
<p>For the Windows OS, I used Fiddler to work around the issue.</p>
<ol>
<li>
Install/Run Fiddler from www.fiddler2.com
</li>
<li>
<p>
Run gem:
</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb372-1"><a href="#cb372-1"></a>$ gem install --http-proxy http:<span class="ot">//</span>localhost:<span class="dv">8888</span> <span class="dt">$gem_name</span></span>
<span id="cb372-2"><a href="#cb372-2"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb372-3"><a href="#cb372-3"></a><span class="st">&lt;/ol&gt;</span></span>
<span id="cb372-4"><a href="#cb372-4"></a></span>
<span id="cb372-5"><a href="#cb372-5"></a><span class="st">#### Answer 3 (score 128)</span></span>
<span id="cb372-6"><a href="#cb372-6"></a><span class="st">This totally worked:  </span></span>
<span id="cb372-7"><a href="#cb372-7"></a></span>
<span id="cb372-8"><a href="#cb372-8"></a><span class="st">```</span>ruby</span>
<span id="cb372-9"><a href="#cb372-9"></a>gem install --http-proxy http:<span class="ot">//</span><span class="dt">COMPANY</span>.<span class="dt">PROXY</span>.<span class="dt">ADDRESS</span> <span class="dt">$gem_name</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-get-the-name-of-a-ruby-class-score-235678-in-2014" class="level3">
<h3>70: How do I get the name of a Ruby class? (score <a href="https://stackoverflow.com/q/826210.html">235678</a> in 2014)</h3>
<section id="question-69" class="level4">
<h4>Question</h4>
<p>How can I get the class name from an ActiveRecord object?</p>
<p>I have:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb373-1"><a href="#cb373-1"></a>result = <span class="dt">User</span>.find(<span class="dv">1</span>)</span></code></pre></div>
<p>I tried:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb374-1"><a href="#cb374-1"></a>result.class</span>
<span id="cb374-2"><a href="#cb374-2"></a><span class="co"># =&gt; User(id: integer, name: string ...)</span></span>
<span id="cb374-3"><a href="#cb374-3"></a>result.to_s</span>
<span id="cb374-4"><a href="#cb374-4"></a><span class="co"># =&gt; #&lt;User:0x3d07cdc&gt;&quot;</span></span></code></pre></div>
<p>I need only the class name, in a string (<code>User</code> in this case). Is there a method for that?</p>
<p>I know this is pretty basic, but I searched both Rails’ and Ruby’s docs, and I couldn’t find it.</p>
</section>
<section id="answer-accepted-score-699" class="level4">
<h4>Answer accepted (score 699)</h4>
<p>You want to call <a href="https://www.ruby-doc.org/core/classes/Module.html#M001699" rel="noreferrer">.name</a> on the object’s class:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb375-1"><a href="#cb375-1"></a>result.class.name</span></code></pre></div>
</section>
<section id="answer-2-score-111" class="level4">
<h4>Answer 2 (score 111)</h4>
<p>Here’s the correct answer, extracted from comments by Daniel Rikowski and pseidemann. I’m tired of having to weed through comments to find the right answer…</p>
<p>If you use Rails (ActiveSupport):</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb376-1"><a href="#cb376-1"></a>result.class.name.demodulize</span></code></pre></div>
<p>If you use POR (plain-ol-Ruby):</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb377-1"><a href="#cb377-1"></a>result.class.name.split(<span class="st">&#39;::&#39;</span>).last</span></code></pre></div>
</section>
<section id="answer-3-score-34-1" class="level4">
<h4>Answer 3 (score 34)</h4>
<p>Both <code>result.class.to_s</code> and <code>result.class.name</code> work.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-find-a-min-max-with-ruby-score-235414-in-2012" class="level3">
<h3>71: How do you find a min / max with Ruby? (score <a href="https://stackoverflow.com/q/1359370.html">235414</a> in 2012)</h3>
<section id="question-70" class="level4">
<h4>Question</h4>
<p>I want to do something simple and straightforward, like <code>min(5,10)</code>, or <code>Math.max(4,7)</code>. Are there functions to this effect in Ruby?</p>
</section>
<section id="answer-accepted-score-688" class="level4">
<h4>Answer accepted (score 688)</h4>
<p>You can do</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb378-1"><a href="#cb378-1"></a>[<span class="dv">5</span>, <span class="dv">10</span>].min</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb379-1"><a href="#cb379-1"></a>[<span class="dv">4</span>, <span class="dv">7</span>].max</span></code></pre></div>
<p>They come from the <a href="http://www.ruby-doc.org/core/classes/Enumerable.html" rel="noreferrer">Enumerable module</a>, so anything that includes <code>Enumerable</code> will have those methods available.</p>
<p>v2.4 introduces own <code>Array#min</code> and <code>Array#max</code>, which are way faster than Enumerable’s methods because they skip calling <code>#each</code>.</p>
<p><strong>EDIT</strong></p>
<p><span class="citation" data-cites="nicholasklick">@nicholasklick</span> mentions another option, <a href="http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-minmax" rel="noreferrer"><code>Enumerable#minmax</code></a>, but this time returning an array of <code>[min, max]</code>.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb380-1"><a href="#cb380-1"></a>[<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span>].minmax</span>
<span id="cb380-2"><a href="#cb380-2"></a>=&gt; [<span class="dv">4</span>, <span class="dv">10</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-51" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>You can use</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb381-1"><a href="#cb381-1"></a>[<span class="dv">5</span>,<span class="dv">10</span>].min </span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb382-1"><a href="#cb382-1"></a>[<span class="dv">4</span>,<span class="dv">7</span>].max</span></code></pre></div>
<p>It’s a method for Arrays.</p>
</section>
<section id="answer-3-score-22" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>All those results generate garbage in a zealous attempt to handle more than two arguments. I’d be curious to see how they perform compared to good ’ol:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb383-1"><a href="#cb383-1"></a><span class="kw">def</span> max (a,b)</span>
<span id="cb383-2"><a href="#cb383-2"></a>  a&gt;b ? a : b</span>
<span id="cb383-3"><a href="#cb383-3"></a><span class="kw">end</span></span></code></pre></div>
<p>which is by-the-way my official answer to your question. :)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="gem-install-failed-to-build-gem-native-extension-cant-find-header-files-score-228909-in-2016" class="level3">
<h3>72: gem install: Failed to build gem native extension (can’t find header files) (score <a href="https://stackoverflow.com/q/4304438.html">228909</a> in 2016)</h3>
<section id="question-71" class="level4">
<h4>Question</h4>
<p>
I am using Fedora 14 and I have MySQL and MySQL server 5.1.42 installed and running. Now I tried to do this as root user:
</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb384-1"><a href="#cb384-1"></a>gem install mysql</span></code></pre></div>
<p>But I get this error:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb385-1"><a href="#cb385-1"></a><span class="dt">Building</span> native extensions.  <span class="dt">This</span> could take a <span class="kw">while</span>...</span>
<span id="cb385-2"><a href="#cb385-2"></a><span class="dt">ERROR</span>:  <span class="dt">Error</span> installing mysql:</span>
<span id="cb385-3"><a href="#cb385-3"></a>    <span class="dt">ERROR</span>: <span class="dt">Failed</span> to build gem native extension.</span>
<span id="cb385-4"><a href="#cb385-4"></a></span>
<span id="cb385-5"><a href="#cb385-5"></a><span class="ot">/usr/</span>bin/ruby extconf.rb</span>
<span id="cb385-6"><a href="#cb385-6"></a>mkmf.rb can<span class="st">&#39;t find header files for ruby at /usr/lib/ruby/ruby.h</span></span>
<span id="cb385-7"><a href="#cb385-7"></a></span>
<span id="cb385-8"><a href="#cb385-8"></a></span>
<span id="cb385-9"><a href="#cb385-9"></a><span class="st">Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/mysql-2.8.1 for inspection.</span></span>
<span id="cb385-10"><a href="#cb385-10"></a><span class="st">Results logged to /usr/lib/ruby/gems/1.8/gems/mysql-2.8.1/ext/mysql_api/gem_make.out</span></span></code></pre></div>
<p>What’s wrong here? In installed ruby 1.8.7. and the latest rubygems 1.3.7.</p>
</section>
<section id="answer-accepted-score-754" class="level4">
<h4>Answer accepted (score 754)</h4>
<p>For those who may be confused by the accepted answer, as I was, you also need to have the ruby headers installed [<strong>ruby-devel</strong>].</p>
<p>The article that saved my hide is <a href="http://web.archive.org/web/20130313162931/http://www.fedora-tunisia.org/?q=node/44" rel="noreferrer">here</a>.</p>
<p>And this is the revised solution (note that I’m on Fedora 13):</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb386-1"><a href="#cb386-1"></a>yum -y install gcc mysql-devel ruby-devel rubygems</span>
<span id="cb386-2"><a href="#cb386-2"></a>gem install -y mysql -- --with-mysql-config=<span class="ot">/usr/</span>bin/mysql_config</span></code></pre></div>
<p>For Debian, and other distributions using Debian style packaging the ruby development headers are installed by:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb387-1"><a href="#cb387-1"></a>sudo apt-get install ruby-dev</span></code></pre></div>
<p>For Ubuntu the ruby development headers are installed by:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb388-1"><a href="#cb388-1"></a>sudo apt-get install ruby-all-dev</span></code></pre></div>
<p>If you are using a earlier version of ruby (such as 2.2), then you will need to run:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb389-1"><a href="#cb389-1"></a>sudo apt-get install ruby2.<span class="dv">2</span>-dev</span></code></pre></div>
<p>(where 2.2 is your desired Ruby version)</p>
</section>
<section id="answer-2-score-91-1" class="level4">
<h4>Answer 2 (score 91)</h4>
<p>Red Hat, Fedora:</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb390-1"><a href="#cb390-1"></a>yum -y install gcc mysql-devel ruby-devel rubygems</span>
<span id="cb390-2"><a href="#cb390-2"></a>gem install -y mysql -- --with-mysql-config=<span class="ot">/usr/</span>bin/mysql_config</span></code></pre></div>
<p>Debian, Ubuntu:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb391-1"><a href="#cb391-1"></a>apt-get install libmysqlclient-dev ruby-dev</span>
<span id="cb391-2"><a href="#cb391-2"></a>gem install mysql</span></code></pre></div>
<p>Arch Linux:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb392-1"><a href="#cb392-1"></a>pacman -S libmariadbclient</span>
<span id="cb392-2"><a href="#cb392-2"></a>gem install mysql</span></code></pre></div>
</section>
<section id="answer-3-score-50" class="level4">
<h4>Answer 3 (score 50)</h4>
<p>For anyone reading this in 2015: if you happened to install the package <code>ruby2.0</code>, you need to install the matching <code>ruby2.0-dev</code> to get the appropriate Ruby headers. The same goes for <code>ruby2.1</code> and <code>ruby2.2</code>, etc. For example:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb393-1"><a href="#cb393-1"></a>$ sudo apt-get install ruby2.<span class="dv">2</span>-dev</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="for-vs-each-in-ruby-score-224935-in-2014" class="level3">
<h3>73: “for” vs “each” in Ruby (score <a href="https://stackoverflow.com/q/3294509.html">224935</a> in 2014)</h3>
<section id="question-72" class="level4">
<h4>Question</h4>
<p>I just had a quick question regarding loops in Ruby. Is there a difference between these two ways of iterating through a collection?</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb394-1"><a href="#cb394-1"></a><span class="co"># way 1</span></span>
<span id="cb394-2"><a href="#cb394-2"></a><span class="ot">@collection</span>.each <span class="kw">do</span> |item|</span>
<span id="cb394-3"><a href="#cb394-3"></a>  <span class="co"># do whatever</span></span>
<span id="cb394-4"><a href="#cb394-4"></a><span class="kw">end</span></span>
<span id="cb394-5"><a href="#cb394-5"></a></span>
<span id="cb394-6"><a href="#cb394-6"></a><span class="co"># way 2</span></span>
<span id="cb394-7"><a href="#cb394-7"></a><span class="kw">for</span> item <span class="kw">in</span> <span class="ot">@collection</span></span>
<span id="cb394-8"><a href="#cb394-8"></a>  <span class="co"># do whatever</span></span>
<span id="cb394-9"><a href="#cb394-9"></a><span class="kw">end</span></span></code></pre></div>
<p>Just wondering if these are exactly the same or if maybe there’s a subtle difference (possibly when <code>@collection</code> is nil).</p>
</section>
<section id="answer-accepted-score-303" class="level4">
<h4>Answer accepted (score 303)</h4>
<p>This is the only difference:</p>
<p><strong>each:</strong></p>
<div class="sourceCode" id="cb395"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb395-1"><a href="#cb395-1"></a>irb&gt; [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].each { |x| }</span>
<span id="cb395-2"><a href="#cb395-2"></a>  =&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb395-3"><a href="#cb395-3"></a>irb&gt; x</span>
<span id="cb395-4"><a href="#cb395-4"></a><span class="dt">NameError</span>: undefined local variable <span class="kw">or</span> method <span class="st">`x&#39; for main:Object</span></span>
<span id="cb395-5"><a href="#cb395-5"></a><span class="st">    from (irb):2</span></span>
<span id="cb395-6"><a href="#cb395-6"></a><span class="st">    from :0</span></span></code></pre></div>
<p><strong>for:</strong></p>
<div class="sourceCode" id="cb396"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb396-1"><a href="#cb396-1"></a>irb&gt; <span class="kw">for</span> x <span class="kw">in</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]; <span class="kw">end</span></span>
<span id="cb396-2"><a href="#cb396-2"></a>  =&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb396-3"><a href="#cb396-3"></a>irb&gt; x</span>
<span id="cb396-4"><a href="#cb396-4"></a>  =&gt; <span class="dv">3</span></span></code></pre></div>
<p>With the <code>for</code> loop, the iterator variable still lives after the block is done. With the <code>each</code> loop, it doesn’t, unless it was already defined as a local variable before the loop started.</p>
<p>Other than that, <code>for</code> is just syntax sugar for the <code>each</code> method.</p>
<p>When <code>@collection</code> is <code>nil</code> both loops throw an exception:</p>
<blockquote>
Exception: undefined local variable or method `<span class="citation" data-cites="collection">@collection</span>’ for main:Object
</blockquote>
</section>
<section id="answer-2-score-43" class="level4">
<h4>Answer 2 (score 43)</h4>
<p>See “<a href="http://graysoftinc.com/early-steps/the-evils-of-the-for-loop" rel="noreferrer">The Evils of the For Loop</a>” for a good explanation (there’s one small difference considering variable scoping).</p>
<p>Using <code>each</code> is <a href="https://github.com/bbatsov/ruby-style-guide#no-for-loops" rel="noreferrer">considered more idiomatic</a> use of Ruby.</p>
</section>
<section id="answer-3-score-29-1" class="level4">
<h4>Answer 3 (score 29)</h4>
<p>Your first example,</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb397-1"><a href="#cb397-1"></a><span class="ot">@collection</span>.each <span class="kw">do</span> |item|</span>
<span id="cb397-2"><a href="#cb397-2"></a>  <span class="co"># do whatever</span></span>
<span id="cb397-3"><a href="#cb397-3"></a><span class="kw">end</span></span></code></pre></div>
<p><a href="https://github.com/bbatsov/ruby-style-guide#no-for-loops" rel="noreferrer">is more idiomatic</a>. While Ruby supports looping constructs like <code>for</code> and <code>while</code>, the block syntax is generally preferred.</p>
<p>Another subtle difference is that any variable you declare within a <code>for</code> loop will be available outside the loop, whereas those within an iterator block are effectively private.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="equivalent-of-continue-in-ruby-score-223168-in-2012" class="level3">
<h3>74: Equivalent of “continue” in Ruby (score <a href="https://stackoverflow.com/q/4010039.html">223168</a> in 2012)</h3>
<section id="question-73" class="level4">
<h4>Question</h4>
<p>In C and many other languages, there is a <code>continue</code> keyword that, when used inside of a loop, jumps to the next iteration of the loop. Is there any equivalent of this <code>continue</code> keyword in Ruby?</p>
</section>
<section id="answer-accepted-score-899" class="level4">
<h4>Answer accepted (score 899)</h4>
<p>Yes, it’s called <code>next</code>.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb398-1"><a href="#cb398-1"></a><span class="kw">for</span> i <span class="kw">in</span> <span class="dv">0</span>..<span class="dv">5</span></span>
<span id="cb398-2"><a href="#cb398-2"></a>   <span class="kw">if</span> i &lt; <span class="dv">2</span></span>
<span id="cb398-3"><a href="#cb398-3"></a>     <span class="kw">next</span></span>
<span id="cb398-4"><a href="#cb398-4"></a>   <span class="kw">end</span></span>
<span id="cb398-5"><a href="#cb398-5"></a>   puts <span class="st">&quot;Value of local variable is </span><span class="ot">#{</span>i<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb398-6"><a href="#cb398-6"></a><span class="kw">end</span></span></code></pre></div>
<p>This outputs the following:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb399-1"><a href="#cb399-1"></a><span class="dt">Value</span> of local variable is <span class="dv">2</span></span>
<span id="cb399-2"><a href="#cb399-2"></a><span class="dt">Value</span> of local variable is <span class="dv">3</span></span>
<span id="cb399-3"><a href="#cb399-3"></a><span class="dt">Value</span> of local variable is <span class="dv">4</span></span>
<span id="cb399-4"><a href="#cb399-4"></a><span class="dt">Value</span> of local variable is <span class="dv">5</span></span>
<span id="cb399-5"><a href="#cb399-5"></a> =&gt; <span class="dv">0</span>..<span class="dv">5</span> </span></code></pre></div>
</section>
<section id="answer-2-score-105" class="level4">
<h4>Answer 2 (score 105)</h4>
<p><code>next</code></p>
<p>also, look at <code>redo</code> which redoes the <em>current</em> iteration.</p>
</section>
<section id="answer-3-score-80" class="level4">
<h4>Answer 3 (score 80)</h4>
<p>Writing <a href="https://stackoverflow.com/a/4010063/261542"><em>Ian Purton’s</em> answer</a> in a slightly more idiomatic way:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb400-1"><a href="#cb400-1"></a>(<span class="dv">1</span>..<span class="dv">5</span>).each <span class="kw">do</span> |x|</span>
<span id="cb400-2"><a href="#cb400-2"></a>  <span class="kw">next</span> <span class="kw">if</span> x &lt; <span class="dv">2</span></span>
<span id="cb400-3"><a href="#cb400-3"></a>  puts x</span>
<span id="cb400-4"><a href="#cb400-4"></a><span class="kw">end</span></span></code></pre></div>
<p>Prints:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb401-1"><a href="#cb401-1"></a>  <span class="dv">2</span></span>
<span id="cb401-2"><a href="#cb401-2"></a>  <span class="dv">3</span></span>
<span id="cb401-3"><a href="#cb401-3"></a>  <span class="dv">4</span></span>
<span id="cb401-4"><a href="#cb401-4"></a>  <span class="dv">5</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-include-and-require-in-ruby-score-221607-in-2017" class="level3">
<h3>75: What is the difference between include and require in Ruby? (score <a href="https://stackoverflow.com/q/318144.html">221607</a> in 2017)</h3>
<section id="question-74" class="level4">
<h4>Question</h4>
<p>My question is similar to “<a href="https://stackoverflow.com/questions/156362/what-is-the-difference-between-include-and-extend-in-ruby">What is the difference between include and extend in Ruby?</a>”.</p>
<p>What’s the difference between <code>require</code> and <code>include</code> in Ruby? If I just want to use the methods from a module in my class, should I <code>require</code> it or <code>include</code> it?</p>
</section>
<section id="answer-accepted-score-538" class="level4">
<h4>Answer accepted (score 538)</h4>
<blockquote>
<p>
<em>What’s the difference between “include” and “require” in Ruby?</em>
</p>
<p><strong>Answer:</strong></p>
<p>
The include and require methods do very different things.
</p>
<p>
The require method does what include does in most other programming languages: run another file. It also tracks what you’ve required in the past and won’t require the same file twice. To run another file without this added functionality, you can use the load method.
</p>
<p>
The include method takes all the methods from another module and includes them into the current module. This is a language-level thing as opposed to a file-level thing as with require. The include method is the primary way to “extend” classes with other modules (usually referred to as mix-ins). For example, if your class defines the method “each”, you can include the mixin module Enumerable and it can act as a collection. This can be confusing as the include verb is used very differently in other languages.
</p>
</blockquote>
<p><a href="https://web.archive.org/web/20150405161656/http://ruby.about.com/b/2008/10/23/a-quick-peek-at-ruby-include-vs-require.htm" rel="noreferrer">Source</a></p>
<p>So if you just want to use a module, rather than extend it or do a mix-in, then you’ll want to use <code>require</code>.</p>
<p>Oddly enough, Ruby’s <code>require</code> is analogous to C’s <code>include</code>, while Ruby’s <code>include</code> is almost nothing like C’s <code>include</code>.</p>
</section>
<section id="answer-2-score-91-2" class="level4">
<h4>Answer 2 (score 91)</h4>
<p>From the Metaprogramming Ruby book,</p>
<blockquote>
<p>
The <code>require()</code> method is quite similar to <code>load()</code>, but it’s meant for a different purpose. You use <code>load()</code> to execute code, and you use <code>require()</code> to import libraries.
</p>
</blockquote>
</section>
<section id="answer-3-score-90-1" class="level4">
<h4>Answer 3 (score 90)</h4>
<p>
If you’re using a module, that means you’re bringing all the methods into your class. If you <code>extend</code> a class with a module, that means you’re “bringing in” the module’s methods as <strong>class</strong> methods. If you <code>include</code> a class with a module, that means you’re “bringing in” the module’s methods as <strong>instance</strong> methods.
</p>
<p>EX:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb402-1"><a href="#cb402-1"></a> <span class="kw">module</span> A</span>
<span id="cb402-2"><a href="#cb402-2"></a>   <span class="kw">def</span> say</span>
<span id="cb402-3"><a href="#cb402-3"></a>     puts <span class="st">&quot;this is module A&quot;</span></span>
<span id="cb402-4"><a href="#cb402-4"></a>   <span class="kw">end</span></span>
<span id="cb402-5"><a href="#cb402-5"></a> <span class="kw">end</span></span>
<span id="cb402-6"><a href="#cb402-6"></a></span>
<span id="cb402-7"><a href="#cb402-7"></a> <span class="kw">class</span> B</span>
<span id="cb402-8"><a href="#cb402-8"></a>   include A</span>
<span id="cb402-9"><a href="#cb402-9"></a> <span class="kw">end</span></span>
<span id="cb402-10"><a href="#cb402-10"></a></span>
<span id="cb402-11"><a href="#cb402-11"></a> <span class="kw">class</span> C</span>
<span id="cb402-12"><a href="#cb402-12"></a>   extend A</span>
<span id="cb402-13"><a href="#cb402-13"></a> <span class="kw">end</span></span></code></pre></div>
<p>
<code>B.say</code> =&gt; undefined method ‘say’ for B:Class
</p>
<p>
<code>B.new.say</code> =&gt; this is module A
</p>
<p>
<code>C.say</code> =&gt; this is module A
</p>
<p>
<code>C.new.say</code> =&gt; undefined method ‘say’ for C:Class
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-for-array-not-empty-any-score-219644-in-2012" class="level3">
<h3>76: Check for array not empty: any? (score <a href="https://stackoverflow.com/q/6245929.html">219644</a> in 2012)</h3>
<section id="question-75" class="level4">
<h4>Question</h4>
<p>Is it bad to check if an array is <strong>not</strong> empty by using <code>any?</code> method?</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb403-1"><a href="#cb403-1"></a>a = [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb403-2"><a href="#cb403-2"></a></span>
<span id="cb403-3"><a href="#cb403-3"></a>a.any?</span>
<span id="cb403-4"><a href="#cb403-4"></a>=&gt; <span class="dv">true</span></span>
<span id="cb403-5"><a href="#cb403-5"></a></span>
<span id="cb403-6"><a href="#cb403-6"></a>a.clear</span>
<span id="cb403-7"><a href="#cb403-7"></a></span>
<span id="cb403-8"><a href="#cb403-8"></a>a.any?</span>
<span id="cb403-9"><a href="#cb403-9"></a>=&gt; <span class="dv">false</span></span></code></pre></div>
<p>Or is it better to use <code>unless a.empty?</code> ?</p>
</section>
<section id="answer-accepted-score-224" class="level4">
<h4>Answer accepted (score 224)</h4>
<p><code>any?</code> isn’t the same as <code>not empty?</code> in some cases.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb404-1"><a href="#cb404-1"></a>&gt;&gt; [<span class="dv">nil</span>, <span class="dv">1</span>].any?</span>
<span id="cb404-2"><a href="#cb404-2"></a>=&gt; <span class="dv">true</span></span>
<span id="cb404-3"><a href="#cb404-3"></a>&gt;&gt; [<span class="dv">nil</span>, <span class="dv">nil</span>].any?</span>
<span id="cb404-4"><a href="#cb404-4"></a>=&gt; <span class="dv">false</span></span></code></pre></div>
<p>From the documentation:</p>
<blockquote>
<p>
If the block is not given, Ruby adds an implicit block of {|obj| obj} (that is any? will return true if at least one of the collection members is not false or nil).
</p>
</blockquote>
</section>
<section id="answer-2-score-74" class="level4">
<h4>Answer 2 (score 74)</h4>
<h5>
The difference between an array evaluating its values to true or if its empty.
</h3>
<p>
The method <code>empty?</code> comes from the Array class<br> <a href="http://ruby-doc.org/core-2.0.0/Array.html#method-i-empty-3F">http://ruby-doc.org/core-2.0.0/Array.html#method-i-empty-3F</a>
</p>
<p>Its used to check if the array contains something or not. This includes things that evaluate to false such as nil and false.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb405-1"><a href="#cb405-1"></a>&gt;&gt; a = []</span>
<span id="cb405-2"><a href="#cb405-2"></a>=&gt; []</span>
<span id="cb405-3"><a href="#cb405-3"></a>&gt;&gt; a.empty?</span>
<span id="cb405-4"><a href="#cb405-4"></a>=&gt; <span class="dv">true</span></span>
<span id="cb405-5"><a href="#cb405-5"></a>&gt;&gt; a = [<span class="dv">nil</span>, <span class="dv">false</span>]</span>
<span id="cb405-6"><a href="#cb405-6"></a>=&gt; [<span class="dv">nil</span>, <span class="dv">false</span>]</span>
<span id="cb405-7"><a href="#cb405-7"></a>&gt;&gt; a.empty?</span>
<span id="cb405-8"><a href="#cb405-8"></a>=&gt; <span class="dv">false</span></span>
<span id="cb405-9"><a href="#cb405-9"></a>&gt;&gt; a = [<span class="dv">nil</span>]</span>
<span id="cb405-10"><a href="#cb405-10"></a>=&gt; [<span class="dv">nil</span>]</span>
<span id="cb405-11"><a href="#cb405-11"></a>&gt;&gt; a.empty?</span>
<span id="cb405-12"><a href="#cb405-12"></a>=&gt; <span class="dv">false</span></span></code></pre></div>
<hr>
<p>
The method <code>any?</code> comes from the Enumerable module.<br> <a href="http://ruby-doc.org/core-2.0.0/Enumerable.html#method-i-any-3F">http://ruby-doc.org/core-2.0.0/Enumerable.html#method-i-any-3F</a>
</p>
<p>
Its used to evaluate if “any” values in the array evaluates to true. Similar methods to this are none? all? and one? where they all just check to see how many times true could be evaluated. which has nothing to do with the count of values found in a array.
</p>
<p>case 1</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb406-1"><a href="#cb406-1"></a>&gt;&gt; a = []</span>
<span id="cb406-2"><a href="#cb406-2"></a>=&gt; []</span>
<span id="cb406-3"><a href="#cb406-3"></a>&gt;&gt; a.any?</span>
<span id="cb406-4"><a href="#cb406-4"></a>=&gt; <span class="dv">false</span></span>
<span id="cb406-5"><a href="#cb406-5"></a>&gt;&gt; a.one?</span>
<span id="cb406-6"><a href="#cb406-6"></a>=&gt; <span class="dv">false</span></span>
<span id="cb406-7"><a href="#cb406-7"></a>&gt;&gt; a.all?</span>
<span id="cb406-8"><a href="#cb406-8"></a>=&gt; <span class="dv">true</span></span>
<span id="cb406-9"><a href="#cb406-9"></a>&gt;&gt; a.none?</span>
<span id="cb406-10"><a href="#cb406-10"></a>=&gt; <span class="dv">true</span></span></code></pre></div>
<p>case 2</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb407-1"><a href="#cb407-1"></a>&gt;&gt; a = [<span class="dv">nil</span>, <span class="dv">true</span>]</span>
<span id="cb407-2"><a href="#cb407-2"></a>=&gt; [<span class="dv">nil</span>, <span class="dv">true</span>]</span>
<span id="cb407-3"><a href="#cb407-3"></a>&gt;&gt; a.any?</span>
<span id="cb407-4"><a href="#cb407-4"></a>=&gt; <span class="dv">true</span></span>
<span id="cb407-5"><a href="#cb407-5"></a>&gt;&gt; a.one?</span>
<span id="cb407-6"><a href="#cb407-6"></a>=&gt; <span class="dv">true</span></span>
<span id="cb407-7"><a href="#cb407-7"></a>&gt;&gt; a.all?</span>
<span id="cb407-8"><a href="#cb407-8"></a>=&gt; <span class="dv">false</span></span>
<span id="cb407-9"><a href="#cb407-9"></a>&gt;&gt; a.none?</span>
<span id="cb407-10"><a href="#cb407-10"></a>=&gt; <span class="dv">false</span></span></code></pre></div>
<p>case 3</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb408-1"><a href="#cb408-1"></a>&gt;&gt; a = [<span class="dv">true</span>, <span class="dv">true</span>]</span>
<span id="cb408-2"><a href="#cb408-2"></a>=&gt; [<span class="dv">true</span>, <span class="dv">true</span>]</span>
<span id="cb408-3"><a href="#cb408-3"></a>&gt;&gt; a.any?</span>
<span id="cb408-4"><a href="#cb408-4"></a>=&gt; <span class="dv">true</span></span>
<span id="cb408-5"><a href="#cb408-5"></a>&gt;&gt; a.one?</span>
<span id="cb408-6"><a href="#cb408-6"></a>=&gt; <span class="dv">false</span></span>
<span id="cb408-7"><a href="#cb408-7"></a>&gt;&gt; a.all?</span>
<span id="cb408-8"><a href="#cb408-8"></a>=&gt; <span class="dv">true</span></span>
<span id="cb408-9"><a href="#cb408-9"></a>&gt;&gt; a.none?</span>
<span id="cb408-10"><a href="#cb408-10"></a>=&gt; <span class="dv">false</span></span></code></pre></div>
</section>
<section id="answer-3-score-29-2" class="level4">
<h4>Answer 3 (score 29)</h4>
<p>Prefixing the statement with an exclamation mark will let you know whether the array is not empty. So in your case -</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb409-1"><a href="#cb409-1"></a>a = [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb409-2"><a href="#cb409-2"></a>!a.empty?</span>
<span id="cb409-3"><a href="#cb409-3"></a>=&gt; <span class="dv">true</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-names-of-all-files-from-a-folder-with-ruby-score-218927-in" class="level3">
<h3>77: Get names of all files from a folder with Ruby (score <a href="https://stackoverflow.com/q/1755665.html">218927</a> in )</h3>
<section id="question-76" class="level4">
<h4>Question</h4>
<p>I want to get all file names from a folder using Ruby.</p>
</section>
<section id="answer-accepted-score-495" class="level4">
<h4>Answer accepted (score 495)</h4>
<p>You also have the shortcut option of</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb410-1"><a href="#cb410-1"></a><span class="dt">Dir</span>[<span class="st">&quot;/path/to/search/*&quot;</span>]</span></code></pre></div>
<p>and if you want to find all Ruby files in any folder or sub-folder:</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb411-1"><a href="#cb411-1"></a><span class="dt">Dir</span>[<span class="st">&quot;/path/to/search/**/*.rb&quot;</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-159" class="level4">
<h4>Answer 2 (score 159)</h4>
<div class="sourceCode" id="cb412"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb412-1"><a href="#cb412-1"></a><span class="dt">Dir</span>.entries(folder)</span></code></pre></div>
<p>example:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb413-1"><a href="#cb413-1"></a><span class="dt">Dir</span>.entries(<span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<p>Source: <a href="http://ruby-doc.org/core/classes/Dir.html#method-c-entries" rel="noreferrer">http://ruby-doc.org/core/classes/Dir.html#method-c-entries</a></p>
</section>
<section id="answer-3-score-89-1" class="level4">
<h4>Answer 3 (score 89)</h4>
<p>The following snippets exactly shows the name of the files inside a directory, skipping subdirectories and <code>"."</code>, <code>".."</code> dotted folders:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb414-1"><a href="#cb414-1"></a><span class="dt">Dir</span>.entries(<span class="st">&quot;your/folder&quot;</span>).select {|f| !<span class="dt">File</span>.directory? f}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="pgconnectionbad---could-not-connect-to-server-connection-refused-score-217377-in-2019" class="level3">
<h3>78: PG::ConnectionBad - could not connect to server: Connection refused (score <a href="https://stackoverflow.com/q/19828385.html">217377</a> in 2019)</h3>
<section id="question-77" class="level4">
<h4>Question</h4>
<p>Every time I run my rails 4.0 server, I get this output.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb415-1"><a href="#cb415-1"></a><span class="dt">Started</span> <span class="dt">GET</span> <span class="st">&quot;/&quot;</span> <span class="kw">for</span> <span class="fl">127.0</span>.<span class="fl">0.1</span> at <span class="dv">2013-11-06</span> <span class="dv">23</span>:<span class="dv">56</span>:<span class="dv">36</span> <span class="dv">-0500</span></span>
<span id="cb415-2"><a href="#cb415-2"></a></span>
<span id="cb415-3"><a href="#cb415-3"></a><span class="dt">PG</span>::<span class="dt">ConnectionBad</span> - could <span class="kw">not</span> connect to <span class="st">server: </span><span class="dt">Connection</span> refused</span>
<span id="cb415-4"><a href="#cb415-4"></a><span class="dt">Is</span> the server running on host <span class="st">&quot;localhost&quot;</span> (::1) <span class="kw">and</span> accepting</span>
<span id="cb415-5"><a href="#cb415-5"></a><span class="dt">TCP</span>/<span class="dt">IP</span> connections on port <span class="dv">5432</span>?</span>
<span id="cb415-6"><a href="#cb415-6"></a>could <span class="kw">not</span> connect to <span class="st">server: </span><span class="dt">Connection</span> refused</span>
<span id="cb415-7"><a href="#cb415-7"></a><span class="dt">Is</span> the server running on host <span class="st">&quot;localhost&quot;</span> (<span class="fl">127.0</span>.<span class="fl">0.1</span>) <span class="kw">and</span> accepting</span>
<span id="cb415-8"><a href="#cb415-8"></a><span class="dt">TCP</span>/<span class="dt">IP</span> connections on port <span class="dv">5432</span>?</span>
<span id="cb415-9"><a href="#cb415-9"></a>could <span class="kw">not</span> connect to <span class="st">server: </span><span class="dt">Connection</span> refused</span>
<span id="cb415-10"><a href="#cb415-10"></a><span class="dt">Is</span> the server running on host <span class="st">&quot;localhost&quot;</span> (fe80::1) <span class="kw">and</span> accepting</span>
<span id="cb415-11"><a href="#cb415-11"></a><span class="dt">TCP</span>/<span class="dt">IP</span> connections on port <span class="dv">5432</span>?</span>
<span id="cb415-12"><a href="#cb415-12"></a>:</span>
<span id="cb415-13"><a href="#cb415-13"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/connection_adapters/postgresql_adapter.rb:<span class="dv">825</span><span class="st">:in</span> <span class="st">`connect&#39;</span></span>
<span id="cb415-14"><a href="#cb415-14"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:542:in `</span>initialize<span class="st">&#39;</span></span>
<span id="cb415-15"><a href="#cb415-15"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:41:in `postgresql_connection&#39;</span></span>
<span id="cb415-16"><a href="#cb415-16"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/connection_adapters/abstract/connection_pool.rb:<span class="dv">440</span><span class="st">:in</span> <span class="st">`new_connection&#39;</span></span>
<span id="cb415-17"><a href="#cb415-17"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:450:in `</span>checkout_new_connection<span class="st">&#39;</span></span>
<span id="cb415-18"><a href="#cb415-18"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:421:in `acquire_connection&#39;</span></span>
<span id="cb415-19"><a href="#cb415-19"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/connection_adapters/abstract/connection_pool.rb:<span class="dv">356</span><span class="st">:in</span> <span class="st">`block in checkout&#39;</span></span>
<span id="cb415-20"><a href="#cb415-20"></a><span class="st"> /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/monitor.rb:211:in `</span>mon_synchronize<span class="st">&#39;</span></span>
<span id="cb415-21"><a href="#cb415-21"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout&#39;</span></span>
<span id="cb415-22"><a href="#cb415-22"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/connection_adapters/abstract/connection_pool.rb:<span class="dv">265</span><span class="st">:in</span> <span class="st">`block in connection&#39;</span></span>
<span id="cb415-23"><a href="#cb415-23"></a><span class="st"> /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/monitor.rb:211:in `</span>mon_synchronize<span class="st">&#39;</span></span>
<span id="cb415-24"><a href="#cb415-24"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:264:in `connection&#39;</span></span>
<span id="cb415-25"><a href="#cb415-25"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/connection_adapters/abstract/connection_pool.rb:<span class="dv">546</span><span class="st">:in</span> <span class="st">`retrieve_connection&#39;</span></span>
<span id="cb415-26"><a href="#cb415-26"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_handling.rb:79:in `</span>retrieve_connection<span class="st">&#39;</span></span>
<span id="cb415-27"><a href="#cb415-27"></a><span class="st"> activerecord (4.0.0) lib/active_record/connection_handling.rb:53:in `connection&#39;</span></span>
<span id="cb415-28"><a href="#cb415-28"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/migration.rb:<span class="dv">792</span><span class="st">:in</span> <span class="st">`current_version&#39;</span></span>
<span id="cb415-29"><a href="#cb415-29"></a><span class="st"> activerecord (4.0.0) lib/active_record/migration.rb:800:in `</span>needs_migration?<span class="st">&#39;</span></span>
<span id="cb415-30"><a href="#cb415-30"></a><span class="st"> activerecord (4.0.0) lib/active_record/migration.rb:379:in `check_pending!&#39;</span></span>
<span id="cb415-31"><a href="#cb415-31"></a> activerecord (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_record/migration.rb:<span class="dv">366</span><span class="st">:in</span> <span class="st">`call&#39;</span></span>
<span id="cb415-32"><a href="#cb415-32"></a><span class="st"> actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `</span>block <span class="kw">in</span> call<span class="st">&#39;</span></span>
<span id="cb415-33"><a href="#cb415-33"></a><span class="st"> activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1613334440513032208__call__callbacks&#39;</span></span>
<span id="cb415-34"><a href="#cb415-34"></a> activesupport (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_support/callbacks.rb:<span class="dv">80</span><span class="st">:in</span> <span class="st">`run_callbacks&#39;</span></span>
<span id="cb415-35"><a href="#cb415-35"></a><span class="st"> actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `</span>call<span class="st">&#39;</span></span>
<span id="cb415-36"><a href="#cb415-36"></a><span class="st"> actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call&#39;</span></span>
<span id="cb415-37"><a href="#cb415-37"></a> actionpack (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/action_dispatch/middleware/remote_ip.rb:<span class="dv">76</span><span class="st">:in</span> <span class="st">`call&#39;</span></span>
<span id="cb415-38"><a href="#cb415-38"></a><span class="st"> better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `</span>protected_app_call<span class="st">&#39;</span></span>
<span id="cb415-39"><a href="#cb415-39"></a><span class="st"> better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call&#39;</span></span>
<span id="cb415-40"><a href="#cb415-40"></a> better_errors (<span class="fl">0.9</span>.<span class="dv">0</span>) lib/better_errors/middleware.rb:<span class="dv">56</span><span class="st">:in</span> <span class="st">`call&#39;</span></span>
<span id="cb415-41"><a href="#cb415-41"></a><span class="st"> actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `</span>call<span class="st">&#39;</span></span>
<span id="cb415-42"><a href="#cb415-42"></a><span class="st"> actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call&#39;</span></span>
<span id="cb415-43"><a href="#cb415-43"></a> railties (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/rails/rack/logger.rb:<span class="dv">38</span><span class="st">:in</span> <span class="st">`call_app&#39;</span></span>
<span id="cb415-44"><a href="#cb415-44"></a><span class="st"> railties (4.0.0) lib/rails/rack/logger.rb:21:in `</span>block <span class="kw">in</span> call<span class="st">&#39;</span></span>
<span id="cb415-45"><a href="#cb415-45"></a><span class="st"> activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged&#39;</span></span>
<span id="cb415-46"><a href="#cb415-46"></a> activesupport (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/active_support/tagged_logging.rb:<span class="dv">25</span><span class="st">:in</span> <span class="st">`tagged&#39;</span></span>
<span id="cb415-47"><a href="#cb415-47"></a><span class="st"> activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `</span>tagged<span class="st">&#39;</span></span>
<span id="cb415-48"><a href="#cb415-48"></a><span class="st"> railties (4.0.0) lib/rails/rack/logger.rb:21:in `call&#39;</span></span>
<span id="cb415-49"><a href="#cb415-49"></a> quiet_assets (<span class="fl">1.0</span>.<span class="dv">2</span>) lib/quiet_assets.rb:<span class="dv">18</span><span class="st">:in</span> <span class="st">`call_with_quiet_assets&#39;</span></span>
<span id="cb415-50"><a href="#cb415-50"></a><span class="st"> actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `</span>call<span class="st">&#39;</span></span>
<span id="cb415-51"><a href="#cb415-51"></a><span class="st"> rack (1.5.2) lib/rack/methodoverride.rb:21:in `call&#39;</span></span>
<span id="cb415-52"><a href="#cb415-52"></a> rack (<span class="fl">1.5</span>.<span class="dv">2</span>) lib/rack/runtime.rb:<span class="dv">17</span><span class="st">:in</span> <span class="st">`call&#39;</span></span>
<span id="cb415-53"><a href="#cb415-53"></a><span class="st"> activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `</span>call<span class="st">&#39;</span></span>
<span id="cb415-54"><a href="#cb415-54"></a><span class="st"> rack (1.5.2) lib/rack/lock.rb:17:in `call&#39;</span></span>
<span id="cb415-55"><a href="#cb415-55"></a> actionpack (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/action_dispatch/middleware/static.rb:<span class="dv">64</span><span class="st">:in</span> <span class="st">`call&#39;</span></span>
<span id="cb415-56"><a href="#cb415-56"></a><span class="st"> railties (4.0.0) lib/rails/engine.rb:511:in `</span>call<span class="st">&#39;</span></span>
<span id="cb415-57"><a href="#cb415-57"></a><span class="st"> railties (4.0.0) lib/rails/application.rb:97:in `call&#39;</span></span>
<span id="cb415-58"><a href="#cb415-58"></a> rack (<span class="fl">1.5</span>.<span class="dv">2</span>) lib/rack/content_length.rb:<span class="dv">14</span><span class="st">:in</span> <span class="st">`call&#39;</span></span>
<span id="cb415-59"><a href="#cb415-59"></a><span class="st"> thin (1.5.1) lib/thin/connection.rb:81:in `</span>block <span class="kw">in</span> pre_process<span class="st">&#39;</span></span>
<span id="cb415-60"><a href="#cb415-60"></a><span class="st"> thin (1.5.1) lib/thin/connection.rb:79:in `pre_process&#39;</span></span>
<span id="cb415-61"><a href="#cb415-61"></a> thin (<span class="fl">1.5</span>.<span class="dv">1</span>) lib/thin/connection.rb:<span class="dv">54</span><span class="st">:in</span> <span class="st">`process&#39;</span></span>
<span id="cb415-62"><a href="#cb415-62"></a><span class="st"> thin (1.5.1) lib/thin/connection.rb:39:in `</span>receive_data<span class="st">&#39;</span></span>
<span id="cb415-63"><a href="#cb415-63"></a><span class="st"> eventmachine (1.0.3) lib/eventmachine.rb:187:in `run&#39;</span></span>
<span id="cb415-64"><a href="#cb415-64"></a> thin (<span class="fl">1.5</span>.<span class="dv">1</span>) lib/thin/backends/base.rb:<span class="dv">63</span><span class="st">:in</span> <span class="st">`start&#39;</span></span>
<span id="cb415-65"><a href="#cb415-65"></a><span class="st"> thin (1.5.1) lib/thin/server.rb:159:in `</span>start<span class="st">&#39;</span></span>
<span id="cb415-66"><a href="#cb415-66"></a><span class="st"> rack (1.5.2) lib/rack/handler/thin.rb:16:in `run&#39;</span></span>
<span id="cb415-67"><a href="#cb415-67"></a> rack (<span class="fl">1.5</span>.<span class="dv">2</span>) lib/rack/server.rb:<span class="dv">264</span><span class="st">:in</span> <span class="st">`start&#39;</span></span>
<span id="cb415-68"><a href="#cb415-68"></a><span class="st"> railties (4.0.0) lib/rails/commands/server.rb:84:in `</span>start<span class="st">&#39;</span></span>
<span id="cb415-69"><a href="#cb415-69"></a><span class="st"> railties (4.0.0) lib/rails/commands.rb:78:in `block in &lt;top (required)&gt;&#39;</span></span>
<span id="cb415-70"><a href="#cb415-70"></a> railties (<span class="fl">4.0</span>.<span class="dv">0</span>) lib/rails/commands.rb:<span class="dv">73</span><span class="st">:in</span> <span class="st">`&lt;top (required)&gt;&#39;</span></span>
<span id="cb415-71"><a href="#cb415-71"></a><span class="st"> bin/rails:4:in `</span>&lt;main&gt;<span class="st">&#39;</span></span></code></pre></div>
<p>I’m running Mavericks OS X 10.9 so I don’t know if that’s the problem. I’ve tried everything I could but nothing seems to work. I’ve uninstalled and install both postgres and the pg gem multiple times now.</p>
<p>This is my database.yml file</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb416-1"><a href="#cb416-1"></a>development:</span>
<span id="cb416-2"><a href="#cb416-2"></a>  <span class="st">adapter: </span>postgresql</span>
<span id="cb416-3"><a href="#cb416-3"></a>  <span class="st">encoding: </span>unicode</span>
<span id="cb416-4"><a href="#cb416-4"></a>  <span class="st">database: </span>metals-directory_development</span>
<span id="cb416-5"><a href="#cb416-5"></a>  <span class="st">pool: </span><span class="dv">5</span></span>
<span id="cb416-6"><a href="#cb416-6"></a>  <span class="st">username: </span></span>
<span id="cb416-7"><a href="#cb416-7"></a>  <span class="st">password: </span></span>
<span id="cb416-8"><a href="#cb416-8"></a>  <span class="st">template: </span>template0</span>
<span id="cb416-9"><a href="#cb416-9"></a>  <span class="st">host: </span>localhost</span>
<span id="cb416-10"><a href="#cb416-10"></a>  <span class="st">port: </span><span class="dv">5432</span></span>
<span id="cb416-11"><a href="#cb416-11"></a></span>
<span id="cb416-12"><a href="#cb416-12"></a>test: &amp;test</span>
<span id="cb416-13"><a href="#cb416-13"></a>  <span class="st">adapter: </span>postgresql</span>
<span id="cb416-14"><a href="#cb416-14"></a>  <span class="st">encoding: </span>unicode</span>
<span id="cb416-15"><a href="#cb416-15"></a>  <span class="st">database: </span>metals-directory_test</span>
<span id="cb416-16"><a href="#cb416-16"></a>  <span class="st">pool: </span><span class="dv">5</span></span>
<span id="cb416-17"><a href="#cb416-17"></a>  <span class="st">username: </span></span>
<span id="cb416-18"><a href="#cb416-18"></a>  <span class="st">password: </span></span>
<span id="cb416-19"><a href="#cb416-19"></a>  <span class="st">template: </span>template0</span>
<span id="cb416-20"><a href="#cb416-20"></a>  <span class="st">host: </span>localhost</span>
<span id="cb416-21"><a href="#cb416-21"></a>  <span class="st">port: </span><span class="dv">5432</span></span>
<span id="cb416-22"><a href="#cb416-22"></a></span>
<span id="cb416-23"><a href="#cb416-23"></a>staging:</span>
<span id="cb416-24"><a href="#cb416-24"></a>  <span class="st">adapter: </span>postgresql</span>
<span id="cb416-25"><a href="#cb416-25"></a>  <span class="st">encoding: </span>unicode</span>
<span id="cb416-26"><a href="#cb416-26"></a>  <span class="st">database: </span>metals-directory_production</span>
<span id="cb416-27"><a href="#cb416-27"></a>  <span class="st">pool: </span><span class="dv">5</span></span>
<span id="cb416-28"><a href="#cb416-28"></a>  username:</span>
<span id="cb416-29"><a href="#cb416-29"></a>  password:</span>
<span id="cb416-30"><a href="#cb416-30"></a>  <span class="st">template: </span>template0</span>
<span id="cb416-31"><a href="#cb416-31"></a>  <span class="st">host: </span>localhost</span>
<span id="cb416-32"><a href="#cb416-32"></a></span>
<span id="cb416-33"><a href="#cb416-33"></a>production:</span>
<span id="cb416-34"><a href="#cb416-34"></a>  <span class="st">adapter: </span>postgresql</span>
<span id="cb416-35"><a href="#cb416-35"></a>  <span class="st">encoding: </span>unicode</span>
<span id="cb416-36"><a href="#cb416-36"></a>  <span class="st">database: </span>metals-directory_production</span>
<span id="cb416-37"><a href="#cb416-37"></a>  <span class="st">pool: </span><span class="dv">5</span></span>
<span id="cb416-38"><a href="#cb416-38"></a>  username:</span>
<span id="cb416-39"><a href="#cb416-39"></a>  password:</span>
<span id="cb416-40"><a href="#cb416-40"></a>  <span class="st">template: </span>template0</span>
<span id="cb416-41"><a href="#cb416-41"></a>  <span class="st">host: </span>localhost</span>
<span id="cb416-42"><a href="#cb416-42"></a></span>
<span id="cb416-43"><a href="#cb416-43"></a>cucumber:</span>
<span id="cb416-44"><a href="#cb416-44"></a>  &lt;&lt;: *test</span></code></pre></div>
</section>
<section id="answer-accepted-score-587" class="level4">
<h4>Answer accepted (score 587)</h4>
<p>It could be as simple as a stale <strong>PID file</strong>. It could be failing silently because your computer didn’t complete the shutdown process completely which means <strong>postgres</strong> didn’t delete the <strong>PID</strong> (process id) file.</p>
<p>The PID file is used by postgres to make sure only one instance of the server is running at a time. So when it goes to start again, it fails because there is already a <strong>PID</strong> file which tells <strong>postgres</strong> that another instance of the server was started (even though it isn’t running, it just didn’t get to shutdown and delete the PID).</p>
<ol>
<li>
To fix it remove/rename the PID file. Find the postgres data directory. On macOS using homebrew it is in <code>/usr/local/var/postgres/</code>, or <code>/usr/local/var/log/</code> other systems it might be <code>/usr/var/postgres/</code>.
</li>
<li>
To make sure this is the problem, look at the log file (<code>server.log</code>). On the last lines you will see:
</li>
</ol>
<blockquote>
<p>
FATAL: lock file “postmaster.pid” already exists<br> HINT: Is another postmaster (PID 347) running in data directory “/usr/local/var/postgres”?
</p>
</blockquote>
<ol start="3">
<li>
If so, <code>rm postmaster.pid</code>
</li>
<li>
<p>
Restart your server. On a mac using launchctl (with homebrew) the following commands will restart the server.
</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb417-1"><a href="#cb417-1"></a>launchctl unload homebrew.mxcl.postgresql.plist  </span>
<span id="cb417-2"><a href="#cb417-2"></a>launchctl load -w homebrew.mxcl.postgresql.plist</span></code></pre></div>
<p>OR on newer versions of <strong>Brew</strong></p>
<div class="sourceCode" id="cb418"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb418-1"><a href="#cb418-1"></a>brew services restart postgresql</span>
<span id="cb418-2"><a href="#cb418-2"></a><span class="st">```&lt;/li&gt;</span></span>
<span id="cb418-3"><a href="#cb418-3"></a><span class="st">&lt;/ol&gt;</span></span>
<span id="cb418-4"><a href="#cb418-4"></a></span>
<span id="cb418-5"><a href="#cb418-5"></a><span class="st">#### Answer 2 (score 41)</span></span>
<span id="cb418-6"><a href="#cb418-6"></a><span class="st">After a lot of searching and analysis, I found a solution if you are using ubuntu just write this command in your terminal and hit enter  </span></span>
<span id="cb418-7"><a href="#cb418-7"></a></span>
<span id="cb418-8"><a href="#cb418-8"></a><span class="st">```</span>ruby</span>
<span id="cb418-9"><a href="#cb418-9"></a>sudo service postgresql restart</span></code></pre></div>
<p>This will restart your PostgreSQL, hope this would behelp for you.</p>
</section>
<section id="answer-3-score-32-1" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>I have managed to solve the problem by following the Chris Slade’s answer, but to restart the server, I had to use the following commands:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb419-1"><a href="#cb419-1"></a>launchctl unload ~<span class="ot">/Library/</span><span class="dt">LaunchAgents</span>/homebrew.mxcl.postgresql.plist</span>
<span id="cb419-2"><a href="#cb419-2"></a></span>
<span id="cb419-3"><a href="#cb419-3"></a>launchctl load ~<span class="ot">/Library/</span><span class="dt">LaunchAgents</span>/homebrew.mxcl.postgresql.plist</span></code></pre></div>
<p>that I found <a href="https://stackoverflow.com/questions/7990539/restarting-postgres-on-mac">here</a> (pjammer’s answer down at the bottom)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-redirect-to-a-404-in-rails-score-217141-in-2017" class="level3">
<h3>79: How to redirect to a 404 in Rails? (score <a href="https://stackoverflow.com/q/2385799.html">217141</a> in 2017)</h3>
<section id="question-78" class="level4">
<h4>Question</h4>
<p>I’d like to ‘fake’ a 404 page in Rails. In PHP, I would just send a header with the error code as such:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb420-1"><a href="#cb420-1"></a>header(<span class="st">&quot;HTTP/1.0 404 Not Found&quot;</span>);</span></code></pre></div>
<p>How is that done with Rails?</p>
</section>
<section id="answer-accepted-score-1035" class="level4">
<h4>Answer accepted (score 1035)</h4>
<p>Don’t render 404 yourself, there’s no reason to; Rails has this functionality built in already. If you want to show a 404 page, create a <code>render_404</code> method (or <code>not_found</code> as I called it) in <code>ApplicationController</code> like this:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb421-1"><a href="#cb421-1"></a><span class="kw">def</span> not_found</span>
<span id="cb421-2"><a href="#cb421-2"></a>  raise <span class="dt">ActionController</span>::<span class="dt">RoutingError</span>.new(<span class="st">&#39;Not Found&#39;</span>)</span>
<span id="cb421-3"><a href="#cb421-3"></a><span class="kw">end</span></span></code></pre></div>
<p>Rails also handles <code>AbstractController::ActionNotFound</code>, and <code>ActiveRecord::RecordNotFound</code> the same way.</p>
<p>This does two things better:</p>
<p>
<ol type="1">
<li>It uses Rails’ built in <code>rescue_from</code> handler to render the 404 page, and</li>
<li>it interrupts the execution of your code, letting you do nice things like:
</p></li>
</ol>
<div class="sourceCode" id="cb422"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb422-1"><a href="#cb422-1"></a>  user = <span class="dt">User</span>.find_by_email(params[<span class="st">:email</span>]) <span class="kw">or</span> not_found</span>
<span id="cb422-2"><a href="#cb422-2"></a>  user.do_something!</span></code></pre></div>
<p>without having to write ugly conditional statements.</p>
<p>As a bonus, it’s also super easy to handle in tests. For example, in an rspec integration test:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb423-1"><a href="#cb423-1"></a><span class="co"># RSpec 1</span></span>
<span id="cb423-2"><a href="#cb423-2"></a></span>
<span id="cb423-3"><a href="#cb423-3"></a>lambda {</span>
<span id="cb423-4"><a href="#cb423-4"></a>  visit <span class="st">&#39;/something/you/want/to/404&#39;</span></span>
<span id="cb423-5"><a href="#cb423-5"></a>}.should raise_error(<span class="dt">ActionController</span>::<span class="dt">RoutingError</span>)</span>
<span id="cb423-6"><a href="#cb423-6"></a></span>
<span id="cb423-7"><a href="#cb423-7"></a><span class="co"># RSpec 2+</span></span>
<span id="cb423-8"><a href="#cb423-8"></a></span>
<span id="cb423-9"><a href="#cb423-9"></a>expect {</span>
<span id="cb423-10"><a href="#cb423-10"></a>  get <span class="st">&#39;/something/you/want/to/404&#39;</span></span>
<span id="cb423-11"><a href="#cb423-11"></a>}.to raise_error(<span class="dt">ActionController</span>::<span class="dt">RoutingError</span>)</span></code></pre></div>
<p>And minitest:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb424-1"><a href="#cb424-1"></a>assert_raises(<span class="dt">ActionController</span>::<span class="dt">RoutingError</span>) <span class="kw">do</span> </span>
<span id="cb424-2"><a href="#cb424-2"></a>  get <span class="st">&#39;/something/you/want/to/404&#39;</span></span>
<span id="cb424-3"><a href="#cb424-3"></a><span class="kw">end</span></span></code></pre></div>
<p>OR refer more info from <a href="https://rubyinrails.com/2018/02/26/rails-render-404-not-found-from-controller-action/" rel="noreferrer">Rails render 404 not found from a controller action</a></p>
</section>
<section id="answer-2-score-240-2" class="level4">
<h4>Answer 2 (score 240)</h4>
<h5>
HTTP 404 Status
</h2>
<p>To return a 404 header, just use the <code>:status</code> option for the render method.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb425-1"><a href="#cb425-1"></a><span class="kw">def</span> action</span>
<span id="cb425-2"><a href="#cb425-2"></a>  <span class="co"># here the code</span></span>
<span id="cb425-3"><a href="#cb425-3"></a></span>
<span id="cb425-4"><a href="#cb425-4"></a>  render <span class="st">:status</span> =&gt; <span class="dv">404</span></span>
<span id="cb425-5"><a href="#cb425-5"></a><span class="kw">end</span></span></code></pre></div>
<p>If you want to render the standard 404 page you can extract the feature in a method.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb426-1"><a href="#cb426-1"></a><span class="kw">def</span> render_404</span>
<span id="cb426-2"><a href="#cb426-2"></a>  respond_to <span class="kw">do</span> |format|</span>
<span id="cb426-3"><a href="#cb426-3"></a>    format.html { render <span class="st">:file</span> =&gt; <span class="st">&quot;</span><span class="ot">#{</span><span class="dt">Rails</span>.root<span class="ot">}</span><span class="st">/public/404&quot;</span>, <span class="st">:layout</span> =&gt; <span class="dv">false</span>, <span class="st">:status</span> =&gt; <span class="st">:not_found</span> }</span>
<span id="cb426-4"><a href="#cb426-4"></a>    format.xml  { head <span class="st">:not_found</span> }</span>
<span id="cb426-5"><a href="#cb426-5"></a>    format.any  { head <span class="st">:not_found</span> }</span>
<span id="cb426-6"><a href="#cb426-6"></a>  <span class="kw">end</span></span>
<span id="cb426-7"><a href="#cb426-7"></a><span class="kw">end</span></span></code></pre></div>
<p>and call it in your action</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb427-1"><a href="#cb427-1"></a><span class="kw">def</span> action</span>
<span id="cb427-2"><a href="#cb427-2"></a>  <span class="co"># here the code</span></span>
<span id="cb427-3"><a href="#cb427-3"></a></span>
<span id="cb427-4"><a href="#cb427-4"></a>  render_404</span>
<span id="cb427-5"><a href="#cb427-5"></a><span class="kw">end</span></span></code></pre></div>
<p>If you want the action to render the error page and stop, simply use a return statement.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb428-1"><a href="#cb428-1"></a><span class="kw">def</span> action</span>
<span id="cb428-2"><a href="#cb428-2"></a>  render_404 <span class="kw">and</span> <span class="kw">return</span> <span class="kw">if</span> params[<span class="st">:something</span>].blank?</span>
<span id="cb428-3"><a href="#cb428-3"></a></span>
<span id="cb428-4"><a href="#cb428-4"></a>  <span class="co"># here the code that will never be executed</span></span>
<span id="cb428-5"><a href="#cb428-5"></a><span class="kw">end</span></span></code></pre></div>
<h5>
ActiveRecord and HTTP 404
</h2>
<p>Also remember that Rails rescues some ActiveRecord errors, such as the <code>ActiveRecord::RecordNotFound</code> displaying the 404 error page.</p>
<p>It means you don’t need to rescue this action yourself</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb429-1"><a href="#cb429-1"></a><span class="kw">def</span> show</span>
<span id="cb429-2"><a href="#cb429-2"></a>  user = <span class="dt">User</span>.find(params[<span class="st">:id</span>])</span>
<span id="cb429-3"><a href="#cb429-3"></a><span class="kw">end</span></span></code></pre></div>
<p><code>User.find</code> raises an <code>ActiveRecord::RecordNotFound</code> when the user doesn’t exist. This is a very powerful feature. Look at the following code</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb430-1"><a href="#cb430-1"></a><span class="kw">def</span> show</span>
<span id="cb430-2"><a href="#cb430-2"></a>  user = <span class="dt">User</span>.find_by_email(params[<span class="st">:email</span>]) <span class="kw">or</span> raise(<span class="st">&quot;not found&quot;</span>)</span>
<span id="cb430-3"><a href="#cb430-3"></a>  <span class="co"># ...</span></span>
<span id="cb430-4"><a href="#cb430-4"></a><span class="kw">end</span></span></code></pre></div>
<p>You can simplify it by delegating to Rails the check. Simply use the bang version.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb431-1"><a href="#cb431-1"></a><span class="kw">def</span> show</span>
<span id="cb431-2"><a href="#cb431-2"></a>  user = <span class="dt">User</span>.find_by_email!(params[<span class="st">:email</span>])</span>
<span id="cb431-3"><a href="#cb431-3"></a>  <span class="co"># ...</span></span>
<span id="cb431-4"><a href="#cb431-4"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-3-score-59-1" class="level4">
<h4>Answer 3 (score 59)</h4>
<p>The newly Selected answer submitted by Steven Soroka is close, but not complete. The test itself hides the fact that this is not returning a true 404 - it’s returning a status of 200 - “success”. The original answer was closer, but attempted to render the layout as if no failure had occurred. This fixes everything:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb432-1"><a href="#cb432-1"></a>render <span class="st">:text</span> =&gt; <span class="st">&#39;Not Found&#39;</span>, <span class="st">:status</span> =&gt; <span class="st">&#39;404&#39;</span></span></code></pre></div>
<p>Here’s a typical test set of mine for something I expect to return 404, using RSpec and Shoulda matchers:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb433-1"><a href="#cb433-1"></a>describe <span class="st">&quot;user view&quot;</span> <span class="kw">do</span></span>
<span id="cb433-2"><a href="#cb433-2"></a>  before <span class="kw">do</span></span>
<span id="cb433-3"><a href="#cb433-3"></a>    get <span class="st">:show</span>, <span class="st">:id</span> =&gt; <span class="st">&#39;nonsense&#39;</span></span>
<span id="cb433-4"><a href="#cb433-4"></a>  <span class="kw">end</span></span>
<span id="cb433-5"><a href="#cb433-5"></a></span>
<span id="cb433-6"><a href="#cb433-6"></a>  it { should_not assign_to <span class="st">:user</span> }</span>
<span id="cb433-7"><a href="#cb433-7"></a></span>
<span id="cb433-8"><a href="#cb433-8"></a>  it { should respond_with <span class="st">:not_found</span> }</span>
<span id="cb433-9"><a href="#cb433-9"></a>  it { should respond_with_content_type <span class="st">:html</span> }</span>
<span id="cb433-10"><a href="#cb433-10"></a></span>
<span id="cb433-11"><a href="#cb433-11"></a>  it { should_not render_template <span class="st">:show</span> }</span>
<span id="cb433-12"><a href="#cb433-12"></a>  it { should_not render_with_layout }</span>
<span id="cb433-13"><a href="#cb433-13"></a></span>
<span id="cb433-14"><a href="#cb433-14"></a>  it { should_not set_the_flash }</span>
<span id="cb433-15"><a href="#cb433-15"></a><span class="kw">end</span></span></code></pre></div>
<p>This healthy paranoia allowed me to spot the content-type mismatch when everything else looked peachy :) I check for all these elements: assigned variables, response code, response content type, template rendered, layout rendered, flash messages.</p>
<p>I’ll skip the content type check on applications that are strictly html…sometimes. After all, “a skeptic checks ALL the drawers” :)</p>
<p><a href="http://dilbert.com/strips/comic/1998-01-20/" rel="noreferrer">http://dilbert.com/strips/comic/1998-01-20/</a></p>
<p>FYI: I don’t recommend testing for things that are happening in the controller, ie “should_raise”. What you care about is the output. My tests above allowed me to try various solutions, and the tests remain the same whether the solution is raising an exception, special rendering, etc.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="remove-substring-from-the-string-score-215430-in-2011" class="level3">
<h3>80: Remove substring from the string (score <a href="https://stackoverflow.com/q/5367164.html">215430</a> in 2011)</h3>
<section id="question-79" class="level4">
<h4>Question</h4>
<p>
I am just wondering if there is any method to remove string from another string? Something like this:
</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb434-1"><a href="#cb434-1"></a><span class="kw">class</span> <span class="dt">String</span></span>
<span id="cb434-2"><a href="#cb434-2"></a>  <span class="kw">def</span> remove(s)</span>
<span id="cb434-3"><a href="#cb434-3"></a>    <span class="dv">self</span>[s.length, <span class="dv">self</span>.length - s.length]</span>
<span id="cb434-4"><a href="#cb434-4"></a>  <span class="kw">end</span></span>
<span id="cb434-5"><a href="#cb434-5"></a><span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-249" class="level4">
<h4>Answer accepted (score 249)</h4>
<p>You can use the slice method:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb435-1"><a href="#cb435-1"></a>a = <span class="st">&quot;foobar&quot;</span></span>
<span id="cb435-2"><a href="#cb435-2"></a>a.slice! <span class="st">&quot;foo&quot;</span></span>
<span id="cb435-3"><a href="#cb435-3"></a>=&gt; <span class="st">&quot;foo&quot;</span></span>
<span id="cb435-4"><a href="#cb435-4"></a>a</span>
<span id="cb435-5"><a href="#cb435-5"></a>=&gt; <span class="st">&quot;bar&quot;</span></span></code></pre></div>
<p>
there is a non ‘!’ version as well. More info can be seen in the documentation about other versions as well: <a href="http://www.ruby-doc.org/core/classes/String.html#M001213" rel="noreferrer">http://www.ruby-doc.org/core/classes/String.html#M001213</a>
</p>
</section>
<section id="answer-2-score-153" class="level4">
<h4>Answer 2 (score 153)</h4>
<p>
How about <code>str.gsub("subString", "")</code> Check out the <a href="http://www.ruby-doc.org/core/classes/String.html" rel="noreferrer">Ruby Doc</a>
</p>
</section>
<section id="answer-3-score-97" class="level4">
<h4>Answer 3 (score 97)</h4>
<p>If it is a the end of the string, you can also use <a href="http://ruby-doc.org/core-2.1.1/String.html#method-i-chomp" rel="noreferrer"><code>chomp</code></a>:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb436-1"><a href="#cb436-1"></a><span class="st">&quot;hello&quot;</span>.chomp(<span class="st">&quot;llo&quot;</span>)     <span class="co">#=&gt; &quot;he&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ruby-require-error-cannot-load-such-file-score-213382-in-2014" class="level3">
<h3>81: Ruby ‘require’ error: cannot load such file (score <a href="https://stackoverflow.com/q/9750610.html">213382</a> in 2014)</h3>
<section id="question-80" class="level4">
<h4>Question</h4>
<p>I’ve one file, main.rb with the following content:</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb437-1"><a href="#cb437-1"></a>require <span class="st">&quot;tokenizer.rb&quot;</span></span></code></pre></div>
<p>The tokenizer.rb file is in the <em>same directory</em> and its content is:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb438-1"><a href="#cb438-1"></a><span class="kw">class</span> <span class="dt">Tokenizer</span></span>
<span id="cb438-2"><a href="#cb438-2"></a>    <span class="kw">def</span> <span class="dv">self</span>.tokenize(string)</span>
<span id="cb438-3"><a href="#cb438-3"></a>        <span class="kw">return</span> string.split(<span class="st">&quot; &quot;</span>)</span>
<span id="cb438-4"><a href="#cb438-4"></a>    <span class="kw">end</span></span>
<span id="cb438-5"><a href="#cb438-5"></a><span class="kw">end</span></span></code></pre></div>
<p>If i try to run main.rb I get the following error:</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb439-1"><a href="#cb439-1"></a>C:\<span class="dt">Documents</span> <span class="kw">and</span> <span class="dt">Settings</span>\my\src\folder&gt;ruby main.rb</span>
<span id="cb439-2"><a href="#cb439-2"></a></span>
<span id="cb439-3"><a href="#cb439-3"></a>C:<span class="ot">/Ruby193/</span>lib/ruby/<span class="fl">1.9</span>.<span class="dv">1</span>/rubygems/custom_require.rb:<span class="dv">36</span><span class="st">:in</span> <span class="st">`require&#39;: cannot load such file -- tokenizer.rb (LoadError)</span></span>
<span id="cb439-4"><a href="#cb439-4"></a><span class="st">        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `</span>require <span class="st">&#39;</span></span>
<span id="cb439-5"><a href="#cb439-5"></a><span class="st">        from main.rb:1:in `&lt;main&gt;&#39;</span></span></code></pre></div>
<p>I just noticed that if I use <code>load</code> instead of <code>require</code> everything works fine. What may the problem be here?</p>
</section>
<section id="answer-accepted-score-183" class="level4">
<h4>Answer accepted (score 183)</h4>
<p>I just tried and it works with <code>require "./tokenizer"</code>. Hope this helps.</p>
</section>
<section id="answer-2-score-176" class="level4">
<h4>Answer 2 (score 176)</h4>
<p>Just do this:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb440-1"><a href="#cb440-1"></a>require_relative <span class="st">&#39;tokenizer&#39;</span></span></code></pre></div>
<p>If you put this in a Ruby file that is in the same directory as <code>tokenizer.rb</code>, it will work fine no matter what your current working directory (CWD) is.</p>
<h5>
Explanation of why this is the best way
</h2>
<p>The other answers claim you should use <code>require './tokenizer'</code>, but that is the <em>wrong</em> answer, because it will only work if you run your Ruby process in the same directory that <code>tokenizer.rb</code> is in. Pretty much the only reason to consider using <code>require</code> like that would be if you need to support Ruby 1.8, which doesn’t have <code>require_relative</code>.</p>
<p>The <code>require './tokenizer'</code> answer might work for you today, but it unnecessarily limits the ways in which you can run your Ruby code. Tomorrow, if you want to move your files to a different directory, or just want to start your Ruby process from a different directory, you’ll have to rethink all of those <code>require</code> statements.</p>
<p>Using <code>require</code> to access files that are on the load path is a fine thing and Ruby gems do it all the time. But you shouldn’t start the argument to <code>require</code> with a <code>.</code> unless you are doing something very special and know what you are doing.</p>
<p>When you write code that makes assumptions about its environment, you should think carefully about what assumptions to make. In this case, there are up to three different ways to require the <code>tokenizer</code> file, and each makes a different assumption:</p>
<ol>
<li>
<code>require_relative 'path/to/tokenizer'</code>: Assumes that the relative path between the two Ruby source files will stay the same.
</li>
<li>
<code>require 'path/to/tokenizer'</code>: Assumes that <code>path/to/tokenizer</code> is inside one of the directories on the load path (<code>$LOAD_PATH</code>). This generally requires extra setup, since you have to add something to the load path.
</li>
<li>
<code>require './path/to/tokenizer'</code>: Assumes that the relative path from the Ruby process’s current working directory to <code>tokenizer.rb</code> is going to stay the same.
</li>
</ol>
<p>I think that for most people and most situations, the assumptions made in options #1 and #2 are more likely to hold true over time.</p>
</section>
<section id="answer-3-score-87" class="level4">
<h4>Answer 3 (score 87)</h4>
<p>Ruby 1.9 has removed the current directory from the load path, and so you will need to do a relative require on this file, as David Grayson says:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb441-1"><a href="#cb441-1"></a>require_relative <span class="st">&#39;tokenizer&#39;</span></span></code></pre></div>
<p>There’s no need to suffix it with <code>.rb</code>, as Ruby’s smart enough to know that’s what you mean anyway.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="map-and-remove-nil-values-in-ruby-score-211476-in-2019" class="level3">
<h3>82: Map and Remove nil values in Ruby (score <a href="https://stackoverflow.com/q/13485468.html">211476</a> in 2019)</h3>
<section id="question-81" class="level4">
<h4>Question</h4>
<p>I have a map which either changes a value or sets it to nil. I then want to remove the nil entries from the list. The list doesn’t need to be kept.</p>
<p>This is what I currently have:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb442-1"><a href="#cb442-1"></a><span class="co"># A simple example function, which returns a value or nil</span></span>
<span id="cb442-2"><a href="#cb442-2"></a><span class="kw">def</span> transform(n)</span>
<span id="cb442-3"><a href="#cb442-3"></a>  rand &gt; <span class="fl">0.5</span> ? n * <span class="dv">10</span> : <span class="dv">nil</span> }</span>
<span id="cb442-4"><a href="#cb442-4"></a><span class="kw">end</span></span>
<span id="cb442-5"><a href="#cb442-5"></a></span>
<span id="cb442-6"><a href="#cb442-6"></a>items.map! { |x| transform(x) } <span class="co"># [1, 2, 3, 4, 5] =&gt; [10, nil, 30, 40, nil]</span></span>
<span id="cb442-7"><a href="#cb442-7"></a>items.reject! { |x| x.nil? } <span class="co"># [10, nil, 30, 40, nil] =&gt; [10, 30, 40]</span></span></code></pre></div>
<p>I’m aware I could just do a loop and conditionally collect in another array like this:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb443-1"><a href="#cb443-1"></a>new_items = []</span>
<span id="cb443-2"><a href="#cb443-2"></a>items.each <span class="kw">do</span> |x|</span>
<span id="cb443-3"><a href="#cb443-3"></a>    x = transform(x)</span>
<span id="cb443-4"><a href="#cb443-4"></a>    new_items.append(x) <span class="kw">unless</span> x.nil?</span>
<span id="cb443-5"><a href="#cb443-5"></a><span class="kw">end</span></span>
<span id="cb443-6"><a href="#cb443-6"></a>items = new_items</span></code></pre></div>
<p>But it doesn’t seem that idiomatic. Is there a nice way to map a function over a list, removing/excluding the nils as you go?</p>
</section>
<section id="answer-accepted-score-858" class="level4">
<h4>Answer accepted (score 858)</h4>
<p>You could use <a href="https://ruby-doc.org/core-1.9.3/Array.html#method-i-compact" rel="noreferrer"><code>compact</code></a>:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb444-1"><a href="#cb444-1"></a>[<span class="dv">1</span>, <span class="dv">nil</span>, <span class="dv">3</span>, <span class="dv">nil</span>, <span class="dv">nil</span>].compact</span>
<span id="cb444-2"><a href="#cb444-2"></a>=&gt; [<span class="dv">1</span>, <span class="dv">3</span>] </span></code></pre></div>
<hr>
<p>I’d like to remind people that if you’re getting an array containing nils as the output of a <code>map</code> block, and that block tries to conditionally return values, then you’ve got code smell and need to rethink your logic.</p>
<p>For instance, if you’re doing something that does this:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb445-1"><a href="#cb445-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].map{ |i|</span>
<span id="cb445-2"><a href="#cb445-2"></a>  <span class="kw">if</span> i % <span class="dv">2</span> == <span class="dv">0</span></span>
<span id="cb445-3"><a href="#cb445-3"></a>    i</span>
<span id="cb445-4"><a href="#cb445-4"></a>  <span class="kw">end</span></span>
<span id="cb445-5"><a href="#cb445-5"></a>}</span>
<span id="cb445-6"><a href="#cb445-6"></a><span class="co"># =&gt; [nil, 2, nil]</span></span></code></pre></div>
<p>Then don’t. Instead, prior to the <code>map</code>, <code>reject</code> the stuff you don’t want or <code>select</code> what you do want:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb446-1"><a href="#cb446-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>].select{ |i| i % <span class="dv">2</span> == <span class="dv">0</span> }.map{ |i|</span>
<span id="cb446-2"><a href="#cb446-2"></a>  i</span>
<span id="cb446-3"><a href="#cb446-3"></a>}</span>
<span id="cb446-4"><a href="#cb446-4"></a><span class="co"># =&gt; [2]</span></span></code></pre></div>
<p>I consider using <code>compact</code> to clean up a mess as a last-ditch effort to get rid of things we didn’t handle correctly, usually because we didn’t know what was coming at us. We should always know what sort of data is being thrown around in our program; Unexpected/unknown data is bad. Anytime I see nils in an array I’m working on, I dig into why they exist, and see if I can improve the code generating the array, rather than allow Ruby to waste time and memory generating nils then sifting through the array to remove them later.</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb447-1"><a href="#cb447-1"></a><span class="st">&#39;Just my $%0.2f.&#39;</span> % [<span class="dv">2</span>.to_f/<span class="dv">100</span>]</span></code></pre></div>
</section>
<section id="answer-2-score-89" class="level4">
<h4>Answer 2 (score 89)</h4>
<p>Try using <code>#reduce</code> or <code>#inject</code>!</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb448-1"><a href="#cb448-1"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>].reduce([]) { |memo, i|</span>
<span id="cb448-2"><a href="#cb448-2"></a>  <span class="kw">if</span> i % <span class="dv">2</span> == <span class="dv">0</span></span>
<span id="cb448-3"><a href="#cb448-3"></a>    memo &lt;&lt; i</span>
<span id="cb448-4"><a href="#cb448-4"></a>  <span class="kw">end</span></span>
<span id="cb448-5"><a href="#cb448-5"></a></span>
<span id="cb448-6"><a href="#cb448-6"></a>  memo</span>
<span id="cb448-7"><a href="#cb448-7"></a>}</span></code></pre></div>
<p>I agree with the accepted answer that we shouldn’t map and compact, but not for the same reasons!</p>
<p>I feel deep inside that map-then-compact is equivalent to select-then-map. Consider: a map is a one-to-one function. If you are mapping from some set of values, and you map, then you <em>want</em> one value in the output set for each value in the input set. If you are having to select before-hand, then you probably don’t want a map on the set. If you are having to select afterwards (or compact) then you probably don’t want a map on the set. In either case you are iterating twice over the entire set, when a reduce only needs to go once.</p>
<p>Also, in English, you are trying to “reduce a set of integers into a set of even integers”.</p>
</section>
<section id="answer-3-score-33" class="level4">
<h4>Answer 3 (score 33)</h4>
<p>In your example:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb449-1"><a href="#cb449-1"></a>items.map! { |x| process_x url } <span class="co"># [1, 2, 3, 4, 5] =&gt; [1, nil, 3, nil, nil]</span></span></code></pre></div>
<p>it does not look like the values have changed other than being replaced with <code>nil</code>. If that is the case, then:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb450-1"><a href="#cb450-1"></a>items.select{|x| process_x url}</span></code></pre></div>
<p>will suffice.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-a-hash-key-containing-a-matching-value-score-209106-in-2013" class="level3">
<h3>83: How to find a hash key containing a matching value (score <a href="https://stackoverflow.com/q/3794039.html">209106</a> in 2013)</h3>
<section id="question-82" class="level4">
<h4>Question</h4>
<p>Given I have the below <strong>clients</strong> hash, is there a quick ruby way (without having to write a multi-line script) to obtain the key given I want to match the client_id? E.g. How to get the key for <code>client_id == "2180"</code>?</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb451-1"><a href="#cb451-1"></a>clients = {</span>
<span id="cb451-2"><a href="#cb451-2"></a>  <span class="st">&quot;yellow&quot;</span>=&gt;{<span class="st">&quot;client_id&quot;</span>=&gt;<span class="st">&quot;2178&quot;</span>}, </span>
<span id="cb451-3"><a href="#cb451-3"></a>  <span class="st">&quot;orange&quot;</span>=&gt;{<span class="st">&quot;client_id&quot;</span>=&gt;<span class="st">&quot;2180&quot;</span>}, </span>
<span id="cb451-4"><a href="#cb451-4"></a>  <span class="st">&quot;red&quot;</span>=&gt;{<span class="st">&quot;client_id&quot;</span>=&gt;<span class="st">&quot;2179&quot;</span>}, </span>
<span id="cb451-5"><a href="#cb451-5"></a>  <span class="st">&quot;blue&quot;</span>=&gt;{<span class="st">&quot;client_id&quot;</span>=&gt;<span class="st">&quot;2181&quot;</span>}</span>
<span id="cb451-6"><a href="#cb451-6"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-168" class="level4">
<h4>Answer accepted (score 168)</h4>
<p>You could use <a href="http://rubydoc.info/docs/ruby-core/1.9.2/Enumerable:select" rel="noreferrer">Enumerable#select</a>:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb452-1"><a href="#cb452-1"></a>clients.select{|key, hash| hash[<span class="st">&quot;client_id&quot;</span>] == <span class="st">&quot;2180&quot;</span> }</span>
<span id="cb452-2"><a href="#cb452-2"></a><span class="co">#=&gt; [[&quot;orange&quot;, {&quot;client_id&quot;=&gt;&quot;2180&quot;}]]</span></span></code></pre></div>
<p>Note that the result will be an array of all the matching values, where each is an array of the key and value.</p>
</section>
<section id="answer-2-score-394-1" class="level4">
<h4>Answer 2 (score 394)</h4>
<p><strong>Ruby 1.9</strong> and greater:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb453-1"><a href="#cb453-1"></a>hash.key(value) =&gt; key</span></code></pre></div>
<p><strong>Ruby 1.8</strong>:</p>
<p>You could use <a href="http://ruby-doc.org/core/classes/Hash.html#M002855" rel="noreferrer"><code>hash.index</code></a></p>
<blockquote>
<p><code>hsh.index(value) =&amp;gt; key</code></p>
<p>
Returns the key for a given value. If not found, returns <code>nil</code>.
</p>
<p>
<code>h = { "a" =&amp;gt; 100, "b" =&amp;gt; 200 }</code><br> <code>h.index(200)   #=&amp;gt; "b"</code><br> <code>h.index(999)   #=&amp;gt; nil</code>
</p>
</blockquote>
<p>So to get <code>"orange"</code>, you could just use:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb454-1"><a href="#cb454-1"></a>clients.key({<span class="st">&quot;client_id&quot;</span> =&gt; <span class="st">&quot;2180&quot;</span>})</span></code></pre></div>
</section>
<section id="answer-3-score-47" class="level4">
<h4>Answer 3 (score 47)</h4>
<p>You can invert the hash. <code>clients.invert["client_id"=&amp;gt;"2180"]</code> returns <code>"orange"</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-round-a-float-to-two-decimal-places-in-jruby-score-208509-in-2012" class="level3">
<h3>84: How do you round a float to two decimal places in jruby (score <a href="https://stackoverflow.com/q/10459901.html">208509</a> in 2012)</h3>
<section id="question-83" class="level4">
<h4>Question</h4>
<p>JRuby 1.6.x. How do you round a float to decimal places in jruby.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb455-1"><a href="#cb455-1"></a>number = <span class="fl">1.1164</span></span>
<span id="cb455-2"><a href="#cb455-2"></a>number.round(<span class="dv">2</span>)</span>
<span id="cb455-3"><a href="#cb455-3"></a></span>
<span id="cb455-4"><a href="#cb455-4"></a><span class="dt">The</span> above shows the following error</span>
<span id="cb455-5"><a href="#cb455-5"></a>wrong number of arguments (<span class="dv">1</span> <span class="kw">for</span> <span class="dv">0</span>)</span></code></pre></div>
<p>How do I round this to 2 decimal places?</p>
</section>
<section id="answer-accepted-score-85" class="level4">
<h4>Answer accepted (score 85)</h4>
<p>Float#round can take a parameter in Ruby 1.9, not in Ruby 1.8. JRuby defaults to 1.8, but it is capable of <a href="https://stackoverflow.com/questions/4755900/how-to-make-jruby-1-6-default-to-ruby-1-9">running in 1.9 mode</a>.</p>
</section>
<section id="answer-2-score-270" class="level4">
<h4>Answer 2 (score 270)</h4>
<div class="sourceCode" id="cb456"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb456-1"><a href="#cb456-1"></a>(<span class="fl">5.65235534</span>).round(<span class="dv">2</span>)</span>
<span id="cb456-2"><a href="#cb456-2"></a><span class="co">#=&gt; 5.65</span></span></code></pre></div>
</section>
<section id="answer-3-score-183" class="level4">
<h4>Answer 3 (score 183)</h4>
<p><code>sprintf('%.2f', number)</code> is a cryptic, but very powerful way of formatting numbers. The result is always a string, but since you’re rounding I assume you’re doing it for presentation purposes anyway. <code>sprintf</code> can format any number almost any way you like, and lots more.</p>
<p>Full sprintf documentation: <a href="http://www.ruby-doc.org/core-2.0.0/Kernel.html#method-i-sprintf">http://www.ruby-doc.org/core-2.0.0/Kernel.html#method-i-sprintf</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-parse-a-yaml-file-score-208179-in-2012" class="level3">
<h3>85: How do I parse a YAML file? (score <a href="https://stackoverflow.com/q/3877004.html">208179</a> in 2012)</h3>
<section id="question-84" class="level4">
<h4>Question</h4>
<p>I would like to know how to parse a YAML file with the following contents:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb457-1"><a href="#cb457-1"></a>--- </span>
<span id="cb457-2"><a href="#cb457-2"></a><span class="st">javascripts: </span></span>
<span id="cb457-3"><a href="#cb457-3"></a>- fo_global:</span>
<span id="cb457-4"><a href="#cb457-4"></a>  - lazyload-min</span>
<span id="cb457-5"><a href="#cb457-5"></a>  - holla-min</span></code></pre></div>
<p>Currently I am trying to parse it this way:</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb458-1"><a href="#cb458-1"></a><span class="ot">@custom_asset_packages_yml</span> = (<span class="dt">File</span>.exists?(<span class="st">&quot;</span><span class="ot">#{</span><span class="dt">RAILS_ROOT</span><span class="ot">}</span><span class="st">/config/asset_packages.yml&quot;</span>) ? <span class="dt">YAML</span>.load_file(<span class="st">&quot;</span><span class="ot">#{</span><span class="dt">RAILS_ROOT</span><span class="ot">}</span><span class="st">/config/asset_packages.yml&quot;</span>) : <span class="dv">nil</span>)</span>
<span id="cb458-2"><a href="#cb458-2"></a>    <span class="kw">if</span> !<span class="ot">@custom_asset_packages_yml</span>.nil?</span>
<span id="cb458-3"><a href="#cb458-3"></a>      <span class="ot">@custom_asset_packages_yml</span>[<span class="st">&#39;javascripts&#39;</span>].each{ |js|</span>
<span id="cb458-4"><a href="#cb458-4"></a>        js[<span class="st">&#39;fo_global&#39;</span>].each{ |script|</span>
<span id="cb458-5"><a href="#cb458-5"></a>         script</span>
<span id="cb458-6"><a href="#cb458-6"></a>        }</span>
<span id="cb458-7"><a href="#cb458-7"></a>      }</span>
<span id="cb458-8"><a href="#cb458-8"></a>    <span class="kw">end</span></span></code></pre></div>
<p>But it doesn’t seem to work and gives me an error that the value is nil.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb459-1"><a href="#cb459-1"></a><span class="dt">You</span> have a <span class="dv">nil</span> object <span class="kw">when</span> you didn<span class="st">&#39;t expect it!</span></span>
<span id="cb459-2"><a href="#cb459-2"></a><span class="st">You might have expected an instance of Array.</span></span>
<span id="cb459-3"><a href="#cb459-3"></a><span class="st">The error occurred while evaluating nil.each</span></span></code></pre></div>
<p>If I try this, it puts out the entire string (fo_globallazyload-minholla-min):</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb460-1"><a href="#cb460-1"></a><span class="kw">if</span> !<span class="ot">@custom_asset_packages_yml</span>.nil?</span>
<span id="cb460-2"><a href="#cb460-2"></a>          <span class="ot">@custom_asset_packages_yml</span>[<span class="st">&#39;javascripts&#39;</span>].each{ |js|</span>
<span id="cb460-3"><a href="#cb460-3"></a>            js[<span class="st">&#39;fo_global&#39;</span>]</span>
<span id="cb460-4"><a href="#cb460-4"></a>          }</span>
<span id="cb460-5"><a href="#cb460-5"></a>        <span class="kw">end</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-436" class="level4">
<h4>Answer accepted (score 436)</h4>
<p>Maybe I’m missing something, but why try to parse the file? Why not just load the YAML and examine the object(s) that result?</p>
<p>If your sample YAML is in <code>some.yml</code>, then this:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb461-1"><a href="#cb461-1"></a>require <span class="st">&#39;yaml&#39;</span></span>
<span id="cb461-2"><a href="#cb461-2"></a>thing = <span class="dt">YAML</span>.load_file(<span class="st">&#39;some.yml&#39;</span>)</span>
<span id="cb461-3"><a href="#cb461-3"></a>puts thing.inspect</span></code></pre></div>
<p>gives me</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb462-1"><a href="#cb462-1"></a>{<span class="st">&quot;javascripts&quot;</span>=&gt;[{<span class="st">&quot;fo_global&quot;</span>=&gt;[<span class="st">&quot;lazyload-min&quot;</span>, <span class="st">&quot;holla-min&quot;</span>]}]}</span></code></pre></div>
</section>
<section id="answer-2-score-11" class="level4">
<h4>Answer 2 (score 11)</h4>
<p>I had the same problem but also wanted to get the content of the file (after the YAML front-matter).</p>
<p>This is the best solution I have found:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb463-1"><a href="#cb463-1"></a><span class="kw">if</span> (md = contents.match(<span class="ot">/^(?&lt;metadata&gt;---\s*\n.*?\n?)^(---\s*$\n?)/m</span>))</span>
<span id="cb463-2"><a href="#cb463-2"></a>  <span class="dv">self</span>.contents = md.post_match</span>
<span id="cb463-3"><a href="#cb463-3"></a>  <span class="dv">self</span>.metadata = <span class="dt">YAML</span>.load(md[<span class="st">:metadata</span>])</span>
<span id="cb463-4"><a href="#cb463-4"></a><span class="kw">end</span></span></code></pre></div>
<p>Source and discussion: <a href="https://practicingruby.com/articles/tricks-for-working-with-text-and-files" rel="nofollow noreferrer">https://practicingruby.com/articles/tricks-for-working-with-text-and-files</a></p>
</section>
<section id="answer-3-score-1-1" class="level4">
<h4>Answer 3 (score 1)</h4>
<p>Here is the one liner i use, from terminal, to test the content of yml file(s):</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb464-1"><a href="#cb464-1"></a>$ ruby  -r yaml -r pp  -e <span class="st">&#39;pp YAML.load_file(&quot;/Users/za/project/application.yml&quot;)&#39;</span></span>
<span id="cb464-2"><a href="#cb464-2"></a>{<span class="st">&quot;logging&quot;</span>=&gt;</span>
<span id="cb464-3"><a href="#cb464-3"></a>  {<span class="st">&quot;path&quot;</span>=&gt;<span class="st">&quot;/var/logs/&quot;</span>,</span>
<span id="cb464-4"><a href="#cb464-4"></a>   <span class="st">&quot;file&quot;</span>=&gt;<span class="st">&quot;TacoCloud.log&quot;</span>,</span>
<span id="cb464-5"><a href="#cb464-5"></a>   <span class="st">&quot;level&quot;</span>=&gt;</span>
<span id="cb464-6"><a href="#cb464-6"></a>    {<span class="st">&quot;root&quot;</span>=&gt;<span class="st">&quot;WARN&quot;</span>, <span class="st">&quot;org&quot;</span>=&gt;{<span class="st">&quot;springframework&quot;</span>=&gt;{<span class="st">&quot;security&quot;</span>=&gt;<span class="st">&quot;DEBUG&quot;</span>}}}}}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-the-current-working-directorys-absolute-path-from-irb-score-207448-in-2015" class="level3">
<h3>86: how to get the current working directory’s absolute path from irb (score <a href="https://stackoverflow.com/q/1937743.html">207448</a> in 2015)</h3>
<section id="question-85" class="level4">
<h4>Question</h4>
<p>I’m running Ruby on Windows though I don’t know if that should make a difference. All I want to do is get the current working directory’s absolute path. Is this possible from irb? Apparently from a script it’s possible using <code>File.expand_path(__FILE__)</code></p>
<p>But from irb I tried the following and got a “Permission denied” error:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb465-1"><a href="#cb465-1"></a><span class="dt">File</span>.new(<span class="dt">Dir</span>.new(<span class="st">&quot;.&quot;</span>).path).expand</span></code></pre></div>
</section>
<section id="answer-accepted-score-486" class="level4">
<h4>Answer accepted (score 486)</h4>
<p><code>Dir.pwd</code> seems to do the trick.</p>
<p><a href="http://ruby-doc.org/core/Dir.html#method-c-pwd" rel="noreferrer">http://ruby-doc.org/core/Dir.html#method-c-pwd</a></p>
</section>
<section id="answer-2-score-178" class="level4">
<h4>Answer 2 (score 178)</h4>
<p><code>File.expand_path File.dirname(__FILE__)</code> will return the directory relative to the file this command is called from.</p>
<p>But <code>Dir.pwd</code> returns the working directory (results identical to executing <code>pwd</code> in your terminal)</p>
</section>
<section id="answer-3-score-56" class="level4">
<h4>Answer 3 (score 56)</h4>
<p>As for the path relative to the current executing script, since <strong>Ruby 2.0</strong> you can also use</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb466-1"><a href="#cb466-1"></a>__dir__</span></code></pre></div>
<p>So this is basically the same as</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb467-1"><a href="#cb467-1"></a><span class="dt">File</span>.dirname(<span class="dv">__FILE__</span>)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-upgrade-rubygems-score-207239-in" class="level3">
<h3>87: How to upgrade rubygems (score <a href="https://stackoverflow.com/q/13626143.html">207239</a> in )</h3>
<section id="question-86" class="level4">
<h4>Question</h4>
<p>I need to upgrade gems to 1.8 i tried installing the respective debian packages but it seems its not getting upgraded</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb468-1"><a href="#cb468-1"></a>anujm<span class="ot">@test</span>:~$ dpkg -l |grep -i rubygem</span>
<span id="cb468-2"><a href="#cb468-2"></a>ii  rubygems                               <span class="fl">1.3</span>.<span class="dv">5</span>-1ubuntu2                                  package management framework <span class="kw">for</span> <span class="dt">Ruby</span> libraries/applications</span>
<span id="cb468-3"><a href="#cb468-3"></a>ii  rubygems-lwes                          <span class="fl">0.8</span>.<span class="dv">2-1323277262</span>                                <span class="dt">LWES</span> rubygems</span>
<span id="cb468-4"><a href="#cb468-4"></a>ii  rubygems1.<span class="dv">8</span>                            <span class="fl">1.3</span>.<span class="dv">5</span>-1ubuntu2                                  package management framework <span class="kw">for</span> <span class="dt">Ruby</span> libraries/applications</span>
<span id="cb468-5"><a href="#cb468-5"></a>ii  rubygems1.<span class="dv">9</span>                            <span class="fl">1.3</span>.<span class="dv">5</span>-1ubuntu2                                  package management framework <span class="kw">for</span> <span class="dt">Ruby</span> libraries/applications</span>
<span id="cb468-6"><a href="#cb468-6"></a>anujm<span class="ot">@test</span>:~$ </span>
<span id="cb468-7"><a href="#cb468-7"></a></span>
<span id="cb468-8"><a href="#cb468-8"></a></span>
<span id="cb468-9"><a href="#cb468-9"></a>anujm<span class="ot">@test</span>:~$ gem</span>
<span id="cb468-10"><a href="#cb468-10"></a>gem     gem1.<span class="dv">8</span>  gem1.<span class="dv">9</span>  </span>
<span id="cb468-11"><a href="#cb468-11"></a>anujm<span class="ot">@test</span>:~$ sudo gem1.<span class="dv">8</span> install serve</span>
<span id="cb468-12"><a href="#cb468-12"></a><span class="dt">ERROR</span>:  <span class="dt">Error</span> installing serve:</span>
<span id="cb468-13"><a href="#cb468-13"></a>        multi_json requires <span class="dt">RubyGems</span> version &gt;= <span class="fl">1.3</span>.<span class="dv">6</span></span>
<span id="cb468-14"><a href="#cb468-14"></a>anujm<span class="ot">@test</span>:~$</span></code></pre></div>
</section>
<section id="answer-accepted-score-454" class="level4">
<h4>Answer accepted (score 454)</h4>
<p>Install rubygems-update</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb469-1"><a href="#cb469-1"></a>gem install rubygems-update</span>
<span id="cb469-2"><a href="#cb469-2"></a>update_rubygems</span>
<span id="cb469-3"><a href="#cb469-3"></a>gem update --system</span></code></pre></div>
<p>run this commands as root or use sudo.</p>
</section>
<section id="answer-2-score-51-1" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>You can update all gems by just performing:</p>
<p><code>sudo gem update</code></p>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>Or:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb470-1"><a href="#cb470-1"></a>gem update <span class="st">`gem outdated | cut -d &#39; &#39; -f 1`</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="read-binary-file-as-string-in-ruby-score-207228-in-2017" class="level3">
<h3>88: Read binary file as string in Ruby (score <a href="https://stackoverflow.com/q/130948.html">207228</a> in 2017)</h3>
<section id="question-87" class="level4">
<h4>Question</h4>
<p>I need an easy way to take a tar file and convert it into a string (and vice versa). Is there a way to do this in Ruby? My best attempt was this:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb471-1"><a href="#cb471-1"></a>file = <span class="dt">File</span>.open(<span class="st">&quot;path-to-file.tar.gz&quot;</span>)</span>
<span id="cb471-2"><a href="#cb471-2"></a>contents = <span class="st">&quot;&quot;</span></span>
<span id="cb471-3"><a href="#cb471-3"></a>file.each {|line|</span>
<span id="cb471-4"><a href="#cb471-4"></a>  contents &lt;&lt; line</span>
<span id="cb471-5"><a href="#cb471-5"></a>}</span></code></pre></div>
<p>I thought that would be enough to convert it to a string, but then when I try to write it back out like this…</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb472-1"><a href="#cb472-1"></a>newFile = <span class="dt">File</span>.open(<span class="st">&quot;test.tar.gz&quot;</span>, <span class="st">&quot;w&quot;</span>)</span>
<span id="cb472-2"><a href="#cb472-2"></a>newFile.write(contents)</span></code></pre></div>
<p>It isn’t the same file. Doing <code>ls -l</code> shows the files are of different sizes, although they are pretty close (and opening the file reveals most of the contents intact). Is there a small mistake I’m making or an entirely different (but workable) way to accomplish this?</p>
</section>
<section id="answer-accepted-score-397-1" class="level4">
<h4>Answer accepted (score 397)</h4>
<p>First, you should open the file as a binary file. Then you can read the entire file in, in one command.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb473-1"><a href="#cb473-1"></a>file = <span class="dt">File</span>.open(<span class="st">&quot;path-to-file.tar.gz&quot;</span>, <span class="st">&quot;rb&quot;</span>)</span>
<span id="cb473-2"><a href="#cb473-2"></a>contents = file.read</span></code></pre></div>
<p>That will get you the entire file in a string.</p>
<p>After that, you probably want to <code>file.close</code>. If you don’t do that, <code>file</code> won’t be closed until it is garbage-collected, so it would be a slight waste of system resources while it is open.</p>
</section>
<section id="answer-2-score-241" class="level4">
<h4>Answer 2 (score 241)</h4>
<p>If you need binary mode, you’ll need to do it the hard way:</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb474-1"><a href="#cb474-1"></a>s = <span class="dt">File</span>.open(filename, <span class="st">&#39;rb&#39;</span>) { |f| f.read }</span></code></pre></div>
<p>If not, shorter and sweeter is:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb475-1"><a href="#cb475-1"></a>s = <span class="dt">IO</span>.read(filename)</span></code></pre></div>
</section>
<section id="answer-3-score-113" class="level4">
<h4>Answer 3 (score 113)</h4>
<p>To avoid leaving the file open, it is best to pass a block to File.open. This way, the file will be closed after the block executes.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb476-1"><a href="#cb476-1"></a>contents = <span class="dt">File</span>.open(<span class="st">&#39;path-to-file.tar.gz&#39;</span>, <span class="st">&#39;rb&#39;</span>) { |f| f.read }</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-a-unix-timestamp-seconds-since-epoch-to-ruby-datetime-score-206812-in-2015" class="level3">
<h3>89: How to convert a unix timestamp (seconds since epoch) to Ruby DateTime? (score <a href="https://stackoverflow.com/q/7816365.html">206812</a> in 2015)</h3>
<section id="question-88" class="level4">
<h4>Question</h4>
<p>How do you convert a Unix timestamp (seconds since epoch) to Ruby DateTime?</p>
</section>
<section id="answer-accepted-score-336" class="level4">
<h4>Answer accepted (score 336)</h4>
<p><code>DateTime.strptime</code> can handle seconds since epoch. The number must be converted to a string:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb477-1"><a href="#cb477-1"></a>require <span class="st">&#39;date&#39;</span></span>
<span id="cb477-2"><a href="#cb477-2"></a><span class="dt">DateTime</span>.strptime(<span class="st">&quot;1318996912&quot;</span>,<span class="st">&#39;%s&#39;</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-607" class="level4">
<h4>Answer 2 (score 607)</h4>
<p>Sorry, brief moment of synapse failure. Here’s the real answer.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb478-1"><a href="#cb478-1"></a>require <span class="st">&#39;date&#39;</span></span>
<span id="cb478-2"><a href="#cb478-2"></a></span>
<span id="cb478-3"><a href="#cb478-3"></a><span class="dt">Time</span>.at(seconds_since_epoch_integer).to_datetime</span></code></pre></div>
<p><strong>Brief example</strong> (this takes into account the current system timezone):</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb479-1"><a href="#cb479-1"></a>$ date +<span class="ot">%</span>s</span>
<span id="cb479-2"><a href="#cb479-2"></a><span class="dv">1318996912</span></span>
<span id="cb479-3"><a href="#cb479-3"></a></span>
<span id="cb479-4"><a href="#cb479-4"></a>$ irb</span>
<span id="cb479-5"><a href="#cb479-5"></a></span>
<span id="cb479-6"><a href="#cb479-6"></a>ruby<span class="dv">-1</span>.<span class="fl">9.2</span>-p180 :<span class="dv">001</span> &gt; require <span class="st">&#39;date&#39;</span></span>
<span id="cb479-7"><a href="#cb479-7"></a> =&gt; <span class="dv">true</span> </span>
<span id="cb479-8"><a href="#cb479-8"></a></span>
<span id="cb479-9"><a href="#cb479-9"></a>ruby<span class="dv">-1</span>.<span class="fl">9.2</span>-p180 :<span class="dv">002</span> &gt; <span class="dt">Time</span>.at(<span class="dv">1318996912</span>).to_datetime</span>
<span id="cb479-10"><a href="#cb479-10"></a> =&gt; <span class="co">#&lt;DateTime: 2011-10-18T23:01:52-05:00 (13261609807/5400,-5/24,2299161)&gt; </span></span></code></pre></div>
<p><strong>Further update</strong> (for UTC):</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb480-1"><a href="#cb480-1"></a>ruby<span class="dv">-1</span>.<span class="fl">9.2</span>-p180 :<span class="dv">003</span> &gt; <span class="dt">Time</span>.at(<span class="dv">1318996912</span>).utc.to_datetime</span>
<span id="cb480-2"><a href="#cb480-2"></a> =&gt; <span class="co">#&lt;DateTime: 2011-10-19T04:01:52+00:00 (13261609807/5400,0/1,2299161)&gt;</span></span></code></pre></div>
<p><strong>Recent Update</strong>: I benchmarked the top solutions in this thread while working on a HA service a week or two ago, and was surprised to find that <code>Time.at(..)</code> outperforms <code>DateTime.strptime(..)</code> (update: added more benchmarks).</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb481-1"><a href="#cb481-1"></a><span class="co"># ~ % ruby -v</span></span>
<span id="cb481-2"><a href="#cb481-2"></a><span class="co">#  =&gt; ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-darwin13.0]</span></span>
<span id="cb481-3"><a href="#cb481-3"></a></span>
<span id="cb481-4"><a href="#cb481-4"></a>irb(main):<span class="bn">03</span>8:<span class="dv">0</span>&gt; <span class="dt">Benchmark</span>.measure <span class="kw">do</span></span>
<span id="cb481-5"><a href="#cb481-5"></a>irb(main):<span class="bn">03</span>9:<span class="dv">1</span>*   [<span class="st">&quot;1318996912&quot;</span>, <span class="st">&quot;1318496912&quot;</span>].each <span class="kw">do</span> |s|</span>
<span id="cb481-6"><a href="#cb481-6"></a>irb(main):<span class="bn">040</span>:<span class="dv">2</span>*     <span class="dt">DateTime</span>.strptime(s, <span class="st">&#39;%s&#39;</span>)</span>
<span id="cb481-7"><a href="#cb481-7"></a>irb(main):<span class="bn">041</span>:<span class="dv">2</span>&gt;   <span class="kw">end</span></span>
<span id="cb481-8"><a href="#cb481-8"></a>irb(main):<span class="bn">042</span>:<span class="dv">1</span>&gt; <span class="kw">end</span></span>
<span id="cb481-9"><a href="#cb481-9"></a></span>
<span id="cb481-10"><a href="#cb481-10"></a>=&gt; <span class="co">#&lt;Benchmark ... @real=2.9e-05 ... @total=0.0&gt;</span></span>
<span id="cb481-11"><a href="#cb481-11"></a></span>
<span id="cb481-12"><a href="#cb481-12"></a>irb(main):<span class="bn">044</span>:<span class="dv">0</span>&gt; <span class="dt">Benchmark</span>.measure <span class="kw">do</span></span>
<span id="cb481-13"><a href="#cb481-13"></a>irb(main):<span class="bn">045</span>:<span class="dv">1</span>&gt;   [<span class="dv">1318996912</span>, <span class="dv">1318496912</span>].each <span class="kw">do</span> |i|</span>
<span id="cb481-14"><a href="#cb481-14"></a>irb(main):<span class="bn">046</span>:<span class="dv">2</span>&gt;     <span class="dt">DateTime</span>.strptime(i.to_s, <span class="st">&#39;%s&#39;</span>)</span>
<span id="cb481-15"><a href="#cb481-15"></a>irb(main):<span class="bn">047</span>:<span class="dv">2</span>&gt;   <span class="kw">end</span></span>
<span id="cb481-16"><a href="#cb481-16"></a>irb(main):<span class="bn">04</span>8:<span class="dv">1</span>&gt; <span class="kw">end</span></span>
<span id="cb481-17"><a href="#cb481-17"></a></span>
<span id="cb481-18"><a href="#cb481-18"></a>=&gt; <span class="co">#&lt;Benchmark ... @real=2.0e-05 ... @total=0.0&gt;</span></span>
<span id="cb481-19"><a href="#cb481-19"></a></span>
<span id="cb481-20"><a href="#cb481-20"></a>irb(main):<span class="bn">050</span>:<span class="dv">0</span>* <span class="dt">Benchmark</span>.measure <span class="kw">do</span></span>
<span id="cb481-21"><a href="#cb481-21"></a>irb(main):<span class="bn">051</span>:<span class="dv">1</span>*   [<span class="st">&quot;1318996912&quot;</span>, <span class="st">&quot;1318496912&quot;</span>].each <span class="kw">do</span> |s|</span>
<span id="cb481-22"><a href="#cb481-22"></a>irb(main):<span class="bn">052</span>:<span class="dv">2</span>*     <span class="dt">Time</span>.at(s.to_i).to_datetime</span>
<span id="cb481-23"><a href="#cb481-23"></a>irb(main):<span class="bn">053</span>:<span class="dv">2</span>&gt;   <span class="kw">end</span></span>
<span id="cb481-24"><a href="#cb481-24"></a>irb(main):<span class="bn">054</span>:<span class="dv">1</span>&gt; <span class="kw">end</span></span>
<span id="cb481-25"><a href="#cb481-25"></a></span>
<span id="cb481-26"><a href="#cb481-26"></a>=&gt; <span class="co">#&lt;Benchmark ... @real=1.5e-05 ... @total=0.0&gt;</span></span>
<span id="cb481-27"><a href="#cb481-27"></a></span>
<span id="cb481-28"><a href="#cb481-28"></a>irb(main):<span class="bn">056</span>:<span class="dv">0</span>* <span class="dt">Benchmark</span>.measure <span class="kw">do</span></span>
<span id="cb481-29"><a href="#cb481-29"></a>irb(main):<span class="bn">057</span>:<span class="dv">1</span>*   [<span class="dv">1318996912</span>, <span class="dv">1318496912</span>].each <span class="kw">do</span> |i|</span>
<span id="cb481-30"><a href="#cb481-30"></a>irb(main):<span class="bn">05</span>8:<span class="dv">2</span>*     <span class="dt">Time</span>.at(i).to_datetime</span>
<span id="cb481-31"><a href="#cb481-31"></a>irb(main):<span class="bn">05</span>9:<span class="dv">2</span>&gt;   <span class="kw">end</span></span>
<span id="cb481-32"><a href="#cb481-32"></a>irb(main):<span class="bn">060</span>:<span class="dv">1</span>&gt; <span class="kw">end</span></span>
<span id="cb481-33"><a href="#cb481-33"></a></span>
<span id="cb481-34"><a href="#cb481-34"></a>=&gt; <span class="co">#&lt;Benchmark ... @real=2.0e-05 ... @total=0.0&gt;</span></span></code></pre></div>
</section>
<section id="answer-3-score-61" class="level4">
<h4>Answer 3 (score 61)</h4>
<p><strong>Time Zone Handling</strong></p>
<p>I just want to clarify, even though this has been commented so future people don’t miss this very important distinction.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb482-1"><a href="#cb482-1"></a><span class="dt">DateTime</span>.strptime(<span class="st">&quot;1318996912&quot;</span>,<span class="st">&#39;%s&#39;</span>) <span class="co"># =&gt; Wed, 19 Oct 2011 04:01:52 +0000</span></span></code></pre></div>
<p>displays a return value in UTC and requires the seconds to be a String and outputs a UTC Time object, whereas</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb483-1"><a href="#cb483-1"></a><span class="dt">Time</span>.at(<span class="dv">1318996912</span>) <span class="co"># =&gt; 2011-10-19 00:01:52 -0400</span></span></code></pre></div>
<p>displays a return value in the LOCAL time zone, normally requires a FixNum argument, but the Time object itself is still in UTC even though the display is not.</p>
<p>So even though I passed the same integer to both methods, I seemingly two different results because of how the class’ <code>#to_s</code> method works. However, as <span class="citation" data-cites="Eero">@Eero</span> had to remind me twice of:</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb484-1"><a href="#cb484-1"></a><span class="dt">Time</span>.at(<span class="dv">1318996912</span>) == <span class="dt">DateTime</span>.strptime(<span class="st">&quot;1318996912&quot;</span>,<span class="st">&#39;%s&#39;</span>) <span class="co"># =&gt; true</span></span></code></pre></div>
<p>An equality comparison between the two return values still returns true. Again, this is because the values are basically the same (although different class’s, the <code>#==</code> method takes care of this for you), but the <code>#to_s</code> method prints drastically different strings. Although, if we look at the strings, we can see they are indeed the same time, just printed in different time zones.</p>
<p><strong>Method Argument Clarification</strong></p>
<p>The docs also say “If a numeric argument is given, the result is in local time.” which makes sense, but was a little confusing to me because they don’t give any examples of non-integer arguments in the docs. So, for some non-integer argument examples:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb485-1"><a href="#cb485-1"></a><span class="dt">Time</span>.at(<span class="st">&quot;1318996912&quot;</span>)</span>
<span id="cb485-2"><a href="#cb485-2"></a><span class="dt">TypeError</span>: can<span class="st">&#39;t convert String into an exact number</span></span></code></pre></div>
<p>you can’t use a String argument, but you can use a Time argument into <code>Time.at</code> and it will return the result in the time zone of the argument:</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb486-1"><a href="#cb486-1"></a><span class="dt">Time</span>.at(<span class="dt">Time</span>.new(<span class="dv">2007</span>,<span class="dv">11</span>,<span class="dv">1</span>,<span class="dv">15</span>,<span class="dv">25</span>,<span class="dv">0</span>, <span class="st">&quot;+09:00&quot;</span>))</span>
<span id="cb486-2"><a href="#cb486-2"></a>=&gt; <span class="dv">2007-11-01</span> <span class="dv">15</span>:<span class="dv">25</span>:<span class="dv">00</span> +<span class="dv">0900</span></span></code></pre></div>
<p><strong>Benchmarks</strong></p>
<p>After a discussion with <span class="citation" data-cites="AdamEberlin">@AdamEberlin</span> on his answer, I decided to publish slightly changed benchmarks to make everything as equal as possible. Also, I never want to have to build these again so this is as good a place as any to save them.</p>
<p>Time.at(int).to_datetime ~ 2.8x faster</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb487-1"><a href="#cb487-1"></a><span class="dv">09</span>:<span class="dv">10</span>:<span class="dv">58</span>-watsw018:~$ ruby -v</span>
<span id="cb487-2"><a href="#cb487-2"></a>ruby <span class="fl">2.3</span>.7p456 (<span class="dv">2018-03-28</span> revision <span class="dv">63024</span>) [universal.x86_64-darwin18]</span>
<span id="cb487-3"><a href="#cb487-3"></a><span class="dv">09</span>:<span class="dv">11</span>:<span class="dv">00</span>-watsw018:~$ irb</span>
<span id="cb487-4"><a href="#cb487-4"></a>irb(main):<span class="dv">001</span>:<span class="dv">0</span>&gt; require <span class="st">&#39;benchmark&#39;</span></span>
<span id="cb487-5"><a href="#cb487-5"></a>=&gt; <span class="dv">true</span></span>
<span id="cb487-6"><a href="#cb487-6"></a>irb(main):<span class="dv">002</span>:<span class="dv">0</span>&gt; require <span class="st">&#39;date&#39;</span></span>
<span id="cb487-7"><a href="#cb487-7"></a>=&gt; <span class="dv">true</span></span>
<span id="cb487-8"><a href="#cb487-8"></a>irb(main):<span class="dv">003</span>:<span class="dv">0</span>&gt;</span>
<span id="cb487-9"><a href="#cb487-9"></a>irb(main):<span class="dv">004</span>:<span class="dv">0</span>* format = <span class="st">&#39;%s&#39;</span></span>
<span id="cb487-10"><a href="#cb487-10"></a>=&gt; <span class="st">&quot;%s&quot;</span></span>
<span id="cb487-11"><a href="#cb487-11"></a>irb(main):<span class="dv">005</span>:<span class="dv">0</span>&gt; times = [<span class="st">&#39;1318996912&#39;</span>, <span class="st">&#39;1318496913&#39;</span>]</span>
<span id="cb487-12"><a href="#cb487-12"></a>=&gt; [<span class="st">&quot;1318996912&quot;</span>, <span class="st">&quot;1318496913&quot;</span>]</span>
<span id="cb487-13"><a href="#cb487-13"></a>irb(main):<span class="dv">006</span>:<span class="dv">0</span>&gt; int_times = times.map(&amp;<span class="st">:to_i</span>)</span>
<span id="cb487-14"><a href="#cb487-14"></a>=&gt; [<span class="dv">1318996912</span>, <span class="dv">1318496913</span>]</span>
<span id="cb487-15"><a href="#cb487-15"></a>irb(main):<span class="dv">007</span>:<span class="dv">0</span>&gt;</span>
<span id="cb487-16"><a href="#cb487-16"></a>irb(main):<span class="dv">008</span>:<span class="dv">0</span>* datetime_from_strptime = <span class="dt">DateTime</span>.strptime(times.first, format)</span>
<span id="cb487-17"><a href="#cb487-17"></a>=&gt; <span class="co">#&lt;DateTime: 2011-10-19T04:01:52+00:00 ((2455854j,14512s,0n),+0s,2299161j)&gt;</span></span>
<span id="cb487-18"><a href="#cb487-18"></a>irb(main):<span class="dv">009</span>:<span class="dv">0</span>&gt; datetime_from_time = <span class="dt">Time</span>.at(int_times.first).to_datetime</span>
<span id="cb487-19"><a href="#cb487-19"></a>=&gt; <span class="co">#&lt;DateTime: 2011-10-19T00:01:52-04:00 ((2455854j,14512s,0n),-14400s,2299161j)&gt;</span></span>
<span id="cb487-20"><a href="#cb487-20"></a>irb(main):<span class="bn">010</span>:<span class="dv">0</span>&gt;</span>
<span id="cb487-21"><a href="#cb487-21"></a>irb(main):<span class="bn">011</span>:<span class="dv">0</span>* datetime_from_strptime === datetime_from_time</span>
<span id="cb487-22"><a href="#cb487-22"></a>=&gt; <span class="dv">true</span></span>
<span id="cb487-23"><a href="#cb487-23"></a>irb(main):<span class="bn">012</span>:<span class="dv">0</span>&gt;</span>
<span id="cb487-24"><a href="#cb487-24"></a>irb(main):<span class="bn">013</span>:<span class="dv">0</span>* <span class="dt">Benchmark</span>.measure <span class="kw">do</span></span>
<span id="cb487-25"><a href="#cb487-25"></a>irb(main):<span class="bn">014</span>:<span class="dv">1</span>*   <span class="dv">100_000</span>.times {</span>
<span id="cb487-26"><a href="#cb487-26"></a>irb(main):<span class="bn">015</span>:<span class="dv">2</span>*     times.each <span class="kw">do</span> |i|</span>
<span id="cb487-27"><a href="#cb487-27"></a>irb(main):<span class="bn">016</span>:<span class="dv">3</span>*       <span class="dt">DateTime</span>.strptime(i, format)</span>
<span id="cb487-28"><a href="#cb487-28"></a>irb(main):<span class="bn">017</span>:<span class="dv">3</span>&gt;     <span class="kw">end</span></span>
<span id="cb487-29"><a href="#cb487-29"></a>irb(main):<span class="bn">01</span>8:<span class="dv">2</span>&gt;   }</span>
<span id="cb487-30"><a href="#cb487-30"></a>irb(main):<span class="bn">01</span>9:<span class="dv">1</span>&gt; <span class="kw">end</span></span>
<span id="cb487-31"><a href="#cb487-31"></a>=&gt; <span class="co">#&lt;Benchmark::Tms:0x00007fbdc18f0d28 @label=&quot;&quot;, @real=0.8680500000045868, @cstime=0.0, @cutime=0.0, @stime=0.009999999999999998, @utime=0.86, @total=0.87&gt;</span></span>
<span id="cb487-32"><a href="#cb487-32"></a>irb(main):<span class="bn">020</span>:<span class="dv">0</span>&gt;</span>
<span id="cb487-33"><a href="#cb487-33"></a>irb(main):<span class="bn">021</span>:<span class="dv">0</span>* <span class="dt">Benchmark</span>.measure <span class="kw">do</span></span>
<span id="cb487-34"><a href="#cb487-34"></a>irb(main):<span class="bn">022</span>:<span class="dv">1</span>*   <span class="dv">100_000</span>.times {</span>
<span id="cb487-35"><a href="#cb487-35"></a>irb(main):<span class="bn">023</span>:<span class="dv">2</span>*     int_times.each <span class="kw">do</span> |i|</span>
<span id="cb487-36"><a href="#cb487-36"></a>irb(main):<span class="bn">024</span>:<span class="dv">3</span>*       <span class="dt">Time</span>.at(i).to_datetime</span>
<span id="cb487-37"><a href="#cb487-37"></a>irb(main):<span class="bn">025</span>:<span class="dv">3</span>&gt;     <span class="kw">end</span></span>
<span id="cb487-38"><a href="#cb487-38"></a>irb(main):<span class="bn">026</span>:<span class="dv">2</span>&gt;   }</span>
<span id="cb487-39"><a href="#cb487-39"></a>irb(main):<span class="bn">027</span>:<span class="dv">1</span>&gt; <span class="kw">end</span></span>
<span id="cb487-40"><a href="#cb487-40"></a>=&gt; <span class="co">#&lt;Benchmark::Tms:0x00007fbdc3108be0 @label=&quot;&quot;, @real=0.33059399999910966, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.32000000000000006, @total=0.32000000000000006&gt;</span></span></code></pre></div>
<p>****edited to not be completely and totally incorrect in every way****</p>
<p>****added benchmarks****</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="sorting-an-array-in-descending-order-in-ruby-score-206431-in" class="level3">
<h3>90: Sorting an array in descending order in Ruby (score <a href="https://stackoverflow.com/q/2642182.html">206431</a> in )</h3>
<section id="question-89" class="level4">
<h4>Question</h4>
<p>I have an array of hashes like following</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb488-1"><a href="#cb488-1"></a>[</span>
<span id="cb488-2"><a href="#cb488-2"></a>  { <span class="st">:foo</span> =&gt; <span class="st">&#39;foo&#39;</span>, <span class="st">:bar</span> =&gt; <span class="dv">2</span> },</span>
<span id="cb488-3"><a href="#cb488-3"></a>  { <span class="st">:foo</span> =&gt; <span class="st">&#39;foo&#39;</span>, <span class="st">:bar</span> =&gt; <span class="dv">3</span> },</span>
<span id="cb488-4"><a href="#cb488-4"></a>  { <span class="st">:foo</span> =&gt; <span class="st">&#39;foo&#39;</span>, <span class="st">:bar</span> =&gt; <span class="dv">5</span> },</span>
<span id="cb488-5"><a href="#cb488-5"></a>]</span></code></pre></div>
<p>I am trying to sort above array in descending order according to the value of <code>:bar</code> in each hash.</p>
<p>I am using <code>sort_by</code> like following to sort above array.</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb489-1"><a href="#cb489-1"></a>a.sort_by { |h| h[<span class="st">:bar</span>] }</span></code></pre></div>
<p>However above sorts the array in ascending order. How do I make it sort in descending order?</p>
<p>One solution was to do following:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb490-1"><a href="#cb490-1"></a>a.sort_by { |h| -h[<span class="st">:bar</span>] }</span></code></pre></div>
<p>But that negative sign does not seem appropriate. Any views?</p>
</section>
<section id="answer-accepted-score-535" class="level4">
<h4>Answer accepted (score 535)</h4>
<p>It’s always enlightening to do a benchmark on the various suggested answers. Here’s what I found out:</p>
<pre>
#!/usr/bin/ruby

require &#x27;benchmark&#x27;

ary = []
1000.times { 
  ary &lt;&lt; {:bar =&gt; rand(1000)} 
}

n = 500
Benchmark.bm(20) do |x|
  x.report(&quot;sort&quot;)               { n.times { ary.sort{ |a,b| b[:bar] &lt;=&gt; a[:bar] } } }
  x.report(&quot;sort reverse&quot;)       { n.times { ary.sort{ |a,b| a[:bar] &lt;=&gt; b[:bar] }.reverse } }
  x.report(&quot;sort_by -a[:bar]&quot;)   { n.times { ary.sort_by{ |a| -a[:bar] } } }
  x.report(&quot;sort_by a[:bar]*-1&quot;) { n.times { ary.sort_by{ |a| a[:bar]*-1 } } }
  x.report(&quot;sort_by.reverse!&quot;)   { n.times { ary.sort_by{ |a| a[:bar] }.reverse } }
end

                          user     system      total        real
sort                  3.960000   0.010000   3.970000 (  3.990886)
sort reverse          4.040000   0.000000   4.040000 (  4.038849)
sort_by -a[:bar]      0.690000   0.000000   0.690000 (  0.692080)
sort_by a[:bar]*-1    0.700000   0.000000   0.700000 (  0.699735)
sort_by.reverse!      0.650000   0.000000   0.650000 (  0.654447)
</pre>
<p>I think it’s interesting that <span class="citation" data-cites="Pablo">@Pablo</span>’s <code>sort_by{...}.reverse!</code> is fastest. Before running the test I thought it would be slower than “<code>-a[:bar]</code>” but negating the value turns out to take longer than it does to reverse the entire array in one pass. It’s not much of a difference, but every little speed-up helps.</p>
<hr>
<blockquote>
Please note that these results are different in Ruby 1.9
</blockquote>
<p>Here are results for Ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin10.8.0]:</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb491-1"><a href="#cb491-1"></a>                           user     system      total        real</span>
<span id="cb491-2"><a href="#cb491-2"></a>sort                   <span class="fl">1.340000</span>   <span class="fl">0.010000</span>   <span class="fl">1.350000</span> (  <span class="fl">1.346331</span>)</span>
<span id="cb491-3"><a href="#cb491-3"></a>sort reverse           <span class="fl">1.300000</span>   <span class="fl">0.000000</span>   <span class="fl">1.300000</span> (  <span class="fl">1.310446</span>)</span>
<span id="cb491-4"><a href="#cb491-4"></a>sort_by -a[<span class="st">:bar</span>]       <span class="fl">0.430000</span>   <span class="fl">0.000000</span>   <span class="fl">0.430000</span> (  <span class="fl">0.429606</span>)</span>
<span id="cb491-5"><a href="#cb491-5"></a>sort_by a[<span class="st">:bar</span>]*-<span class="dv">1</span>     <span class="fl">0.420000</span>   <span class="fl">0.000000</span>   <span class="fl">0.420000</span> (  <span class="fl">0.414383</span>)</span>
<span id="cb491-6"><a href="#cb491-6"></a>sort_by.reverse!       <span class="fl">0.400000</span>   <span class="fl">0.000000</span>   <span class="fl">0.400000</span> (  <span class="fl">0.401275</span>)</span></code></pre></div>
<p>These are on an old MacBook Pro. Newer, or faster machines, will have lower values, but the relative differences will remain.</p>
<hr>
<p>Here’s a bit updated version on newer hardware and the 2.1.1 version of Ruby:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb492-1"><a href="#cb492-1"></a><span class="kw">#!/usr/bin/ruby</span></span>
<span id="cb492-2"><a href="#cb492-2"></a></span>
<span id="cb492-3"><a href="#cb492-3"></a>require <span class="st">&#39;benchmark&#39;</span></span>
<span id="cb492-4"><a href="#cb492-4"></a></span>
<span id="cb492-5"><a href="#cb492-5"></a>puts <span class="st">&quot;Running Ruby </span><span class="ot">#{</span><span class="dt">RUBY_VERSION</span><span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb492-6"><a href="#cb492-6"></a></span>
<span id="cb492-7"><a href="#cb492-7"></a>ary = []</span>
<span id="cb492-8"><a href="#cb492-8"></a><span class="dv">1000</span>.times {</span>
<span id="cb492-9"><a href="#cb492-9"></a>  ary &lt;&lt; {<span class="st">:bar</span> =&gt; rand(<span class="dv">1000</span>)}</span>
<span id="cb492-10"><a href="#cb492-10"></a>}</span>
<span id="cb492-11"><a href="#cb492-11"></a></span>
<span id="cb492-12"><a href="#cb492-12"></a>n = <span class="dv">500</span></span>
<span id="cb492-13"><a href="#cb492-13"></a></span>
<span id="cb492-14"><a href="#cb492-14"></a>puts <span class="st">&quot;n=</span><span class="ot">#{</span>n<span class="ot">}</span><span class="st">&quot;</span></span>
<span id="cb492-15"><a href="#cb492-15"></a><span class="dt">Benchmark</span>.bm(<span class="dv">20</span>) <span class="kw">do</span> |x|</span>
<span id="cb492-16"><a href="#cb492-16"></a>  x.report(<span class="st">&quot;sort&quot;</span>)               { n.times { ary.dup.sort{ |a,b| b[<span class="st">:bar</span>] &lt;=&gt; a[<span class="st">:bar</span>] } } }</span>
<span id="cb492-17"><a href="#cb492-17"></a>  x.report(<span class="st">&quot;sort reverse&quot;</span>)       { n.times { ary.dup.sort{ |a,b| a[<span class="st">:bar</span>] &lt;=&gt; b[<span class="st">:bar</span>] }.reverse } }</span>
<span id="cb492-18"><a href="#cb492-18"></a>  x.report(<span class="st">&quot;sort_by -a[:bar]&quot;</span>)   { n.times { ary.dup.sort_by{ |a| -a[<span class="st">:bar</span>] } } }</span>
<span id="cb492-19"><a href="#cb492-19"></a>  x.report(<span class="st">&quot;sort_by a[:bar]*-1&quot;</span>) { n.times { ary.dup.sort_by{ |a| a[<span class="st">:bar</span>]*-<span class="dv">1</span> } } }</span>
<span id="cb492-20"><a href="#cb492-20"></a>  x.report(<span class="st">&quot;sort_by.reverse&quot;</span>)    { n.times { ary.dup.sort_by{ |a| a[<span class="st">:bar</span>] }.reverse } }</span>
<span id="cb492-21"><a href="#cb492-21"></a>  x.report(<span class="st">&quot;sort_by.reverse!&quot;</span>)   { n.times { ary.dup.sort_by{ |a| a[<span class="st">:bar</span>] }.reverse! } }</span>
<span id="cb492-22"><a href="#cb492-22"></a><span class="kw">end</span></span>
<span id="cb492-23"><a href="#cb492-23"></a></span>
<span id="cb492-24"><a href="#cb492-24"></a><span class="co"># &gt;&gt; Running Ruby 2.1.1</span></span>
<span id="cb492-25"><a href="#cb492-25"></a><span class="co"># &gt;&gt; n=500</span></span>
<span id="cb492-26"><a href="#cb492-26"></a><span class="co"># &gt;&gt;                            user     system      total        real</span></span>
<span id="cb492-27"><a href="#cb492-27"></a><span class="co"># &gt;&gt; sort                   0.670000   0.000000   0.670000 (  0.667754)</span></span>
<span id="cb492-28"><a href="#cb492-28"></a><span class="co"># &gt;&gt; sort reverse           0.650000   0.000000   0.650000 (  0.655582)</span></span>
<span id="cb492-29"><a href="#cb492-29"></a><span class="co"># &gt;&gt; sort_by -a[:bar]       0.260000   0.010000   0.270000 (  0.255919)</span></span>
<span id="cb492-30"><a href="#cb492-30"></a><span class="co"># &gt;&gt; sort_by a[:bar]*-1     0.250000   0.000000   0.250000 (  0.258924)</span></span>
<span id="cb492-31"><a href="#cb492-31"></a><span class="co"># &gt;&gt; sort_by.reverse        0.250000   0.000000   0.250000 (  0.245179)</span></span>
<span id="cb492-32"><a href="#cb492-32"></a><span class="co"># &gt;&gt; sort_by.reverse!       0.240000   0.000000   0.240000 (  0.242340)</span></span></code></pre></div>
<hr>
<p>New results running the above code using Ruby 2.2.1 on a more recent Macbook Pro. Again, the exact numbers aren’t important, it’s their relationships:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb493-1"><a href="#cb493-1"></a><span class="dt">Running</span> <span class="dt">Ruby</span> <span class="fl">2.2</span>.<span class="dv">1</span></span>
<span id="cb493-2"><a href="#cb493-2"></a>n=<span class="dv">500</span></span>
<span id="cb493-3"><a href="#cb493-3"></a>                           user     system      total        real</span>
<span id="cb493-4"><a href="#cb493-4"></a>sort                   <span class="fl">0.650000</span>   <span class="fl">0.000000</span>   <span class="fl">0.650000</span> (  <span class="fl">0.653191</span>)</span>
<span id="cb493-5"><a href="#cb493-5"></a>sort reverse           <span class="fl">0.650000</span>   <span class="fl">0.000000</span>   <span class="fl">0.650000</span> (  <span class="fl">0.648761</span>)</span>
<span id="cb493-6"><a href="#cb493-6"></a>sort_by -a[<span class="st">:bar</span>]       <span class="fl">0.240000</span>   <span class="fl">0.010000</span>   <span class="fl">0.250000</span> (  <span class="fl">0.245193</span>)</span>
<span id="cb493-7"><a href="#cb493-7"></a>sort_by a[<span class="st">:bar</span>]*-<span class="dv">1</span>     <span class="fl">0.240000</span>   <span class="fl">0.000000</span>   <span class="fl">0.240000</span> (  <span class="fl">0.240541</span>)</span>
<span id="cb493-8"><a href="#cb493-8"></a>sort_by.reverse        <span class="fl">0.230000</span>   <span class="fl">0.000000</span>   <span class="fl">0.230000</span> (  <span class="fl">0.228571</span>)</span>
<span id="cb493-9"><a href="#cb493-9"></a>sort_by.reverse!       <span class="fl">0.230000</span>   <span class="fl">0.000000</span>   <span class="fl">0.230000</span> (  <span class="fl">0.230040</span>)</span></code></pre></div>
</section>
<section id="answer-2-score-86" class="level4">
<h4>Answer 2 (score 86)</h4>
<p>Just a quick thing, that denotes the intent of descending order.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb494-1"><a href="#cb494-1"></a>descending = <span class="dv">-1</span></span>
<span id="cb494-2"><a href="#cb494-2"></a>a.sort_by { |h| h[<span class="st">:bar</span>] * descending }</span></code></pre></div>
<p>(Will think of a better way in the mean time) ;)</p>
<hr>
<div class="sourceCode" id="cb495"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb495-1"><a href="#cb495-1"></a>a.sort_by { |h| h[<span class="st">:bar</span>] }.reverse!</span></code></pre></div>
</section>
<section id="answer-3-score-52" class="level4">
<h4>Answer 3 (score 52)</h4>
<p>You could do:</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb496-1"><a href="#cb496-1"></a>a.sort{|a,b| b[<span class="st">:bar</span>] &lt;=&gt; a[<span class="st">:bar</span>]}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="error-while-installing-json-gem-mkmf.rb-cant-find-header-files-for-ruby-score-200434-in-2017" class="level3">
<h3>91: Error while installing json gem ‘mkmf.rb can’t find header files for ruby’ (score <a href="https://stackoverflow.com/q/20559255.html">200434</a> in 2017)</h3>
<section id="question-90" class="level4">
<h4>Question</h4>
<p>For context, it on a remote server which has a firewall. I’m setting up my environment through a proxy. I have <code>ruby 1.8.7</code>. When I try to gem install..</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb497-1"><a href="#cb497-1"></a>sudo gem install --http-proxy &lt;host address&gt;:&lt;port&gt; json</span></code></pre></div>
<p>I get the following error:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb498-1"><a href="#cb498-1"></a><span class="dt">Building</span> native extensions.  <span class="dt">This</span> could take a <span class="kw">while</span>...</span>
<span id="cb498-2"><a href="#cb498-2"></a><span class="dt">ERROR</span>:  <span class="dt">Error</span> installing json:</span>
<span id="cb498-3"><a href="#cb498-3"></a>        <span class="dt">ERROR</span>: <span class="dt">Failed</span> to build gem native extension.</span>
<span id="cb498-4"><a href="#cb498-4"></a></span>
<span id="cb498-5"><a href="#cb498-5"></a><span class="ot">/usr/</span>bin/ruby extconf.rb</span>
<span id="cb498-6"><a href="#cb498-6"></a>mkmf.rb can<span class="st">&#39;t find header files for ruby at /usr/lib/ruby/ruby.h</span></span>
<span id="cb498-7"><a href="#cb498-7"></a></span>
<span id="cb498-8"><a href="#cb498-8"></a><span class="st">Gem files will remain installed in /usr/lib64/ruby/gems/1.8/gems/json-1.8.1 for inspection.</span></span>
<span id="cb498-9"><a href="#cb498-9"></a><span class="st">Results logged to /usr/lib64/ruby/gems/1.8/gems/json-1.8.1/ext/json/ext/generator/gem_make.out</span></span></code></pre></div>
<p>Since I was unsure what the problem is, I googled and found these</p>
<ul>
<li>
<p>
<a href="https://stackoverflow.com/questions/4304438/gem-install-failed-to-build-gem-native-extension-cant-find-header-files">gem install: Failed to build gem native extension (can't find header files)</a> - the instructions here seem to be specific to the gem being installed.
</p>
</li>
<li>
<p>
<a href="https://stackoverflow.com/questions/15527092/how-to-install-json-gem-failed-to-build-gem-native-extension">How to install json gem - Failed to build gem native extension</a> This seems to be slightly different error.
</p>
</li>
</ul>
<p>Any hints? Thanks!</p>
</section>
<section id="answer-accepted-score-706" class="level4">
<h4>Answer accepted (score 706)</h4>
<p>Modern era update, as <a href="https://stackoverflow.com/questions/20559255/error-while-installing-json-gem-mkmf-rb-cant-find-header-files-for-ruby/26225468#26225468">stated by mimoralea</a>:</p>
<blockquote>
<p>In case that you are using ruby 2.0 or 2.2 (thanks <span class="citation" data-cites="patrick-davey">@patrick-davey</span>).</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb499-1"><a href="#cb499-1"></a>sudo apt-get install ruby-dev</span>
<span id="cb499-2"><a href="#cb499-2"></a>sudo apt-get install ruby2.<span class="dv">0</span>-dev</span>
<span id="cb499-3"><a href="#cb499-3"></a>sudo apt-get install ruby2.<span class="dv">2</span>-dev</span>
<span id="cb499-4"><a href="#cb499-4"></a>sudo apt-get install ruby2.<span class="dv">3</span>-dev</span></code></pre></div>
</blockquote>
<p>or, generic way:</p>
<blockquote>
<div class="sourceCode" id="cb500"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb500-1"><a href="#cb500-1"></a>sudo apt-get install ruby<span class="st">`ruby -e &#39;puts RUBY_VERSION[/\d+\.\d+/]&#39;`</span>-dev</span></code></pre></div>
</blockquote>
<hr>
<p>The first link you’ve posted is <em>exactly</em> your case: there is no ruby development environment installed. Development env is needed to compile ruby extensions, which are mostly written in <code>C</code>. Proxy has nothing to do with the problem: everything is downloaded fine, just compilation fails.</p>
<p>I would suggest you to install <code>ruby-dev</code> (<code>ruby-devel</code> for rpm-based distros) package onto you target machine. <code>gcc</code> package might be needed as well.</p>
<p>Try:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb501-1"><a href="#cb501-1"></a>$ sudo apt-get install ruby-dev</span></code></pre></div>
<p>Or, for Redhat distro:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb502-1"><a href="#cb502-1"></a>$ sudo yum install ruby-devel</span></code></pre></div>
<p>Or, for [open]SuSE:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb503-1"><a href="#cb503-1"></a>$ sudo zypper install ruby-devel</span></code></pre></div>
</section>
<section id="answer-2-score-74-1" class="level4">
<h4>Answer 2 (score 74)</h4>
<p>In case that you are using ruby 2.0 or 2.2 (thanks <span class="citation" data-cites="patrick-davey">@patrick-davey</span>) or 2.3 (thanks <span class="citation" data-cites="juanitofatas">@juanitofatas</span>).</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb504-1"><a href="#cb504-1"></a>sudo apt-get install ruby-dev</span>
<span id="cb504-2"><a href="#cb504-2"></a>sudo apt-get install ruby2.<span class="dv">0</span>-dev</span>
<span id="cb504-3"><a href="#cb504-3"></a>sudo apt-get install ruby2.<span class="dv">2</span>-dev</span>
<span id="cb504-4"><a href="#cb504-4"></a>sudo apt-get install ruby2.<span class="dv">3</span>-dev</span></code></pre></div>
<p>And you get the pattern here…</p>
</section>
<section id="answer-3-score-20" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>I also encountered this problem because I <a href="https://www.brightbox.com/blog/2016/01/06/ruby-2-3-ubuntu-packages/">install Ruby on Ubuntu via brightbox</a>, and I thought ruby-dev is the trunk of ruby. So I did not install. Install ruby2.3-dev fixes it:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb505-1"><a href="#cb505-1"></a>sudo apt-get install ruby2.<span class="dv">3</span>-dev</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-canonical-way-to-trim-a-string-in-ruby-without-creating-a-new-string-score-199484-in-2009" class="level3">
<h3>92: What is the canonical way to trim a string in Ruby without creating a new string? (score <a href="https://stackoverflow.com/q/1000688.html">199484</a> in 2009)</h3>
<section id="question-91" class="level4">
<h4>Question</h4>
<p>This is what I have now - which looks too verbose for the work it is doing.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb506-1"><a href="#cb506-1"></a><span class="ot">@title</span>        = tokens[<span class="dt">Title</span>].strip! || tokens[<span class="dt">Title</span>] <span class="kw">if</span> !tokens[<span class="dt">Title</span>].nil?</span></code></pre></div>
<p>
Assume tokens is a array obtained by splitting a CSV line. now the functions like strip! chomp! et. all return nil if the string was not modified
</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb507-1"><a href="#cb507-1"></a><span class="st">&quot;abc&quot;</span>.strip!    <span class="co"># =&gt; nil</span></span>
<span id="cb507-2"><a href="#cb507-2"></a><span class="st">&quot; abc &quot;</span>.strip!  <span class="co"># =&gt; &quot;abc&quot;</span></span></code></pre></div>
<p>What is the Ruby way to say trim it if it contains extra leading or trailing spaces without creating copies?</p>
<p>Gets uglier if I want to do <code>tokens[Title].chomp!.strip!</code></p>
</section>
<section id="answer-accepted-score-260" class="level4">
<h4>Answer accepted (score 260)</h4>
<p>I guess what you want is:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb508-1"><a href="#cb508-1"></a><span class="ot">@title</span> = tokens[<span class="dt">Title</span>]</span>
<span id="cb508-2"><a href="#cb508-2"></a><span class="ot">@title</span>.strip!</span></code></pre></div>
<p>The <a href="http://ruby-doc.org/core-2.1.5/String.html#method-i-strip" rel="noreferrer"><code>#strip!</code></a> method will return <code>nil</code> if it didn’t strip anything, and the variable itself if it was stripped.</p>
<p>According to Ruby standards, a method suffixed with an exclamation mark changes the variable in place.</p>
<p>Hope this helps.</p>
<p><strong>Update:</strong> This is output from <code>irb</code> to demonstrate:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb509-1"><a href="#cb509-1"></a>&gt;&gt; <span class="ot">@title</span> = <span class="st">&quot;abc&quot;</span></span>
<span id="cb509-2"><a href="#cb509-2"></a>=&gt; <span class="st">&quot;abc&quot;</span></span>
<span id="cb509-3"><a href="#cb509-3"></a>&gt;&gt; <span class="ot">@title</span>.strip!</span>
<span id="cb509-4"><a href="#cb509-4"></a>=&gt; <span class="dv">nil</span></span>
<span id="cb509-5"><a href="#cb509-5"></a>&gt;&gt; <span class="ot">@title</span></span>
<span id="cb509-6"><a href="#cb509-6"></a>=&gt; <span class="st">&quot;abc&quot;</span></span>
<span id="cb509-7"><a href="#cb509-7"></a>&gt;&gt; <span class="ot">@title</span> = <span class="st">&quot; abc &quot;</span></span>
<span id="cb509-8"><a href="#cb509-8"></a>=&gt; <span class="st">&quot; abc &quot;</span></span>
<span id="cb509-9"><a href="#cb509-9"></a>&gt;&gt; <span class="ot">@title</span>.strip!</span>
<span id="cb509-10"><a href="#cb509-10"></a>=&gt; <span class="st">&quot;abc&quot;</span></span>
<span id="cb509-11"><a href="#cb509-11"></a>&gt;&gt; <span class="ot">@title</span></span>
<span id="cb509-12"><a href="#cb509-12"></a>=&gt; <span class="st">&quot;abc&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-50" class="level4">
<h4>Answer 2 (score 50)</h4>
<p>Btw, now ruby already supports just strip without “!”.</p>
<p>Compare:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb510-1"><a href="#cb510-1"></a>p <span class="st">&quot;abc&quot;</span>.strip! == <span class="st">&quot; abc &quot;</span>.strip!  <span class="co"># false, because &quot;abc&quot;.strip! will return nil</span></span>
<span id="cb510-2"><a href="#cb510-2"></a>p <span class="st">&quot;abc&quot;</span>.strip == <span class="st">&quot; abc &quot;</span>.strip    <span class="co"># true</span></span></code></pre></div>
<p>
<p>Also it’s impossible to <code>strip</code> without duplicates. See sources in string.c:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb511-1"><a href="#cb511-1"></a>static <span class="dt">VALUE</span></span>
<span id="cb511-2"><a href="#cb511-2"></a>rb_str_strip(<span class="dt">VALUE</span> str)</span>
<span id="cb511-3"><a href="#cb511-3"></a>{</span>
<span id="cb511-4"><a href="#cb511-4"></a>    str = rb_str_dup(str);</span>
<span id="cb511-5"><a href="#cb511-5"></a>    rb_str_strip_bang(str);</span>
<span id="cb511-6"><a href="#cb511-6"></a>    <span class="kw">return</span> str;</span>
<span id="cb511-7"><a href="#cb511-7"></a>}</span></code></pre></div>
<p><em>ruby 1.9.3p0 (2011-10-30) [i386-mingw32]</em></p>
<p>
Update 1: As I see now – it was created in 1999 year (see <a href="http://svn.ruby-lang.org/cgi-bin/viewvc.cgi/trunk/string.c?r1=11&amp;r2=372&amp;diff_format=h">rev #372</a> in SVN):
</p>
<p>
Update2: <code>strip!</code> will not create duplicates — both in 1.9.x, 2.x and trunk versions.
</p>
</section>
<section id="answer-3-score-8" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>There’s no need to both strip and chomp as strip will also remove trailing carriage returns - unless you’ve changed the default record separator and that’s what you’re chomping.</p>
<p>Olly’s answer already has the canonical way of doing this in Ruby, though if you find yourself doing this a lot you could always define a method for it:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb512-1"><a href="#cb512-1"></a><span class="kw">def</span> strip_or_self!(str)</span>
<span id="cb512-2"><a href="#cb512-2"></a>  str.strip! || str</span>
<span id="cb512-3"><a href="#cb512-3"></a><span class="kw">end</span></span></code></pre></div>
<p>Giving:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb513-1"><a href="#cb513-1"></a><span class="ot">@title</span> = strip_or_self!(tokens[<span class="dt">Title</span>]) <span class="kw">if</span> tokens[<span class="dt">Title</span>]</span></code></pre></div>
<p>Also keep in mind that the if statement will prevent <code>@title</code> from being assigned if the token is nil, which will result in it keeping its previous value. If you want or don’t mind <code>@title</code> always being assigned you can move the check into the method and further reduce duplication:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb514-1"><a href="#cb514-1"></a><span class="kw">def</span> strip_or_self!(str)</span>
<span id="cb514-2"><a href="#cb514-2"></a>  str.strip! || str <span class="kw">if</span> str</span>
<span id="cb514-3"><a href="#cb514-3"></a><span class="kw">end</span></span></code></pre></div>
<p>As an alternative, if you’re feeling adventurous you can define a method on String itself:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb515-1"><a href="#cb515-1"></a><span class="kw">class</span> <span class="dt">String</span></span>
<span id="cb515-2"><a href="#cb515-2"></a>  <span class="kw">def</span> strip_or_self!</span>
<span id="cb515-3"><a href="#cb515-3"></a>    strip! || <span class="dv">self</span></span>
<span id="cb515-4"><a href="#cb515-4"></a>  <span class="kw">end</span></span>
<span id="cb515-5"><a href="#cb515-5"></a><span class="kw">end</span></span></code></pre></div>
<p>Giving one of:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb516-1"><a href="#cb516-1"></a><span class="ot">@title</span> = tokens[<span class="dt">Title</span>].strip_or_self! <span class="kw">if</span> tokens[<span class="dt">Title</span>]</span>
<span id="cb516-2"><a href="#cb516-2"></a></span>
<span id="cb516-3"><a href="#cb516-3"></a><span class="ot">@title</span> = tokens[<span class="dt">Title</span>] &amp;&amp; tokens[<span class="dt">Title</span>].strip_or_self!</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-where-gem-files-are-installed-score-198624-in-2019" class="level3">
<h3>93: How to find where gem files are installed (score <a href="https://stackoverflow.com/q/19072070.html">198624</a> in 2019)</h3>
<section id="question-92" class="level4">
<h4>Question</h4>
<p>I can finds gems that are installed using <code>gem list</code>, but it doesn’t show me where the gems are installed.</p>
<p>How can I find where the gems are, and how can I know before installing a gem where it will be installed?</p>
</section>
<section id="answer-accepted-score-329" class="level4">
<h4>Answer accepted (score 329)</h4>
<p>Use <a href="http://guides.rubygems.org/command-reference/#gem_environment"><code>gem environment</code></a> to find out about your gem environment:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb517-1"><a href="#cb517-1"></a><span class="dt">RubyGems</span> <span class="dt">Environment</span>:</span>
<span id="cb517-2"><a href="#cb517-2"></a>  - <span class="dt">RUBYGEMS</span> <span class="dt">VERSION</span>: <span class="fl">2.1</span>.<span class="dv">5</span></span>
<span id="cb517-3"><a href="#cb517-3"></a>  - <span class="dt">RUBY</span> <span class="dt">VERSION</span>: <span class="fl">2.0</span>.<span class="dv">0</span> (<span class="dv">2013-06-27</span> patchlevel <span class="dv">247</span>) [x86_64-darwin12.<span class="fl">4.0</span>]</span>
<span id="cb517-4"><a href="#cb517-4"></a>  - <span class="dt">INSTALLATION</span> <span class="dt">DIRECTORY</span>: <span class="ot">/Users/</span>ttm/.rbenv/versions/<span class="fl">2.0</span>.<span class="dv">0</span>-p247/lib/ruby/gems/<span class="fl">2.0</span>.<span class="dv">0</span></span>
<span id="cb517-5"><a href="#cb517-5"></a>  - <span class="dt">RUBY</span> <span class="dt">EXECUTABLE</span>: <span class="ot">/Users/</span>ttm/.rbenv/versions/<span class="fl">2.0</span>.<span class="dv">0</span>-p247/bin/ruby</span>
<span id="cb517-6"><a href="#cb517-6"></a>  - <span class="dt">EXECUTABLE</span> <span class="dt">DIRECTORY</span>: <span class="ot">/Users/</span>ttm/.rbenv/versions/<span class="fl">2.0</span>.<span class="dv">0</span>-p247/bin</span>
<span id="cb517-7"><a href="#cb517-7"></a>  - <span class="dt">SPEC</span> <span class="dt">CACHE</span> <span class="dt">DIRECTORY</span>: <span class="ot">/Users/</span>ttm/.gem/specs</span>
<span id="cb517-8"><a href="#cb517-8"></a>  - <span class="dt">RUBYGEMS</span> <span class="dt">PLATFORMS</span>:</span>
<span id="cb517-9"><a href="#cb517-9"></a>    - ruby</span>
<span id="cb517-10"><a href="#cb517-10"></a>    - x86_64-darwin<span class="dv">-12</span></span>
<span id="cb517-11"><a href="#cb517-11"></a>  - <span class="dt">GEM</span> <span class="dt">PATHS</span>:</span>
<span id="cb517-12"><a href="#cb517-12"></a>     - <span class="ot">/Users/</span>ttm/.rbenv/versions/<span class="fl">2.0</span>.<span class="dv">0</span>-p247/lib/ruby/gems/<span class="fl">2.0</span>.<span class="dv">0</span></span>
<span id="cb517-13"><a href="#cb517-13"></a>     - <span class="ot">/Users/</span>ttm/.gem/ruby/<span class="fl">2.0</span>.<span class="dv">0</span></span>
<span id="cb517-14"><a href="#cb517-14"></a>  - <span class="dt">GEM</span> <span class="dt">CONFIGURATION</span>:</span>
<span id="cb517-15"><a href="#cb517-15"></a>     - <span class="st">:update_sources</span> =&gt; <span class="dv">true</span></span>
<span id="cb517-16"><a href="#cb517-16"></a>     - <span class="st">:verbose</span> =&gt; <span class="dv">true</span></span>
<span id="cb517-17"><a href="#cb517-17"></a>     - <span class="st">:backtrace</span> =&gt; <span class="dv">false</span></span>
<span id="cb517-18"><a href="#cb517-18"></a>     - <span class="st">:bulk_threshold</span> =&gt; <span class="dv">1000</span></span>
<span id="cb517-19"><a href="#cb517-19"></a>  - <span class="dt">REMOTE</span> <span class="dt">SOURCES</span>:</span>
<span id="cb517-20"><a href="#cb517-20"></a>     - https:<span class="ot">//</span>rubygems.org/</span>
<span id="cb517-21"><a href="#cb517-21"></a>  - <span class="dt">SHELL</span> <span class="dt">PATH</span>:</span>
<span id="cb517-22"><a href="#cb517-22"></a>     - <span class="ot">/Users/</span>ttm/.rbenv/versions/<span class="fl">2.0</span>.<span class="dv">0</span>-p247/bin</span>
<span id="cb517-23"><a href="#cb517-23"></a>     - <span class="ot">/Users/</span>ttm/.rbenv/libexec</span>
<span id="cb517-24"><a href="#cb517-24"></a>     - <span class="ot">/Users/</span>ttm/.rbenv/plugins/ruby-build/bin</span>
<span id="cb517-25"><a href="#cb517-25"></a>     - <span class="ot">/Users/</span>ttm/perl5/perlbrew/bin</span>
<span id="cb517-26"><a href="#cb517-26"></a>     - <span class="ot">/Users/</span>ttm/perl5/perlbrew/perls/perl<span class="dv">-5</span>.<span class="fl">18.1</span>/bin</span>
<span id="cb517-27"><a href="#cb517-27"></a>     - <span class="ot">/Users/</span>ttm/.pyenv/shims</span>
<span id="cb517-28"><a href="#cb517-28"></a>     - <span class="ot">/Users/</span>ttm/.pyenv/bin</span>
<span id="cb517-29"><a href="#cb517-29"></a>     - <span class="ot">/Users/</span>ttm/.rbenv/shims</span>
<span id="cb517-30"><a href="#cb517-30"></a>     - <span class="ot">/Users/</span>ttm/.rbenv/bin</span>
<span id="cb517-31"><a href="#cb517-31"></a>     - <span class="ot">/Users/</span>ttm/bin</span>
<span id="cb517-32"><a href="#cb517-32"></a>     - <span class="ot">/usr/</span>local/mysql<span class="dv">-5</span>.<span class="fl">6.12</span>-osx10.<span class="dv">7</span>-x86_64/bin</span>
<span id="cb517-33"><a href="#cb517-33"></a>     - <span class="ot">/Users/</span>ttm/libsmi/bin</span>
<span id="cb517-34"><a href="#cb517-34"></a>     - <span class="ot">/usr/</span>local/bin</span>
<span id="cb517-35"><a href="#cb517-35"></a>     - <span class="ot">/usr/</span>bin</span>
<span id="cb517-36"><a href="#cb517-36"></a>     - <span class="ot">/bin</span></span>
<span id="cb517-37"><a href="#cb517-37"></a><span class="ot">     - /u</span>sr/sbin</span>
<span id="cb517-38"><a href="#cb517-38"></a>     - <span class="ot">/sbin</span></span>
<span id="cb517-39"><a href="#cb517-39"></a><span class="ot">     - /u</span>sr/local/bin</span></code></pre></div>
<p>Notice the two sections for:</p>
<ul>
<li>
<code>INSTALLATION DIRECTORY</code>
</li>
<li>
<code>GEM PATHS</code>
</li>
</ul>
</section>
<section id="answer-2-score-132" class="level4">
<h4>Answer 2 (score 132)</h4>
<p>I found it useful to get a location of the library file with:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb518-1"><a href="#cb518-1"></a>gem which *gemname*</span></code></pre></div>
</section>
<section id="answer-3-score-66-1" class="level4">
<h4>Answer 3 (score 66)</h4>
<p>After installing the gems, if you want to know where a particular gem is. Try typing:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb519-1"><a href="#cb519-1"></a> gem list</span></code></pre></div>
<p>You will be able to see the list of gems you have installed. Now use <code>bundle show</code> and name the gem you want to know the path for, like this:</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb520-1"><a href="#cb520-1"></a> bundle show &lt;gemName&gt;</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ruby---test-for-array-score-197783-in" class="level3">
<h3>94: Ruby - test for array (score <a href="https://stackoverflow.com/q/1527888.html">197783</a> in )</h3>
<section id="question-93" class="level4">
<h4>Question</h4>
<p>What is the right way to:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb521-1"><a href="#cb521-1"></a>is_array(<span class="st">&quot;something&quot;</span>) <span class="co"># =&gt; false         (or 1)</span></span>
<span id="cb521-2"><a href="#cb521-2"></a></span>
<span id="cb521-3"><a href="#cb521-3"></a>is_array([<span class="st">&quot;something&quot;</span>, <span class="st">&quot;else&quot;</span>]) <span class="co"># =&gt; true  (or &gt; 1)</span></span></code></pre></div>
<p>or to get the count of items in it?</p>
</section>
<section id="answer-accepted-score-499" class="level4">
<h4>Answer accepted (score 499)</h4>
<p>You probably want to use <code>kind_of?()</code>.</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb522-1"><a href="#cb522-1"></a>&gt;&gt; s = <span class="st">&quot;something&quot;</span></span>
<span id="cb522-2"><a href="#cb522-2"></a>=&gt; <span class="st">&quot;something&quot;</span></span>
<span id="cb522-3"><a href="#cb522-3"></a>&gt;&gt; s.kind_of?(<span class="dt">Array</span>)</span>
<span id="cb522-4"><a href="#cb522-4"></a>=&gt; <span class="dv">false</span></span>
<span id="cb522-5"><a href="#cb522-5"></a>&gt;&gt; s = [<span class="st">&quot;something&quot;</span>, <span class="st">&quot;else&quot;</span>]</span>
<span id="cb522-6"><a href="#cb522-6"></a>=&gt; [<span class="st">&quot;something&quot;</span>, <span class="st">&quot;else&quot;</span>]</span>
<span id="cb522-7"><a href="#cb522-7"></a>&gt;&gt; s.kind_of?(<span class="dt">Array</span>)</span>
<span id="cb522-8"><a href="#cb522-8"></a>=&gt; <span class="dv">true</span></span></code></pre></div>
</section>
<section id="answer-2-score-144" class="level4">
<h4>Answer 2 (score 144)</h4>
<p>Are you sure it <strong>needs</strong> to be an array? You may be able to use <code>respond_to?(method)</code> so your code would work for similar things that aren’t necessarily arrays (maybe some other enumberable thing). If you do actually need an <code>array</code>, then the post describing the <code>Array#kind\_of?</code> method is best.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb523-1"><a href="#cb523-1"></a>[<span class="st">&#39;hello&#39;</span>].respond_to?(<span class="st">&#39;each&#39;</span>)</span></code></pre></div>
</section>
<section id="answer-3-score-56-1" class="level4">
<h4>Answer 3 (score 56)</h4>
<p>Instead of testing for an <code>Array,</code> just convert whatever you get into a one-level <code>Array,</code> so your code only needs to handle the one case.</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb524-1"><a href="#cb524-1"></a>t = [*something]     <span class="co"># or...</span></span>
<span id="cb524-2"><a href="#cb524-2"></a>t = <span class="dt">Array</span>(something) <span class="co"># or...</span></span>
<span id="cb524-3"><a href="#cb524-3"></a><span class="kw">def</span> f *x</span>
<span id="cb524-4"><a href="#cb524-4"></a>    ...</span>
<span id="cb524-5"><a href="#cb524-5"></a><span class="kw">end</span></span></code></pre></div>
<p>Ruby has various ways to harmonize an API which can take an object or an Array of objects, so, taking a guess at why you want to know if something <em>is</em> an Array, I have a suggestion.</p>
<p>The <em>splat</em> operator contains lots of magic <a href="http://blog.honeybadger.io/ruby-splat-array-manipulation-destructuring/" rel="noreferrer">you can look up,</a> or you can just call <code>Array(something)</code> which will add an Array wrapper if needed. It’s similar to <code>[*something]</code> in this one case.</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb525-1"><a href="#cb525-1"></a><span class="kw">def</span> f x</span>
<span id="cb525-2"><a href="#cb525-2"></a>  p <span class="dt">Array</span>(x).inspect</span>
<span id="cb525-3"><a href="#cb525-3"></a>  p [*x].inspect</span>
<span id="cb525-4"><a href="#cb525-4"></a><span class="kw">end</span></span>
<span id="cb525-5"><a href="#cb525-5"></a>f <span class="dv">1</span>         <span class="co"># =&gt; &quot;[1]&quot;</span></span>
<span id="cb525-6"><a href="#cb525-6"></a>f [<span class="dv">1</span>]       <span class="co"># =&gt; &quot;[1]&quot;</span></span>
<span id="cb525-7"><a href="#cb525-7"></a>f [<span class="dv">1</span>,<span class="dv">2</span>]     <span class="co"># =&gt; &quot;[1, 2]&quot;</span></span></code></pre></div>
<p>Or, you could use the <em>splat</em> in the parameter declaration and then <code>.flatten</code>, giving you a different sort of collector. (For that matter, you could call <code>.flatten</code> above, too.)</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb526-1"><a href="#cb526-1"></a><span class="kw">def</span> f *x</span>
<span id="cb526-2"><a href="#cb526-2"></a>  p x.flatten.inspect</span>
<span id="cb526-3"><a href="#cb526-3"></a><span class="kw">end</span>         <span class="co"># =&gt; nil</span></span>
<span id="cb526-4"><a href="#cb526-4"></a>f <span class="dv">1</span>         <span class="co"># =&gt; &quot;[1]&quot;</span></span>
<span id="cb526-5"><a href="#cb526-5"></a>f <span class="dv">1</span>,<span class="dv">2</span>       <span class="co"># =&gt; &quot;[1, 2]&quot;</span></span>
<span id="cb526-6"><a href="#cb526-6"></a>f [<span class="dv">1</span>]       <span class="co"># =&gt; &quot;[1]&quot;</span></span>
<span id="cb526-7"><a href="#cb526-7"></a>f [<span class="dv">1</span>,<span class="dv">2</span>]     <span class="co"># =&gt; &quot;[1, 2]&quot;</span></span>
<span id="cb526-8"><a href="#cb526-8"></a>f [<span class="dv">1</span>,<span class="dv">2</span>],<span class="dv">3</span>,<span class="dv">4</span> <span class="co"># =&gt; &quot;[1, 2, 3, 4]&quot;</span></span></code></pre></div>
<p>And, thanks <a href="https://stackoverflow.com/users/365596/gregschlom">gregschlom</a>, it’s sometimes faster to just use <code>Array(x)</code> because when it’s already an <code>Array</code> it doesn’t need to create a new object.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="remove-duplicate-elements-from-array-in-ruby-score-197438-in-2017" class="level3">
<h3>95: Remove duplicate elements from array in Ruby (score <a href="https://stackoverflow.com/q/8365721.html">197438</a> in 2017)</h3>
<section id="question-94" class="level4">
<h4>Question</h4>
<p>I have a Ruby array which contains duplicate elements.</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb527-1"><a href="#cb527-1"></a>array = [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span></code></pre></div>
<p>How can I remove all the duplicate elements from this array while retaining all unique elements without using for-loops and iteration?</p>
</section>
<section id="answer-accepted-score-681" class="level4">
<h4>Answer accepted (score 681)</h4>
<div class="sourceCode" id="cb528"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb528-1"><a href="#cb528-1"></a>array = array.uniq</span></code></pre></div>
<p>The <a href="http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-uniq" rel="noreferrer">uniq method</a> removes all duplicate elements and retains all unique elements in the array.</p>
<p>One of many beauties of Ruby language.</p>
</section>
<section id="answer-2-score-80-1" class="level4">
<h4>Answer 2 (score 80)</h4>
<p>You can also return the intersection.</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb529-1"><a href="#cb529-1"></a>a = [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb529-2"><a href="#cb529-2"></a>a &amp; a</span></code></pre></div>
<p>This will also delete duplicates.</p>
</section>
<section id="answer-3-score-42" class="level4">
<h4>Answer 3 (score 42)</h4>
<p>You can remove the duplicate elements with the uniq method:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb530-1"><a href="#cb530-1"></a>array.uniq  <span class="co"># =&gt; [1, 2, 4, 5, 6, 7, 8]</span></span></code></pre></div>
<p>What might also be useful to know is that the uniq method takes a block, so e.g if you a have an array of keys like this:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb531-1"><a href="#cb531-1"></a>[<span class="st">&quot;bucket1:file1&quot;</span>, <span class="st">&quot;bucket2:file1&quot;</span>, <span class="st">&quot;bucket3:file2&quot;</span>, <span class="st">&quot;bucket4:file2&quot;</span>]</span></code></pre></div>
<p>and you want to know what are the unique files, you can find it out with:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb532-1"><a href="#cb532-1"></a>a.uniq { |f| f[<span class="ot">/\d+$/</span>] }.map { |p| p.split(<span class="ch">&#39;:&#39;</span>).last }</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="whats-the-difference-between-equal-eql-and-score-196839-in-2014" class="level3">
<h3>96: What’s the difference between equal?, eql?, ===, and ==? (score <a href="https://stackoverflow.com/q/7156955.html">196839</a> in 2014)</h3>
<section id="question-95" class="level4">
<h4>Question</h4>
<p>I am trying to understand the difference between these four methods. I know by default that <code>==</code> calls the method <code>equal?</code> which returns true when both operands refer to exactly the same object.</p>
<p>
<code>===</code> by default also calls <code>==</code> which calls <code>equal?</code>… okay, so if all these three methods are not overridden, then I guess <code>===</code>, <code>==</code> and <code>equal?</code> do exactly the same thing?
</p>
<p>Now comes <code>eql?</code>. What does this do (by default)? Does it make a call to the operand’s hash/id?</p>
<p>Why does Ruby have so many equality signs? Are they supposed to differ in semantics?</p>
</section>
<section id="answer-accepted-score-765" class="level4">
<h4>Answer accepted (score 765)</h4>
<p>I’m going to heavily quote <a href="http://ruby-doc.org/core/Object.html#method-i-eql-3F" rel="noreferrer">the Object documentation</a> here, because I think it has some great explanations. I encourage you to read it, and also the documentation for these methods as they’re overridden in other classes, like <a href="http://ruby-doc.org/core/classes/String.html" rel="noreferrer">String</a>.</p>
<p><em>Side note: if you want to try these out for yourself on different objects, use something like this:</em></p>
<div class="sourceCode" id="cb533"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb533-1"><a href="#cb533-1"></a><span class="kw">class</span> <span class="dt">Object</span></span>
<span id="cb533-2"><a href="#cb533-2"></a>  <span class="kw">def</span> all_equals(o)</span>
<span id="cb533-3"><a href="#cb533-3"></a>    ops = [:==, :===, <span class="st">:eql?</span>, <span class="st">:equal?</span>]</span>
<span id="cb533-4"><a href="#cb533-4"></a>    <span class="dt">Hash</span>[ops.map(&amp;<span class="st">:to_s</span>).zip(ops.map {|s| send(s, o) })]</span>
<span id="cb533-5"><a href="#cb533-5"></a>  <span class="kw">end</span></span>
<span id="cb533-6"><a href="#cb533-6"></a><span class="kw">end</span></span>
<span id="cb533-7"><a href="#cb533-7"></a></span>
<span id="cb533-8"><a href="#cb533-8"></a><span class="st">&quot;a&quot;</span>.all_equals <span class="st">&quot;a&quot;</span> <span class="co"># =&gt; {&quot;==&quot;=&gt;true, &quot;===&quot;=&gt;true, &quot;eql?&quot;=&gt;true, &quot;equal?&quot;=&gt;false}</span></span></code></pre></div>
<hr>
<h5>
<code>==</code> — generic “equality”
</h2>
<blockquote>
At the Object level, <code>==</code> returns true only if <code>obj</code> and <code>other</code> are the same object. Typically, this method is overridden in descendant classes to provide class-specific meaning.
</blockquote>
<p>This is the most common comparison, and thus the most fundamental place where you (as the author of a class) get to decide if two objects are “equal” or not.</p>
<h5>
<code>===</code> — case equality
</h2>
<blockquote>
For class Object, effectively the same as calling <code>#==</code>, but typically overridden by descendants to provide meaningful semantics in case statements.
</blockquote>
<p>This is incredibly useful. Examples of things which have interesting <code>===</code> implementations:</p>
<ul>
<li>
Range
</li>
<li>
Regex
</li>
<li>
Proc (in Ruby 1.9)
</li>
</ul>
<p>So you can do things like:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb534-1"><a href="#cb534-1"></a><span class="kw">case</span> some_object</span>
<span id="cb534-2"><a href="#cb534-2"></a><span class="kw">when</span> <span class="ot">/a regex/</span></span>
<span id="cb534-3"><a href="#cb534-3"></a>  <span class="co"># The regex matches</span></span>
<span id="cb534-4"><a href="#cb534-4"></a><span class="kw">when</span> <span class="dv">2</span>..<span class="dv">4</span></span>
<span id="cb534-5"><a href="#cb534-5"></a>  <span class="co"># some_object is in the range 2..4</span></span>
<span id="cb534-6"><a href="#cb534-6"></a><span class="kw">when</span> lambda {|x| some_crazy_custom_predicate }</span>
<span id="cb534-7"><a href="#cb534-7"></a>  <span class="co"># the lambda returned true</span></span>
<span id="cb534-8"><a href="#cb534-8"></a><span class="kw">end</span></span></code></pre></div>
<p>See <a href="https://stackoverflow.com/questions/1735717/help-refactoring-this-nasty-ruby-if-else-statement/1735777#1735777">my answer here</a> for a neat example of how <code>case</code>+<code>Regex</code> can make code a lot cleaner. And of course, by providing your own <code>===</code> implementation, you can get custom <code>case</code> semantics.</p>
<h5>
<code>eql?</code> — <code>Hash</code> equality
</h2>
<blockquote>
<p>The <code>eql?</code> method returns true if <code>obj</code> and <code>other</code> refer to the same hash key. This is used by <code>Hash</code> to test members for equality. <strong>For objects of class <code>Object</code>, <code>eql?</code> is synonymous with <code>==</code>.</strong> Subclasses normally continue this tradition by aliasing <code>eql?</code> to their overridden <code>==</code> method, but there are exceptions. <code>Numeric</code> types, for example, perform type conversion across <code>==</code>, but not across <code>eql?</code>, so:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb535-1"><a href="#cb535-1"></a><span class="dv">1</span> == <span class="fl">1.0</span>     <span class="co">#=&gt; true</span></span>
<span id="cb535-2"><a href="#cb535-2"></a><span class="dv">1</span>.eql? <span class="fl">1.0</span>   <span class="co">#=&gt; false</span></span></code></pre></div>
</blockquote>
<p>So you’re free to override this for your own uses, or you can override <code>==</code> and use <code>alias :eql? :==</code> so the two methods behave the same way.</p>
<h5>
<code>equal?</code> — identity comparison
</h2>
<blockquote>
Unlike <code>==</code>, the <code>equal?</code> method should never be overridden by subclasses: it is used to determine object identity (that is, <code>a.equal?(b)</code> iff <code>a</code> is the same object as <code>b</code>).
</blockquote>
<p>This is effectively pointer comparison.</p>
</section>
<section id="answer-2-score-46" class="level4">
<h4>Answer 2 (score 46)</h4>
<p>I love jtbandes answer, but since it is pretty long, I will add my own compact answer:</p>
<p>
<strong><code>==</code>, <code>===</code>, <code>eql?</code>, <code>equal?</code></strong><br> are 4 comparators, ie. 4 ways to compare 2 objects, in Ruby.<br> As, in Ruby, all comparators (and most operators) are actually method-calls, you can change, overwrite, and define the semantics of these comparing methods yourself. However, it is important to understand, when Ruby’s internal language constructs use which comparator:
</p>
<p>
<strong><code>==</code> (value comparison)</strong><br> Ruby uses :== everywhere to compare the <strong>values</strong> of 2 objects, eg. Hash-values:
</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb536-1"><a href="#cb536-1"></a>{<span class="st">a: </span><span class="ch">&#39;z&#39;</span>}  ==  {<span class="st">a: </span><span class="ch">&#39;Z&#39;</span>}    <span class="co"># =&gt; false</span></span>
<span id="cb536-2"><a href="#cb536-2"></a>{<span class="st">a: </span><span class="dv">1</span>}    ==  {<span class="st">a: </span><span class="fl">1.0</span>}    <span class="co"># =&gt; true</span></span></code></pre></div>
<p>
<strong><code>===</code> (case comparison)</strong><br> Ruby uses :=== in case/when constructs. The following code snippets are logically identical:
</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb537-1"><a href="#cb537-1"></a><span class="kw">case</span> foo</span>
<span id="cb537-2"><a href="#cb537-2"></a>  <span class="kw">when</span> bar;  p <span class="st">&#39;do something&#39;</span></span>
<span id="cb537-3"><a href="#cb537-3"></a><span class="kw">end</span></span>
<span id="cb537-4"><a href="#cb537-4"></a></span>
<span id="cb537-5"><a href="#cb537-5"></a><span class="kw">if</span> bar === foo</span>
<span id="cb537-6"><a href="#cb537-6"></a>  p <span class="st">&#39;do something&#39;</span></span>
<span id="cb537-7"><a href="#cb537-7"></a><span class="kw">end</span></span></code></pre></div>
<p>
<strong><code>eql?</code> (Hash-key comparison)</strong><br> Ruby uses :eql? (in combination with the method hash) to compare Hash-keys. In most classes :eql? is identical with :==.<br> Knowledge about :eql? is only important, when you want to create your own special classes:
</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb538-1"><a href="#cb538-1"></a><span class="kw">class</span> <span class="dt">Equ</span></span>
<span id="cb538-2"><a href="#cb538-2"></a>  <span class="ot">attr_accessor</span> <span class="st">:val</span></span>
<span id="cb538-3"><a href="#cb538-3"></a>  alias_method  <span class="st">:initialize</span>, <span class="st">:val=</span></span>
<span id="cb538-4"><a href="#cb538-4"></a>  <span class="kw">def</span> hash()           <span class="dv">self</span>.val % <span class="dv">2</span>             <span class="kw">end</span></span>
<span id="cb538-5"><a href="#cb538-5"></a>  <span class="kw">def</span> eql?(other)      <span class="dv">self</span>.hash == other.hash  <span class="kw">end</span></span>
<span id="cb538-6"><a href="#cb538-6"></a><span class="kw">end</span></span>
<span id="cb538-7"><a href="#cb538-7"></a></span>
<span id="cb538-8"><a href="#cb538-8"></a>h = {<span class="dt">Equ</span>.new(<span class="dv">3</span>) =&gt; <span class="dv">3</span>,  <span class="dt">Equ</span>.new(<span class="dv">8</span>) =&gt; <span class="dv">8</span>,  <span class="dt">Equ</span>.new(<span class="dv">15</span>) =&gt; <span class="dv">15</span>}    <span class="co">#3 entries, but 2 are :eql?</span></span>
<span id="cb538-9"><a href="#cb538-9"></a>h.size            <span class="co"># =&gt; 2</span></span>
<span id="cb538-10"><a href="#cb538-10"></a>h[<span class="dt">Equ</span>.new(<span class="dv">27</span>)]    <span class="co"># =&gt; 15</span></span></code></pre></div>
<p>Note: The commonly used Ruby-class Set also relies on Hash-key-comparison.</p>
<p>
<strong><code>equal?</code> (object identity comparison)</strong><br> Ruby uses :equal? to check if two objects are identical. This method (of class BasicObject) is not supposed to be overwritten.
</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb539-1"><a href="#cb539-1"></a>obj = obj2 = <span class="ch">&#39;a&#39;</span></span>
<span id="cb539-2"><a href="#cb539-2"></a>obj.equal? obj2       <span class="co"># =&gt; true</span></span>
<span id="cb539-3"><a href="#cb539-3"></a>obj.equal? obj.dup    <span class="co"># =&gt; false</span></span></code></pre></div>
</section>
<section id="answer-3-score-31" class="level4">
<h4>Answer 3 (score 31)</h4>
<h5>
Equality operators: == and !=
</h2>
<p>The == operator, also known as equality or double equal, will return true if both objects are equal and false if they are not.</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb540-1"><a href="#cb540-1"></a><span class="st">&quot;koan&quot;</span> == <span class="st">&quot;koan&quot;</span> <span class="co"># Output: =&gt; true</span></span></code></pre></div>
<p>The != operator, also known as inequality, is the opposite of ==. It will return true if both objects are not equal and false if they are equal.</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb541-1"><a href="#cb541-1"></a><span class="st">&quot;koan&quot;</span> != <span class="st">&quot;discursive thought&quot;</span> <span class="co"># Output: =&gt; true</span></span></code></pre></div>
<p>Note that two arrays with the same elements in a different order are not equal, uppercase and lowercase versions of the same letter are not equal and so on.</p>
<p>When comparing numbers of different types (e.g., integer and float), if their numeric value is the same, == will return true.</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb542-1"><a href="#cb542-1"></a><span class="dv">2</span> == <span class="fl">2.0</span> <span class="co"># Output: =&gt; true</span></span></code></pre></div>
<h5>
equal?
</h2>
<p>Unlike the == operator which tests if both operands are equal, the equal method checks if the two operands refer to the same object. This is the strictest form of equality in Ruby.</p>
<p>
Example: a = “zen” b = “zen”
</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb543-1"><a href="#cb543-1"></a>a.object_id  <span class="co"># Output: =&gt; 20139460</span></span>
<span id="cb543-2"><a href="#cb543-2"></a>b.object_id  <span class="co"># Output :=&gt; 19972120</span></span>
<span id="cb543-3"><a href="#cb543-3"></a></span>
<span id="cb543-4"><a href="#cb543-4"></a>a.equal? b  <span class="co"># Output: =&gt; false</span></span></code></pre></div>
<p>In the example above, we have two strings with the same value. However, they are two distinct objects, with different object IDs. Hence, the equal? method will return false.</p>
<p>Let’s try again, only this time b will be a reference to a. Notice that the object ID is the same for both variables, as they point to the same object.</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb544-1"><a href="#cb544-1"></a>a = <span class="st">&quot;zen&quot;</span></span>
<span id="cb544-2"><a href="#cb544-2"></a>b = a</span>
<span id="cb544-3"><a href="#cb544-3"></a></span>
<span id="cb544-4"><a href="#cb544-4"></a>a.object_id  <span class="co"># Output: =&gt; 18637360</span></span>
<span id="cb544-5"><a href="#cb544-5"></a>b.object_id  <span class="co"># Output: =&gt; 18637360</span></span>
<span id="cb544-6"><a href="#cb544-6"></a></span>
<span id="cb544-7"><a href="#cb544-7"></a>a.equal? b  <span class="co"># Output: =&gt; true</span></span></code></pre></div>
<h5>
eql?
</h2>
<p>In the Hash class, the eql? method it is used to test keys for equality. Some background is required to explain this. In the general context of computing, a hash function takes a string (or a file) of any size and generates a string or integer of fixed size called hashcode, commonly referred to as only hash. Some commonly used hashcode types are MD5, SHA-1, and CRC. They are used in encryption algorithms, database indexing, file integrity checking, etc. Some programming languages, such as Ruby, provide a collection type called hash table. Hash tables are dictionary-like collections which store data in pairs, consisting of unique keys and their corresponding values. Under the hood, those keys are stored as hashcodes. Hash tables are commonly referred to as just hashes. Notice how the word hashcan refer to a hashcode or to a hash table. In the context of Ruby programming, the word hash almost always refers to the dictionary-like collection.</p>
<p>Ruby provides a built-in method called hash for generating hashcodes. In the example below, it takes a string and returns a hashcode. Notice how strings with the same value always have the same hashcode, even though they are distinct objects (with different object IDs).</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb545-1"><a href="#cb545-1"></a><span class="st">&quot;meditation&quot;</span>.hash  <span class="co"># Output: =&gt; 1396080688894079547</span></span>
<span id="cb545-2"><a href="#cb545-2"></a><span class="st">&quot;meditation&quot;</span>.hash  <span class="co"># Output: =&gt; 1396080688894079547</span></span>
<span id="cb545-3"><a href="#cb545-3"></a><span class="st">&quot;meditation&quot;</span>.hash  <span class="co"># Output: =&gt; 1396080688894079547</span></span></code></pre></div>
<p>The hash method is implemented in the Kernel module, included in the Object class, which is the default root of all Ruby objects. Some classes such as Symbol and Integer use the default implementation, others like String and Hash provide their own implementations.</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb546-1"><a href="#cb546-1"></a><span class="dt">Symbol</span>.instance_method(<span class="st">:hash</span>).owner  <span class="co"># Output: =&gt; Kernel</span></span>
<span id="cb546-2"><a href="#cb546-2"></a><span class="dt">Integer</span>.instance_method(<span class="st">:hash</span>).owner <span class="co"># Output: =&gt; Kernel</span></span>
<span id="cb546-3"><a href="#cb546-3"></a></span>
<span id="cb546-4"><a href="#cb546-4"></a><span class="dt">String</span>.instance_method(<span class="st">:hash</span>).owner  <span class="co"># Output: =&gt; String</span></span>
<span id="cb546-5"><a href="#cb546-5"></a><span class="dt">Hash</span>.instance_method(<span class="st">:hash</span>).owner  <span class="co"># Output: =&gt; Hash</span></span></code></pre></div>
<p>In Ruby, when we store something in a hash (collection), the object provided as a key (e.g., string or symbol) is converted into and stored as a hashcode. Later, when retrieving an element from the hash (collection), we provide an object as a key, which is converted into a hashcode and compared to the existing keys. If there is a match, the value of the corresponding item is returned. The comparison is made using the eql? method under the hood.</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb547-1"><a href="#cb547-1"></a><span class="st">&quot;zen&quot;</span>.eql? <span class="st">&quot;zen&quot;</span>    <span class="co"># Output: =&gt; true</span></span>
<span id="cb547-2"><a href="#cb547-2"></a><span class="co"># is the same as</span></span>
<span id="cb547-3"><a href="#cb547-3"></a><span class="st">&quot;zen&quot;</span>.hash == <span class="st">&quot;zen&quot;</span>.hash <span class="co"># Output: =&gt; true</span></span></code></pre></div>
<p>In most cases, the eql? method behaves similarly to the == method. However, there are a few exceptions. For instance, eql? does not perform implicit type conversion when comparing an integer to a float.</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb548-1"><a href="#cb548-1"></a><span class="dv">2</span> == <span class="fl">2.0</span>    <span class="co"># Output: =&gt; true</span></span>
<span id="cb548-2"><a href="#cb548-2"></a><span class="dv">2</span>.eql? <span class="fl">2.0</span>    <span class="co"># Output: =&gt; false</span></span>
<span id="cb548-3"><a href="#cb548-3"></a><span class="dv">2</span>.hash == <span class="fl">2.0</span>.hash  <span class="co"># Output: =&gt; false</span></span></code></pre></div>
<h5>
Case equality operator: ===
</h2>
<h5>
</h2>
<p>Many of Ruby’s built-in classes, such as String, Range, and Regexp, provide their own implementations of the === operator, also known as case-equality, triple equals or threequals. Because it’s implemented differently in each class, it will behave differently depending on the type of object it was called on. Generally, it returns true if the object on the right “belongs to” or “is a member of” the object on the left. For instance, it can be used to test if an object is an instance of a class (or one of its subclasses).</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb549-1"><a href="#cb549-1"></a><span class="dt">String</span> === <span class="st">&quot;zen&quot;</span>  <span class="co"># Output: =&gt; true</span></span>
<span id="cb549-2"><a href="#cb549-2"></a><span class="dt">Range</span> === (<span class="dv">1</span>..<span class="dv">2</span>)   <span class="co"># Output: =&gt; true</span></span>
<span id="cb549-3"><a href="#cb549-3"></a><span class="dt">Array</span> === [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]   <span class="co"># Output: =&gt; true</span></span>
<span id="cb549-4"><a href="#cb549-4"></a><span class="dt">Integer</span> === <span class="dv">2</span>   <span class="co"># Output: =&gt; true</span></span></code></pre></div>
<p>The same result can be achieved with other methods which are probably best suited for the job. It’s usually better to write code that is easy to read by being as explicit as possible, without sacrificing efficiency and conciseness.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb550-1"><a href="#cb550-1"></a><span class="dv">2</span>.is_a? <span class="dt">Integer</span>   <span class="co"># Output: =&gt; true</span></span>
<span id="cb550-2"><a href="#cb550-2"></a><span class="dv">2</span>.kind_of? <span class="dt">Integer</span>  <span class="co"># Output: =&gt; true</span></span>
<span id="cb550-3"><a href="#cb550-3"></a><span class="dv">2</span>.instance_of? <span class="dt">Integer</span> <span class="co"># Output: =&gt; false</span></span></code></pre></div>
<p>Notice the last example returned false because integers such as 2 are instances of the Fixnum class, which is a subclass of the Integer class. The ===, is_a? and instance_of? methods return true if the object is an instance of the given class or any subclasses. The instance_of method is stricter and only returns true if the object is an instance of that exact class, not a subclass.</p>
<p>The is_a? and kind_of? methods are implemented in the Kernel module, which is mixed in by the Object class. Both are aliases to the same method. Let’s verify:</p>
<p>Kernel.instance_method(:kind_of?) == Kernel.instance_method(:is_a?) # Output: =&gt; true</p>
<h5>
Range Implementation of ===
</h3>
<p>When the === operator is called on a range object, it returns true if the value on the right falls within the range on the left.</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb551-1"><a href="#cb551-1"></a>(<span class="dv">1</span>..<span class="dv">4</span>) === <span class="dv">3</span>  <span class="co"># Output: =&gt; true</span></span>
<span id="cb551-2"><a href="#cb551-2"></a>(<span class="dv">1</span>..<span class="dv">4</span>) === <span class="fl">2.345</span> <span class="co"># Output: =&gt; true</span></span>
<span id="cb551-3"><a href="#cb551-3"></a>(<span class="dv">1</span>..<span class="dv">4</span>) === <span class="dv">6</span>  <span class="co"># Output: =&gt; false</span></span>
<span id="cb551-4"><a href="#cb551-4"></a></span>
<span id="cb551-5"><a href="#cb551-5"></a>(<span class="st">&quot;a&quot;</span>..<span class="st">&quot;d&quot;</span>) === <span class="st">&quot;c&quot;</span> <span class="co"># Output: =&gt; true</span></span>
<span id="cb551-6"><a href="#cb551-6"></a>(<span class="st">&quot;a&quot;</span>..<span class="st">&quot;d&quot;</span>) === <span class="st">&quot;e&quot;</span> <span class="co"># Output: =&gt; false</span></span></code></pre></div>
<p>Remember that the === operator invokes the === method of the left-hand object. So (1..4) === 3 is equivalent to (1..4).=== 3. In other words, the class of the left-hand operand will define which implementation of the === method will be called, so the operand positions are not interchangeable.</p>
<h5>
Regexp Implementation of ===
</h3>
<p>
Returns true if the string on the right matches the regular expression on the left. /zen/ === “practice zazen today” # Output: =&gt; true # is the same as “practice zazen today”=~ /zen/
</p>
<h5>
Implicit usage of the === operator on case/when statements
</h3>
<p>This operator is also used under the hood on case/when statements. That is its most common use.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb552-1"><a href="#cb552-1"></a>minutes = <span class="dv">15</span></span>
<span id="cb552-2"><a href="#cb552-2"></a></span>
<span id="cb552-3"><a href="#cb552-3"></a><span class="kw">case</span> minutes</span>
<span id="cb552-4"><a href="#cb552-4"></a>  <span class="kw">when</span> <span class="dv">10</span>..<span class="dv">20</span></span>
<span id="cb552-5"><a href="#cb552-5"></a>    puts <span class="st">&quot;match&quot;</span></span>
<span id="cb552-6"><a href="#cb552-6"></a>  <span class="kw">else</span></span>
<span id="cb552-7"><a href="#cb552-7"></a>    puts <span class="st">&quot;no match&quot;</span></span>
<span id="cb552-8"><a href="#cb552-8"></a><span class="kw">end</span></span>
<span id="cb552-9"><a href="#cb552-9"></a></span>
<span id="cb552-10"><a href="#cb552-10"></a><span class="co"># Output: match</span></span></code></pre></div>
<p>In the example above, if Ruby had implicitly used the double equal operator (==), the range 10..20 would not be considered equal to an integer such as 15. They match because the triple equal operator (===) is implicitly used in all case/when statements. The code in the example above is equivalent to:</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb553-1"><a href="#cb553-1"></a><span class="kw">if</span> (<span class="dv">10</span>..<span class="dv">20</span>) === minutes</span>
<span id="cb553-2"><a href="#cb553-2"></a>  puts <span class="st">&quot;match&quot;</span></span>
<span id="cb553-3"><a href="#cb553-3"></a><span class="kw">else</span></span>
<span id="cb553-4"><a href="#cb553-4"></a>  puts <span class="st">&quot;no match&quot;</span></span>
<span id="cb553-5"><a href="#cb553-5"></a><span class="kw">end</span></span></code></pre></div>
<h5>
Pattern matching operators: =~ and !~
</h2>
<h5>
</h2>
<p>The =~ (equal-tilde) and !~ (bang-tilde) operators are used to match strings and symbols against regex patterns.</p>
<p>The implementation of the =~ method in the String and Symbol classes expects a regular expression (an instance of the Regexp class) as an argument.</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb554-1"><a href="#cb554-1"></a><span class="st">&quot;practice zazen&quot;</span> =~ <span class="ot">/zen/</span>   <span class="co"># Output: =&gt; 11</span></span>
<span id="cb554-2"><a href="#cb554-2"></a><span class="st">&quot;practice zazen&quot;</span> =~ <span class="ot">/discursive thought/</span> <span class="co"># Output: =&gt; nil</span></span>
<span id="cb554-3"><a href="#cb554-3"></a></span>
<span id="cb554-4"><a href="#cb554-4"></a><span class="st">:zazen</span> =~ <span class="ot">/zen/</span>    <span class="co"># Output: =&gt; 2</span></span>
<span id="cb554-5"><a href="#cb554-5"></a><span class="st">:zazen</span> =~ <span class="ot">/discursive thought/</span>  <span class="co"># Output: =&gt; nil</span></span></code></pre></div>
<p>The implementation in the Regexp class expects a string or a symbol as an argument.</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb555-1"><a href="#cb555-1"></a><span class="ot">/zen/</span> =~ <span class="st">&quot;practice zazen&quot;</span>  <span class="co"># Output: =&gt; 11</span></span>
<span id="cb555-2"><a href="#cb555-2"></a><span class="ot">/zen/</span> =~ <span class="st">&quot;discursive thought&quot;</span> <span class="co"># Output: =&gt; nil</span></span></code></pre></div>
<p>In all implementations, when the string or symbol matches the Regexp pattern, it returns an integer which is the position (index) of the match. If there is no match, it returns nil. Remember that, in Ruby, any integer value is “truthy” and nil is “falsy”, so the =~ operator can be used in if statements and ternary operators.</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb556-1"><a href="#cb556-1"></a>puts <span class="st">&quot;yes&quot;</span> <span class="kw">if</span> <span class="st">&quot;zazen&quot;</span> =~ <span class="ot">/zen/</span> <span class="co"># Output: =&gt; yes</span></span>
<span id="cb556-2"><a href="#cb556-2"></a><span class="st">&quot;zazen&quot;</span> =~ <span class="ot">/zen/</span>?<span class="st">&quot;yes&quot;</span>:<span class="st">&quot;no&quot;</span> <span class="co"># Output: =&gt; yes</span></span></code></pre></div>
<p>Pattern-matching operators are also useful for writing shorter if statements. Example:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb557-1"><a href="#cb557-1"></a><span class="kw">if</span> meditation_type == <span class="st">&quot;zazen&quot;</span> || meditation_type == <span class="st">&quot;shikantaza&quot;</span> || meditation_type == <span class="st">&quot;kinhin&quot;</span></span>
<span id="cb557-2"><a href="#cb557-2"></a>  <span class="dv">true</span></span>
<span id="cb557-3"><a href="#cb557-3"></a><span class="kw">end</span></span>
<span id="cb557-4"><a href="#cb557-4"></a><span class="dt">Can</span> be rewritten as:</span>
<span id="cb557-5"><a href="#cb557-5"></a><span class="kw">if</span> meditation_type =~ <span class="ot">/^(zazen|shikantaza|kinhin)$/</span></span>
<span id="cb557-6"><a href="#cb557-6"></a>  <span class="dv">true</span></span>
<span id="cb557-7"><a href="#cb557-7"></a><span class="kw">end</span></span></code></pre></div>
<p>The !~ operator is the opposite of =~, it returns true when there is no match and false if there is a match.</p>
<p>More info is available at <a href="http://www.zenruby.info/2016/05/ruby-operators-equality-comparison.html" rel="noreferrer">this blog post</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-run-a-single-testspec-file-in-rspec-score-196194-in-2012" class="level3">
<h3>97: How do you run a single test/spec file in RSpec? (score <a href="https://stackoverflow.com/q/143925.html">196194</a> in 2012)</h3>
<section id="question-96" class="level4">
<h4>Question</h4>
<p>I want to be able to run a single spec file’s tests — for the one file I’m editing, for example. <code>rake spec</code> executes all the specs. My project is not a Rails project, so <code>rake spec:doc</code> doesn’t work.</p>
<p>Don’t know if this matters, but here is my directory structure.</p>
<pre>
./Rakefile
./lib
./lib/cushion.rb
./lib/cushion
./lib/cushion/doc.rb
./lib/cushion/db.rb
./spec
./spec/spec.opts
./spec/spec_helper.rb
./spec/db_spec.rb
</pre>
</section>
<section id="answer-accepted-score-381" class="level4">
<h4>Answer accepted (score 381)</h4>
<p>Or you can skip rake and use the ‘rspec’ command:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb558-1"><a href="#cb558-1"></a>rspec path/to/spec/file.rb</span></code></pre></div>
<p>In your case I think as long as your ./spec/db_spec.rb file includes the appropriate helpers, it should work fine.</p>
<p>If you’re using an older version of rspec it is:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb559-1"><a href="#cb559-1"></a>spec path/to/spec/file.rb</span></code></pre></div>
</section>
<section id="answer-2-score-199" class="level4">
<h4>Answer 2 (score 199)</h4>
<p>The raw invocation:</p>
<pre>
rake spec SPEC=spec/controllers/sessions_controller_spec.rb \
          SPEC_OPTS="-e \"should log in with cookie\""
</pre>
<p>Now figure out how to embed this into your editor.</p>
</section>
<section id="answer-3-score-118" class="level4">
<h4>Answer 3 (score 118)</h4>
<p>This question is an old one, but it shows up at the top of Google when searching for how to run a single test. I don’t know if it’s a recent addition, but to run a single test out of a spec you can do the following:</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb560-1"><a href="#cb560-1"></a>rspec path/to/spec:&lt;line number&gt;</span></code></pre></div>
<p>where -line number- is a line number that contains part of your test. For example, if you had a spec like:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb561-1"><a href="#cb561-1"></a><span class="dv">1</span>: </span>
<span id="cb561-2"><a href="#cb561-2"></a><span class="dv">2</span>: it <span class="st">&quot;should be awesome&quot;</span> <span class="kw">do</span></span>
<span id="cb561-3"><a href="#cb561-3"></a><span class="dv">3</span>:   foo = <span class="dv">3</span></span>
<span id="cb561-4"><a href="#cb561-4"></a><span class="dv">4</span>:   foo.should eq(<span class="dv">3</span>)</span>
<span id="cb561-5"><a href="#cb561-5"></a><span class="dv">5</span>: <span class="kw">end</span></span>
<span id="cb561-6"><a href="#cb561-6"></a><span class="dv">6</span>:</span></code></pre></div>
<p>Let’s say it’s saved in spec/models/foo_spec.rb. Then you would run:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb562-1"><a href="#cb562-1"></a>rspec spec/models/foo_spec.rb:<span class="dv">2</span></span></code></pre></div>
<p>and it would just run that one spec. In fact, that number could be anything from 2 to 5.</p>
<p>Hope this helps!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-map-with-index-in-ruby-score-195350-in-2015" class="level3">
<h3>98: How to map with index in Ruby? (score <a href="https://stackoverflow.com/q/4697557.html">195350</a> in 2015)</h3>
<section id="question-97" class="level4">
<h4>Question</h4>
<p>What is the easiest way to convert</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb563-1"><a href="#cb563-1"></a>[x1, x2, x3, ... , xN]</span></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb564-1"><a href="#cb564-1"></a>[[x1, <span class="dv">2</span>], [x2, <span class="dv">3</span>], [x3, <span class="dv">4</span>], ... , [xN, N+<span class="dv">1</span>]]</span></code></pre></div>
</section>
<section id="answer-accepted-score-798" class="level4">
<h4>Answer accepted (score 798)</h4>
<p>If you’re using ruby 1.8.7 or 1.9, you can use the fact that iterator methods like <code>each_with_index</code>, when called without a block, return an <code>Enumerator</code> object, which you can call <code>Enumerable</code> methods like <code>map</code> on. So you can do:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb565-1"><a href="#cb565-1"></a>arr.each_with_index.map { |x,i| [x, i+<span class="dv">2</span>] }</span></code></pre></div>
<p>In 1.8.6 you can do:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb566-1"><a href="#cb566-1"></a>require <span class="st">&#39;enumerator&#39;</span></span>
<span id="cb566-2"><a href="#cb566-2"></a>arr.enum_for(<span class="st">:each_with_index</span>).map { |x,i| [x, i+<span class="dv">2</span>] }</span></code></pre></div>
</section>
<section id="answer-2-score-245" class="level4">
<h4>Answer 2 (score 245)</h4>
<p>Ruby has <a href="http://ruby-doc.org/core-2.2.3/Enumerator.html#method-i-with_index" rel="noreferrer">Enumerator#with_index(offset = 0)</a>, so first convert the array to an enumerator using <a href="http://ruby-doc.org/core-2.3.1/Object.html#method-i-to_enum" rel="noreferrer">Object#to_enum</a> or <a href="http://ruby-doc.org/core-2.2.3/Array.html#method-i-map" rel="noreferrer">Array#map</a>:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb567-1"><a href="#cb567-1"></a>[<span class="st">:a</span>, <span class="st">:b</span>, <span class="st">:c</span>].map.with_index(<span class="dv">2</span>).to_a</span>
<span id="cb567-2"><a href="#cb567-2"></a><span class="co">#=&gt; [[:a, 2], [:b, 3], [:c, 4]]</span></span></code></pre></div>
</section>
<section id="answer-3-score-111" class="level4">
<h4>Answer 3 (score 111)</h4>
<p>In ruby 1.9.3 there is a chainable method called <code>with_index</code> which can be chained to map.</p>
<p>For example:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb568-1"><a href="#cb568-1"></a>array.map.with_index { |item, index| ... }</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="learning-ruby-on-rails-score-189430-in-2011" class="level3">
<h3>99: Learning Ruby on Rails (score <a href="https://stackoverflow.com/q/55574.html">189430</a> in 2011)</h3>
<section id="question-98" class="level4">
<h4>Question</h4>
<p>As it stands now, I’m a Java and C# developer. The more and more I look at Ruby on Rails, the more I really want to learn it.</p>
<p>What have you found to be the best route to learn RoR? Would it be easier to develop on Windows, or should I just run a virtual machine with Linux?</p>
<p>Is there an IDE that can match the robustness of Visual Studio? Any programs to develop that give a good overhead of what to do? Any good books?</p>
<p>Seriously, any tips/tricks/rants would be awesome.</p>
</section>
<section id="answer-accepted-score-205" class="level4">
<h4>Answer accepted (score 205)</h4>
<p>I’ve been moving from C# in my professional career to looking at Ruby and RoR in my personal life, and I’ve found linux to be slightly more appealing personally for development. Particularly now that I’ve started using git, the implementation is cleaner on linux.</p>
<p>Currently I’m dual booting and getting closer to running Ubuntu full time. I’m using gedit with various plugins for the development environment. And as of late 2010, I’m making the push to use Vim for development, even over Textmate on OS X.</p>
<p>A large amount of the Rails developers are using (gasp) Macs, which has actually got me thinking in that direction.</p>
<p>Although I haven’t tried it, <a href="http://www.sapphiresteel.com/" rel="nofollow noreferrer">Ruby in Steel</a> gives you a Ruby IDE inside the Visual Studio world, and <a href="http://www.ironruby.net/" rel="nofollow noreferrer">IronRuby</a> is the .NET flavor of Ruby, if you’re interested.</p>
<p>As far as books are concerned, the <em><a href="http://pragprog.com/titles/ruby3/programming-ruby-3" rel="nofollow noreferrer">Programming Ruby</a></em> (also known as the Pickaxe) book from the Pragmatic Programmers is the de-facto for learning Ruby. I bit the bullet and purchased that book and <em><a href="http://pragprog.com/book/rails4/agile-web-development-with-rails" rel="nofollow noreferrer">Agile Web Development with Rails</a></em>; both books have been excellent.</p>
<p><a href="http://peepcode.com/" rel="nofollow noreferrer">Peepcode</a> screencasts and PDF books have also been great for getting started; at $9 per screencast it’s hard to go wrong. I actually bought a 5-pack.</p>
<p>Also check out the following:</p>
<ul>
<li>
<a href="http://guides.rubyonrails.org/" rel="nofollow noreferrer">Official Rails Guides</a>
</li>
<li>
<a href="http://railscasts.com/" rel="nofollow noreferrer">Railscasts</a>
</li>
<li>
<a href="http://railsapi.com/" rel="nofollow noreferrer">railsapi.com</a> or <a href="http://apidock.com/rails" rel="nofollow noreferrer">Ruby on Rails - APIdock</a>
</li>
<li>
<a href="http://rubyshow.com/" rel="nofollow noreferrer">The Ruby Show</a>
</li>
<li>
<a href="http://railsforzombies.org" rel="nofollow noreferrer">Rails for Zombies</a>
</li>
<li>
<a href="http://www.softiesonrails.com/" rel="nofollow noreferrer">Softies on Rails</a> - Ruby on Rails for .NET Developers
</li>
<li>
<a href="http://podcast.rubyonrails.org/" rel="nofollow noreferrer">Rails Podcast</a>
</li>
<li>
<a href="http://www.codeschool.com/courses/rails-best-practices" rel="nofollow noreferrer">Rails Best Practices</a>
</li>
</ul>
<p>I’ve burned through the backlog of Rails and Rails Envy podcasts in the past month and they have provided wonderful insight into lots of topics, even regarding software development in general.</p>
</section>
<section id="answer-2-score-125-1" class="level4">
<h4>Answer 2 (score 125)</h4>
<p>Beware, the rails world is a massively frustrating mess of outdated and inconsistent documentation and examples. It is maybe one of the fastest moving and most faddish development communities there is. By the time you learn something it will already have changed. Even the books are not consistent in which version of rails they are talking about. Documentation by blogging! enough said.</p>
<p>I currently do RoR on windows. My advice is to avoid windows if you can. Lots of things don’t work and the rails community really really doesn’t care about you. The move to Git has really messed me up since it doesn’t work very well on windows. A lot of gems will fail because of this (Heroku looks like a cool tool - too bad for me it can’t handle window’s Git setup). Capistrano is out. It goes on and annoyingly on.</p>
<p>Plus, in the back of your mind, you always wonder when something doesn’t work “Is it a rails/windows problem?” I am not sure this is solved by using linux because linux brings its own hassles like constantly having to upgrade all those different dependencies, etc…If that’s the kind of thing you enjoy it might be an okay choice for you. Those days of enjoying system fiddling are behind me and I just want to get on with doing my work. I am planning on installing ubuntu on a home machine just so i can get familiar with things like capistrano so maybe my opinion will change.</p>
<p>I’d highly suggest if you are going to do rails dev for any amount of time you seriously consider getting a Mac. If you value your time and sanity it will pay for itself almost instantly. Depending on how you value your time 10 hours of debugging windows/linux setup problems and you have spend as much as a Mac costs anyway.</p>
<p>Rails is a joy compared to what it replaces but it is a bit of a pain in that its proponents skip right past a lot of the boring but important stuff like documentation, compatibility issues and community building. It is way more powerful than other frameworks like Django but I sometimes look over at the Django documentation and community and sigh like a guy with a wild sexy girlfriend looking at his friend’s plain but sane and stable wife. But then rails adds a feature and I go “Ohhh shiny!”</p>
<p>IMO the Rails Screencasts are better than the Peepcode screencasts. RubyPlus also has screencasts, mind you, they are bit rough around the edges. BuildingWebApps has a free online course that starts doing screencasts halfway through.</p>
</section>
<section id="answer-3-score-96" class="level4">
<h4>Answer 3 (score 96)</h4>
<p>Path of least resistance:</p>
<ul>
<li>
Have a simple web project in mind.
</li>
<li>
Go to <strong>rubyonrails.org</strong> and look at their “Blog in 15 minutes” screencast to get excited.
</li>
<li>
Get a copy of O’Reilly Media’s <strong>Learning Ruby</strong>
</li>
<li>
Get a Mac or Linux box.<br> (Fewer early Rails frustrations due to the fact that Rails is generally developed on these.)
</li>
<li>
Get a copy of <strong>Agile Web Development with Rails</strong>.
</li>
<li>
Get the version of Ruby and Rails described in that book.
</li>
<li>
Run through that book’s first section to get a feel for what it’s like.
</li>
<li>
Go to <strong>railscasts.com</strong> and view at the earliest videos for a closer look.
</li>
<li>
Buy <strong>The Rails Way</strong> by Obie Fernandez to get a deeper understanding of Rails and what it’s doing.
</li>
<li>
Then upgrade to the newest production version of Rails, and view the latest railscasts.com videos.
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-remove-rvm-ruby-version-manager-from-my-system-score-188959-in-2014" class="level3">
<h3>100: How can I remove RVM (Ruby Version Manager) from my system? (score <a href="https://stackoverflow.com/q/3558656.html">188959</a> in 2014)</h3>
<section id="question-99" class="level4">
<h4>Question</h4>
<p>How can I remove RVM (Ruby Version Manager) from my system?</p>
</section>
<section id="answer-accepted-score-889" class="level4">
<h4>Answer accepted (score 889)</h4>
<p>There’s a simple command built-in that will pull it:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb569-1"><a href="#cb569-1"></a>rvm implode</span></code></pre></div>
<p>This will remove the <code>rvm/</code> directory and all the rubies built within it. In order to remove the final trace of rvm, you need to remove the rvm gem, too:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb570-1"><a href="#cb570-1"></a>gem uninstall rvm</span></code></pre></div>
<p>If you’ve made modifications to your <code>PATH</code> you might want to pull those, too. Check your <code>.bashrc</code>, <code>.profile</code> and <code>.bash_profile</code> files, among other things.</p>
<p>You may also have an <code>/etc/rvmrc</code> file, or one in your home directory <code>~/.rvmrc</code> that may need to be removed as well.</p>
</section>
<section id="answer-2-score-54" class="level4">
<h4>Answer 2 (score 54)</h4>
<p>If the other answers don’t remove RVM throughly enough for you, <a href="https://rvm.io/support/troubleshooting/" rel="noreferrer">RVM’s Troubleshooting page</a> contains this section:</p>
<blockquote>
<h5>
How do I completely clean out all traces of RVM from my system, including for system wide installs?
</h2>
<p>Here is a custom script which we name as <code>cleanout-rvm</code>. While you can definitely use <code>rvm implode</code> as a regular user or <code>rvmsudo rvm implode</code> for a system wide install, this script is useful as it steps completely outside of RVM and cleans out RVM without using RVM itself, leaving no traces.</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb571-1"><a href="#cb571-1"></a><span class="kw">#!/bin/bash</span></span>
<span id="cb571-2"><a href="#cb571-2"></a><span class="ot">/usr/</span>bin/sudo rm -rf <span class="dt">$HOME</span>/.rvm <span class="dt">$HOME</span>/.rvmrc <span class="ot">/etc/</span>rvmrc <span class="ot">/etc/</span>profile.d/rvm.sh <span class="ot">/usr/</span>local/rvm <span class="ot">/usr/</span>local/bin/rvm</span>
<span id="cb571-3"><a href="#cb571-3"></a><span class="ot">/usr/</span>bin/sudo <span class="ot">/usr/</span>sbin/groupdel rvm</span>
<span id="cb571-4"><a href="#cb571-4"></a><span class="ot">/bin/</span>echo <span class="st">&quot;RVM is removed. Please check all .bashrc|.bash_profile|.profile|.zshrc for RVM source lines and delete</span></span>
<span id="cb571-5"><a href="#cb571-5"></a><span class="st">or comment out if this was a Per-User installation.&quot;</span></span></code></pre></div>
</blockquote>
</section>
<section id="answer-3-score-31-1" class="level4">
<h4>Answer 3 (score 31)</h4>
<p>When using implode and you see:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb572-1"><a href="#cb572-1"></a><span class="dt">Psychologist</span> intervened, cancelling implosion, crisis avoided :)</span></code></pre></div>
<p>Then you may want to use –force</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb573-1"><a href="#cb573-1"></a>rvm implode --force</span></code></pre></div>
<p>Then remove rvm from following locations:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb574-1"><a href="#cb574-1"></a>rm -rf <span class="ot">/usr/</span>local/rvm</span>
<span id="cb574-2"><a href="#cb574-2"></a>sudo rm <span class="ot">/etc/</span>profile.d/rvm.sh</span>
<span id="cb574-3"><a href="#cb574-3"></a>sudo rm <span class="ot">/etc/</span>rvmrc</span>
<span id="cb574-4"><a href="#cb574-4"></a>sudo rm ~<span class="ot">/.rvmrc</span></span></code></pre></div>
<p>Check the following files and remove or comment out references to rvm</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb575-1"><a href="#cb575-1"></a>~<span class="ot">/.bashrc </span></span>
<span id="cb575-2"><a href="#cb575-2"></a><span class="ot">~/</span>.bash_profile </span>
<span id="cb575-3"><a href="#cb575-3"></a>~<span class="ot">/.profile </span></span>
<span id="cb575-4"><a href="#cb575-4"></a><span class="ot">~/</span>.zshrc</span>
<span id="cb575-5"><a href="#cb575-5"></a>~<span class="ot">/.zlogin</span></span></code></pre></div>
<p>Comment-out / Remove the following lines from /etc/profile</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb576-1"><a href="#cb576-1"></a> source <span class="ot">/etc/</span>profile.d/sm.sh</span>
<span id="cb576-2"><a href="#cb576-2"></a> source <span class="ot">/etc/</span>profile.d/rvm.sh</span></code></pre></div>
<p>/etc/profile is a readonly file so use</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb577-1"><a href="#cb577-1"></a>sudo vim <span class="ot">/etc/</span>profile</span></code></pre></div>
<p>And after making the change write using a bang!</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb578-1"><a href="#cb578-1"></a><span class="st">:w!</span></span></code></pre></div>
Finally re-login / restart your terminal.<br />

</section>
</section>
</section>
</body>
</html>
